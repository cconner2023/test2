(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();function _C(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sb={exports:{}},xp={};var wA;function IC(){if(wA)return xp;wA=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function a(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return xp.Fragment=i,xp.jsx=a,xp.jsxs=a,xp}var AA;function NC(){return AA||(AA=1,Sb.exports=IC()),Sb.exports}var x=NC(),kb={exports:{}},ui={};var SA;function TC(){if(SA)return ui;SA=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),A=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=A&&$[A]||$["@@iterator"],typeof $=="function"?$:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,I={};function T($,oe,we){this.props=$,this.context=oe,this.refs=I,this.updater=we||k}T.prototype.isReactComponent={},T.prototype.setState=function($,oe){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,oe,"setState")},T.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function N(){}N.prototype=T.prototype;function j($,oe,we){this.props=$,this.context=oe,this.refs=I,this.updater=we||k}var B=j.prototype=new N;B.constructor=j,E(B,T.prototype),B.isPureReactComponent=!0;var U=Array.isArray;function F(){}var P={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function V($,oe,we){var be=we.ref;return{$$typeof:r,type:$,key:oe,ref:be!==void 0?be:null,props:we}}function L($,oe){return V($.type,oe,$.props)}function Q($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function q($){var oe={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(we){return oe[we]})}var ee=/\/+/g;function X($,oe){return typeof $=="object"&&$!==null&&$.key!=null?q(""+$.key):oe.toString(36)}function ae($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(F,F):($.status="pending",$.then(function(oe){$.status==="pending"&&($.status="fulfilled",$.value=oe)},function(oe){$.status==="pending"&&($.status="rejected",$.reason=oe)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function K($,oe,we,be,Te){var ye=typeof $;(ye==="undefined"||ye==="boolean")&&($=null);var tt=!1;if($===null)tt=!0;else switch(ye){case"bigint":case"string":case"number":tt=!0;break;case"object":switch($.$$typeof){case r:case i:tt=!0;break;case v:return tt=$._init,K(tt($._payload),oe,we,be,Te)}}if(tt)return Te=Te($),tt=be===""?"."+X($,0):be,U(Te)?(we="",tt!=null&&(we=tt.replace(ee,"$&/")+"/"),K(Te,oe,we,"",function(Xe){return Xe})):Te!=null&&(Q(Te)&&(Te=L(Te,we+(Te.key==null||$&&$.key===Te.key?"":(""+Te.key).replace(ee,"$&/")+"/")+tt)),oe.push(Te)),1;tt=0;var Qe=be===""?".":be+":";if(U($))for(var Ge=0;Ge<$.length;Ge++)be=$[Ge],ye=Qe+X(be,Ge),tt+=K(be,oe,we,ye,Te);else if(Ge=w($),typeof Ge=="function")for($=Ge.call($),Ge=0;!(be=$.next()).done;)be=be.value,ye=Qe+X(be,Ge++),tt+=K(be,oe,we,ye,Te);else if(ye==="object"){if(typeof $.then=="function")return K(ae($),oe,we,be,Te);throw oe=String($),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return tt}function ie($,oe,we){if($==null)return $;var be=[],Te=0;return K($,be,"","",function(ye){return oe.call(we,ye,Te++)}),be}function ne($){if($._status===-1){var oe=$._result;oe=oe(),oe.then(function(we){($._status===0||$._status===-1)&&($._status=1,$._result=we)},function(we){($._status===0||$._status===-1)&&($._status=2,$._result=we)}),$._status===-1&&($._status=0,$._result=oe)}if($._status===1)return $._result.default;throw $._result}var J=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},te={map:ie,forEach:function($,oe,we){ie($,function(){oe.apply(this,arguments)},we)},count:function($){var oe=0;return ie($,function(){oe++}),oe},toArray:function($){return ie($,function(oe){return oe})||[]},only:function($){if(!Q($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ui.Activity=y,ui.Children=te,ui.Component=T,ui.Fragment=a,ui.Profiler=l,ui.PureComponent=j,ui.StrictMode=s,ui.Suspense=m,ui.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ui.__COMPILER_RUNTIME={__proto__:null,c:function($){return P.H.useMemoCache($)}},ui.cache=function($){return function(){return $.apply(null,arguments)}},ui.cacheSignal=function(){return null},ui.cloneElement=function($,oe,we){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var be=E({},$.props),Te=$.key;if(oe!=null)for(ye in oe.key!==void 0&&(Te=""+oe.key),oe)!z.call(oe,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&oe.ref===void 0||(be[ye]=oe[ye]);var ye=arguments.length-2;if(ye===1)be.children=we;else if(1<ye){for(var tt=Array(ye),Qe=0;Qe<ye;Qe++)tt[Qe]=arguments[Qe+2];be.children=tt}return V($.type,Te,be)},ui.createContext=function($){return $={$$typeof:d,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:c,_context:$},$},ui.createElement=function($,oe,we){var be,Te={},ye=null;if(oe!=null)for(be in oe.key!==void 0&&(ye=""+oe.key),oe)z.call(oe,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(Te[be]=oe[be]);var tt=arguments.length-2;if(tt===1)Te.children=we;else if(1<tt){for(var Qe=Array(tt),Ge=0;Ge<tt;Ge++)Qe[Ge]=arguments[Ge+2];Te.children=Qe}if($&&$.defaultProps)for(be in tt=$.defaultProps,tt)Te[be]===void 0&&(Te[be]=tt[be]);return V($,ye,Te)},ui.createRef=function(){return{current:null}},ui.forwardRef=function($){return{$$typeof:f,render:$}},ui.isValidElement=Q,ui.lazy=function($){return{$$typeof:v,_payload:{_status:-1,_result:$},_init:ne}},ui.memo=function($,oe){return{$$typeof:g,type:$,compare:oe===void 0?null:oe}},ui.startTransition=function($){var oe=P.T,we={};P.T=we;try{var be=$(),Te=P.S;Te!==null&&Te(we,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(F,J)}catch(ye){J(ye)}finally{oe!==null&&we.types!==null&&(oe.types=we.types),P.T=oe}},ui.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ui.use=function($){return P.H.use($)},ui.useActionState=function($,oe,we){return P.H.useActionState($,oe,we)},ui.useCallback=function($,oe){return P.H.useCallback($,oe)},ui.useContext=function($){return P.H.useContext($)},ui.useDebugValue=function(){},ui.useDeferredValue=function($,oe){return P.H.useDeferredValue($,oe)},ui.useEffect=function($,oe){return P.H.useEffect($,oe)},ui.useEffectEvent=function($){return P.H.useEffectEvent($)},ui.useId=function(){return P.H.useId()},ui.useImperativeHandle=function($,oe,we){return P.H.useImperativeHandle($,oe,we)},ui.useInsertionEffect=function($,oe){return P.H.useInsertionEffect($,oe)},ui.useLayoutEffect=function($,oe){return P.H.useLayoutEffect($,oe)},ui.useMemo=function($,oe){return P.H.useMemo($,oe)},ui.useOptimistic=function($,oe){return P.H.useOptimistic($,oe)},ui.useReducer=function($,oe,we){return P.H.useReducer($,oe,we)},ui.useRef=function($){return P.H.useRef($)},ui.useState=function($){return P.H.useState($)},ui.useSyncExternalStore=function($,oe,we){return P.H.useSyncExternalStore($,oe,we)},ui.useTransition=function(){return P.H.useTransition()},ui.version="19.2.3",ui}var kA;function G4(){return kA||(kA=1,kb.exports=TC()),kb.exports}var D=G4();const Bu=_C(D);var Cb={exports:{}},bp={},Eb={exports:{}},_b={};var CA;function MC(){return CA||(CA=1,(function(r){function i(K,ie){var ne=K.length;K.push(ie);e:for(;0<ne;){var J=ne-1>>>1,te=K[J];if(0<l(te,ie))K[J]=ie,K[ne]=te,ne=J;else break e}}function a(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ie=K[0],ne=K.pop();if(ne!==ie){K[0]=ne;e:for(var J=0,te=K.length,$=te>>>1;J<$;){var oe=2*(J+1)-1,we=K[oe],be=oe+1,Te=K[be];if(0>l(we,ne))be<te&&0>l(Te,we)?(K[J]=Te,K[be]=ne,J=be):(K[J]=we,K[oe]=ne,J=oe);else if(be<te&&0>l(Te,ne))K[J]=Te,K[be]=ne,J=be;else break e}}return ie}function l(K,ie){var ne=K.sortIndex-ie.sortIndex;return ne!==0?ne:K.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var m=[],g=[],v=1,y=null,A=3,w=!1,k=!1,E=!1,I=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function B(K){for(var ie=a(g);ie!==null;){if(ie.callback===null)s(g);else if(ie.startTime<=K)s(g),ie.sortIndex=ie.expirationTime,i(m,ie);else break;ie=a(g)}}function U(K){if(E=!1,B(K),!k)if(a(m)!==null)k=!0,F||(F=!0,q());else{var ie=a(g);ie!==null&&ae(U,ie.startTime-K)}}var F=!1,P=-1,z=5,V=-1;function L(){return I?!0:!(r.unstable_now()-V<z)}function Q(){if(I=!1,F){var K=r.unstable_now();V=K;var ie=!0;try{e:{k=!1,E&&(E=!1,N(P),P=-1),w=!0;var ne=A;try{t:{for(B(K),y=a(m);y!==null&&!(y.expirationTime>K&&L());){var J=y.callback;if(typeof J=="function"){y.callback=null,A=y.priorityLevel;var te=J(y.expirationTime<=K);if(K=r.unstable_now(),typeof te=="function"){y.callback=te,B(K),ie=!0;break t}y===a(m)&&s(m),B(K)}else s(m);y=a(m)}if(y!==null)ie=!0;else{var $=a(g);$!==null&&ae(U,$.startTime-K),ie=!1}}break e}finally{y=null,A=ne,w=!1}ie=void 0}}finally{ie?q():F=!1}}}var q;if(typeof j=="function")q=function(){j(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,X=ee.port2;ee.port1.onmessage=Q,q=function(){X.postMessage(null)}}else q=function(){T(Q,0)};function ae(K,ie){P=T(function(){K(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(K){switch(A){case 1:case 2:case 3:var ie=3;break;default:ie=A}var ne=A;A=ie;try{return K()}finally{A=ne}},r.unstable_requestPaint=function(){I=!0},r.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ne=A;A=K;try{return ie()}finally{A=ne}},r.unstable_scheduleCallback=function(K,ie,ne){var J=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?J+ne:J):ne=J,K){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ne+te,K={id:v++,callback:ie,priorityLevel:K,startTime:ne,expirationTime:te,sortIndex:-1},ne>J?(K.sortIndex=ne,i(g,K),a(m)===null&&K===a(g)&&(E?(N(P),P=-1):E=!0,ae(U,ne-J))):(K.sortIndex=te,i(m,K),k||w||(k=!0,F||(F=!0,q()))),K},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(K){var ie=A;return function(){var ne=A;A=ie;try{return K.apply(this,arguments)}finally{A=ne}}}})(_b)),_b}var EA;function RC(){return EA||(EA=1,Eb.exports=MC()),Eb.exports}var Ib={exports:{}},Fo={};var _A;function OC(){if(_A)return Fo;_A=1;var r=G4();function i(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,g,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:m,containerInfo:g,implementation:v}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Fo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fo.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(i(299));return c(m,g,null,v)},Fo.flushSync=function(m){var g=d.T,v=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=v,s.d.f()}},Fo.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Fo.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Fo.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,y=f(v,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:A,fetchPriority:w}):v==="script"&&s.d.X(m,{crossOrigin:y,integrity:A,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Fo.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Fo.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,y=f(v,g.crossOrigin);s.d.L(m,v,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Fo.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=f(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Fo.requestFormReset=function(m){s.d.r(m)},Fo.unstable_batchedUpdates=function(m,g){return m(g)},Fo.useFormState=function(m,g,v){return d.H.useFormState(m,g,v)},Fo.useFormStatus=function(){return d.H.useHostTransitionStatus()},Fo.version="19.2.3",Fo}var IA;function Y5(){if(IA)return Ib.exports;IA=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Ib.exports=OC(),Ib.exports}var NA;function DC(){if(NA)return bp;NA=1;var r=RC(),i=G4(),a=Y5();function s(u){var p="https://react.dev/errors/"+u;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+u+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function c(u){var p=u,b=u;if(u.alternate)for(;p.return;)p=p.return;else{u=p;do p=u,(p.flags&4098)!==0&&(b=p.return),u=p.return;while(u)}return p.tag===3?b:null}function d(u){if(u.tag===13){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function f(u){if(u.tag===31){var p=u.memoizedState;if(p===null&&(u=u.alternate,u!==null&&(p=u.memoizedState)),p!==null)return p.dehydrated}return null}function m(u){if(c(u)!==u)throw Error(s(188))}function g(u){var p=u.alternate;if(!p){if(p=c(u),p===null)throw Error(s(188));return p!==u?null:u}for(var b=u,S=p;;){var _=b.return;if(_===null)break;var M=_.alternate;if(M===null){if(S=_.return,S!==null){b=S;continue}break}if(_.child===M.child){for(M=_.child;M;){if(M===b)return m(_),u;if(M===S)return m(_),p;M=M.sibling}throw Error(s(188))}if(b.return!==S.return)b=_,S=M;else{for(var G=!1,re=_.child;re;){if(re===b){G=!0,b=_,S=M;break}if(re===S){G=!0,S=_,b=M;break}re=re.sibling}if(!G){for(re=M.child;re;){if(re===b){G=!0,b=M,S=_;break}if(re===S){G=!0,S=M,b=_;break}re=re.sibling}if(!G)throw Error(s(189))}}if(b.alternate!==S)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?u:p}function v(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u;for(u=u.child;u!==null;){if(p=v(u),p!==null)return p;u=u.sibling}return null}var y=Object.assign,A=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),j=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function q(u){return u===null||typeof u!="object"?null:(u=Q&&u[Q]||u["@@iterator"],typeof u=="function"?u:null)}var ee=Symbol.for("react.client.reference");function X(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===ee?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case E:return"Fragment";case T:return"Profiler";case I:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList";case V:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case k:return"Portal";case j:return u.displayName||"Context";case N:return(u._context.displayName||"Context")+".Consumer";case B:var p=u.render;return u=u.displayName,u||(u=p.displayName||p.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case P:return p=u.displayName||null,p!==null?p:X(u.type)||"Memo";case z:p=u._payload,u=u._init;try{return X(u(p))}catch{}}return null}var ae=Array.isArray,K=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},J=[],te=-1;function $(u){return{current:u}}function oe(u){0>te||(u.current=J[te],J[te]=null,te--)}function we(u,p){te++,J[te]=u.current,u.current=p}var be=$(null),Te=$(null),ye=$(null),tt=$(null);function Qe(u,p){switch(we(ye,p),we(Te,u),we(be,null),p.nodeType){case 9:case 11:u=(u=p.documentElement)&&(u=u.namespaceURI)?K0(u):0;break;default:if(u=p.tagName,p=p.namespaceURI)p=K0(p),u=J0(p,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}oe(be),we(be,u)}function Ge(){oe(be),oe(Te),oe(ye)}function Xe(u){u.memoizedState!==null&&we(tt,u);var p=be.current,b=J0(p,u.type);p!==b&&(we(Te,u),we(be,b))}function Je(u){Te.current===u&&(oe(be),oe(Te)),tt.current===u&&(oe(tt),pp._currentValue=ne)}var dt,vt;function _t(u){if(dt===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);dt=p&&p[1]||"",vt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+u+vt}var xt=!1;function bt(u,p){if(!u||xt)return"";xt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(p){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(We){var He=We}Reflect.construct(u,[],ut)}else{try{ut.call()}catch(We){He=We}u.call(ut.prototype)}}else{try{throw Error()}catch(We){He=We}(ut=u())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(We){if(We&&He&&typeof We.stack=="string")return[We.stack,He.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=S.DetermineComponentFrameRoot(),G=M[0],re=M[1];if(G&&re){var Ae=G.split(`
`),Le=re.split(`
`);for(_=S=0;S<Ae.length&&!Ae[S].includes("DetermineComponentFrameRoot");)S++;for(;_<Le.length&&!Le[_].includes("DetermineComponentFrameRoot");)_++;if(S===Ae.length||_===Le.length)for(S=Ae.length-1,_=Le.length-1;1<=S&&0<=_&&Ae[S]!==Le[_];)_--;for(;1<=S&&0<=_;S--,_--)if(Ae[S]!==Le[_]){if(S!==1||_!==1)do if(S--,_--,0>_||Ae[S]!==Le[_]){var nt=`
`+Ae[S].replace(" at new "," at ");return u.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",u.displayName)),nt}while(1<=S&&0<=_);break}}}finally{xt=!1,Error.prepareStackTrace=b}return(b=u?u.displayName||u.name:"")?_t(b):""}function kt(u,p){switch(u.tag){case 26:case 27:case 5:return _t(u.type);case 16:return _t("Lazy");case 13:return u.child!==p&&p!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return bt(u.type,!1);case 11:return bt(u.type.render,!1);case 1:return bt(u.type,!0);case 31:return _t("Activity");default:return""}}function Pt(u){try{var p="",b=null;do p+=kt(u,b),b=u,u=u.return;while(u);return p}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var Rt=Object.prototype.hasOwnProperty,Wt=r.unstable_scheduleCallback,zt=r.unstable_cancelCallback,Ct=r.unstable_shouldYield,Yt=r.unstable_requestPaint,jt=r.unstable_now,an=r.unstable_getCurrentPriorityLevel,rn=r.unstable_ImmediatePriority,Kt=r.unstable_UserBlockingPriority,Jt=r.unstable_NormalPriority,Zt=r.unstable_LowPriority,Qt=r.unstable_IdlePriority,mn=r.log,cn=r.unstable_setDisableYieldValue,dn=null,Ht=null;function Bt(u){if(typeof mn=="function"&&cn(u),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(dn,u)}catch{}}var Y=Math.clz32?Math.clz32:ge,le=Math.log,se=Math.LN2;function ge(u){return u>>>=0,u===0?32:31-(le(u)/se|0)|0}var ve=256,_e=262144,pe=4194304;function Oe(u){var p=u&42;if(p!==0)return p;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function de(u,p,b){var S=u.pendingLanes;if(S===0)return 0;var _=0,M=u.suspendedLanes,G=u.pingedLanes;u=u.warmLanes;var re=S&134217727;return re!==0?(S=re&~M,S!==0?_=Oe(S):(G&=re,G!==0?_=Oe(G):b||(b=re&~u,b!==0&&(_=Oe(b))))):(re=S&~M,re!==0?_=Oe(re):G!==0?_=Oe(G):b||(b=S&~u,b!==0&&(_=Oe(b)))),_===0?0:p!==0&&p!==_&&(p&M)===0&&(M=_&-_,b=p&-p,M>=b||M===32&&(b&4194048)!==0)?p:_}function ke(u,p){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&p)===0}function Ee(u,p){switch(u){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var u=pe;return pe<<=1,(pe&62914560)===0&&(pe=4194304),u}function xe(u){for(var p=[],b=0;31>b;b++)p.push(u);return p}function Ne(u,p){u.pendingLanes|=p,p!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function je(u,p,b,S,_,M){var G=u.pendingLanes;u.pendingLanes=b,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=b,u.entangledLanes&=b,u.errorRecoveryDisabledLanes&=b,u.shellSuspendCounter=0;var re=u.entanglements,Ae=u.expirationTimes,Le=u.hiddenUpdates;for(b=G&~b;0<b;){var nt=31-Y(b),ut=1<<nt;re[nt]=0,Ae[nt]=-1;var He=Le[nt];if(He!==null)for(Le[nt]=null,nt=0;nt<He.length;nt++){var We=He[nt];We!==null&&(We.lane&=-536870913)}b&=~ut}S!==0&&Se(u,S,0),M!==0&&_===0&&u.tag!==0&&(u.suspendedLanes|=M&~(G&~p))}function Se(u,p,b){u.pendingLanes|=p,u.suspendedLanes&=~p;var S=31-Y(p);u.entangledLanes|=p,u.entanglements[S]=u.entanglements[S]|1073741824|b&261930}function ze(u,p){var b=u.entangledLanes|=p;for(u=u.entanglements;b;){var S=31-Y(b),_=1<<S;_&p|u[S]&p&&(u[S]|=p),b&=~_}}function Pe(u,p){var b=p&-p;return b=(b&42)!==0?1:Be(b),(b&(u.suspendedLanes|p))!==0?0:b}function Be(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function at(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Ze(){var u=ie.p;return u!==0?u:(u=window.event,u===void 0?32:pA(u.type))}function ft(u,p){var b=ie.p;try{return ie.p=u,p()}finally{ie.p=b}}var Ve=Math.random().toString(36).slice(2),$e="__reactFiber$"+Ve,Me="__reactProps$"+Ve,it="__reactContainer$"+Ve,st="__reactEvents$"+Ve,mt="__reactListeners$"+Ve,Tt="__reactHandles$"+Ve,Ot="__reactResources$"+Ve,Et="__reactMarker$"+Ve;function Dt(u){delete u[$e],delete u[Me],delete u[st],delete u[mt],delete u[Tt]}function wt(u){var p=u[$e];if(p)return p;for(var b=u.parentNode;b;){if(p=b[it]||b[$e]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(u=cp(u);u!==null;){if(b=u[$e])return b;u=cp(u)}return p}u=b,b=u.parentNode}return null}function en(u){if(u=u[$e]||u[it]){var p=u.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return u}return null}function gt(u){var p=u.tag;if(p===5||p===26||p===27||p===6)return u.stateNode;throw Error(s(33))}function un(u){var p=u[Ot];return p||(p=u[Ot]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Vt(u){u[Et]=!0}var fn=new Set,$n={};function ei(u,p){Dn(u,p),Dn(u+"Capture",p)}function Dn(u,p){for($n[u]=p,u=0;u<p.length;u++)fn.add(p[u])}var ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zn={},mi={};function Fn(u){return Rt.call(mi,u)?!0:Rt.call(zn,u)?!1:ai.test(u)?mi[u]=!0:(zn[u]=!0,!1)}function Hn(u,p,b){if(Fn(p))if(b===null)u.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":u.removeAttribute(p);return;case"boolean":var S=p.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){u.removeAttribute(p);return}}u.setAttribute(p,""+b)}}function _n(u,p,b){if(b===null)u.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(p);return}u.setAttribute(p,""+b)}}function vn(u,p,b,S){if(S===null)u.removeAttribute(b);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(b);return}u.setAttributeNS(p,b,""+S)}}function kn(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Ai(u){var p=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Ei(u,p,b){var S=Object.getOwnPropertyDescriptor(u.constructor.prototype,p);if(!u.hasOwnProperty(p)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var _=S.get,M=S.set;return Object.defineProperty(u,p,{configurable:!0,get:function(){return _.call(this)},set:function(G){b=""+G,M.call(this,G)}}),Object.defineProperty(u,p,{enumerable:S.enumerable}),{getValue:function(){return b},setValue:function(G){b=""+G},stopTracking:function(){u._valueTracker=null,delete u[p]}}}}function Ji(u){if(!u._valueTracker){var p=Ai(u)?"checked":"value";u._valueTracker=Ei(u,p,""+u[p])}}function nn(u){if(!u)return!1;var p=u._valueTracker;if(!p)return!0;var b=p.getValue(),S="";return u&&(S=Ai(u)?u.checked?"true":"false":u.value),u=S,u!==b?(p.setValue(u),!0):!1}function yn(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var qn=/[\n"\\]/g;function Tn(u){return u.replace(qn,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Gn(u,p,b,S,_,M,G,re){u.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?u.type=G:u.removeAttribute("type"),p!=null?G==="number"?(p===0&&u.value===""||u.value!=p)&&(u.value=""+kn(p)):u.value!==""+kn(p)&&(u.value=""+kn(p)):G!=="submit"&&G!=="reset"||u.removeAttribute("value"),p!=null?Vn(u,G,kn(p)):b!=null?Vn(u,G,kn(b)):S!=null&&u.removeAttribute("value"),_==null&&M!=null&&(u.defaultChecked=!!M),_!=null&&(u.checked=_&&typeof _!="function"&&typeof _!="symbol"),re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?u.name=""+kn(re):u.removeAttribute("name")}function gi(u,p,b,S,_,M,G,re){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(u.type=M),p!=null||b!=null){if(!(M!=="submit"&&M!=="reset"||p!=null)){Ji(u);return}b=b!=null?""+kn(b):"",p=p!=null?""+kn(p):b,re||p===u.value||(u.value=p),u.defaultValue=p}S=S??_,S=typeof S!="function"&&typeof S!="symbol"&&!!S,u.checked=re?u.checked:!!S,u.defaultChecked=!!S,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(u.name=G),Ji(u)}function Vn(u,p,b){p==="number"&&yn(u.ownerDocument)===u||u.defaultValue===""+b||(u.defaultValue=""+b)}function ln(u,p,b,S){if(u=u.options,p){p={};for(var _=0;_<b.length;_++)p["$"+b[_]]=!0;for(b=0;b<u.length;b++)_=p.hasOwnProperty("$"+u[b].value),u[b].selected!==_&&(u[b].selected=_),_&&S&&(u[b].defaultSelected=!0)}else{for(b=""+kn(b),p=null,_=0;_<u.length;_++){if(u[_].value===b){u[_].selected=!0,S&&(u[_].defaultSelected=!0);return}p!==null||u[_].disabled||(p=u[_])}p!==null&&(p.selected=!0)}}function ti(u,p,b){if(p!=null&&(p=""+kn(p),p!==u.value&&(u.value=p),b==null)){u.defaultValue!==p&&(u.defaultValue=p);return}u.defaultValue=b!=null?""+kn(b):""}function Qi(u,p,b,S){if(p==null){if(S!=null){if(b!=null)throw Error(s(92));if(ae(S)){if(1<S.length)throw Error(s(93));S=S[0]}b=S}b==null&&(b=""),p=b}b=kn(p),u.defaultValue=b,S=u.textContent,S===b&&S!==""&&S!==null&&(u.value=S),Ji(u)}function Bi(u,p){if(p){var b=u.firstChild;if(b&&b===u.lastChild&&b.nodeType===3){b.nodeValue=p;return}}u.textContent=p}var Ir=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _i(u,p,b){var S=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?S?u.setProperty(p,""):p==="float"?u.cssFloat="":u[p]="":S?u.setProperty(p,b):typeof b!="number"||b===0||Ir.has(p)?p==="float"?u.cssFloat=b:u[p]=(""+b).trim():u[p]=b+"px"}function Nr(u,p,b){if(p!=null&&typeof p!="object")throw Error(s(62));if(u=u.style,b!=null){for(var S in b)!b.hasOwnProperty(S)||p!=null&&p.hasOwnProperty(S)||(S.indexOf("--")===0?u.setProperty(S,""):S==="float"?u.cssFloat="":u[S]="");for(var _ in p)S=p[_],p.hasOwnProperty(_)&&b[_]!==S&&_i(u,_,S)}else for(var M in p)p.hasOwnProperty(M)&&_i(u,M,p[M])}function rr(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(u){return ar.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Pi(){}var hr=null;function Lr(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var pr=null,xr=null;function wa(u){var p=en(u);if(p&&(u=p.stateNode)){var b=u[Me]||null;e:switch(u=p.stateNode,p.type){case"input":if(Gn(u,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=u;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Tn(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var S=b[p];if(S!==u&&S.form===u.form){var _=S[Me]||null;if(!_)throw Error(s(90));Gn(S,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(p=0;p<b.length;p++)S=b[p],S.form===u.form&&nn(S)}break e;case"textarea":ti(u,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&ln(u,!!b.multiple,p,!1)}}}var br=!1;function Ba(u,p,b){if(br)return u(p,b);br=!0;try{var S=u(p);return S}finally{if(br=!1,(pr!==null||xr!==null)&&(uu(),pr&&(p=pr,u=xr,xr=pr=null,wa(p),u)))for(p=0;p<u.length;p++)wa(u[p])}}function yr(u,p){var b=u.stateNode;if(b===null)return null;var S=b[Me]||null;if(S===null)return null;b=S[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(u=u.type,S=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!S;break e;default:u=!1}if(u)return null;if(b&&typeof b!="function")throw Error(s(231,p,typeof b));return b}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tr=!1;if(zr)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Tr=!1}var Hr=null,_a=null,qr=null;function Va(){if(qr)return qr;var u,p=_a,b=p.length,S,_="value"in Hr?Hr.value:Hr.textContent,M=_.length;for(u=0;u<b&&p[u]===_[u];u++);var G=b-u;for(S=1;S<=G&&p[b-S]===_[M-S];S++);return qr=_.slice(u,1<S?1-S:void 0)}function Gr(u){var p=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&p===13&&(u=13)):u=p,u===10&&(u=13),32<=u||u===13?u:0}function la(){return!0}function Vr(){return!1}function wr(u){function p(b,S,_,M,G){this._reactName=b,this._targetInst=_,this.type=S,this.nativeEvent=M,this.target=G,this.currentTarget=null;for(var re in u)u.hasOwnProperty(re)&&(b=u[re],this[re]=b?b(M):M[re]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?la:Vr,this.isPropagationStopped=Vr,this}return y(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),p}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=wr(or),lr=y({},or,{view:0,detail:0}),us=wr(lr),Mr,es,Yr,Mn=y({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Yr&&(Yr&&u.type==="mousemove"?(Mr=u.screenX-Yr.screenX,es=u.screenY-Yr.screenY):es=Mr=0,Yr=u),Mr)},movementY:function(u){return"movementY"in u?u.movementY:es}}),Hi=wr(Mn),Rr=y({},Mn,{dataTransfer:0}),ta=wr(Rr),Ia=y({},lr,{relatedTarget:0}),Ci=wr(Ia),Aa=y({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),Na=wr(Aa),na=y({},or,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),$s=wr(na),Qr=y({},or,{data:0}),Co=wr(Qr),ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ws={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pa(u){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(u):(u=Ws[u])?!!p[u]:!1}function gs(){return pa}var Ta=y({},lr,{key:function(u){if(u.key){var p=ts[u.key]||u.key;if(p!=="Unidentified")return p}return u.type==="keypress"?(u=Gr(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?$r[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(u){return u.type==="keypress"?Gr(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Gr(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),vs=wr(Ta),xs=y({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lo=wr(xs),Gt=y({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),qi=wr(Gt),Zi=y({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),ia=wr(Zi),cr=y({},Mn,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),ma=wr(cr),Ma=y({},or,{newState:0,oldState:0}),Ns=wr(Ma),Nt=[9,13,27,32],$t=zr&&"CompositionEvent"in window,Yn=null;zr&&"documentMode"in document&&(Yn=document.documentMode);var Kn=zr&&"TextEvent"in window&&!Yn,Jn=zr&&(!$t||Yn&&8<Yn&&11>=Yn),Si=" ",Wn=!1;function $i(u,p){switch(u){case"keyup":return Nt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ii(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var fi=!1;function Fi(u,p){switch(u){case"compositionend":return Ii(p);case"keypress":return p.which!==32?null:(Wn=!0,Si);case"textInput":return u=p.data,u===Si&&Wn?null:u;default:return null}}function Gi(u,p){if(fi)return u==="compositionend"||!$t&&$i(u,p)?(u=Va(),qr=_a=Hr=null,fi=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Jn&&p.locale!=="ko"?null:p.data;default:return null}}var mr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p==="input"?!!mr[u.type]:p==="textarea"}function Ni(u,p,b,S){pr?xr?xr.push(S):xr=[S]:pr=S,p=vu(p,"onChange"),0<p.length&&(b=new ds("onChange","change",null,b,S),u.push({event:b,listeners:p}))}var Ti=null,ci=null;function Mi(u){Sv(u,0)}function Ar(u){var p=gt(u);if(nn(p))return u}function gr(u,p){if(u==="change")return p}var ga=!1;if(zr){var Sa;if(zr){var ns="oninput"in document;if(!ns){var Pa=document.createElement("div");Pa.setAttribute("oninput","return;"),ns=typeof Pa.oninput=="function"}Sa=ns}else Sa=!1;ga=Sa&&(!document.documentMode||9<document.documentMode)}function Un(){Ti&&(Ti.detachEvent("onpropertychange",ni),ci=Ti=null)}function ni(u){if(u.propertyName==="value"&&Ar(ci)){var p=[];Ni(p,ci,u,Lr(u)),Ba(Mi,p)}}function hi(u,p,b){u==="focusin"?(Un(),Ti=p,ci=b,Ti.attachEvent("onpropertychange",ni)):u==="focusout"&&Un()}function Wi(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Ar(ci)}function Ri(u,p){if(u==="click")return Ar(p)}function er(u,p){if(u==="input"||u==="change")return Ar(p)}function Yi(u,p){return u===p&&(u!==0||1/u===1/p)||u!==u&&p!==p}var Oi=typeof Object.is=="function"?Object.is:Yi;function Or(u,p){if(Oi(u,p))return!0;if(typeof u!="object"||u===null||typeof p!="object"||p===null)return!1;var b=Object.keys(u),S=Object.keys(p);if(b.length!==S.length)return!1;for(S=0;S<b.length;S++){var _=b[S];if(!Rt.call(p,_)||!Oi(u[_],p[_]))return!1}return!0}function Ya(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function bs(u,p){var b=Ya(u);u=0;for(var S;b;){if(b.nodeType===3){if(S=u+b.textContent.length,u<=p&&S>=p)return{node:b,offset:p-u};u=S}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Ya(b)}}function Ts(u,p){return u&&p?u===p?!0:u&&u.nodeType===3?!1:p&&p.nodeType===3?Ts(u,p.parentNode):"contains"in u?u.contains(p):u.compareDocumentPosition?!!(u.compareDocumentPosition(p)&16):!1:!1}function Xs(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var p=yn(u.document);p instanceof u.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)u=p.contentWindow;else break;p=yn(u.document)}return p}function Ms(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p&&(p==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||p==="textarea"||u.contentEditable==="true")}var Rs=zr&&"documentMode"in document&&11>=document.documentMode,ys=null,Os=null,Ds=null,ol=!1;function Eo(u,p,b){var S=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;ol||ys==null||ys!==yn(S)||(S=ys,"selectionStart"in S&&Ms(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Ds&&Or(Ds,S)||(Ds=S,S=vu(Os,"onSelect"),0<S.length&&(p=new ds("onSelect","select",null,p,b),u.push({event:p,listeners:S}),p.target=ys)))}function Ks(u,p){var b={};return b[u.toLowerCase()]=p.toLowerCase(),b["Webkit"+u]="webkit"+p,b["Moz"+u]="moz"+p,b}var co={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},lt={},Ft={};zr&&(Ft=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function jn(u){if(lt[u])return lt[u];if(!co[u])return u;var p=co[u],b;for(b in p)if(p.hasOwnProperty(b)&&b in Ft)return lt[u]=p[b];return u}var si=jn("animationend"),dr=jn("animationiteration"),ca=jn("animationstart"),va=jn("transitionrun"),Fa=jn("transitionstart"),ws=jn("transitioncancel"),As=jn("transitionend"),ll=new Map,qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qo.push("scrollEnd");function xa(u,p){ll.set(u,p),ei(p,[u])}var _o=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ss=[],Go=0,It=0;function xn(){for(var u=Go,p=It=Go=0;p<u;){var b=Ss[p];Ss[p++]=null;var S=Ss[p];Ss[p++]=null;var _=Ss[p];Ss[p++]=null;var M=Ss[p];if(Ss[p++]=null,S!==null&&_!==null){var G=S.pending;G===null?_.next=_:(_.next=G.next,G.next=_),S.pending=_}M!==0&&Cn(b,_,M)}}function vi(u,p,b,S){Ss[Go++]=u,Ss[Go++]=p,Ss[Go++]=b,Ss[Go++]=S,It|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function At(u,p,b,S){return vi(u,p,b,S),In(u)}function tn(u,p){return vi(u,null,null,p),In(u)}function Cn(u,p,b){u.lanes|=b;var S=u.alternate;S!==null&&(S.lanes|=b);for(var _=!1,M=u.return;M!==null;)M.childLanes|=b,S=M.alternate,S!==null&&(S.childLanes|=b),M.tag===22&&(u=M.stateNode,u===null||u._visibility&1||(_=!0)),u=M,M=M.return;return u.tag===3?(M=u.stateNode,_&&p!==null&&(_=31-Y(b),u=M.hiddenUpdates,S=u[_],S===null?u[_]=[p]:S.push(p),p.lane=b|536870912),M):null}function In(u){if(50<ed)throw ed=0,N0=null,Error(s(185));for(var p=u.return;p!==null;)u=p,p=u.return;return u.tag===3?u.stateNode:null}var xi={};function Sr(u,p,b,S){this.tag=u,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(u,p,b,S){return new Sr(u,p,b,S)}function da(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Wr(u,p){var b=u.alternate;return b===null?(b=oi(u.tag,p,u.key,u.mode),b.elementType=u.elementType,b.type=u.type,b.stateNode=u.stateNode,b.alternate=u,u.alternate=b):(b.pendingProps=p,b.type=u.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=u.flags&65011712,b.childLanes=u.childLanes,b.lanes=u.lanes,b.child=u.child,b.memoizedProps=u.memoizedProps,b.memoizedState=u.memoizedState,b.updateQueue=u.updateQueue,p=u.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=u.sibling,b.index=u.index,b.ref=u.ref,b.refCleanup=u.refCleanup,b}function fs(u,p){u.flags&=65011714;var b=u.alternate;return b===null?(u.childLanes=0,u.lanes=p,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=b.childLanes,u.lanes=b.lanes,u.child=b.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=b.memoizedProps,u.memoizedState=b.memoizedState,u.updateQueue=b.updateQueue,u.type=b.type,p=b.dependencies,u.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),u}function Qa(u,p,b,S,_,M){var G=0;if(S=u,typeof u=="function")da(u)&&(G=1);else if(typeof u=="string")G=mC(u,b,be.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case V:return u=oi(31,b,p,_),u.elementType=V,u.lanes=M,u;case E:return $a(b.children,_,M,p);case I:G=8,_|=24;break;case T:return u=oi(12,b,p,_|2),u.elementType=T,u.lanes=M,u;case U:return u=oi(13,b,p,_),u.elementType=U,u.lanes=M,u;case F:return u=oi(19,b,p,_),u.elementType=F,u.lanes=M,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case j:G=10;break e;case N:G=9;break e;case B:G=11;break e;case P:G=14;break e;case z:G=16,S=null;break e}G=29,b=Error(s(130,u===null?"null":typeof u,"")),S=null}return p=oi(G,b,p,_),p.elementType=u,p.type=S,p.lanes=M,p}function $a(u,p,b,S){return u=oi(7,u,S,p),u.lanes=b,u}function Il(u,p,b){return u=oi(6,u,null,p),u.lanes=b,u}function Nl(u){var p=oi(18,null,null,0);return p.stateNode=u,p}function Vo(u,p,b){return p=oi(4,u.children!==null?u.children:[],u.key,p),p.lanes=b,p.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},p}var zl=new WeakMap;function Wa(u,p){if(typeof u=="object"&&u!==null){var b=zl.get(u);return b!==void 0?b:(p={value:u,source:p,stack:Pt(p)},zl.set(u,p),p)}return{value:u,source:p,stack:Pt(p)}}var Yo=[],Io=0,j1=null,u1=0,js=[],ks=0,cl=null,No=1,To="";function Qo(u,p){Yo[Io++]=u1,Yo[Io++]=j1,j1=u,u1=p}function Bc(u,p,b){js[ks++]=No,js[ks++]=To,js[ks++]=cl,cl=u;var S=No;u=To;var _=32-Y(S)-1;S&=~(1<<_),b+=1;var M=32-Y(p)+_;if(30<M){var G=_-_%5;M=(S&(1<<G)-1).toString(32),S>>=G,_-=G,No=1<<32-Y(p)+_|b<<_|S,To=M+u}else No=1<<M|b<<_|S,To=u}function oc(u){u.return!==null&&(Qo(u,1),Bc(u,1,0))}function lc(u){for(;u===j1;)j1=Yo[--Io],Yo[Io]=null,u1=Yo[--Io],Yo[Io]=null;for(;u===cl;)cl=js[--ks],js[ks]=null,To=js[--ks],js[ks]=null,No=js[--ks],js[ks]=null}function Pc(u,p){js[ks++]=No,js[ks++]=To,js[ks++]=cl,No=p.id,To=p.overflow,cl=u}var Xa=null,Dr=null,bi=!1,Mo=null,Js=!1,cc=Error(s(519));function $o(u){var p=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw h1(Wa(p,u)),cc}function B1(u){var p=u.stateNode,b=u.type,S=u.memoizedProps;switch(p[$e]=u,p[Me]=S,b){case"dialog":Di("cancel",p),Di("close",p);break;case"iframe":case"object":case"embed":Di("load",p);break;case"video":case"audio":for(b=0;b<id.length;b++)Di(id[b],p);break;case"source":Di("error",p);break;case"img":case"image":case"link":Di("error",p),Di("load",p);break;case"details":Di("toggle",p);break;case"input":Di("invalid",p),gi(p,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Di("invalid",p);break;case"textarea":Di("invalid",p),Qi(p,S.value,S.defaultValue,S.children)}b=S.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||S.suppressHydrationWarning===!0||Ev(p.textContent,b)?(S.popover!=null&&(Di("beforetoggle",p),Di("toggle",p)),S.onScroll!=null&&Di("scroll",p),S.onScrollEnd!=null&&Di("scrollend",p),S.onClick!=null&&(p.onclick=Pi),p=!0):p=!1,p||$o(u,!0)}function Fc(u){for(Xa=u.return;Xa;)switch(Xa.tag){case 5:case 31:case 13:Js=!1;return;case 27:case 3:Js=!0;return;default:Xa=Xa.return}}function Hl(u){if(u!==Xa)return!1;if(!bi)return Fc(u),bi=!0,!1;var p=u.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=u.type,b=!(b!=="form"&&b!=="button")||oh(u.type,u.memoizedProps)),b=!b),b&&Dr&&$o(u),Fc(u),p===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));Dr=lp(u)}else if(p===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));Dr=lp(u)}else p===27?(p=Dr,Y1(u.type)?(u=op,op=null,Dr=u):Dr=p):Dr=Xa?el(u.stateNode.nextSibling):null;return!0}function dl(){Dr=Xa=null,bi=!1}function f1(){var u=Mo;return u!==null&&(ps===null?ps=u:ps.push.apply(ps,u),Mo=null),u}function h1(u){Mo===null?Mo=[u]:Mo.push(u)}var dc=$(null),ul=null,uo=null;function fl(u,p,b){we(dc,p._currentValue),p._currentValue=b}function Ro(u){u._currentValue=dc.current,oe(dc)}function ql(u,p,b){for(;u!==null;){var S=u.alternate;if((u.childLanes&p)!==p?(u.childLanes|=p,S!==null&&(S.childLanes|=p)):S!==null&&(S.childLanes&p)!==p&&(S.childLanes|=p),u===b)break;u=u.return}}function p1(u,p,b,S){var _=u.child;for(_!==null&&(_.return=u);_!==null;){var M=_.dependencies;if(M!==null){var G=_.child;M=M.firstContext;e:for(;M!==null;){var re=M;M=_;for(var Ae=0;Ae<p.length;Ae++)if(re.context===p[Ae]){M.lanes|=b,re=M.alternate,re!==null&&(re.lanes|=b),ql(M.return,b,u),S||(G=null);break e}M=re.next}}else if(_.tag===18){if(G=_.return,G===null)throw Error(s(341));G.lanes|=b,M=G.alternate,M!==null&&(M.lanes|=b),ql(G,b,u),G=null}else G=_.child;if(G!==null)G.return=_;else for(G=_;G!==null;){if(G===u){G=null;break}if(_=G.sibling,_!==null){_.return=G.return,G=_;break}G=G.return}_=G}}function Gl(u,p,b,S){u=null;for(var _=p,M=!1;_!==null;){if(!M){if((_.flags&524288)!==0)M=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var G=_.alternate;if(G===null)throw Error(s(387));if(G=G.memoizedProps,G!==null){var re=_.type;Oi(_.pendingProps.value,G.value)||(u!==null?u.push(re):u=[re])}}else if(_===tt.current){if(G=_.alternate,G===null)throw Error(s(387));G.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(u!==null?u.push(pp):u=[pp])}_=_.return}u!==null&&p1(p,u,b,S),p.flags|=262144}function Cs(u){for(u=u.firstContext;u!==null;){if(!Oi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Tl(u){ul=u,uo=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function hs(u){return Fd(ul,u)}function Uc(u,p){return ul===null&&Tl(u),Fd(u,p)}function Fd(u,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},uo===null){if(u===null)throw Error(s(308));uo=p,u.dependencies={lanes:0,firstContext:p},u.flags|=524288}else uo=uo.next=p;return b}var Ud=typeof AbortController<"u"?AbortController:function(){var u=[],p=this.signal={aborted:!1,addEventListener:function(b,S){u.push(S)}};this.abort=function(){p.aborted=!0,u.forEach(function(b){return b()})}},A2=r.unstable_scheduleCallback,S2=r.unstable_NormalPriority,Ra={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wo(){return{controller:new Ud,data:new Map,refCount:0}}function uc(u){u.refCount--,u.refCount===0&&A2(S2,function(){u.controller.abort()})}var fc=null,fo=0,Vl=0,P1=null;function k2(u,p){if(fc===null){var b=fc=[];fo=0,Vl=nh(),P1={status:"pending",value:void 0,then:function(S){b.push(S)}}}return fo++,p.then(Ld,Ld),p}function Ld(){if(--fo===0&&fc!==null){P1!==null&&(P1.status="fulfilled");var u=fc;fc=null,Vl=0,P1=null;for(var p=0;p<u.length;p++)(0,u[p])()}}function zd(u,p){var b=[],S={status:"pending",value:null,reason:null,then:function(_){b.push(_)}};return u.then(function(){S.status="fulfilled",S.value=p;for(var _=0;_<b.length;_++)(0,b[_])(p)},function(_){for(S.status="rejected",S.reason=_,_=0;_<b.length;_++)(0,b[_])(void 0)}),S}var ff=K.S;K.S=function(u,p){G1=jt(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&k2(u,p),ff!==null&&ff(u,p)};var m1=$(null);function C2(){var u=m1.current;return u!==null?u:Sn.pooledCache}function hf(u,p){p===null?we(m1,m1.current):we(m1,p.pool)}function ng(){var u=C2();return u===null?null:{parent:Ra._currentValue,pool:u}}var Lc=Error(s(460)),E2=Error(s(474)),pf=Error(s(542)),mf={then:function(){}};function _2(u){return u=u.status,u==="fulfilled"||u==="rejected"}function ig(u,p,b){switch(b=u[b],b===void 0?u.push(p):b!==p&&(p.then(Pi,Pi),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,ag(u),u;default:if(typeof p.status=="string")p.then(Pi,Pi);else{if(u=Sn,u!==null&&100<u.shellSuspendCounter)throw Error(s(482));u=p,u.status="pending",u.then(function(S){if(p.status==="pending"){var _=p;_.status="fulfilled",_.value=S}},function(S){if(p.status==="pending"){var _=p;_.status="rejected",_.reason=S}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw u=p.reason,ag(u),u}throw pc=p,Lc}}function hc(u){try{var p=u._init;return p(u._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(pc=b,Lc):b}}var pc=null;function rg(){if(pc===null)throw Error(s(459));var u=pc;return pc=null,u}function ag(u){if(u===Lc||u===pf)throw Error(s(483))}var zc=null,Hd=0;function gf(u){var p=Hd;return Hd+=1,zc===null&&(zc=[]),ig(zc,u,p)}function qd(u,p){p=p.props.ref,u.ref=p!==void 0?p:null}function vf(u,p){throw p.$$typeof===A?Error(s(525)):(u=Object.prototype.toString.call(p),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":u)))}function sg(u){function p(Re,Ce){if(u){var Ue=Re.deletions;Ue===null?(Re.deletions=[Ce],Re.flags|=16):Ue.push(Ce)}}function b(Re,Ce){if(!u)return null;for(;Ce!==null;)p(Re,Ce),Ce=Ce.sibling;return null}function S(Re){for(var Ce=new Map;Re!==null;)Re.key!==null?Ce.set(Re.key,Re):Ce.set(Re.index,Re),Re=Re.sibling;return Ce}function _(Re,Ce){return Re=Wr(Re,Ce),Re.index=0,Re.sibling=null,Re}function M(Re,Ce,Ue){return Re.index=Ue,u?(Ue=Re.alternate,Ue!==null?(Ue=Ue.index,Ue<Ce?(Re.flags|=67108866,Ce):Ue):(Re.flags|=67108866,Ce)):(Re.flags|=1048576,Ce)}function G(Re){return u&&Re.alternate===null&&(Re.flags|=67108866),Re}function re(Re,Ce,Ue,ot){return Ce===null||Ce.tag!==6?(Ce=Il(Ue,Re.mode,ot),Ce.return=Re,Ce):(Ce=_(Ce,Ue),Ce.return=Re,Ce)}function Ae(Re,Ce,Ue,ot){var On=Ue.type;return On===E?nt(Re,Ce,Ue.props.children,ot,Ue.key):Ce!==null&&(Ce.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===z&&hc(On)===Ce.type)?(Ce=_(Ce,Ue.props),qd(Ce,Ue),Ce.return=Re,Ce):(Ce=Qa(Ue.type,Ue.key,Ue.props,null,Re.mode,ot),qd(Ce,Ue),Ce.return=Re,Ce)}function Le(Re,Ce,Ue,ot){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ue.containerInfo||Ce.stateNode.implementation!==Ue.implementation?(Ce=Vo(Ue,Re.mode,ot),Ce.return=Re,Ce):(Ce=_(Ce,Ue.children||[]),Ce.return=Re,Ce)}function nt(Re,Ce,Ue,ot,On){return Ce===null||Ce.tag!==7?(Ce=$a(Ue,Re.mode,ot,On),Ce.return=Re,Ce):(Ce=_(Ce,Ue),Ce.return=Re,Ce)}function ut(Re,Ce,Ue){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Il(""+Ce,Re.mode,Ue),Ce.return=Re,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case w:return Ue=Qa(Ce.type,Ce.key,Ce.props,null,Re.mode,Ue),qd(Ue,Ce),Ue.return=Re,Ue;case k:return Ce=Vo(Ce,Re.mode,Ue),Ce.return=Re,Ce;case z:return Ce=hc(Ce),ut(Re,Ce,Ue)}if(ae(Ce)||q(Ce))return Ce=$a(Ce,Re.mode,Ue,null),Ce.return=Re,Ce;if(typeof Ce.then=="function")return ut(Re,gf(Ce),Ue);if(Ce.$$typeof===j)return ut(Re,Uc(Re,Ce),Ue);vf(Re,Ce)}return null}function He(Re,Ce,Ue,ot){var On=Ce!==null?Ce.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return On!==null?null:re(Re,Ce,""+Ue,ot);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case w:return Ue.key===On?Ae(Re,Ce,Ue,ot):null;case k:return Ue.key===On?Le(Re,Ce,Ue,ot):null;case z:return Ue=hc(Ue),He(Re,Ce,Ue,ot)}if(ae(Ue)||q(Ue))return On!==null?null:nt(Re,Ce,Ue,ot,null);if(typeof Ue.then=="function")return He(Re,Ce,gf(Ue),ot);if(Ue.$$typeof===j)return He(Re,Ce,Uc(Re,Ue),ot);vf(Re,Ue)}return null}function We(Re,Ce,Ue,ot,On){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Re=Re.get(Ue)||null,re(Ce,Re,""+ot,On);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case w:return Re=Re.get(ot.key===null?Ue:ot.key)||null,Ae(Ce,Re,ot,On);case k:return Re=Re.get(ot.key===null?Ue:ot.key)||null,Le(Ce,Re,ot,On);case z:return ot=hc(ot),We(Re,Ce,Ue,ot,On)}if(ae(ot)||q(ot))return Re=Re.get(Ue)||null,nt(Ce,Re,ot,On,null);if(typeof ot.then=="function")return We(Re,Ce,Ue,gf(ot),On);if(ot.$$typeof===j)return We(Re,Ce,Ue,Uc(Ce,ot),On);vf(Ce,ot)}return null}function pn(Re,Ce,Ue,ot){for(var On=null,Cr=null,An=Ce,ki=Ce=0,Xi=null;An!==null&&ki<Ue.length;ki++){An.index>ki?(Xi=An,An=null):Xi=An.sibling;var Er=He(Re,An,Ue[ki],ot);if(Er===null){An===null&&(An=Xi);break}u&&An&&Er.alternate===null&&p(Re,An),Ce=M(Er,Ce,ki),Cr===null?On=Er:Cr.sibling=Er,Cr=Er,An=Xi}if(ki===Ue.length)return b(Re,An),bi&&Qo(Re,ki),On;if(An===null){for(;ki<Ue.length;ki++)An=ut(Re,Ue[ki],ot),An!==null&&(Ce=M(An,Ce,ki),Cr===null?On=An:Cr.sibling=An,Cr=An);return bi&&Qo(Re,ki),On}for(An=S(An);ki<Ue.length;ki++)Xi=We(An,Re,ki,Ue[ki],ot),Xi!==null&&(u&&Xi.alternate!==null&&An.delete(Xi.key===null?ki:Xi.key),Ce=M(Xi,Ce,ki),Cr===null?On=Xi:Cr.sibling=Xi,Cr=Xi);return u&&An.forEach(function(dd){return p(Re,dd)}),bi&&Qo(Re,ki),On}function Qn(Re,Ce,Ue,ot){if(Ue==null)throw Error(s(151));for(var On=null,Cr=null,An=Ce,ki=Ce=0,Xi=null,Er=Ue.next();An!==null&&!Er.done;ki++,Er=Ue.next()){An.index>ki?(Xi=An,An=null):Xi=An.sibling;var dd=He(Re,An,Er.value,ot);if(dd===null){An===null&&(An=Xi);break}u&&An&&dd.alternate===null&&p(Re,An),Ce=M(dd,Ce,ki),Cr===null?On=dd:Cr.sibling=dd,Cr=dd,An=Xi}if(Er.done)return b(Re,An),bi&&Qo(Re,ki),On;if(An===null){for(;!Er.done;ki++,Er=Ue.next())Er=ut(Re,Er.value,ot),Er!==null&&(Ce=M(Er,Ce,ki),Cr===null?On=Er:Cr.sibling=Er,Cr=Er);return bi&&Qo(Re,ki),On}for(An=S(An);!Er.done;ki++,Er=Ue.next())Er=We(An,Re,ki,Er.value,ot),Er!==null&&(u&&Er.alternate!==null&&An.delete(Er.key===null?ki:Er.key),Ce=M(Er,Ce,ki),Cr===null?On=Er:Cr.sibling=Er,Cr=Er);return u&&An.forEach(function(EC){return p(Re,EC)}),bi&&Qo(Re,ki),On}function fa(Re,Ce,Ue,ot){if(typeof Ue=="object"&&Ue!==null&&Ue.type===E&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case w:e:{for(var On=Ue.key;Ce!==null;){if(Ce.key===On){if(On=Ue.type,On===E){if(Ce.tag===7){b(Re,Ce.sibling),ot=_(Ce,Ue.props.children),ot.return=Re,Re=ot;break e}}else if(Ce.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===z&&hc(On)===Ce.type){b(Re,Ce.sibling),ot=_(Ce,Ue.props),qd(ot,Ue),ot.return=Re,Re=ot;break e}b(Re,Ce);break}else p(Re,Ce);Ce=Ce.sibling}Ue.type===E?(ot=$a(Ue.props.children,Re.mode,ot,Ue.key),ot.return=Re,Re=ot):(ot=Qa(Ue.type,Ue.key,Ue.props,null,Re.mode,ot),qd(ot,Ue),ot.return=Re,Re=ot)}return G(Re);case k:e:{for(On=Ue.key;Ce!==null;){if(Ce.key===On)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ue.containerInfo&&Ce.stateNode.implementation===Ue.implementation){b(Re,Ce.sibling),ot=_(Ce,Ue.children||[]),ot.return=Re,Re=ot;break e}else{b(Re,Ce);break}else p(Re,Ce);Ce=Ce.sibling}ot=Vo(Ue,Re.mode,ot),ot.return=Re,Re=ot}return G(Re);case z:return Ue=hc(Ue),fa(Re,Ce,Ue,ot)}if(ae(Ue))return pn(Re,Ce,Ue,ot);if(q(Ue)){if(On=q(Ue),typeof On!="function")throw Error(s(150));return Ue=On.call(Ue),Qn(Re,Ce,Ue,ot)}if(typeof Ue.then=="function")return fa(Re,Ce,gf(Ue),ot);if(Ue.$$typeof===j)return fa(Re,Ce,Uc(Re,Ue),ot);vf(Re,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,Ce!==null&&Ce.tag===6?(b(Re,Ce.sibling),ot=_(Ce,Ue),ot.return=Re,Re=ot):(b(Re,Ce),ot=Il(Ue,Re.mode,ot),ot.return=Re,Re=ot),G(Re)):b(Re,Ce)}return function(Re,Ce,Ue,ot){try{Hd=0;var On=fa(Re,Ce,Ue,ot);return zc=null,On}catch(An){if(An===Lc||An===pf)throw An;var Cr=oi(29,An,null,Re.mode);return Cr.lanes=ot,Cr.return=Re,Cr}}}var mc=sg(!0),og=sg(!1),F1=!1;function I2(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function N2(u,p){u=u.updateQueue,p.updateQueue===u&&(p.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function U1(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function L1(u,p,b){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,(hn&2)!==0){var _=S.pending;return _===null?p.next=p:(p.next=_.next,_.next=p),S.pending=p,p=In(u),Cn(u,null,b),p}return vi(u,S,p,b),In(u)}function Gd(u,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var S=p.lanes;S&=u.pendingLanes,b|=S,p.lanes=b,ze(u,b)}}function T2(u,p){var b=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,b===S)){var _=null,M=null;if(b=b.firstBaseUpdate,b!==null){do{var G={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};M===null?_=M=G:M=M.next=G,b=b.next}while(b!==null);M===null?_=M=p:M=M.next=p}else _=M=p;b={baseState:S.baseState,firstBaseUpdate:_,lastBaseUpdate:M,shared:S.shared,callbacks:S.callbacks},u.updateQueue=b;return}u=b.lastBaseUpdate,u===null?b.firstBaseUpdate=p:u.next=p,b.lastBaseUpdate=p}var M2=!1;function Vd(){if(M2){var u=P1;if(u!==null)throw u}}function Yd(u,p,b,S){M2=!1;var _=u.updateQueue;F1=!1;var M=_.firstBaseUpdate,G=_.lastBaseUpdate,re=_.shared.pending;if(re!==null){_.shared.pending=null;var Ae=re,Le=Ae.next;Ae.next=null,G===null?M=Le:G.next=Le,G=Ae;var nt=u.alternate;nt!==null&&(nt=nt.updateQueue,re=nt.lastBaseUpdate,re!==G&&(re===null?nt.firstBaseUpdate=Le:re.next=Le,nt.lastBaseUpdate=Ae))}if(M!==null){var ut=_.baseState;G=0,nt=Le=Ae=null,re=M;do{var He=re.lane&-536870913,We=He!==re.lane;if(We?(gn&He)===He:(S&He)===He){He!==0&&He===Vl&&(M2=!0),nt!==null&&(nt=nt.next={lane:0,tag:re.tag,payload:re.payload,callback:null,next:null});e:{var pn=u,Qn=re;He=p;var fa=b;switch(Qn.tag){case 1:if(pn=Qn.payload,typeof pn=="function"){ut=pn.call(fa,ut,He);break e}ut=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=Qn.payload,He=typeof pn=="function"?pn.call(fa,ut,He):pn,He==null)break e;ut=y({},ut,He);break e;case 2:F1=!0}}He=re.callback,He!==null&&(u.flags|=64,We&&(u.flags|=8192),We=_.callbacks,We===null?_.callbacks=[He]:We.push(He))}else We={lane:He,tag:re.tag,payload:re.payload,callback:re.callback,next:null},nt===null?(Le=nt=We,Ae=ut):nt=nt.next=We,G|=He;if(re=re.next,re===null){if(re=_.shared.pending,re===null)break;We=re,re=We.next,We.next=null,_.lastBaseUpdate=We,_.shared.pending=null}}while(!0);nt===null&&(Ae=ut),_.baseState=Ae,_.firstBaseUpdate=Le,_.lastBaseUpdate=nt,M===null&&(_.shared.lanes=0),Zs|=G,u.lanes=G,u.memoizedState=ut}}function lg(u,p){if(typeof u!="function")throw Error(s(191,u));u.call(p)}function cg(u,p){var b=u.callbacks;if(b!==null)for(u.callbacks=null,u=0;u<b.length;u++)lg(b[u],p)}var Hc=$(null),xf=$(0);function dg(u,p){u=Ps,we(xf,u),we(Hc,p),Ps=u|p.baseLanes}function R2(){we(xf,Ps),we(Hc,Hc.current)}function O2(){Ps=xf.current,oe(Hc),oe(xf)}var Xo=$(null),hl=null;function z1(u){var p=u.alternate;we(Ka,Ka.current&1),we(Xo,u),hl===null&&(p===null||Hc.current!==null||p.memoizedState!==null)&&(hl=u)}function D2(u){we(Ka,Ka.current),we(Xo,u),hl===null&&(hl=u)}function ug(u){u.tag===22?(we(Ka,Ka.current),we(Xo,u),hl===null&&(hl=u)):H1()}function H1(){we(Ka,Ka.current),we(Xo,Xo.current)}function Ko(u){oe(Xo),hl===u&&(hl=null),oe(Ka)}var Ka=$(0);function bf(u){for(var p=u;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||sp(b)||bu(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var g1=0,di=null,Xr=null,is=null,yf=!1,qc=!1,gc=!1,wf=0,Qd=0,Gc=null,$x=0;function Ua(){throw Error(s(321))}function j2(u,p){if(p===null)return!1;for(var b=0;b<p.length&&b<u.length;b++)if(!Oi(u[b],p[b]))return!1;return!0}function B2(u,p,b,S,_,M){return g1=M,di=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,K.H=u===null||u.memoizedState===null?Ug:r0,gc=!1,M=b(S,_),gc=!1,qc&&(M=hg(p,b,S,_)),fg(u),M}function fg(u){K.H=Xd;var p=Xr!==null&&Xr.next!==null;if(g1=0,is=Xr=di=null,yf=!1,Qd=0,Gc=null,p)throw Error(s(300));u===null||rs||(u=u.dependencies,u!==null&&Cs(u)&&(rs=!0))}function hg(u,p,b,S){di=u;var _=0;do{if(qc&&(Gc=null),Qd=0,qc=!1,25<=_)throw Error(s(301));if(_+=1,is=Xr=null,u.updateQueue!=null){var M=u.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}K.H=Lg,M=p(b,S)}while(qc);return M}function Wx(){var u=K.H,p=u.useState()[0];return p=typeof p.then=="function"?$d(p):p,u=u.useState()[0],(Xr!==null?Xr.memoizedState:null)!==u&&(di.flags|=1024),p}function P2(){var u=wf!==0;return wf=0,u}function F2(u,p,b){p.updateQueue=u.updateQueue,p.flags&=-2053,u.lanes&=~b}function U2(u){if(yf){for(u=u.memoizedState;u!==null;){var p=u.queue;p!==null&&(p.pending=null),u=u.next}yf=!1}g1=0,is=Xr=di=null,qc=!1,Qd=wf=0,Gc=null}function ho(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?di.memoizedState=is=u:is=is.next=u,is}function Ja(){if(Xr===null){var u=di.alternate;u=u!==null?u.memoizedState:null}else u=Xr.next;var p=is===null?di.memoizedState:is.next;if(p!==null)is=p,Xr=u;else{if(u===null)throw di.alternate===null?Error(s(467)):Error(s(310));Xr=u,u={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},is===null?di.memoizedState=is=u:is=is.next=u}return is}function Af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $d(u){var p=Qd;return Qd+=1,Gc===null&&(Gc=[]),u=ig(Gc,u,p),p=di,(is===null?p.memoizedState:is.next)===null&&(p=p.alternate,K.H=p===null||p.memoizedState===null?Ug:r0),u}function Sf(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return $d(u);if(u.$$typeof===j)return hs(u)}throw Error(s(438,String(u)))}function L2(u){var p=null,b=di.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var S=di.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(p={data:S.data.map(function(_){return _.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=Af(),di.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(u),S=0;S<u;S++)b[S]=L;return p.index++,b}function v1(u,p){return typeof p=="function"?p(u):p}function kf(u){var p=Ja();return z2(p,Xr,u)}function z2(u,p,b){var S=u.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=b;var _=u.baseQueue,M=S.pending;if(M!==null){if(_!==null){var G=_.next;_.next=M.next,M.next=G}p.baseQueue=_=M,S.pending=null}if(M=u.baseState,_===null)u.memoizedState=M;else{p=_.next;var re=G=null,Ae=null,Le=p,nt=!1;do{var ut=Le.lane&-536870913;if(ut!==Le.lane?(gn&ut)===ut:(g1&ut)===ut){var He=Le.revertLane;if(He===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),ut===Vl&&(nt=!0);else if((g1&He)===He){Le=Le.next,He===Vl&&(nt=!0);continue}else ut={lane:0,revertLane:Le.revertLane,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},Ae===null?(re=Ae=ut,G=M):Ae=Ae.next=ut,di.lanes|=He,Zs|=He;ut=Le.action,gc&&b(M,ut),M=Le.hasEagerState?Le.eagerState:b(M,ut)}else He={lane:ut,revertLane:Le.revertLane,gesture:Le.gesture,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},Ae===null?(re=Ae=He,G=M):Ae=Ae.next=He,di.lanes|=ut,Zs|=ut;Le=Le.next}while(Le!==null&&Le!==p);if(Ae===null?G=M:Ae.next=re,!Oi(M,u.memoizedState)&&(rs=!0,nt&&(b=P1,b!==null)))throw b;u.memoizedState=M,u.baseState=G,u.baseQueue=Ae,S.lastRenderedState=M}return _===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function H2(u){var p=Ja(),b=p.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=u;var S=b.dispatch,_=b.pending,M=p.memoizedState;if(_!==null){b.pending=null;var G=_=_.next;do M=u(M,G.action),G=G.next;while(G!==_);Oi(M,p.memoizedState)||(rs=!0),p.memoizedState=M,p.baseQueue===null&&(p.baseState=M),b.lastRenderedState=M}return[M,S]}function pg(u,p,b){var S=di,_=Ja(),M=bi;if(M){if(b===void 0)throw Error(s(407));b=b()}else b=p();var G=!Oi((Xr||_).memoizedState,b);if(G&&(_.memoizedState=b,rs=!0),_=_.queue,Q2(Yl.bind(null,S,_,u),[u]),_.getSnapshot!==p||G||is!==null&&is.memoizedState.tag&1){if(S.flags|=2048,Vc(9,{destroy:void 0},gg.bind(null,S,_,b,p),null),Sn===null)throw Error(s(349));M||(g1&127)!==0||mg(S,p,b)}return b}function mg(u,p,b){u.flags|=16384,u={getSnapshot:p,value:b},p=di.updateQueue,p===null?(p=Af(),di.updateQueue=p,p.stores=[u]):(b=p.stores,b===null?p.stores=[u]:b.push(u))}function gg(u,p,b,S){p.value=b,p.getSnapshot=S,vg(p)&&xg(u)}function Yl(u,p,b){return b(function(){vg(p)&&xg(u)})}function vg(u){var p=u.getSnapshot;u=u.value;try{var b=p();return!Oi(u,b)}catch{return!0}}function xg(u){var p=tn(u,2);p!==null&&Po(p,u,2)}function q2(u){var p=ho();if(typeof u=="function"){var b=u;if(u=b(),gc){Bt(!0);try{b()}finally{Bt(!1)}}}return p.memoizedState=p.baseState=u,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v1,lastRenderedState:u},p}function bg(u,p,b,S){return u.baseState=b,z2(u,Xr,typeof S=="function"?S:v1)}function Xx(u,p,b,S,_){if(If(u))throw Error(s(485));if(u=p.action,u!==null){var M={payload:_,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){M.listeners.push(G)}};K.T!==null?b(!0):M.isTransition=!1,S(M),b=p.pending,b===null?(M.next=p.pending=M,yg(p,M)):(M.next=b.next,p.pending=b.next=M)}}function yg(u,p){var b=p.action,S=p.payload,_=u.state;if(p.isTransition){var M=K.T,G={};K.T=G;try{var re=b(_,S),Ae=K.S;Ae!==null&&Ae(G,re),wg(u,p,re)}catch(Le){G2(u,p,Le)}finally{M!==null&&G.types!==null&&(M.types=G.types),K.T=M}}else try{M=b(_,S),wg(u,p,M)}catch(Le){G2(u,p,Le)}}function wg(u,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(S){Ag(u,p,S)},function(S){return G2(u,p,S)}):Ag(u,p,b)}function Ag(u,p,b){p.status="fulfilled",p.value=b,Sg(p),u.state=b,p=u.pending,p!==null&&(b=p.next,b===p?u.pending=null:(b=b.next,p.next=b,yg(u,b)))}function G2(u,p,b){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do p.status="rejected",p.reason=b,Sg(p),p=p.next;while(p!==S)}u.action=null}function Sg(u){u=u.listeners;for(var p=0;p<u.length;p++)(0,u[p])()}function V2(u,p){return p}function Y2(u,p){if(bi){var b=Sn.formState;if(b!==null){e:{var S=di;if(bi){if(Dr){t:{for(var _=Dr,M=Js;_.nodeType!==8;){if(!M){_=null;break t}if(_=el(_.nextSibling),_===null){_=null;break t}}M=_.data,_=M==="F!"||M==="F"?_:null}if(_){Dr=el(_.nextSibling),S=_.data==="F!";break e}}$o(S)}S=!1}S&&(p=b[0])}}return b=ho(),b.memoizedState=b.baseState=p,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V2,lastRenderedState:p},b.queue=S,b=Pg.bind(null,di,S),S.dispatch=b,S=q2(!1),M=n0.bind(null,di,!1,S.queue),S=ho(),_={state:p,dispatch:null,action:u,pending:null},S.queue=_,b=Xx.bind(null,di,_,M,b),_.dispatch=b,S.memoizedState=u,[p,b,!1]}function Cf(u){var p=Ja();return kg(p,Xr,u)}function kg(u,p,b){if(p=z2(u,p,V2)[0],u=kf(v1)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var S=$d(p)}catch(G){throw G===Lc?pf:G}else S=p;p=Ja();var _=p.queue,M=_.dispatch;return b!==p.memoizedState&&(di.flags|=2048,Vc(9,{destroy:void 0},Kx.bind(null,_,b),null)),[S,M,u]}function Kx(u,p){u.action=p}function Cg(u){var p=Ja(),b=Xr;if(b!==null)return kg(p,b,u);Ja(),p=p.memoizedState,b=Ja();var S=b.queue.dispatch;return b.memoizedState=u,[p,S,!1]}function Vc(u,p,b,S){return u={tag:u,create:b,deps:S,inst:p,next:null},p=di.updateQueue,p===null&&(p=Af(),di.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=u.next=u:(S=b.next,b.next=u,u.next=S,p.lastEffect=u),u}function Eg(){return Ja().memoizedState}function Ef(u,p,b,S){var _=ho();di.flags|=u,_.memoizedState=Vc(1|p,{destroy:void 0},b,S===void 0?null:S)}function _f(u,p,b,S){var _=Ja();S=S===void 0?null:S;var M=_.memoizedState.inst;Xr!==null&&S!==null&&j2(S,Xr.memoizedState.deps)?_.memoizedState=Vc(p,M,b,S):(di.flags|=u,_.memoizedState=Vc(1|p,M,b,S))}function _g(u,p){Ef(8390656,8,u,p)}function Q2(u,p){_f(2048,8,u,p)}function Jx(u){di.flags|=4;var p=di.updateQueue;if(p===null)p=Af(),di.updateQueue=p,p.events=[u];else{var b=p.events;b===null?p.events=[u]:b.push(u)}}function Yc(u){var p=Ja().memoizedState;return Jx({ref:p,nextImpl:u}),function(){if((hn&2)!==0)throw Error(s(440));return p.impl.apply(void 0,arguments)}}function $2(u,p){return _f(4,2,u,p)}function W2(u,p){return _f(4,4,u,p)}function Ig(u,p){if(typeof p=="function"){u=u();var b=p(u);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return u=u(),p.current=u,function(){p.current=null}}function Ng(u,p,b){b=b!=null?b.concat([u]):null,_f(4,4,Ig.bind(null,p,u),b)}function X2(){}function K2(u,p){var b=Ja();p=p===void 0?null:p;var S=b.memoizedState;return p!==null&&j2(p,S[1])?S[0]:(b.memoizedState=[u,p],u)}function Tg(u,p){var b=Ja();p=p===void 0?null:p;var S=b.memoizedState;if(p!==null&&j2(p,S[1]))return S[0];if(S=u(),gc){Bt(!0);try{u()}finally{Bt(!1)}}return b.memoizedState=[S,p],S}function J2(u,p,b){return b===void 0||(g1&1073741824)!==0&&(gn&261930)===0?u.memoizedState=p:(u.memoizedState=b,u=T0(),di.lanes|=u,Zs|=u,b)}function Mg(u,p,b,S){return Oi(b,p)?b:Hc.current!==null?(u=J2(u,b,S),Oi(u,p)||(rs=!0),u):(g1&42)===0||(g1&1073741824)!==0&&(gn&261930)===0?(rs=!0,u.memoizedState=b):(u=T0(),di.lanes|=u,Zs|=u,p)}function Rg(u,p,b,S,_){var M=ie.p;ie.p=M!==0&&8>M?M:8;var G=K.T,re={};K.T=re,n0(u,!1,p,b);try{var Ae=_(),Le=K.S;if(Le!==null&&Le(re,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var nt=zd(Ae,S);Wd(u,p,nt,go(u))}else Wd(u,p,S,go(u))}catch(ut){Wd(u,p,{then:function(){},status:"rejected",reason:ut},go())}finally{ie.p=M,G!==null&&re.types!==null&&(G.types=re.types),K.T=G}}function Zx(){}function Z2(u,p,b,S){if(u.tag!==5)throw Error(s(476));var _=Og(u).queue;Rg(u,_,p,ne,b===null?Zx:function(){return Dg(u),b(S)})}function Og(u){var p=u.memoizedState;if(p!==null)return p;p={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:v1,lastRenderedState:ne},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:v1,lastRenderedState:b},next:null},u.memoizedState=p,u=u.alternate,u!==null&&(u.memoizedState=p),p}function Dg(u){var p=Og(u);p.next===null&&(p=u.alternate.memoizedState),Wd(u,p.next.queue,{},go())}function e0(){return hs(pp)}function jg(){return Ja().memoizedState}function Bg(){return Ja().memoizedState}function t0(u){for(var p=u.return;p!==null;){switch(p.tag){case 24:case 3:var b=go();u=U1(b);var S=L1(p,u,b);S!==null&&(Po(S,p,b),Gd(S,p,b)),p={cache:Wo()},u.payload=p;return}p=p.return}}function eb(u,p,b){var S=go();b={lane:S,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},If(u)?Fg(p,b):(b=At(u,p,b,S),b!==null&&(Po(b,u,S),i0(b,p,S)))}function Pg(u,p,b){var S=go();Wd(u,p,b,S)}function Wd(u,p,b,S){var _={lane:S,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(If(u))Fg(p,_);else{var M=u.alternate;if(u.lanes===0&&(M===null||M.lanes===0)&&(M=p.lastRenderedReducer,M!==null))try{var G=p.lastRenderedState,re=M(G,b);if(_.hasEagerState=!0,_.eagerState=re,Oi(re,G))return vi(u,p,_,0),Sn===null&&xn(),!1}catch{}if(b=At(u,p,_,S),b!==null)return Po(b,u,S),i0(b,p,S),!0}return!1}function n0(u,p,b,S){if(S={lane:2,revertLane:nh(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},If(u)){if(p)throw Error(s(479))}else p=At(u,b,S,2),p!==null&&Po(p,u,2)}function If(u){var p=u.alternate;return u===di||p!==null&&p===di}function Fg(u,p){qc=yf=!0;var b=u.pending;b===null?p.next=p:(p.next=b.next,b.next=p),u.pending=p}function i0(u,p,b){if((b&4194048)!==0){var S=p.lanes;S&=u.pendingLanes,b|=S,p.lanes=b,ze(u,b)}}var Xd={readContext:hs,use:Sf,useCallback:Ua,useContext:Ua,useEffect:Ua,useImperativeHandle:Ua,useLayoutEffect:Ua,useInsertionEffect:Ua,useMemo:Ua,useReducer:Ua,useRef:Ua,useState:Ua,useDebugValue:Ua,useDeferredValue:Ua,useTransition:Ua,useSyncExternalStore:Ua,useId:Ua,useHostTransitionStatus:Ua,useFormState:Ua,useActionState:Ua,useOptimistic:Ua,useMemoCache:Ua,useCacheRefresh:Ua};Xd.useEffectEvent=Ua;var Ug={readContext:hs,use:Sf,useCallback:function(u,p){return ho().memoizedState=[u,p===void 0?null:p],u},useContext:hs,useEffect:_g,useImperativeHandle:function(u,p,b){b=b!=null?b.concat([u]):null,Ef(4194308,4,Ig.bind(null,p,u),b)},useLayoutEffect:function(u,p){return Ef(4194308,4,u,p)},useInsertionEffect:function(u,p){Ef(4,2,u,p)},useMemo:function(u,p){var b=ho();p=p===void 0?null:p;var S=u();if(gc){Bt(!0);try{u()}finally{Bt(!1)}}return b.memoizedState=[S,p],S},useReducer:function(u,p,b){var S=ho();if(b!==void 0){var _=b(p);if(gc){Bt(!0);try{b(p)}finally{Bt(!1)}}}else _=p;return S.memoizedState=S.baseState=_,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:_},S.queue=u,u=u.dispatch=eb.bind(null,di,u),[S.memoizedState,u]},useRef:function(u){var p=ho();return u={current:u},p.memoizedState=u},useState:function(u){u=q2(u);var p=u.queue,b=Pg.bind(null,di,p);return p.dispatch=b,[u.memoizedState,b]},useDebugValue:X2,useDeferredValue:function(u,p){var b=ho();return J2(b,u,p)},useTransition:function(){var u=q2(!1);return u=Rg.bind(null,di,u.queue,!0,!1),ho().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,p,b){var S=di,_=ho();if(bi){if(b===void 0)throw Error(s(407));b=b()}else{if(b=p(),Sn===null)throw Error(s(349));(gn&127)!==0||mg(S,p,b)}_.memoizedState=b;var M={value:b,getSnapshot:p};return _.queue=M,_g(Yl.bind(null,S,M,u),[u]),S.flags|=2048,Vc(9,{destroy:void 0},gg.bind(null,S,M,b,p),null),b},useId:function(){var u=ho(),p=Sn.identifierPrefix;if(bi){var b=To,S=No;b=(S&~(1<<32-Y(S)-1)).toString(32)+b,p="_"+p+"R_"+b,b=wf++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=$x++,p="_"+p+"r_"+b.toString(32)+"_";return u.memoizedState=p},useHostTransitionStatus:e0,useFormState:Y2,useActionState:Y2,useOptimistic:function(u){var p=ho();p.memoizedState=p.baseState=u;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=n0.bind(null,di,!0,b),b.dispatch=p,[u,p]},useMemoCache:L2,useCacheRefresh:function(){return ho().memoizedState=t0.bind(null,di)},useEffectEvent:function(u){var p=ho(),b={impl:u};return p.memoizedState=b,function(){if((hn&2)!==0)throw Error(s(440));return b.impl.apply(void 0,arguments)}}},r0={readContext:hs,use:Sf,useCallback:K2,useContext:hs,useEffect:Q2,useImperativeHandle:Ng,useInsertionEffect:$2,useLayoutEffect:W2,useMemo:Tg,useReducer:kf,useRef:Eg,useState:function(){return kf(v1)},useDebugValue:X2,useDeferredValue:function(u,p){var b=Ja();return Mg(b,Xr.memoizedState,u,p)},useTransition:function(){var u=kf(v1)[0],p=Ja().memoizedState;return[typeof u=="boolean"?u:$d(u),p]},useSyncExternalStore:pg,useId:jg,useHostTransitionStatus:e0,useFormState:Cf,useActionState:Cf,useOptimistic:function(u,p){var b=Ja();return bg(b,Xr,u,p)},useMemoCache:L2,useCacheRefresh:Bg};r0.useEffectEvent=Yc;var Lg={readContext:hs,use:Sf,useCallback:K2,useContext:hs,useEffect:Q2,useImperativeHandle:Ng,useInsertionEffect:$2,useLayoutEffect:W2,useMemo:Tg,useReducer:H2,useRef:Eg,useState:function(){return H2(v1)},useDebugValue:X2,useDeferredValue:function(u,p){var b=Ja();return Xr===null?J2(b,u,p):Mg(b,Xr.memoizedState,u,p)},useTransition:function(){var u=H2(v1)[0],p=Ja().memoizedState;return[typeof u=="boolean"?u:$d(u),p]},useSyncExternalStore:pg,useId:jg,useHostTransitionStatus:e0,useFormState:Cg,useActionState:Cg,useOptimistic:function(u,p){var b=Ja();return Xr!==null?bg(b,Xr,u,p):(b.baseState=u,[u,b.queue.dispatch])},useMemoCache:L2,useCacheRefresh:Bg};Lg.useEffectEvent=Yc;function a0(u,p,b,S){p=u.memoizedState,b=b(S,p),b=b==null?p:y({},p,b),u.memoizedState=b,u.lanes===0&&(u.updateQueue.baseState=b)}var Nf={enqueueSetState:function(u,p,b){u=u._reactInternals;var S=go(),_=U1(S);_.payload=p,b!=null&&(_.callback=b),p=L1(u,_,S),p!==null&&(Po(p,u,S),Gd(p,u,S))},enqueueReplaceState:function(u,p,b){u=u._reactInternals;var S=go(),_=U1(S);_.tag=1,_.payload=p,b!=null&&(_.callback=b),p=L1(u,_,S),p!==null&&(Po(p,u,S),Gd(p,u,S))},enqueueForceUpdate:function(u,p){u=u._reactInternals;var b=go(),S=U1(b);S.tag=2,p!=null&&(S.callback=p),p=L1(u,S,b),p!==null&&(Po(p,u,b),Gd(p,u,b))}};function Tf(u,p,b,S,_,M,G){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,M,G):p.prototype&&p.prototype.isPureReactComponent?!Or(b,S)||!Or(_,M):!0}function zg(u,p,b,S){u=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,S),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,S),p.state!==u&&Nf.enqueueReplaceState(p,p.state,null)}function q1(u,p){var b=p;if("ref"in p){b={};for(var S in p)S!=="ref"&&(b[S]=p[S])}if(u=u.defaultProps){b===p&&(b=y({},b));for(var _ in u)b[_]===void 0&&(b[_]=u[_])}return b}function Hg(u){_o(u)}function qg(u){console.error(u)}function s0(u){_o(u)}function Mf(u,p){try{var b=u.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(S){setTimeout(function(){throw S})}}function Gg(u,p,b){try{var S=u.onCaughtError;S(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function o0(u,p,b){return b=U1(b),b.tag=3,b.payload={element:null},b.callback=function(){Mf(u,p)},b}function l0(u){return u=U1(u),u.tag=3,u}function c0(u,p,b,S){var _=b.type.getDerivedStateFromError;if(typeof _=="function"){var M=S.value;u.payload=function(){return _(M)},u.callback=function(){Gg(p,b,S)}}var G=b.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(u.callback=function(){Gg(p,b,S),typeof _!="function"&&(y1===null?y1=new Set([this]):y1.add(this));var re=S.stack;this.componentDidCatch(S.value,{componentStack:re!==null?re:""})})}function Rf(u,p,b,S,_){if(b.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(p=b.alternate,p!==null&&Gl(p,b,_,!0),b=Xo.current,b!==null){switch(b.tag){case 31:case 13:return hl===null?Wf():b.alternate===null&&ur===0&&(ur=3),b.flags&=-257,b.flags|=65536,b.lanes=_,S===mf?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([S]):p.add(S),Kf(u,S,_)),!1;case 22:return b.flags|=65536,S===mf?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([S])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([S]):b.add(S)),Kf(u,S,_)),!1}throw Error(s(435,b.tag))}return Kf(u,S,_),Wf(),!1}if(bi)return p=Xo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=_,S!==cc&&(u=Error(s(422),{cause:S}),h1(Wa(u,b)))):(S!==cc&&(p=Error(s(423),{cause:S}),h1(Wa(p,b))),u=u.current.alternate,u.flags|=65536,_&=-_,u.lanes|=_,S=Wa(S,b),_=o0(u.stateNode,S,_),T2(u,_),ur!==4&&(ur=2)),!1;var M=Error(s(520),{cause:S});if(M=Wa(M,b),b1===null?b1=[M]:b1.push(M),ur!==4&&(ur=2),p===null)return!0;S=Wa(S,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,u=_&-_,b.lanes|=u,u=o0(b.stateNode,S,u),T2(b,u),!1;case 1:if(p=b.type,M=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(y1===null||!y1.has(M))))return b.flags|=65536,_&=-_,b.lanes|=_,_=l0(_),c0(_,u,b,S),T2(b,_),!1}b=b.return}while(b!==null);return!1}var d0=Error(s(461)),rs=!1;function Bs(u,p,b,S){p.child=u===null?og(p,null,b,S):mc(p,u.child,b,S)}function u0(u,p,b,S,_){b=b.render;var M=p.ref;if("ref"in S){var G={};for(var re in S)re!=="ref"&&(G[re]=S[re])}else G=S;return Tl(p),S=B2(u,p,b,G,M,_),re=P2(),u!==null&&!rs?(F2(u,p,_),Ql(u,p,_)):(bi&&re&&oc(p),p.flags|=1,Bs(u,p,S,_),p.child)}function Of(u,p,b,S,_){if(u===null){var M=b.type;return typeof M=="function"&&!da(M)&&M.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=M,Vg(u,p,M,S,_)):(u=Qa(b.type,null,S,p,p.mode,_),u.ref=p.ref,u.return=p,p.child=u)}if(M=u.child,!eu(u,_)){var G=M.memoizedProps;if(b=b.compare,b=b!==null?b:Or,b(G,S)&&u.ref===p.ref)return Ql(u,p,_)}return p.flags|=1,u=Wr(M,S),u.ref=p.ref,u.return=p,p.child=u}function Vg(u,p,b,S,_){if(u!==null){var M=u.memoizedProps;if(Or(M,S)&&u.ref===p.ref)if(rs=!1,p.pendingProps=S=M,eu(u,_))(u.flags&131072)!==0&&(rs=!0);else return p.lanes=u.lanes,Ql(u,p,_)}return Bf(u,p,b,S,_)}function Df(u,p,b,S){var _=S.children,M=u!==null?u.memoizedState:null;if(u===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((p.flags&128)!==0){if(M=M!==null?M.baseLanes|b:b,u!==null){for(S=p.child=u.child,_=0;S!==null;)_=_|S.lanes|S.childLanes,S=S.sibling;S=_&~M}else S=0,p.child=null;return Yg(u,p,M,b,S)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},u!==null&&hf(p,M!==null?M.cachePool:null),M!==null?dg(p,M):R2(),ug(p);else return S=p.lanes=536870912,Yg(u,p,M!==null?M.baseLanes|b:b,b,S)}else M!==null?(hf(p,M.cachePool),dg(p,M),H1(),p.memoizedState=null):(u!==null&&hf(p,null),R2(),H1());return Bs(u,p,_,b),p.child}function Kd(u,p){return u!==null&&u.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function Yg(u,p,b,S,_){var M=C2();return M=M===null?null:{parent:Ra._currentValue,pool:M},p.memoizedState={baseLanes:b,cachePool:M},u!==null&&hf(p,null),R2(),ug(p),u!==null&&Gl(u,p,S,!0),p.childLanes=_,null}function jf(u,p){return p=$c({mode:p.mode,children:p.children},u.mode),p.ref=u.ref,u.child=p,p.return=u,p}function Qg(u,p,b){return mc(p,u.child,null,b),u=jf(p,p.pendingProps),u.flags|=2,Ko(p),p.memoizedState=null,u}function tb(u,p,b){var S=p.pendingProps,_=(p.flags&128)!==0;if(p.flags&=-129,u===null){if(bi){if(S.mode==="hidden")return u=jf(p,S),p.lanes=536870912,Kd(null,u);if(D2(p),(u=Dr)?(u=ap(u,Js),u=u!==null&&u.data==="&"?u:null,u!==null&&(p.memoizedState={dehydrated:u,treeContext:cl!==null?{id:No,overflow:To}:null,retryLane:536870912,hydrationErrors:null},b=Nl(u),b.return=p,p.child=b,Xa=p,Dr=null)):u=null,u===null)throw $o(p);return p.lanes=536870912,null}return jf(p,S)}var M=u.memoizedState;if(M!==null){var G=M.dehydrated;if(D2(p),_)if(p.flags&256)p.flags&=-257,p=Qg(u,p,b);else if(p.memoizedState!==null)p.child=u.child,p.flags|=128,p=null;else throw Error(s(558));else if(rs||Gl(u,p,b,!1),_=(b&u.childLanes)!==0,rs||_){if(S=Sn,S!==null&&(G=Pe(S,b),G!==0&&G!==M.retryLane))throw M.retryLane=G,tn(u,G),Po(S,u,G),d0;Wf(),p=Qg(u,p,b)}else u=M.treeContext,Dr=el(G.nextSibling),Xa=p,bi=!0,Mo=null,Js=!1,u!==null&&Pc(p,u),p=jf(p,S),p.flags|=4096;return p}return u=Wr(u.child,{mode:S.mode,children:S.children}),u.ref=p.ref,p.child=u,u.return=p,u}function Jd(u,p){var b=p.ref;if(b===null)u!==null&&u.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(s(284));(u===null||u.ref!==b)&&(p.flags|=4194816)}}function Bf(u,p,b,S,_){return Tl(p),b=B2(u,p,b,S,void 0,_),S=P2(),u!==null&&!rs?(F2(u,p,_),Ql(u,p,_)):(bi&&S&&oc(p),p.flags|=1,Bs(u,p,b,_),p.child)}function Zd(u,p,b,S,_,M){return Tl(p),p.updateQueue=null,b=hg(p,S,b,_),fg(u),S=P2(),u!==null&&!rs?(F2(u,p,M),Ql(u,p,M)):(bi&&S&&oc(p),p.flags|=1,Bs(u,p,b,M),p.child)}function $g(u,p,b,S,_){if(Tl(p),p.stateNode===null){var M=xi,G=b.contextType;typeof G=="object"&&G!==null&&(M=hs(G)),M=new b(S,M),p.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=Nf,p.stateNode=M,M._reactInternals=p,M=p.stateNode,M.props=S,M.state=p.memoizedState,M.refs={},I2(p),G=b.contextType,M.context=typeof G=="object"&&G!==null?hs(G):xi,M.state=p.memoizedState,G=b.getDerivedStateFromProps,typeof G=="function"&&(a0(p,b,G,S),M.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(G=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),G!==M.state&&Nf.enqueueReplaceState(M,M.state,null),Yd(p,S,M,_),Vd(),M.state=p.memoizedState),typeof M.componentDidMount=="function"&&(p.flags|=4194308),S=!0}else if(u===null){M=p.stateNode;var re=p.memoizedProps,Ae=q1(b,re);M.props=Ae;var Le=M.context,nt=b.contextType;G=xi,typeof nt=="object"&&nt!==null&&(G=hs(nt));var ut=b.getDerivedStateFromProps;nt=typeof ut=="function"||typeof M.getSnapshotBeforeUpdate=="function",re=p.pendingProps!==re,nt||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(re||Le!==G)&&zg(p,M,S,G),F1=!1;var He=p.memoizedState;M.state=He,Yd(p,S,M,_),Vd(),Le=p.memoizedState,re||He!==Le||F1?(typeof ut=="function"&&(a0(p,b,ut,S),Le=p.memoizedState),(Ae=F1||Tf(p,b,Ae,S,He,Le,G))?(nt||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(p.flags|=4194308)):(typeof M.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=S,p.memoizedState=Le),M.props=S,M.state=Le,M.context=G,S=Ae):(typeof M.componentDidMount=="function"&&(p.flags|=4194308),S=!1)}else{M=p.stateNode,N2(u,p),G=p.memoizedProps,nt=q1(b,G),M.props=nt,ut=p.pendingProps,He=M.context,Le=b.contextType,Ae=xi,typeof Le=="object"&&Le!==null&&(Ae=hs(Le)),re=b.getDerivedStateFromProps,(Le=typeof re=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==ut||He!==Ae)&&zg(p,M,S,Ae),F1=!1,He=p.memoizedState,M.state=He,Yd(p,S,M,_),Vd();var We=p.memoizedState;G!==ut||He!==We||F1||u!==null&&u.dependencies!==null&&Cs(u.dependencies)?(typeof re=="function"&&(a0(p,b,re,S),We=p.memoizedState),(nt=F1||Tf(p,b,nt,S,He,We,Ae)||u!==null&&u.dependencies!==null&&Cs(u.dependencies))?(Le||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(S,We,Ae),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(S,We,Ae)),typeof M.componentDidUpdate=="function"&&(p.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof M.componentDidUpdate!="function"||G===u.memoizedProps&&He===u.memoizedState||(p.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===u.memoizedProps&&He===u.memoizedState||(p.flags|=1024),p.memoizedProps=S,p.memoizedState=We),M.props=S,M.state=We,M.context=Ae,S=nt):(typeof M.componentDidUpdate!="function"||G===u.memoizedProps&&He===u.memoizedState||(p.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===u.memoizedProps&&He===u.memoizedState||(p.flags|=1024),S=!1)}return M=S,Jd(u,p),S=(p.flags&128)!==0,M||S?(M=p.stateNode,b=S&&typeof b.getDerivedStateFromError!="function"?null:M.render(),p.flags|=1,u!==null&&S?(p.child=mc(p,u.child,null,_),p.child=mc(p,null,b,_)):Bs(u,p,b,_),p.memoizedState=M.state,u=p.child):u=Ql(u,p,_),u}function Wg(u,p,b,S){return dl(),p.flags|=256,Bs(u,p,b,S),p.child}var Pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qc(u){return{baseLanes:u,cachePool:ng()}}function f0(u,p,b){return u=u!==null?u.childLanes&~b:0,p&&(u|=La),u}function Xg(u,p,b){var S=p.pendingProps,_=!1,M=(p.flags&128)!==0,G;if((G=M)||(G=u!==null&&u.memoizedState===null?!1:(Ka.current&2)!==0),G&&(_=!0,p.flags&=-129),G=(p.flags&32)!==0,p.flags&=-33,u===null){if(bi){if(_?z1(p):H1(),(u=Dr)?(u=ap(u,Js),u=u!==null&&u.data!=="&"?u:null,u!==null&&(p.memoizedState={dehydrated:u,treeContext:cl!==null?{id:No,overflow:To}:null,retryLane:536870912,hydrationErrors:null},b=Nl(u),b.return=p,p.child=b,Xa=p,Dr=null)):u=null,u===null)throw $o(p);return bu(u)?p.lanes=32:p.lanes=536870912,null}var re=S.children;return S=S.fallback,_?(H1(),_=p.mode,re=$c({mode:"hidden",children:re},_),S=$a(S,_,b,null),re.return=p,S.return=p,re.sibling=S,p.child=re,S=p.child,S.memoizedState=Qc(b),S.childLanes=f0(u,G,b),p.memoizedState=Pf,Kd(null,S)):(z1(p),Ff(p,re))}var Ae=u.memoizedState;if(Ae!==null&&(re=Ae.dehydrated,re!==null)){if(M)p.flags&256?(z1(p),p.flags&=-257,p=Uf(u,p,b)):p.memoizedState!==null?(H1(),p.child=u.child,p.flags|=128,p=null):(H1(),re=S.fallback,_=p.mode,S=$c({mode:"visible",children:S.children},_),re=$a(re,_,b,null),re.flags|=2,S.return=p,re.return=p,S.sibling=re,p.child=S,mc(p,u.child,null,b),S=p.child,S.memoizedState=Qc(b),S.childLanes=f0(u,G,b),p.memoizedState=Pf,p=Kd(null,S));else if(z1(p),bu(re)){if(G=re.nextSibling&&re.nextSibling.dataset,G)var Le=G.dgst;G=Le,S=Error(s(419)),S.stack="",S.digest=G,h1({value:S,source:null,stack:null}),p=Uf(u,p,b)}else if(rs||Gl(u,p,b,!1),G=(b&u.childLanes)!==0,rs||G){if(G=Sn,G!==null&&(S=Pe(G,b),S!==0&&S!==Ae.retryLane))throw Ae.retryLane=S,tn(u,S),Po(G,u,S),d0;sp(re)||Wf(),p=Uf(u,p,b)}else sp(re)?(p.flags|=192,p.child=u.child,p=null):(u=Ae.treeContext,Dr=el(re.nextSibling),Xa=p,bi=!0,Mo=null,Js=!1,u!==null&&Pc(p,u),p=Ff(p,S.children),p.flags|=4096);return p}return _?(H1(),re=S.fallback,_=p.mode,Ae=u.child,Le=Ae.sibling,S=Wr(Ae,{mode:"hidden",children:S.children}),S.subtreeFlags=Ae.subtreeFlags&65011712,Le!==null?re=Wr(Le,re):(re=$a(re,_,b,null),re.flags|=2),re.return=p,S.return=p,S.sibling=re,p.child=S,Kd(null,S),S=p.child,re=u.child.memoizedState,re===null?re=Qc(b):(_=re.cachePool,_!==null?(Ae=Ra._currentValue,_=_.parent!==Ae?{parent:Ae,pool:Ae}:_):_=ng(),re={baseLanes:re.baseLanes|b,cachePool:_}),S.memoizedState=re,S.childLanes=f0(u,G,b),p.memoizedState=Pf,Kd(u.child,S)):(z1(p),b=u.child,u=b.sibling,b=Wr(b,{mode:"visible",children:S.children}),b.return=p,b.sibling=null,u!==null&&(G=p.deletions,G===null?(p.deletions=[u],p.flags|=16):G.push(u)),p.child=b,p.memoizedState=null,b)}function Ff(u,p){return p=$c({mode:"visible",children:p},u.mode),p.return=u,u.child=p}function $c(u,p){return u=oi(22,u,null,p),u.lanes=0,u}function Uf(u,p,b){return mc(p,u.child,null,b),u=Ff(p,p.pendingProps.children),u.flags|=2,p.memoizedState=null,u}function h0(u,p,b){u.lanes|=p;var S=u.alternate;S!==null&&(S.lanes|=p),ql(u.return,p,b)}function p0(u,p,b,S,_,M){var G=u.memoizedState;G===null?u.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:S,tail:b,tailMode:_,treeForkCount:M}:(G.isBackwards=p,G.rendering=null,G.renderingStartTime=0,G.last=S,G.tail=b,G.tailMode=_,G.treeForkCount=M)}function Kg(u,p,b){var S=p.pendingProps,_=S.revealOrder,M=S.tail;S=S.children;var G=Ka.current,re=(G&2)!==0;if(re?(G=G&1|2,p.flags|=128):G&=1,we(Ka,G),Bs(u,p,S,b),S=bi?u1:0,!re&&u!==null&&(u.flags&128)!==0)e:for(u=p.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&h0(u,b,p);else if(u.tag===19)h0(u,b,p);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===p)break e;for(;u.sibling===null;){if(u.return===null||u.return===p)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(_){case"forwards":for(b=p.child,_=null;b!==null;)u=b.alternate,u!==null&&bf(u)===null&&(_=b),b=b.sibling;b=_,b===null?(_=p.child,p.child=null):(_=b.sibling,b.sibling=null),p0(p,!1,_,b,M,S);break;case"backwards":case"unstable_legacy-backwards":for(b=null,_=p.child,p.child=null;_!==null;){if(u=_.alternate,u!==null&&bf(u)===null){p.child=_;break}u=_.sibling,_.sibling=b,b=_,_=u}p0(p,!0,b,null,M,S);break;case"together":p0(p,!1,null,null,void 0,S);break;default:p.memoizedState=null}return p.child}function Ql(u,p,b){if(u!==null&&(p.dependencies=u.dependencies),Zs|=p.lanes,(b&p.childLanes)===0)if(u!==null){if(Gl(u,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(u!==null&&p.child!==u.child)throw Error(s(153));if(p.child!==null){for(u=p.child,b=Wr(u,u.pendingProps),p.child=b,b.return=p;u.sibling!==null;)u=u.sibling,b=b.sibling=Wr(u,u.pendingProps),b.return=p;b.sibling=null}return p.child}function eu(u,p){return(u.lanes&p)!==0?!0:(u=u.dependencies,!!(u!==null&&Cs(u)))}function nb(u,p,b){switch(p.tag){case 3:Qe(p,p.stateNode.containerInfo),fl(p,Ra,u.memoizedState.cache),dl();break;case 27:case 5:Xe(p);break;case 4:Qe(p,p.stateNode.containerInfo);break;case 10:fl(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,D2(p),null;break;case 13:var S=p.memoizedState;if(S!==null)return S.dehydrated!==null?(z1(p),p.flags|=128,null):(b&p.child.childLanes)!==0?Xg(u,p,b):(z1(p),u=Ql(u,p,b),u!==null?u.sibling:null);z1(p);break;case 19:var _=(u.flags&128)!==0;if(S=(b&p.childLanes)!==0,S||(Gl(u,p,b,!1),S=(b&p.childLanes)!==0),_){if(S)return Kg(u,p,b);p.flags|=128}if(_=p.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),we(Ka,Ka.current),S)break;return null;case 22:return p.lanes=0,Df(u,p,b,p.pendingProps);case 24:fl(p,Ra,u.memoizedState.cache)}return Ql(u,p,b)}function m0(u,p,b){if(u!==null)if(u.memoizedProps!==p.pendingProps)rs=!0;else{if(!eu(u,b)&&(p.flags&128)===0)return rs=!1,nb(u,p,b);rs=(u.flags&131072)!==0}else rs=!1,bi&&(p.flags&1048576)!==0&&Bc(p,u1,p.index);switch(p.lanes=0,p.tag){case 16:e:{var S=p.pendingProps;if(u=hc(p.elementType),p.type=u,typeof u=="function")da(u)?(S=q1(u,S),p.tag=1,p=$g(null,p,u,S,b)):(p.tag=0,p=Bf(null,p,u,S,b));else{if(u!=null){var _=u.$$typeof;if(_===B){p.tag=11,p=u0(null,p,u,S,b);break e}else if(_===P){p.tag=14,p=Of(null,p,u,S,b);break e}}throw p=X(u)||u,Error(s(306,p,""))}}return p;case 0:return Bf(u,p,p.type,p.pendingProps,b);case 1:return S=p.type,_=q1(S,p.pendingProps),$g(u,p,S,_,b);case 3:e:{if(Qe(p,p.stateNode.containerInfo),u===null)throw Error(s(387));S=p.pendingProps;var M=p.memoizedState;_=M.element,N2(u,p),Yd(p,S,null,b);var G=p.memoizedState;if(S=G.cache,fl(p,Ra,S),S!==M.cache&&p1(p,[Ra],b,!0),Vd(),S=G.element,M.isDehydrated)if(M={element:S,isDehydrated:!1,cache:G.cache},p.updateQueue.baseState=M,p.memoizedState=M,p.flags&256){p=Wg(u,p,S,b);break e}else if(S!==_){_=Wa(Error(s(424)),p),h1(_),p=Wg(u,p,S,b);break e}else for(u=p.stateNode.containerInfo,u.nodeType===9?u=u.body:u=u.nodeName==="HTML"?u.ownerDocument.body:u,Dr=el(u.firstChild),Xa=p,bi=!0,Mo=null,Js=!0,b=og(p,null,S,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(dl(),S===_){p=Ql(u,p,b);break e}Bs(u,p,S,b)}p=p.child}return p;case 26:return Jd(u,p),u===null?(b=nA(p.type,null,p.pendingProps,null))?p.memoizedState=b:bi||(b=p.type,u=p.pendingProps,S=xu(ye.current).createElement(b),S[$e]=p,S[Me]=u,Es(S,b,u),Vt(S),p.stateNode=S):p.memoizedState=nA(p.type,u.memoizedProps,p.pendingProps,u.memoizedState),null;case 27:return Xe(p),u===null&&bi&&(S=p.stateNode=dp(p.type,p.pendingProps,ye.current),Xa=p,Js=!0,_=Dr,Y1(p.type)?(op=_,Dr=el(S.firstChild)):Dr=_),Bs(u,p,p.pendingProps.children,b),Jd(u,p),u===null&&(p.flags|=4194304),p.child;case 5:return u===null&&bi&&((_=S=Dr)&&(S=hb(S,p.type,p.pendingProps,Js),S!==null?(p.stateNode=S,Xa=p,Dr=el(S.firstChild),Js=!1,_=!0):_=!1),_||$o(p)),Xe(p),_=p.type,M=p.pendingProps,G=u!==null?u.memoizedProps:null,S=M.children,oh(_,M)?S=null:G!==null&&oh(_,G)&&(p.flags|=32),p.memoizedState!==null&&(_=B2(u,p,Wx,null,null,b),pp._currentValue=_),Jd(u,p),Bs(u,p,S,b),p.child;case 6:return u===null&&bi&&((u=b=Dr)&&(b=Rv(b,p.pendingProps,Js),b!==null?(p.stateNode=b,Xa=p,Dr=null,u=!0):u=!1),u||$o(p)),null;case 13:return Xg(u,p,b);case 4:return Qe(p,p.stateNode.containerInfo),S=p.pendingProps,u===null?p.child=mc(p,null,S,b):Bs(u,p,S,b),p.child;case 11:return u0(u,p,p.type,p.pendingProps,b);case 7:return Bs(u,p,p.pendingProps,b),p.child;case 8:return Bs(u,p,p.pendingProps.children,b),p.child;case 12:return Bs(u,p,p.pendingProps.children,b),p.child;case 10:return S=p.pendingProps,fl(p,p.type,S.value),Bs(u,p,S.children,b),p.child;case 9:return _=p.type._context,S=p.pendingProps.children,Tl(p),_=hs(_),S=S(_),p.flags|=1,Bs(u,p,S,b),p.child;case 14:return Of(u,p,p.type,p.pendingProps,b);case 15:return Vg(u,p,p.type,p.pendingProps,b);case 19:return Kg(u,p,b);case 31:return tb(u,p,b);case 22:return Df(u,p,b,p.pendingProps);case 24:return Tl(p),S=hs(Ra),u===null?(_=C2(),_===null&&(_=Sn,M=Wo(),_.pooledCache=M,M.refCount++,M!==null&&(_.pooledCacheLanes|=b),_=M),p.memoizedState={parent:S,cache:_},I2(p),fl(p,Ra,_)):((u.lanes&b)!==0&&(N2(u,p),Yd(p,null,null,b),Vd()),_=u.memoizedState,M=p.memoizedState,_.parent!==S?(_={parent:S,cache:S},p.memoizedState=_,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=_),fl(p,Ra,S)):(S=M.cache,fl(p,Ra,S),S!==_.cache&&p1(p,[Ra],b,!0))),Bs(u,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(s(156,p.tag))}function $l(u){u.flags|=4}function tu(u,p,b,S,_){if((p=(u.mode&32)!==0)&&(p=!1),p){if(u.flags|=16777216,(_&335544128)===_)if(u.stateNode.complete)u.flags|=8192;else if(D0())u.flags|=8192;else throw pc=mf,E2}else u.flags&=-16777217}function Jg(u,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!oA(p))if(D0())u.flags|=8192;else throw pc=mf,E2}function nu(u,p){p!==null&&(u.flags|=4),u.flags&16384&&(p=u.tag!==22?De():536870912,u.lanes|=p,mo|=p)}function iu(u,p){if(!bi)switch(u.tailMode){case"hidden":p=u.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?u.tail=null:b.sibling=null;break;case"collapsed":b=u.tail;for(var S=null;b!==null;)b.alternate!==null&&(S=b),b=b.sibling;S===null?p||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function ra(u){var p=u.alternate!==null&&u.alternate.child===u.child,b=0,S=0;if(p)for(var _=u.child;_!==null;)b|=_.lanes|_.childLanes,S|=_.subtreeFlags&65011712,S|=_.flags&65011712,_.return=u,_=_.sibling;else for(_=u.child;_!==null;)b|=_.lanes|_.childLanes,S|=_.subtreeFlags,S|=_.flags,_.return=u,_=_.sibling;return u.subtreeFlags|=S,u.childLanes=b,p}function ib(u,p,b){var S=p.pendingProps;switch(lc(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(p),null;case 1:return ra(p),null;case 3:return b=p.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),p.memoizedState.cache!==S&&(p.flags|=2048),Ro(Ra),Ge(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(Hl(p)?$l(p):u===null||u.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,f1())),ra(p),null;case 26:var _=p.type,M=p.memoizedState;return u===null?($l(p),M!==null?(ra(p),Jg(p,M)):(ra(p),tu(p,_,null,S,b))):M?M!==u.memoizedState?($l(p),ra(p),Jg(p,M)):(ra(p),p.flags&=-16777217):(u=u.memoizedProps,u!==S&&$l(p),ra(p),tu(p,_,u,S,b)),null;case 27:if(Je(p),b=ye.current,_=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==S&&$l(p);else{if(!S){if(p.stateNode===null)throw Error(s(166));return ra(p),null}u=be.current,Hl(p)?B1(p):(u=dp(_,S,b),p.stateNode=u,$l(p))}return ra(p),null;case 5:if(Je(p),_=p.type,u!==null&&p.stateNode!=null)u.memoizedProps!==S&&$l(p);else{if(!S){if(p.stateNode===null)throw Error(s(166));return ra(p),null}if(M=be.current,Hl(p))B1(p);else{var G=xu(ye.current);switch(M){case 1:M=G.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:M=G.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":M=G.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":M=G.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":M=G.createElement("div"),M.innerHTML="<script><\/script>",M=M.removeChild(M.firstChild);break;case"select":M=typeof S.is=="string"?G.createElement("select",{is:S.is}):G.createElement("select"),S.multiple?M.multiple=!0:S.size&&(M.size=S.size);break;default:M=typeof S.is=="string"?G.createElement(_,{is:S.is}):G.createElement(_)}}M[$e]=p,M[Me]=S;e:for(G=p.child;G!==null;){if(G.tag===5||G.tag===6)M.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===p)break e;for(;G.sibling===null;){if(G.return===null||G.return===p)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}p.stateNode=M;e:switch(Es(M,_,S),_){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&$l(p)}}return ra(p),tu(p,p.type,u===null?null:u.memoizedProps,p.pendingProps,b),null;case 6:if(u&&p.stateNode!=null)u.memoizedProps!==S&&$l(p);else{if(typeof S!="string"&&p.stateNode===null)throw Error(s(166));if(u=ye.current,Hl(p)){if(u=p.stateNode,b=p.memoizedProps,S=null,_=Xa,_!==null)switch(_.tag){case 27:case 5:S=_.memoizedProps}u[$e]=p,u=!!(u.nodeValue===b||S!==null&&S.suppressHydrationWarning===!0||Ev(u.nodeValue,b)),u||$o(p,!0)}else u=xu(u).createTextNode(S),u[$e]=p,p.stateNode=u}return ra(p),null;case 31:if(b=p.memoizedState,u===null||u.memoizedState!==null){if(S=Hl(p),b!==null){if(u===null){if(!S)throw Error(s(318));if(u=p.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(557));u[$e]=p}else dl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ra(p),u=!1}else b=f1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=b),u=!0;if(!u)return p.flags&256?(Ko(p),p):(Ko(p),null);if((p.flags&128)!==0)throw Error(s(558))}return ra(p),null;case 13:if(S=p.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(_=Hl(p),S!==null&&S.dehydrated!==null){if(u===null){if(!_)throw Error(s(318));if(_=p.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_[$e]=p}else dl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ra(p),_=!1}else _=f1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=_),_=!0;if(!_)return p.flags&256?(Ko(p),p):(Ko(p),null)}return Ko(p),(p.flags&128)!==0?(p.lanes=b,p):(b=S!==null,u=u!==null&&u.memoizedState!==null,b&&(S=p.child,_=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(_=S.alternate.memoizedState.cachePool.pool),M=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(M=S.memoizedState.cachePool.pool),M!==_&&(S.flags|=2048)),b!==u&&b&&(p.child.flags|=8192),nu(p,p.updateQueue),ra(p),null);case 4:return Ge(),u===null&&Q0(p.stateNode.containerInfo),ra(p),null;case 10:return Ro(p.type),ra(p),null;case 19:if(oe(Ka),S=p.memoizedState,S===null)return ra(p),null;if(_=(p.flags&128)!==0,M=S.rendering,M===null)if(_)iu(S,!1);else{if(ur!==0||u!==null&&(u.flags&128)!==0)for(u=p.child;u!==null;){if(M=bf(u),M!==null){for(p.flags|=128,iu(S,!1),u=M.updateQueue,p.updateQueue=u,nu(p,u),p.subtreeFlags=0,u=b,b=p.child;b!==null;)fs(b,u),b=b.sibling;return we(Ka,Ka.current&1|2),bi&&Qo(p,S.treeForkCount),p.child}u=u.sibling}S.tail!==null&&jt()>cu&&(p.flags|=128,_=!0,iu(S,!1),p.lanes=4194304)}else{if(!_)if(u=bf(M),u!==null){if(p.flags|=128,_=!0,u=u.updateQueue,p.updateQueue=u,nu(p,u),iu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!M.alternate&&!bi)return ra(p),null}else 2*jt()-S.renderingStartTime>cu&&b!==536870912&&(p.flags|=128,_=!0,iu(S,!1),p.lanes=4194304);S.isBackwards?(M.sibling=p.child,p.child=M):(u=S.last,u!==null?u.sibling=M:p.child=M,S.last=M)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=jt(),u.sibling=null,b=Ka.current,we(Ka,_?b&1|2:b&1),bi&&Qo(p,S.treeForkCount),u):(ra(p),null);case 22:case 23:return Ko(p),O2(),S=p.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(p.flags|=8192):S&&(p.flags|=8192),S?(b&536870912)!==0&&(p.flags&128)===0&&(ra(p),p.subtreeFlags&6&&(p.flags|=8192)):ra(p),b=p.updateQueue,b!==null&&nu(p,b.retryQueue),b=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==b&&(p.flags|=2048),u!==null&&oe(m1),null;case 24:return b=null,u!==null&&(b=u.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Ro(Ra),ra(p),null;case 25:return null;case 30:return null}throw Error(s(156,p.tag))}function Zg(u,p){switch(lc(p),p.tag){case 1:return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 3:return Ro(Ra),Ge(),u=p.flags,(u&65536)!==0&&(u&128)===0?(p.flags=u&-65537|128,p):null;case 26:case 27:case 5:return Je(p),null;case 31:if(p.memoizedState!==null){if(Ko(p),p.alternate===null)throw Error(s(340));dl()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 13:if(Ko(p),u=p.memoizedState,u!==null&&u.dehydrated!==null){if(p.alternate===null)throw Error(s(340));dl()}return u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 19:return oe(Ka),null;case 4:return Ge(),null;case 10:return Ro(p.type),null;case 22:case 23:return Ko(p),O2(),u!==null&&oe(m1),u=p.flags,u&65536?(p.flags=u&-65537|128,p):null;case 24:return Ro(Ra),null;case 25:return null;default:return null}}function Lf(u,p){switch(lc(p),p.tag){case 3:Ro(Ra),Ge();break;case 26:case 27:case 5:Je(p);break;case 4:Ge();break;case 31:p.memoizedState!==null&&Ko(p);break;case 13:Ko(p);break;case 19:oe(Ka);break;case 10:Ro(p.type);break;case 22:case 23:Ko(p),O2(),u!==null&&oe(m1);break;case 24:Ro(Ra)}}function ru(u,p){try{var b=p.updateQueue,S=b!==null?b.lastEffect:null;if(S!==null){var _=S.next;b=_;do{if((b.tag&u)===u){S=void 0;var M=b.create,G=b.inst;S=M(),G.destroy=S}b=b.next}while(b!==_)}}catch(re){kr(p,p.return,re)}}function x1(u,p,b){try{var S=p.updateQueue,_=S!==null?S.lastEffect:null;if(_!==null){var M=_.next;S=M;do{if((S.tag&u)===u){var G=S.inst,re=G.destroy;if(re!==void 0){G.destroy=void 0,_=p;var Ae=b,Le=re;try{Le()}catch(nt){kr(_,Ae,nt)}}}S=S.next}while(S!==M)}}catch(nt){kr(p,p.return,nt)}}function zf(u){var p=u.updateQueue;if(p!==null){var b=u.stateNode;try{cg(p,b)}catch(S){kr(u,u.return,S)}}}function ev(u,p,b){b.props=q1(u.type,u.memoizedProps),b.state=u.memoizedState;try{b.componentWillUnmount()}catch(S){kr(u,p,S)}}function Wc(u,p){try{var b=u.ref;if(b!==null){switch(u.tag){case 26:case 27:case 5:var S=u.stateNode;break;case 30:S=u.stateNode;break;default:S=u.stateNode}typeof b=="function"?u.refCleanup=b(S):b.current=S}}catch(_){kr(u,p,_)}}function pl(u,p){var b=u.ref,S=u.refCleanup;if(b!==null)if(typeof S=="function")try{S()}catch(_){kr(u,p,_)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(_){kr(u,p,_)}else b.current=null}function tv(u){var p=u.type,b=u.memoizedProps,S=u.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&S.focus();break e;case"img":b.src?S.src=b.src:b.srcSet&&(S.srcset=b.srcSet)}}catch(_){kr(u,u.return,_)}}function Hf(u,p,b){try{var S=u.stateNode;_v(S,u.type,b,p),S[Me]=p}catch(_){kr(u,u.return,_)}}function g0(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Y1(u.type)||u.tag===4}function au(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||g0(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Y1(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function v0(u,p,b){var S=u.tag;if(S===5||S===6)u=u.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(u,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(u),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Pi));else if(S!==4&&(S===27&&Y1(u.type)&&(b=u.stateNode,p=null),u=u.child,u!==null))for(v0(u,p,b),u=u.sibling;u!==null;)v0(u,p,b),u=u.sibling}function su(u,p,b){var S=u.tag;if(S===5||S===6)u=u.stateNode,p?b.insertBefore(u,p):b.appendChild(u);else if(S!==4&&(S===27&&Y1(u.type)&&(b=u.stateNode),u=u.child,u!==null))for(su(u,p,b),u=u.sibling;u!==null;)su(u,p,b),u=u.sibling}function x0(u){var p=u.stateNode,b=u.memoizedProps;try{for(var S=u.type,_=p.attributes;_.length;)p.removeAttributeNode(_[0]);Es(p,S,b),p[$e]=u,p[Me]=b}catch(M){kr(u,u.return,M)}}var Ml=!1,as=!1,qf=!1,b0=typeof WeakSet=="function"?WeakSet:Set,ss=null;function rb(u,p){if(u=u.containerInfo,ah=Uv,u=Xs(u),Ms(u)){if("selectionStart"in u)var b={start:u.selectionStart,end:u.selectionEnd};else e:{b=(b=u.ownerDocument)&&b.defaultView||window;var S=b.getSelection&&b.getSelection();if(S&&S.rangeCount!==0){b=S.anchorNode;var _=S.anchorOffset,M=S.focusNode;S=S.focusOffset;try{b.nodeType,M.nodeType}catch{b=null;break e}var G=0,re=-1,Ae=-1,Le=0,nt=0,ut=u,He=null;t:for(;;){for(var We;ut!==b||_!==0&&ut.nodeType!==3||(re=G+_),ut!==M||S!==0&&ut.nodeType!==3||(Ae=G+S),ut.nodeType===3&&(G+=ut.nodeValue.length),(We=ut.firstChild)!==null;)He=ut,ut=We;for(;;){if(ut===u)break t;if(He===b&&++Le===_&&(re=G),He===M&&++nt===S&&(Ae=G),(We=ut.nextSibling)!==null)break;ut=He,He=ut.parentNode}ut=We}b=re===-1||Ae===-1?null:{start:re,end:Ae}}else b=null}b=b||{start:0,end:0}}else b=null;for(sh={focusedElem:u,selectionRange:b},Uv=!1,ss=p;ss!==null;)if(p=ss,u=p.child,(p.subtreeFlags&1028)!==0&&u!==null)u.return=p,ss=u;else for(;ss!==null;){switch(p=ss,M=p.alternate,u=p.flags,p.tag){case 0:if((u&4)!==0&&(u=p.updateQueue,u=u!==null?u.events:null,u!==null))for(b=0;b<u.length;b++)_=u[b],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&M!==null){u=void 0,b=p,_=M.memoizedProps,M=M.memoizedState,S=b.stateNode;try{var pn=q1(b.type,_);u=S.getSnapshotBeforeUpdate(pn,M),S.__reactInternalSnapshotBeforeUpdate=u}catch(Qn){kr(b,b.return,Qn)}}break;case 3:if((u&1024)!==0){if(u=p.stateNode.containerInfo,b=u.nodeType,b===9)rp(u);else if(b===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":rp(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=p.sibling,u!==null){u.return=p.return,ss=u;break}ss=p.return}}function y0(u,p,b){var S=b.flags;switch(b.tag){case 0:case 11:case 15:Xl(u,b),S&4&&ru(5,b);break;case 1:if(Xl(u,b),S&4)if(u=b.stateNode,p===null)try{u.componentDidMount()}catch(G){kr(b,b.return,G)}else{var _=q1(b.type,p.memoizedProps);p=p.memoizedState;try{u.componentDidUpdate(_,p,u.__reactInternalSnapshotBeforeUpdate)}catch(G){kr(b,b.return,G)}}S&64&&zf(b),S&512&&Wc(b,b.return);break;case 3:if(Xl(u,b),S&64&&(u=b.updateQueue,u!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{cg(u,p)}catch(G){kr(b,b.return,G)}}break;case 27:p===null&&S&4&&x0(b);case 26:case 5:Xl(u,b),p===null&&S&4&&tv(b),S&512&&Wc(b,b.return);break;case 12:Xl(u,b);break;case 31:Xl(u,b),S&4&&Gf(u,b);break;case 13:Xl(u,b),S&4&&nv(u,b),S&64&&(u=b.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(b=mv.bind(null,b),Ov(u,b))));break;case 22:if(S=b.memoizedState!==null||Ml,!S){p=p!==null&&p.memoizedState!==null||as,_=Ml;var M=as;Ml=S,(as=p)&&!M?ml(u,b,(b.subtreeFlags&8772)!==0):Xl(u,b),Ml=_,as=M}break;case 30:break;default:Xl(u,b)}}function w0(u){var p=u.alternate;p!==null&&(u.alternate=null,w0(p)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(p=u.stateNode,p!==null&&Dt(p)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var ua=null,Oo=!1;function Wl(u,p,b){for(b=b.child;b!==null;)A0(u,p,b),b=b.sibling}function A0(u,p,b){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(dn,b)}catch{}switch(b.tag){case 26:as||pl(b,p),Wl(u,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:as||pl(b,p);var S=ua,_=Oo;Y1(b.type)&&(ua=b.stateNode,Oo=!1),Wl(u,p,b),ad(b.stateNode),ua=S,Oo=_;break;case 5:as||pl(b,p);case 6:if(S=ua,_=Oo,ua=null,Wl(u,p,b),ua=S,Oo=_,ua!==null)if(Oo)try{(ua.nodeType===9?ua.body:ua.nodeName==="HTML"?ua.ownerDocument.body:ua).removeChild(b.stateNode)}catch(M){kr(b,p,M)}else try{ua.removeChild(b.stateNode)}catch(M){kr(b,p,M)}break;case 18:ua!==null&&(Oo?(u=ua,np(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,b.stateNode),fh(u)):np(ua,b.stateNode));break;case 4:S=ua,_=Oo,ua=b.stateNode.containerInfo,Oo=!0,Wl(u,p,b),ua=S,Oo=_;break;case 0:case 11:case 14:case 15:x1(2,b,p),as||x1(4,b,p),Wl(u,p,b);break;case 1:as||(pl(b,p),S=b.stateNode,typeof S.componentWillUnmount=="function"&&ev(b,p,S)),Wl(u,p,b);break;case 21:Wl(u,p,b);break;case 22:as=(S=as)||b.memoizedState!==null,Wl(u,p,b),as=S;break;default:Wl(u,p,b)}}function Gf(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{fh(u)}catch(b){kr(p,p.return,b)}}}function nv(u,p){if(p.memoizedState===null&&(u=p.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{fh(u)}catch(b){kr(p,p.return,b)}}function iv(u){switch(u.tag){case 31:case 13:case 19:var p=u.stateNode;return p===null&&(p=u.stateNode=new b0),p;case 22:return u=u.stateNode,p=u._retryCache,p===null&&(p=u._retryCache=new b0),p;default:throw Error(s(435,u.tag))}}function vc(u,p){var b=iv(u);p.forEach(function(S){if(!b.has(S)){b.add(S);var _=sb.bind(null,u,S);S.then(_,_)}})}function Do(u,p){var b=p.deletions;if(b!==null)for(var S=0;S<b.length;S++){var _=b[S],M=u,G=p,re=G;e:for(;re!==null;){switch(re.tag){case 27:if(Y1(re.type)){ua=re.stateNode,Oo=!1;break e}break;case 5:ua=re.stateNode,Oo=!1;break e;case 3:case 4:ua=re.stateNode.containerInfo,Oo=!0;break e}re=re.return}if(ua===null)throw Error(s(160));A0(M,G,_),ua=null,Oo=!1,M=_.alternate,M!==null&&(M.return=null),_.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)S0(p,u),p=p.sibling}var Rl=null;function S0(u,p){var b=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Do(p,u),jo(u),S&4&&(x1(3,u,u.return),ru(3,u),x1(5,u,u.return));break;case 1:Do(p,u),jo(u),S&512&&(as||b===null||pl(b,b.return)),S&64&&Ml&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(b=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=b===null?S:b.concat(S))));break;case 26:var _=Rl;if(Do(p,u),jo(u),S&512&&(as||b===null||pl(b,b.return)),S&4){var M=b!==null?b.memoizedState:null;if(S=u.memoizedState,b===null)if(S===null)if(u.stateNode===null){e:{S=u.type,b=u.memoizedProps,_=_.ownerDocument||_;t:switch(S){case"title":M=_.getElementsByTagName("title")[0],(!M||M[Et]||M[$e]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=_.createElement(S),_.head.insertBefore(M,_.querySelector("head > title"))),Es(M,S,b),M[$e]=u,Vt(M),S=M;break e;case"link":var G=aA("link","href",_).get(S+(b.href||""));if(G){for(var re=0;re<G.length;re++)if(M=G[re],M.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&M.getAttribute("rel")===(b.rel==null?null:b.rel)&&M.getAttribute("title")===(b.title==null?null:b.title)&&M.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){G.splice(re,1);break t}}M=_.createElement(S),Es(M,S,b),_.head.appendChild(M);break;case"meta":if(G=aA("meta","content",_).get(S+(b.content||""))){for(re=0;re<G.length;re++)if(M=G[re],M.getAttribute("content")===(b.content==null?null:""+b.content)&&M.getAttribute("name")===(b.name==null?null:b.name)&&M.getAttribute("property")===(b.property==null?null:b.property)&&M.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&M.getAttribute("charset")===(b.charSet==null?null:b.charSet)){G.splice(re,1);break t}}M=_.createElement(S),Es(M,S,b),_.head.appendChild(M);break;default:throw Error(s(468,S))}M[$e]=u,Vt(M),S=M}u.stateNode=S}else sA(_,u.type,u.stateNode);else u.stateNode=rA(_,S,u.memoizedProps);else M!==S?(M===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):M.count--,S===null?sA(_,u.type,u.stateNode):rA(_,S,u.memoizedProps)):S===null&&u.stateNode!==null&&Hf(u,u.memoizedProps,b.memoizedProps)}break;case 27:Do(p,u),jo(u),S&512&&(as||b===null||pl(b,b.return)),b!==null&&S&4&&Hf(u,u.memoizedProps,b.memoizedProps);break;case 5:if(Do(p,u),jo(u),S&512&&(as||b===null||pl(b,b.return)),u.flags&32){_=u.stateNode;try{Bi(_,"")}catch(pn){kr(u,u.return,pn)}}S&4&&u.stateNode!=null&&(_=u.memoizedProps,Hf(u,_,b!==null?b.memoizedProps:_)),S&1024&&(qf=!0);break;case 6:if(Do(p,u),jo(u),S&4){if(u.stateNode===null)throw Error(s(162));S=u.memoizedProps,b=u.stateNode;try{b.nodeValue=S}catch(pn){kr(u,u.return,pn)}}break;case 3:if(jv=null,_=Rl,Rl=lh(p.containerInfo),Do(p,u),Rl=_,jo(u),S&4&&b!==null&&b.memoizedState.isDehydrated)try{fh(p.containerInfo)}catch(pn){kr(u,u.return,pn)}qf&&(qf=!1,rv(u));break;case 4:S=Rl,Rl=lh(u.stateNode.containerInfo),Do(p,u),jo(u),Rl=S;break;case 12:Do(p,u),jo(u);break;case 31:Do(p,u),jo(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,vc(u,S)));break;case 13:Do(p,u),jo(u),u.child.flags&8192&&u.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Zo=jt()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,vc(u,S)));break;case 22:_=u.memoizedState!==null;var Ae=b!==null&&b.memoizedState!==null,Le=Ml,nt=as;if(Ml=Le||_,as=nt||Ae,Do(p,u),as=nt,Ml=Le,jo(u),S&8192)e:for(p=u.stateNode,p._visibility=_?p._visibility&-2:p._visibility|1,_&&(b===null||Ae||Ml||as||Ol(u)),b=null,p=u;;){if(p.tag===5||p.tag===26){if(b===null){Ae=b=p;try{if(M=Ae.stateNode,_)G=M.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{re=Ae.stateNode;var ut=Ae.memoizedProps.style,He=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;re.style.display=He==null||typeof He=="boolean"?"":(""+He).trim()}}catch(pn){kr(Ae,Ae.return,pn)}}}else if(p.tag===6){if(b===null){Ae=p;try{Ae.stateNode.nodeValue=_?"":Ae.memoizedProps}catch(pn){kr(Ae,Ae.return,pn)}}}else if(p.tag===18){if(b===null){Ae=p;try{var We=Ae.stateNode;_?ip(We,!0):ip(Ae.stateNode,!1)}catch(pn){kr(Ae,Ae.return,pn)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===u)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break e;for(;p.sibling===null;){if(p.return===null||p.return===u)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}S&4&&(S=u.updateQueue,S!==null&&(b=S.retryQueue,b!==null&&(S.retryQueue=null,vc(u,b))));break;case 19:Do(p,u),jo(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,vc(u,S)));break;case 30:break;case 21:break;default:Do(p,u),jo(u)}}function jo(u){var p=u.flags;if(p&2){try{for(var b,S=u.return;S!==null;){if(g0(S)){b=S;break}S=S.return}if(b==null)throw Error(s(160));switch(b.tag){case 27:var _=b.stateNode,M=au(u);su(u,M,_);break;case 5:var G=b.stateNode;b.flags&32&&(Bi(G,""),b.flags&=-33);var re=au(u);su(u,re,G);break;case 3:case 4:var Ae=b.stateNode.containerInfo,Le=au(u);v0(u,Le,Ae);break;default:throw Error(s(161))}}catch(nt){kr(u,u.return,nt)}u.flags&=-3}p&4096&&(u.flags&=-4097)}function rv(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var p=u;rv(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),u=u.sibling}}function Xl(u,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)y0(u,p.alternate,p),p=p.sibling}function Ol(u){for(u=u.child;u!==null;){var p=u;switch(p.tag){case 0:case 11:case 14:case 15:x1(4,p,p.return),Ol(p);break;case 1:pl(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&ev(p,p.return,b),Ol(p);break;case 27:ad(p.stateNode);case 26:case 5:pl(p,p.return),Ol(p);break;case 22:p.memoizedState===null&&Ol(p);break;case 30:Ol(p);break;default:Ol(p)}u=u.sibling}}function ml(u,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var S=p.alternate,_=u,M=p,G=M.flags;switch(M.tag){case 0:case 11:case 15:ml(_,M,b),ru(4,M);break;case 1:if(ml(_,M,b),S=M,_=S.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Le){kr(S,S.return,Le)}if(S=M,_=S.updateQueue,_!==null){var re=S.stateNode;try{var Ae=_.shared.hiddenCallbacks;if(Ae!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Ae.length;_++)lg(Ae[_],re)}catch(Le){kr(S,S.return,Le)}}b&&G&64&&zf(M),Wc(M,M.return);break;case 27:x0(M);case 26:case 5:ml(_,M,b),b&&S===null&&G&4&&tv(M),Wc(M,M.return);break;case 12:ml(_,M,b);break;case 31:ml(_,M,b),b&&G&4&&Gf(_,M);break;case 13:ml(_,M,b),b&&G&4&&nv(_,M);break;case 22:M.memoizedState===null&&ml(_,M,b),Wc(M,M.return);break;case 30:break;default:ml(_,M,b)}p=p.sibling}}function k0(u,p){var b=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),u=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(u=p.memoizedState.cachePool.pool),u!==b&&(u!=null&&u.refCount++,b!=null&&uc(b))}function C0(u,p){u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&uc(u))}function Bo(u,p,b,S){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Vf(u,p,b,S),p=p.sibling}function Vf(u,p,b,S){var _=p.flags;switch(p.tag){case 0:case 11:case 15:Bo(u,p,b,S),_&2048&&ru(9,p);break;case 1:Bo(u,p,b,S);break;case 3:Bo(u,p,b,S),_&2048&&(u=null,p.alternate!==null&&(u=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==u&&(p.refCount++,u!=null&&uc(u)));break;case 12:if(_&2048){Bo(u,p,b,S),u=p.stateNode;try{var M=p.memoizedProps,G=M.id,re=M.onPostCommit;typeof re=="function"&&re(G,p.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Ae){kr(p,p.return,Ae)}}else Bo(u,p,b,S);break;case 31:Bo(u,p,b,S);break;case 13:Bo(u,p,b,S);break;case 23:break;case 22:M=p.stateNode,G=p.alternate,p.memoizedState!==null?M._visibility&2?Bo(u,p,b,S):Kc(u,p):M._visibility&2?Bo(u,p,b,S):(M._visibility|=2,Xc(u,p,b,S,(p.subtreeFlags&10256)!==0||!1)),_&2048&&k0(G,p);break;case 24:Bo(u,p,b,S),_&2048&&C0(p.alternate,p);break;default:Bo(u,p,b,S)}}function Xc(u,p,b,S,_){for(_=_&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var M=u,G=p,re=b,Ae=S,Le=G.flags;switch(G.tag){case 0:case 11:case 15:Xc(M,G,re,Ae,_),ru(8,G);break;case 23:break;case 22:var nt=G.stateNode;G.memoizedState!==null?nt._visibility&2?Xc(M,G,re,Ae,_):Kc(M,G):(nt._visibility|=2,Xc(M,G,re,Ae,_)),_&&Le&2048&&k0(G.alternate,G);break;case 24:Xc(M,G,re,Ae,_),_&&Le&2048&&C0(G.alternate,G);break;default:Xc(M,G,re,Ae,_)}p=p.sibling}}function Kc(u,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=u,S=p,_=S.flags;switch(S.tag){case 22:Kc(b,S),_&2048&&k0(S.alternate,S);break;case 24:Kc(b,S),_&2048&&C0(S.alternate,S);break;default:Kc(b,S)}p=p.sibling}}var ou=8192;function Jc(u,p,b){if(u.subtreeFlags&ou)for(u=u.child;u!==null;)E0(u,p,b),u=u.sibling}function E0(u,p,b){switch(u.tag){case 26:Jc(u,p,b),u.flags&ou&&u.memoizedState!==null&&gC(b,Rl,u.memoizedState,u.memoizedProps);break;case 5:Jc(u,p,b);break;case 3:case 4:var S=Rl;Rl=lh(u.stateNode.containerInfo),Jc(u,p,b),Rl=S;break;case 22:u.memoizedState===null&&(S=u.alternate,S!==null&&S.memoizedState!==null?(S=ou,ou=16777216,Jc(u,p,b),ou=S):Jc(u,p,b));break;default:Jc(u,p,b)}}function av(u){var p=u.alternate;if(p!==null&&(u=p.child,u!==null)){p.child=null;do p=u.sibling,u.sibling=null,u=p;while(u!==null)}}function lu(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var S=p[b];ss=S,ii(S,u)}av(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)yt(u),u=u.sibling}function yt(u){switch(u.tag){case 0:case 11:case 15:lu(u),u.flags&2048&&x1(9,u,u.return);break;case 3:lu(u);break;case 12:lu(u);break;case 22:var p=u.stateNode;u.memoizedState!==null&&p._visibility&2&&(u.return===null||u.return.tag!==13)?(p._visibility&=-3,Xt(u)):lu(u);break;default:lu(u)}}function Xt(u){var p=u.deletions;if((u.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var S=p[b];ss=S,ii(S,u)}av(u)}for(u=u.child;u!==null;){switch(p=u,p.tag){case 0:case 11:case 15:x1(8,p,p.return),Xt(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,Xt(p));break;default:Xt(p)}u=u.sibling}}function ii(u,p){for(;ss!==null;){var b=ss;switch(b.tag){case 0:case 11:case 15:x1(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var S=b.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:uc(b.memoizedState.cache)}if(S=b.child,S!==null)S.return=b,ss=S;else e:for(b=u;ss!==null;){S=ss;var _=S.sibling,M=S.return;if(w0(S),S===b){ss=null;break e}if(_!==null){_.return=M,ss=_;break e}ss=M}}}var ri={getCacheForType:function(u){var p=hs(Ra),b=p.data.get(u);return b===void 0&&(b=u(),p.data.set(u,b)),b},cacheSignal:function(){return hs(Ra).controller.signal}},yi=typeof WeakMap=="function"?WeakMap:Map,hn=0,Sn=null,wn=null,gn=0,Bn=0,tr=null,Kr=!1,ba=!1,po=!1,Ps=0,ur=0,Zs=0,eo=0,gl=0,La=0,mo=0,b1=null,ps=null,Jo=!1,Zo=0,G1=0,cu=1/0,du=null,y1=null,os=0,w1=null,Zc=null,Kl=0,Yf=0,_0=null,I0=null,ed=0,N0=null;function go(){return(hn&2)!==0&&gn!==0?gn&-gn:K.T!==null?nh():Ze()}function T0(){if(La===0)if((gn&536870912)===0||bi){var u=_e;_e<<=1,(_e&3932160)===0&&(_e=262144),La=u}else La=536870912;return u=Xo.current,u!==null&&(u.flags|=32),La}function Po(u,p,b){(u===Sn&&(Bn===2||Bn===9)||u.cancelPendingCommit!==null)&&(xc(u,0),V1(u,gn,La,!1)),Ne(u,b),((hn&2)===0||u!==Sn)&&(u===Sn&&((hn&2)===0&&(eo|=b),ur===4&&V1(u,gn,La,!1)),Jl(u))}function M0(u,p,b){if((hn&6)!==0)throw Error(s(327));var S=!b&&(p&127)===0&&(p&u.expiredLanes)===0||ke(u,p),_=S?ab(u,p):j0(u,p,!0),M=S;do{if(_===0){ba&&!S&&V1(u,p,0,!1);break}else{if(b=u.current.alternate,M&&!sv(b)){_=j0(u,p,!1),M=!1;continue}if(_===2){if(M=p,u.errorRecoveryDisabledLanes&M)var G=0;else G=u.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){p=G;e:{var re=u;_=b1;var Ae=re.current.memoizedState.isDehydrated;if(Ae&&(xc(re,G).flags|=256),G=j0(re,G,!1),G!==2){if(po&&!Ae){re.errorRecoveryDisabledLanes|=M,eo|=M,_=4;break e}M=ps,ps=_,M!==null&&(ps===null?ps=M:ps.push.apply(ps,M))}_=G}if(M=!1,_!==2)continue}}if(_===1){xc(u,0),V1(u,p,0,!0);break}e:{switch(S=u,M=_,M){case 0:case 1:throw Error(s(345));case 4:if((p&4194048)!==p)break;case 6:V1(S,p,La,!Kr);break e;case 2:ps=null;break;case 3:case 5:break;default:throw Error(s(329))}if((p&62914560)===p&&(_=Zo+300-jt(),10<_)){if(V1(S,p,La,!Kr),de(S,0,!0)!==0)break e;Kl=p,S.timeoutHandle=ep(R0.bind(null,S,b,ps,du,Jo,p,La,eo,mo,Kr,M,"Throttled",-0,0),_);break e}R0(S,b,ps,du,Jo,p,La,eo,mo,Kr,M,null,-0,0)}}break}while(!0);Jl(u)}function R0(u,p,b,S,_,M,G,re,Ae,Le,nt,ut,He,We){if(u.timeoutHandle=-1,ut=p.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},E0(p,M,ut);var pn=(M&62914560)===M?Zo-jt():(M&4194048)===M?G1-jt():0;if(pn=vC(ut,pn),pn!==null){Kl=M,u.cancelPendingCommit=pn(uv.bind(null,u,p,M,b,S,_,G,re,Ae,nt,ut,null,He,We)),V1(u,M,G,!Le);return}}uv(u,p,M,b,S,_,G,re,Ae)}function sv(u){for(var p=u;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var S=0;S<b.length;S++){var _=b[S],M=_.getSnapshot;_=_.value;try{if(!Oi(M(),_))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function V1(u,p,b,S){p&=~gl,p&=~eo,u.suspendedLanes|=p,u.pingedLanes&=~p,S&&(u.warmLanes|=p),S=u.expirationTimes;for(var _=p;0<_;){var M=31-Y(_),G=1<<M;S[M]=-1,_&=~G}b!==0&&Se(u,b,p)}function uu(){return(hn&6)===0?(pu(0),!1):!0}function Qf(){if(wn!==null){if(Bn===0)var u=wn.return;else u=wn,uo=ul=null,U2(u),zc=null,Hd=0,u=wn;for(;u!==null;)Lf(u.alternate,u),u=u.return;wn=null}}function xc(u,p){var b=u.timeoutHandle;b!==-1&&(u.timeoutHandle=-1,Nv(b)),b=u.cancelPendingCommit,b!==null&&(u.cancelPendingCommit=null,b()),Kl=0,Qf(),Sn=u,wn=b=Wr(u.current,null),gn=p,Bn=0,tr=null,Kr=!1,ba=ke(u,p),po=!1,mo=La=gl=eo=Zs=ur=0,ps=b1=null,Jo=!1,(p&8)!==0&&(p|=p&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=p;0<S;){var _=31-Y(S),M=1<<_;p|=u[_],S&=~M}return Ps=p,xn(),b}function O0(u,p){di=null,K.H=Xd,p===Lc||p===pf?(p=rg(),Bn=3):p===E2?(p=rg(),Bn=4):Bn=p===d0?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,tr=p,wn===null&&(ur=1,Mf(u,Wa(p,u.current)))}function D0(){var u=Xo.current;return u===null?!0:(gn&4194048)===gn?hl===null:(gn&62914560)===gn||(gn&536870912)!==0?u===hl:!1}function ov(){var u=K.H;return K.H=Xd,u===null?Xd:u}function $f(){var u=K.A;return K.A=ri,u}function Wf(){ur=4,Kr||(gn&4194048)!==gn&&Xo.current!==null||(ba=!0),(Zs&134217727)===0&&(eo&134217727)===0||Sn===null||V1(Sn,gn,La,!1)}function j0(u,p,b){var S=hn;hn|=2;var _=ov(),M=$f();(Sn!==u||gn!==p)&&(du=null,xc(u,p)),p=!1;var G=ur;e:do try{if(Bn!==0&&wn!==null){var re=wn,Ae=tr;switch(Bn){case 8:Qf(),G=6;break e;case 3:case 2:case 9:case 6:Xo.current===null&&(p=!0);var Le=Bn;if(Bn=0,tr=null,td(u,re,Ae,Le),b&&ba){G=0;break e}break;default:Le=Bn,Bn=0,tr=null,td(u,re,Ae,Le)}}lv(),G=ur;break}catch(nt){O0(u,nt)}while(!0);return p&&u.shellSuspendCounter++,uo=ul=null,hn=S,K.H=_,K.A=M,wn===null&&(Sn=null,gn=0,xn()),G}function lv(){for(;wn!==null;)B0(wn)}function ab(u,p){var b=hn;hn|=2;var S=ov(),_=$f();Sn!==u||gn!==p?(du=null,cu=jt()+500,xc(u,p)):ba=ke(u,p);e:do try{if(Bn!==0&&wn!==null){p=wn;var M=tr;t:switch(Bn){case 1:Bn=0,tr=null,td(u,p,M,1);break;case 2:case 9:if(_2(M)){Bn=0,tr=null,dv(p);break}p=function(){Bn!==2&&Bn!==9||Sn!==u||(Bn=7),Jl(u)},M.then(p,p);break e;case 3:Bn=7;break e;case 4:Bn=5;break e;case 7:_2(M)?(Bn=0,tr=null,dv(p)):(Bn=0,tr=null,td(u,p,M,7));break;case 5:var G=null;switch(wn.tag){case 26:G=wn.memoizedState;case 5:case 27:var re=wn;if(G?oA(G):re.stateNode.complete){Bn=0,tr=null;var Ae=re.sibling;if(Ae!==null)wn=Ae;else{var Le=re.return;Le!==null?(wn=Le,fu(Le)):wn=null}break t}}Bn=0,tr=null,td(u,p,M,5);break;case 6:Bn=0,tr=null,td(u,p,M,6);break;case 8:Qf(),ur=6;break e;default:throw Error(s(462))}}cv();break}catch(nt){O0(u,nt)}while(!0);return uo=ul=null,K.H=S,K.A=_,hn=b,wn!==null?0:(Sn=null,gn=0,xn(),ur)}function cv(){for(;wn!==null&&!Ct();)B0(wn)}function B0(u){var p=m0(u.alternate,u,Ps);u.memoizedProps=u.pendingProps,p===null?fu(u):wn=p}function dv(u){var p=u,b=p.alternate;switch(p.tag){case 15:case 0:p=Zd(b,p,p.pendingProps,p.type,void 0,gn);break;case 11:p=Zd(b,p,p.pendingProps,p.type.render,p.ref,gn);break;case 5:U2(p);default:Lf(b,p),p=wn=fs(p,Ps),p=m0(b,p,Ps)}u.memoizedProps=u.pendingProps,p===null?fu(u):wn=p}function td(u,p,b,S){uo=ul=null,U2(p),zc=null,Hd=0;var _=p.return;try{if(Rf(u,_,p,b,gn)){ur=1,Mf(u,Wa(b,u.current)),wn=null;return}}catch(M){if(_!==null)throw wn=_,M;ur=1,Mf(u,Wa(b,u.current)),wn=null;return}p.flags&32768?(bi||S===1?u=!0:ba||(gn&536870912)!==0?u=!1:(Kr=u=!0,(S===2||S===9||S===3||S===6)&&(S=Xo.current,S!==null&&S.tag===13&&(S.flags|=16384))),P0(p,u)):fu(p)}function fu(u){var p=u;do{if((p.flags&32768)!==0){P0(p,Kr);return}u=p.return;var b=ib(p.alternate,p,Ps);if(b!==null){wn=b;return}if(p=p.sibling,p!==null){wn=p;return}wn=p=u}while(p!==null);ur===0&&(ur=5)}function P0(u,p){do{var b=Zg(u.alternate,u);if(b!==null){b.flags&=32767,wn=b;return}if(b=u.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(u=u.sibling,u!==null)){wn=u;return}wn=u=b}while(u!==null);ur=6,wn=null}function uv(u,p,b,S,_,M,G,re,Ae){u.cancelPendingCommit=null;do hu();while(os!==0);if((hn&6)!==0)throw Error(s(327));if(p!==null){if(p===u.current)throw Error(s(177));if(M=p.lanes|p.childLanes,M|=It,je(u,b,M,G,re,Ae),u===Sn&&(wn=Sn=null,gn=0),Zc=p,w1=u,Kl=b,Yf=M,_0=_,I0=S,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,H0(Jt,function(){return L0(),null})):(u.callbackNode=null,u.callbackPriority=0),S=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||S){S=K.T,K.T=null,_=ie.p,ie.p=2,G=hn,hn|=4;try{rb(u,p,b)}finally{hn=G,ie.p=_,K.T=S}}os=1,Xf(),F0(),fv()}}function Xf(){if(os===1){os=0;var u=w1,p=Zc,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=K.T,K.T=null;var S=ie.p;ie.p=2;var _=hn;hn|=4;try{S0(p,u);var M=sh,G=Xs(u.containerInfo),re=M.focusedElem,Ae=M.selectionRange;if(G!==re&&re&&re.ownerDocument&&Ts(re.ownerDocument.documentElement,re)){if(Ae!==null&&Ms(re)){var Le=Ae.start,nt=Ae.end;if(nt===void 0&&(nt=Le),"selectionStart"in re)re.selectionStart=Le,re.selectionEnd=Math.min(nt,re.value.length);else{var ut=re.ownerDocument||document,He=ut&&ut.defaultView||window;if(He.getSelection){var We=He.getSelection(),pn=re.textContent.length,Qn=Math.min(Ae.start,pn),fa=Ae.end===void 0?Qn:Math.min(Ae.end,pn);!We.extend&&Qn>fa&&(G=fa,fa=Qn,Qn=G);var Re=bs(re,Qn),Ce=bs(re,fa);if(Re&&Ce&&(We.rangeCount!==1||We.anchorNode!==Re.node||We.anchorOffset!==Re.offset||We.focusNode!==Ce.node||We.focusOffset!==Ce.offset)){var Ue=ut.createRange();Ue.setStart(Re.node,Re.offset),We.removeAllRanges(),Qn>fa?(We.addRange(Ue),We.extend(Ce.node,Ce.offset)):(Ue.setEnd(Ce.node,Ce.offset),We.addRange(Ue))}}}}for(ut=[],We=re;We=We.parentNode;)We.nodeType===1&&ut.push({element:We,left:We.scrollLeft,top:We.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<ut.length;re++){var ot=ut[re];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}Uv=!!ah,sh=ah=null}finally{hn=_,ie.p=S,K.T=b}}u.current=p,os=2}}function F0(){if(os===2){os=0;var u=w1,p=Zc,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=K.T,K.T=null;var S=ie.p;ie.p=2;var _=hn;hn|=4;try{y0(u,p.alternate,p)}finally{hn=_,ie.p=S,K.T=b}}os=3}}function fv(){if(os===4||os===3){os=0,Yt();var u=w1,p=Zc,b=Kl,S=I0;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?os=5:(os=0,Zc=w1=null,U0(u,u.pendingLanes));var _=u.pendingLanes;if(_===0&&(y1=null),at(b),p=p.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(dn,p,void 0,(p.current.flags&128)===128)}catch{}if(S!==null){p=K.T,_=ie.p,ie.p=2,K.T=null;try{for(var M=u.onRecoverableError,G=0;G<S.length;G++){var re=S[G];M(re.value,{componentStack:re.stack})}}finally{K.T=p,ie.p=_}}(Kl&3)!==0&&hu(),Jl(u),_=u.pendingLanes,(b&261930)!==0&&(_&42)!==0?u===N0?ed++:(ed=0,N0=u):ed=0,pu(0)}}function U0(u,p){(u.pooledCacheLanes&=p)===0&&(p=u.pooledCache,p!=null&&(u.pooledCache=null,uc(p)))}function hu(){return Xf(),F0(),fv(),L0()}function L0(){if(os!==5)return!1;var u=w1,p=Yf;Yf=0;var b=at(Kl),S=K.T,_=ie.p;try{ie.p=32>b?32:b,K.T=null,b=_0,_0=null;var M=w1,G=Kl;if(os=0,Zc=w1=null,Kl=0,(hn&6)!==0)throw Error(s(331));var re=hn;if(hn|=4,yt(M.current),Vf(M,M.current,G,b),hn=re,pu(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(dn,M)}catch{}return!0}finally{ie.p=_,K.T=S,U0(u,p)}}function hv(u,p,b){p=Wa(b,p),p=o0(u.stateNode,p,2),u=L1(u,p,2),u!==null&&(Ne(u,2),Jl(u))}function kr(u,p,b){if(u.tag===3)hv(u,u,b);else for(;p!==null;){if(p.tag===3){hv(p,u,b);break}else if(p.tag===1){var S=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(y1===null||!y1.has(S))){u=Wa(b,u),b=l0(2),S=L1(p,b,2),S!==null&&(c0(b,S,p,u),Ne(S,2),Jl(S));break}}p=p.return}}function Kf(u,p,b){var S=u.pingCache;if(S===null){S=u.pingCache=new yi;var _=new Set;S.set(p,_)}else _=S.get(p),_===void 0&&(_=new Set,S.set(p,_));_.has(b)||(po=!0,_.add(b),u=pv.bind(null,u,p,b),p.then(u,u))}function pv(u,p,b){var S=u.pingCache;S!==null&&S.delete(p),u.pingedLanes|=u.suspendedLanes&b,u.warmLanes&=~b,Sn===u&&(gn&b)===b&&(ur===4||ur===3&&(gn&62914560)===gn&&300>jt()-Zo?(hn&2)===0&&xc(u,0):gl|=b,mo===gn&&(mo=0)),Jl(u)}function z0(u,p){p===0&&(p=De()),u=tn(u,p),u!==null&&(Ne(u,p),Jl(u))}function mv(u){var p=u.memoizedState,b=0;p!==null&&(b=p.retryLane),z0(u,b)}function sb(u,p){var b=0;switch(u.tag){case 31:case 13:var S=u.stateNode,_=u.memoizedState;_!==null&&(b=_.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(p),z0(u,b)}function H0(u,p){return Wt(u,p)}var Jf=null,nd=null,Zf=!1,eh=!1,th=!1,A1=0;function Jl(u){u!==nd&&u.next===null&&(nd===null?Jf=nd=u:nd=nd.next=u),eh=!0,Zf||(Zf=!0,bv())}function pu(u,p){if(!th&&eh){th=!0;do for(var b=!1,S=Jf;S!==null;){if(u!==0){var _=S.pendingLanes;if(_===0)var M=0;else{var G=S.suspendedLanes,re=S.pingedLanes;M=(1<<31-Y(42|u)+1)-1,M&=_&~(G&~re),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(b=!0,xv(S,M))}else M=gn,M=de(S,S===Sn?M:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(M&3)===0||ke(S,M)||(b=!0,xv(S,M));S=S.next}while(b);th=!1}}function gv(){q0()}function q0(){eh=Zf=!1;var u=0;A1!==0&&fb()&&(u=A1);for(var p=jt(),b=null,S=Jf;S!==null;){var _=S.next,M=vv(S,p);M===0?(S.next=null,b===null?Jf=_:b.next=_,_===null&&(nd=b)):(b=S,(u!==0||(M&3)!==0)&&(eh=!0)),S=_}os!==0&&os!==5||pu(u),A1!==0&&(A1=0)}function vv(u,p){for(var b=u.suspendedLanes,S=u.pingedLanes,_=u.expirationTimes,M=u.pendingLanes&-62914561;0<M;){var G=31-Y(M),re=1<<G,Ae=_[G];Ae===-1?((re&b)===0||(re&S)!==0)&&(_[G]=Ee(re,p)):Ae<=p&&(u.expiredLanes|=re),M&=~re}if(p=Sn,b=gn,b=de(u,u===p?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S=u.callbackNode,b===0||u===p&&(Bn===2||Bn===9)||u.cancelPendingCommit!==null)return S!==null&&S!==null&&zt(S),u.callbackNode=null,u.callbackPriority=0;if((b&3)===0||ke(u,b)){if(p=b&-b,p===u.callbackPriority)return p;switch(S!==null&&zt(S),at(b)){case 2:case 8:b=Kt;break;case 32:b=Jt;break;case 268435456:b=Qt;break;default:b=Jt}return S=G0.bind(null,u),b=Wt(b,S),u.callbackPriority=p,u.callbackNode=b,p}return S!==null&&S!==null&&zt(S),u.callbackPriority=2,u.callbackNode=null,2}function G0(u,p){if(os!==0&&os!==5)return u.callbackNode=null,u.callbackPriority=0,null;var b=u.callbackNode;if(hu()&&u.callbackNode!==b)return null;var S=gn;return S=de(u,u===Sn?S:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S===0?null:(M0(u,S,p),vv(u,jt()),u.callbackNode!=null&&u.callbackNode===b?G0.bind(null,u):null)}function xv(u,p){if(hu())return null;M0(u,p,!0)}function bv(){tp(function(){(hn&6)!==0?Wt(rn,gv):q0()})}function nh(){if(A1===0){var u=Vl;u===0&&(u=ve,ve<<=1,(ve&261888)===0&&(ve=256)),A1=u}return A1}function yv(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:sr(""+u)}function wv(u,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,u.id&&b.setAttribute("form",u.id),p.parentNode.insertBefore(b,p),u=new FormData(u),b.parentNode.removeChild(b),u}function ob(u,p,b,S,_){if(p==="submit"&&b&&b.stateNode===_){var M=yv((_[Me]||null).action),G=S.submitter;G&&(p=(p=G[Me]||null)?yv(p.formAction):G.getAttribute("formAction"),p!==null&&(M=p,G=null));var re=new ds("action","action",null,S,_);u.push({event:re,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(A1!==0){var Ae=G?wv(_,G):new FormData(_);Z2(b,{pending:!0,data:Ae,method:_.method,action:M},null,Ae)}}else typeof M=="function"&&(re.preventDefault(),Ae=G?wv(_,G):new FormData(_),Z2(b,{pending:!0,data:Ae,method:_.method,action:M},M,Ae))},currentTarget:_}]})}}for(var mu=0;mu<qo.length;mu++){var V0=qo[mu],lb=V0.toLowerCase(),Av=V0[0].toUpperCase()+V0.slice(1);xa(lb,"on"+Av)}xa(si,"onAnimationEnd"),xa(dr,"onAnimationIteration"),xa(ca,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(va,"onTransitionRun"),xa(Fa,"onTransitionStart"),xa(ws,"onTransitionCancel"),xa(As,"onTransitionEnd"),Dn("onMouseEnter",["mouseout","mouseover"]),Dn("onMouseLeave",["mouseout","mouseover"]),Dn("onPointerEnter",["pointerout","pointerover"]),Dn("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(id));function Sv(u,p){p=(p&4)!==0;for(var b=0;b<u.length;b++){var S=u[b],_=S.event;S=S.listeners;e:{var M=void 0;if(p)for(var G=S.length-1;0<=G;G--){var re=S[G],Ae=re.instance,Le=re.currentTarget;if(re=re.listener,Ae!==M&&_.isPropagationStopped())break e;M=re,_.currentTarget=Le;try{M(_)}catch(nt){_o(nt)}_.currentTarget=null,M=Ae}else for(G=0;G<S.length;G++){if(re=S[G],Ae=re.instance,Le=re.currentTarget,re=re.listener,Ae!==M&&_.isPropagationStopped())break e;M=re,_.currentTarget=Le;try{M(_)}catch(nt){_o(nt)}_.currentTarget=null,M=Ae}}}}function Di(u,p){var b=p[st];b===void 0&&(b=p[st]=new Set);var S=u+"__bubble";b.has(S)||($0(p,u,2,!1),b.add(S))}function ih(u,p,b){var S=0;p&&(S|=4),$0(b,u,S,p)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Q0(u){if(!u[gu]){u[gu]=!0,fn.forEach(function(b){b!=="selectionchange"&&(Y0.has(b)||ih(b,!1,u),ih(b,!0,u))});var p=u.nodeType===9?u:u.ownerDocument;p===null||p[gu]||(p[gu]=!0,ih("selectionchange",!1,p))}}function $0(u,p,b,S){switch(pA(p)){case 2:var _=yC;break;case 8:_=wC;break;default:_=xb}b=_.bind(null,p,b,u),_=void 0,!Tr||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(_=!0),S?_!==void 0?u.addEventListener(p,b,{capture:!0,passive:_}):u.addEventListener(p,b,!0):_!==void 0?u.addEventListener(p,b,{passive:_}):u.addEventListener(p,b,!1)}function W0(u,p,b,S,_){var M=S;if((p&1)===0&&(p&2)===0&&S!==null)e:for(;;){if(S===null)return;var G=S.tag;if(G===3||G===4){var re=S.stateNode.containerInfo;if(re===_)break;if(G===4)for(G=S.return;G!==null;){var Ae=G.tag;if((Ae===3||Ae===4)&&G.stateNode.containerInfo===_)return;G=G.return}for(;re!==null;){if(G=wt(re),G===null)return;if(Ae=G.tag,Ae===5||Ae===6||Ae===26||Ae===27){S=M=G;continue e}re=re.parentNode}}S=S.return}Ba(function(){var Le=M,nt=Lr(b),ut=[];e:{var He=ll.get(u);if(He!==void 0){var We=ds,pn=u;switch(u){case"keypress":if(Gr(b)===0)break e;case"keydown":case"keyup":We=vs;break;case"focusin":pn="focus",We=Ci;break;case"focusout":pn="blur",We=Ci;break;case"beforeblur":case"afterblur":We=Ci;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=Hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=ta;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=qi;break;case si:case dr:case ca:We=Na;break;case As:We=ia;break;case"scroll":case"scrollend":We=us;break;case"wheel":We=ma;break;case"copy":case"cut":case"paste":We=$s;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=lo;break;case"toggle":case"beforetoggle":We=Ns}var Qn=(p&4)!==0,fa=!Qn&&(u==="scroll"||u==="scrollend"),Re=Qn?He!==null?He+"Capture":null:He;Qn=[];for(var Ce=Le,Ue;Ce!==null;){var ot=Ce;if(Ue=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||Ue===null||Re===null||(ot=yr(Ce,Re),ot!=null&&Qn.push(rd(Ce,ot,Ue))),fa)break;Ce=Ce.return}0<Qn.length&&(He=new We(He,pn,null,b,nt),ut.push({event:He,listeners:Qn}))}}if((p&7)===0){e:{if(He=u==="mouseover"||u==="pointerover",We=u==="mouseout"||u==="pointerout",He&&b!==hr&&(pn=b.relatedTarget||b.fromElement)&&(wt(pn)||pn[it]))break e;if((We||He)&&(He=nt.window===nt?nt:(He=nt.ownerDocument)?He.defaultView||He.parentWindow:window,We?(pn=b.relatedTarget||b.toElement,We=Le,pn=pn?wt(pn):null,pn!==null&&(fa=c(pn),Qn=pn.tag,pn!==fa||Qn!==5&&Qn!==27&&Qn!==6)&&(pn=null)):(We=null,pn=Le),We!==pn)){if(Qn=Hi,ot="onMouseLeave",Re="onMouseEnter",Ce="mouse",(u==="pointerout"||u==="pointerover")&&(Qn=lo,ot="onPointerLeave",Re="onPointerEnter",Ce="pointer"),fa=We==null?He:gt(We),Ue=pn==null?He:gt(pn),He=new Qn(ot,Ce+"leave",We,b,nt),He.target=fa,He.relatedTarget=Ue,ot=null,wt(nt)===Le&&(Qn=new Qn(Re,Ce+"enter",pn,b,nt),Qn.target=Ue,Qn.relatedTarget=fa,ot=Qn),fa=ot,We&&pn)t:{for(Qn=cb,Re=We,Ce=pn,Ue=0,ot=Re;ot;ot=Qn(ot))Ue++;ot=0;for(var On=Ce;On;On=Qn(On))ot++;for(;0<Ue-ot;)Re=Qn(Re),Ue--;for(;0<ot-Ue;)Ce=Qn(Ce),ot--;for(;Ue--;){if(Re===Ce||Ce!==null&&Re===Ce.alternate){Qn=Re;break t}Re=Qn(Re),Ce=Qn(Ce)}Qn=null}else Qn=null;We!==null&&kv(ut,He,We,Qn,!1),pn!==null&&fa!==null&&kv(ut,fa,pn,Qn,!0)}}e:{if(He=Le?gt(Le):window,We=He.nodeName&&He.nodeName.toLowerCase(),We==="select"||We==="input"&&He.type==="file")var Cr=gr;else if(Vi(He))if(ga)Cr=er;else{Cr=Wi;var An=hi}else We=He.nodeName,!We||We.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?Le&&rr(Le.elementType)&&(Cr=gr):Cr=Ri;if(Cr&&(Cr=Cr(u,Le))){Ni(ut,Cr,b,nt);break e}An&&An(u,He,Le),u==="focusout"&&Le&&He.type==="number"&&Le.memoizedProps.value!=null&&Vn(He,"number",He.value)}switch(An=Le?gt(Le):window,u){case"focusin":(Vi(An)||An.contentEditable==="true")&&(ys=An,Os=Le,Ds=null);break;case"focusout":Ds=Os=ys=null;break;case"mousedown":ol=!0;break;case"contextmenu":case"mouseup":case"dragend":ol=!1,Eo(ut,b,nt);break;case"selectionchange":if(Rs)break;case"keydown":case"keyup":Eo(ut,b,nt)}var ki;if($t)e:{switch(u){case"compositionstart":var Xi="onCompositionStart";break e;case"compositionend":Xi="onCompositionEnd";break e;case"compositionupdate":Xi="onCompositionUpdate";break e}Xi=void 0}else fi?$i(u,b)&&(Xi="onCompositionEnd"):u==="keydown"&&b.keyCode===229&&(Xi="onCompositionStart");Xi&&(Jn&&b.locale!=="ko"&&(fi||Xi!=="onCompositionStart"?Xi==="onCompositionEnd"&&fi&&(ki=Va()):(Hr=nt,_a="value"in Hr?Hr.value:Hr.textContent,fi=!0)),An=vu(Le,Xi),0<An.length&&(Xi=new Co(Xi,u,null,b,nt),ut.push({event:Xi,listeners:An}),ki?Xi.data=ki:(ki=Ii(b),ki!==null&&(Xi.data=ki)))),(ki=Kn?Fi(u,b):Gi(u,b))&&(Xi=vu(Le,"onBeforeInput"),0<Xi.length&&(An=new Co("onBeforeInput","beforeinput",null,b,nt),ut.push({event:An,listeners:Xi}),An.data=ki)),ob(ut,u,Le,b,nt)}Sv(ut,p)})}function rd(u,p,b){return{instance:u,listener:p,currentTarget:b}}function vu(u,p){for(var b=p+"Capture",S=[];u!==null;){var _=u,M=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||M===null||(_=yr(u,b),_!=null&&S.unshift(rd(u,_,M)),_=yr(u,p),_!=null&&S.push(rd(u,_,M))),u.tag===3)return S;u=u.return}return[]}function cb(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function kv(u,p,b,S,_){for(var M=p._reactName,G=[];b!==null&&b!==S;){var re=b,Ae=re.alternate,Le=re.stateNode;if(re=re.tag,Ae!==null&&Ae===S)break;re!==5&&re!==26&&re!==27||Le===null||(Ae=Le,_?(Le=yr(b,M),Le!=null&&G.unshift(rd(b,Le,Ae))):_||(Le=yr(b,M),Le!=null&&G.push(rd(b,Le,Ae)))),b=b.return}G.length!==0&&u.push({event:p,listeners:G})}var db=/\r\n?/g,X0=/\u0000|\uFFFD/g;function Cv(u){return(typeof u=="string"?u:""+u).replace(db,`
`).replace(X0,"")}function Ev(u,p){return p=Cv(p),Cv(u)===p}function jr(u,p,b,S,_,M){switch(b){case"children":typeof S=="string"?p==="body"||p==="textarea"&&S===""||Bi(u,S):(typeof S=="number"||typeof S=="bigint")&&p!=="body"&&Bi(u,""+S);break;case"className":_n(u,"class",S);break;case"tabIndex":_n(u,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(u,b,S);break;case"style":Nr(u,S,M);break;case"data":if(p!=="object"){_n(u,"data",S);break}case"src":case"href":if(S===""&&(p!=="a"||b!=="href")){u.removeAttribute(b);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(b);break}S=sr(""+S),u.setAttribute(b,S);break;case"action":case"formAction":if(typeof S=="function"){u.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(b==="formAction"?(p!=="input"&&jr(u,p,"name",_.name,_,null),jr(u,p,"formEncType",_.formEncType,_,null),jr(u,p,"formMethod",_.formMethod,_,null),jr(u,p,"formTarget",_.formTarget,_,null)):(jr(u,p,"encType",_.encType,_,null),jr(u,p,"method",_.method,_,null),jr(u,p,"target",_.target,_,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(b);break}S=sr(""+S),u.setAttribute(b,S);break;case"onClick":S!=null&&(u.onclick=Pi);break;case"onScroll":S!=null&&Di("scroll",u);break;case"onScrollEnd":S!=null&&Di("scrollend",u);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(s(61));if(b=S.__html,b!=null){if(_.children!=null)throw Error(s(60));u.innerHTML=b}}break;case"multiple":u.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":u.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){u.removeAttribute("xlink:href");break}b=sr(""+S),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(b,""+S):u.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(b,""):u.removeAttribute(b);break;case"capture":case"download":S===!0?u.setAttribute(b,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(b,S):u.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?u.setAttribute(b,S):u.removeAttribute(b);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?u.removeAttribute(b):u.setAttribute(b,S);break;case"popover":Di("beforetoggle",u),Di("toggle",u),Hn(u,"popover",S);break;case"xlinkActuate":vn(u,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":vn(u,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":vn(u,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":vn(u,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":vn(u,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":vn(u,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":vn(u,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":vn(u,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":vn(u,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Hn(u,"is",S);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Zr.get(b)||b,Hn(u,b,S))}}function rh(u,p,b,S,_,M){switch(b){case"style":Nr(u,S,M);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(s(61));if(b=S.__html,b!=null){if(_.children!=null)throw Error(s(60));u.innerHTML=b}}break;case"children":typeof S=="string"?Bi(u,S):(typeof S=="number"||typeof S=="bigint")&&Bi(u,""+S);break;case"onScroll":S!=null&&Di("scroll",u);break;case"onScrollEnd":S!=null&&Di("scrollend",u);break;case"onClick":S!=null&&(u.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$n.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(_=b.endsWith("Capture"),p=b.slice(2,_?b.length-7:void 0),M=u[Me]||null,M=M!=null?M[b]:null,typeof M=="function"&&u.removeEventListener(p,M,_),typeof S=="function")){typeof M!="function"&&M!==null&&(b in u?u[b]=null:u.hasAttribute(b)&&u.removeAttribute(b)),u.addEventListener(p,S,_);break e}b in u?u[b]=S:S===!0?u.setAttribute(b,""):Hn(u,b,S)}}}function Es(u,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Di("error",u),Di("load",u);var S=!1,_=!1,M;for(M in b)if(b.hasOwnProperty(M)){var G=b[M];if(G!=null)switch(M){case"src":S=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,p));default:jr(u,p,M,G,b,null)}}_&&jr(u,p,"srcSet",b.srcSet,b,null),S&&jr(u,p,"src",b.src,b,null);return;case"input":Di("invalid",u);var re=M=G=_=null,Ae=null,Le=null;for(S in b)if(b.hasOwnProperty(S)){var nt=b[S];if(nt!=null)switch(S){case"name":_=nt;break;case"type":G=nt;break;case"checked":Ae=nt;break;case"defaultChecked":Le=nt;break;case"value":M=nt;break;case"defaultValue":re=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(s(137,p));break;default:jr(u,p,S,nt,b,null)}}gi(u,M,re,Ae,Le,G,_,!1);return;case"select":Di("invalid",u),S=G=M=null;for(_ in b)if(b.hasOwnProperty(_)&&(re=b[_],re!=null))switch(_){case"value":M=re;break;case"defaultValue":G=re;break;case"multiple":S=re;default:jr(u,p,_,re,b,null)}p=M,b=G,u.multiple=!!S,p!=null?ln(u,!!S,p,!1):b!=null&&ln(u,!!S,b,!0);return;case"textarea":Di("invalid",u),M=_=S=null;for(G in b)if(b.hasOwnProperty(G)&&(re=b[G],re!=null))switch(G){case"value":S=re;break;case"defaultValue":_=re;break;case"children":M=re;break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(91));break;default:jr(u,p,G,re,b,null)}Qi(u,S,_,M);return;case"option":for(Ae in b)b.hasOwnProperty(Ae)&&(S=b[Ae],S!=null)&&(Ae==="selected"?u.selected=S&&typeof S!="function"&&typeof S!="symbol":jr(u,p,Ae,S,b,null));return;case"dialog":Di("beforetoggle",u),Di("toggle",u),Di("cancel",u),Di("close",u);break;case"iframe":case"object":Di("load",u);break;case"video":case"audio":for(S=0;S<id.length;S++)Di(id[S],u);break;case"image":Di("error",u),Di("load",u);break;case"details":Di("toggle",u);break;case"embed":case"source":case"link":Di("error",u),Di("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in b)if(b.hasOwnProperty(Le)&&(S=b[Le],S!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,p));default:jr(u,p,Le,S,b,null)}return;default:if(rr(p)){for(nt in b)b.hasOwnProperty(nt)&&(S=b[nt],S!==void 0&&rh(u,p,nt,S,b,void 0));return}}for(re in b)b.hasOwnProperty(re)&&(S=b[re],S!=null&&jr(u,p,re,S,b,null))}function _v(u,p,b,S){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,M=null,G=null,re=null,Ae=null,Le=null,nt=null;for(We in b){var ut=b[We];if(b.hasOwnProperty(We)&&ut!=null)switch(We){case"checked":break;case"value":break;case"defaultValue":Ae=ut;default:S.hasOwnProperty(We)||jr(u,p,We,null,S,ut)}}for(var He in S){var We=S[He];if(ut=b[He],S.hasOwnProperty(He)&&(We!=null||ut!=null))switch(He){case"type":M=We;break;case"name":_=We;break;case"checked":Le=We;break;case"defaultChecked":nt=We;break;case"value":G=We;break;case"defaultValue":re=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(s(137,p));break;default:We!==ut&&jr(u,p,He,We,S,ut)}}Gn(u,G,re,Ae,Le,nt,M,_);return;case"select":We=G=re=He=null;for(M in b)if(Ae=b[M],b.hasOwnProperty(M)&&Ae!=null)switch(M){case"value":break;case"multiple":We=Ae;default:S.hasOwnProperty(M)||jr(u,p,M,null,S,Ae)}for(_ in S)if(M=S[_],Ae=b[_],S.hasOwnProperty(_)&&(M!=null||Ae!=null))switch(_){case"value":He=M;break;case"defaultValue":re=M;break;case"multiple":G=M;default:M!==Ae&&jr(u,p,_,M,S,Ae)}p=re,b=G,S=We,He!=null?ln(u,!!b,He,!1):!!S!=!!b&&(p!=null?ln(u,!!b,p,!0):ln(u,!!b,b?[]:"",!1));return;case"textarea":We=He=null;for(re in b)if(_=b[re],b.hasOwnProperty(re)&&_!=null&&!S.hasOwnProperty(re))switch(re){case"value":break;case"children":break;default:jr(u,p,re,null,S,_)}for(G in S)if(_=S[G],M=b[G],S.hasOwnProperty(G)&&(_!=null||M!=null))switch(G){case"value":He=_;break;case"defaultValue":We=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:_!==M&&jr(u,p,G,_,S,M)}ti(u,He,We);return;case"option":for(var pn in b)He=b[pn],b.hasOwnProperty(pn)&&He!=null&&!S.hasOwnProperty(pn)&&(pn==="selected"?u.selected=!1:jr(u,p,pn,null,S,He));for(Ae in S)He=S[Ae],We=b[Ae],S.hasOwnProperty(Ae)&&He!==We&&(He!=null||We!=null)&&(Ae==="selected"?u.selected=He&&typeof He!="function"&&typeof He!="symbol":jr(u,p,Ae,He,S,We));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qn in b)He=b[Qn],b.hasOwnProperty(Qn)&&He!=null&&!S.hasOwnProperty(Qn)&&jr(u,p,Qn,null,S,He);for(Le in S)if(He=S[Le],We=b[Le],S.hasOwnProperty(Le)&&He!==We&&(He!=null||We!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(s(137,p));break;default:jr(u,p,Le,He,S,We)}return;default:if(rr(p)){for(var fa in b)He=b[fa],b.hasOwnProperty(fa)&&He!==void 0&&!S.hasOwnProperty(fa)&&rh(u,p,fa,void 0,S,He);for(nt in S)He=S[nt],We=b[nt],!S.hasOwnProperty(nt)||He===We||He===void 0&&We===void 0||rh(u,p,nt,He,S,We);return}}for(var Re in b)He=b[Re],b.hasOwnProperty(Re)&&He!=null&&!S.hasOwnProperty(Re)&&jr(u,p,Re,null,S,He);for(ut in S)He=S[ut],We=b[ut],!S.hasOwnProperty(ut)||He===We||He==null&&We==null||jr(u,p,ut,He,S,We)}function Iv(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ub(){if(typeof performance.getEntriesByType=="function"){for(var u=0,p=0,b=performance.getEntriesByType("resource"),S=0;S<b.length;S++){var _=b[S],M=_.transferSize,G=_.initiatorType,re=_.duration;if(M&&re&&Iv(G)){for(G=0,re=_.responseEnd,S+=1;S<b.length;S++){var Ae=b[S],Le=Ae.startTime;if(Le>re)break;var nt=Ae.transferSize,ut=Ae.initiatorType;nt&&Iv(ut)&&(Ae=Ae.responseEnd,G+=nt*(Ae<re?1:(re-Le)/(Ae-Le)))}if(--S,p+=8*(M+G)/(_.duration/1e3),u++,10<u)break}}if(0<u)return p/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var ah=null,sh=null;function xu(u){return u.nodeType===9?u:u.ownerDocument}function K0(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J0(u,p){if(u===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&p==="foreignObject"?0:u}function oh(u,p){return u==="textarea"||u==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Z0=null;function fb(){var u=window.event;return u&&u.type==="popstate"?u===Z0?!1:(Z0=u,!0):(Z0=null,!1)}var ep=typeof setTimeout=="function"?setTimeout:void 0,Nv=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,tp=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(u){return Tv.resolve(null).then(u).catch(Mv)}:ep;function Mv(u){setTimeout(function(){throw u})}function Y1(u){return u==="head"}function np(u,p){var b=p,S=0;do{var _=b.nextSibling;if(u.removeChild(b),_&&_.nodeType===8)if(b=_.data,b==="/$"||b==="/&"){if(S===0){u.removeChild(_),fh(p);return}S--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")S++;else if(b==="html")ad(u.ownerDocument.documentElement);else if(b==="head"){b=u.ownerDocument.head,ad(b);for(var M=b.firstChild;M;){var G=M.nextSibling,re=M.nodeName;M[Et]||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&M.rel.toLowerCase()==="stylesheet"||b.removeChild(M),M=G}}else b==="body"&&ad(u.ownerDocument.body);b=_}while(b);fh(p)}function ip(u,p){var b=u;u=0;do{var S=b.nextSibling;if(b.nodeType===1?p?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(p?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),S&&S.nodeType===8)if(b=S.data,b==="/$"){if(u===0)break;u--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||u++;b=S}while(b)}function rp(u){var p=u.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":rp(b),Dt(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}u.removeChild(b)}}function hb(u,p,b,S){for(;u.nodeType===1;){var _=b;if(u.nodeName.toLowerCase()!==p.toLowerCase()){if(!S&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(S){if(!u[Et])switch(p){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(M=u.getAttribute("rel"),M==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(M!==_.rel||u.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||u.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||u.getAttribute("title")!==(_.title==null?null:_.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(M=u.getAttribute("src"),(M!==(_.src==null?null:_.src)||u.getAttribute("type")!==(_.type==null?null:_.type)||u.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&M&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(p==="input"&&u.type==="hidden"){var M=_.name==null?null:""+_.name;if(_.type==="hidden"&&u.getAttribute("name")===M)return u}else return u;if(u=el(u.nextSibling),u===null)break}return null}function Rv(u,p,b){if(p==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!b||(u=el(u.nextSibling),u===null))return null;return u}function ap(u,p){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!p||(u=el(u.nextSibling),u===null))return null;return u}function sp(u){return u.data==="$?"||u.data==="$~"}function bu(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function Ov(u,p){var b=u.ownerDocument;if(u.data==="$~")u._reactRetry=p;else if(u.data!=="$?"||b.readyState!=="loading")p();else{var S=function(){p(),b.removeEventListener("DOMContentLoaded",S)};b.addEventListener("DOMContentLoaded",S),u._reactRetry=S}}function el(u){for(;u!=null;u=u.nextSibling){var p=u.nodeType;if(p===1||p===3)break;if(p===8){if(p=u.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return u}var op=null;function lp(u){u=u.nextSibling;for(var p=0;u;){if(u.nodeType===8){var b=u.data;if(b==="/$"||b==="/&"){if(p===0)return el(u.nextSibling);p--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||p++}u=u.nextSibling}return null}function cp(u){u=u.previousSibling;for(var p=0;u;){if(u.nodeType===8){var b=u.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(p===0)return u;p--}else b!=="/$"&&b!=="/&"||p++}u=u.previousSibling}return null}function dp(u,p,b){switch(p=xu(b),u){case"html":if(u=p.documentElement,!u)throw Error(s(452));return u;case"head":if(u=p.head,!u)throw Error(s(453));return u;case"body":if(u=p.body,!u)throw Error(s(454));return u;default:throw Error(s(451))}}function ad(u){for(var p=u.attributes;p.length;)u.removeAttributeNode(p[0]);Dt(u)}var vl=new Map,up=new Set;function lh(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Zl=ie.d;ie.d={f:aC,r:sC,D:oC,C:lC,L:cC,m:dC,X:fC,S:uC,M:hC};function aC(){var u=Zl.f(),p=uu();return u||p}function sC(u){var p=en(u);p!==null&&p.tag===5&&p.type==="form"?Dg(p):Zl.r(u)}var ch=typeof document>"u"?null:document;function tA(u,p,b){var S=ch;if(S&&typeof p=="string"&&p){var _=Tn(p);_='link[rel="'+u+'"][href="'+_+'"]',typeof b=="string"&&(_+='[crossorigin="'+b+'"]'),up.has(_)||(up.add(_),u={rel:u,crossOrigin:b,href:p},S.querySelector(_)===null&&(p=S.createElement("link"),Es(p,"link",u),Vt(p),S.head.appendChild(p)))}}function oC(u){Zl.D(u),tA("dns-prefetch",u,null)}function lC(u,p){Zl.C(u,p),tA("preconnect",u,p)}function cC(u,p,b){Zl.L(u,p,b);var S=ch;if(S&&u&&p){var _='link[rel="preload"][as="'+Tn(p)+'"]';p==="image"&&b&&b.imageSrcSet?(_+='[imagesrcset="'+Tn(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(_+='[imagesizes="'+Tn(b.imageSizes)+'"]')):_+='[href="'+Tn(u)+'"]';var M=_;switch(p){case"style":M=dh(u);break;case"script":M=uh(u)}vl.has(M)||(u=y({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:u,as:p},b),vl.set(M,u),S.querySelector(_)!==null||p==="style"&&S.querySelector(fp(M))||p==="script"&&S.querySelector(hp(M))||(p=S.createElement("link"),Es(p,"link",u),Vt(p),S.head.appendChild(p)))}}function dC(u,p){Zl.m(u,p);var b=ch;if(b&&u){var S=p&&typeof p.as=="string"?p.as:"script",_='link[rel="modulepreload"][as="'+Tn(S)+'"][href="'+Tn(u)+'"]',M=_;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=uh(u)}if(!vl.has(M)&&(u=y({rel:"modulepreload",href:u},p),vl.set(M,u),b.querySelector(_)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(hp(M)))return}S=b.createElement("link"),Es(S,"link",u),Vt(S),b.head.appendChild(S)}}}function uC(u,p,b){Zl.S(u,p,b);var S=ch;if(S&&u){var _=un(S).hoistableStyles,M=dh(u);p=p||"default";var G=_.get(M);if(!G){var re={loading:0,preload:null};if(G=S.querySelector(fp(M)))re.loading=5;else{u=y({rel:"stylesheet",href:u,"data-precedence":p},b),(b=vl.get(M))&&pb(u,b);var Ae=G=S.createElement("link");Vt(Ae),Es(Ae,"link",u),Ae._p=new Promise(function(Le,nt){Ae.onload=Le,Ae.onerror=nt}),Ae.addEventListener("load",function(){re.loading|=1}),Ae.addEventListener("error",function(){re.loading|=2}),re.loading|=4,Dv(G,p,S)}G={type:"stylesheet",instance:G,count:1,state:re},_.set(M,G)}}}function fC(u,p){Zl.X(u,p);var b=ch;if(b&&u){var S=un(b).hoistableScripts,_=uh(u),M=S.get(_);M||(M=b.querySelector(hp(_)),M||(u=y({src:u,async:!0},p),(p=vl.get(_))&&mb(u,p),M=b.createElement("script"),Vt(M),Es(M,"link",u),b.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},S.set(_,M))}}function hC(u,p){Zl.M(u,p);var b=ch;if(b&&u){var S=un(b).hoistableScripts,_=uh(u),M=S.get(_);M||(M=b.querySelector(hp(_)),M||(u=y({src:u,async:!0,type:"module"},p),(p=vl.get(_))&&mb(u,p),M=b.createElement("script"),Vt(M),Es(M,"link",u),b.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},S.set(_,M))}}function nA(u,p,b,S){var _=(_=ye.current)?lh(_):null;if(!_)throw Error(s(446));switch(u){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=dh(b.href),b=un(_).hoistableStyles,S=b.get(p),S||(S={type:"style",instance:null,count:0,state:null},b.set(p,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){u=dh(b.href);var M=un(_).hoistableStyles,G=M.get(u);if(G||(_=_.ownerDocument||_,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(u,G),(M=_.querySelector(fp(u)))&&!M._p&&(G.instance=M,G.state.loading=5),vl.has(u)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},vl.set(u,b),M||pC(_,u,b,G.state))),p&&S===null)throw Error(s(528,""));return G}if(p&&S!==null)throw Error(s(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=uh(b),b=un(_).hoistableScripts,S=b.get(p),S||(S={type:"script",instance:null,count:0,state:null},b.set(p,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,u))}}function dh(u){return'href="'+Tn(u)+'"'}function fp(u){return'link[rel="stylesheet"]['+u+"]"}function iA(u){return y({},u,{"data-precedence":u.precedence,precedence:null})}function pC(u,p,b,S){u.querySelector('link[rel="preload"][as="style"]['+p+"]")?S.loading=1:(p=u.createElement("link"),S.preload=p,p.addEventListener("load",function(){return S.loading|=1}),p.addEventListener("error",function(){return S.loading|=2}),Es(p,"link",b),Vt(p),u.head.appendChild(p))}function uh(u){return'[src="'+Tn(u)+'"]'}function hp(u){return"script[async]"+u}function rA(u,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var S=u.querySelector('style[data-href~="'+Tn(b.href)+'"]');if(S)return p.instance=S,Vt(S),S;var _=y({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return S=(u.ownerDocument||u).createElement("style"),Vt(S),Es(S,"style",_),Dv(S,b.precedence,u),p.instance=S;case"stylesheet":_=dh(b.href);var M=u.querySelector(fp(_));if(M)return p.state.loading|=4,p.instance=M,Vt(M),M;S=iA(b),(_=vl.get(_))&&pb(S,_),M=(u.ownerDocument||u).createElement("link"),Vt(M);var G=M;return G._p=new Promise(function(re,Ae){G.onload=re,G.onerror=Ae}),Es(M,"link",S),p.state.loading|=4,Dv(M,b.precedence,u),p.instance=M;case"script":return M=uh(b.src),(_=u.querySelector(hp(M)))?(p.instance=_,Vt(_),_):(S=b,(_=vl.get(M))&&(S=y({},b),mb(S,_)),u=u.ownerDocument||u,_=u.createElement("script"),Vt(_),Es(_,"link",S),u.head.appendChild(_),p.instance=_);case"void":return null;default:throw Error(s(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(S=p.instance,p.state.loading|=4,Dv(S,b.precedence,u));return p.instance}function Dv(u,p,b){for(var S=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=S.length?S[S.length-1]:null,M=_,G=0;G<S.length;G++){var re=S[G];if(re.dataset.precedence===p)M=re;else if(M!==_)break}M?M.parentNode.insertBefore(u,M.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(u,p.firstChild))}function pb(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.title==null&&(u.title=p.title)}function mb(u,p){u.crossOrigin==null&&(u.crossOrigin=p.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=p.referrerPolicy),u.integrity==null&&(u.integrity=p.integrity)}var jv=null;function aA(u,p,b){if(jv===null){var S=new Map,_=jv=new Map;_.set(b,S)}else _=jv,S=_.get(b),S||(S=new Map,_.set(b,S));if(S.has(u))return S;for(S.set(u,null),b=b.getElementsByTagName(u),_=0;_<b.length;_++){var M=b[_];if(!(M[Et]||M[$e]||u==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var G=M.getAttribute(p)||"";G=u+G;var re=S.get(G);re?re.push(M):S.set(G,[M])}}return S}function sA(u,p,b){u=u.ownerDocument||u,u.head.insertBefore(b,p==="title"?u.querySelector("head > title"):null)}function mC(u,p,b){if(b===1||p.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;return p.rel==="stylesheet"?(u=p.disabled,typeof p.precedence=="string"&&u==null):!0;case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function oA(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function gC(u,p,b,S){if(b.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var _=dh(S.href),M=p.querySelector(fp(_));if(M){p=M._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(u.count++,u=Bv.bind(u),p.then(u,u)),b.state.loading|=4,b.instance=M,Vt(M);return}M=p.ownerDocument||p,S=iA(S),(_=vl.get(_))&&pb(S,_),M=M.createElement("link"),Vt(M);var G=M;G._p=new Promise(function(re,Ae){G.onload=re,G.onerror=Ae}),Es(M,"link",S),b.instance=M}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(b,p),(p=b.state.preload)&&(b.state.loading&3)===0&&(u.count++,b=Bv.bind(u),p.addEventListener("load",b),p.addEventListener("error",b))}}var gb=0;function vC(u,p){return u.stylesheets&&u.count===0&&Fv(u,u.stylesheets),0<u.count||0<u.imgCount?function(b){var S=setTimeout(function(){if(u.stylesheets&&Fv(u,u.stylesheets),u.unsuspend){var M=u.unsuspend;u.unsuspend=null,M()}},6e4+p);0<u.imgBytes&&gb===0&&(gb=62500*ub());var _=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Fv(u,u.stylesheets),u.unsuspend)){var M=u.unsuspend;u.unsuspend=null,M()}},(u.imgBytes>gb?50:800)+p);return u.unsuspend=b,function(){u.unsuspend=null,clearTimeout(S),clearTimeout(_)}}:null}function Bv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fv(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Pv=null;function Fv(u,p){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Pv=new Map,p.forEach(xC,u),Pv=null,Bv.call(u))}function xC(u,p){if(!(p.state.loading&4)){var b=Pv.get(u);if(b)var S=b.get(null);else{b=new Map,Pv.set(u,b);for(var _=u.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<_.length;M++){var G=_[M];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(b.set(G.dataset.precedence,G),S=G)}S&&b.set(null,S)}_=p.instance,G=_.getAttribute("data-precedence"),M=b.get(G)||S,M===S&&b.set(null,_),b.set(G,_),this.count++,S=Bv.bind(this),_.addEventListener("load",S),_.addEventListener("error",S),M?M.parentNode.insertBefore(_,M.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(_,u.firstChild)),p.state.loading|=4}}var pp={$$typeof:j,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function bC(u,p,b,S,_,M,G,re,Ae){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=S,this.onUncaughtError=_,this.onCaughtError=M,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function lA(u,p,b,S,_,M,G,re,Ae,Le,nt,ut){return u=new bC(u,p,b,G,Ae,Le,nt,ut,re),p=1,M===!0&&(p|=24),M=oi(3,null,null,p),u.current=M,M.stateNode=u,p=Wo(),p.refCount++,u.pooledCache=p,p.refCount++,M.memoizedState={element:S,isDehydrated:b,cache:p},I2(M),u}function cA(u){return u?(u=xi,u):xi}function dA(u,p,b,S,_,M){_=cA(_),S.context===null?S.context=_:S.pendingContext=_,S=U1(p),S.payload={element:b},M=M===void 0?null:M,M!==null&&(S.callback=M),b=L1(u,S,p),b!==null&&(Po(b,u,p),Gd(b,u,p))}function uA(u,p){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var b=u.retryLane;u.retryLane=b!==0&&b<p?b:p}}function vb(u,p){uA(u,p),(u=u.alternate)&&uA(u,p)}function fA(u){if(u.tag===13||u.tag===31){var p=tn(u,67108864);p!==null&&Po(p,u,67108864),vb(u,67108864)}}function hA(u){if(u.tag===13||u.tag===31){var p=go();p=Be(p);var b=tn(u,p);b!==null&&Po(b,u,p),vb(u,p)}}var Uv=!0;function yC(u,p,b,S){var _=K.T;K.T=null;var M=ie.p;try{ie.p=2,xb(u,p,b,S)}finally{ie.p=M,K.T=_}}function wC(u,p,b,S){var _=K.T;K.T=null;var M=ie.p;try{ie.p=8,xb(u,p,b,S)}finally{ie.p=M,K.T=_}}function xb(u,p,b,S){if(Uv){var _=bb(S);if(_===null)W0(u,p,S,Lv,b),mA(u,S);else if(SC(_,u,p,b,S))S.stopPropagation();else if(mA(u,S),p&4&&-1<AC.indexOf(u)){for(;_!==null;){var M=en(_);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var G=Oe(M.pendingLanes);if(G!==0){var re=M;for(re.pendingLanes|=2,re.entangledLanes|=2;G;){var Ae=1<<31-Y(G);re.entanglements[1]|=Ae,G&=~Ae}Jl(M),(hn&6)===0&&(cu=jt()+500,pu(0))}}break;case 31:case 13:re=tn(M,2),re!==null&&Po(re,M,2),uu(),vb(M,2)}if(M=bb(S),M===null&&W0(u,p,S,Lv,b),M===_)break;_=M}_!==null&&S.stopPropagation()}else W0(u,p,S,null,b)}}function bb(u){return u=Lr(u),yb(u)}var Lv=null;function yb(u){if(Lv=null,u=wt(u),u!==null){var p=c(u);if(p===null)u=null;else{var b=p.tag;if(b===13){if(u=d(p),u!==null)return u;u=null}else if(b===31){if(u=f(p),u!==null)return u;u=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;u=null}else p!==u&&(u=null)}}return Lv=u,null}function pA(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(an()){case rn:return 2;case Kt:return 8;case Jt:case Zt:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var wb=!1,sd=null,od=null,ld=null,mp=new Map,gp=new Map,cd=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mA(u,p){switch(u){case"focusin":case"focusout":sd=null;break;case"dragenter":case"dragleave":od=null;break;case"mouseover":case"mouseout":ld=null;break;case"pointerover":case"pointerout":mp.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":gp.delete(p.pointerId)}}function vp(u,p,b,S,_,M){return u===null||u.nativeEvent!==M?(u={blockedOn:p,domEventName:b,eventSystemFlags:S,nativeEvent:M,targetContainers:[_]},p!==null&&(p=en(p),p!==null&&fA(p)),u):(u.eventSystemFlags|=S,p=u.targetContainers,_!==null&&p.indexOf(_)===-1&&p.push(_),u)}function SC(u,p,b,S,_){switch(p){case"focusin":return sd=vp(sd,u,p,b,S,_),!0;case"dragenter":return od=vp(od,u,p,b,S,_),!0;case"mouseover":return ld=vp(ld,u,p,b,S,_),!0;case"pointerover":var M=_.pointerId;return mp.set(M,vp(mp.get(M)||null,u,p,b,S,_)),!0;case"gotpointercapture":return M=_.pointerId,gp.set(M,vp(gp.get(M)||null,u,p,b,S,_)),!0}return!1}function gA(u){var p=wt(u.target);if(p!==null){var b=c(p);if(b!==null){if(p=b.tag,p===13){if(p=d(b),p!==null){u.blockedOn=p,ft(u.priority,function(){hA(b)});return}}else if(p===31){if(p=f(b),p!==null){u.blockedOn=p,ft(u.priority,function(){hA(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){u.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}u.blockedOn=null}function zv(u){if(u.blockedOn!==null)return!1;for(var p=u.targetContainers;0<p.length;){var b=bb(u.nativeEvent);if(b===null){b=u.nativeEvent;var S=new b.constructor(b.type,b);hr=S,b.target.dispatchEvent(S),hr=null}else return p=en(b),p!==null&&fA(p),u.blockedOn=b,!1;p.shift()}return!0}function vA(u,p,b){zv(u)&&b.delete(p)}function kC(){wb=!1,sd!==null&&zv(sd)&&(sd=null),od!==null&&zv(od)&&(od=null),ld!==null&&zv(ld)&&(ld=null),mp.forEach(vA),gp.forEach(vA)}function Hv(u,p){u.blockedOn===p&&(u.blockedOn=null,wb||(wb=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kC)))}var qv=null;function xA(u){qv!==u&&(qv=u,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qv===u&&(qv=null);for(var p=0;p<u.length;p+=3){var b=u[p],S=u[p+1],_=u[p+2];if(typeof S!="function"){if(yb(S||b)===null)continue;break}var M=en(b);M!==null&&(u.splice(p,3),p-=3,Z2(M,{pending:!0,data:_,method:b.method,action:S},S,_))}}))}function fh(u){function p(Ae){return Hv(Ae,u)}sd!==null&&Hv(sd,u),od!==null&&Hv(od,u),ld!==null&&Hv(ld,u),mp.forEach(p),gp.forEach(p);for(var b=0;b<cd.length;b++){var S=cd[b];S.blockedOn===u&&(S.blockedOn=null)}for(;0<cd.length&&(b=cd[0],b.blockedOn===null);)gA(b),b.blockedOn===null&&cd.shift();if(b=(u.ownerDocument||u).$$reactFormReplay,b!=null)for(S=0;S<b.length;S+=3){var _=b[S],M=b[S+1],G=_[Me]||null;if(typeof M=="function")G||xA(b);else if(G){var re=null;if(M&&M.hasAttribute("formAction")){if(_=M,G=M[Me]||null)re=G.formAction;else if(yb(_)!==null)continue}else re=G.action;typeof re=="function"?b[S+1]=re:(b.splice(S,3),S-=3),xA(b)}}}function bA(){function u(M){M.canIntercept&&M.info==="react-transition"&&M.intercept({handler:function(){return new Promise(function(G){return _=G})},focusReset:"manual",scroll:"manual"})}function p(){_!==null&&(_(),_=null),S||setTimeout(b,20)}function b(){if(!S&&!navigation.transition){var M=navigation.currentEntry;M&&M.url!=null&&navigation.navigate(M.url,{state:M.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,_=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(b,100),function(){S=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),_!==null&&(_(),_=null)}}}function Ab(u){this._internalRoot=u}Gv.prototype.render=Ab.prototype.render=function(u){var p=this._internalRoot;if(p===null)throw Error(s(409));var b=p.current,S=go();dA(b,S,u,p,null,null)},Gv.prototype.unmount=Ab.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var p=u.containerInfo;dA(u.current,2,null,u,null,null),uu(),p[it]=null}};function Gv(u){this._internalRoot=u}Gv.prototype.unstable_scheduleHydration=function(u){if(u){var p=Ze();u={blockedOn:null,target:u,priority:p};for(var b=0;b<cd.length&&p!==0&&p<cd[b].priority;b++);cd.splice(b,0,u),b===0&&gA(u)}};var yA=i.version;if(yA!=="19.2.3")throw Error(s(527,yA,"19.2.3"));ie.findDOMNode=function(u){var p=u._reactInternals;if(p===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=g(p),u=u!==null?v(u):null,u=u===null?null:u.stateNode,u};var CC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vv.isDisabled&&Vv.supportsFiber)try{dn=Vv.inject(CC),Ht=Vv}catch{}}return bp.createRoot=function(u,p){if(!l(u))throw Error(s(299));var b=!1,S="",_=Hg,M=qg,G=s0;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(_=p.onUncaughtError),p.onCaughtError!==void 0&&(M=p.onCaughtError),p.onRecoverableError!==void 0&&(G=p.onRecoverableError)),p=lA(u,1,!1,null,null,b,S,null,_,M,G,bA),u[it]=p.current,Q0(u),new Ab(p)},bp.hydrateRoot=function(u,p,b){if(!l(u))throw Error(s(299));var S=!1,_="",M=Hg,G=qg,re=s0,Ae=null;return b!=null&&(b.unstable_strictMode===!0&&(S=!0),b.identifierPrefix!==void 0&&(_=b.identifierPrefix),b.onUncaughtError!==void 0&&(M=b.onUncaughtError),b.onCaughtError!==void 0&&(G=b.onCaughtError),b.onRecoverableError!==void 0&&(re=b.onRecoverableError),b.formState!==void 0&&(Ae=b.formState)),p=lA(u,1,!0,p,b??null,S,_,Ae,M,G,re,bA),p.context=cA(null),b=p.current,S=go(),S=Be(S),_=U1(S),_.callback=null,L1(b,_,S),b=S,p.current.lanes=b,Ne(p,b),Jl(p),u[it]=p.current,Q0(u),new Gv(p)},bp.version="19.2.3",bp}var TA;function jC(){if(TA)return Cb.exports;TA=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Cb.exports=DC(),Cb.exports}var BC=jC();const PC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,a,s)=>s?s.toUpperCase():a.toLowerCase()),MA=r=>{const i=FC(r);return i.charAt(0).toUpperCase()+i.slice(1)},Q5=(...r)=>r.filter((i,a,s)=>!!i&&i.trim()!==""&&s.indexOf(i)===a).join(" ").trim(),UC=r=>{for(const i in r)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};var LC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zC=D.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},m)=>D.createElement("svg",{ref:m,...LC,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:Q5("lucide",l),...!c&&!UC(f)&&{"aria-hidden":"true"},...f},[...d.map(([g,v])=>D.createElement(g,v)),...Array.isArray(c)?c:[c]]));const qt=(r,i)=>{const a=D.forwardRef(({className:s,...l},c)=>D.createElement(zC,{ref:c,iconNode:i,className:Q5(`lucide-${PC(MA(r))}`,`lucide-${r}`,s),...l}));return a.displayName=MA(r),a};const HC=[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],qC=qt("ambulance",HC);const GC=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$5=qt("ban",GC);const VC=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],YC=qt("bell",VC);const QC=[["path",{d:"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z",key:"w610uw"}]],$C=qt("bone",QC);const WC=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ox=qt("book-open",WC);const XC=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],KC=qt("brain-circuit",XC);const JC=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],ZC=qt("bug",JC);const eE=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],W5=qt("building-2",eE);const tE=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],nE=qt("calendar-clock",tE);const iE=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],X5=qt("camera",iE);const rE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],So=qt("check",rE);const aE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sE=qt("chevron-down",aE);const oE=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Nc=qt("chevron-left",oE);const lE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],af=qt("chevron-right",lE);const cE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dE=qt("chevron-up",cE);const uE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fE=qt("circle-check-big",uE);const hE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],RA=qt("circle-plus",hE);const pE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],K5=qt("circle-question-mark",pE);const mE=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],gE=qt("clipboard-check",mE);const vE=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],J5=qt("clipboard-copy",vE);const xE=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],bE=qt("clipboard-list",xE);const yE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lx=qt("clock",yE);const wE=[["path",{d:"m17 15-5.5 5.5L9 18",key:"15q87x"}],["path",{d:"M5 17.743A7 7 0 1 1 15.71 10h1.79a4.5 4.5 0 0 1 1.5 8.742",key:"9ho6ki"}]],AE=qt("cloud-check",wE);const SE=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],kE=qt("cloud-off",SE);const CE=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],EE=qt("code",CE);const _E=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],IE=qt("copy",_E);const NE=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],Z5=qt("delete",NE);const TE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Yu=qt("download",TE);const ME=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],RE=qt("droplets",ME);const OE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ry=qt("eye-off",OE);const DE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],am=qt("eye",DE);const jE=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],BE=qt("file-down",jE);const PE=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],c2=qt("file-text",PE);const FE=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],UE=qt("git-branch",FE);const LE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],zE=qt("import",LE);const HE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Bm=qt("info",HE);const qE=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],j3=qt("key-round",qE);const GE=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],VE=qt("lightbulb",GE);const YE=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],QE=qt("loader",YE);const $E=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],d2=qt("lock",$E);const WE=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],eS=qt("log-in",WE);const XE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KE=qt("log-out",XE);const JE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ZE=qt("map-pin",JE);const e_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],t_=qt("menu",e_);const n_=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],i_=qt("message-square",n_);const r_=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],a_=qt("moon",r_);const s_=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],o_=qt("pen",s_);const l_=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],cx=qt("pencil",l_);const c_=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],V4=qt("pill",c_);const d_=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],u_=qt("play",d_);const f_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dx=qt("plus",f_);const h_=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tS=qt("refresh-cw",h_);const p_=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],nS=qt("scan-face",p_);const m_=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],g_=qt("scan-line",m_);const v_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Wh=qt("search",v_);const x_=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Y4=qt("settings",x_);const b_=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Q4=qt("share-2",b_);const y_=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],w_=qt("share",y_);const A_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],S_=qt("shield-check",A_);const k_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]],C_=qt("shield-plus",k_);const E_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],iS=qt("shield-x",E_);const __=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],I_=qt("shield",__);const N_=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rS=qt("square-check-big",N_);const T_=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],aS=qt("square-pen",T_);const M_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],R_=qt("square",M_);const O_=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],D_=qt("star",O_);const j_=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],ux=qt("stethoscope",j_);const B_=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],P_=qt("sun",B_);const F_=[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]],U_=qt("text-cursor-input",F_);const L_=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],z_=qt("timer",L_);const H_=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Dd=qt("trash-2",H_);const q_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tc=qt("triangle-alert",q_);const G_=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sS=qt("upload",G_);const V_=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Y_=qt("user-cog",V_);const Q_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$4=qt("user-plus",Q_);const $_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],W_=qt("user",$_);const X_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Oy=qt("users",X_);const K_=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],J_=qt("wifi",K_);const Z_=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],eI=qt("wind",Z_);const tI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ms=qt("x",tI);var W4=Fm(),pi=r=>Pm(r,W4),X4=Fm();pi.write=r=>Pm(r,X4);var fx=Fm();pi.onStart=r=>Pm(r,fx);var K4=Fm();pi.onFrame=r=>Pm(r,K4);var J4=Fm();pi.onFinish=r=>Pm(r,J4);var zh=[];pi.setTimeout=(r,i)=>{const a=pi.now()+i,s=()=>{const c=zh.findIndex(d=>d.cancel==s);~c&&zh.splice(c,1),Sd-=~c?1:0},l={time:a,handler:r,cancel:s};return zh.splice(oS(a),0,l),Sd+=1,lS(),l};var oS=r=>~(~zh.findIndex(i=>i.time>r)||~zh.length);pi.cancel=r=>{fx.delete(r),K4.delete(r),J4.delete(r),W4.delete(r),X4.delete(r)};pi.sync=r=>{Dy=!0,pi.batchedUpdates(r),Dy=!1};pi.throttle=r=>{let i;function a(){try{r(...i)}finally{i=null}}function s(...l){i=l,pi.onStart(a)}return s.handler=r,s.cancel=()=>{fx.delete(a),i=null},s};var Z4=typeof window<"u"?window.requestAnimationFrame:(()=>{});pi.use=r=>Z4=r;pi.now=typeof performance<"u"?()=>performance.now():Date.now;pi.batchedUpdates=r=>r();pi.catch=console.error;pi.frameLoop="always";pi.advance=()=>{pi.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):dS()};var Ad=-1,Sd=0,Dy=!1;function Pm(r,i){Dy?(i.delete(r),r(0)):(i.add(r),lS())}function lS(){Ad<0&&(Ad=0,pi.frameLoop!=="demand"&&Z4(cS))}function nI(){Ad=-1}function cS(){~Ad&&(Z4(cS),pi.batchedUpdates(dS))}function dS(){const r=Ad;Ad=pi.now();const i=oS(Ad);if(i&&(uS(zh.splice(0,i),a=>a.handler()),Sd-=i),!Sd){nI();return}fx.flush(),W4.flush(r?Math.min(64,Ad-r):16.667),K4.flush(),X4.flush(),J4.flush()}function Fm(){let r=new Set,i=r;return{add(a){Sd+=i==r&&!r.has(a)?1:0,r.add(a)},delete(a){return Sd-=i==r&&r.has(a)?1:0,r.delete(a)},flush(a){i.size&&(r=new Set,Sd-=i.size,uS(i,s=>s(a)&&r.add(s)),Sd+=r.size,i=r)}}}function uS(r,i){r.forEach(a=>{try{i(a)}catch(s){pi.catch(s)}})}var iI=Object.defineProperty,rI=(r,i)=>{for(var a in i)iI(r,a,{get:i[a],enumerable:!0})},D1={};rI(D1,{assign:()=>sI,colors:()=>Ed,createStringInterpolator:()=>tw,skipAnimation:()=>hS,to:()=>fS,willAdvance:()=>nw});function jy(){}var aI=(r,i,a)=>Object.defineProperty(r,i,{value:a,writable:!0,configurable:!0}),Mt={arr:Array.isArray,obj:r=>!!r&&r.constructor.name==="Object",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",und:r=>r===void 0};function wc(r,i){if(Mt.arr(r)){if(!Mt.arr(i)||r.length!==i.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==i[a])return!1;return!0}return r===i}var Ki=(r,i)=>r.forEach(i);function rc(r,i,a){if(Mt.arr(r)){for(let s=0;s<r.length;s++)i.call(a,r[s],`${s}`);return}for(const s in r)r.hasOwnProperty(s)&&i.call(a,r[s],s)}var Pl=r=>Mt.und(r)?[]:Mt.arr(r)?r:[r];function Qp(r,i){if(r.size){const a=Array.from(r);r.clear(),Ki(a,i)}}var jp=(r,...i)=>Qp(r,a=>a(...i)),ew=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),tw,fS,Ed=null,hS=!1,nw=jy,sI=r=>{r.to&&(fS=r.to),r.now&&(pi.now=r.now),r.colors!==void 0&&(Ed=r.colors),r.skipAnimation!=null&&(hS=r.skipAnimation),r.createStringInterpolator&&(tw=r.createStringInterpolator),r.requestAnimationFrame&&pi.use(r.requestAnimationFrame),r.batchedUpdates&&(pi.batchedUpdates=r.batchedUpdates),r.willAdvance&&(nw=r.willAdvance),r.frameLoop&&(pi.frameLoop=r.frameLoop)},$p=new Set,i1=[],Nb=[],B3=0,hx={get idle(){return!$p.size&&!i1.length},start(r){B3>r.priority?($p.add(r),pi.onStart(oI)):(pS(r),pi(By))},advance:By,sort(r){if(B3)pi.onFrame(()=>hx.sort(r));else{const i=i1.indexOf(r);~i&&(i1.splice(i,1),mS(r))}},clear(){i1=[],$p.clear()}};function oI(){$p.forEach(pS),$p.clear(),pi(By)}function pS(r){i1.includes(r)||mS(r)}function mS(r){i1.splice(lI(i1,i=>i.priority>r.priority),0,r)}function By(r){const i=Nb;for(let a=0;a<i1.length;a++){const s=i1[a];B3=s.priority,s.idle||(nw(s),s.advance(r),s.idle||i.push(s))}return B3=0,Nb=i1,Nb.length=0,i1=i,i1.length>0}function lI(r,i){const a=r.findIndex(i);return a<0?r.length:a}var cI={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},M1="[-+]?\\d*\\.?\\d+",P3=M1+"%";function px(...r){return"\\(\\s*("+r.join(")\\s*,\\s*(")+")\\s*\\)"}var dI=new RegExp("rgb"+px(M1,M1,M1)),uI=new RegExp("rgba"+px(M1,M1,M1,M1)),fI=new RegExp("hsl"+px(M1,P3,P3)),hI=new RegExp("hsla"+px(M1,P3,P3,M1)),pI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mI=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gI=/^#([0-9a-fA-F]{6})$/,vI=/^#([0-9a-fA-F]{8})$/;function xI(r){let i;return typeof r=="number"?r>>>0===r&&r>=0&&r<=4294967295?r:null:(i=gI.exec(r))?parseInt(i[1]+"ff",16)>>>0:Ed&&Ed[r]!==void 0?Ed[r]:(i=dI.exec(r))?(hh(i[1])<<24|hh(i[2])<<16|hh(i[3])<<8|255)>>>0:(i=uI.exec(r))?(hh(i[1])<<24|hh(i[2])<<16|hh(i[3])<<8|jA(i[4]))>>>0:(i=pI.exec(r))?parseInt(i[1]+i[1]+i[2]+i[2]+i[3]+i[3]+"ff",16)>>>0:(i=vI.exec(r))?parseInt(i[1],16)>>>0:(i=mI.exec(r))?parseInt(i[1]+i[1]+i[2]+i[2]+i[3]+i[3]+i[4]+i[4],16)>>>0:(i=fI.exec(r))?(OA(DA(i[1]),Yv(i[2]),Yv(i[3]))|255)>>>0:(i=hI.exec(r))?(OA(DA(i[1]),Yv(i[2]),Yv(i[3]))|jA(i[4]))>>>0:null}function Tb(r,i,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(i-r)*6*a:a<1/2?i:a<2/3?r+(i-r)*(2/3-a)*6:r}function OA(r,i,a){const s=a<.5?a*(1+i):a+i-a*i,l=2*a-s,c=Tb(l,s,r+1/3),d=Tb(l,s,r),f=Tb(l,s,r-1/3);return Math.round(c*255)<<24|Math.round(d*255)<<16|Math.round(f*255)<<8}function hh(r){const i=parseInt(r,10);return i<0?0:i>255?255:i}function DA(r){return(parseFloat(r)%360+360)%360/360}function jA(r){const i=parseFloat(r);return i<0?0:i>1?255:Math.round(i*255)}function Yv(r){const i=parseFloat(r);return i<0?0:i>100?1:i/100}function BA(r){let i=xI(r);if(i===null)return r;i=i||0;const a=(i&4278190080)>>>24,s=(i&16711680)>>>16,l=(i&65280)>>>8,c=(i&255)/255;return`rgba(${a}, ${s}, ${l}, ${c})`}var sm=(r,i,a)=>{if(Mt.fun(r))return r;if(Mt.arr(r))return sm({range:r,output:i,extrapolate:a});if(Mt.str(r.output[0]))return tw(r);const s=r,l=s.output,c=s.range||[0,1],d=s.extrapolateLeft||s.extrapolate||"extend",f=s.extrapolateRight||s.extrapolate||"extend",m=s.easing||(g=>g);return g=>{const v=yI(g,c);return bI(g,c[v],c[v+1],l[v],l[v+1],m,d,f,s.map)}};function bI(r,i,a,s,l,c,d,f,m){let g=m?m(r):r;if(g<i){if(d==="identity")return g;d==="clamp"&&(g=i)}if(g>a){if(f==="identity")return g;f==="clamp"&&(g=a)}return s===l?s:i===a?r<=i?s:l:(i===-1/0?g=-g:a===1/0?g=g-i:g=(g-i)/(a-i),g=c(g),s===-1/0?g=-g:l===1/0?g=g+s:g=g*(l-s)+s,g)}function yI(r,i){for(var a=1;a<i.length-1&&!(i[a]>=r);++a);return a-1}var wI={linear:r=>r},om=Symbol.for("FluidValue.get"),Xh=Symbol.for("FluidValue.observers"),t1=r=>!!(r&&r[om]),yl=r=>r&&r[om]?r[om]():r,PA=r=>r[Xh]||null;function AI(r,i){r.eventObserved?r.eventObserved(i):r(i)}function lm(r,i){const a=r[Xh];a&&a.forEach(s=>{AI(s,i)})}var gS=class{constructor(r){if(!r&&!(r=this.get))throw Error("Unknown getter");SI(this,r)}},SI=(r,i)=>vS(r,om,i);function u2(r,i){if(r[om]){let a=r[Xh];a||vS(r,Xh,a=new Set),a.has(i)||(a.add(i),r.observerAdded&&r.observerAdded(a.size,i))}return i}function cm(r,i){const a=r[Xh];if(a&&a.has(i)){const s=a.size-1;s?a.delete(i):r[Xh]=null,r.observerRemoved&&r.observerRemoved(s,i)}}var vS=(r,i,a)=>Object.defineProperty(r,i,{value:a,writable:!0,configurable:!0}),S3=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,kI=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,FA=new RegExp(`(${S3.source})(%|[a-z]+)`,"i"),CI=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,mx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,xS=r=>{const[i,a]=EI(r);if(!i||ew())return r;const s=window.getComputedStyle(document.documentElement).getPropertyValue(i);if(s)return s.trim();if(a&&a.startsWith("--")){const l=window.getComputedStyle(document.documentElement).getPropertyValue(a);return l||r}else{if(a&&mx.test(a))return xS(a);if(a)return a}return r},EI=r=>{const i=mx.exec(r);if(!i)return[,];const[,a,s]=i;return[a,s]},Mb,_I=(r,i,a,s,l)=>`rgba(${Math.round(i)}, ${Math.round(a)}, ${Math.round(s)}, ${l})`,bS=r=>{Mb||(Mb=Ed?new RegExp(`(${Object.keys(Ed).join("|")})(?!\\w)`,"g"):/^\b$/);const i=r.output.map(c=>yl(c).replace(mx,xS).replace(kI,BA).replace(Mb,BA)),a=i.map(c=>c.match(S3).map(Number)),l=a[0].map((c,d)=>a.map(f=>{if(!(d in f))throw Error('The arity of each "output" value must be equal');return f[d]})).map(c=>sm({...r,output:c}));return c=>{const d=!FA.test(i[0])&&i.find(m=>FA.test(m))?.replace(S3,"");let f=0;return i[0].replace(S3,()=>`${l[f++](c)}${d||""}`).replace(CI,_I)}},iw="react-spring: ",yS=r=>{const i=r;let a=!1;if(typeof i!="function")throw new TypeError(`${iw}once requires a function parameter`);return(...s)=>{a||(i(...s),a=!0)}},II=yS(console.warn);function NI(){II(`${iw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var TI=yS(console.warn);function MI(){TI(`${iw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function gx(r){return Mt.str(r)&&(r[0]=="#"||/\d/.test(r)||!ew()&&mx.test(r)||r in(Ed||{}))}var vx=ew()?D.useEffect:D.useLayoutEffect,RI=()=>{const r=D.useRef(!1);return vx(()=>(r.current=!0,()=>{r.current=!1}),[]),r};function wS(){const r=D.useState()[1],i=RI();return()=>{i.current&&r(Math.random())}}var AS=r=>D.useEffect(r,OI),OI=[];function UA(r){const i=D.useRef(void 0);return D.useEffect(()=>{i.current=r}),i.current}var dm=Symbol.for("Animated:node"),DI=r=>!!r&&r[dm]===r,K1=r=>r&&r[dm],rw=(r,i)=>aI(r,dm,i),xx=r=>r&&r[dm]&&r[dm].getPayload(),SS=class{constructor(){rw(this,this)}getPayload(){return this.payload||[]}},bx=class kS extends SS{constructor(i){super(),this._value=i,this.done=!0,this.durationProgress=0,Mt.num(this._value)&&(this.lastPosition=this._value)}static create(i){return new kS(i)}getPayload(){return[this]}getValue(){return this._value}setValue(i,a){return Mt.num(i)&&(this.lastPosition=i,a&&(i=Math.round(i/a)*a,this.done&&(this.lastPosition=i))),this._value===i?!1:(this._value=i,!0)}reset(){const{done:i}=this;this.done=!1,Mt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,i&&(this.lastVelocity=null),this.v0=null)}},F3=class CS extends bx{constructor(i){super(0),this._string=null,this._toString=sm({output:[i,i]})}static create(i){return new CS(i)}getValue(){const i=this._string;return i??(this._string=this._toString(this._value))}setValue(i){if(Mt.str(i)){if(i==this._string)return!1;this._string=i,this._value=1}else if(super.setValue(i))this._string=null;else return!1;return!0}reset(i){i&&(this._toString=sm({output:[this.getValue(),i]})),this._value=0,super.reset()}},U3={dependencies:null},yx=class extends SS{constructor(r){super(),this.source=r,this.setValue(r)}getValue(r){const i={};return rc(this.source,(a,s)=>{DI(a)?i[s]=a.getValue(r):t1(a)?i[s]=yl(a):r||(i[s]=a)}),i}setValue(r){this.source=r,this.payload=this._makePayload(r)}reset(){this.payload&&Ki(this.payload,r=>r.reset())}_makePayload(r){if(r){const i=new Set;return rc(r,this._addToPayload,i),Array.from(i)}}_addToPayload(r){U3.dependencies&&t1(r)&&U3.dependencies.add(r);const i=xx(r);i&&Ki(i,a=>this.add(a))}},jI=class ES extends yx{constructor(i){super(i)}static create(i){return new ES(i)}getValue(){return this.source.map(i=>i.getValue())}setValue(i){const a=this.getPayload();return i.length==a.length?a.map((s,l)=>s.setValue(i[l])).some(Boolean):(super.setValue(i.map(BI)),!0)}};function BI(r){return(gx(r)?F3:bx).create(r)}function Py(r){const i=K1(r);return i?i.constructor:Mt.arr(r)?jI:gx(r)?F3:bx}var LA=(r,i)=>{const a=!Mt.fun(r)||r.prototype&&r.prototype.isReactComponent;return D.forwardRef((s,l)=>{const c=D.useRef(null),d=a&&D.useCallback(k=>{c.current=UI(l,k)},[l]),[f,m]=FI(s,i),g=wS(),v=()=>{const k=c.current;if(a&&!k)return;(k?i.applyAnimatedValues(k,f.getValue(!0)):!1)===!1&&g()},y=new PI(v,m),A=D.useRef(void 0);vx(()=>(A.current=y,Ki(m,k=>u2(k,y)),()=>{A.current&&(Ki(A.current.deps,k=>cm(k,A.current)),pi.cancel(A.current.update))})),D.useEffect(v,[]),AS(()=>()=>{const k=A.current;Ki(k.deps,E=>cm(E,k))});const w=i.getComponentProps(f.getValue());return D.createElement(r,{...w,ref:d})})},PI=class{constructor(r,i){this.update=r,this.deps=i}eventObserved(r){r.type=="change"&&pi.write(this.update)}};function FI(r,i){const a=new Set;return U3.dependencies=a,r.style&&(r={...r,style:i.createAnimatedStyle(r.style)}),r=new yx(r),U3.dependencies=null,[r,a]}function UI(r,i){return r&&(Mt.fun(r)?r(i):r.current=i),i}var zA=Symbol.for("AnimatedComponent"),LI=(r,{applyAnimatedValues:i=()=>!1,createAnimatedStyle:a=l=>new yx(l),getComponentProps:s=l=>l}={})=>{const l={applyAnimatedValues:i,createAnimatedStyle:a,getComponentProps:s},c=d=>{const f=HA(d)||"Anonymous";return Mt.str(d)?d=c[d]||(c[d]=LA(d,l)):d=d[zA]||(d[zA]=LA(d,l)),d.displayName=`Animated(${f})`,d};return rc(r,(d,f)=>{Mt.arr(r)&&(f=HA(d)),c[f]=c(d)}),{animated:c}},HA=r=>Mt.str(r)?r:r&&Mt.str(r.displayName)?r.displayName:Mt.fun(r)&&r.name||null;function Tu(r,...i){return Mt.fun(r)?r(...i):r}var Wp=(r,i)=>r===!0||!!(i&&r&&(Mt.fun(r)?r(i):Pl(r).includes(i))),_S=(r,i)=>Mt.obj(r)?i&&r[i]:r,IS=(r,i)=>r.default===!0?r[i]:r.default?r.default[i]:void 0,zI=r=>r,aw=(r,i=zI)=>{let a=HI;r.default&&r.default!==!0&&(r=r.default,a=Object.keys(r));const s={};for(const l of a){const c=i(r[l],l);Mt.und(c)||(s[l]=c)}return s},HI=["config","onProps","onStart","onChange","onPause","onResume","onRest"],qI={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function GI(r){const i={};let a=0;if(rc(r,(s,l)=>{qI[l]||(i[l]=s,a++)}),a)return i}function NS(r){const i=GI(r);if(i){const a={to:i};return rc(r,(s,l)=>l in i||(a[l]=s)),a}return{...r}}function um(r){return r=yl(r),Mt.arr(r)?r.map(um):gx(r)?D1.createStringInterpolator({range:[0,1],output:[r,r]})(1):r}function VI(r){for(const i in r)return!0;return!1}function Fy(r){return Mt.fun(r)||Mt.arr(r)&&Mt.obj(r[0])}function YI(r,i){r.ref?.delete(r),i?.delete(r)}function TS(r,i){i&&r.ref!==i&&(r.ref?.delete(r),i.add(r),r.ref=i)}var QI={default:{tension:170,friction:26}},Uy={...QI.default,mass:1,damping:1,easing:wI.linear,clamp:!1},$I=class{constructor(){this.velocity=0,Object.assign(this,Uy)}};function WI(r,i,a){a&&(a={...a},qA(a,i),i={...a,...i}),qA(r,i),Object.assign(r,i);for(const d in Uy)r[d]==null&&(r[d]=Uy[d]);let{frequency:s,damping:l}=r;const{mass:c}=r;return Mt.und(s)||(s<.01&&(s=.01),l<0&&(l=0),r.tension=Math.pow(2*Math.PI/s,2)*c,r.friction=4*Math.PI*l*c/s),r}function qA(r,i){if(!Mt.und(i.decay))r.duration=void 0;else{const a=!Mt.und(i.tension)||!Mt.und(i.friction);(a||!Mt.und(i.frequency)||!Mt.und(i.damping)||!Mt.und(i.mass))&&(r.duration=void 0,r.decay=void 0),a&&(r.frequency=void 0)}}var GA=[],XI=class{constructor(){this.changed=!1,this.values=GA,this.toValues=null,this.fromValues=GA,this.config=new $I,this.immediate=!1}};function MS(r,{key:i,props:a,defaultProps:s,state:l,actions:c}){return new Promise((d,f)=>{let m,g,v=Wp(a.cancel??s?.cancel,i);if(v)w();else{Mt.und(a.pause)||(l.paused=Wp(a.pause,i));let k=s?.pause;k!==!0&&(k=l.paused||Wp(k,i)),m=Tu(a.delay||0,i),k?(l.resumeQueue.add(A),c.pause()):(c.resume(),A())}function y(){l.resumeQueue.add(A),l.timeouts.delete(g),g.cancel(),m=g.time-pi.now()}function A(){m>0&&!D1.skipAnimation?(l.delayed=!0,g=pi.setTimeout(w,m),l.pauseQueue.add(y),l.timeouts.add(g)):w()}function w(){l.delayed&&(l.delayed=!1),l.pauseQueue.delete(y),l.timeouts.delete(g),r<=(l.cancelId||0)&&(v=!0);try{c.start({...a,callId:r,cancel:v},d)}catch(k){f(k)}}})}var sw=(r,i)=>i.length==1?i[0]:i.some(a=>a.cancelled)?Hh(r.get()):i.every(a=>a.noop)?RS(r.get()):I1(r.get(),i.every(a=>a.finished)),RS=r=>({value:r,noop:!0,finished:!0,cancelled:!1}),I1=(r,i,a=!1)=>({value:r,finished:i,cancelled:a}),Hh=r=>({value:r,cancelled:!0,finished:!1});function OS(r,i,a,s){const{callId:l,parentId:c,onRest:d}=i,{asyncTo:f,promise:m}=a;return!c&&r===f&&!i.reset?m:a.promise=(async()=>{a.asyncId=l,a.asyncTo=r;const g=aw(i,(I,T)=>T==="onRest"?void 0:I);let v,y;const A=new Promise((I,T)=>(v=I,y=T)),w=I=>{const T=l<=(a.cancelId||0)&&Hh(s)||l!==a.asyncId&&I1(s,!1);if(T)throw I.result=T,y(I),I},k=(I,T)=>{const N=new VA,j=new YA;return(async()=>{if(D1.skipAnimation)throw fm(a),j.result=I1(s,!1),y(j),j;w(N);const B=Mt.obj(I)?{...I}:{...T,to:I};B.parentId=l,rc(g,(F,P)=>{Mt.und(B[P])&&(B[P]=F)});const U=await s.start(B);return w(N),a.paused&&await new Promise(F=>{a.resumeQueue.add(F)}),U})()};let E;if(D1.skipAnimation)return fm(a),I1(s,!1);try{let I;Mt.arr(r)?I=(async T=>{for(const N of T)await k(N)})(r):I=Promise.resolve(r(k,s.stop.bind(s))),await Promise.all([I.then(v),A]),E=I1(s.get(),!0,!1)}catch(I){if(I instanceof VA)E=I.result;else if(I instanceof YA)E=I.result;else throw I}finally{l==a.asyncId&&(a.asyncId=c,a.asyncTo=c?f:void 0,a.promise=c?m:void 0)}return Mt.fun(d)&&pi.batchedUpdates(()=>{d(E,s,s.item)}),E})()}function fm(r,i){Qp(r.timeouts,a=>a.cancel()),r.pauseQueue.clear(),r.resumeQueue.clear(),r.asyncId=r.asyncTo=r.promise=void 0,i&&(r.cancelId=i)}var VA=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},YA=class extends Error{constructor(){super("SkipAnimationSignal")}},Ly=r=>r instanceof ow,KI=1,ow=class extends gS{constructor(){super(...arguments),this.id=KI++,this._priority=0}get priority(){return this._priority}set priority(r){this._priority!=r&&(this._priority=r,this._onPriorityChange(r))}get(){const r=K1(this);return r&&r.getValue()}to(...r){return D1.to(this,r)}interpolate(...r){return NI(),D1.to(this,r)}toJSON(){return this.get()}observerAdded(r){r==1&&this._attach()}observerRemoved(r){r==0&&this._detach()}_attach(){}_detach(){}_onChange(r,i=!1){lm(this,{type:"change",parent:this,value:r,idle:i})}_onPriorityChange(r){this.idle||hx.sort(this),lm(this,{type:"priority",parent:this,priority:r})}},Ju=Symbol.for("SpringPhase"),DS=1,zy=2,Hy=4,Rb=r=>(r[Ju]&DS)>0,ud=r=>(r[Ju]&zy)>0,yp=r=>(r[Ju]&Hy)>0,QA=(r,i)=>i?r[Ju]|=zy|DS:r[Ju]&=~zy,$A=(r,i)=>i?r[Ju]|=Hy:r[Ju]&=~Hy,JI=class extends ow{constructor(r,i){if(super(),this.animation=new XI,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Mt.und(r)||!Mt.und(i)){const a=Mt.obj(r)?{...r}:{...i,from:r};Mt.und(a.default)&&(a.default=!0),this.start(a)}}get idle(){return!(ud(this)||this._state.asyncTo)||yp(this)}get goal(){return yl(this.animation.to)}get velocity(){const r=K1(this);return r instanceof bx?r.lastVelocity||0:r.getPayload().map(i=>i.lastVelocity||0)}get hasAnimated(){return Rb(this)}get isAnimating(){return ud(this)}get isPaused(){return yp(this)}get isDelayed(){return this._state.delayed}advance(r){let i=!0,a=!1;const s=this.animation;let{toValues:l}=s;const{config:c}=s,d=xx(s.to);!d&&t1(s.to)&&(l=Pl(yl(s.to))),s.values.forEach((g,v)=>{if(g.done)return;const y=g.constructor==F3?1:d?d[v].lastPosition:l[v];let A=s.immediate,w=y;if(!A){if(w=g.lastPosition,c.tension<=0){g.done=!0;return}let k=g.elapsedTime+=r;const E=s.fromValues[v],I=g.v0!=null?g.v0:g.v0=Mt.arr(c.velocity)?c.velocity[v]:c.velocity;let T;const N=c.precision||(E==y?.005:Math.min(1,Math.abs(y-E)*.001));if(Mt.und(c.duration))if(c.decay){const j=c.decay===!0?.998:c.decay,B=Math.exp(-(1-j)*k);w=E+I/(1-j)*(1-B),A=Math.abs(g.lastPosition-w)<=N,T=I*B}else{T=g.lastVelocity==null?I:g.lastVelocity;const j=c.restVelocity||N/10,B=c.clamp?0:c.bounce,U=!Mt.und(B),F=E==y?g.v0>0:E<y;let P,z=!1;const V=1,L=Math.ceil(r/V);for(let Q=0;Q<L&&(P=Math.abs(T)>j,!(!P&&(A=Math.abs(y-w)<=N,A)));++Q){U&&(z=w==y||w>y==F,z&&(T=-T*B,w=y));const q=-c.tension*1e-6*(w-y),ee=-c.friction*.001*T,X=(q+ee)/c.mass;T=T+X*V,w=w+T*V}}else{let j=1;c.duration>0&&(this._memoizedDuration!==c.duration&&(this._memoizedDuration=c.duration,g.durationProgress>0&&(g.elapsedTime=c.duration*g.durationProgress,k=g.elapsedTime+=r)),j=(c.progress||0)+k/this._memoizedDuration,j=j>1?1:j<0?0:j,g.durationProgress=j),w=E+c.easing(j)*(y-E),T=(w-g.lastPosition)/r,A=j==1}g.lastVelocity=T,Number.isNaN(w)&&(console.warn("Got NaN while animating:",this),A=!0)}d&&!d[v].done&&(A=!1),A?g.done=!0:i=!1,g.setValue(w,c.round)&&(a=!0)});const f=K1(this),m=f.getValue();if(i){const g=yl(s.to);(m!==g||a)&&!c.decay?(f.setValue(g),this._onChange(g)):a&&c.decay&&this._onChange(m),this._stop()}else a&&this._onChange(m)}set(r){return pi.batchedUpdates(()=>{this._stop(),this._focus(r),this._set(r)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ud(this)){const{to:r,config:i}=this.animation;pi.batchedUpdates(()=>{this._onStart(),i.decay||this._set(r,!1),this._stop()})}return this}update(r){return(this.queue||(this.queue=[])).push(r),this}start(r,i){let a;return Mt.und(r)?(a=this.queue||[],this.queue=[]):a=[Mt.obj(r)?r:{...i,to:r}],Promise.all(a.map(s=>this._update(s))).then(s=>sw(this,s))}stop(r){const{to:i}=this.animation;return this._focus(this.get()),fm(this._state,r&&this._lastCallId),pi.batchedUpdates(()=>this._stop(i,r)),this}reset(){this._update({reset:!0})}eventObserved(r){r.type=="change"?this._start():r.type=="priority"&&(this.priority=r.priority+1)}_prepareNode(r){const i=this.key||"";let{to:a,from:s}=r;a=Mt.obj(a)?a[i]:a,(a==null||Fy(a))&&(a=void 0),s=Mt.obj(s)?s[i]:s,s==null&&(s=void 0);const l={to:a,from:s};return Rb(this)||(r.reverse&&([a,s]=[s,a]),s=yl(s),Mt.und(s)?K1(this)||this._set(a):this._set(s)),l}_update({...r},i){const{key:a,defaultProps:s}=this;r.default&&Object.assign(s,aw(r,(d,f)=>/^on/.test(f)?_S(d,a):d)),XA(this,r,"onProps"),Ap(this,"onProps",r,this);const l=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const c=this._state;return MS(++this._lastCallId,{key:a,props:r,defaultProps:s,state:c,actions:{pause:()=>{yp(this)||($A(this,!0),jp(c.pauseQueue),Ap(this,"onPause",I1(this,wp(this,this.animation.to)),this))},resume:()=>{yp(this)&&($A(this,!1),ud(this)&&this._resume(),jp(c.resumeQueue),Ap(this,"onResume",I1(this,wp(this,this.animation.to)),this))},start:this._merge.bind(this,l)}}).then(d=>{if(r.loop&&d.finished&&!(i&&d.noop)){const f=jS(r);if(f)return this._update(f,!0)}return d})}_merge(r,i,a){if(i.cancel)return this.stop(!0),a(Hh(this));const s=!Mt.und(r.to),l=!Mt.und(r.from);if(s||l)if(i.callId>this._lastToId)this._lastToId=i.callId;else return a(Hh(this));const{key:c,defaultProps:d,animation:f}=this,{to:m,from:g}=f;let{to:v=m,from:y=g}=r;l&&!s&&(!i.default||Mt.und(v))&&(v=y),i.reverse&&([v,y]=[y,v]);const A=!wc(y,g);A&&(f.from=y),y=yl(y);const w=!wc(v,m);w&&this._focus(v);const k=Fy(i.to),{config:E}=f,{decay:I,velocity:T}=E;(s||l)&&(E.velocity=0),i.config&&!k&&WI(E,Tu(i.config,c),i.config!==d.config?Tu(d.config,c):void 0);let N=K1(this);if(!N||Mt.und(v))return a(I1(this,!0));const j=Mt.und(i.reset)?l&&!i.default:!Mt.und(y)&&Wp(i.reset,c),B=j?y:this.get(),U=um(v),F=Mt.num(U)||Mt.arr(U)||gx(U),P=!k&&(!F||Wp(d.immediate||i.immediate,c));if(w){const Q=Py(v);if(Q!==N.constructor)if(P)N=this._set(U);else throw Error(`Cannot animate between ${N.constructor.name} and ${Q.name}, as the "to" prop suggests`)}const z=N.constructor;let V=t1(v),L=!1;if(!V){const Q=j||!Rb(this)&&A;(w||Q)&&(L=wc(um(B),U),V=!L),(!wc(f.immediate,P)&&!P||!wc(E.decay,I)||!wc(E.velocity,T))&&(V=!0)}if(L&&ud(this)&&(f.changed&&!j?V=!0:V||this._stop(m)),!k&&((V||t1(m))&&(f.values=N.getPayload(),f.toValues=t1(v)?null:z==F3?[1]:Pl(U)),f.immediate!=P&&(f.immediate=P,!P&&!j&&this._set(m)),V)){const{onRest:Q}=f;Ki(eN,ee=>XA(this,i,ee));const q=I1(this,wp(this,m));jp(this._pendingCalls,q),this._pendingCalls.add(a),f.changed&&pi.batchedUpdates(()=>{f.changed=!j,Q?.(q,this),j?Tu(d.onRest,q):f.onStart?.(q,this)})}j&&this._set(B),k?a(OS(i.to,i,this._state,this)):V?this._start():ud(this)&&!w?this._pendingCalls.add(a):a(RS(B))}_focus(r){const i=this.animation;r!==i.to&&(PA(this)&&this._detach(),i.to=r,PA(this)&&this._attach())}_attach(){let r=0;const{to:i}=this.animation;t1(i)&&(u2(i,this),Ly(i)&&(r=i.priority+1)),this.priority=r}_detach(){const{to:r}=this.animation;t1(r)&&cm(r,this)}_set(r,i=!0){const a=yl(r);if(!Mt.und(a)){const s=K1(this);if(!s||!wc(a,s.getValue())){const l=Py(a);!s||s.constructor!=l?rw(this,l.create(a)):s.setValue(a),s&&pi.batchedUpdates(()=>{this._onChange(a,i)})}}return K1(this)}_onStart(){const r=this.animation;r.changed||(r.changed=!0,Ap(this,"onStart",I1(this,wp(this,r.to)),this))}_onChange(r,i){i||(this._onStart(),Tu(this.animation.onChange,r,this)),Tu(this.defaultProps.onChange,r,this),super._onChange(r,i)}_start(){const r=this.animation;K1(this).reset(yl(r.to)),r.immediate||(r.fromValues=r.values.map(i=>i.lastPosition)),ud(this)||(QA(this,!0),yp(this)||this._resume())}_resume(){D1.skipAnimation?this.finish():hx.start(this)}_stop(r,i){if(ud(this)){QA(this,!1);const a=this.animation;Ki(a.values,l=>{l.done=!0}),a.toValues&&(a.onChange=a.onPause=a.onResume=void 0),lm(this,{type:"idle",parent:this});const s=i?Hh(this.get()):I1(this.get(),wp(this,r??a.to));jp(this._pendingCalls,s),a.changed&&(a.changed=!1,Ap(this,"onRest",s,this))}}};function wp(r,i){const a=um(i),s=um(r.get());return wc(s,a)}function jS(r,i=r.loop,a=r.to){const s=Tu(i);if(s){const l=s!==!0&&NS(s),c=(l||r).reverse,d=!l||l.reset;return hm({...r,loop:i,default:!1,pause:void 0,to:!c||Fy(a)?a:void 0,from:d?r.from:void 0,reset:d,...l})}}function hm(r){const{to:i,from:a}=r=NS(r),s=new Set;return Mt.obj(i)&&WA(i,s),Mt.obj(a)&&WA(a,s),r.keys=s.size?Array.from(s):null,r}function ZI(r){const i=hm(r);return Mt.und(i.default)&&(i.default=aw(i)),i}function WA(r,i){rc(r,(a,s)=>a!=null&&i.add(s))}var eN=["onStart","onRest","onChange","onPause","onResume"];function XA(r,i,a){r.animation[a]=i[a]!==IS(i,a)?_S(i[a],r.key):void 0}function Ap(r,i,...a){r.animation[i]?.(...a),r.defaultProps[i]?.(...a)}var tN=["onStart","onChange","onRest"],nN=1,iN=class{constructor(i,a){this.id=nN++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),a&&(this._flush=a),i&&this.start({default:!0,...i})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(i=>i.idle&&!i.isDelayed&&!i.isPaused)}get item(){return this._item}set item(i){this._item=i}get(){const i={};return this.each((a,s)=>i[s]=a.get()),i}set(i){for(const a in i){const s=i[a];Mt.und(s)||this.springs[a].set(s)}}update(i){return i&&this.queue.push(hm(i)),this}start(i){let{queue:a}=this;return i?a=Pl(i).map(hm):this.queue=[],this._flush?this._flush(this,a):(LS(this,a),qy(this,a))}stop(i,a){if(i!==!!i&&(a=i),a){const s=this.springs;Ki(Pl(a),l=>s[l].stop(!!i))}else fm(this._state,this._lastAsyncId),this.each(s=>s.stop(!!i));return this}pause(i){if(Mt.und(i))this.start({pause:!0});else{const a=this.springs;Ki(Pl(i),s=>a[s].pause())}return this}resume(i){if(Mt.und(i))this.start({pause:!1});else{const a=this.springs;Ki(Pl(i),s=>a[s].resume())}return this}each(i){rc(this.springs,i)}_onFrame(){const{onStart:i,onChange:a,onRest:s}=this._events,l=this._active.size>0,c=this._changed.size>0;(l&&!this._started||c&&!this._started)&&(this._started=!0,Qp(i,([m,g])=>{g.value=this.get(),m(g,this,this._item)}));const d=!l&&this._started,f=c||d&&s.size?this.get():null;c&&a.size&&Qp(a,([m,g])=>{g.value=f,m(g,this,this._item)}),d&&(this._started=!1,Qp(s,([m,g])=>{g.value=f,m(g,this,this._item)}))}eventObserved(i){if(i.type=="change")this._changed.add(i.parent),i.idle||this._active.add(i.parent);else if(i.type=="idle")this._active.delete(i.parent);else return;pi.onFrame(this._onFrame)}};function qy(r,i){return Promise.all(i.map(a=>BS(r,a))).then(a=>sw(r,a))}async function BS(r,i,a){const{keys:s,to:l,from:c,loop:d,onRest:f,onResolve:m}=i,g=Mt.obj(i.default)&&i.default;d&&(i.loop=!1),l===!1&&(i.to=null),c===!1&&(i.from=null);const v=Mt.arr(l)||Mt.fun(l)?l:void 0;v?(i.to=void 0,i.onRest=void 0,g&&(g.onRest=void 0)):Ki(tN,E=>{const I=i[E];if(Mt.fun(I)){const T=r._events[E];i[E]=({finished:N,cancelled:j})=>{const B=T.get(I);B?(N||(B.finished=!1),j&&(B.cancelled=!0)):T.set(I,{value:null,finished:N||!1,cancelled:j||!1})},g&&(g[E]=i[E])}});const y=r._state;i.pause===!y.paused?(y.paused=i.pause,jp(i.pause?y.pauseQueue:y.resumeQueue)):y.paused&&(i.pause=!0);const A=(s||Object.keys(r.springs)).map(E=>r.springs[E].start(i)),w=i.cancel===!0||IS(i,"cancel")===!0;(v||w&&y.asyncId)&&A.push(MS(++r._lastAsyncId,{props:i,state:y,actions:{pause:jy,resume:jy,start(E,I){w?(fm(y,r._lastAsyncId),I(Hh(r))):(E.onRest=f,I(OS(v,E,y,r)))}}})),y.paused&&await new Promise(E=>{y.resumeQueue.add(E)});const k=sw(r,await Promise.all(A));if(d&&k.finished&&!(a&&k.noop)){const E=jS(i,d,l);if(E)return LS(r,[E]),BS(r,E,!0)}return m&&pi.batchedUpdates(()=>m(k,r,r.item)),k}function KA(r,i){const a={...r.springs};return i&&Ki(Pl(i),s=>{Mt.und(s.keys)&&(s=hm(s)),Mt.obj(s.to)||(s={...s,to:void 0}),US(a,s,l=>FS(l))}),PS(r,a),a}function PS(r,i){rc(i,(a,s)=>{r.springs[s]||(r.springs[s]=a,u2(a,r))})}function FS(r,i){const a=new JI;return a.key=r,i&&u2(a,i),a}function US(r,i,a){i.keys&&Ki(i.keys,s=>{(r[s]||(r[s]=a(s)))._prepareNode(i)})}function LS(r,i){Ki(i,a=>{US(r.springs,a,s=>FS(s,r))})}var rN=D.createContext({pause:!1,immediate:!1}),aN=()=>{const r=[],i=function(s){MI();const l=[];return Ki(r,(c,d)=>{if(Mt.und(s))l.push(c.start());else{const f=a(s,c,d);f&&l.push(c.start(f))}}),l};i.current=r,i.add=function(s){r.includes(s)||r.push(s)},i.delete=function(s){const l=r.indexOf(s);~l&&r.splice(l,1)},i.pause=function(){return Ki(r,s=>s.pause(...arguments)),this},i.resume=function(){return Ki(r,s=>s.resume(...arguments)),this},i.set=function(s){Ki(r,(l,c)=>{const d=Mt.fun(s)?s(c,l):s;d&&l.set(d)})},i.start=function(s){const l=[];return Ki(r,(c,d)=>{if(Mt.und(s))l.push(c.start());else{const f=this._getProps(s,c,d);f&&l.push(c.start(f))}}),l},i.stop=function(){return Ki(r,s=>s.stop(...arguments)),this},i.update=function(s){return Ki(r,(l,c)=>l.update(this._getProps(s,l,c))),this};const a=function(s,l,c){return Mt.fun(s)?s(c,l):s};return i._getProps=a,i};function zS(r,i,a){const s=Mt.fun(i)&&i;s&&!a&&(a=[]);const l=D.useMemo(()=>s||arguments.length==3?aN():void 0,[]),c=D.useRef(0),d=wS(),f=D.useMemo(()=>({ctrls:[],queue:[],flush(T,N){const j=KA(T,N);return c.current>0&&!f.queue.length&&!Object.keys(j).some(U=>!T.springs[U])?qy(T,N):new Promise(U=>{PS(T,j),f.queue.push(()=>{U(qy(T,N))}),d()})}}),[]),m=D.useRef([...f.ctrls]),g=D.useRef([]),v=UA(r)||0;D.useMemo(()=>{Ki(m.current.slice(r,v),T=>{YI(T,l),T.stop(!0)}),m.current.length=r,y(v,r)},[r]),D.useMemo(()=>{y(0,Math.min(v,r))},a);function y(T,N){for(let j=T;j<N;j++){const B=m.current[j]||(m.current[j]=new iN(null,f.flush)),U=s?s(j,B):i[j];U&&(g.current[j]=ZI(U))}}const A=m.current.map((T,N)=>KA(T,g.current[N])),w=D.useContext(rN),k=UA(w),E=w!==k&&VI(w);vx(()=>{c.current++,f.ctrls=m.current;const{queue:T}=f;T.length&&(f.queue=[],Ki(T,N=>N())),Ki(m.current,(N,j)=>{l?.add(N),E&&N.start({default:w});const B=g.current[j];B&&(TS(N,B.ref),N.ref?N.queue.push(B):N.start(B))})}),AS(()=>()=>{Ki(f.ctrls,T=>T.stop(!0))});const I=A.map(T=>({...T}));return l?[I,l]:I}function Pu(r,i){const a=Mt.fun(r),[[s],l]=zS(1,a?r:[r],a?[]:i);return a||arguments.length==2?[s,l]:s}function sN(r,i,a){const s=Mt.fun(i)&&i;s&&!a&&(a=[]);let l=!0,c;const d=zS(r,(f,m)=>{const g=s?s(f,m):i;return c=g.ref,l=l&&g.reverse,g},a||[{}]);if(vx(()=>{Ki(d[1].current,(f,m)=>{const g=d[1].current[m+(l?1:-1)];if(TS(f,c),f.ref){g&&f.update({to:g.springs});return}g?f.start({to:g.springs}):f.start()})},a),s||arguments.length==3){const f=c??d[1];return f._getProps=(m,g,v)=>{const y=Mt.fun(m)?m(v,g):m;if(y){const A=f.current[v+(y.reverse?1:-1)];return A&&(y.to=A.springs),y}},d}return d[0]}var HS=class extends ow{constructor(r,i){super(),this.source=r,this.idle=!0,this._active=new Set,this.calc=sm(...i);const a=this._get(),s=Py(a);rw(this,s.create(a))}advance(r){const i=this._get(),a=this.get();wc(i,a)||(K1(this).setValue(i),this._onChange(i,this.idle)),!this.idle&&JA(this._active)&&Ob(this)}_get(){const r=Mt.arr(this.source)?this.source.map(yl):Pl(yl(this.source));return this.calc(...r)}_start(){this.idle&&!JA(this._active)&&(this.idle=!1,Ki(xx(this),r=>{r.done=!1}),D1.skipAnimation?(pi.batchedUpdates(()=>this.advance()),Ob(this)):hx.start(this))}_attach(){let r=1;Ki(Pl(this.source),i=>{t1(i)&&u2(i,this),Ly(i)&&(i.idle||this._active.add(i),r=Math.max(r,i.priority+1))}),this.priority=r,this._start()}_detach(){Ki(Pl(this.source),r=>{t1(r)&&cm(r,this)}),this._active.clear(),Ob(this)}eventObserved(r){r.type=="change"?r.idle?this.advance():(this._active.add(r.parent),this._start()):r.type=="idle"?this._active.delete(r.parent):r.type=="priority"&&(this.priority=Pl(this.source).reduce((i,a)=>Math.max(i,(Ly(a)?a.priority:0)+1),0))}};function oN(r){return r.idle!==!1}function JA(r){return!r.size||Array.from(r).every(oN)}function Ob(r){r.idle||(r.idle=!0,Ki(xx(r),i=>{i.done=!0}),lm(r,{type:"idle",parent:r}))}var ZA=(r,...i)=>new HS(r,i);D1.assign({createStringInterpolator:bS,to:(r,i)=>new HS(r,i)});var qS=Y5(),GS=/^--/;function lN(r,i){return i==null||typeof i=="boolean"||i===""?"":typeof i=="number"&&i!==0&&!GS.test(r)&&!(Xp.hasOwnProperty(r)&&Xp[r])?i+"px":(""+i).trim()}var e6={};function cN(r,i){if(!r.nodeType||!r.setAttribute)return!1;const a=r.nodeName==="filter"||r.parentNode&&r.parentNode.nodeName==="filter",{className:s,style:l,children:c,scrollTop:d,scrollLeft:f,viewBox:m,...g}=i,v=Object.values(g),y=Object.keys(g).map(A=>a||r.hasAttribute(A)?A:e6[A]||(e6[A]=A.replace(/([A-Z])/g,w=>"-"+w.toLowerCase())));c!==void 0&&(r.textContent=c);for(const A in l)if(l.hasOwnProperty(A)){const w=lN(A,l[A]);GS.test(A)?r.style.setProperty(A,w):r.style[A]=w}y.forEach((A,w)=>{r.setAttribute(A,v[w])}),s!==void 0&&(r.className=s),d!==void 0&&(r.scrollTop=d),f!==void 0&&(r.scrollLeft=f),m!==void 0&&r.setAttribute("viewBox",m)}var Xp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dN=(r,i)=>r+i.charAt(0).toUpperCase()+i.substring(1),uN=["Webkit","Ms","Moz","O"];Xp=Object.keys(Xp).reduce((r,i)=>(uN.forEach(a=>r[dN(a,i)]=r[i]),r),Xp);var fN=/^(matrix|translate|scale|rotate|skew)/,hN=/^(translate)/,pN=/^(rotate|skew)/,Db=(r,i)=>Mt.num(r)&&r!==0?r+i:r,k3=(r,i)=>Mt.arr(r)?r.every(a=>k3(a,i)):Mt.num(r)?r===i:parseFloat(r)===i,mN=class extends yx{constructor({x:r,y:i,z:a,...s}){const l=[],c=[];(r||i||a)&&(l.push([r||0,i||0,a||0]),c.push(d=>[`translate3d(${d.map(f=>Db(f,"px")).join(",")})`,k3(d,0)])),rc(s,(d,f)=>{if(f==="transform")l.push([d||""]),c.push(m=>[m,m===""]);else if(fN.test(f)){if(delete s[f],Mt.und(d))return;const m=hN.test(f)?"px":pN.test(f)?"deg":"";l.push(Pl(d)),c.push(f==="rotate3d"?([g,v,y,A])=>[`rotate3d(${g},${v},${y},${Db(A,m)})`,k3(A,0)]:g=>[`${f}(${g.map(v=>Db(v,m)).join(",")})`,k3(g,f.startsWith("scale")?1:0)])}}),l.length&&(s.transform=new gN(l,c)),super(s)}},gN=class extends gS{constructor(r,i){super(),this.inputs=r,this.transforms=i,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let r="",i=!0;return Ki(this.inputs,(a,s)=>{const l=yl(a[0]),[c,d]=this.transforms[s](Mt.arr(l)?l:a.map(yl));r+=" "+c,i=i&&d}),i?"none":r}observerAdded(r){r==1&&Ki(this.inputs,i=>Ki(i,a=>t1(a)&&u2(a,this)))}observerRemoved(r){r==0&&Ki(this.inputs,i=>Ki(i,a=>t1(a)&&cm(a,this)))}eventObserved(r){r.type=="change"&&(this._value=null),lm(this,r)}},vN=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];D1.assign({batchedUpdates:qS.unstable_batchedUpdates,createStringInterpolator:bS,colors:cI});var xN=LI(vN,{applyAnimatedValues:cN,createAnimatedStyle:r=>new mN(r),getComponentProps:({scrollTop:r,scrollLeft:i,...a})=>a}),Z1=xN.animated;const t6=()=>{};function ya(r){const i=`[${r}]`;return{debug:t6,info:t6,warn:console.warn.bind(console,i),error:console.error.bind(console,i)}}function lw(r,i="full"){return r?.startsWith("external")?`External${r.includes(":")?": "+r.split(":")[1]:""}`:r?i==="short"?"Saved":"Saved: My Note":"New Note"}const Kh=[{skillLevel:"Readiness Requirements",subjectArea:[{name:"Airway Management",tasks:[{id:"081-000-0061",title:"Perform Patient Suctioning"},{id:"081-68W-0230",title:"Place an Intermediate Airway Device"},{id:"081-68W-2001",title:"Operate a Simplified Automated Ventilator"},{id:"081-000-0122",title:"Perform a Surgical Cricothyroidotomy"},{id:"081-68W-2036",title:"Perform End Tidal Carbon Dioxide Monitoring"}]},{name:"Fluid Management",tasks:[{id:"081-000-0128",title:"Administer Whole Blood"},{id:"081-68W-0237",title:"Place an Intraosseous Device"},{id:"081-68W-0238",title:"Manage an Intraosseous Infusion"},{id:"081-68W-0314",title:"Administer Fluids Through an Infusion"},{id:"081-68W-2000",title:"Operate a Fluid Warmer"}]},{name:"Force Health Protection",tasks:[{id:"081-000-0059",title:"Decontaminate a Casualty"},{id:"081-68W-3016",title:"Brief Mission Commander on Casualty Response Plan"},{id:"081-68W-0167",title:"Employ Telemedicine"},{id:"081-000-0016",title:"Treat a Casualty for a Heat Injury"},{id:"081-000-0017",title:"Treat a Casualty for a Cold Injury"},{id:"081-68W-0005",title:"Enforce Field Sanitation Measures"}]},{name:"Medical Management",tasks:[{id:"081-000-0072",title:"Perform a Medical Patient Assessment"},{id:"081-000-0114",title:"Treat a Blood Agent (Hydrogen Cyanide) Casualty"},{id:"081-000-0015",title:"Treat a Choking Agent Casualty"},{id:"081-68W-0279",title:"Treat a Biological Casualty"},{id:"081-000-0018",title:"Perform Basic Life Support"},{id:"081-000-0116",title:"Treat a Blister Agent Casualty (Mustard, Lewisite, Phosgene Oxime)"},{id:"081-000-0118",title:"Treat a Radiation Casualty"},{id:"081-68W-0275",title:"Treat a Nerve Agent Casualty"}]},{name:"Medication Management",tasks:[{id:"081-000-0032",title:"Treat an Allergic Reaction"},{id:"081-000-0038",title:"Manage Intravenous Access"},{id:"081-000-0025",title:"Treat a Poisoned Casualty"},{id:"081-000-1006",title:"Administer Medication"},{id:"081-000-0056",title:"Prepare an Injection for Administration"},{id:"081-68W-0311",title:"Administer Tranexamic Acid"}]},{name:"Trauma Management",tasks:[{id:"081-000-0037",title:"Treat a Thoracic Injury"},{id:"081-000-1001",title:"Assess Patient Vital Signs"},{id:"081-68W-0075",title:"Perform Needle Decompression of the Chest"},{id:"081-68W-0081",title:"Treat a Casualty with an Inguinal Wound"},{id:"081-68W-0091",title:"Treat a Casualty with a Neck Wound"},{id:"081-68W-0092",title:"Apply a Junctional Tourniquet"},{id:"081-68W-0231",title:"Manage Shock"},{id:"081-000-0023",title:"Manage a Mild Traumatic Brain Injury"},{id:"081-000-0040",title:"Treat a Head Injury"},{id:"081-000-0049",title:"Perform a Combat Casualty Assessment"},{id:"081-68W-0079",title:"Treat a Casualty with an Axillary Wound"}]},{name:"Triage and Evacuation",tasks:[{id:"081-68W-0282",title:"Perform Casualty Movement"},{id:"081-68W-0298",title:"Transport a Casualty Using a Litter"},{id:"081-000-0055",title:"Perform Casualty Triage"},{id:"081-000-0070",title:"Establish a Casualty Collection Point"}]}]},{skillLevel:"Skill Level 1",subjectArea:[{name:"Airway Management",tasks:[{id:"081-000-0034",title:"Place an Oropharyngeal Airway"},{id:"081-000-0073",title:"Administer Oxygen"},{id:"081-68W-0236",title:"Perform End Tidal Carbon Dioxide Monitoring"},{id:"081-000-0125",title:"Maintain a Nasogastric Tube"},{id:"081-68W-0313",title:"Apply an Impedance Threshold Device"}]},{name:"Fluid Management",tasks:[{id:"081-000-0027",title:"Measure a Patient's Fluid Balance"},{id:"081-000-0124",title:"Maintain Urinary Catheter"},{id:"081-000-3054",title:"Administer Blood Products"},{id:"081-68W-3054",title:"Operate an Intravenous Infusion Pump"}]},{name:"Force Health Protection",tasks:[{id:"081-68W-0168",title:"Treat Dental Emergencies"},{id:"081-000-0075",title:"Perform Patient Hygiene"},{id:"081-68W-0169",title:"Perform Field Disinfection of Instruments"},{id:"081-000-0052",title:"Treat a Casualty for Insect Injury"},{id:"081-000-0053",title:"Treat a Snake Bite Casualty"},{id:"081-000-0054",title:"Manage a Patient Restraint"},{id:"081-000-0130",title:"Perform a Gastric Lavage"},{id:"081-000-0131",title:"Obtain an Electrocardiogram"},{id:"081-68W-0246",title:"Treat a Behavioral Emergency"}]},{name:"Medical Management",tasks:[{id:"081-68W-0060",title:"Manage Vaginal Delivery"},{id:"081-68W-0170",title:"Perform Point of Care Testing"},{id:"081-68W-0239",title:"Treat Abdominal Disorders"},{id:"081-68W-0240",title:"Treat Common Eye Infections"},{id:"081-68W-0241",title:"Treat Common Ear Disorders"},{id:"081-68W-0125",title:"Treat Skin Disorders"},{id:"081-68W-0245",title:"Treat Common Respiratory Disorders"},{id:"081-68W-0254",title:"Perform an Otolaryngology Exam"},{id:"081-68W-0258",title:"Apply Fluorescein to an Eye"},{id:"081-68W-0260",title:"Treat Dislocations"},{id:"081-68W-0263",title:"Apply a Rigid Splint"},{id:"081-68W-0271",title:"Perform a Back Examination"},{id:"081-68W-0272",title:"Perform an Ankle Examination"},{id:"081-68W-0273",title:"Perform a Wrist Examination"},{id:"081-68W-0274",title:"Perform a Hip Examination"},{id:"081-000-0103",title:"Treat Common Musculoskeletal Disorders"},{id:"081-000-1008",title:"Obtain Specimen Collection"},{id:"081-68W-0063",title:"Treat a Soft Tissue Injury"},{id:"081-68W-0166",title:"Prevent Deep Veinous Thrombosis"},{id:"081-68W-0242",title:"Treat Sinus Disorder"},{id:"081-000-0092",title:"Perform Visual Acuity Testing"},{id:"081-000-0026",title:"Treat a Diabetic Emergency"},{id:"081-000-0068",title:"Record Patient Care Using the Subjective, Objective, Assessment, Plan (SOAP) Note Format"},{id:"081-000-0076",title:"Place a Patient on a Cardiac Monitor"},{id:"081-000-0094",title:"Remove a Patient's Ring"},{id:"081-000-0163",title:"Establish a Sterile Field"},{id:"081-000-1031",title:"Perform a Wound Irrigation"},{id:"081-68W-0243",title:"Treat Common Throat Disorders"},{id:"081-68W-0268",title:"Perform a Knee Examination"},{id:"081-68W-0269",title:"Perform a Shoulder Examination"},{id:"081-68W-0270",title:"Perform an Elbow Examination"}]},{name:"Medication Management",tasks:[{id:"081-68W-3036",title:"Perform a Digital Block Anesthesia"},{id:"081-68W-3090",title:"Administer Local Anesthesia"},{id:"081-68W-0024",title:"Treat Paronychia"},{id:"081-68W-0035",title:"Treat a Patient for High Altitude Illness"}]},{name:"Trauma Management",tasks:[{id:"081-000-3006",title:"Manage a Chest Tube"},{id:"081-68W-0053",title:"Perform an Emergency Medical Technician Trauma Patient Assessment"},{id:"081-000-0127",title:"Treat an Open Abdominal Wound"},{id:"081-68W-0141",title:"Apply a Traction Splint"},{id:"081-68W-0265",title:"Apply a Sling and Swath"},{id:"081-000-0005",title:"Treat a Seizing Patient"},{id:"081-000-0044",title:"Treat a Casualty with Burns"},{id:"081-000-0048",title:"Replace an Extremity Tourniquet"},{id:"081-000-0051",title:"Manage a Minor Laceration"},{id:"081-000-0083",title:"Apply a Cervical Collar"},{id:"081-000-0107",title:"Treat Subungual Hematoma"},{id:"081-000-0110",title:"Apply an Elastic Bandage"},{id:"081-000-0111",title:"Treat a Pelvic Injury"},{id:"081-000-0112",title:"Manage a Suspected Spinal Injury"},{id:"081-68W-0020",title:"Treat Compartment Syndrome"},{id:"081-68W-0021",title:"Treat Crush Injury"},{id:"081-68W-0036",title:"Treat a Casualty with an Impaled Object"},{id:"081-68W-0040",title:"Treat Eye Injuries"}]},{name:"Triage and Evacuation",tasks:[{id:"071-334-4662",title:"Establish a Helicopter Landing Point"},{id:"081-000-0093",title:"Prepare an Aid Bag"},{id:"081-000-0151",title:"Load Casualties onto Nonstandard Vehicles"},{id:"081-000-0152",title:"Unload Casualties from Nonstandard Vehicles"},{id:"081-68W-0294",title:"Unload Patients from an Air Ambulance"},{id:"081-000-0088",title:"Establish an Ambulance Exchange Point"},{id:"081-000-1015",title:"Load Casualties onto Ground Ambulances"},{id:"081-000-1016",title:"Unload Casualties from Ground Ambulances"},{id:"081-68W-0293",title:"Load Patients on an Air Ambulance"},{id:"081-68W-0299",title:"Transport a Casualty Using a Modular Sled Based Rescue System or SKED Basic Rescue System"}]}]},{skillLevel:"Skill Level 2",subjectArea:[{name:"Force Health Protection",tasks:[{id:"081-000-1030",title:"Change a Sterile Dressing"},{id:"081-000-0095",title:"Remove a Toenail"},{id:"081-68W-2004",title:"Process an Infectious Sample"}]},{name:"Medical Management",tasks:[{id:"081-68W-2005",title:"Place an Orogastric Tube"},{id:"081-68W-2006",title:"Remove an Orogastric Tube"}]},{name:"Medication Management",tasks:[{id:"081-68W-0192",title:"Treat an Abscess"}]},{name:"Trauma Management",tasks:[{id:"081-68W-0171",title:"Perform a Focused Assessment with Sonography for Trauma Exam"}]},{name:"Triage and Evacuation",tasks:[{id:"081-68W-2003",title:"Manage a Combat Lifesaver Program"}]}]},{skillLevel:"Skill Level 3",subjectArea:[{name:"Airway Management",tasks:[{id:"081-68W-0100",title:"Place an Endotracheal Tube"}]},{name:"Force Health Protection",tasks:[{id:"081-68W-3008",title:"Manage a Team During Prolonged Care"},{id:"081-68W-3009",title:"Interpret Running Estimates Tracking"},{id:"081-68W-3012",title:"Manage a Unit's Medical Supply"},{id:"081-68W-3001",title:"Develop Annex F to Appendix 3 Medical Plan"}]},{name:"Medical Management",tasks:[{id:"081-000-3011",title:"Treat Life Threatening Cardiac Arrhythmias"}]},{name:"Trauma Management",tasks:[{id:"081-68W-1653",title:"Manage Canine Emergencies"}]},{name:"Triage and Evacuation",tasks:[{id:"081-000-3058",title:"Establish a Casualty Decontamination Station"},{id:"081-68W-3010",title:"Coordinate Evacuation Plans"}]}]}],Sp=[{text:"Medications",icon:"pill",action:"medications"},{text:"Import New Note",icon:"import",action:"import"},{text:"Settings",icon:"Settings",action:"Settings"}],ct=[{id:0,icon:"pg.67 b.(1)",text:"Per Provider Order, Administers And Records Appropriate Immunisations"},{id:1,icon:"pg.67(2)",text:"Administer Allergy Shots/Skin Testing"},{id:2,icon:"pg.67(3)(a)",text:"Administer Topical Ointment/Lotions"},{id:3,icon:"pg.67(3)(b)",text:"Administer Otic Medications"},{id:4,icon:"pg.67(3)( c)",text:"Administer Ophthalmic Medication"},{id:5,icon:"pg.67(3)(g)",text:"Administer Antiemetic"},{id:6,icon:"pg.67(3)(j)",text:"Administer Antihistamines"},{id:7,icon:"pg.67(k)",text:"All Medication Protocols Associated with 68W Training and Certifications"},{id:8,icon:"pg.68(5)",text:"Assists Privileged Provider To Perform Invasive Procedures"},{id:9,icon:"pg.68(7)",text:"Sets Up and Maintains A Sterile Field"},{id:10,icon:"pg.68(11)",text:"Perform Suturing"},{id:11,icon:"pg.68(13)",text:"Obtain a Throat Culture"},{id:12,icon:"pg.68(14)",text:"Removes Skin Warts On Extremities As Ordered"},{id:13,icon:"pg.68(k)",text:"All Medication Protocols Associated with 68W Training and Certifications"},{id:14,icon:"pg.69 (2)(d)",text:"Initial Management of Fractures/Spinal Injury"},{id:15,icon:"pg.69(2)(a)",text:"Initiate an Intravenous Infusion"},{id:16,icon:"pg.69(2)(c)",text:"Identifies, reports and Treats Hypovolemia"},{id:17,icon:"pg.69(2)(e)",text:"Initial Treatment of Environmental Injuries"},{id:18,icon:"pg.69(2)(f)",text:"Obtain Blood Glucose Levels"},{id:19,icon:"pg.69(2)(h)",text:"Provide Oxygen"},{id:20,icon:"pg.69(2)(i)",text:"Examines Eye Using Fluorescein Strip"},{id:21,icon:"pg.69-70(2)(k)",text:"Obtain Laboratory Specimens(urine for HcG)"},{id:22,icon:"pg.69-70 (2)(n)",text:"Gathers Sexually Transmitted Infection Specimen"},{id:23,icon:"pg.69-70(2)(k)",text:"Obtain Laboratory Specimens"},{id:24,icon:"pg.69-70(2)(o-p)",text:"Performs 12-lead Electrocardiogram"},{id:25,icon:"pg.70(k)",text:"Obtain Laboratory Specimen"},{id:26,icon:"pg.70(l)",text:"Perform Wound Care"},{id:27,icon:"pg.70(r)",text:"Assists With The Administration of Local Anesthesia"},{id:28,icon:"pg.70(s)",text:"Assists In Performing Digital Block Procedures"},{id:29,icon:"pg.70(t)",text:"Perform Toenail Removal"},{id:30,icon:"pg.70(2)(i)",text:"Perform Wound Care"}];function bN(){const r=new Map;for(const s of Kh)for(const l of s.subjectArea){r.has(l.name)||r.set(l.name,new Map);const c=r.get(l.name);for(const d of l.tasks)c.has(d.id)||c.set(d.id,d.title)}const i=[];let a=0;for(const[s,l]of r){const c=a,d=[];let f=0;for(const[m,g]of l)d.push({id:f,icon:m,text:g,isParent:!1,parentId:c}),f++;i.push({id:a,icon:s,text:s,isParent:!0,options:d}),a++}return i}const yN=bN();function pt(r){for(const i of yN){const a=i.options.find(s=>s.icon===r);if(a)return a}return{id:0,icon:r,text:r,isParent:!1,parentId:0}}const a1=[{id:1,icon:"A.",text:"EAR, NOSE, THROAT",isParent:!0,contents:[{id:1,icon:"A-1",text:"Sore Throat/Hoarseness ",gen:[{}],medcom:[ct[11]],stp:[pt("081-000-1001"),pt("081-68W-0254"),pt("081-000-1008")],redFlags:[{text:"SOB"},{text:"Stridor"},{text:"Deviated Uvula"},{text:"Drooling/ Trouble Swallowing"},{text:"Stiff Neck"}],DDX:[{text:"Viral Infections"},{text:"Bacterial Infection"},{text:"Meningitis"},{text:"Neck Deep Tissue Infection"},{text:"Candida infection"},{text:"Strep Throat"}]},{id:2,icon:"A-2",text:"Ear Pain/Drainage/Trauma",gen:[{}],medcom:[ct[3]],stp:[pt("081-68W-0254"),pt("081-68W-0241")],redFlags:[{text:"Stiff Neck AND Fever"},{text:"Posterior ear pain and/or mastoid erythema"}],DDX:[{text:"Otitis Media/Externa"},{text:"Eustachian tube dysfunction"},{text:"Nasopharyngeal pathology"},{text:"Deep space head/neck infections"},{text:"Meningitis"},{text:"Mastoiditis"},{text:"Ruptured Ear Drum"},{text:"TMJ Dysfunction"}]},{id:3,icon:"A-3",text:"Cold Symptoms /Allergies /Cough",gen:[{}],medcom:[ct[6],ct[1],ct[19]],stp:[pt("081-68W-0254"),pt("081-68W-0242"),pt("081-68W-0243"),pt("081-68W-0245")],redFlags:[{text:"Abnormal Vital Signs"},{text:"Shortness of Breath"},{text:"Stiff Neck"},{text:"Altered Mental Status"},{text:"Coughing up blood clots or frank blood"}],DDX:[{text:"Allergic or seasonal rhinitis"},{text:"Bacterial pharyngitis or tonsillitis"},{text:"Acute bacterial rhinosinusitis"},{text:"Influenza"},{text:"Pertussis"}]},{id:4,icon:"A-4",text:"Ringing in the Ears/Hearing Problems ",gen:[{}],medcom:[ct[3]],stp:[pt("081-68W-0254"),pt("081-68W-0241")],redFlags:[{text:"Altered Mental Status"},{text:"Focal Neurological Symptom or Sign"},{text:"Dizziness"}],DDX:[{text:"Cerumen Impaction"},{text:"Otitis Media"},{text:"Otosclerosis"},{text:"Ruptured Ear Drum"},{text:"Eustachian Tube Dysfunction"},{text:"Hearing Loss"},{text:"Disorders of the Jaw Joint"},{text:"Severe Anxiety"},{text:"Neck Injuries"}]},{id:5,icon:"A-5",text:"Nosebleed/Nose Trauma ",gen:[{}],medcom:[],stp:[pt("081-68W-0254")],redFlags:[{text:"Airway Compromise"},{text:"Orthostatic Hypotension"},{text:"Bleeding from Gums"},{text:"Inability to Move Eye"}],DDX:[{text:"Upper Respiratory Infections"},{text:"Allergic or Viral Rhinitis"},{text:"Trauma"},{text:"Bleeding Disorder"},{text:"Foreign Body"}]}]},{id:2,icon:"B.",text:"MUSCULOSKELETAL",isParent:!0,contents:[{id:1,icon:"B-1",text:"Back Pain",gen:[{}],medcom:[ct[14]],stp:[pt("081-000-0103")],redFlags:[{text:"Fever"},{text:"Saddle Anesthesia"},{text:"Urinary Retention/Incontinence"},{text:"Fecal Incontinence"},{text:"Motor Deficits"},{text:"Trauma with Vertebral Tenderness or Neuropathy"},{text:"Dysuria/Frequency"},{text:"Chest/Abdominal Pain"}],DDX:[{text:"Muscle Sprain/Strain"},{text:"Fracture"},{text:"Infection"},{text:"Renal Stone/UTI"},{text:"Arthritis"},{text:"Cauda Equina Syndrome"}]},{id:2,icon:"B-2",text:"Neck Pain",gen:[{}],medcom:[ct[14]],stp:[pt("081-000-0103"),pt("081-68W-0091"),pt("081-000-0083"),pt("081-000-0112")],redFlags:[{text:"Bony step off/midline tenderness to palpation"},{text:"Inability to flex neck"},{text:"Fever"},{text:"Recent HEENT or dental infection"}],DDX:[{text:"Muscle Strain"},{text:"Fracture"},{text:"Meningitis"},{text:"Flu"},{text:"Deep neck space infection"}]},{id:3,icon:"B-3",text:"Shoulder Pain",gen:[{text:"Anterolateral shoulder pain worsened by reaching overhead can be related to impingement syndrome, AC joint pathology, or rotator cuff injury. Posterior shoulder pain could be from rotator cuff injury, gallbladder, spleen, or neck."}],medcom:[ct[14]],stp:[pt("081-68W-0269"),pt("081-000-0103")],redFlags:[{text:"Distal Pulses Abnormal"},{text:"Distal Sensation Abnormal"},{text:"Deformity"},{text:"Cardiac Symptoms"}],DDX:[{text:"Tendon inflammation/tear"},{text:"Instability (dislocation)"},{text:"Arthritis"},{text:"Fracture"},{text:"Myocardial Infarction"}]},{id:4,icon:"B-4",text:"Elbow Pain",gen:[{}],medcom:[ct[14]],stp:[pt("081-68W-0270"),pt("081-000-0103")],redFlags:[{text:"Distal Pulses Abnormal"},{text:"Distal Sensation Abnormal"},{text:"Deformity"}],DDX:[{text:"Muscle Strain"},{text:"Fracture"},{text:"Dislocation"},{text:"Tendonitis"},{text:"Bursitis"}]},{id:5,icon:"B-5",text:"Wrist Pain",gen:[{text:"Wrist pain usually occurs from trauma or overuse. Falling on an outstretched hand can result in a scaphoid (falling forward) or lunate/ triquetrum (falling back) injury. Ulnar side of wrist may involve tendinopathy, triangular fibrocartilage complex injury, or fracture. Radial side of wrist may involve tendinopathy, ligamentous injury, or fracture. Dorsal pain may involve a wrist sprain or fracture. Volar pain may involve fracture, ganglion, or carpal tunnel syndrome."}],medcom:[ct[14]],stp:[pt("081-000-0103"),pt("081-68W-0273")],redFlags:[{text:"Distal Pulses Abnormal"},{text:"Distal Sensation Abnormal"},{text:"Deformity"},{text:"Open Fracture"}],DDX:[{text:"Fracture"},{text:"Carpal Tunnel"},{text:"Arthritis"},{text:"Bursitis"},{text:"Tendonitis"},{text:"Muscle Strain"}]},{id:6,icon:"B-6",text:"Hand Pain",gen:[{text:"Any deviation of the hand from normal function can result in significant disability. Hand and finger injury are common in Soldiers."}],medcom:[ct[14]],stp:[pt("081-000-0103"),pt("081-68W-0263"),pt("081-000-0110")],redFlags:[{text:"Abnormal Capillary Refill"},{text:"Abnormal Distal Sensation"},{text:"Palmar Infection"},{text:"Deformity"},{text:"Significant Burn"}],DDX:[{text:"Fracture/Dislocation"},{text:"Gout"},{text:"Carpal Tunnel Syndrome"},{text:"Arthritis"},{text:"Tendonitis"},{text:"Muscle Strain"}]},{id:7,icon:"B-7",text:"Hip Pain",gen:[{text:"Lateral pain worse with direct pressure may represent trochanteric bursitis. Anterior hip or groin pain may represent the hip joint injury, fracture (stress fracture), or non-hip issue like inguinal hernia. Femoral stress fractures are more common in initial entry training. They can result in permanent disability if not properly identified and treated."}],medcom:[ct[14]],stp:[pt("081-68W-0274"),pt("081-000-0103"),pt("081-000-0111")],redFlags:[{text:"Abnormal PMS"},{text:"Deformity"},{text:"High Energy Trauma"},{text:"Suspect Stress Fracture (increased with weight bearing or during exercise, endurance training, change in exercise routine)"},{text:"Severe Pain"}],DDX:[{text:"Arthritis"},{text:"Stress Fracture"},{text:"Trochanteric Bursitis"},{text:"Tendinitis"},{text:"Muscle Strain"},{text:"Hernia"},{text:"Referred Pain"}]},{id:8,icon:"B-8",text:"Knee Pain",gen:[{text:"Knee pain is a common complaint in Soldiers with a complex differential that includes evaluating for trauma, overuse, swelling, and referred pain."}],medcom:[ct[14]],stp:[pt("081-68W-0268"),pt("081-000-0103"),pt("081-68W-0263"),pt("081-000-0110")],redFlags:[{text:"Abnormal PMS"},{text:"Deformity"},{text:"High Energy Trauma"}],DDX:[{text:"Ligament or Cartilage Injury"},{text:"Arthritis"},{text:"Overuse Injury"},{text:"Infection/Inflammation"},{text:"Bursitis"}]},{id:9,icon:"B-9",text:"Ankle Pain",gen:[{text:"Ankle pain is a common complaint in Soldiers from overuse or trauma."}],medcom:[ct[14]],stp:[pt("081-68W-0272"),pt("081-000-0103"),pt("081-68W-0263"),pt("081-000-0110")],redFlags:[{text:"Abnormal Distal Pulse"},{text:"Abnormal Sensation"},{text:"Deformity"}],DDX:[{text:"Sprain/Strain"},{text:"Fracture"},{text:"Tendon Rupture"},{text:"Arthritis"},{text:"Bursitis"},{text:"Tendinopathy"}]},{id:10,icon:"B-10",text:"Foot Pain",gen:[{text:"Common anterior foot pains include around the big toe (bunion, sprain, arthritis, sesamoiditis, ingrown toenail, subungual hematoma) and below the 2nd and 3rd metatarsals (metatarsalgia, Mortons neuroma, and plantar wart)"}],medcom:[ct[14]],stp:[pt("081-000-0103"),pt("081-68W-0263"),pt("081-000-0110")],redFlags:[{text:"Abnormal Distal Pulse"},{text:"Abnormal Sensation"},{text:"Deformity"},{text:"Suspect Stress Fracture (increased with weight bearing or during exercise, endurance training, change in exercise routine)"}],DDX:[{text:"Injury"},{text:"Overuse"},{text:"Plantar Fasciitis"},{text:"Tarsal Tunnel Syndrome"},{text:"Achilles Tendinopathy"},{text:"Ingrown Toenail"},{text:"Bunion"}]},{id:11,icon:"B-11",text:"Extremity, Non-joint Pain",gen:[{text:""}],medcom:[ct[14]],stp:[pt("081-000-0103"),pt("081-000-0110")],redFlags:[{text:"Abnormal Distal Pulse"},{text:"Abnormal Sensation"},{text:"Deformity"},{text:"Cola Colored Urine"},{text:"Inability to Urinate"}],DDX:[{text:"Fracture"},{text:"Laceration"},{text:"Bruise"},{text:"Stress Reaction"}]}]},{id:3,icon:"C.",text:"GASTROINTESTINAL",isParent:!0,contents:[{id:1,icon:"C-1",text:"Nausea/Vomiting",gen:[{}],medcom:[ct[5],ct[23]],stp:[],redFlags:[{text:"Vomiting Blood or Coffee Grinds, Melena"},{text:"Neurologic Symptoms"},{text:"Chest Pain"},{text:"Abdominal Pain followed by Nausea"},{text:"Abdominal Distension"}],DDX:[{text:"Medication"},{text:"Infection"},{text:"Intense Pain"},{text:"Pregnancy"},{text:"Concussion"},{text:"Heartburn"}]},{id:2,icon:"C-2",text:"Diarrhea",gen:[{}],medcom:[ct[23]],stp:[pt("081-000-0025"),pt("081-68W-0239"),pt("081-000-0118")],redFlags:[{text:"Vomiting Blood or Coffee Grinds, Melena"},{text:"Severe abdominal pain"},{text:"Significant weight loss"}],DDX:[{text:"Food Intolerance"},{text:"Medication"},{text:"Infection (Viral/Bacterial)"},{text:"Dizziness"},{text:"Chest Pain"},{text:"Ear Pain"},{text:"Heartburn"}]},{id:3,icon:"C-3",text:"Abdominal and Flank Pain",gen:[{}],medcom:[ct[23]],stp:[pt("081-68W-0239")],redFlags:[{text:"Abnormal Vitals"},{text:"Abdominal rigidity/rebound (bump chair)"},{text:"Severe pain"},{text:"Fever with jaundice and RUQ pain"},{text:"Confirmed Pregnancy"},{text:"Alcoholism"},{text:"Immunocompromised"},{text:"RLQ Pain"}],DDX:[{text:"MI, AAA"},{text:"Appendicitis"},{text:"Pancreatitis, Hepatitis"},{text:"Heartburn"},{text:"Ectopic Pregnancy"},{text:"Testicular Torsion"},{text:"Pelvic Inflammatory Dis."}]},{id:4,icon:"C-4",text:"Rectal Pain/Itching/ Bleeding",gen:[{}],medcom:[],stp:[pt("081-68W-0239"),pt("081-000-1008")],redFlags:[{text:"Toilette FULL of Blood"},{text:"Vomiting Blood or Coffee Grinds"},{text:"Melena"},{text:"Lightheaded"}],DDX:[{text:"Gastrointestinal Bleed"},{text:"Hemorrhoid/Fissure"},{text:"IBD"},{text:"Infection"},{text:"Cancer"}]},{id:5,icon:"C-5",text:"Constipation",gen:[{}],medcom:[],stp:[pt("081-68W-0239")],redFlags:[{text:"Diarrhea at night"},{text:"Iron deficiency anemia"},{text:"Vomiting"}],DDX:[{text:"Obstruction"},{text:"Cancer"},{text:"Hypothyroidism"},{text:"Constipation"},{text:"Associated with Hemorrhoids"}]},{id:6,icon:"C-6",text:"Difficulty When Swallowing",gen:[{}],medcom:[ct[23]],stp:[pt("081-68W-0254")],redFlags:[{text:"Airway compromise"},{text:"Coughing, choking when swallowing"}],DDX:[{text:"Food bolus obstruction"},{text:"Esophagitis"},{text:"Ring, Web, Achalasia"},{text:"Throat Infection"}]},{id:7,icon:"C-7",text:"Heartburn",gen:[{}],medcom:[ct[24]],stp:[pt("081-000-0131"),pt("081-68W-0239")],redFlags:[{text:"Vomiting Blood or Coffee Grinds"},{text:"Melena"},{text:"Angina"},{text:"SOB"},{text:"Radiation to Back"}],DDX:[{text:"Gastroesophageal Reflux"},{text:"Myocardial Infarction"},{text:"Stomach/Duodenal Ulcer"},{text:"Cancer"},{text:"Pancreatitis"}]}]},{id:4,icon:"D.",text:"CARDIORESPIRATORY",isParent:!0,contents:[{id:1,icon:"D-1",text:"Shortness of Breath",gen:[{}],medcom:[ct[15],ct[19],ct[24]],stp:[pt("081-68W-0314"),pt("081-68W-0245")],redFlags:[{text:"Cyanosis"},{text:"Ancillary muscles"},{text:"SpO2<90%"},{text:"SIRS Criteria"},{text:"Airway Swelling"},{text:"Hives"},{text:"Altered Mental Status (AMS)"}],DDX:[{text:"Asthma"},{text:"Anxiety"},{text:"Myocardial Infarction"},{text:"Pulmonary Embolism"},{text:"Pneumonia, Bronchitis"},{text:"Deconditioning"}]},{id:2,icon:"D-2",text:"Chest Pain",gen:[{}],medcom:[ct[15],ct[19],ct[24]],stp:[pt("081-000-0131"),pt("081-000-0073")],redFlags:[{text:"Irregular Pulse"},{text:"H/O or FH of Heart Problems"},{text:"Shoulder, jaw pain or pressure"}],DDX:[{text:"Myocardial Infarction"},{text:"Pulmonary Embolism"},{text:"Pneumonia, Bronchitis"},{text:"Anxiety"},{text:"Heartburn"},{text:"Musculoskeletal"}]}]},{id:5,icon:"E.",text:"GENITOURINARY (GU)",isParent:!0,contents:[{id:1,icon:"E-1",text:"Painful/ Frequent Urination",gen:[{pg:{start:69,end:70},text:"Painful urination is most commonly a sign of a urinary tract infection, kidney stone, sexually transmitted infection, or yeast infection. Frequent urination can be associated with these but can also be one of the initial signs of hyperglycemia from diabetes. UA and urine culture should be completed if resources are available. A Soldier with symptoms consistent with a UTI can be empirically treated without a urinalysis after ruling out any history that would increase the Soldiers risk and determining any allergies to medications."}],medcom:[ct[23]],stp:[],redFlags:[{text:"Systemic Inflammatory Response Syndrome"},{text:"Flank Pain"},{text:"Severe Abdominal Pain"},{text:"Gross Hematuria or Passing Blood Clots"}],DDX:[{text:"Kidney Infection"},{text:"Urinary Tract Infection"},{text:"Kidney Stone"},{text:"Uncontrolled Diabetes"},{text:"BPH"},{text:"STI, Vaginitis"}]},{id:2,icon:"E-2",text:"Groin/ Testicular Pain or Urethral Discharge",gen:[{}],medcom:[ct[14],ct[23],ct[22]],stp:[],redFlags:[{text:"Pain with testes supported"},{text:"Suspect Stress Fracture (increased with weight bearing or during exercise, endurance training, change in exercise routine)"},{text:"Severe Pain"}],DDX:[{text:"Testicular Torsion"},{text:"Hernia"},{text:"Muscle/Tendon Strain"},{text:"Stress Fracture"},{text:"Hip injury"}]},{id:3,icon:"E-3",text:"Sexually Transmitted Infection (STI)",gen:[{pg:{start:73,end:74},text:"Soldiers frequently show concern that they may have (STIs); however, they seldom use that term. For screening purposes, focus on the symptom(s), or in the absence of symptoms, the belief that they may have been exposed to infections through sexual contact. Sexually transmitted infections include but are not limited to those traditionally classified as venereal diseases. Some are potentially life-threatening; others are not. Some infections can be cured through treatment; others cannot be cured at the present time. Sometimes symptomatic relief is available. All Soldiers, with or without symptom(s), need to be evaluated."}],medcom:[ct[23],ct[22]],stp:[pt("081-000-1008")],redFlags:[{text:"Female Pelvic Pain with Intercourse"},{text:"Pregnant"},{text:"Orthostatic, Fever"}],DDX:[{text:"Testicular Torsion"},{text:"Hernia"},{text:"Muscle/Tendon Strain"},{text:"Stress Fracture"},{text:"Hip injury"}]},{id:4,icon:"E-4",text:"Problems with Voiding",gen:[{pg:{start:75,end:76},text:"Problems with voiding may include urinary incontinence (voiding unintentionally), difficulty initiating the urinary stream, decreased force of the stream, dribbling urination, complete inability to void."}],medcom:[ct[23],ct[22]],stp:[pt("081-000-1008")],redFlags:[{text:"Inability to void x 12 hours"},{text:"Fever"},{text:"Cola Colored Urine"},{text:"Blood or Clots in Urine"}],DDX:[{text:"Urinary Obstruction"},{text:"Benign Prostatic Hypertrophy"},{text:"UTI, STI"},{text:"Stress Incontinence"}]}]},{id:6,icon:"F.",text:"NEUROPSYCHIATRIC",isParent:!0,contents:[{id:1,icon:"F-1",text:"Dizziness/Faintness/ Blackout ",gen:[{pg:{start:77,end:78},text:"It is useful to try and distinguish among different presentations of dizziness: faintness, blackouts, vertigo, confusion, malaise, muscle weakness, and other sensations. True vertigo refers to an illusion where the room seems to be spinning about or the floor seems to be moving. It may be likened to the feeling experienced immediately after getting off a fast merry-go-round and is often accompanied by nausea. Faintness or light-headedness is a feeling of unsteadiness or beginning to fall. Blackout refers to a complete loss of consciousness and observers should also be questioned about potential causes of the event and any unusual observations during the event"}],medcom:[ct[15],ct[17],ct[19],ct[24]],stp:[pt("081-000-0131"),pt("081-68W-0314"),pt("081-000-0016")],redFlags:[{text:"Abnormal Vital Signs"},{text:"Irregular Pulse"},{text:"Witnessed or H/O Seizure"},{text:"Severe Headache"},{text:"Heat Injury"}],DDX:[{text:"Orthostatic Hypotension"},{text:"Vasovagal Syncope"},{text:"Vertigo"},{text:"Anxiety"},{text:"Heart Arrhythmia"},{text:"Intracranial Bleed"},{text:"Seizure, Drugs, Alcohol"}]},{id:2,icon:"F-2",text:"Headache",gen:[{pg:{},text:"In the absence of fever, severe pain, or confusion, serious disease is extremely unlikely.Migraines often present with a gradual, increasing onset of a one sided, pulsatile moderate to severe headache worse with physical activity, noise, or light and associated with nausea and may have an aura. Tension-type headache often presents as a bilateral pressure that waxes and wanes lasting from 30 min to seven days. Cluster headache is rare. It presents with a rapid onset within minutes of unilateral deep, continuous severe pain around the eye or temple often associated with tearing, congestion, runny nose, pallor, or sweating."}],medcom:[],stp:[],redFlags:[{text:"Sudden Onset, Severe"},{text:"Focal Neurologic Signs"},{text:"Blown pupil"},{text:"Severe Hypertension"},{text:"Fever"},{text:"Vision Change/Loss"}],DDX:[{text:"Migraine Headache"},{text:"Tension Headache"},{text:"Caffeine Withdrawal"},{text:"Infection/Meningitis"},{text:"Intracranial Hemorrhage"}]},{id:3,icon:"F-3",text:"Numbness/Tingling/ Paralysis/Weakness ",gen:[{pg:{start:81,end:82},text:"Numbness may be used by the Soldier to describe muscle weakness, malaise, confusion, or abnormal sensation including tingling (a pins and needles sensation). Paralysis/weakness is a condition that refers to a loss of muscular strength resulting in difficulty or inability to move a body part. A complete loss of muscular strength is paralysis; a partial loss is weakness."}],medcom:[ct[18]],stp:[pt("081-68W-0170")],redFlags:[{text:"Localized to a Region or 1 sided"},{text:"Recent Trauma"},{text:"Loss of Consciousness"},{text:"Bowel/Bladder Incontinence"}],DDX:[{text:"Viral Syndrome/ Fatigue"},{text:"Stroke"},{text:"Nerve Compression"},{text:"Hypoglycemia"},{text:"Hyperventilation"},{text:"Depression"},{text:"Lyme disease"}]},{id:4,icon:"F-4",text:"Drowsiness/Confusion",gen:[{pg:{start:83,end:84},text:"Drowsiness and confusion are symptoms that may be observed even when the Soldier is relating other complaints. Drowsiness and confusion may be related to many underlying issues to include systemic illness, organ dysfunction, drug intoxication/ withdrawal, psychiatric illness, trauma, or neurologic illness."}],medcom:[ct[18],ct[19],ct[23]],stp:[pt("081-68W-0170"),pt("081-000-0073")],redFlags:[{text:"Abnormal Vital Signs"},{text:"Altered Mental Status"},{text:"Focal Neurological Deficit"},{text:"Recent Trauma"}],DDX:[{text:"Hypoglycemia"},{text:"Hypotension"},{text:"Hypoxia"},{text:"Concussion"},{text:"Infection"},{text:"Intoxication"}]},{id:5,icon:"F-5",text:"Depression/Nervousness/ Anxiety/Tension",gen:[{pg:{start:85,end:86},text:"The terms depression, nervousness, anxiety, tension and complaints of nerves or being upset may all be used by Soldiers to describe problems with mood. Complaints such as these are often due to situational or behavioral health factors, but may also be due to a physical condition. Everyone experiences emotional distress from time to time. However, when symptoms become continuous or interfere with daily functioning, or when suicidal or homicidal thoughts or self-harm are reported, the complaint must be taken seriously and further evaluated."}],medcom:[],stp:[pt("081-68W-0246")],redFlags:[{text:"Homicidal Intent or Attempt"},{text:"Suicide Intent or Attempt"},{text:"Self-injury"},{text:"Altered Mental Status"}],DDX:[{text:"Depression"},{text:"Anxiety"},{text:"Hypoxia"},{text:"Hypo/hyperthyroidism"},{text:"Substance intoxication or withdrawal"}]},{id:6,icon:"F-6",text:"Minor Traumatic Brain Injury",gen:[{}],medcom:[],stp:[pt("081-000-0023")],redFlags:[{text:"Deteriorating Level of Consciousness"},{text:"Double Vision"},{text:"Increased Restlessness, combative or agitated behavior"},{text:"Repeat vomiting"},{text:"Positive result from structural brain injury detection device (if available)"},{text:"Seizure"},{text:"Weakness or tingling in arms or legs"},{text:"Severe or worsening headache"},{text:"Abnormal Neuro Exam"},{text:"Battle sign, Raccoon eyes"},{text:"Suspected skull fracture"},{text:"Anticoagulant use"}],DDX:[{text:"Headache/migraine"},{text:"Concussion"},{text:"Intracerebral Hemorrhage"},{text:"Anxiety"},{text:"Stroke"},{text:"Spinal cord injury"},{text:"Seizure"},{text:"Dehydration"}]}]},{id:7,icon:"G.",text:"CONSTITUTIONAL",isParent:!0,contents:[{id:1,icon:"G-1",text:"Fatigue",gen:[{}],medcom:[],stp:[],redFlags:[{text:"Suicide Ideation"},{text:"Homicide Ideation"},{text:"Shortness of Breath"},{text:"Stiff Neck"},{text:"Melena"}],DDX:[{text:"Sleep Debt"},{text:"Sleep Apnea"},{text:"Anemia"},{text:"Anxiety Disorders"},{text:"Chronic Infection/Inflammation"},{text:"Chronic fatigue syndrome"},{text:"Acute liver failure"}]},{id:2,icon:"G-2",text:"Fever/Chills",gen:[{}],medcom:[],stp:[],redFlags:[{text:"Heat Injury"},{text:"Stiff Neck"},{text:"Light sensitivity"},{text:"Pregnant"},{text:"Seizure"},{text:"Lightheaded"}],DDX:[{text:"Malaise"},{text:"Cold Symptoms"},{text:"Sore Throat, Ear Pain"},{text:"Heat/Cold Injury"},{text:"Diarrhea"},{text:"Pain with urination"}]}]},{id:8,icon:"H.",text:"EYE",isParent:!0,contents:[{id:1,icon:"H-1",text:"Eye Pain/ Redness/ Discharge/ Itching/ Injury",gen:[{text:"Eye pain, redness, discharge, itching, and injury includes trauma to common inflammatory and infectious conditions."}],medcom:[ct[4],ct[20]],stp:[pt("081-68W-0040")],redFlags:[{text:"Fixed, Abnormal Pupil"},{text:"Visual Acuity Change"},{text:"Observed Foreign Body"},{text:"Penetration, Rupture"},{text:"Chemical Exposure"},{text:"Fluid Level over Iris, Pupil"}],DDX:[{text:"Blepharitis"},{text:"Allergies"},{text:"Conjunctivitis"},{text:"Corneal Abrasion/Trauma"},{text:"Subconjunctival Hemorrhage"},{text:"Keratitis/Iritis"}]},{id:2,icon:"H-2",text:"Eyelid Problem",gen:[{text:"Eyelid problems include serious effects of trauma to simple conditions of inflammation."}],medcom:[ct[4]],stp:[pt("081-68W-0040")],redFlags:[{text:"Open Globe"},{text:"High Risk Laceration"},{text:"Decreased Visual Acuity"},{text:"Double Vision"}],DDX:[{text:"Stye, Blepharitis"},{text:"Dermatitis"},{text:"Infection"},{text:"Eyelid laceration"}]},{id:3,icon:"H-3",text:"Decreased Vision, Seeing Spots, Request for Glasses",gen:[{text:"Decreased vision can mean that images are less distinct or that a portion of the visual field is blacked out. The Soldier may refer to the spots as stars, flashes, or floaters."}],medcom:[ct[14]],stp:[pt("081-000-0092"),pt("081-000-0083")],redFlags:[{text:"Trauma"},{text:"Recent Surgery"},{text:"Chemical Exposure"},{text:"Fluid Level over Iris, Pupil"},{text:"Neurologic Deficits"}],DDX:[{text:"Trauma"},{text:"Migraine"},{text:"Hemorrhage"},{text:"Infection"},{text:"Ischemia, Stroke"}]},{id:4,icon:"H-4",text:"Seeing Double (Diplopia)",gen:[{text:"Double vision means seeing two images of a single object."}],medcom:[ct[14]],stp:[pt("081-000-0092"),pt("081-000-0083")],redFlags:[{text:"Trauma"},{text:"Neurologic Deficits"}],DDX:[{text:"Intoxication"},{text:"Prescription Eyeglasses"},{text:"Muscle Weakness"},{text:"Trauma"}]}]},{id:9,icon:"I.",text:"GYNECOLOGICAL",isParent:!0,contents:[{id:1,icon:"I-1",text:"Breast Problems",gen:[{text:"Breast pain can represent musculoskeletal pain, cyclic pain, or pain associated with inflammation or infection. It is rarely associated with cancer."}],medcom:[],stp:[],redFlags:[{text:"Skin Changes"},{text:"Mass"},{text:"Bloody Nipple Discharge"}],DDX:[{text:"Cyclical Breast Pain"},{text:"Musculoskeletal Issue"},{text:"Large Breasts"},{text:"Mastitis, Abscess"},{text:"Cancer"}]},{id:2,icon:"I-2",text:"Suspects Pregnancy",gen:[{text:"Women who believe that their menstrual cycles are late should be evaluated with a pregnancy test. Urine human chorionic gonadotrophin (hCG) tests have improved over the years and provide results much quicker than in the past. A urine hCG obtained greater than seven to eight days after conception should be positive."}],medcom:[ct[23]],stp:[],redFlags:[{text:"Positive hCG AND"},{text:"Pelvic Pain"},{text:"H/O Ectopic Pregnancy"},{text:"Vaginal Bleeding"}],DDX:[{text:"Irregular Menstrual Cycle"},{text:"Pregnancy"}]},{id:3,icon:"I-3",text:"Menstrual Problems, Vaginal Bleeding",gen:[{text:"This protocol is meant to cover menstrual difficulties and vaginal bleeding. If the problems are missed periods (possible pregnancy), vaginal discharge, or abdominal pain, screen according to the appropriate protocol."}],medcom:[ct[23]],stp:[],redFlags:[{text:"Sexual Assault"},{text:"Trauma"},{text:"Severe Pain"},{text:"Pregnant"}],DDX:[{text:"Heavy Menstrual Cycle"},{text:"Irregular Menstrual Cycle"},{text:"Birth Control Side Effect"},{text:"Miscarriage"},{text:"Ectopic Pregnancy"}]},{id:4,icon:"I-4",text:"Vaginal Discharge, Itching, Irritation, or Pain",gen:[{text:"This protocol is meant to cover the majority of vaginal complaints not related to bleeding or a menstrual cycle. If a Soldier has external or vaginal discomfort along with symptoms suggesting a urinary tract infection (frequency, urgency, and internal dysuria), she should be screened as Painful Urination (Dysuria)/Frequent Urination, E-1."}],medcom:[ct[23]],stp:[],redFlags:[{text:"Fever"},{text:"Pregnant"},{text:"Non-midline Pelvic Pain"},{text:"Pain with Intercourse"}],DDX:[{text:"Bacterial Vaginosis"},{text:"Yeast Infection"},{text:"Trichomonas"},{text:"Pelvic Inflammatory Disease"},{text:"STI"}]},{id:5,icon:"I-5",text:"Request for PAP or Routine Pelvic Examination ",gen:[{text:"A Pap test is a microscopic examination of cells to detect the presence of pre-cancerous or cancerous process."}],medcom:[ct[23]],stp:[],redFlags:[],DDX:[]},{id:6,icon:"I-6",text:"Request for Information on Contraception",gen:[{text:"Contraception provides prevention of unintended pregnancy. There are many different types of contraception depending on the Soldiers goals."}],medcom:[ct[23]],stp:[],redFlags:[],DDX:[]}]},{id:10,icon:"J.",text:"DERMATOLOGICAL",isParent:!0,contents:[{id:1,icon:"J-1",text:"Unknown Cause of Skin Disorder",gen:[{text:"If the cause of the condition is unknown to the Soldier, this first protocol provides the category/level of care indicated by the Soldiers symptoms"}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Airway Compromise/Swelling"}],DDX:[{text:"Eczema"},{text:"Hives"},{text:"Contact Dermatitis"},{text:"Athlete's Foot"},{text:"Heat Rash"},{text:"Drug Reaction"}]},{id:2,icon:"J-2",text:"Acne",gen:[{text:"Acne is caused by plugged oil glands. The oily material may form a whitehead or develop a dark colored blackhead when exposed to the air. Pimples develop when these plugged glands become inflamed, and bacteria begin breaking down the oil-producing irritating substances as by-products. Acne is a common condition occurring primarily in the late teens and early twenties. Acne may be extremely upsetting to the young Soldier. The seriousness of this condition or its importance to the Soldier must not be underestimated. With proper treatment, acne can be improved thus avoiding scarring"}],medcom:[ct[2],ct[21]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[],DDX:[{text:"Acne Vulgaris"},{text:"Pseudofolliculitis Barbae"},{text:"Folliculitis"},{text:"Acne Rosacea"},{text:"Hyperandrogenism"}]},{id:3,icon:"J-3",text:"Shaving-Pseudofolliculitis Barbae (Ingrown Hairs)",gen:[{}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Facial Cellulitis"}],DDX:[{text:"Acne"},{text:"Pseudofolliculitis Barbae"},{text:"Folliculitis"},{text:"Tinea Barbae"},{text:"Acne Keloidalis Nuchae"}]},{id:4,icon:"J-4",text:"Dandruff (Scaling of the Scalp)",gen:[{text:"Dandruff, which is also known as pityriasis sicca, is the mildest and most common form of scalp seborrheic dermatitis. White scales or flakes on the head or hair with mild itching are the most common symptoms."}],medcom:[],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Scaling with Visible Inflammation"},{text:"Abnormal Sensation"},{text:"Painful Erosions"}],DDX:[{text:"Pemphigus Foliaceous"},{text:"Tinea Capitis"},{text:"Psoriasis"},{text:"Allergic Contact Dermatitis"},{text:"Seborrheic Dermatitis"}]},{id:5,icon:"J-5",text:"Hair Loss",gen:[{text:"While most hair loss is natural and hereditary, any hair loss that is sudden or extreme in nature may have resulted from a fungal infection or other forms of illness or as a result of using certain medications. When treated promptly and properly, hair growth typically resumes."}],medcom:[],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[],DDX:[{text:"Alopecia"},{text:"Traction Hair Loss"},{text:"Alopecia Areata"},{text:"Tinea Capitis"},{text:"Acne Keloidalis Nuchae"}]},{id:6,icon:"J-6",text:"Athlete's Foot (Tinea Pedis)",gen:[{text:"Tinea pedis (athlete's foot) most commonly occurs with frequently wearing damp socks and/ or tight fitting shoes.It is contagious and can be spread by contact with an infected person or contaminated surface."}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Diabetic Soldiers"},{text:"Significant erosions/ulcerations or malodor in affected area"},{text:"Soldiers w/weakened immune systems"}],DDX:[{text:"Interdigital tinea pedis"},{text:"Hyperkeratotic (moccasin-type) tinea pedis"},{text:"Vesiculobullous (Inflammatory) tinea pedis"}]},{id:7,icon:"J-7",text:"Jock Itch (Tinea Cruris)",gen:[{text:"Tinea cruris (also known as jock itch) is a dermatophyte infection involving the crural (superior medial portion of the thigh) fold. The spreading of tinea pedis is often the cause for these infections. Infection may spread to the perineum and perianal areas, into the gluteal cleft, or onto the buttocks."}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Diabetes"},{text:"Immunodeficiency"}],DDX:[{text:"Inverse psoriasis"},{text:"Erythrasma"},{text:"Seborrheic dermatitis"},{text:"Candidal intertrigo"}]},{id:8,icon:"J-8",text:"Scaling, Depigmented Spots (Tinea Versicolor)",gen:[{text:"Tinea versicolor is a common superficial fungal infection that appears as spots (lighter, darker, or redder than surrounding skin) on the neck, chest, back, and arms usually with no other symptoms. The rash is typically scaly and painless. It may be noticed in the summer when affected areas fail to tan after sun exposure."}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[],DDX:[{text:"Seborrheic dermatitis"},{text:"Tinea corporis"},{text:"Vitiligo"},{text:"Secondary syphilis"}]},{id:9,icon:"J-9",text:"Boils",gen:[{text:"A boil is usually caused by bacteria that enters through a hair follicle. A painful nodule enclosing a core of pus forms in the skin. Tenderness, warmth, swelling, and firm area, and pain may be present around the area of inflammation. An extremely large boil or numerous boils can produce fever. Boils are also known as furuncles if they have single cores or carbuncles if they have multiple cores."}],medcom:[],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Location over Tailbone"},{text:"SIRS Criteria"},{text:"Worsening on Antibiotics"},{text:"Palm of Hand"},{text:"Over Joint"},{text:"Black Eschar"}],DDX:[{text:"Folliculitis"},{text:"Abscess"},{text:"Epidermal Cyst"},{text:"Hidradenitis Suppurativa"},{text:"Septic Joint"}]},{id:10,icon:"J-10",text:"Fever Blisters (Cold Sores)",gen:[{text:"Fever blisters result from an acute viral infection that frequently occurs around the mouth or on the lips. Fever blisters usually occur with multiple vesicular lesions on an erythematous base. Lesions can be painful and last for 10-14 days. Initial infection can be associated with systemic symptoms, like fever and malaise. Viral infection resides in the nerve cells after the initial infection and can reoccur when the body is under stress. Re-emergence of the cold sores is often preceded by prodromal symptoms of pain, burning, tingling, or itching for six hours to 2.5 days. Cold sores are contagious and spread through contact."}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Eye Pain"}],DDX:[{text:"Cold Sore"},{text:"Aphthous Ulcer"},{text:"Epstein-Barr Virus"},{text:"Syphilis"}]},{id:11,icon:"J-11",text:"Skin Abrasion/Laceration",gen:[{text:"Skin abrasions are caused when the skin is rubbed raw such as when a knee or elbow is scraped. While this type of injury is painful, it normally requires only minor treatment."}],medcom:[ct[2],ct[26]],stp:[pt("081-68W-0063")],redFlags:[{text:"SIRS Criteria"},{text:"Animal Bite, Scratch"}],DDX:[{text:"Abrasion"},{text:"Laceration"}]},{id:12,icon:"J-12",text:"Suture Removal",gen:[{text:"Sutures should be removed after the skin edges have started to heal together. If sutures are left in too long, it can result in increased scar formation. If sutures are removed too early, the wound can reopen or pull apart at the edges resulting in a larger scar."}],medcom:[ct[2],ct[8],ct[9],ct[10],ct[26]],stp:[pt("081-000-0051")],redFlags:[{text:"Fever"},{text:"Pus/redness/swelling"}],DDX:[]},{id:13,icon:"J-13",text:"Drug Rash, Contact Dermatitis",gen:[{text:"Drugs can cause an acute rash of small red spots over the entire body in individuals who are sensitivity to them, like antibiotics or sulfonamides. Contact dermatitis results when the skin comes in contact with anything in the environment that causes an inflammatory reaction, like shoe materials, watchbands, earrings, and poison ivy. Contact area can present with burning, itching, redness, and fissures or vesicles. Poison ivy is the most common example of this group and related to an oil in the plants leaves. Symptoms usually develop within 24 to 48 hours of contact."}],medcom:[ct[2]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Airway Swelling"},{text:"Wheezing"},{text:"Anaphylaxis"}],DDX:[{text:"Hives"},{text:"Contact Dermatitis"},{text:"Viral Exanthem"},{text:"Drug Rash"}]},{id:14,icon:"J-14",text:"Burns/Sunburn",gen:[{text:"A burn is defined as any injury to the outer layer of skin or deeper tissue caused by heat, chemicals, or electricity. Minor burns are characterized by redness, pain, and tenderness. More severe burns may not have these symptoms. Sunburn is generalized redness of the skin produced by overexposure to sunlight. Sunburns should be avoided due to repeat occurrences increasing the risk of permanent injury to the skin and increased risk of skin cancer."}],medcom:[ct[2],ct[17]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[{text:"Trouble Breathing"},{text:"AMS, Drowsy"},{text:"High Risk Location"},{text:"Circumferential Burn"}],DDX:[{text:"Burn"},{text:"Irritant Contact Dermatitis"}]},{id:15,icon:"J-15",text:"Friction Blisters on Feet",gen:[{text:"Friction blisters are common and should be treated to prevent complications."}],medcom:[ct[2],ct[8],ct[9],ct[30]],stp:[pt("081-000-1006")],redFlags:[{text:"Fever/malaise"},{text:"Epidermal sloughing"}],DDX:[{text:"Corn"},{text:"Stephen Johnson Syndrome"},{text:"Staphylococcal scalded skin syndrome"}]},{id:16,icon:"J-16",text:"Corns on Feet",gen:[{text:"A callus is a thickened outermost layer of skin from repeated friction or pressure. A corn has a centralized hyperkeratoic area that is often painful on the sole of the foot or toe. Tenderness occurs especially during weight-bearing on the foot."}],medcom:[ct[13],ct[8],ct[9],ct[26]],stp:[pt("081-68W-0125")],redFlags:[],DDX:[{text:"Callus"},{text:"Plantar Wart"},{text:"Corn"},{text:"Bunion"}]},{id:17,icon:"J-17",text:"Cutaneous (Plantar) Warts",gen:[{text:"cutaneous wart is a benign growth of skin caused by a virus. Common and plantar warts often have thrombosed capillaries within them that look like black dots or seeds."}],medcom:[ct[7],ct[8],ct[9],ct[12],ct[26]],stp:[pt("081-68W-0125")],redFlags:[],DDX:[{text:"Cutaneous Wart"},{text:"Corn"},{text:"Callous"},{text:"Skin Cancer"}]},{id:18,icon:"J-18",text:"Ingrown Toenail",gen:[{text:"An ingrown toenail is a nail that extends into the flesh of the toe along its lateral margins (nail fold). It can range from inflammation and tenderness to a significant infection."}],medcom:[ct[2],ct[13],ct[8],ct[9],ct[26],ct[27],ct[28],ct[29]],stp:[],redFlags:[{text:"Red Streaks up Foot"},{text:"Gangrene"},{text:"Black Eschar"}],DDX:[{text:"Paronychia"},{text:"Ingrown Toenail"},{text:"Trauma"},{text:"Cellulitis"}]}]},{id:11,icon:"K.",text:"ENVIRONMENTAL",isParent:!0,contents:[{id:1,icon:"K-1",text:"Exertional Heat Illness/ Hyperthermia",gen:[{text:"Heat injury results from an excessive loss of water and salt from the body or a breakdown of the bodys cooling mechanism. Risks include inadequate acclimatization, illness, blood donation, poor physical fitness, obesity, using drugs such as antihistamines (Benadryl, Atarax, CTM), decongestants (Sudafed), high blood pressure (diuretics, beta blockers) and psychiatrics (tricyclic antidepressants, antipsychotics)."}],medcom:[ct[13],ct[15],ct[17]],stp:[pt("081-000-0016")],redFlags:[{text:"Altered mental status"},{text:"Abnormal vital signs"}],DDX:[{text:"Heatstroke"},{text:"Heat Cramps"},{text:"Heat Exhaustion"},{text:"Fever/ Infection"},{text:"Dehydration"},{text:"Hyperthyroidism"}]},{id:2,icon:"K-2",text:"Hypothermia",gen:[{text:"Hypothermia, or a lower than normal body temperature, can be the result of heat loss from exposure to cold or wet environments, inadequate heat production due to poor nutrition or exhaustion, or inaccurate heat regulation from using drugs such as nicotine, alcohol, and medications with anticholinergic side effects."}],medcom:[ct[13],ct[15],ct[16],ct[17]],stp:[pt("081-000-0017")],redFlags:[{text:"T<96 degrees F"},{text:"Altered Mental Status"},{text:"Abnormal Vital Signs"},{text:"Frostbite"},{text:"Trauma"}],DDX:[{text:"Environmental Exposure"},{text:"Exhaustion and Malnutrition"},{text:"Hypothyroidism"},{text:"Sepsis"}]},{id:3,icon:"K-3",text:"Immersion Foot",gen:[{text:"Immersion foot usually results when the skin is exposed to wet, cold foot gear or from immersion at temperatures from 32F to 59F for over two to three days (nonfreezing cold injury (NFCI) or immersion foot). NFCI can result in an infection acutely or cold intolerance and pain syndromes chronically. Prolonged exposure to wet environments at temperatures greater than 59F (jungle foot) can also result in acute pain or injury but typically do not cause chronic issues. Presentation is with a white, wrinkled, numb, painless extremity. After warmed, it becomes a mottled pale blue with delayed capillary refill and start of swelling (hours to days). Progresses to a red, swollen painful extremity with blisters in areas of tissue damage (days to weeks). Can remain sensitive to cold, painful to cold, cool to touch, excessive sweating, or painful for weeks to years."}],medcom:[ct[13],ct[15],ct[16],ct[17]],stp:[pt("081-000-0017")],redFlags:[{text:"Gangrene/Necrosis"},{text:"Hemorrhagic Blisters"},{text:"Hypothermia"},{text:"Frostbite"},{text:"Trauma"}],DDX:[{text:"Nonfreezing Cold Injury"},{text:"Cold Urticaria"},{text:"Raynaud Phenomenon"},{text:"Frostbite"}]},{id:4,icon:"K-4",text:"Chapped Skin/Windburn",gen:[{text:"Chapping is the unusually rapid drying of skin due to exposure to a hot or cold dry wind which draws water out of the skin. Generally, it is not a medical problem unless cracking or fissuring with a secondary infection takes place. The involved skin heals as new skin cells develop."}],medcom:[ct[13],ct[17]],stp:[],redFlags:[],DDX:[]},{id:5,icon:"K-5",text:"Frostbite",gen:[{text:"Frostbite results from the skin (usually on the toes, fingers, or face) being exposed to extreme cold for an extended period of time. Lower temperatures and high winds result in shorter times to injury. Immediate evaluation is required."}],medcom:[],stp:[],redFlags:[],DDX:[]},{id:6,icon:"K-6",text:"Crabs/Lice (Pediculosis) ",gen:[{text:"Crabs/lice are tiny insects that are visible to the naked eye that infest the hairy areas of the body (groin, body hair, and scalp). The insect deposits eggs (nits) and attaches them at the bases of hair shafts. The lice require a diet of human blood and will die within three days after removal from the body. The possibility of spreading infection to close associates by intimate contact or common use of clothing, beds, or toilet articles is real."}],medcom:[ct[2],ct[13]],stp:[pt("081-68W-0125"),pt("081-000-1006")],redFlags:[],DDX:[{text:"Lice"},{text:"Scabies"},{text:"Contact Dermatitis"},{text:"Fungal Infection"},{text:"Hair Casts"}]},{id:7,icon:"K-7",text:"Insect Bites (Not Crabs/Lice)",gen:[{text:"Insect bites are characterized by itching, local swelling, mild pain, and redness. All of these reactions represent a local reaction to the sting of the insect. Document any history of tick bites and include the location of the bite."}],medcom:[ct[2],ct[13]],stp:[pt("081-000-0017")],redFlags:[{text:"Swelling of Lips or Tongue"},{text:"Trouble Breathing"},{text:"Abnormal Vital Signs"}],DDX:[{text:"Insect Bite"},{text:"Skin Infection"},{text:"Contact Dermatitis"}]}]},{id:12,icon:"L.",text:"MISCELLANEOUS",isParent:!0,contents:[{id:1,icon:"L-1",text:"Exposed to Hepatitis or HIV",gen:[{text:"This protocol is to be used in locations where a local policy is not already in place for the screening of potential HIV or Hepatitis exposures."}],medcom:[],stp:[],redFlags:[{text:"Known Infection"},{text:"High Risk Contact"}],DDX:[{text:"Low Risk Exposure"},{text:"High Risk Exposure"}]},{id:2,icon:"L-2",text:"Dental Problems",gen:[{text:"Problems with the teeth are usually self-evident. Symptom of dental pain may be a result of a non-dental source such as myofascial inflammation, migraine headache, maxillary sinusitis, ear issues, temporomandibular joint pain, or nerve pain. Always inquire about other complaints before referring the Soldier to a dentist."}],medcom:[ct[13]],stp:[],redFlags:[{text:"Exposed Pulp"},{text:"Avulsed Tooth"},{text:"Severe Pain"},{text:"Trauma"},{text:"Chest Pain, SOB"}],DDX:[{text:"Tooth Cavity"},{text:"Poor Dental Hygiene"},{text:"Temporomandibular Joint Pain"},{text:"Infection"},{text:"Heart Attack"}]},{id:3,icon:"L-3",text:"Sores in the Mouth",gen:[{text:"Sores in the mouth are usually inflammatory or ulcerative in nature and may be associated with many upper respiratory infections or may result from trauma. Refer Soldiers with sores in the mouth to Category III care."}],medcom:[ct[13]],stp:[],redFlags:[{text:"Diffuse"},{text:"Bloody Diarrhea"}],DDX:[{text:"Aphthous Ulcers"},{text:"Herpes Simplex Virus"},{text:"Hand, Foot, and Mouth Disease"},{text:"Stevens Johnson Syndrome"}]},{id:4,icon:"L-4",text:"Prescription Refill",gen:[{text:"Use this protocol for all prescription refills except birth control pills. Birth control is screened under I-6, Request for Information on Contraception. Some Soldiers request a refill of medication prescribed for an acute illness. Soldiers are normally given enough medication initially to cover the anticipated period of illness. If the Soldier wants additional medication, the illness may not be responding to the treatment as expected. In this case, the Soldier needs to be rescreened by his complaints. The only exception would be the Soldier who lost his original prescription."}],medcom:[],stp:[],redFlags:[],DDX:[]},{id:5,icon:"L-5",text:"Requests a Vasectomy",gen:[{text:"Counseling should be provided to the Soldier prior to scheduling an appointment with the PCM or placing a Secure Message or T-con for a referral. Counseling should include a discussion on contraception, brief overview of the procedure, and emphasis on the permanent nature of the procedure. Vasectomy is an outpatient procedure. It is often performed in an office or procedure room with local anesthesia and a sedating medication to help the Soldier relax. The skin of the scrotum is cut or punctured, a section of the vas deferens is removed, and the vas deferens ends are closed. After the procedure, the Soldier rests for two to four days with support of the scrotum and application of an ice pack to the area. Soldier doesnt return to full duty for about two weeks. A vasectomy is a permanent method of birth control. Reversal of the procedure is only about 50% effective and decreases with time. A vasectomy is not effective until after all of the sperm have been removed from the system. Lack of sperm needs to be confirmed by a lab test around three months after the procedure. Alternate birth control will need to be used until the lack of sperm is confirmed. Pregnancy can still occur after vasectomy in 2% of people. Condoms are required to protect from STIs if not in a committed monogamous relationship."}],medcom:[],stp:[],redFlags:[],DDX:[]},{id:6,icon:"L-6",text:"Needs an Immunization",gen:[{}],medcom:[ct[0]],stp:[],redFlags:[],DDX:[]},{id:7,icon:"L-7",text:"Lymph Node Enlargement",gen:[{text:"Enlarged lymph nodes are most commonly found in the neck, armpits, and groin and are locations where the body fights infection. A lymph node enlargement may result from an infection/inflammation in the area of the body drained by the node or from a systemic illness. In the former case, the enlarged nodes are likely to be confined to that area. In the latter case, lymph nodes in several areas of the body may be involved."}],medcom:[],stp:[],redFlags:[],DDX:[]},{id:8,icon:"L-8",text:"Blood Pressure Check",gen:[{text:"Systolic blood pressure is the top number which is the pressure in the blood vessels when the heart is pumping blood to the body. Diastolic blood pressure is the bottom number which is the pressure in the blood vessels when the heart is filling with blood between pumps. A normal blood pressure is less than 120/70. Blood pressure can result in medical problems when it is elevated over a long period of time. It can also result in acute problems when it is very low or very high."}],medcom:[],stp:[pt("081-000-1001")],redFlags:[],DDX:[]},{id:9,icon:"L-9",text:"Medical Screening for Overseas PCS",gen:[{text:"Soldiers on orders for overseas assignments require review of their medical records to determine if they have medical conditions that would preclude the assignment and to ensure their medical readiness is current. Record review should look for behavioral health appointments, specialty care appointments, e-Profile (non-deployable profile), deployment health assessments due, pregnancy status, and MEDPROS data. MEDPROS includes hearing, dental, immunizations, HIV screen, vision screen, and PHA."}],medcom:[],stp:[],redFlags:[],DDX:[]},{id:10,icon:"L-10",text:"Weight Reduction",gen:[{text:"Individuals who come on sick call requesting assistance with weight control or diet therapy to reduce their weight should be seen by a dietitian if there are no medical problems that require evaluation."}],medcom:[ct[25]],stp:[],redFlags:[],DDX:[]},{id:11,icon:"L-11",text:"Complaint Not on the List",gen:[{text:"Any Soldier with a complaint not covered in this screening manual requires further evaluation"}],medcom:[],stp:[pt("081-000-1001")],redFlags:[],DDX:[]},{id:12,icon:"L-12",text:"Request for Nonprescription or Traveling Medication",gen:[{text:"This protocol refers to Soldiers requesting specific nonprescription medications for minor-care."}],medcom:[ct[13]],stp:[pt("081-000-1001")],redFlags:[],DDX:[]},{id:13,icon:"L-13",text:"Coronavirus (COVID-19)",gen:[{text:"If his/her complaint can be screened by another protocol, use that protocol."}],medcom:[],stp:[pt("081-833-0245")],redFlags:[{text:"Abnormal Vital Signs/Fever > 101F"},{text:"Shortness of Breath"},{text:"Cough with or without blood clots or frank blood"},{text:"Stiff neck"},{text:"Altered mental status"},{text:"Cyanosis"},{text:"Ancillary muscle use"},{text:"SIRS criteria"},{text:"Airway Swelling"},{text:"Hives"},{text:"heat injury"},{text:"light sensitivity"},{text:"pregnant"},{text:"Seizure"},{text:"Lightheaded"}],DDX:[{text:"influenza"},{text:"Pneumonia"},{text:"acute bacterial rhinosinusitis"},{text:"bacterial pharyngitis or tonsillitis"},{text:"allergic or seasonal rhinitis"},{text:"heat/cold injury"},{text:"asthma"},{text:"anxiety"},{text:"pulmonary embolism"},{text:"bronchitis"},{text:"deconditioning"}]}]},{id:13,icon:"M.",text:"MISCELLANEOUS RETURN",isParent:!0,contents:[{id:1,icon:"M-1",text:"No Signs of Improvement",gen:[{text:"This refers to a Soldier who returns for further care not part of a scheduled follow-up. Soldier should NOT be screened to a minor-care protocol. As a follow-up visit, the Soldier should receive a more detailed evaluation and be seen by the privileged provider or AEM (if treated with a minor care protocol at the previous visit)."}],medcom:[],stp:[],redFlags:[],DDX:[]},{id:2,icon:"M-2",text:"Return Requested by Provider",gen:[{text:"Many Soldiers are told to return for follow up. Write the previous level of care and name of the privileged provider on the screening note."}],medcom:[],stp:[],redFlags:[],DDX:[]}]}],wN=ya("NavTop"),AN={import:x.jsx(sS,{size:16,className:"text-primary/70"}),medications:x.jsx(V4,{size:16,className:"text-primary/70"}),Settings:x.jsx(Y4,{size:16,className:"text-primary/70"})};function SN({search:r,actions:i,ui:a}){const{searchInput:s,onSearchChange:l,onSearchFocus:c,onSearchClear:d,onSearchCollapse:f,searchInputRef:m,isSearchExpanded:g=!1,onSearchExpandToggle:v}=r,{onBackClick:y,onMenuClick:A,onMenuClose:w,onImportClick:k,onMedicationClick:E,onSettingsClick:I,onInfoClick:T}=i,{showBack:N=!1,dynamicTitle:j,medicationButtonText:B="Medications",isMobile:U,isAlgorithmView:F=!1,isMenuOpen:P=!1,noteSource:z}=a,V=D.useRef(null),L=m||V,Q=s.trim().length>0,q=U&&F&&!g,ee=Pu({width:P?224:48,height:P?Sp.length*48+24:48,borderRadius:P?6:22,padTop:P?12:2,padBottom:P?12:2,padLeft:P?12:2,padRight:P?20:2,config:{tension:220,friction:26}}),X=Pu({opacity:P||N?0:1,x:P?3:N?-3:0,scale:P||N?1.05:1,config:{tension:220,friction:26}}),ae=Pu({opacity:N?1:0,x:N?0:3,scale:N?1:1.05,config:{tension:280,friction:24}}),K=Pu({maxWidth:N?150:0,opacity:N?1:0,scale:N?1:.95,gap:N?8:0,config:{tension:260,friction:24}}),ie=sN(Sp.length,{opacity:P?1:0,y:P?0:8,config:{tension:300,friction:28},delay:P?200:0}),ne=be=>{switch(be.toLowerCase()){case"import":k?.();break;case"medications":E?.();break;case"settings":I?.();break;default:wN.warn("Unknown menu action:",be)}w?.()};D.useEffect(()=>{g&&L.current&&L.current.focus()},[g,L]);const J=()=>{!g&&v&&(v(),c?.())},te=()=>{U&&!g&&v&&v(),c?.()},$=()=>{U&&!Q&&g&&f?.()},oe=(be=!1)=>{l(""),d?.(),be?f?.():L.current?.focus()},we={mobileContainer:"rounded-full border border-tertiary/20 flex items-center p-0.5 bg-themewhite",mobileButton:"w-11 h-11 rounded-full flex items-center justify-center text-tertiary hover:text-primary transition-all duration-200",desktop:"h-8 flex items-center justify-center px-3 lg:px-4 py-1.5 bg-themewhite2 hover:bg-themewhite rounded-full transition-all duration-300"};return x.jsxs("div",{className:"flex items-center h-full w-full px-2 transition-all duration-300 md:bg-themewhite bg-transparent",children:[(!U||!g)&&x.jsxs("div",{className:"flex items-center shrink-0",children:[U&&x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-12 h-12"}),x.jsx(Z1.div,{className:"absolute top-0.5 left-1 z-40",style:{opacity:ae.opacity,transform:ZA([ae.x,ae.scale],(be,Te)=>`translateX(${be}px) scale(${Te})`),pointerEvents:N?"auto":"none"},children:x.jsx("div",{className:we.mobileContainer,children:x.jsx("button",{onClick:y,className:`${we.mobileButton} active:scale-90`,"aria-label":"Go back",title:"Go back",children:x.jsx(Nc,{className:"w-6 h-6 stroke-current"})})})}),x.jsxs(Z1.div,{className:"absolute top-0 left-1 z-50 transform-gpu overflow-hidden bg-themewhite",style:{transformOrigin:"top left",width:ee.width,height:ee.height,borderRadius:ee.borderRadius,paddingTop:ee.padTop,paddingBottom:ee.padBottom,paddingLeft:ee.padLeft,paddingRight:ee.padRight,opacity:X.opacity.to(be=>P?1:be),pointerEvents:P||!N?"auto":"none"},children:[x.jsx("div",{className:"absolute inset-0 rounded-inherit pointer-events-none border border-tertiary/15"}),x.jsx(Z1.div,{className:"absolute top-0.5 left-0.5 w-11 h-11 flex items-center justify-center z-20",style:{opacity:X.opacity,transform:ZA([X.x,X.scale],(be,Te)=>`translateX(${be}px) scale(${Te})`),pointerEvents:P||N?"none":"auto"},children:x.jsx("button",{onClick:A,className:"w-11 h-11 rounded-full flex items-center justify-center active:scale-95 transition-transform overflow-hidden","aria-label":"Open menu",children:a.mobileAvatar?a.mobileAvatar.isCustom&&a.mobileAvatar.customImage?x.jsx("img",{src:a.mobileAvatar.customImage,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):x.jsx("div",{className:"w-full h-full rounded-full overflow-hidden",children:a.mobileAvatar.avatarSvg}):x.jsx(t_,{className:"w-6 h-6 stroke-current"})})}),x.jsx("div",{className:"relative z-10 space-y-0.5",children:ie.map((be,Te)=>x.jsxs(Z1.button,{onClick:()=>ne(Sp[Te].action),className:"w-full text-left flex items-center pl-3 pr-4 py-3 rounded-xl cursor-pointer hover:bg-themewhite2/60 bg-transparent active:scale-[0.97] transform-gpu transition-colors",style:{opacity:be.opacity,transform:be.y.to(ye=>`translateY(${ye}px)`)},children:[x.jsx("div",{className:"mr-3",children:AN[Sp[Te].action]||x.jsx(K5,{size:16,className:"text-primary/70"})}),x.jsx("span",{className:"tracking-wide text-sm text-primary/80 font-medium",children:Sp[Te].text})]},Te))})]})]}),!U&&x.jsxs("div",{className:"flex justify-center items-center shrink-0",children:[x.jsx(Z1.div,{className:"overflow-hidden shrink-0",style:{maxWidth:K.maxWidth,marginRight:K.gap,opacity:K.opacity,transform:K.scale.to(be=>`scale(${be})`),pointerEvents:N?"auto":"none"},children:x.jsxs("button",{onClick:y,className:`${we.desktop} whitespace-nowrap`,"aria-label":"Go back",title:"Go back",children:[x.jsx(Nc,{className:"w-4 h-4 stroke-themeblue1"}),x.jsx("span",{className:"hidden lg:inline text-[10pt] text-primary/60 ml-2",children:"Back"})]})}),x.jsxs("button",{onClick:E,className:we.desktop,"aria-label":B,title:B,children:[x.jsx("svg",{className:"w-4 h-4 stroke-themeblue1 fill-transparent",viewBox:"0 0 14 14",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M6.59 1.69a4.045 4.045 0 1 1 5.72 5.72l-4.9 4.9a4.045 4.045 0 1 1-5.72-5.72zm-2.2 2.2l5.72 5.72"})}),x.jsx("span",{className:"hidden lg:inline text-[10pt] text-tertiary ml-2",children:B})]})]})]}),U&&!g&&x.jsxs("div",{className:"flex-1 min-w-0 px-2 transition-opacity duration-300",children:[x.jsx("div",{className:"truncate whitespace-nowrap text-center",children:x.jsx("span",{className:"text-[9pt] text-primary font-normal",children:j||"ADTMC 2.6.3"})}),F&&z!==void 0&&x.jsxs("div",{className:"flex items-center justify-center gap-1 mt-0.5",children:[z&&!z?.startsWith("external")?x.jsx(So,{className:"w-2.5 h-2.5 shrink-0 text-tertiary"}):z?.startsWith("external")?x.jsx(Yu,{className:"w-2.5 h-2.5 shrink-0 text-tertiary"}):x.jsx(aS,{className:"w-2.5 h-2.5 shrink-0 text-tertiary"}),x.jsx("span",{className:"text-[8pt] text-tertiary font-medium",children:lw(z,"short")})]})]}),x.jsxs("div",{className:`flex items-center min-w-0 ${U?g?"flex-1":"shrink-0 justify-end":"flex-1 justify-center"}`,children:[U&&g&&x.jsxs("div",{className:"flex items-center justify-center transition-all duration-300 bg-themewhite text-tertiary rounded-full border border-themeblue3/10 shadow-xs focus-within:border-themeblue1/30 focus-within:bg-themewhite2 w-full animate-expandSearch",children:[x.jsx("input",{ref:L,type:"search",placeholder:"search",value:s,onChange:be=>l(be.target.value),onFocus:te,onBlur:$,className:"text-tertiary bg-transparent outline-none text-[16px] w-full px-4 py-2 rounded-l-full min-w-0 [&::-webkit-search-cancel-button]:hidden"}),x.jsx("div",{className:"flex items-center justify-center px-2 py-2 bg-themewhite2 stroke-themeblue3 rounded-r-full cursor-pointer transition-all duration-300 hover:bg-themewhite shrink-0",onClick:()=>oe(!Q),children:x.jsx(ms,{className:"w-5 h-5 stroke-themeblue1"})})]}),!U&&x.jsxs("div",{className:"flex items-center justify-center transition-all duration-300 bg-themewhite text-tertiary rounded-full border border-themeblue3/10 shadow-xs focus-within:border-themeblue1/30 focus-within:bg-themewhite2 w-full max-w-130",children:[x.jsx("input",{ref:L,type:"search",placeholder:"search",value:s,onChange:be=>l(be.target.value),onFocus:te,onBlur:$,className:"text-tertiary bg-transparent outline-none text-[16px] w-full px-4 py-2 rounded-l-full min-w-0 [&::-webkit-search-cancel-button]:hidden"}),x.jsx("button",{type:"button",className:"flex items-center justify-center px-2 py-2 bg-themewhite2 stroke-themeblue3 rounded-r-full transition-all duration-300 hover:bg-themewhite shrink-0",onClick:Q?()=>oe(!1):void 0,"aria-label":Q?"Clear search":"Search",children:Q?x.jsx(ms,{className:"w-5 h-5 stroke-themeblue1"}):x.jsx(Wh,{className:"w-5 h-5 stroke-themeblue1 opacity-50"})})]}),U&&!g&&x.jsx("div",{className:"flex items-center justify-end h-full",children:x.jsxs("div",{className:"rounded-full bg-themewhite border border-tertiary/20 flex items-center justify-center p-0.5",children:[x.jsx("div",{className:`
                transition-all duration-300 ease-out overflow-hidden
                ${q?"w-11 opacity-100":"w-0 opacity-0"}
                flex items-center justify-center
            `,children:q&&x.jsx("button",{onClick:T,className:"text-tertiary hover:text-primary transition-all duration-200","aria-label":"Info",title:"Info",children:x.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center",children:x.jsx(Bm,{className:"w-6 h-6 stroke-current"})})})}),x.jsx("button",{onClick:J,className:"text-tertiary hover:text-primary transition-all duration-200","aria-label":"Search",title:"Search",children:x.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center",children:x.jsx(Wh,{className:"w-6 h-6 stroke-current"})})})]})})]}),!U&&x.jsx("div",{className:"flex items-center justify-center transition-all duration-300 w-max opacity-100",children:x.jsxs("div",{className:"w-max h-full flex items-center justify-center gap-2",children:[x.jsxs("button",{onClick:k,className:we.desktop,"aria-label":"Import note",title:"Import note",children:[x.jsx(sS,{className:"w-4 h-4 stroke-themeblue1"}),x.jsx("span",{className:"hidden lg:inline text-[10pt] text-tertiary ml-2",children:"Import Note"})]}),I&&x.jsxs("button",{onClick:I,className:we.desktop,"aria-label":"Settings",title:"Settings",children:[x.jsx(Y4,{className:"w-4 h-4 stroke-themeblue1"}),x.jsx("span",{className:"hidden lg:inline text-[10pt] text-tertiary ml-2",children:"Settings"})]})]})})]})}const kN={category:{label:"CATEGORY",className:"bg-themeblue3 text-primary"},CC:{label:"COMPLAINT",className:"bg-themewhite2 text-secondary"},medication:{label:"MEDICATION",className:"bg-themeyellowlow/30 text-secondary"},training:{label:"GUIDELINE",className:"bg-themewhite2 text-themeblue1"},DDX:{label:"DDX",className:"bg-themewhite2 text-themeblue1"}},CN={medcom:"MEDCOM","stp-task":"STP TASK"};function EN(r){const i=kN[r.type]||{label:"",className:""};if(r.type==="training"&&r.data?.guidelineType){const a=CN[r.data.guidelineType];if(a)return{...i,label:a}}return i}function _N({result:r}){const{label:i,className:a}=EN(r);return x.jsx("div",{className:`text-[8pt] px-2 py-1 rounded-md ${a} shrink-0`,children:i})}function n6({results:r,searchTerm:i,onResultClick:a,isSearching:s=!1}){return i.trim()?s?x.jsx("div",{className:"h-full w-full flex items-center justify-center text-themeblue1",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-themeblue3 mx-auto mb-3"}),x.jsxs("p",{children:['Searching for "',i,'"...']})]})}):r.length===0?x.jsx("div",{className:"h-full flex items-center justify-center text-themeblue1",children:x.jsxs("div",{className:"text-center",children:[x.jsxs("p",{children:['No results found for "',i,'"']}),x.jsx("p",{className:"text-sm mt-2",children:"Try different keywords"})]})}):x.jsxs("div",{className:"flex flex-col h-full",children:[x.jsxs("div",{className:"px-3 py-2 text-xs text-tertiary border-b border-themewhite2",children:["Found ",r.length," result",r.length!==1?"s":""]}),x.jsx("div",{className:"flex-1 overflow-y-auto pb-4",children:r.map((l,c)=>x.jsx("div",{className:"px-2 py-3 w-full border-b border-themewhite2/50 hover:bg-themewhite2 cursor-pointer transition-colors",onClick:()=>a(l),children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(_N,{result:l}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-normal text-primary/90 truncate",children:l.text}),(l.type==="CC"||l.type==="DDX")&&l.data?.categoryRef&&x.jsx("div",{className:"text-[10px] text-themeblue1/70 mt-1",children:l.data.categoryRef.text}),l.type==="training"&&l.data?.guidelineType==="stp-task"&&l.data.skillLevel&&x.jsxs("div",{className:"text-[10px] text-themeblue1/70 mt-1",children:[l.data.skillLevel," > ",l.data.subjectArea]}),l.type==="training"&&l.data?.guidelineType==="medcom"&&l.data?.categoryRef&&x.jsx("div",{className:"text-[10px] text-themeblue1/70 mt-1",children:l.data.categoryRef.text})]})]})},`${l.type}-${l.id}-${l.data?.categoryId||0}-${c}`))})]}):x.jsx("div",{className:"h-full w-full mx-5 py-2 flex items-center justify-center text-tertiary",children:x.jsx("p",{children:"Search for symptoms, guidelines, or medications"})})}var he=null,t=0,n=[],e={};const Fu=Math.abs,li=Math.ceil,i6=Math.floor,ro=Math.log,El=Math.pow,yc=Math.round,L3=Math.sqrt;function o(r){if(arguments.length){if(!(r instanceof Array)){r=new Array(+arguments[0]);for(var i=0,a=r.length;i<a;i++)r[i]=null}}else{for(var i=t-1;i>=0&&n[i]!==1/0;i--);if(i<0)throw new Error("array-marker-not-found");r=n.splice(i+1,t-1-i),t=i}return r.b=r,r.o=0,r}function rt(){for(var r=t-1;r>=0&&n[r]!==1/0;r-=2)if(n[r-1]===1/0)throw new Error("dict-malformed-stack");if(r<0)throw new Error("dict-marker-not-found");for(var i=new Map,a=r+1;a<t;a+=2){var s=n[a],l=typeof s;if(l=="number"||l=="string")i.set(s,n[a+1]);else if(s instanceof Uint8Array)i.set(ko(s),n[a+1]);else throw new Error("dict-not-a-valid-key("+s+")")}return t=r,i}function fe(r){var i=typeof r;if(i==="number")return new Uint8Array(r);i!=="string"&&(r=""+r);for(var a=new Uint8Array(r.length),s=0,l=r.length;s<l;s++)a[s]=r.charCodeAt(s);return a}function oa(r,i){if(t<r)throw new Error("roll: --stack-underflow--");if(i){if(i<0)var a=n.splice(t-r,-i);else var a=n.splice(t-r,r-i);n.splice.apply(n,[t-a.length,0].concat(a))}}function ko(r){return r instanceof Uint8Array?String.fromCharCode.apply(null,r):""+r}function zi(r,i){if(typeof r=="string"&&(r=fe(r)),i instanceof Uint8Array)for(var a=0,s=i.length;a<s;a++)r[a]=i[a];else for(var a=0,s=i.length;a<s;a++)r[a]=i.charCodeAt(a);return i.length<r.length?r.subarray(0,i.length):r}function Jh(r,i){for(var a=0,s=i.length;a<s;a++)r[a]=i[a];return r.length=i.length,r}function Ye(r){return r instanceof Uint8Array?i6(String.fromCharCode.apply(null,r).replace(/\0+$/,"")):i6(""+r)}function Nn(r,i,a){return zi(r,(~~i).toString(a).toUpperCase())}function h(r,i){return r instanceof Uint8Array?r[i]:typeof r=="string"?r.charCodeAt(i):r instanceof Array?r.b[r.o+i]:(i instanceof Uint8Array&&(i=ko(i)),r instanceof Map?r.get(i):r[i])}function C(r,i,a){if(r instanceof Uint8Array)r[i]=a;else if(r instanceof Array)r.b[r.o+i]=a;else if(typeof r=="object")i instanceof Uint8Array?r.set(ko(i),a):r.set(i,a);else throw new Error("put-not-writable-"+typeof r)}function O(r,i,a){if(r instanceof Uint8Array)return r.subarray(i,i+a);if(r instanceof Array){var s=new Array(a);return s.b=r.b,s.o=r.o+i,s}return r.substr(i,a)}function H(r,i,a){if(r instanceof Uint8Array)if(typeof a=="string")for(var s=0,l=a.length;s<l;s++)r[i+s]=a.charCodeAt(s);else for(var s=a.length-1;s>=0;s--)r[i+s]=a[s];else if(r instanceof Array)for(var c=r.b,d=i+r.o,f=a.b,m=a.o,s=0,l=a.length;s<l;s++)c[d+s]=f[m+s];else throw new Error("putinterval-not-writable-"+typeof r)}function Ys(r){if(r==null)return"nulltype";var i=typeof r;return i=="number"?r%1?"realtype":"integertype":i=="boolean"?"booleantype":i=="string"||r instanceof Uint8Array?"stringtype":i=="function"?"operatortype":r instanceof Array?"arraytype":"dicttype"}function kp(r,i){r instanceof Uint8Array||(r=fe(r));var a=0,s=r.length,l=i.length;if(l==1){var c=i instanceof Uint8Array?i[0]:i.charCodeAt(0);a=r[0]==c?1:s}else if(i.length<=s)for(i instanceof Uint8Array||(i=fe(i));a<l&&r[a]==i[a];a++);a==l?(n[t++]=r.subarray(l),n[t++]=r.subarray(0,l),n[t++]=!0):(n[t++]=r,n[t++]=!1)}function sn(r,i){r instanceof Uint8Array||(r=fe(r));var a=r.length;if(i.length==1)for(var s=1,l=i instanceof Uint8Array?i[0]:i.charCodeAt(0),c=0;c<a&&r[c]!=l;c++);else{i instanceof Uint8Array||(i=fe(i));for(var s=i.length,l=i[0],c=0;c<a&&r[c]!=l;c++);for(;c<a;){for(var d=1;d<s&&r[c+d]===i[d];d++);if(d===s)break;for(c++;c<a&&r[c]!=l;c++);}}c<a?(n[t++]=r.subarray(c+s),n[t++]=r.subarray(c,c+s),n[t++]=r.subarray(0,c),n[t++]=!0):(n[t++]=r,n[t++]=!1)}function Ie(r,i){if(r instanceof Uint8Array)for(var a=0,s=r.length;a<s&&(n[t++]=r[a],!(i&&i()));a++);else if(r instanceof Array)for(var l=r.b,a=r.o,s=r.o+r.length;a<s&&(n[t++]=l[a],!(i&&i()));a++);else if(typeof r=="string")for(var a=0,s=r.length;a<s&&(n[t++]=r.charCodeAt(a),!(i&&i()));a++);else if(r instanceof Map)for(var c=r.keys(),a=0,s=r.size;a<s;a++){var d=c.next().value;if(n[t++]=d,n[t++]=r.get(d),i&&i())break}else for(var d in r)if(n[t++]=d,n[t++]=r[d],i&&i())break}function Qu(){for(;t>0&&n[--t]!==1/0;);}function Ur(){for(var r=t-1;r>=0&&n[r]!==1/0;r--);return t-r-1}function W(r){for(var i=0,a=r.length,s=r.b,l=r.o;i<a;i++)n[t++]=s[l+i]}function Rn(r){for(var i=0,a=r.length,s=r.b,l=r.o+a-1;i<a;i++)s[l-i]=n[--t];n[t++]=r}function ce(r,i){if(typeof r=="string"&&typeof i=="string")return r==i;if(r instanceof Uint8Array&&i instanceof Uint8Array){if(r.length!=i.length)return!1;for(var a=0,s=r.length;a<s;a++)if(r[a]!=i[a])return!1;return!0}return(r instanceof Uint8Array&&typeof i=="string"||i instanceof Uint8Array&&typeof r=="string")&&(r instanceof Uint8Array?r=ko(r):i=ko(i)),r==i}function qe(r,i){return!ce(r,i)}function oo(r,i){return r instanceof Uint8Array&&(r=ko(r)),i instanceof Uint8Array&&(i=ko(i)),r<i}function Zh(r,i){return r instanceof Uint8Array&&(r=ko(r)),i instanceof Uint8Array&&(i=ko(i)),r<=i}function _c(r,i){return r instanceof Uint8Array&&(r=ko(r)),i instanceof Uint8Array&&(i=ko(i)),r>i}function il(r,i){return r instanceof Uint8Array&&(r=ko(r)),i instanceof Uint8Array&&(i=ko(i)),r>=i}function _d(r,i){return typeof r=="boolean"?r&&i:r&i}function IN(r,i){return typeof r=="boolean"?r||i:r|i}function Ha(r,i){return typeof r=="boolean"?r!=i:r^i}var R=(function(r){return i=>(i|0)==i?i:(r[0]=i,r[0])})(new Float32Array(1));function Z(){var r=n[--t],i=n[--t];if(typeof r=="string"||r instanceof Uint8Array)throw new Error(ko(i)+": "+ko(r));throw n[t++]=r,ko(i)+`
Additional information: `+a(r);function a(s){if(s instanceof Array){let l="";for(let c=s.o,d=s.o+s.length;c<d;c++)l+=" "+a(s.b[c]);return"["+l.substr(1)+"]"}else{if(s instanceof Uint8Array)return String.fromCharCode.apply(String,s);if(s instanceof Map){let l="";for(const[c,d]of s)l+=" "+a(c)+" "+a(d);return"<<"+l.substr(1)+">>"}else if(s&&typeof s=="object"){let l="";for(let c in s)l+=" "+a(c)+" "+a(s[c]);return"<<"+l.substr(1)+">>"}else return""+s}}}function ht(){var r=n[--t],i=n[t-1];if(i instanceof Uint8Array&&(i=ko(i)),typeof i=="string"){let d=i.trim().split(/ +/g);n[t-1]=i=new Map;for(let f=0;f<d.length;f++){let m=d[f].split("=");m.length==1?i.set(m[0],!0):i.set(m[0],m[1])}}for(var a in r){var s;if(i.has(a)){s=i.get(a);var l=r[a],c=typeof l;if(l==null||c=="number"){if(!isFinite(+s))throw new Error("bwipp.invalidOptionType: "+a+": not a realtype: "+s);typeof s=="string"&&(s=+s,i.set(a,s))}else if(c=="boolean"){if(s!==!0&&s!==!1){if(s==null||(s|0)===s)s=!!s;else if(s=="true")s=!0;else if(s=="false")s=!1;else throw new Error("bwipp.invalidOptionType: "+a+": not a booleantype: "+s);i.set(a,s)}}else if(c=="string"||l instanceof Uint8Array){if(typeof s=="number")s=""+s,i.set(a,s);else if((a==="extratext"||a==="alttext")&&typeof s=="string")s=fe(s),i.set(a,s);else if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Error("bwipp.invalidOptionType: "+a+": not a stringtype: "+s)}r[a]=s}}}function ja(){var r=e;e=Object.assign({},e),e.fncvals=n[--t],e.barcode=n[--t];var i="parse";e[i]=h(e.fncvals,i),delete e.fncvals[i];var a="parsefnc";e[a]=h(e.fncvals,a),delete e.fncvals[a];var s="parseonly",l=h(e.fncvals,s)!==void 0;e[s]=l,delete e.fncvals[s];var c="eci",d=h(e.fncvals,c)!==void 0;e[c]=d,delete e.fncvals[c],n[t++]=1/0;var f=o(["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","","","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"]);n[t++]=0;for(var m=0,g=f.length;m<g;m++){var v=n[--t];n[t++]=h(f,m),n[t++]=v,n[t++]=v+1}for(t--,e.ctrl=rt(),e.msg=o(e.barcode.length),e.j=0,n[t++]=e.barcode;;){sn(n[--t],"^");var y=n[--t],A=n[--t];n[t++]=y,n[t++]=A.length,n[t++]=e.msg,n[t++]=e.j;var w=1/0,k=A;n[t++]=w,Ie(k);var E=o(),I=n[--t];if(H(n[--t],I,E),e.j=R(n[--t]+e.j),n[--t]){t--;for(var T=0;T<1;T++){if(!e.parse&&!e.parsefnc){C(e.msg,e.j,94),e.j=e.j+1;break}if(C(e.msg,e.j,94),e.j=e.j+1,e.parse){var N=n[t-1];if(N.length>=3){var j=n[t-1],B=O(j,0,3),U=e.ctrl,F=h(U,B)!==void 0;if(n[t++]=U,n[t++]=B,F){e.j=e.j-1;var P=n[--t];C(e.msg,e.j,h(n[--t],P)),e.j=e.j+1;var z=n[--t];n[t++]=O(z,3,z.length-3);break}else t-=2}var V=n[t-1];if(V.length>=2){var L=n[t-1],Q=O(L,0,2),q=e.ctrl,ee=h(q,Q)!==void 0;if(n[t++]=q,n[t++]=Q,ee){e.j=e.j-1;var X=n[--t];C(e.msg,e.j,h(n[--t],X)),e.j=e.j+1;var ae=n[--t];n[t++]=O(ae,2,ae.length-2);break}else t-=2}var K=n[t-1];if(K.length>=3){var ie=n[t-1],ne=O(ie,0,3);n[t++]=!0;for(var J=0,te=ne.length;J<te;J++){var $=h(ne,J);($<48||$>57)&&(n[t-1]=!1)}if(n[--t]){var oe=n[t-1],we=Ye(O(oe,0,3));n[t++]=we,we>255&&(t-=2,n[t++]="bwipp.invalidOrdinal#282",n[t++]="Ordinal must be 000 to 255",Z()),e.j=e.j-1,C(e.msg,e.j,n[--t]),e.j=e.j+1;var be=n[--t];n[t++]=O(be,3,be.length-3)}}}if(e.parseonly||!e.parsefnc||h(e.msg,e.j-1)!=94)break;e.j=e.j-1;var Te=n[t-1];Te.length<1&&(t--,n[t++]="bwipp.truncatedCaret#301",n[t++]="Caret character truncated",Z());var ye=n[t-1];if(h(ye,0)==94){C(e.msg,e.j,94),e.j=e.j+1;var tt=n[--t];n[t++]=O(tt,1,tt.length-1);break}var Qe=n[t-1];Qe.length<3&&(t--,n[t++]="bwipp.truncatedFNC#311",n[t++]="Function character truncated",Z());var Ge=n[t-1];if(ce(O(Ge,0,3),"ECI")&&e.eci){var Xe=n[t-1];Xe.length<9&&(t--,n[t++]="bwipp.truncatedECI#316",n[t++]="ECI truncated",Z());var Je=n[t-1],dt=O(Je,3,6);n[t++]=dt;for(var vt=0,_t=dt.length;vt<_t;vt++){var xt=h(dt,vt);(xt<48||xt>57)&&(t-=2,n[t++]="bwipp.invalidECI#322",n[t++]="ECI must be 000000 to 999999",Z())}var bt=n[--t];n[t++]=0,Ie(bt,function(){var Zt=n[--t],Qt=n[--t];n[t++]=R(Qt-(Zt-48))*10}),C(e.msg,e.j,~~(n[--t]/10)-1e6),e.j=e.j+1;var kt=n[--t];n[t++]=O(kt,9,kt.length-9);break}var Pt=n[t-1];Pt.length<4&&(t--,n[t++]="bwipp.truncatedFNC#333",n[t++]="Function character truncated",Z());var Rt=n[t-1],Wt=O(Rt,0,4),zt=h(e.fncvals,Wt)!==void 0;if(n[t++]=Wt,!zt){var Ct=n[--t],Yt=fe(Ct.length+28);H(Yt,28,Ct),H(Yt,0,"Unknown function character: "),n[t-1]=Yt;var jt=n[--t];n[t++]="bwipp.unknownFNC#339",n[t++]=jt,Z()}C(e.msg,e.j,h(e.fncvals,n[--t])),e.j=e.j+1;var an=n[--t];n[t++]=O(an,4,an.length-4);break}}else break}if(!e.parseonly)n[t++]=O(e.msg,0,e.j);else{n[t++]=fe(e.j);for(var rn=0,Kt=e.j-1;rn<=Kt;rn+=1){var Jt=n[t-1];C(Jt,rn,h(e.msg,rn))}}e=r}function cs(){var r=e;e=Object.assign({},e);var i=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",o(["lintcsum","lintgcppos2"])]]),a=o([i]),s=o([]),l=new Map([["parts",a],["dlpkey",s]]),c=o(["lintcsum","lintgcppos2"]),d=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",c]]),f=o([d]),m=o(["255","37"]),g=o(["22","10","21"]),v=o(["235"]),y=o([g,v]),A=new Map([["parts",f],["ex",m],["dlpkey",y]]),w=o(["lintcsum","lintgcppos2"]),k=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",w]]),E=o([k]),I=o(["01","03"]),T=o(["37"]),N=o([T]),j=o([N]),B=new Map([["parts",E],["ex",I],["req",j]]),U=o(["lintcsum","lintgcppos2"]),F=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",U]]),P=o([F]),z=o(["01","02","37"]),V=new Map([["parts",P],["ex",z],["dlattr",!1]]),L=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Q=new Map([["parts",o([L])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["8006"]),o(["8026"])])])]]),q=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),ee=new Map([["parts",o([q])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["8006"]),o(["8026"])])])]]),X=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),ae=o([o([o(["8020"])])]),K=new Map([["parts",o([X])],["req",ae]]),ie=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),ne=new Map([["parts",o([ie])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["8006"]),o(["8026"])])])]]),J=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),te=new Map([["parts",o([J])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["255"]),o(["8006"]),o(["8026"])])])]]),$=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",o([])]]),oe=new Map([["parts",o([$])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),we=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),be=new Map([["parts",o([we])],["ex",o(["235"])],["req",o([o([o(["01"]),o(["03"]),o(["8006"])])])],["dlattr",!1]]),Te=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),ye=new Map([["parts",o([Te])],["req",o([o([o(["01"])])])],["dlattr",!1]]),tt=new Map([["cset","X"],["min",1],["max",28],["opt",!1],["linters",o([])]]),Qe=new Map([["parts",o([tt])],["req",o([o([o(["01"])])])],["dlattr",!1]]),Ge=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Xe=new Map([["parts",o([Ge])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),Je=new Map([["cset","N"],["min",1],["max",6],["opt",!1],["linters",o([])]]),dt=new Map([["parts",o([Je])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),vt=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),_t=new Map([["parts",o([vt])],["req",o([o([o(["01"])])])]]),xt=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),bt=new Map([["parts",o([xt])],["req",o([o([o(["01"]),o(["8006"])]),o([o(["21"])])])]]),kt=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Pt=new Map([["parts",o([kt])],["req",o([o([o(["01"]),o(["8006"])])])]]),Rt=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Wt=new Map([["cset","X"],["min",1],["max",17],["opt",!0],["linters",o([])]]),zt=new Map([["parts",o([Rt,Wt])],["dlpkey",o([])]]),Ct=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Yt=new Map([["parts",o([Ct])],["req",o([o([o(["414"])])])],["dlattr",!1]]),jt=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),an=new Map([["cset","N"],["min",1],["max",12],["opt",!0],["linters",o([])]]),rn=new Map([["parts",o([jt,an])],["ex",o(["01","02","415","8006","8020","8026"])],["dlpkey",o([])]]),Kt=new Map([["cset","N"],["min",1],["max",8],["opt",!1],["linters",o([])]]),Jt=new Map([["parts",o([Kt])],["req",o([o([o(["01"]),o(["02"])])])]]),Zt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Qt=new Map([["parts",o([Zt])],["ex",o(["310n"])],["req",o([o([o(["01"]),o(["02"])])])]]),mn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),cn=new Map([["parts",o([mn])],["ex",o(["311n"])],["req",o([o([o(["01"]),o(["02"])])])]]),dn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ht=new Map([["parts",o([dn])],["ex",o(["312n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Bt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Y=new Map([["parts",o([Bt])],["ex",o(["313n"])],["req",o([o([o(["01"]),o(["02"])])])]]),le=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),se=new Map([["parts",o([le])],["ex",o(["314n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ge=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ve=new Map([["parts",o([ge])],["ex",o(["315n"])],["req",o([o([o(["01"]),o(["02"])])])]]),_e=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),pe=new Map([["parts",o([_e])],["ex",o(["316n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Oe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),de=new Map([["parts",o([Oe])],["ex",o(["320n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ke=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ee=new Map([["parts",o([ke])],["ex",o(["321n"])],["req",o([o([o(["01"]),o(["02"])])])]]),De=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),xe=new Map([["parts",o([De])],["ex",o(["322n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ne=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),je=new Map([["parts",o([Ne])],["ex",o(["323n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Se=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ze=new Map([["parts",o([Se])],["ex",o(["324n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Pe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Be=new Map([["parts",o([Pe])],["ex",o(["325n"])],["req",o([o([o(["01"]),o(["02"])])])]]),at=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ze=new Map([["parts",o([at])],["ex",o(["326n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ft=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ve=new Map([["parts",o([ft])],["ex",o(["327n"])],["req",o([o([o(["01"]),o(["02"])])])]]),$e=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Me=new Map([["parts",o([$e])],["ex",o(["328n"])],["req",o([o([o(["01"]),o(["02"])])])]]),it=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),st=new Map([["parts",o([it])],["ex",o(["329n"])],["req",o([o([o(["01"]),o(["02"])])])]]),mt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Tt=new Map([["parts",o([mt])],["ex",o(["330n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ot=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Et=new Map([["parts",o([Ot])],["ex",o(["331n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Dt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),wt=new Map([["parts",o([Dt])],["ex",o(["332n"])],["req",o([o([o(["00"]),o(["01"])])])]]),en=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),gt=new Map([["parts",o([en])],["ex",o(["333n"])],["req",o([o([o(["00"]),o(["01"])])])]]),un=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Vt=new Map([["parts",o([un])],["ex",o(["334n"])],["req",o([o([o(["00"]),o(["01"])])])]]),fn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),$n=new Map([["parts",o([fn])],["ex",o(["335n"])],["req",o([o([o(["00"]),o(["01"])])])]]),ei=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Dn=new Map([["parts",o([ei])],["ex",o(["336n"])],["req",o([o([o(["00"]),o(["01"])])])]]),ai=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),zn=new Map([["parts",o([ai])],["ex",o(["337n"])],["req",o([o([o(["01"])])])]]),mi=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Fn=new Map([["parts",o([mi])],["ex",o(["340n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Hn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),_n=new Map([["parts",o([Hn])],["ex",o(["341n"])],["req",o([o([o(["00"]),o(["01"])])])]]),vn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),kn=new Map([["parts",o([vn])],["ex",o(["342n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ai=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ei=new Map([["parts",o([Ai])],["ex",o(["343n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ji=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),nn=new Map([["parts",o([Ji])],["ex",o(["344n"])],["req",o([o([o(["00"]),o(["01"])])])]]),yn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),qn=new Map([["parts",o([yn])],["ex",o(["345n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Tn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Gn=new Map([["parts",o([Tn])],["ex",o(["346n"])],["req",o([o([o(["00"]),o(["01"])])])]]),gi=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Vn=new Map([["parts",o([gi])],["ex",o(["347n"])],["req",o([o([o(["00"]),o(["01"])])])]]),ln=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ti=new Map([["parts",o([ln])],["ex",o(["348n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Qi=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Bi=new Map([["parts",o([Qi])],["ex",o(["349n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ir=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),_i=new Map([["parts",o([Ir])],["ex",o(["350n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Nr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),rr=new Map([["parts",o([Nr])],["ex",o(["351n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Zr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ar=new Map([["parts",o([Zr])],["ex",o(["352n"])],["req",o([o([o(["01"]),o(["02"])])])]]),sr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Pi=new Map([["parts",o([sr])],["ex",o(["353n"])],["req",o([o([o(["00"]),o(["01"])])])]]),hr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Lr=new Map([["parts",o([hr])],["ex",o(["354n"])],["req",o([o([o(["00"]),o(["01"])])])]]),pr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),xr=new Map([["parts",o([pr])],["ex",o(["355n"])],["req",o([o([o(["00"]),o(["01"])])])]]),wa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),br=new Map([["parts",o([wa])],["ex",o(["356n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ba=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),yr=new Map([["parts",o([Ba])],["ex",o(["357n"])],["req",o([o([o(["01"]),o(["02"])])])]]),zr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Tr=new Map([["parts",o([zr])],["ex",o(["360n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ea=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Hr=new Map([["parts",o([ea])],["ex",o(["361n"])],["req",o([o([o(["01"]),o(["02"])])])]]),_a=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),qr=new Map([["parts",o([_a])],["ex",o(["362n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Va=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Gr=new Map([["parts",o([Va])],["ex",o(["363n"])],["req",o([o([o(["00"]),o(["01"])])])]]),la=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Vr=new Map([["parts",o([la])],["ex",o(["364n"])],["req",o([o([o(["01"]),o(["02"])])])]]),wr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),or=new Map([["parts",o([wr])],["ex",o(["365n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ds=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),lr=new Map([["parts",o([ds])],["ex",o(["366n"])],["req",o([o([o(["01"]),o(["02"])])])]]),us=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Mr=new Map([["parts",o([us])],["ex",o(["367n"])],["req",o([o([o(["00"]),o(["01"])])])]]),es=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Yr=new Map([["parts",o([es])],["ex",o(["368n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Mn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Hi=new Map([["parts",o([Mn])],["ex",o(["369n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Rr=new Map([["cset","N"],["min",1],["max",8],["opt",!1],["linters",o([])]]),ta=new Map([["parts",o([Rr])],["req",o([o([o(["00"])]),o([o(["02"]),o(["8026"])])])]]),Ia=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),Ci=new Map([["parts",o([Ia])],["ex",o(["390n","391n","394n","8111"])],["req",o([o([o(["255"]),o(["8020"])])])]]),Aa=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso4217"])]]),Na=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),na=new Map([["parts",o([Aa,Na])],["ex",o(["391n"])],["req",o([o([o(["8020"])])])]]),$s=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),Qr=new Map([["parts",o([$s])],["ex",o(["392n","393n"])],["req",o([o([o(["01"])]),o([o(["30"]),o(["31nn"]),o(["32nn"]),o(["35nn"]),o(["36nn"])])])]]),Co=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso4217"])]]),ts=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),$r=new Map([["parts",o([Co,ts])],["ex",o(["393n"])],["req",o([o([o(["30"]),o(["31nn"]),o(["32nn"]),o(["35nn"]),o(["36nn"])])])]]),Ws=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o([])]]),pa=new Map([["parts",o([Ws])],["ex",o(["394n","8111"])],["req",o([o([o(["255"])])])]]),gs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ta=new Map([["parts",o([gs])],["ex",o(["392n","393n","395n","8005"])],["req",o([o([o(["30"]),o(["31nn"]),o(["32nn"]),o(["35nn"]),o(["36nn"])])])]]),vs=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),xs=new Map([["parts",o([vs])]]),lo=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),Gt=new Map([["parts",o([lo])],["dlpkey",o([])]]),qi=new Map([["cset","N"],["min",17],["max",17],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Zi=new Map([["parts",o([qi])],["dlpkey",o([])]]),ia=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),cr=new Map([["parts",o([ia])],["req",o([o([o(["00"])])])]]),ma=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Ma=new Map([["parts",o([ma])]]),Ns=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Nt=new Map([["parts",o([Ns])],["dlpkey",o([o(["254"]),o(["7040"])])]]),$t=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Yn=new Map([["parts",o([$t])],["req",o([o([o(["8020"])])])],["dlpkey",o([o(["8020"])])]]),Kn=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Jn=new Map([["parts",o([Kn])]]),Si=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Wn=new Map([["parts",o([Si])],["dlpkey",o([o(["7040"])])]]),$i=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Ii=new Map([["parts",o([$i])],["ex",o(["421"])]]),fi=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Fi=new Map([["cset","X"],["min",1],["max",9],["opt",!1],["linters",o([])]]),Gi=new Map([["parts",o([fi,Fi])],["ex",o(["4307"])]]),mr=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Vi=new Map([["parts",o([mr])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),Ni=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Ti=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),ci=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Mi=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Ar=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),gr=new Map([["parts",o([Ni,Ti,ci,Mi,Ar])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"])])])]]),ga=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Sa=new Map([["parts",o([ga])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"])])])]]),ns=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Pa=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Un=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),ni=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),hi=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Wi=new Map([["parts",o([ns,Pa,Un,ni,hi])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ri=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),er=new Map([["parts",o([Ri])],["req",o([o([o(["01"]),o(["02"])])])]]),Yi=new Map([["cset","X"],["min",1],["max",3],["opt",!1],["linters",o([])]]),Oi=new Map([["parts",o([Yi])],["req",o([o([o(["01"]),o(["02"])]),o([o(["422"])])])]]),Or=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",o(["lintpcenc"])]]),Ya=new Map([["parts",o([Or])],["req",o([o([o(["00"])])])]]),bs=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),Ts=new Map([["parts",o([bs])],["req",o([o([o(["00"])])])]]),Xs=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),Ms=new Map([["parts",o([Xs])],["req",o([o([o(["4302"])])])]]),Rs=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),ys=new Map([["parts",o([Rs])],["req",o([o([o(["00"])])])]]),Os=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",o(["lintiso3166alpha2"])]]),Ds=new Map([["parts",o([Os])],["req",o([o([o(["00"])])])]]),ol=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Eo=new Map([["parts",o([ol])],["req",o([o([o(["00"])])])]]),Ks=new Map([["cset","N"],["min",10],["max",10],["opt",!1],["linters",o(["lintlatitude"])]]),co=new Map([["cset","N"],["min",10],["max",10],["opt",!1],["linters",o(["lintlongitude"])]]),lt=new Map([["parts",o([Ks,co])],["req",o([o([o(["00"])])])]]),Ft=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",o(["lintpcenc"])]]),jn=new Map([["parts",o([Ft])],["req",o([o([o(["00"])])])]]),si=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),dr=new Map([["parts",o([si])],["req",o([o([o(["00"])])])]]),ca=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),va=new Map([["parts",o([ca])],["req",o([o([o(["4312"])])])]]),Fa=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),ws=new Map([["parts",o([Fa])],["req",o([o([o(["00"])])])]]),As=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",o(["lintiso3166alpha2"])]]),ll=new Map([["parts",o([As])],["req",o([o([o(["00"])])])]]),qo=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),xa=new Map([["parts",o([qo])],["req",o([o([o(["00"])])])]]),_o=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Ss=new Map([["parts",o([_o])],["req",o([o([o(["00"])])])]]),Go=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",o(["lintpcenc"])]]),It=new Map([["parts",o([Go])],["req",o([o([o(["00"])])])]]),xn=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintyesno"])]]),vi=new Map([["parts",o([xn])],["req",o([o([o(["00"])])])]]),At=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),tn=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["linthhmi"])]]),Cn=new Map([["parts",o([At,tn])],["req",o([o([o(["00"])])])]]),In=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),xi=new Map([["parts",o([In])],["req",o([o([o(["00"])])])]]),Sr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),oi=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),da=new Map([["parts",o([Sr,oi])],["ex",o(["4331"])],["req",o([o([o(["00"])])])]]),Wr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),fs=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),Qa=new Map([["parts",o([Wr,fs])],["ex",o(["4330"])],["req",o([o([o(["00"])])])]]),$a=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Il=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),Nl=new Map([["parts",o([$a,Il])],["ex",o(["4333"])],["req",o([o([o(["00"])])])]]),Vo=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),zl=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),Wa=new Map([["parts",o([Vo,zl])],["ex",o(["4332"])],["req",o([o([o(["00"])])])]]),Yo=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o([])]]),Io=new Map([["parts",o([Yo])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),j1=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),u1=new Map([["parts",o([j1])],["req",o([o([o(["01"]),o(["02"])])])]]),js=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),ks=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["linthhmi"])]]),cl=new Map([["parts",o([js,ks])],["req",o([o([o(["01"]),o(["02"])])])]]),No=new Map([["cset","N"],["min",1],["max",4],["opt",!1],["linters",o([])]]),To=new Map([["parts",o([No])],["req",o([o([o(["01"])]),o([o(["10"])])])]]),Qo=new Map([["cset","X"],["min",1],["max",12],["opt",!1],["linters",o([])]]),Bc=new Map([["parts",o([Qo])],["req",o([o([o(["01"]),o(["02"])])])]]),oc=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),lc=new Map([["parts",o([oc])],["req",o([o([o(["01"]),o(["02"])])])]]),Pc=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),Xa=new Map([["cset","N"],["min",6],["max",6],["opt",!0],["linters",o(["lintyymmdd"])]]),Dr=new Map([["parts",o([Pc,Xa])],["req",o([o([o(["01"]),o(["02"])])])]]),bi=new Map([["cset","X"],["min",1],["max",3],["opt",!1],["linters",o([])]]),Mo=new Map([["parts",o([bi])],["req",o([o([o(["01"]),o(["02"])])])]]),Js=new Map([["cset","X"],["min",1],["max",10],["opt",!1],["linters",o([])]]),cc=new Map([["parts",o([Js])],["req",o([o([o(["01"]),o(["02"])])])]]),$o=new Map([["cset","X"],["min",1],["max",2],["opt",!1],["linters",o([])]]),B1=new Map([["parts",o([$o])],["req",o([o([o(["01"]),o(["02"])])])]]),Fc=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),Hl=new Map([["cset","N"],["min",4],["max",4],["opt",!0],["linters",o(["linthhmi"])]]),dl=new Map([["parts",o([Fc,Hl])],["req",o([o([o(["01"]),o(["02"])])])]]),f1=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),h1=new Map([["parts",o([f1])],["req",o([o([o(["01"]),o(["8006"])]),o([o(["416"])])])]]),dc=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),ul=new Map([["parts",o([dc])],["req",o([o([o(["01"]),o(["8006"])])])]]),uo=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),fl=new Map([["parts",o([uo])],["req",o([o([o(["7021"])])])]]),Ro=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),ql=new Map([["parts",o([Ro])]]),p1=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166999"])]]),Gl=new Map([["cset","X"],["min",1],["max",27],["opt",!1],["linters",o([])]]),Cs=new Map([["parts",o([p1,Gl])],["req",o([o([o(["01"]),o(["02"])])])]]),Tl=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o([])]]),hs=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",o([])]]),Uc=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",o([])]]),Fd=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",o(["lintimporteridx"])]]),Ud=new Map([["parts",o([Tl,hs,Uc,Fd])],["dlattr",!1]]),A2=new Map([["cset","X"],["min",1],["max",4],["opt",!1],["linters",o(["lintpackagetype"])]]),S2=new Map([["parts",o([A2])],["req",o([o([o(["00"])])])],["dlattr",!1]]),Ra=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Wo=new Map([["parts",o([Ra])],["req",o([o([o(["01"])])])]]),uc=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",o([])]]),fc=new Map([["cset","X"],["min",1],["max",28],["opt",!1],["linters",o([])]]),fo=new Map([["parts",o([uc,fc])],["req",o([o([o(["01"]),o(["8004"])])])]]),Vl=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),P1=new Map([["parts",o([Vl])],["req",o([o([o(["01"]),o(["8006"])])])]]),k2=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",o(["lintmediatype"])]]),Ld=new Map([["parts",o([k2])],["req",o([o([o(["8017"]),o(["8018"])])])]]),zd=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o([])]]),ff=new Map([["parts",o([zd])],["req",o([o([o(["8017"]),o(["8018"])])])]]),m1=new Map([["cset","N"],["min",8],["max",8],["opt",!1],["linters",o(["lintyyyymmdd"])]]),C2=new Map([["parts",o([m1])],["ex",o(["7251"])],["req",o([o([o(["8018"])])])]]),hf=new Map([["cset","N"],["min",8],["max",8],["opt",!1],["linters",o(["lintyyyymmdd"])]]),ng=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["linthhmi"])]]),Lc=new Map([["parts",o([hf,ng])],["ex",o(["7250"])],["req",o([o([o(["8018"])])])]]),E2=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintiso5218"])]]),pf=new Map([["parts",o([E2])],["req",o([o([o(["8018"])])])]]),mf=new Map([["cset","X"],["min",1],["max",40],["opt",!1],["linters",o(["lintpcenc"])]]),_2=new Map([["parts",o([mf])],["ex",o(["7256","7259"])],["req",o([o([o(["8017"]),o(["8018"])])])]]),ig=new Map([["cset","X"],["min",1],["max",10],["opt",!1],["linters",o([])]]),hc=new Map([["parts",o([ig])],["ex",o(["7256","7259"])],["req",o([o([o(["8017"]),o(["8018"])])])]]),pc=new Map([["cset","X"],["min",1],["max",90],["opt",!1],["linters",o(["lintpcenc"])]]),rg=new Map([["parts",o([pc])],["req",o([o([o(["8017"]),o(["8018"])])])]]),ag=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),zc=new Map([["parts",o([ag])],["req",o([o([o(["8018"])])])]]),Hd=new Map([["cset","X"],["min",3],["max",3],["opt",!1],["linters",o(["lintposinseqslash"])]]),gf=new Map([["parts",o([Hd])],["req",o([o([o(["8018","7259"])])])]]),qd=new Map([["cset","X"],["min",1],["max",40],["opt",!1],["linters",o(["lintpcenc"])]]),vf=new Map([["parts",o([qd])],["ex",o(["7256"])],["req",o([o([o(["8018"])])])]]),sg=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["lintnonzero"])]]),mc=new Map([["cset","N"],["min",5],["max",5],["opt",!1],["linters",o(["lintnonzero"])]]),og=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintnonzero"])]]),F1=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintwinding"])]]),I2=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o([])]]),N2=new Map([["parts",o([sg,mc,og,F1,I2])],["req",o([o([o(["01"])])])]]),U1=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),L1=new Map([["parts",o([U1])]]),Gd=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintzero"])]]),T2=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),M2=new Map([["cset","X"],["min",1],["max",16],["opt",!0],["linters",o([])]]),Vd=new Map([["parts",o([Gd,T2,M2])],["dlpkey",o([])]]),Yd=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),lg=new Map([["parts",o([Yd])],["dlpkey",o([o(["7040"])])]]),cg=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Hc=new Map([["parts",o([cg])],["req",o([o([o(["01"]),o(["02"])])])]]),xf=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",o(["lintcsum","lintgcppos2"])]]),dg=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["lintpieceoftotal"])]]),R2=new Map([["parts",o([xf,dg])],["ex",o(["01","37"])],["dlpkey",o([o(["22","10","21"])])]]),O2=new Map([["cset","X"],["min",1],["max",34],["opt",!1],["linters",o(["lintiban"])]]),Xo=new Map([["parts",o([O2])],["req",o([o([o(["415"])])])]]),hl=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),z1=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",o(["linthh"])]]),D2=new Map([["cset","N"],["min",2],["max",2],["opt",!0],["linters",o(["lintmi"])]]),ug=new Map([["cset","N"],["min",2],["max",2],["opt",!0],["linters",o(["lintss"])]]),H1=new Map([["parts",o([hl,z1,D2,ug])],["req",o([o([o(["01"]),o(["02"])])])]]),Ko=new Map([["cset","X"],["min",1],["max",50],["opt",!1],["linters",o([])]]),Ka=new Map([["parts",o([Ko])],["req",o([o([o(["00"]),o(["01"])])])]]),bf=new Map([["cset","Y"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),g1=new Map([["parts",o([bf])],["dlpkey",o([o(["8011"])])]]),di=new Map([["cset","N"],["min",1],["max",12],["opt",!1],["linters",o(["lintnozeroprefix"])]]),Xr=new Map([["parts",o([di])],["req",o([o([o(["8010"])])])],["dlattr",!1]]),is=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),yf=new Map([["parts",o([is])],["req",o([o([o(["01"]),o(["8006"])])])]]),qc=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o(["lintcsumalpha","lintgcppos1"])]]),gc=new Map([["parts",o([qc])],["dlpkey",o([])]]),wf=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o(["lintcsumalpha","lintgcppos1","linthasnondigit"])]]),Qd=new Map([["parts",o([wf])],["req",o([o([o(["01"])])])],["dlattr",!1]]),Gc=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),$x=new Map([["parts",o([Gc])],["ex",o(["8018"])],["dlpkey",o([o(["8019"])])]]),Ua=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),j2=new Map([["parts",o([Ua])],["ex",o(["8017"])],["dlpkey",o([o(["8019"])])]]),B2=new Map([["cset","N"],["min",1],["max",10],["opt",!1],["linters",o([])]]),fg=new Map([["parts",o([B2])],["req",o([o([o(["8017"]),o(["8018"])])])],["dlattr",!1]]),hg=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o([])]]),Wx=new Map([["parts",o([hg])],["req",o([o([o(["415"])])])],["dlattr",!1]]),P2=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",o(["lintcsum","lintgcppos2"])]]),F2=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["lintpieceoftotal"])]]),U2=new Map([["parts",o([P2,F2])],["ex",o(["02","8006"])],["req",o([o([o(["37"])])])]]),ho=new Map([["cset","Z"],["min",1],["max",90],["opt",!1],["linters",o([])]]),Ja=new Map([["parts",o([ho])],["req",o([o([o(["00"]),o(["01","21"]),o(["253"]),o(["255"]),o(["8003"]),o(["8004"]),o(["8006","21"]),o(["8010","8011"]),o(["8017"]),o(["8018"])])])]]),Af=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintcouponcode"])]]),$d=new Map([["parts",o([Af])]]),Sf=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o([])]]),L2=new Map([["parts",o([Sf])],["req",o([o([o(["255"])])])]]),v1=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintcouponposoffer"])]]),kf=new Map([["parts",o([v1])]]),z2=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o([])]]),H2=new Map([["parts",o([z2])],["req",o([o([o(["01"])])])],["dlattr",!1]]),pg=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),mg=new Map([["parts",o([pg])]]),gg=new Map([["cset","X"],["min",1],["max",90],["opt",!1],["linters",o([])]]),Yl=new Map([["parts",o([gg])]]),vg=new Map([["00",l],["01",A],["02",B],["03",V],["10",Q],["11",ee],["12",K],["13",ne],["15",ne],["16",ne],["17",te],["20",oe],["21",be],["22",ye],["235",Qe],["240",Xe],["241",Xe],["242",dt],["243",_t],["250",bt],["251",Pt],["253",zt],["254",Yt],["255",rn],["30",Jt],["3100",Qt],["3101",Qt],["3102",Qt],["3103",Qt],["3104",Qt],["3105",Qt],["3110",cn],["3111",cn],["3112",cn],["3113",cn],["3114",cn],["3115",cn],["3120",Ht],["3121",Ht],["3122",Ht],["3123",Ht],["3124",Ht],["3125",Ht],["3130",Y],["3131",Y],["3132",Y],["3133",Y],["3134",Y],["3135",Y],["3140",se],["3141",se],["3142",se],["3143",se],["3144",se],["3145",se],["3150",ve],["3151",ve],["3152",ve],["3153",ve],["3154",ve],["3155",ve],["3160",pe],["3161",pe],["3162",pe],["3163",pe],["3164",pe],["3165",pe],["3200",de],["3201",de],["3202",de],["3203",de],["3204",de],["3205",de],["3210",Ee],["3211",Ee],["3212",Ee],["3213",Ee],["3214",Ee],["3215",Ee],["3220",xe],["3221",xe],["3222",xe],["3223",xe],["3224",xe],["3225",xe],["3230",je],["3231",je],["3232",je],["3233",je],["3234",je],["3235",je],["3240",ze],["3241",ze],["3242",ze],["3243",ze],["3244",ze],["3245",ze],["3250",Be],["3251",Be],["3252",Be],["3253",Be],["3254",Be],["3255",Be],["3260",Ze],["3261",Ze],["3262",Ze],["3263",Ze],["3264",Ze],["3265",Ze],["3270",Ve],["3271",Ve],["3272",Ve],["3273",Ve],["3274",Ve],["3275",Ve],["3280",Me],["3281",Me],["3282",Me],["3283",Me],["3284",Me],["3285",Me],["3290",st],["3291",st],["3292",st],["3293",st],["3294",st],["3295",st],["3300",Tt],["3301",Tt],["3302",Tt],["3303",Tt],["3304",Tt],["3305",Tt],["3310",Et],["3311",Et],["3312",Et],["3313",Et],["3314",Et],["3315",Et],["3320",wt],["3321",wt],["3322",wt],["3323",wt],["3324",wt],["3325",wt],["3330",gt],["3331",gt],["3332",gt],["3333",gt],["3334",gt],["3335",gt],["3340",Vt],["3341",Vt],["3342",Vt],["3343",Vt],["3344",Vt],["3345",Vt],["3350",$n],["3351",$n],["3352",$n],["3353",$n],["3354",$n],["3355",$n],["3360",Dn],["3361",Dn],["3362",Dn],["3363",Dn],["3364",Dn],["3365",Dn],["3370",zn],["3371",zn],["3372",zn],["3373",zn],["3374",zn],["3375",zn],["3400",Fn],["3401",Fn],["3402",Fn],["3403",Fn],["3404",Fn],["3405",Fn],["3410",_n],["3411",_n],["3412",_n],["3413",_n],["3414",_n],["3415",_n],["3420",kn],["3421",kn],["3422",kn],["3423",kn],["3424",kn],["3425",kn],["3430",Ei],["3431",Ei],["3432",Ei],["3433",Ei],["3434",Ei],["3435",Ei],["3440",nn],["3441",nn],["3442",nn],["3443",nn],["3444",nn],["3445",nn],["3450",qn],["3451",qn],["3452",qn],["3453",qn],["3454",qn],["3455",qn],["3460",Gn],["3461",Gn],["3462",Gn],["3463",Gn],["3464",Gn],["3465",Gn],["3470",Vn],["3471",Vn],["3472",Vn],["3473",Vn],["3474",Vn],["3475",Vn],["3480",ti],["3481",ti],["3482",ti],["3483",ti],["3484",ti],["3485",ti],["3490",Bi],["3491",Bi],["3492",Bi],["3493",Bi],["3494",Bi],["3495",Bi],["3500",_i],["3501",_i],["3502",_i],["3503",_i],["3504",_i],["3505",_i],["3510",rr],["3511",rr],["3512",rr],["3513",rr],["3514",rr],["3515",rr],["3520",ar],["3521",ar],["3522",ar],["3523",ar],["3524",ar],["3525",ar],["3530",Pi],["3531",Pi],["3532",Pi],["3533",Pi],["3534",Pi],["3535",Pi],["3540",Lr],["3541",Lr],["3542",Lr],["3543",Lr],["3544",Lr],["3545",Lr],["3550",xr],["3551",xr],["3552",xr],["3553",xr],["3554",xr],["3555",xr],["3560",br],["3561",br],["3562",br],["3563",br],["3564",br],["3565",br],["3570",yr],["3571",yr],["3572",yr],["3573",yr],["3574",yr],["3575",yr],["3600",Tr],["3601",Tr],["3602",Tr],["3603",Tr],["3604",Tr],["3605",Tr],["3610",Hr],["3611",Hr],["3612",Hr],["3613",Hr],["3614",Hr],["3615",Hr],["3620",qr],["3621",qr],["3622",qr],["3623",qr],["3624",qr],["3625",qr],["3630",Gr],["3631",Gr],["3632",Gr],["3633",Gr],["3634",Gr],["3635",Gr],["3640",Vr],["3641",Vr],["3642",Vr],["3643",Vr],["3644",Vr],["3645",Vr],["3650",or],["3651",or],["3652",or],["3653",or],["3654",or],["3655",or],["3660",lr],["3661",lr],["3662",lr],["3663",lr],["3664",lr],["3665",lr],["3670",Mr],["3671",Mr],["3672",Mr],["3673",Mr],["3674",Mr],["3675",Mr],["3680",Yr],["3681",Yr],["3682",Yr],["3683",Yr],["3684",Yr],["3685",Yr],["3690",Hi],["3691",Hi],["3692",Hi],["3693",Hi],["3694",Hi],["3695",Hi],["37",ta],["3900",Ci],["3901",Ci],["3902",Ci],["3903",Ci],["3904",Ci],["3905",Ci],["3906",Ci],["3907",Ci],["3908",Ci],["3909",Ci],["3910",na],["3911",na],["3912",na],["3913",na],["3914",na],["3915",na],["3916",na],["3917",na],["3918",na],["3919",na],["3920",Qr],["3921",Qr],["3922",Qr],["3923",Qr],["3924",Qr],["3925",Qr],["3926",Qr],["3927",Qr],["3928",Qr],["3929",Qr],["3930",$r],["3931",$r],["3932",$r],["3933",$r],["3934",$r],["3935",$r],["3936",$r],["3937",$r],["3938",$r],["3939",$r],["3940",pa],["3941",pa],["3942",pa],["3943",pa],["3950",Ta],["3951",Ta],["3952",Ta],["3953",Ta],["3954",Ta],["3955",Ta],["400",xs],["401",Gt],["402",Zi],["403",cr],["410",Ma],["411",Ma],["412",Ma],["413",Ma],["414",Nt],["415",Yn],["416",Jn],["417",Wn],["420",Ii],["421",Gi],["422",Vi],["423",gr],["424",Sa],["425",Wi],["426",er],["427",Oi],["4300",Ya],["4301",Ya],["4302",Ts],["4303",Ms],["4304",ys],["4305",ys],["4306",ys],["4307",Ds],["4308",Eo],["4309",lt],["4310",jn],["4311",jn],["4312",dr],["4313",va],["4314",ws],["4315",ws],["4316",ws],["4317",ll],["4318",xa],["4319",Ss],["4320",It],["4321",vi],["4322",vi],["4323",vi],["4324",Cn],["4325",Cn],["4326",xi],["4330",da],["4331",Qa],["4332",Nl],["4333",Wa],["7001",Io],["7002",u1],["7003",cl],["7004",To],["7005",Bc],["7006",lc],["7007",Dr],["7008",Mo],["7009",cc],["7010",B1],["7011",dl],["7020",h1],["7021",ul],["7022",fl],["7023",ql],["7030",Cs],["7031",Cs],["7032",Cs],["7033",Cs],["7034",Cs],["7035",Cs],["7036",Cs],["7037",Cs],["7038",Cs],["7039",Cs],["7040",Ud],["7041",S2],["710",Wo],["711",Wo],["712",Wo],["713",Wo],["714",Wo],["715",Wo],["716",Wo],["7230",fo],["7231",fo],["7232",fo],["7233",fo],["7234",fo],["7235",fo],["7236",fo],["7237",fo],["7238",fo],["7239",fo],["7240",P1],["7241",Ld],["7242",ff],["7250",C2],["7251",Lc],["7252",pf],["7253",_2],["7254",_2],["7255",hc],["7256",rg],["7257",zc],["7258",gf],["7259",vf],["8001",N2],["8002",L1],["8003",Vd],["8004",lg],["8005",Hc],["8006",R2],["8007",Xo],["8008",H1],["8009",Ka],["8010",g1],["8011",Xr],["8012",yf],["8013",gc],["8014",Qd],["8017",$x],["8018",j2],["8019",fg],["8020",Wx],["8026",U2],["8030",Ja],["8110",$d],["8111",L2],["8112",kf],["8200",H2],["90",mg],["91",Yl],["92",Yl],["93",Yl],["94",Yl],["95",Yl],["96",Yl],["97",Yl],["98",Yl],["99",Yl]]);if(e.gs1syntax=vg,ce(n[--t],"ai")){kp(n[--t],"("),n[--t]||(t--,n[t++]="bwipp.GS1aiMissingOpenParen#2494",n[t++]="AIs must start with '('",Z()),n[t-1]=1/0;var xg=n[--t],q2=n[--t];for(n[t++]=xg,n[t++]=q2;;){var bg=n[t-1];if(bg.length==0){t--;break}sn(n[--t],")"),n[--t]||(Qu(),n[t++]="bwipp.GS1aiMissingCloseParen#2500",n[t++]="AIs must end with ')'",Z());var Xx=n[--t];n[t-1]=Xx;var yg=n[--t],wg=n[--t];if(n[t++]=yg,sn(wg,"("),n[--t]){var Ag=n[--t];n[t-1]=Ag;var G2=n[--t],Sg=n[--t];n[t++]=G2,n[t++]=Sg}else n[t++]=""}var V2=Ur();if(n[t++]=V2,V2>0)for(var Y2=n[--t],Cf=Y2,kg=~~(Y2/2)+1;Cf>=kg;Cf-=1)oa(Cf,-1);else t--;Rn(o(~~(Ur()/2))),e.ais=n[--t],Rn(o(Ur())),n[t++]=1/0;var Kx=n[--t],Cg=n[--t];n[t++]=Kx,Ie(Cg,function(){var yt=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);n[t++]=yt,ja()}),e.vals=o(),t--}else{if(kp(n[--t],"http://"),n[--t]||(kp(n[--t],"HTTP://"),n[--t]||(kp(n[--t],"https://"),n[--t]||(kp(n[--t],"HTTPS://"),n[--t]||(t--,n[t++]="bwipp.GS1dlURIbadScheme#2519",n[t++]="Scheme must be http:// HTTP:// https:// or HTTPS://",Z())))),t--,sn(n[--t],"/"),n[--t]||(t--,n[t++]="bwipp.GS1dlMissingDomainOrPathInfo#2525",n[t++]="URI must contain a domain and path info",Z()),t-=2,sn(n[--t],"#"),n[--t]){var Vc=n[--t];n[t-1]=Vc;var Eg=n[--t];n[t-1]=Eg}if(sn(n[--t],"?"),!n[--t]){var Ef=n[--t];n[t++]="",n[t++]=null,n[t++]=Ef}for(e.pp=n[--t],t--,e.qp=n[--t],n[t++]=1/0,n[t++]=0,n[t++]=0,n[t++]=e.pp;;){if(sn(n[--t],"/"),!n[--t]){t--;break}var _f=n[--t];n[t-1]=_f.length+1;var _g=n[--t],Q2=n[--t],Jx=n[t-1];n[t++]=R(_g+Jx),n[t++]=Q2}Rn(o(Ur()-1)),e.pipos=n[--t],t-=2,e.pipos.length<=1&&(n[t++]="bwipp.GS1dlNoAIinfo#2550",n[t++]="The path was too short to contain AI info",Z()),n[t++]=!1;for(var Yc=e.pipos.length-2;Yc>=0;Yc-=2){var $2=h(e.pipos,Yc),W2=O(e.pp,$2,R(h(e.pipos,Yc+1)-$2)-1),Ig=h(e.gs1syntax,W2)!==void 0;if(n[t++]=Yc,n[t++]=W2,Ig){var Ng=h(h(e.gs1syntax,n[--t]),"dlpkey")!==void 0;if(Ng){var X2=n[--t];n[t-1]=X2,n[t++]=!0;break}}else t--;t--}n[--t]||(n[t++]="bwipp.GS1dlNoAIinfo#2569",n[t++]="The path does not contain a valid primary key",Z());var K2=h(e.pipos,n[--t]);for(e.pp=O(e.pp,K2,R(e.pp.length-K2)),e.uriunescape=function(){for(e.qq=n[--t],e.in=n[--t],e.out=fe(e.in.length),n[t++]=0,n[t++]=0;;){var yt=n[t-2];if(yt>=e.in.length)break;var Xt=n[t-2],ii=h(e.in,Xt);if(n[t++]=ii,ii==43&&e.qq){t--;var ri=n[--t];C(e.out,ri,32);var yi=n[--t];n[t++]=yi+1,n[t++]=ri+1}else{var hn=n[t-1],Sn=n[t-3];if(hn==37&&Sn<e.in.length-2){t--;var wn=n[t-2],gn=O(e.in,wn+1,2);n[t++]=0;for(var Bn=0,tr=gn.length;Bn<tr;Bn++){var Kr=h(gn,Bn);if(n[t++]=Kr,Kr>=48&&Kr<=57){var ba=n[--t];n[t++]=ba-48}else{var po=n[t-1];if(po>=65&&po<=70){var Ps=n[--t];n[t++]=Ps-55}else{var ur=n[t-1];if(ur>=97&&ur<=102){var Zs=n[--t];n[t++]=Zs-87}else t-=2,n[t++]="bwipp.GS1dlBadHexCharacter#2590",n[t++]="Invalid hex character",Z()}}var eo=n[--t],gl=n[--t];n[t++]=R(eo+gl*16)}var La=n[--t],mo=n[--t];C(e.out,mo,La);var b1=n[--t];n[t++]=b1+3,n[t++]=mo+1}else{var ps=n[--t],Jo=n[--t];C(e.out,Jo,ps);var Zo=n[--t];n[t++]=Zo+1,n[t++]=Jo+1}}}e.out=O(e.out,0,n[--t]),n[t-1]=e.out},e.isvaliddlpkeyseq=function(){e.in=n[--t],n[t++]=!1,Ie(h(h(e.gs1syntax,h(e.in,0)),"dlpkey"),function(){for(e.seq=n[--t],e.i=1,e.j=0;!(e.i>=e.in.length||e.j>=e.seq.length);)ce(h(e.in,e.i),h(e.seq,e.j))&&(e.i=e.i+1),e.j=e.j+1;if(e.i==e.in.length)return n[t-1]=!0,!0})},e.ais=o(99),e.vals=o(99),n[t++]=0,n[t++]=e.pp;;){if(sn(n[--t],"/"),n[--t]){var Tg=n[--t];t--;var J2=n[--t],Mg=n[t-1];if(C(e.ais,Mg,Tg),sn(J2,"/"),n[--t]){var Rg=n[--t];n[t-1]=Rg}else{var Zx=n[--t];n[t++]="",n[t++]=Zx}var Z2=n[--t],Og=n[t-2];n[t++]=e.vals,n[t++]=Og,n[t++]=Z2,n[t++]=!1,e.uriunescape();var Dg=n[--t],e0=n[--t];C(n[--t],e0,Dg)}else{t--;break}var jg=n[--t],Bg=n[--t];n[t++]=Bg+1,n[t++]=jg}var t0=n[--t];for(e.plen=t0,n[t++]=t0,t0>1&&(n[t++]=O(e.ais,0,e.plen),e.isvaliddlpkeyseq(),n[--t]||(t--,n[t++]="bwipp.GS1dlBadPathInfo#2645",n[t++]="The AIs in the path are not a valid key-qualifier sequence for the key",Z())),n[t++]=e.qp;;){var eb=n[t-1];if(eb.length==0){t--;break}if(sn(n[--t],"&"),n[--t]){var Pg=n[--t];n[t-1]=Pg}else{var Wd=n[--t];n[t++]="",n[t++]=Wd}if(sn(n[--t],"="),n[--t]){var n0=n[t-1];if(n[t++]=!0,Ie(n0,function(){var yt=n[--t],Xt=n[--t];n[t++]=Xt&&yt>=48&&yt<=57}),n[--t]){var If=n[--t];t--;var Fg=n[--t],i0=n[t-2];C(e.ais,i0,If),n[t++]=e.vals,n[t++]=i0,n[t++]=Fg,n[t++]=!0,e.uriunescape();var Xd=n[--t],Ug=n[--t];C(n[--t],Ug,Xd);var r0=n[--t],Lg=n[--t];n[t++]=Lg+1,n[t++]=r0}else t-=3}else t--}for(var a0=n[t-1],Nf=O(e.ais,e.plen,R(a0-e.plen)),Tf=0,zg=Nf.length;Tf<zg;Tf++){var q1=h(Nf,Tf),Hg=h(e.gs1syntax,q1)!==void 0;if(n[t++]=q1,Hg){var qg=n[t-1],s0=h(e.gs1syntax,qg),Mf=h(s0,"dlattr")!==void 0;if(n[t++]=s0,n[t++]="dlattr",Mf){var Gg=n[--t],o0=h(n[--t],Gg);n[t++]=o0}else t-=2,n[t++]=!0}else n[t++]=e.dontlint;if(!n[--t]){var l0=n[t-1],c0=l0.length,Rf=fe(c0+46);H(Rf,0,"AI ("),H(Rf,4,l0),H(Rf,c0+4,") is not a valid GS1 DL URI data attribute"),n[t++]=Rf;var d0=n[--t];n[t-1]=d0;var rs=n[--t];n[t++]="bwipp.GS1dlInvalidDataAttribute#2679",n[t++]=rs,Z()}t--}for(var Bs=n[t-1],u0=O(e.ais,e.plen,R(Bs-e.plen)),Of=0,Vg=u0.length;Of<Vg;Of++){n[t++]=h(u0,Of);for(var Df=e.plen;Df>=1;Df-=1){var Kd=n[t-1];n[t++]=Df,n[t++]=Kd,n[t++]=1/0,W(O(e.ais,0,e.plen)),oa(Ur()+3,-2);var Yg=n[--t],jf=n[--t];n[t++]=Yg,oa(jf,1);var Qg=o();if(n[t++]=Qg,e.isvaliddlpkeyseq(),n[--t]){var tb=n[--t];n[t-1]=tb;var Jd=n[t-1],Bf=Jd.length,Zd=fe(Bf+50);H(Zd,0,"AI ("),H(Zd,4,Jd),H(Zd,Bf+4,") from query params should be in the path info"),n[t++]=Zd;var $g=n[--t];n[t-1]=$g;var Wg=n[--t];n[t++]="bwipp.GS1dlAttributeMustBeQualifier#2696",n[t++]=Wg,Z()}}t--}var Pf=n[--t];e.ais=O(e.ais,0,Pf),e.vals=O(e.vals,0,Pf);for(var Qc=0,f0=e.ais.length-1;Qc<=f0;Qc+=1){if(n[t++]=Qc,ce(h(e.ais,Qc),"01")){var Xg=n[t-1],Ff=h(e.vals,Xg),$c=Ff.length;if(n[t++]=Ff,$c==8||$c==12||$c==13){var Uf=zi(fe(14),"00000000000000");n[t++]=Uf,n[t++]=Uf;var h0=n[t-3];H(n[t-1],14-h0.length,h0);var p0=n[t-2];t-=3;var Kg=n[t-1];C(e.vals,Kg,p0)}else t--}t--}}n[t++]=1/0;for(var Ql=o(["00","01","02","03","04","11","12","13","14","15","16","17","18","19","20","31","32","33","34","35","36","41"]),eu=0,nb=Ql.length;eu<nb;eu++){var m0=h(Ql,eu);n[t++]=m0,n[t++]=m0}e.aifixed=rt(),n[t++]=1/0;for(var $l=e.ais,tu=0,Jg=$l.length;tu<Jg;tu++){var nu=h($l,tu);if(n[t++]=!0,n[t++]=nu,nu.length>=2){var iu=h(e.aifixed,O(n[--t],0,2))!==void 0;iu&&(n[t-1]=!1)}else t--}e.fncs=o(),n[t++]=1/0,n[t++]=0;for(var ra=0,ib=82;ra<ib;ra++){var Zg=n[--t];n[t++]=h(`!"%&'()*+,-./0123456789:;<=>?ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`,ra),n[t++]=Zg,n[t++]=Zg+1}t--,e.cset82=rt(),n[t++]=1/0,n[t++]=0;for(var Lf=0,ru=39;Lf<ru;Lf++){var x1=n[--t];n[t++]=h("#-/0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",Lf),n[t++]=x1,n[t++]=x1+1}t--,e.cset39=rt(),n[t++]=1/0,n[t++]=0;for(var zf=0,ev=32;zf<ev;zf++){var Wc=n[--t];n[t++]=h("23456789ABCDEFGHJKLMNPQRSTUVWXYZ",zf),n[t++]=Wc,n[t++]=Wc+1}t--,e.cset32=rt(),n[t++]=1/0,n[t++]=0;for(var pl=0,tv=64;pl<tv;pl++){var Hf=n[--t];n[t++]=h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",pl),n[t++]=Hf,n[t++]=Hf+1}t--,e.cset64=rt(),e.lintnumeric=function(){var yt=n[--t];if(n[t++]=!0,Ie(yt,function(){var Xt=n[--t];if(Xt<48||Xt>57)return n[t-1]=!1,!0}),!n[--t])return t--,n[t++]="bwipp.GS1notNumeric#2770",n[t++]="Not numeric",n[t++]=!1,!0},e.lintcset82=function(){var yt=n[--t];if(n[t++]=!0,Ie(yt,function(){var Xt=h(e.cset82,n[--t])!==void 0;if(!Xt)return n[t-1]=!1,!0}),!n[--t])return t--,n[t++]="bwipp.GS1badCSET82character#2775",n[t++]="Invalid CSET 82 character",n[t++]=!1,!0},e.lintcset39=function(){var yt=n[--t];if(n[t++]=!0,Ie(yt,function(){var Xt=h(e.cset39,n[--t])!==void 0;if(!Xt)return n[t-1]=!1,!0}),!n[--t])return t--,n[t++]="bwipp.GS1badCSET39character#2780",n[t++]="Invalid CSET 39 character",n[t++]=!1,!0},e.lintcset64=function(){var yt=n[t-1];if(sn(yt,"="),n[--t]){var Xt=n[--t];n[t-1]=Xt;var ii=n[--t];n[t++]=ii.length%3,n[t++]=ii;var ri=n[t-2],yi=n[t-3];n[t-3]=n[t-1],t-=2,n[t++]=yi,n[t++]=ri,n[t++]=!1,ri==1&&ce(yi,"=")&&(n[t-1]=!0);var hn=n[t-2],Sn=n[t-3];if(hn==2&&Sn.length==0&&(n[t-1]=!0),!n[--t])return t-=5,n[t++]="bwipp.GS1badCSET64padding#2789",n[t++]="Invalid CSET 64 padding",n[t++]=!1,!0;t-=2;var wn=n[--t],gn=n[--t];n[t++]=wn,n[t++]=gn}t--;var Bn=n[--t];if(n[t++]=!0,Ie(Bn,function(){var tr=h(e.cset64,n[--t])!==void 0;if(!tr)return n[t-1]=!1,!0}),!n[--t])return t--,n[t++]="bwipp.GS1badCSET64character#2795",n[t++]="Invalid CSET 64 character",n[t++]=!1,!0},e.lintgcppos1=function(){var yt=n[t-1];if(yt.length<2)return t-=2,n[t++]="bwipp.GS1gcpTooShort#2799",n[t++]="Value is too short to contain a GS1 Company Prefix",n[t++]=!1,!0;var Xt=n[--t],ii=h(Xt,0),ri=h(Xt,1);if(ii<48||ii>57||ri<48||ri>57)return t--,n[t++]="bwipp.GS1badGCP#2802",n[t++]="Non-numeric GS1 Company Prefix",n[t++]=!1,!0},e.lintgcppos2=function(){var yt=n[t-1];if(yt.length<1)return t-=2,n[t++]="bwipp.GS1valueTooShortForOffsetGCP#2807",n[t++]="Value is too short to contain an offset GS1 Company Prefix",n[t++]=!1,!0;var Xt=n[--t];n[t++]=O(Xt,1,Xt.length-1),e.lintgcppos1()},e.lintimporteridx=function(){if(sn("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",n[--t]),!n[--t])return t-=2,n[t++]="bwipp.GS1badImporterIndex#2813",n[t++]="Invalid importer index",n[t++]=!1,!0;t-=3},e.lintcsum=function(){n[t++]=1/0;var yt=n[--t],Xt=n[--t],ii=Xt.length%2==0?3:1;n[t++]=yt,n[t++]=ii,Ie(Xt,function(){var Bn=n[--t],tr=n[--t];n[t++]=(Bn-48)*tr,n[t++]=4-tr}),t--;var ri=Ur()+1;n[t++]=0;for(var yi=0,hn=ri-1;yi<hn;yi++){var Sn=n[--t],wn=n[--t];n[t++]=R(wn+Sn)}var gn=n[--t];if(n[t-1]=gn,n[--t]%10!=0)return t--,n[t++]="bwipp.GS1badChecksum#2822",n[t++]="Bad checksum",n[t++]=!1,!0},e.lintcsumalpha=function(){var yt=n[t-1];if(yt.length<2)return t-=2,n[t++]="bwipp.GS1alphaTooShort#2826",n[t++]="Alphanumeric string is too short to check",n[t++]=!1,!0;var Xt=n[t-1];n[t++]=Xt.length-2;var ii=1/0,ri=O(Xt,0,Xt.length-2);n[t++]=ii,Ie(ri,function(){var Jo=n[t-1],Zo=h(e.cset82,Jo)!==void 0;if(Zo){var G1=h(e.cset82,n[--t]);n[t++]=G1}else return n[t++]=-1,!0});var yi=n[t-1];if(yi==-1)return Qu(),t-=3,n[t++]="bwipp.GS1UnknownCSET82Character#2832",n[t++]="Unknown CSET 82 character",n[t++]=!1,!0;Rn(o(Ur()));var hn=n[--t];n[t-1]=hn;var Sn=n[t-2],wn=O(n[t-3],Sn,2);n[t-3]=n[t-1],t-=2;var gn=1/0,Bn=wn;n[t++]=gn,Ie(Bn,function(){var Jo=n[t-1],Zo=h(e.cset32,Jo)!==void 0;if(Zo){var G1=h(e.cset32,n[--t]);n[t++]=G1}else return n[t++]=-1,!0});var tr=n[t-1];if(tr==-1)return Qu(),t-=2,n[t++]="bwipp.GS1UnknownCSET32Character#2838",n[t++]="Unknown CSET 32 character",n[t++]=!1,!0;Rn(o(Ur()));var Kr=n[--t];n[t-1]=Kr;var ba=n[--t],po=n[--t],Ps=o([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83]),ur=po.length;if(n[t++]=R((h(ba,0)<<5)+h(ba,1)),n[t++]=po,n[t++]=Ps,n[t++]=ur,ur>Ps.length)return t-=5,n[t++]="bwipp.GS1alphaTooLong#2843",n[t++]="Alphanumeric string is too long to check",n[t++]=!1,!0;for(var Zs=n[--t],eo=O(n[--t],0,Zs),gl=0,La=eo.length;gl<La;gl++){var mo=n[--t];n[t++]=h(eo,gl),n[t++]=mo}var b1=n[--t];n[t++]=0,Ie(b1,function(){var Jo=n[t-3],Zo=n[t-1],G1=n[t-2];t-=3,n[t++]=R(G1+Jo*Zo)});var ps=n[--t];if(n[--t]!=ps%1021)return t--,n[t++]="bwipp.GS1badAlphaCheckCharacters#2846",n[t++]="Bad alphanumeric check characters",n[t++]=!1,!0},n[t++]=1/0;for(var g0=o(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]),au=0,v0=g0.length;au<v0;au++){var su=h(g0,au);n[t++]=su,n[t++]=su}e.iso3166=rt(),e.lintiso3166=function(){var yt=h(e.iso3166,n[--t])!==void 0;if(!yt)return t--,n[t++]="bwipp.GS1UnknownCountry#2873",n[t++]="Unknown country code",n[t++]=!1,!0},e.lintiso3166999=function(){var yt=n[t-1];if(qe(yt,"999")){var Xt=h(e.iso3166,n[--t])!==void 0;if(!Xt)return t--,n[t++]="bwipp.GS1UnknownCountryOr999#2878",n[t++]="Unknown country code or not 999",n[t++]=!1,!0}else t--},n[t++]=1/0;for(var x0=o(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]),Ml=0,as=x0.length;Ml<as;Ml++){var qf=h(x0,Ml);n[t++]=qf,n[t++]=qf}e.iso3166alpha2=rt(),e.lintiso3166alpha2=function(){var yt=h(e.iso3166alpha2,n[--t])!==void 0;if(!yt)return t--,n[t++]="bwipp.GS1UnknownCountryAlpha#2914",n[t++]="Unknown country alpha code",n[t++]=!1,!0},n[t++]=1/0;for(var b0=o(["008","012","032","036","044","048","050","051","052","060","064","068","072","084","090","096","104","108","116","124","132","136","144","152","156","170","174","188","191","192","203","208","214","222","230","232","238","242","262","270","292","320","324","328","332","340","344","348","352","356","360","364","368","376","388","392","396","398","400","404","408","410","414","417","418","422","426","430","434","446","454","458","462","480","484","496","498","504","512","516","524","532","533","548","554","558","566","578","586","590","598","600","604","608","634","643","646","654","682","690","694","702","704","706","710","728","748","752","756","760","764","776","780","784","788","800","807","818","826","834","840","858","860","882","886","901","925","927","928","929","930","931","932","933","934","936","938","940","941","943","944","946","947","948","949","950","951","952","953","955","956","957","958","959","960","961","962","963","964","965","967","968","969","970","971","972","973","975","976","977","978","979","980","981","984","985","986","990","994","997","999"]),ss=0,rb=b0.length;ss<rb;ss++){var y0=h(b0,ss);n[t++]=y0,n[t++]=y0}e.iso4217=rt(),e.lintiso4217=function(){var yt=h(e.iso4217,n[--t])!==void 0;if(!yt)return t--,n[t++]="bwipp.GS1UnknownCurrency#2945",n[t++]="Unknown currency code",n[t++]=!1,!0},e.lintiso5218=function(){var yt=n[--t];if(qe(yt,"0")&&qe(yt,"1")&&qe(yt,"2")&&qe(yt,"9"))return t--,n[t++]="bwipp.GS1biologicalSexCode#2950",n[t++]="Invalid biological sex code",n[t++]=!1,!0},e.lintiban=function(){var yt=n[t-1];if(yt.length<=4)return t-=2,n[t++]="bwipp.GS1tooShort#2955",n[t++]="IBAN too short",n[t++]=!1,!0;var Xt=n[t-1];if(n[t++]=!0,Ie(Xt,function(){var Kr=fe(1);n[t++]=Kr,n[t++]=Kr,n[t++]=0,oa(4,-1);var ba=n[--t],po=n[--t];if(C(n[--t],po,ba),sn("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n[--t]),!n[--t])return t-=2,n[t++]=!1,!0;t-=3}),!n[--t])return t--,n[t++]="bwipp.GS1badIBANcharacter#2962",n[t++]="Invalid IBAN character",n[t++]=!1,!0;var ii=n[t-1],ri=1/0,yi=ii;n[t++]=ri;var hn=1/0,Sn=yi;n[t++]=hn,Ie(Sn),oa(Ur(),-4),Rn(o(Ur()));var wn=n[--t];n[t-1]=wn,Ie(n[--t],function(){var Kr=n[--t]-48;if(n[t++]=Kr,Kr>9){var ba=n[--t]-7;n[t++]=~~(ba/10),n[t++]=ba%10}}),Rn(o(Ur()));var gn=n[--t];n[t-1]=gn;var Bn=n[--t];if(n[t++]=0,Ie(Bn,function(){var Kr=n[--t],ba=n[--t];n[t++]=R(Kr+ba*10)%97}),n[--t]!=1)return t-=2,n[t++]="bwipp.GS1badIBANchecksum#2967",n[t++]="IBAN checksum incorrect",n[t++]=!1,!0;var tr=O(n[--t],0,2);n[t++]=tr,e.lintiso3166alpha2()},e.lintzero=function(){if(qe(n[--t],"0"))return t--,n[t++]="bwipp.GS1zeroRequired#2972",n[t++]="Zero is required",n[t++]=!1,!0},e.lintnonzero=function(){var yt=n[--t];if(n[t++]=!1,Ie(yt,function(){n[--t]!=48&&(n[t-1]=!0)}),!n[--t])return t--,n[t++]="bwipp.GS1zeroNotPermitted#2977",n[t++]="Zero not permitted",n[t++]=!1,!0},e.lintnozeroprefix=function(){var yt=n[--t];if(yt.length>1&&h(yt,0)==48)return t--,n[t++]="bwipp.GS1badZeroPrefix#2982",n[t++]="Zero prefix is not permitted",n[t++]=!1,!0},e.linthasnondigit=function(){var yt=n[--t];if(n[t++]=!1,Ie(yt,function(){var Xt=n[--t];if(Xt<48||Xt>57)return n[t-1]=!0,!0}),!n[--t])return n[t++]="bwipp.GS1requiresNonDigit#2988",n[t++]="A non-digit character is required",n[t++]=!1,!0},e.linthyphen=function(){if(qe(n[--t],"-"))return t--,n[t++]="bwipp.GS1hyphenRequired#2992",n[t++]="A hyphen is required",n[t++]=!1,!0},e.lintyyyymmd0=function(){var yt=n[t-1],Xt=Ye(O(yt,4,2));if(Xt<1||Xt>12)return t--,n[t++]="bwipp.GS1badMonth#2996",n[t++]="Invalid month",n[t++]=!1,!0;var ii=n[t-1],ri=Ye(O(ii,0,4));n[t++]=ri%400==0||ri%4==0&&ri%100!=0,n[t++]=1/0,n[t++]=31,oa(3,-1);var yi=n[--t]?29:28;n[t++]=yi,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=30,n[t++]=31;var hn=o(),Sn=n[--t];if(h(hn,Ye(O(Sn,4,2))-1)<Ye(O(Sn,6,2)))return t--,n[t++]="bwipp.GS1badDay#3000",n[t++]="Invalid day of month",n[t++]=!1,!0},e.lintyyyymmdd=function(){var yt=n[t-1];if(yt.length!=8)return t--,n[t++]="bwipp.GS1badDateLength#3004",n[t++]="Invalid length for yyyymmdd date",n[t++]=!1,!0;var Xt=n[t-1];if(Ye(O(Xt,6,2))<1)return t--,n[t++]="bwipp.GS1badDay#3005",n[t++]="Invalid day of month",n[t++]=!1,!0;e.lintyyyymmd0()},e.lintyymmd0=function(){var yt=n[t-1],Xt=Ye(O(yt,0,2)),ii=Xt-21;n[t++]=Xt,n[t++]=ii,ii>=51?n[t-1]="19":n[--t]<=-50?n[t++]="21":n[t++]="20";var ri=n[--t];n[t-1]=ri;var yi=fe(8);n[t++]=yi,n[t++]=yi,n[t++]=0,oa(4,-1);var hn=n[--t],Sn=n[--t];H(n[--t],Sn,hn);var wn=n[t-1];n[t++]=wn,n[t++]=2,oa(4,-1);var gn=n[--t],Bn=n[--t];H(n[--t],Bn,gn),e.lintyyyymmd0()},e.lintyymmdd=function(){var yt=n[t-1];if(yt.length!=6)return t--,n[t++]="bwipp.GS1badDateLength#3017",n[t++]="Invalid length for yymmdd date",n[t++]=!1,!0;var Xt=n[t-1];if(Ye(O(Xt,4,2))<1)return t--,n[t++]="bwipp.GS1badDay#3018",n[t++]="Invalid day of month",n[t++]=!1,!0;e.lintyymmd0()},e.linthh=function(){if(Ye(O(n[--t],0,2))>23)return t-=2,n[t++]="bwipp.GS1badHour#3023",n[t++]="Invalid hour of day",n[t++]=!1,!0},e.lintmi=function(){if(Ye(O(n[--t],0,2))>59)return t--,n[t++]="bwipp.GS1badMinute#3027",n[t++]="Invalid minute in the hour",n[t++]=!1,!0},e.lintss=function(){if(Ye(O(n[--t],0,2))>59)return t--,n[t++]="bwipp.GS1badSecond#3031",n[t++]="Invalid second in the minute",n[t++]=!1,!0},e.linthhmi=function(){var yt=n[t-1];if(Ye(O(yt,0,2))>23)return t-=2,n[t++]="bwipp.GS1badHour#3035",n[t++]="Invalid hour of day",n[t++]=!1,!0;if(Ye(O(n[--t],2,2))>59)return t--,n[t++]="bwipp.GS1badMinute#3036",n[t++]="Invalid minute in the hour",n[t++]=!1,!0},e.lintmmoptss=function(){var yt=n[t-1],Xt=yt.length;if(Xt!=2&&Xt!=4)return t--,n[t++]="bwipp.GS1badTimeLength#3041",n[t++]="Invalid length for optional minutes and seconds",n[t++]=!1,!0;var ii=n[t-1];if(Ye(O(ii,0,2))>59)return t-=2,n[t++]="bwipp.GS1badMinute#3043",n[t++]="Invalid minute in the hour",n[t++]=!1,!0;var ri=n[t-1];if(ri.length>=4){var yi=n[t-1];if(Ye(O(yi,2,2))>59)return t-=2,n[t++]="bwipp.GS1badSecond#3045",n[t++]="Invalid second in the minute",n[t++]=!1,!0}t--},e.lintyesno=function(){var yt=n[--t];if(qe(yt,"0")&&qe(yt,"1"))return t--,n[t++]="bwipp.GS1badBoolean#3052",n[t++]="Neither 0 nor 1 for yes or no",n[t++]=!1,!0},e.lintwinding=function(){var yt=n[--t];if(qe(yt,"0")&&qe(yt,"1")&&qe(yt,"9"))return t--,n[t++]="bwipp.GS1badWinding#3058",n[t++]="Invalid winding direction",n[t++]=!1,!0},e.lintpieceoftotal=function(){var yt=n[t-1];if(yt.length%2!=0)return t-=2,n[t++]="bwipp.GS1badPieceTotalLength#3063",n[t++]="Invalid piece/total length",n[t++]=!1,!0;var Xt=n[t-1],ii=Ye(O(Xt,0,~~(Xt.length/2)));if(n[t++]=ii,ii==0)return t-=3,n[t++]="bwipp.GS1badPieceNumber#3065",n[t++]="Invalid piece number",n[t++]=!1,!0;var ri=n[--t],yi=n[--t],hn=~~(yi.length/2),Sn=Ye(O(yi,hn,hn));if(n[t++]=ri,n[t++]=Sn,Sn==0)return t-=3,n[t++]="bwipp.GS1badPieceTotal#3067",n[t++]="Invalid total number",n[t++]=!1,!0;var wn=n[--t];if(_c(n[--t],wn))return t--,n[t++]="bwipp.GS1pieceExceedsTotal#3068",n[t++]="Piece number exceeds total",n[t++]=!1,!0},e.lintposinseqslash=function(){if(sn(n[--t],"/"),!n[--t])return t--,n[t++]="bwipp.invalidPosInSeqFormat#3073",n[t++]="Invalid <pos>/<end> format",n[t++]=!1,!0;var yt=n[--t];n[t-1]=yt;var Xt=n[t-1];if(Xt.length==0)return t-=2,n[t++]="bwipp.invalidPosInSeqFormat#3077",n[t++]="Invalid <pos>/<end> format",n[t++]=!1,!0;var ii=n[t-2];if(ii.length==0)return t-=2,n[t++]="bwipp.invalidPosInSeqFormat#3080",n[t++]="Invalid <pos>/<end> format",n[t++]=!1,!0;var ri=n[t-1];if(n[t++]=!0,Ie(ri,function(){var gn=n[--t];if(gn<48||gn>57)return n[t-1]=!1,!0}),!n[--t])return t-=2,n[t++]="bwipp.positionNotNumeric#3085",n[t++]="Position is not numeric",n[t++]=!1,!0;var yi=n[t-2];if(n[t++]=!0,Ie(yi,function(){var gn=n[--t];if(gn<48||gn>57)return n[t-1]=!1,!0}),!n[--t])return t-=2,n[t++]="bwipp.endNotNumeric#3089",n[t++]="End is not numeric",n[t++]=!1,!0;var hn=n[t-1];if(h(hn,0)==48)return t-=2,n[t++]="bwipp.positionZeroPrefix#3090",n[t++]="Position cannot have zero prefix",n[t++]=!1,!0;var Sn=n[t-2];if(h(Sn,0)==48)return t-=2,n[t++]="bwipp.endZeroPrefix#3091",n[t++]="End cannot have zero prefix",n[t++]=!1,!0;var wn=n[--t];if(Ye(n[--t])<Ye(wn))return n[t++]="bwipp.positionExceedsEnd#3093",n[t++]="Position exceeds end",n[t++]=!1,!0},e.lintpcenc=function(){for(;;){if(sn(n[--t],"%"),!n[--t]){t--;break}t-=2;var yt=n[t-1];if(yt.length<2){t-=2,n[t++]="bwipp.GS1badPercentEscape#3099",n[t++]="Invalid % escape",n[t++]=!1;break}var Xt=n[t-1],ii=O(Xt,0,2);n[t++]=!0;for(var ri=0,yi=ii.length;ri<yi;ri++){var hn=fe(1);if(C(hn,0,h(ii,ri)),sn("0123456789ABCDEFabcdef",hn),!n[--t]){t-=2,n[t++]=!1;break}t-=3}if(!n[--t]){t-=2,n[t++]="bwipp.GS1badPercentChars#3106",n[t++]="Invalid characters for percent encoding",n[t++]=!1;break}}},e.lintcouponcode=function(){var yt=n[t-1];if(n[t++]=!0,Ie(yt,function(){var Zl=n[--t];if(Zl<48||Zl>57)return n[t-1]=!1,!0}),!n[--t])return t-=2,n[t++]="bwipp.GS1couponNotNumeric#3114",n[t++]="Coupon not numeric",n[t++]=!1,!0;var Xt=n[t-1];if(Xt.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortGCPVLI#3118",n[t++]="Coupon too short: Missing GCP VLI",n[t++]=!1,!0;var ii=n[t-1],ri=Ye(O(ii,0,1));if(n[t++]=ri,ri>6)return t-=2,n[t++]="bwipp.GS1couponBadGCPVLI#3121",n[t++]="Coupon GCP length indicator must be 0-6",n[t++]=!1,!0;var yi=n[--t],hn=n[t-1];if(n[t++]=yi+6+1,yi+6+1>hn.length)return t-=3,n[t++]="bwipp.GS1couponTooShortGCP#3125",n[t++]="Coupon too short: GCP truncated",n[t++]=!1,!0;var Sn=n[--t],wn=n[--t],gn=O(wn,Sn,R(wn.length-Sn));if(n[t++]=gn,gn.length<6)return t-=2,n[t++]="bwipp.GS1couponTooShortOfferCode#3131",n[t++]="Coupon too short: Offer Code truncated",n[t++]=!1,!0;var Bn=n[--t],tr=O(Bn,6,Bn.length-6);if(n[t++]=tr,tr.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortSaveValueVLI#3137",n[t++]="Coupon too short: Missing Save Value VLI",n[t++]=!1,!0;var Kr=n[t-1],ba=Ye(O(Kr,0,1));if(n[t++]=ba,ba<1||ba>5)return t-=2,n[t++]="bwipp.GS1couponBadSaveValueVLI#3140",n[t++]="Coupon Save Value length indicator must be 1-5",n[t++]=!1,!0;var po=n[--t],Ps=n[t-1];if(n[t++]=po+1,po+1>Ps.length)return t-=3,n[t++]="bwipp.GS1couponTooShortSaveValue#3144",n[t++]="Coupon too short: Save Value truncated",n[t++]=!1,!0;var ur=n[--t],Zs=n[--t],eo=O(Zs,ur,R(Zs.length-ur));if(n[t++]=eo,eo.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort1stPurchaseRequirementVLI#3150",n[t++]="Coupon too short: Missing 1st Purchase Requirement VLI",n[t++]=!1,!0;var gl=n[t-1],La=Ye(O(gl,0,1));if(n[t++]=La,La<1||La>5)return t-=2,n[t++]="bwipp.GS1couponBad1stPurchaseRequirementVLI#3153",n[t++]="Coupon 1st Purchase Requirement length indicator must be 1-5",n[t++]=!1,!0;var mo=n[--t],b1=n[t-1];if(n[t++]=mo+1,mo+1>b1.length)return t-=3,n[t++]="bwipp.GS1couponTooShort1stPurchaseRequirement#3157",n[t++]="Coupon too short: 1st Purchase Requirement truncated",n[t++]=!1,!0;var ps=n[--t],Jo=n[--t],Zo=O(Jo,ps,R(Jo.length-ps));if(n[t++]=Zo,Zo.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort1stPurchaseRequirementCode#3163",n[t++]="Coupon too short: Missing 1st Purchase Requirement Code",n[t++]=!1,!0;var G1=n[t-1],cu=Ye(O(G1,0,1));if(cu>4&&cu!=9)return t-=2,n[t++]="bwipp.GS1couponBad1stPurchaseRequirementCode#3166",n[t++]="Coupon 1st Purchase Requirement Code must be 0-4 or 9",n[t++]=!1,!0;var du=n[--t],y1=O(du,1,du.length-1);if(n[t++]=y1,y1.length<3)return t-=2,n[t++]="bwipp.GS1couponTooShort1stPurchaseFamilyCode#3172",n[t++]="Coupon too short: 1st Purchase Family Code truncated",n[t++]=!1,!0;var os=n[--t],w1=O(os,3,os.length-3);if(n[t++]=w1,w1.length>=1){var Zc=n[t-1];if(Ye(O(Zc,0,1))==1){var Kl=n[--t],Yf=O(Kl,1,Kl.length-1);if(n[t++]=Yf,Yf.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortAdditionalPurchaseRulesCode#3182",n[t++]="Coupon too short: Missing Additional Purchase Rules Code",n[t++]=!1,!0;var _0=n[t-1];if(Ye(O(_0,0,1))>3)return t-=2,n[t++]="bwipp.GS1couponBadAdditionalPurchaseRulesCode#3185",n[t++]="Coupon Additional Purchase Rules Code must be 0-3",n[t++]=!1,!0;var I0=n[--t],ed=O(I0,1,I0.length-1);if(n[t++]=ed,ed.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirementVLI#3191",n[t++]="Coupon too short: Missing 2nd Purchase Requirement VLI",n[t++]=!1,!0;var N0=n[t-1],go=Ye(O(N0,0,1));if(n[t++]=go,go<1||go>5)return t-=2,n[t++]="bwipp.GS1couponBad2ndPurchaseRequirementVLI#3194",n[t++]="Coupon 2nd Purchase Requirement length indicator must be 1-5",n[t++]=!1,!0;var T0=n[--t],Po=n[t-1];if(n[t++]=T0+1,T0+1>Po.length)return t-=3,n[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirement#3198",n[t++]="Coupon too short: 2nd Purchase Requirement truncated",n[t++]=!1,!0;var M0=n[--t],R0=n[--t],sv=O(R0,M0,R(R0.length-M0));if(n[t++]=sv,sv.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirementCode#3204",n[t++]="Coupon too short: Missing 2nd Purchase Requirement Code",n[t++]=!1,!0;var V1=n[t-1],uu=Ye(O(V1,0,1));if(uu>4&&uu!=9)return t-=2,n[t++]="bwipp.GS1couponBad2ndPurchaseRequirementCode#3207",n[t++]="Coupon 2nd Purchase Requirement Code must be 0-4 or 9",n[t++]=!1,!0;var Qf=n[--t],xc=O(Qf,1,Qf.length-1);if(n[t++]=xc,xc.length<3)return t-=2,n[t++]="bwipp.GS1couponTooShort2ndPurchaseFamilyCode#3213",n[t++]="Coupon too short: 2nd Purchase Family Code truncated",n[t++]=!1,!0;var O0=n[--t],D0=O(O0,3,O0.length-3);if(n[t++]=D0,D0.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort2ndPurchaseGCPVLI#3219",n[t++]="Coupon too short: Missing 2nd Purchase GCP VLI",n[t++]=!1,!0;var ov=n[t-1],$f=Ye(O(ov,0,1));if(n[t++]=$f,$f>6&&$f!=9)return t-=2,n[t++]="bwipp.GS1couponBad2ndPurchaseGCPVLI#3222",n[t++]="Coupon 2nd Purchase GCP length indicator must be 0-6 or 9",n[t++]=!1,!0;var Wf=n[t-1];if(Wf!=9){var j0=n[--t];n[t++]=j0+6}else n[t-1]=0;var lv=n[--t],ab=n[t-1];if(n[t++]=lv+1,lv+1>ab.length)return t-=3,n[t++]="bwipp.GS1couponTooShort2ndPurchaseGCP#3226",n[t++]="Coupon too short: 2nd Purchase GCP truncated",n[t++]=!1,!0;var cv=n[--t],B0=n[--t];n[t++]=O(B0,cv,R(B0.length-cv))}}var dv=n[t-1];if(dv.length>=1){var td=n[t-1];if(Ye(O(td,0,1))==2){var fu=n[--t],P0=O(fu,1,fu.length-1);if(n[t++]=P0,P0.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirementVLI#3238",n[t++]="Coupon too short: Missing 3rd Purchase Requirement VLI",n[t++]=!1,!0;var uv=n[t-1],Xf=Ye(O(uv,0,1));if(n[t++]=Xf,Xf<1||Xf>5)return t-=2,n[t++]="bwipp.GS1couponBad3rdPurchaseRequirementVLI#3241",n[t++]="Coupon 3rd Purchase Requirement length indicator must be 1-5",n[t++]=!1,!0;var F0=n[--t],fv=n[t-1];if(n[t++]=F0+1,F0+1>fv.length)return t-=3,n[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirement#3245",n[t++]="Coupon too short: 3rd Purchase Requirement truncated",n[t++]=!1,!0;var U0=n[--t],hu=n[--t],L0=O(hu,U0,R(hu.length-U0));if(n[t++]=L0,L0.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirementCode#3251",n[t++]="Coupon too short: Missing 3rd Purchase Requirement Code",n[t++]=!1,!0;var hv=n[t-1],kr=Ye(O(hv,0,1));if(kr>4&&kr!=9)return t-=2,n[t++]="bwipp.GS1couponBad3rdPurchaseRequirementCode#3254",n[t++]="Coupon 3rd Purchase Requirement Code must be 0-4 or 9",n[t++]=!1,!0;var Kf=n[--t],pv=O(Kf,1,Kf.length-1);if(n[t++]=pv,pv.length<3)return t-=2,n[t++]="bwipp.GS1couponTooShort3rdPurchaseFamilyCode#3260",n[t++]="Coupon too short: 3rd Purchase Family Code truncated",n[t++]=!1,!0;var z0=n[--t],mv=O(z0,3,z0.length-3);if(n[t++]=mv,mv.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShort3rdPurchaseGCPVLI#3266",n[t++]="Coupon too short: Missing 3rd Purchase GCP VLI",n[t++]=!1,!0;var sb=n[t-1],H0=Ye(O(sb,0,1));if(n[t++]=H0,H0>6&&H0!=9)return t-=2,n[t++]="bwipp.GS1couponBad3rdPurchaseGCPVLI#3269",n[t++]="Coupon 3rd Purchase GCP length indicator must be 0-6 or 9",n[t++]=!1,!0;var Jf=n[t-1];if(Jf!=9){var nd=n[--t];n[t++]=nd+6}else n[t-1]=0;var Zf=n[--t],eh=n[t-1];if(n[t++]=Zf+1,Zf+1>eh.length)return t-=3,n[t++]="bwipp.GS1couponTooShort3rdPurchaseGCP#3273",n[t++]="Coupon too short: 3rd Purchase GCP truncated",n[t++]=!1,!0;var th=n[--t],A1=n[--t];n[t++]=O(A1,th,R(A1.length-th))}}e.couponexpire=-1;var Jl=n[t-1];if(Jl.length>=1){var pu=n[t-1];if(Ye(O(pu,0,1))==3){var gv=n[--t],q0=O(gv,1,gv.length-1);if(n[t++]=q0,q0.length<6)return t-=2,n[t++]="bwipp.GS1couponTooShortExpirationDate#3286",n[t++]="Coupon too short: Expiration date",n[t++]=!1,!0;var vv=n[t-1],G0=Ye(O(vv,2,2));if(G0<1||G0>12)return t-=2,n[t++]="bwipp.GS1couponExpirationDateBadMonth#3288",n[t++]="Invalid month in expiration date",n[t++]=!1,!0;var xv=n[t-1],bv=Ye(O(xv,0,2)),nh=bv-21;if(n[t++]=bv,n[t++]=nh,nh>=51){t--;var yv=n[--t];n[t++]=yv+1900}else if(n[--t]<=-50){var wv=n[--t];n[t++]=wv+2100}else{var ob=n[--t];n[t++]=ob+2e3}var mu=n[--t];n[t++]=mu%400==0||mu%4==0&&mu%100!=0,n[t++]=1/0,n[t++]=31,oa(3,-1);var V0=n[--t]?29:28;n[t++]=V0,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=30,n[t++]=31;var lb=o(),Av=n[t-1],id=Ye(O(Av,4,2));if(h(lb,Ye(O(Av,2,2))-1)<id||id<1)return t-=2,n[t++]="bwipp.GS1couponExpirationDateBadDay#3295",n[t++]="Invalid day of month in expiration date",n[t++]=!1,!0;var Y0=n[--t];e.couponexpire=Ye(O(Y0,0,6)),n[t++]=O(Y0,6,Y0.length-6)}}var Sv=n[t-1];if(Sv.length>=1){var Di=n[t-1];if(Ye(O(Di,0,1))==4){var ih=n[--t],gu=O(ih,1,ih.length-1);if(n[t++]=gu,gu.length<6)return t-=2,n[t++]="bwipp.GS1couponTooShortStartDate#3307",n[t++]="Coupon too short: Start date",n[t++]=!1,!0;var Q0=n[t-1],$0=Ye(O(Q0,2,2));if($0<1||$0>12)return t-=2,n[t++]="bwipp.GS1couponStartDateBadMonth#3309",n[t++]="Invalid month in start date",n[t++]=!1,!0;var W0=n[t-1],rd=Ye(O(W0,0,2)),vu=rd-21;if(n[t++]=rd,n[t++]=vu,vu>=51){t--;var cb=n[--t];n[t++]=cb+1900}else if(n[--t]<=-50){var kv=n[--t];n[t++]=kv+2100}else{var db=n[--t];n[t++]=db+2e3}var X0=n[--t];n[t++]=X0%400==0||X0%4==0&&X0%100!=0,n[t++]=1/0,n[t++]=31,oa(3,-1);var Cv=n[--t]?29:28;n[t++]=Cv,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=31,n[t++]=30,n[t++]=31,n[t++]=30,n[t++]=31;var Ev=o(),jr=n[t-1],rh=Ye(O(jr,4,2));if(h(Ev,Ye(O(jr,2,2))-1)<rh||rh<1)return t-=2,n[t++]="bwipp.GS1couponStartDateBadDay#3316",n[t++]="Invalid day of month in start date",n[t++]=!1,!0;var Es=n[--t];if(e.couponstart=Ye(O(Es,0,6)),n[t++]=Es,e.couponexpire!=-1&&e.couponexpire<e.couponstart)return t-=2,n[t++]="bwipp.GS1couponExpireDateBeforeStartDate#3319",n[t++]="Coupon expires before it starts",n[t++]=!1,!0;var _v=n[--t];n[t++]=O(_v,6,_v.length-6)}}var Iv=n[t-1];if(Iv.length>=1){var ub=n[t-1];if(Ye(O(ub,0,1))==5){var ah=n[--t],sh=O(ah,1,ah.length-1);if(n[t++]=sh,sh.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortSerialNumberVLI#3331",n[t++]="Coupon too short: Missing Serial Number VLI",n[t++]=!1,!0;var xu=n[t-1],K0=O(xu,0,1);if(n[t++]=Ye(K0)+6+1,Ye(K0)+6+1>xu.length)return t-=3,n[t++]="bwipp.GS1couponTooShortSerialNumber#3335",n[t++]="Coupon too short: Serial Number truncated",n[t++]=!1,!0;var J0=n[--t],oh=n[--t];n[t++]=O(oh,J0,R(oh.length-J0))}}var Z0=n[t-1];if(Z0.length>=1){var fb=n[t-1];if(Ye(O(fb,0,1))==6){var ep=n[--t],Nv=O(ep,1,ep.length-1);if(n[t++]=Nv,Nv.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortRetailerGCPGLNVLI#3347",n[t++]="Coupon too short: Missing Retailer GCP/GLN VLI",n[t++]=!1,!0;var Tv=n[t-1],tp=Ye(O(Tv,0,1));if(n[t++]=tp,tp<1||tp>7)return t-=2,n[t++]="bwipp.GS1couponBadRetailerGCPGLNVLI#3350",n[t++]="Coupon Retailer GCP/GLN length indicator must be 1-7",n[t++]=!1,!0;var Mv=n[--t],Y1=n[t-1];if(n[t++]=Mv+6+1,Mv+6+1>Y1.length)return t-=3,n[t++]="bwipp.GS1couponTooShortRetailerGCPGLN#3354",n[t++]="Coupon too short: Retailer GCP/GLN truncated",n[t++]=!1,!0;var np=n[--t],ip=n[--t];n[t++]=O(ip,np,R(ip.length-np))}}var rp=n[t-1];if(rp.length>=1){var hb=n[t-1];if(Ye(O(hb,0,1))==9){var Rv=n[--t],ap=O(Rv,1,Rv.length-1);if(n[t++]=ap,ap.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortSaveValueCode#3366",n[t++]="Coupon too short: Missing Save Value Code",n[t++]=!1,!0;var sp=n[t-1],bu=Ye(O(sp,0,1));if(bu>6||bu==3||bu==4)return t-=2,n[t++]="bwipp.GS1couponBadSaveValueCode#3369",n[t++]="Coupon Save Value Code must be 0,1,2,5 or 6",n[t++]=!1,!0;var Ov=n[--t],el=O(Ov,1,Ov.length-1);if(n[t++]=el,el.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortSaveValueAppliesToItem#3375",n[t++]="Coupon too short: Missing Save Value Applies to Item",n[t++]=!1,!0;var op=n[t-1];if(Ye(O(op,0,1))>2)return t-=2,n[t++]="bwipp.GS1couponBadSaveValueAppliesToItem#3378",n[t++]="Coupon Save Value Applies to Item must be 0-2",n[t++]=!1,!0;var lp=n[--t],cp=O(lp,1,lp.length-1);if(n[t++]=cp,cp.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortStoreCouponFlag#3384",n[t++]="Coupon too short: Missing Store Coupon Flag",n[t++]=!1,!0;var dp=n[--t],ad=O(dp,1,dp.length-1);if(n[t++]=ad,ad.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortDontMultiplyFlag#3390",n[t++]="Coupon too short: Missing Don't Multiply Flag",n[t++]=!1,!0;var vl=n[t-1];if(Ye(O(vl,0,1))>1)return t-=2,n[t++]="bwipp.GS1couponBadDontMultiplyFlag#3393",n[t++]="Don't Multiply Flag must be 0 or 1",n[t++]=!1,!0;var up=n[--t];n[t++]=O(up,1,up.length-1)}}var lh=n[t-1];if(lh.length!=0)return t-=2,n[t++]="bwipp.GS1couponUnrecognisedOptionalField#3400",n[t++]="Coupon fields must be 1,2,3,4,5,6 or 9, increasing order",n[t++]=!1,!0;t--},e.lintcouponposoffer=function(){var yt=n[t-1];if(n[t++]=!0,Ie(yt,function(){var mo=n[--t];if(mo<48||mo>57)return n[t-1]=!1,!0}),!n[--t])return t-=2,n[t++]="bwipp.GS1couponNotNumeric#3409",n[t++]="Coupon not numeric",n[t++]=!1,!0;var Xt=n[t-1];if(Xt.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortFormatCode#3412",n[t++]="Coupon too short: Missing Format Code",n[t++]=!1,!0;var ii=n[t-1],ri=O(ii,0,1);if(qe(ri,"0")&&qe(ri,"1"))return t-=2,n[t++]="bwipp.GS1couponBadFormatCode#3415",n[t++]="Coupon format must be 0 or 1",n[t++]=!1,!0;var yi=n[--t],hn=O(yi,1,yi.length-1);if(n[t++]=hn,hn.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortFunderVLI#3420",n[t++]="Coupon too short: Missing Funder VLI",n[t++]=!1,!0;var Sn=n[t-1],wn=Ye(O(Sn,0,1));if(n[t++]=wn,wn>6)return t-=3,n[t++]="bwipp.GS1couponBadFunderVLI#3423",n[t++]="Coupon Funder length indicator must be 0-6",n[t++]=!1,!0;var gn=n[--t],Bn=n[t-1];if(n[t++]=gn+6+1,gn+6+1>Bn.length)return t-=3,n[t++]="bwipp.GS1couponTooShortFunder#3427",n[t++]="Coupon too short: Truncated Funder ID",n[t++]=!1,!0;var tr=n[--t],Kr=n[--t],ba=O(Kr,tr,R(Kr.length-tr));if(n[t++]=ba,ba.length<6)return t-=2,n[t++]="bwipp.GS1couponTooShortOfferCode#3432",n[t++]="Coupon too short: Truncated Offer Code",n[t++]=!1,!0;var po=n[--t],Ps=O(po,6,po.length-6);if(n[t++]=Ps,Ps.length<1)return t-=2,n[t++]="bwipp.GS1couponTooShortSnVLI#3437",n[t++]="Coupon too short: Missing SN VLI",n[t++]=!1,!0;var ur=n[t-1],Zs=O(ur,0,1);if(n[t++]=Ye(Zs)+6+1,Ye(Zs)+6+1>ur.length)return t-=3,n[t++]="bwipp.GS1couponTooShortSn#3442",n[t++]="Coupon too short: Truncated SN",n[t++]=!1,!0;var eo=n[--t],gl=n[--t],La=O(gl,eo,R(gl.length-eo));if(n[t++]=La,La.length!=0)return t-=2,n[t++]="bwipp.GS1couponTooLong#3446",n[t++]="Coupon too long",n[t++]=!1,!0;t--},e.lintlatitude=function(){var yt=n[t-1];if(yt.length!=10)return t--,n[t++]="bwipp.GS1badLatitudeLength#3453",n[t++]="Invalid length for a latitude",n[t++]=!1,!0;if(Ye(n[--t])>Ye("1800000000"))return t--,n[t++]="bwipp.GS1badLatitude#3457",n[t++]="Invalid value for latitude",n[t++]=!1,!0},e.lintlongitude=function(){var yt=n[t-1];if(yt.length!=10)return t--,n[t++]="bwipp.GS1badLongitudeLength#3462",n[t++]="Invalid length for a longitude",n[t++]=!1,!0;if(Ye(n[--t])>Ye("3600000000"))return t--,n[t++]="bwipp.GS1badLongitude#3467",n[t++]="Invalid value for longitude",n[t++]=!1,!0},n[t++]=1/0;for(var w0=o(["01","02","03","04","05","06","07","08","09","10","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99"]),ua=0,Oo=w0.length;ua<Oo;ua++){var Wl=h(w0,ua);n[t++]=Wl,n[t++]=Wl}e.aidcmediatype=rt(),e.lintmediatype=function(){var yt=h(e.aidcmediatype,n[--t])!==void 0;if(!yt)return t--,n[t++]="bwipp.GS1UnknownMediaType#3479",n[t++]="Unknown AIDC media type",n[t++]=!1,!0},n[t++]=1/0;for(var A0=o(["1A","1B","1D","1F","1G","1W","200","201","202","203","204","205","206","210","211","212","2C","3A","3H","43","44","4A","4B","4C","4D","4F","4G","4H","5H","5L","5M","6H","6P","7A","7B","8","8A","8B","8C","9","AA","AB","AC","AD","AF","AG","AH","AI","AJ","AL","AM","AP","APE/AT","AV","B4","BB","BC","BD","BE","BF","BG","BGE","BH","BI","BJ","BK","BL","BM","BME","BN","BO","BP","BQ","BR","BRI","BS","BT","BU","BV","BW","BX","BY","BZ","CA","CB","CBL","CC","CCE","CD","CE","CF","CG","CH","CI","CJ","CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT","CU","CV","CW","CX","CY","CZ","DA","DB","DC","DG","DH","DI","DJ","DK","DL","DM","DN","DP","DPE","DR","DS","DT","DU","DV","DW","DX","DY","E1","E2","E3","EC","ED","EE","EF","EG","EH","EI","EN","FB","FC","FD","FE","FI","FL","FO","FOB","FP","FPE","FR","FT","FW","FX","GB","GI","GL","GR","GU","GY","GZ","HA","HB","HC","HG","HN","HR","IA","IB","IC","ID","IE","IF","IG","IH","IK","IL","IN","IZ","JB","JC","JG","JR","JT","JY","KG","KI","LAB","LE","LG","LT","LU","LV","LZ","MA","MB","MC","ME","MPE","MR","MS","MT","MW","MX","NA","NE","NF","NG","NS","NT","NU","NV","OA","OB","OC","OD","OE","OF","OK","OPE","OT","OU","P2","PA","PAE","PB","PC","PD","PE","PF","PG","PH","PI","PJ","PK","PL","PLP","PN","PO","POP","PP","PPE","PR","PT","PU","PUE","PV","PX","PY","PZ","QA","QB","QC","QD","QF","QG","QH","QJ","QK","QL","QM","QN","QP","QQ","QR","QS","RB1","RB2","RB3","RCB","RD","RG","RJ","RK","RL","RO","RT","RZ","S1","SA","SB","SC","SD","SE","SEC","SH","SI","SK","SL","SM","SO","SP","SS","ST","STL","SU","SV","SW","SX","SY","SZ","T1","TB","TC","TD","TE","TEV","TG","THE","TI","TK","TL","TN","TO","TR","TRE","TS","TT","TTE","TU","TV","TW","TWE","TY","TZ","UC","UN","UUE","VA","VG","VI","VK","VL","VN","VO","VP","VQ","VR","VS","VY","WA","WB","WC","WD","WF","WG","WH","WJ","WK","WL","WM","WN","WP","WQ","WR","WRP","WS","WT","WU","WV","WW","WX","WY","WZ","X11","X12","X15","X16","X17","X18","X19","X20","X3","XA","XB","XC","XD","XF","XG","XH","XJ","XK","YA","YB","YC","YD","YF","YG","YH","YJ","YK","YL","YM","YN","YP","YQ","YR","YS","YT","YV","YW","YX","YY","YZ","ZA","ZB","ZC","ZD","ZF","ZG","ZH","ZJ","ZK","ZL","ZM","ZN","ZP","ZQ","ZR","ZS","ZT","ZU","ZV","ZW","ZX","ZY","ZZ"]),Gf=0,nv=A0.length;Gf<nv;Gf++){var iv=h(A0,Gf);n[t++]=iv,n[t++]=iv}if(e.packagetype=rt(),e.lintpackagetype=function(){var yt=h(e.packagetype,n[--t])!==void 0;if(!yt)return t--,n[t++]="bwipp.GS1unknownPackageType#3523",n[t++]="Unknown package type",n[t++]=!1,!0},!e.dontlint){n[t++]=!0;for(var vc=0,Do=e.vals.length-1;vc<=Do;vc+=1){e.ai=h(e.ais,vc),e.val=h(e.vals,vc);var Rl=h(e.gs1syntax,e.ai)!==void 0;if(Rl){var S0=h(h(e.gs1syntax,e.ai),"parts");if(n[t++]=S0,n[t++]=0,Ie(S0,function(){var yt=n[t-1];if(h(yt,"opt"))n[t-1]=0;else{var Xt=h(n[--t],"min");n[t++]=Xt}var ii=n[--t],ri=n[--t];n[t++]=R(ri+ii)}),n[--t]>e.val.length){t--,n[t++]="bwipp.GS1valueTooShort#3537",n[t++]="Too short",n[t++]=!1;break}var jo=n[t-1];if(n[t++]=0,Ie(jo,function(){var yt=h(n[--t],"max"),Xt=n[--t];n[t++]=R(Xt+yt)}),n[--t]<e.val.length){t--,n[t++]="bwipp.GS1valueTooLong#3540",n[t++]="Too long",n[t++]=!1;break}Ie(n[--t],function(){e.props=n[--t];var yt=h(e.props,"max"),Xt=e.val,ii=Xt.length;if(yt>Xt.length){var ri=ii;ii=yt,yt=ri}e.eval=O(e.val,0,yt);var yi=e.eval.length;if(e.val=O(e.val,yi,e.val.length-yi),e.eval.length==0){if(!h(e.props,"opt"))return t--,n[t++]="bwipp.GS1valueTooShort#3549",n[t++]="Too short",n[t++]=!1,!0}else{if(e.eval.length<h(e.props,"min"))return t--,n[t++]="bwipp.GS1valueTooShort#3553",n[t++]="Too short",n[t++]=!1,!0;var hn=new Map([["N","lintnumeric"],["X","lintcset82"],["Y","lintcset39"],["Z","lintcset64"]]);if(n[t++]=e.eval,e[h(hn,h(e.props,"cset"))]()===!0)return!0;Ie(h(e.props,"linters"),function(){var Sn=e[n[--t]];if(n[t++]=e.eval,Sn()===!0)return!0})}});var rv=n[t-1];if(!rv)break;if(e.val.length!=0){t--,n[t++]="bwipp.GS1valueTooLong#3562",n[t++]="Too long",n[t++]=!1;break}}else{t--,n[t++]="bwipp.GS1unknownAI#3565",n[t++]="Unrecognised AI",n[t++]=!1;break}}if(!n[--t]){var Xl=n[--t],Ol=fe(Xl.length+e.ai.length+5);H(Ol,0,"AI "),H(Ol,3,e.ai),H(Ol,3+e.ai.length,": "),H(Ol,5+e.ai.length,Xl),n[t++]=Ol,Z()}e.aiexists=function(){e.this=n[--t],e.patt=n[--t];for(var yt=0;yt<1;yt++){var Xt=h(e.aivals,e.patt)!==void 0;if(Xt){n[t++]=!0;break}if(e.patt.length==4){if(ce(O(e.patt,3,1),"n")){var ii=ce(O(e.patt,2,1),"n")?2:3;e.pfxlen=ii;var ri=e.ais;n[t++]=!1;for(var yi=0,hn=ri.length;yi<hn;yi++){var Sn=h(ri,yi);n[t++]=Sn,qe(Sn,e.this)&&Sn.length==4?ce(O(n[--t],0,e.pfxlen),O(e.patt,0,e.pfxlen))&&(n[t-1]=!0):t--}break}n[t++]=!1;break}n[t++]=!1;break}},e.vals,e.aivals=new Map;for(var ml=0,k0=e.vals.length-1;ml<=k0;ml+=1){e.ai=h(e.ais,ml),e.val=h(e.vals,ml);var C0=h(e.aivals,e.ai)!==void 0;if(C0){if(qe(h(e.aivals,e.ai),e.val)){var Bo=fe(e.ai.length+40);H(Bo,0,"Repeated AIs ("),H(Bo,14,e.ai),H(Bo,14+e.ai.length,") must have the same value"),n[t++]="bwipp.GS1repeatedDifferingAIs#3615",n[t++]=Bo,Z()}}else C(e.aivals,e.ai,e.val)}for(var Vf=0,Xc=e.vals.length-1;Vf<=Xc;Vf+=1){e.ai=h(e.ais,Vf);var Kc=h(e.gs1syntax,e.ai),ou=h(Kc,"ex")!==void 0;if(n[t++]=Kc,n[t++]="ex",ou){var Jc=n[--t];Ie(h(n[--t],Jc),function(){if(e.patt=n[--t],n[t++]=e.patt,n[t++]=e.ai,e.aiexists(),n[--t]){var yt=fe(e.ai.length+e.patt.length+36);H(yt,0,"AIs ("),H(yt,5,e.ai),H(yt,5+e.ai.length,") and ("),H(yt,12+e.ai.length,e.patt),H(yt,12+e.ai.length+e.patt.length,") are mutually exclusive"),n[t++]="bwipp.GS1exclusiveAIs#3635",n[t++]=yt,Z()}})}else t-=2;if(e.lintreqs){var E0=h(e.gs1syntax,e.ai),av=h(E0,"req")!==void 0;if(n[t++]=E0,n[t++]="req",av){var lu=n[--t];Ie(h(n[--t],lu),function(){var yt=n[--t];if(n[t++]=!1,Ie(yt,function(){var tr=n[--t];if(n[t++]=!0,Ie(tr,function(){n[t++]=e.ai,e.aiexists(),n[--t]||(n[t-1]=!1)}),n[--t])return n[t-1]=!0,!0}),!n[--t]){n[t++]=1/0,Ie(h(h(e.gs1syntax,e.ai),"req"),function(){Ie(n[--t],function(){Ie(n[--t],function(){n[t++]="+"}),n[t-1]=" OR "}),n[t-1]=" WITH "}),t--;var Xt=o();n[t++]=Xt,n[t++]=0;for(var ii=0,ri=Xt.length;ii<ri;ii++){var yi=n[--t];n[t++]=R(yi+h(Xt,ii).length)}var hn=e.ai.length+49;n[t++]=hn,n[t++]=hn;var Sn=n[t-3],wn=fe(R(n[t-1]+Sn)),gn=n[t-2];t-=3,n[t++]=wn,n[t++]=gn,oa(3,-1),Ie(n[--t],function(){var tr=n[--t],Kr=n[--t],ba=n[t-1];H(ba,Kr,tr),n[t++]=R(tr.length+Kr)}),t--;var Bn=n[--t];H(Bn,0,"One of more requisite AIs for AI ("),H(Bn,34,e.ai),H(Bn,34+e.ai.length,") are missing: "),n[t++]="bwipp.GS1missingAIs#3662",n[t++]=Bn,Z()}})}else t-=2}}}n[t++]=e.ais,n[t++]=e.vals,n[t++]=e.fncs,e=r}function Um(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=0,e.textyoffset=null,e.height=.7,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.textyoffset==null&&(e.textyoffset=e.height*72+1),e.barcode.length!=5&&(n[t++]="bwipp.ean5badLength#4997",n[t++]="EAN-5 add-on must be 5 digits",Z()),Ie(e.barcode,function(){var k=n[--t];(k<48||k>57)&&(n[t++]="bwipp.ean5badCharacter#5001",n[t++]="EAN-5 add-on must contain only digits",Z())}),e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","112","11"]),e.barchars="0123456789",e.mirrormaps=o(["11000","10100","10010","10001","01100","00110","00011","01010","01001","00101"]),e.checksum=0;for(var i=0;i<=4;i+=1)e.i=i,e.barchar=h(e.barcode,e.i)-48,e.i%2==0?e.checksum=R(e.barchar*3+e.checksum):e.checksum=R(e.barchar*9+e.checksum);e.checksum=e.checksum%10,e.mirrormap=h(e.mirrormaps,e.checksum),e.sbs=fe(31),e.txt=o(5);for(var a=0;a<=4;a+=1){if(e.i=a,e.i==0?H(e.sbs,0,h(e.encs,10)):H(e.sbs,(e.i-1)*6+7,h(e.encs,11)),sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i)==49){e.enclen=e.enc.length,e.revenc=fe(e.enclen);for(var s=0,l=e.enclen-1;s<=l;s+=1)e.j=s,e.char=h(e.enc,e.j),C(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}H(e.sbs,e.i*6+3,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i-1)*9+10+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}n[t++]=1/0,n[t++]=1/0;for(var c=e.sbs,d=0,f=c.length;d<f;d++)n[t++]=h(c,d)-48;var m=o();n[t++]=1/0;for(var g=0;g<16;g++)n[t++]=e.height;var v=o();n[t++]=1/0;for(var y=0;y<16;y++)n[t++]=0;var A=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=m,n[t++]="bhs",n[t++]=v,n[t++]="bbs",n[t++]=A,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options,n[t++]="guardrightpos",n[t++]=5,n[t++]="guardrightypos",n[t++]=e.textyoffset+4,n[t++]="borderleft",n[t++]=12,n[t++]="borderright",n[t++]=5,n[t++]="bordertop",n[t++]=10;var w=rt();n[t++]=w,e.dontdraw||on(),e=r}function Lm(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=0,e.textyoffset=null,e.height=.7,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.textyoffset==null&&(e.textyoffset=e.height*72+1),e.barcode.length!=2&&(n[t++]="bwipp.ean2badLength#5142",n[t++]="EAN-2 add-on must be 2 digits",Z()),Ie(e.barcode,function(){var w=n[--t];(w<48||w>57)&&(n[t++]="bwipp.ean2badCharacter#5146",n[t++]="EAN-2 add-on must contain only digits",Z())}),e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","112","11"]),e.barchars="0123456789",e.mirrormaps=o(["00","01","10","11"]),e.mirrormap=h(e.mirrormaps,Ye(O(e.barcode,0,2))%4),e.sbs=fe(13),e.txt=o(2);for(var i=0;i<=1;i+=1){if(e.i=i,e.i==0?H(e.sbs,0,h(e.encs,10)):H(e.sbs,(e.i-1)*6+7,h(e.encs,11)),sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i)==49){e.enclen=e.enc.length,e.revenc=fe(e.enclen);for(var a=0,s=e.enclen-1;a<=s;a+=1)e.j=a,e.char=h(e.enc,e.j),C(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}H(e.sbs,e.i*6+3,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i-1)*9+10+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}n[t++]=1/0,n[t++]=1/0;for(var l=e.sbs,c=0,d=l.length;c<d;c++)n[t++]=h(l,c)-48;var f=o();n[t++]=1/0;for(var m=0;m<12;m++)n[t++]=e.height;var g=o();n[t++]=1/0;for(var v=0;v<12;v++)n[t++]=0;var y=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=f,n[t++]="bhs",n[t++]=g,n[t++]="bbs",n[t++]=y,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options,n[t++]="guardrightpos",n[t++]=5,n[t++]="guardrightypos",n[t++]=e.textyoffset+4,n[t++]="borderleft",n[t++]=12,n[t++]="borderright",n[t++]=5,n[t++]="bordertop",n[t++]=10;var A=rt();n[t++]=A,e.dontdraw||on(),e=r}function zm(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-11,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],sn(e.barcode," "),n[--t]?(e.barcode=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.barcode.length!=12&&e.barcode.length!=13&&(n[t++]="bwipp.ean13badLength#5286",n[t++]="EAN-13 must be 12 or 13 digits",Z()),Ie(e.barcode,function(){var N=n[--t];(N<48||N>57)&&(n[t++]="bwipp.ean13badCharacter#5290",n[t++]="EAN-13 must contain only digits",Z())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.ean13badAddOnLength#5294",n[t++]="Add-on for EAN-13 must be 2 or 5 digits",Z()),e.pad=fe(13),e.checksum=0;for(var i=0;i<=11;i+=1)e.i=i,e.barchar=h(e.barcode,e.i)-48,e.i%2==0?e.checksum=R(e.barchar+e.checksum):e.checksum=R(e.barchar*3+e.checksum);e.checksum=(10-e.checksum%10)%10,e.barcode.length==13&&h(e.barcode,12)!=e.checksum+48&&(n[t++]="bwipp.ean13badCheckDigit#5312",n[t++]="Incorrect EAN-13 check digit provided",Z()),H(e.pad,0,e.barcode),C(e.pad,12,e.checksum+48),e.barcode=e.pad,e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.mirrormaps=o(["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"]),e.sbs=fe(59),e.txt=o(13),H(e.sbs,0,h(e.encs,10)),e.mirrormap=h(e.mirrormaps,h(e.barcode,0)-48),C(e.txt,0,o([O(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize]));for(var a=1;a<=6;a+=1){if(e.i=a,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i-1)==49){e.enclen=e.enc.length,e.revenc=fe(e.enclen);for(var s=0,l=e.enclen-1;s<=l;s+=1)e.j=s,e.char=h(e.enc,e.j),C(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}H(e.sbs,(e.i-1)*4+3,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i-1)*7+15+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}H(e.sbs,27,h(e.encs,11));for(var c=7;c<=12;c+=1)e.i=c,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,(e.i-1)*4+8,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i-1)*7+19+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,56,h(e.encs,12)),n[t++]=1/0;for(var d=e.sbs,f=0,m=d.length;f<m;f++)n[t++]=h(d,f)-48;if(e.sbs=o(),e.includetext){n[t++]=1/0,n[t++]=e.height,n[t++]=e.height;for(var g=0;g<12;g++)n[t++]=R(e.height-.075);n[t++]=e.height,n[t++]=e.height;for(var v=0;v<12;v++)n[t++]=R(e.height-.075);n[t++]=e.height,n[t++]=e.height,e.bhs=o(),n[t++]=1/0,n[t++]=0,n[t++]=0;for(var y=0;y<12;y++)n[t++]=.075;n[t++]=0,n[t++]=0;for(var A=0;A<12;A++)n[t++]=.075;n[t++]=0,n[t++]=0,e.bbs=o()}else{n[t++]=1/0;for(var w=0;w<30;w++)n[t++]=e.height;e.bhs=o(),n[t++]=1/0;for(var k=0;k<30;k++)n[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(n[t++]=1/0,n[t++]="dontdraw",n[t++]=!0,n[t++]="includetext",n[t++]=!0,n[t++]="height",n[t++]=e.height,e.includetext){var E=n[--t];n[t++]=R(E-.15)}n[t++]="textxoffset",e.addontextxoffset!=null?n[t++]=e.addontextxoffset:n[t++]=95+e.addongap,e.addontextyoffset!=null&&(n[t++]="textyoffset",n[t++]=e.addontextyoffset),n[t++]="textsize",e.addontextsize!=null?n[t++]=e.addontextsize:n[t++]=e.textsize;var I=qe(e.addontextfont,"unset")?e.addontextfont:e.textfont;n[t++]="textfont",n[t++]=I,e.addopts=rt(),e.addon.length==2&&(n[t++]=e.addon,n[t++]=e.addopts,Lm()),e.addon.length==5&&(n[t++]=e.addon,n[t++]=e.addopts,Um()),e.addcode=n[--t],n[t++]=1/0,W(e.sbs),n[t++]=e.addongap,W(h(e.addcode,"sbs")),e.sbs=o(),n[t++]=1/0,W(e.bhs),W(h(e.addcode,"bhs")),e.bhs=o(),n[t++]=1/0,W(e.bbs),W(h(e.addcode,"bbs")),e.bbs=o(),n[t++]=1/0,W(e.txt),W(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}n[t++]=1/0,n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=e.sbs,n[t++]="bhs",n[t++]=e.bhs,n[t++]="bbs",n[t++]=e.bbs,n[t++]="txt",n[t++]=e.txt,n[t++]="opt",n[t++]=e.options,n[t++]="guardrightpos",e.addon.length==0?n[t++]=7:n[t++]=5,n[t++]="guardrightypos",n[t++]=e.guardrightypos,n[t++]="borderleft",n[t++]=11,n[t++]="borderright",e.addon.length==0?n[t++]=7:n[t++]=5,n[t++]="bordertop",n[t++]=0,n[t++]="borderbottom",n[t++]=5;var T=rt();n[t++]=T,e.dontdraw||on(),e=r}function cw(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=4,e.textyoffset=-4,e.height=1,e.permitaddon=!1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],sn(e.barcode," "),n[--t]?(e.barcode=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.barcode.length!=7&&e.barcode.length!=8&&(n[t++]="bwipp.ean8badLength#5507",n[t++]="EAN-8 must be 7 or 8 digits",Z()),Ie(e.barcode,function(){var I=n[--t];(I<48||I>57)&&(n[t++]="bwipp.ean8badCharacter#5511",n[t++]="EAN-8 must contain only digits",Z())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.ean8badAddOnLength#5515",n[t++]="Add-on for EAN-8 must be 2 or 5 digits",Z()),!e.permitaddon&&e.addon.length!=0&&(n[t++]="bwipp.ean8badAddOnLength#5518",n[t++]='Non-standard use of add-on for EAN-8 requires "permitaddon" option',Z()),e.pad=fe(8),e.checksum=0;for(var i=0;i<=6;i+=1)e.i=i,e.barchar=h(e.barcode,e.i)-48,e.i%2!=0?e.checksum=R(e.barchar+e.checksum):e.checksum=R(e.barchar*3+e.checksum);e.checksum=(10-e.checksum%10)%10,e.barcode.length==8&&h(e.barcode,7)!=e.checksum+48&&(n[t++]="bwipp.ean8badCheckDigit#5536",n[t++]="Incorrect EAN-8 check digit provided",Z()),H(e.pad,0,e.barcode),C(e.pad,7,e.checksum+48),e.barcode=e.pad,e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.sbs=fe(43),e.txt=o(8),H(e.sbs,0,h(e.encs,10));for(var a=0;a<=3;a+=1)e.i=a,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*4+3,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*7+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,19,h(e.encs,11));for(var s=4;s<=7;s+=1)e.i=s,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*4+8,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*7+e.textxoffset+4,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,40,h(e.encs,12)),n[t++]=1/0;for(var l=e.sbs,c=0,d=l.length;c<d;c++)n[t++]=h(l,c)-48;if(e.sbs=o(),e.includetext){n[t++]=1/0,n[t++]=e.height,n[t++]=e.height;for(var f=0;f<8;f++)n[t++]=R(e.height-.075);n[t++]=e.height,n[t++]=e.height;for(var m=0;m<8;m++)n[t++]=R(e.height-.075);n[t++]=e.height,n[t++]=e.height,e.bhs=o(),n[t++]=1/0,n[t++]=0,n[t++]=0;for(var g=0;g<8;g++)n[t++]=.075;n[t++]=0,n[t++]=0;for(var v=0;v<8;v++)n[t++]=.075;n[t++]=0,n[t++]=0,e.bbs=o()}else{n[t++]=1/0;for(var y=0;y<22;y++)n[t++]=e.height;e.bhs=o(),n[t++]=1/0;for(var A=0;A<22;A++)n[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(n[t++]=1/0,n[t++]="dontdraw",n[t++]=!0,n[t++]="includetext",n[t++]=!0,n[t++]="height",n[t++]=e.height,e.includetext){var w=n[--t];n[t++]=R(w-.15)}n[t++]="textxoffset",e.addontextxoffset!=null?n[t++]=e.addontextxoffset:n[t++]=67+e.addongap,e.addontextyoffset!=null&&(n[t++]="textyoffset",n[t++]=e.addontextyoffset),n[t++]="textsize",e.addontextsize!=null?n[t++]=e.addontextsize:n[t++]=e.textsize;var k=qe(e.addontextfont,"unset")?e.addontextfont:e.textfont;n[t++]="textfont",n[t++]=k,e.addopts=rt(),e.addon.length==2&&(n[t++]=e.addon,n[t++]=e.addopts,Lm()),e.addon.length==5&&(n[t++]=e.addon,n[t++]=e.addopts,Um()),e.addcode=n[--t],n[t++]=1/0,W(e.sbs),n[t++]=e.addongap,W(h(e.addcode,"sbs")),e.sbs=o(),n[t++]=1/0,W(e.bhs),W(h(e.addcode,"bhs")),e.bhs=o(),n[t++]=1/0,W(e.bbs),W(h(e.addcode,"bbs")),e.bbs=o(),n[t++]=1/0,W(e.txt),W(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}n[t++]=1/0,n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=e.sbs,n[t++]="bhs",n[t++]=e.bhs,n[t++]="bbs",n[t++]=e.bbs,n[t++]="txt",n[t++]=e.txt,n[t++]="opt",n[t++]=e.options,n[t++]="guardleftpos",n[t++]=7,n[t++]="guardrightpos",e.addon.length==0?n[t++]=7:n[t++]=5,n[t++]="guardrightypos",n[t++]=e.guardrightypos,n[t++]="borderleft",n[t++]=7,n[t++]="borderright",e.addon.length==0?n[t++]=7:n[t++]=5,n[t++]="bordertop",n[t++]=0,n[t++]="borderbottom",n[t++]=5;var E=rt();n[t++]=E,e.dontdraw||on(),e=r}function VS(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-9,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],sn(e.barcode," "),n[--t]?(e.barcode=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.barcode.length==7||e.barcode.length==8){Ie(e.barcode,function(){var V=n[--t];(V<48||V>57)&&(n[t++]="bwipp.upcAupcEbadCharacter#5714",n[t++]="UPC-E must contain only digits",Z())});var i=h(e.barcode,0);i!=48&&i!=49&&(n[t++]="bwipp.upcAupcEbadNumberSystem#5718",n[t++]="UPC-E must have number system 0 or 1",Z());for(var a=0;a<1;a++){var s=e.barcode.length==8?12:11;if(e.upcacode=fe(s),h(e.barcode,6)-48<=2){H(e.upcacode,0,O(e.barcode,0,3)),H(e.upcacode,3,O(e.barcode,6,1)),H(e.upcacode,4,"0000"),H(e.upcacode,8,O(e.barcode,3,3));break}if(h(e.barcode,6)-48==3){H(e.upcacode,0,O(e.barcode,0,4)),H(e.upcacode,4,"00000"),H(e.upcacode,9,O(e.barcode,4,2));break}if(h(e.barcode,6)-48==4){H(e.upcacode,0,O(e.barcode,0,5)),H(e.upcacode,5,"00000"),H(e.upcacode,10,O(e.barcode,5,1));break}if(h(e.barcode,6)-48>=5){H(e.upcacode,0,O(e.barcode,0,6)),H(e.upcacode,6,"0000"),H(e.upcacode,10,O(e.barcode,6,1));break}}e.barcode.length==8&&H(e.upcacode,11,O(e.barcode,7,1)),e.barcode=e.upcacode}e.barcode.length!=11&&e.barcode.length!=12&&(n[t++]="bwipp.upcAbadLength#5756",n[t++]="UPC-A must be 11 or 12 digits",Z());for(var l=e.barcode,c=0,d=l.length;c<d;c++){var f=h(l,c);(f<48||f>57)&&(n[t++]="bwipp.upcAbadCharacter#5760",n[t++]="UPC-A must contain only digits",Z())}e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.upcAbadAddOnLength#5764",n[t++]="Add-on for UPC-A must be 2 or 5 digits",Z()),e.pad=fe(12),e.checksum=0;for(var m=0;m<=10;m+=1)e.i=m,e.barchar=h(e.barcode,e.i)-48,e.i%2!=0?e.checksum=e.checksum+e.barchar:e.checksum=e.checksum+e.barchar*3;e.checksum=(10-e.checksum%10)%10,e.barcode.length==12&&h(e.barcode,11)!=e.checksum+48&&(n[t++]="bwipp.upcAbadCheckDigit#5782",n[t++]="Incorrect UPC check digit provided",Z()),H(e.pad,0,e.barcode),C(e.pad,11,e.checksum+48),e.barcode=e.pad,e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.sbs=fe(59),e.txt=o(12),H(e.sbs,0,h(e.encs,10));for(var g=0;g<=5;g+=1)e.i=g,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*4+3,e.enc),e.i==0?C(e.txt,0,o([O(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])):C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*7+13+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,27,h(e.encs,11));for(var v=6;v<=11;v+=1)e.i=v,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*4+8,e.enc),e.i==11?C(e.txt,11,o([O(e.barcode,11,1),e.textxoffset+107,e.textyoffset,e.textfont,e.textsize-2])):C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*7+e.textxoffset+17,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,56,h(e.encs,12)),n[t++]=1/0;for(var y=e.sbs,A=0,w=y.length;A<w;A++)n[t++]=h(y,A)-48;if(e.sbs=o(),e.includetext){n[t++]=1/0;for(var k=0;k<4;k++)n[t++]=e.height;for(var E=0;E<10;E++)n[t++]=R(e.height-.075);n[t++]=e.height,n[t++]=e.height;for(var I=0;I<10;I++)n[t++]=R(e.height-.075);for(var T=0;T<4;T++)n[t++]=e.height;e.bhs=o(),n[t++]=1/0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;for(var N=0;N<10;N++)n[t++]=.075;n[t++]=0,n[t++]=0;for(var j=0;j<10;j++)n[t++]=.075;n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,e.bbs=o()}else{n[t++]=1/0;for(var B=0;B<30;B++)n[t++]=e.height;e.bhs=o(),n[t++]=1/0;for(var U=0;U<30;U++)n[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(n[t++]=1/0,n[t++]="dontdraw",n[t++]=!0,n[t++]="includetext",n[t++]=!0,n[t++]="height",n[t++]=e.height,e.includetext){var F=n[--t];n[t++]=R(F-.15)}n[t++]="textxoffset",e.addontextxoffset!=null?n[t++]=e.addontextxoffset:n[t++]=95+e.addongap,e.addontextyoffset!=null&&(n[t++]="textyoffset",n[t++]=e.addontextyoffset),n[t++]="textsize",e.addontextsize!=null?n[t++]=e.addontextsize:n[t++]=e.textsize;var P=qe(e.addontextfont,"unset")?e.addontextfont:e.textfont;n[t++]="textfont",n[t++]=P,e.addopts=rt(),e.addon.length==2&&(n[t++]=e.addon,n[t++]=e.addopts,Lm()),e.addon.length==5&&(n[t++]=e.addon,n[t++]=e.addopts,Um()),e.addcode=n[--t],n[t++]=1/0,W(e.sbs),n[t++]=e.addongap,W(h(e.addcode,"sbs")),e.sbs=o(),n[t++]=1/0,W(e.bhs),W(h(e.addcode,"bhs")),e.bhs=o(),n[t++]=1/0,W(e.bbs),W(h(e.addcode,"bbs")),e.bbs=o(),n[t++]=1/0,W(e.txt),W(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}n[t++]=1/0,n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=e.sbs,n[t++]="bhs",n[t++]=e.bhs,n[t++]="bbs",n[t++]=e.bbs,n[t++]="txt",n[t++]=e.txt,n[t++]="opt",n[t++]=e.options,n[t++]="guardrightpos",e.addon.length==0?n[t++]=9:n[t++]=5,n[t++]="guardrightypos",n[t++]=e.guardrightypos,n[t++]="borderleft",n[t++]=9,n[t++]="borderright",e.addon.length==0?n[t++]=9:n[t++]=5,n[t++]="bordertop",n[t++]=0,n[t++]="borderbottom",n[t++]=5;var z=rt();n[t++]=z,e.dontdraw||on(),e=r}function YS(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-9,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],sn(e.barcode," "),n[--t]?(e.barcode=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.barcode.length==11||e.barcode.length==12){Ie(e.barcode,function(){var V=n[--t];(V<48||V>57)&&(n[t++]="bwipp.upcEupcAbadCharacter#5967",n[t++]="UPC-A must contain only digits",Z())});for(var i=0;i<1;i++){var a=e.barcode.length==12?8:7;if(e.upcecode=fe(a),h(e.barcode,3)-48<=2&&ce(O(e.barcode,4,4),"0000")){H(e.upcecode,0,O(e.barcode,0,3)),H(e.upcecode,3,O(e.barcode,8,3)),H(e.upcecode,6,O(e.barcode,3,1));break}if(ce(O(e.barcode,4,5),"00000")){H(e.upcecode,0,O(e.barcode,0,4)),H(e.upcecode,4,O(e.barcode,9,2)),H(e.upcecode,6,"3");break}if(ce(O(e.barcode,5,5),"00000")){H(e.upcecode,0,O(e.barcode,0,5)),H(e.upcecode,5,O(e.barcode,10,1)),H(e.upcecode,6,"4");break}if(h(e.barcode,10)-48>=5&&ce(O(e.barcode,6,4),"0000")){H(e.upcecode,0,O(e.barcode,0,6)),H(e.upcecode,6,O(e.barcode,10,1));break}n[t++]="bwipp.upcEupcAnotCompressible#5995",n[t++]="UPC-A cannot be converted to a UPC-E",Z()}e.barcode.length==12&&H(e.upcecode,7,O(e.barcode,11,1)),e.barcode=e.upcecode}e.barcode.length!=7&&e.barcode.length!=8&&(n[t++]="bwipp.upcEbadLength#6005",n[t++]="UPC-E must be 7 or 8 digits",Z());for(var s=e.barcode,l=0,c=s.length;l<c;l++){var d=h(s,l);(d<48||d>57)&&(n[t++]="bwipp.upcEbadCharacter#6009",n[t++]="UPC-E must contain only digits",Z())}e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.upcEbadAddOnLength#6013",n[t++]="Add-on for UPC-E must be 2 or 5 digits",Z());var f=h(e.barcode,0);f!=48&&f!=49&&(n[t++]="bwipp.upcEbadNumberSystem#6018",n[t++]="UPC-E must have number system 0 or 1",Z()),e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","111111"]),e.barchars="0123456789",e.mirrormaps=o(["000111","001011","001101","001110","010011","011001","011100","010101","010110","011010"]);for(var m=0;m<1;m++){if(e.upcacode=fe(11),h(e.barcode,6)-48<=2){H(e.upcacode,0,O(e.barcode,0,3)),H(e.upcacode,3,O(e.barcode,6,1)),H(e.upcacode,4,"0000"),H(e.upcacode,8,O(e.barcode,3,3));break}if(h(e.barcode,6)-48==3){H(e.upcacode,0,O(e.barcode,0,4)),H(e.upcacode,4,"00000"),H(e.upcacode,9,O(e.barcode,4,2));break}if(h(e.barcode,6)-48==4){H(e.upcacode,0,O(e.barcode,0,5)),H(e.upcacode,5,"00000"),H(e.upcacode,10,O(e.barcode,5,1));break}if(h(e.barcode,6)-48>=5){H(e.upcacode,0,O(e.barcode,0,6)),H(e.upcacode,6,"0000"),H(e.upcacode,10,O(e.barcode,6,1));break}}e.checksum=0;for(var g=0;g<=10;g+=1)e.i=g,e.barchar=h(e.upcacode,e.i)-48,e.i%2!=0?e.checksum=e.checksum+e.barchar:e.checksum=e.checksum+e.barchar*3;if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==8&&h(e.barcode,7)!=e.checksum+48&&(n[t++]="bwipp.upcEbadCheckDigit#6080",n[t++]="Incorrect UPC check digit provided",Z()),e.pad=fe(8),H(e.pad,0,e.barcode),C(e.pad,7,e.checksum+48),e.barcode=e.pad,e.txt=o(8),C(e.txt,0,o([O(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])),e.mirrormap=h(e.mirrormaps,e.checksum),h(e.barcode,0)==48){e.invt=fe(e.mirrormap.length);for(var v=0,y=e.mirrormap.length-1;v<=y;v+=1)e.i=v,h(e.mirrormap,e.i)==48?C(e.invt,e.i,49):C(e.invt,e.i,48);e.mirrormap=e.invt}e.sbs=fe(33),H(e.sbs,0,h(e.encs,10));for(var A=1;A<=6;A+=1){if(e.i=A,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i-1)==49){e.enclen=e.enc.length,e.revenc=fe(e.enclen);for(var w=0,k=e.enclen-1;w<=k;w+=1)e.j=w,e.char=h(e.enc,e.j),C(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}H(e.sbs,(e.i-1)*4+3,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i-1)*7+13+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}C(e.txt,7,o([O(e.barcode,7,1),63+e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])),H(e.sbs,27,h(e.encs,11)),n[t++]=1/0;for(var E=e.sbs,I=0,T=E.length;I<T;I++)n[t++]=h(E,I)-48;if(e.sbs=o(),e.includetext){n[t++]=1/0,n[t++]=e.height,n[t++]=e.height;for(var N=0;N<12;N++)n[t++]=R(e.height-.075);n[t++]=e.height,n[t++]=e.height,n[t++]=e.height,e.bhs=o(),n[t++]=1/0,n[t++]=0,n[t++]=0;for(var j=0;j<12;j++)n[t++]=.075;n[t++]=0,n[t++]=0,n[t++]=0,e.bbs=o()}else{n[t++]=1/0;for(var B=0;B<17;B++)n[t++]=e.height;e.bhs=o(),n[t++]=1/0;for(var U=0;U<17;U++)n[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(n[t++]=1/0,n[t++]="dontdraw",n[t++]=!0,n[t++]="includetext",n[t++]=!0,n[t++]="height",n[t++]=e.height,e.includetext){var F=n[--t];n[t++]=R(F-.15)}n[t++]="textxoffset",e.addontextxoffset!=null?n[t++]=e.addontextxoffset:n[t++]=51+e.addongap,e.addontextyoffset!=null&&(n[t++]="textyoffset",n[t++]=e.addontextyoffset),n[t++]="textsize",e.addontextsize!=null?n[t++]=e.addontextsize:n[t++]=e.textsize;var P=qe(e.addontextfont,"unset")?e.addontextfont:e.textfont;n[t++]="textfont",n[t++]=P,e.addopts=rt(),e.addon.length==2&&(n[t++]=e.addon,n[t++]=e.addopts,Lm()),e.addon.length==5&&(n[t++]=e.addon,n[t++]=e.addopts,Um()),e.addcode=n[--t],n[t++]=1/0,W(e.sbs),n[t++]=e.addongap,W(h(e.addcode,"sbs")),e.sbs=o(),n[t++]=1/0,W(e.bhs),W(h(e.addcode,"bhs")),e.bhs=o(),n[t++]=1/0,W(e.bbs),W(h(e.addcode,"bbs")),e.bbs=o(),n[t++]=1/0,W(e.txt),W(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}n[t++]=1/0,n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=e.sbs,n[t++]="bhs",n[t++]=e.bhs,n[t++]="bbs",n[t++]=e.bbs,n[t++]="txt",n[t++]=e.txt,n[t++]="opt",n[t++]=e.options,n[t++]="guardrightpos",e.addon.length==0?n[t++]=9:n[t++]=5,n[t++]="guardrightypos",n[t++]=e.guardrightypos,n[t++]="borderleft",n[t++]=9,n[t++]="borderright",e.addon.length==0?n[t++]=9:n[t++]=5,n[t++]="bordertop",n[t++]=0,n[t++]="borderbottom",n[t++]=5;var z=rt();n[t++]=z,e.dontdraw||on(),e=r}function NN(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.isbntextfont="OCR-A",e.isbntextsize=8,e.isbntextxoffset=null,e.isbntextyoffset=null,e.height=1,e.addongap=12,e.legacy=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],sn(e.barcode," "),n[--t]?(e.barcode=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.barcode.length!=15&&e.barcode.length!=17&&e.barcode.length!=11&&e.barcode.length!=13&&(n[t++]="bwipp.isbnBadLength#6249",n[t++]="ISBN-13 must be 15 or 17 characters including dashes. ISBN-10 must be 11 or 13 characters including dashes",Z()),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.isbnBadAddOnLength#6252",n[t++]="Add-on for ISBN must be 2 or 5 digits",Z()),e.barcode.length>=15){var i=O(e.barcode,0,4);qe(i,"978-")&&qe(i,"979-")&&(n[t++]="bwipp.isbn13badPrefix#6256",n[t++]="ISBN-13 prefix must be 978- or 979-",Z()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var a=O(e.barcode,5,9),s=0,l=a.length;s<l;s++){var c=h(a,s);n[t++]=c,c==45&&(e.wasdash&&(n[t++]="bwipp.isbn13adjacentDashes#6263",n[t++]="ISBN-13 does not permit adjacent dashes",Z()),e.wasdash=!0,e.numdash=e.numdash+1);var d=n[--t];d>=48&&d<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(n[t++]="bwipp.isbn13numDashesDigits#6274",n[t++]="Incorrect number of dashes and digits for ISBN-13",Z());var f=h(e.barcode,14);if((f<48||f>57)&&(n[t++]="bwipp.isbn13character15#6277",n[t++]="ISBN-13 character 15 must be a digit",Z()),e.barcode.length==17){qe(O(e.barcode,15,1),"-")&&(n[t++]="bwipp.isbn13character16#6281",n[t++]="ISBN-13 penultimate character must be a dash",Z());var m=h(e.barcode,16);(m<48||m>57)&&(n[t++]="bwipp.isbn13character17#6284",n[t++]="ISBN-13 final character must be a digit",Z())}}else{var g=h(e.barcode,0);(g<48||g>57)&&(n[t++]="bwipp.isbn10FirstDigit#6289",n[t++]="ISBN-10 first character must be a digit",Z()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var v=O(e.barcode,1,9),y=0,A=v.length;y<A;y++){var w=h(v,y);n[t++]=w,w==45&&(e.wasdash&&(n[t++]="bwipp.isbn10adjacentDashes#6296",n[t++]="ISBN-10 does not permit adjacent dashes",Z()),e.wasdash=!0,e.numdash=e.numdash+1);var k=n[--t];k>=48&&k<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(n[t++]="bwipp.isbn10numDashesDigits#6307",n[t++]="Incorrect number of dashes and digits for ISBN-10",Z());var E=h(e.barcode,10);if((E<48||E>57)&&(n[t++]="bwipp.isbn10character11#6310",n[t++]="ISBN-10 character 11 must be a digit",Z()),e.barcode.length==13){qe(O(e.barcode,11,1),"-")&&(n[t++]="bwipp.isbn10character12#6314",n[t++]="ISBN-10 penultimate character must be a dash",Z());var I=h(e.barcode,12);(I<48||I>57)&&I!=88&&(n[t++]="bwipp.isbn10character13#6317",n[t++]="ISBN-10 final character must be a digit or X",Z())}}if(e.isbntxt=e.barcode,e.isbntxt.length<=13){for(e.isbn=fe(10),e.checksum=0,e.i=0,e.n=0;e.isbnchar=h(e.isbntxt,e.i)-48,e.isbnchar!=-3&&(C(e.isbn,e.n,e.isbnchar+48),e.n<9&&(e.checksum=R(e.checksum+(10-e.n)*e.isbnchar)),e.n=e.n+1),e.i=e.i+1,e.i!=e.isbntxt.length;);var T=(11-e.checksum%11)%11;n[t++]="checksum",n[t++]=T,T==10&&(n[t-1]=40);var N=n[--t];e[n[--t]]=N+48,e.isbn=O(e.isbn,0,9),e.isbntxt.length==13&&h(e.isbntxt,12)!=e.checksum&&(n[t++]="bwipp.isbn10badCheckDigit#6345",n[t++]="Incorrect ISBN-10 check digit provided",Z())}if(!e.legacy||e.isbntxt.length>=15){for(e.isbntxt.length<=13&&(e.pad=fe(15),H(e.pad,0,"978-"),H(e.pad,4,O(e.isbntxt,0,11)),e.isbntxt=e.pad),e.isbn=fe(13),e.checksum=0,e.i=0,e.n=0;;){if(e.isbnchar=h(e.isbntxt,e.i)-48,e.isbnchar!=-3){if(C(e.isbn,e.n,e.isbnchar+48),e.n<12){if(n[t++]="checksum",n[t++]=e.isbnchar,e.n%2!=0){var j=n[--t];n[t++]=j*3}var B=n[--t];e[n[--t]]=R(B+e.checksum)}e.n=e.n+1}if(e.i=e.i+1,e.i==e.isbntxt.length)break}e.checksum=(10-e.checksum%10)%10+48,e.isbn=O(e.isbn,0,12),e.isbntxt.length==17&&h(e.isbntxt,16)!=e.checksum&&(n[t++]="bwipp.isbn13badCheckDigit#6380",n[t++]="Incorrect ISBN-13 check digit provided",Z())}var U=e.isbn.length==12?22:18;if(e.pad=fe(U),H(e.pad,0,"ISBN "),H(e.pad,5,e.isbntxt),C(e.pad,e.pad.length-2,45),C(e.pad,e.pad.length-1,e.checksum),e.isbntxt=e.pad,e.barcode=fe(12),e.isbn.length==9?(H(e.barcode,0,"978"),H(e.barcode,3,e.isbn)):H(e.barcode,0,e.isbn),e.addon.length!=0){var F=fe(12+e.addon.length+1);H(F,0,e.barcode),H(F,12," "),H(F,13,e.addon),e.barcode=F}C(e.options,"dontdraw",!0),C(e.options,"addongap",e.addongap),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,zm();var P=n[--t];if(e[n[--t]]=P,e.includetext){if(e.isbntextxoffset==null){n[t++]="isbntextxoffset",e.isbn.length==9?n[t++]=-1:n[t++]=-12;var z=n[--t];e[n[--t]]=z}e.isbntextyoffset==null&&(e.isbntextyoffset=e.height*72+3);var V=h(e.args,"txt")!==void 0;V?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),H(e.newtxt,0,e.txt),C(e.newtxt,e.newtxt.length-1,o([e.isbntxt,e.isbntextxoffset,e.isbntextyoffset,e.isbntextfont,e.isbntextsize])),C(e.args,"txt",e.newtxt)):C(e.args,"txt",o([o([e.isbntxt,e.isbntextxoffset,e.isbntextyoffset,e.isbntextfont,e.isbntextsize])]))}C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function TN(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.ismntextfont="OCR-A",e.ismntextsize=8,e.ismntextxoffset=null,e.ismntextyoffset=null,e.height=1,e.addongap=12,e.legacy=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],sn(e.barcode," "),n[--t]?(e.barcode=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.barcode.length!=15&&e.barcode.length!=17&&e.barcode.length!=11&&e.barcode.length!=13&&(n[t++]="bwipp.ismnBadLength#6499",n[t++]="ISMN-13 must be 15 or 17 characters including dashes. ISMN-10 must be 11 or 13 characters including dashes",Z()),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.ismnBadAddOnLength#6502",n[t++]="Add-on for ISMN must be 2 or 5 digits",Z()),e.barcode.length>=15){qe(O(e.barcode,0,4),"979-")&&(n[t++]="bwipp.ismn13badPrefix#6506",n[t++]="ISMN-13 prefix must be 979-",Z()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var i=O(e.barcode,5,9),a=0,s=i.length;a<s;a++){var l=h(i,a);n[t++]=l,l==45&&(e.wasdash&&(n[t++]="bwipp.ismn13adjacentDashes#6513",n[t++]="ISMN-13 does not permit adjacent dashes",Z()),e.wasdash=!0,e.numdash=e.numdash+1);var c=n[--t];c>=48&&c<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(n[t++]="bwipp.ismn13numDashesDigits#6524",n[t++]="Incorrect number of dashes and digits for ISMN-13",Z());var d=h(e.barcode,14);if((d<48||d>57)&&(n[t++]="bwipp.ismn13character15#6527",n[t++]="ISMN-13 character 15 must be a digit",Z()),e.barcode.length==17){qe(O(e.barcode,15,1),"-")&&(n[t++]="bwipp.ismn13character16#6531",n[t++]="ISMN-13 penultimate character must be a dash",Z());var f=h(e.barcode,16);(f<48||f>57)&&(n[t++]="bwipp.ismn13character17#6534",n[t++]="ISMN-13 final character must be a digit",Z())}}else{qe(O(e.barcode,0,2),"M-")&&(n[t++]="bwipp.ismn10badPrefix#6539",n[t++]="ISMN-10 prefix must be M-",Z());var m=h(e.barcode,2);(m<48||m>57)&&(n[t++]="bwipp.ismn10character3#6542",n[t++]="ISMN-10 character 3 must be a digit",Z()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var g=O(e.barcode,3,7),v=0,y=g.length;v<y;v++){var A=h(g,v);n[t++]=A,A==45&&(e.wasdash&&(n[t++]="bwipp.ismn10adjacentDashes#6549",n[t++]="ISMN-10 does not permit adjacent dashes",Z()),e.wasdash=!0,e.numdash=e.numdash+1);var w=n[--t];w>=48&&w<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=1||e.numdigit!=6)&&(n[t++]="bwipp.ismn10numDashesDigits#6560",n[t++]="Incorrect number of dashes and digits for ISMN-10",Z());var k=h(e.barcode,10);if((k<48||k>57)&&(n[t++]="bwipp.ismn10character11#6563",n[t++]="ISMN-10 character 11 must be a digit",Z()),e.barcode.length==13){var E=O(e.barcode,11,1);qe(E,"-")&&(n[t++]="bwipp.ismn10character12#6567",n[t++]="ISMN-10 penultimate character must be a dash",Z());var I=h(e.barcode,12);(I<48||I>57)&&I!=88&&(n[t++]="bwipp.ismn10character13#6570",n[t++]="ISMN-10 final character must be a digit or X",Z())}}for(e.ismntxt=e.barcode,e.legacytxt="",e.ismntxt.length<=13&&(e.legacytxt=e.ismntxt,e.pad=fe(e.ismntxt.length+4),H(e.pad,0,"979-0-"),H(e.pad,6,O(e.ismntxt,2,e.ismntxt.length-2)),e.ismntxt=e.pad),e.ismn=fe(13),e.checksum=0,e.i=0,e.n=0;e.ismnchar=h(e.ismntxt,e.i)-48,e.ismnchar!=-3&&(C(e.ismn,e.n,e.ismnchar+48),e.n<12&&(e.n%2==0?e.checksum=e.ismnchar+e.checksum:e.checksum=e.ismnchar*3+e.checksum),e.n=e.n+1),e.i=e.i+1,e.i!=e.ismntxt.length;);if(e.checksum=(10-e.checksum%10)%10+48,e.barcode.length==13||e.barcode.length==17){var T=e.barcode;h(T,T.length-1)!=e.checksum&&(n[t++]="bwipp.ismnBadCheckDigit#6612",n[t++]="Incorrect ISMN check digit provided",Z())}if(e.legacy&&e.legacytxt.length!=0?(e.ismntxt=e.legacytxt,e.pad=fe(18)):e.pad=fe(22),H(e.pad,0,"ISMN "),H(e.pad,5,e.ismntxt),C(e.pad,e.pad.length-2,45),C(e.pad,e.pad.length-1,e.checksum),e.ismntxt=e.pad,e.barcode=O(e.ismn,0,12),e.addon.length!=0){var N=fe(12+e.addon.length+1);H(N,0,e.barcode),H(N,12," "),H(N,13,e.addon),e.barcode=N}C(e.options,"dontdraw",!0),C(e.options,"addongap",e.addongap),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,zm();var j=n[--t];if(e[n[--t]]=j,e.includetext){if(e.ismntextxoffset==null){n[t++]="ismntextxoffset",e.ismntxt.length==18?n[t++]=-1:n[t++]=-12;var B=n[--t];e[n[--t]]=B}e.ismntextyoffset==null&&(e.ismntextyoffset=e.height*72+3);var U=h(e.args,"txt")!==void 0;U?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),H(e.newtxt,0,e.txt),C(e.newtxt,e.newtxt.length-1,o([e.ismntxt,e.ismntextxoffset,e.ismntextyoffset,e.ismntextfont,e.ismntextsize])),C(e.args,"txt",e.newtxt)):C(e.args,"txt",o([o([e.ismntxt,e.ismntextxoffset,e.ismntextyoffset,e.ismntextfont,e.ismntextsize])]))}C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function MN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.issntextfont="OCR-A",e.issntextsize=8,e.issntextxoffset=null,e.issntextyoffset=null,e.height=1,e.addongap=12,n[t++]=e,ht(),e.options=n[--t],e.issntxt=n[--t],sn(e.issntxt," "),n[--t]?(e.issntxt=n[--t],t--,e.seqvar=n[--t]):(t--,e.seqvar="00"),sn(e.seqvar," "),n[--t]?(e.seqvar=n[--t],t--,e.addon=n[--t]):(t--,e.addon=""),e.issntxt.length!=8&&e.issntxt.length!=9&&(n[t++]="bwipp.issnBadLength#6736",n[t++]="ISSN must be 8 or 9 characters including dash, in the format XXXX-XXXX",Z());for(var i=O(e.issntxt,0,4),a=0,s=i.length;a<s;a++){var l=h(i,a);(l<48||l>57)&&(n[t++]="bwipp.issnFirstThroughFourthNotNumeric#6740",n[t++]="ISSN first four characters must be numeral characters",Z())}qe(O(e.issntxt,4,1),"-")&&(n[t++]="bwipp.issnNeedsDash#6744",n[t++]="ISSN fifth character must be a dash",Z());for(var c=O(e.issntxt,5,3),d=0,f=c.length;d<f;d++){var m=h(c,d);(m<48||m>57)&&(n[t++]="bwipp.issnSixthThroughEighthNotNumeric#6748",n[t++]="ISSN sixth through eighth characters must be numerals",Z())}if(e.issntxt.length==9){var g=h(e.issntxt,8);(g<48||g>57)&&g!=88&&(n[t++]="bwipp.issnNinthCharacterBadFormat#6753",n[t++]="ISSN ninth character must be a number or the character X",Z())}for(e.seqvar.length!=2&&(n[t++]="bwipp.issnBadSequenceVariantLength#6757",n[t++]="Sequence variant for ISSN must be 2 digits",Z()),Ie(e.seqvar,function(){var I=n[--t];(I<48||I>57)&&(n[t++]="bwipp.issnSequenceVariantBadCharacter#6761",n[t++]="Sequence variant for ISSN must contain only digits",Z())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(n[t++]="bwipp.issnBadAddOnLength#6765",n[t++]="Add-on for ISSN must be 2 or 5 digits",Z()),e.issn=fe(8),e.checksum=0,e.i=0,e.n=0;e.issnchar=h(e.issntxt,e.i)-48,e.issnchar!=-3&&(C(e.issn,e.n,e.issnchar+48),e.n<7&&(e.checksum=R(e.checksum+e.issnchar*(8-e.n))),e.n=e.n+1),e.i=e.i+1,e.i!=e.issntxt.length;);e.checksum=(11-e.checksum%11)%11;var v=e.checksum+48;n[t++]="checksum",n[t++]=v,v==58&&(n[t-1]=88);var y=n[--t],A=n[--t];if(e[A]=y,e.issntxt.length==9&&h(e.issntxt,8)!=e.checksum&&(n[t++]="bwipp.issnBadCheckDigit#6788",n[t++]="Incorrect ISSN check digit provided",Z()),e.pad=fe(14),H(e.pad,0,"ISSN "),H(e.pad,5,e.issntxt),C(e.pad,13,e.checksum),e.issntxt=e.pad,e.barcode=O(e.issn,0,7),e.barcode=fe(12),H(e.barcode,0,"977"),H(e.barcode,3,e.issn),H(e.barcode,10,e.seqvar),e.addon.length!=0){var w=fe(12+e.addon.length+1);H(w,0,e.barcode),H(w,12," "),H(w,13,e.addon),e.barcode=w}C(e.options,"dontdraw",!0),C(e.options,"addongap",e.addongap),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,zm();var k=n[--t];if(e[n[--t]]=k,e.includetext){e.issntextxoffset==null&&(e.issntextxoffset=10),e.issntextyoffset==null&&(e.issntextyoffset=e.height*72+3);var E=h(e.args,"txt")!==void 0;E?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),H(e.newtxt,0,e.txt),C(e.newtxt,e.newtxt.length-1,o([e.issntxt,e.issntextxoffset,e.issntextyoffset,e.issntextfont,e.issntextsize])),C(e.args,"txt",e.newtxt)):C(e.args,"txt",o([o([e.issntxt,e.issntextxoffset,e.issntextyoffset,e.issntextfont,e.issntextsize])]))}C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function RN(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barlen=e.barcode.length,e.barlen!=7&&e.barlen!=8&&(n[t++]="bwipp.MandSbadLength#6884",n[t++]="M&S barcode must be 7 or 8 characters",Z()),e.barlen==7){var i=zi(fe(8),"00000000");H(i,1,e.barcode),e.barcode=i}C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,cw();var a=n[--t];e[n[--t]]=a;var s=h(e.args,"bbs");C(s,10,h(s,2)),C(s,11,h(s,2));var l=h(e.args,"bhs");if(C(l,10,h(l,2)),C(l,11,h(l,2)),e.txt=h(e.args,"txt"),e.barlen==7){for(var c=0;c<=6;c+=1){var d=e.txt;H(h(h(d,c),0),0,h(h(d,c+1),0))}H(h(h(e.txt,7),0),0," ")}var f=o(10);H(f,0,e.txt),e.txt=f;var m=h(e.txt,0);C(e.txt,8,Jh(o(m.length),m));var g=h(e.txt,0);C(e.txt,9,Jh(o(g.length),g)),C(h(e.txt,8),0,"M"),C(h(e.txt,8),1,-12),C(h(e.txt,9),0,"S");var v=h(e.txt,9);C(v,1,69),C(e.args,"txt",e.txt),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function Hm(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,e.raw=!1,e.newencoder=!1,e.parse=!1,e.parsefnc=!1,e.suppressc=!1,e.unlatchextbeforec=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.sta=-1,e.stb=-2,e.stc=-3,e.swa=-4,e.swb=-5,e.swc=-6,e.fn1=-7,e.fn2=-8,e.fn3=-9,e.fn4=-10,e.sft=-11,e.stp=-12,e.lka=-13,e.lkc=-14;var i=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3],["LNKA",e.lka],["LNKC",e.lkc]]);e.fncvals=i,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];if(e[n[--t]]=a,e.msglen=e.msg.length,e.encoding="legacy",e.newencoder&&(e.encoding="new"),e.raw&&(e.encoding="raw"),ce(e.encoding,"raw")){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ye(O(e.barcode,e.i+1,3)),C(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=O(e.cws,0,e.j),e.text=""}else{e.text=fe(e.msglen);for(var s=0,l=e.msglen-1;s<=l;s+=1){e.i=s;var c=h(e.msg,e.i);n[t++]=e.text,n[t++]=e.i,n[t++]=c,c<0&&(n[t-1]=32);var d=n[--t],f=n[--t];C(n[--t],f,d)}}e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.fn3,e.fn3,"96"]),o([e.fn2,e.fn2,"97"]),o([e.sft,e.sft,"98"]),o([e.swc,e.swc,"99"]),o([e.swb,e.fn4,e.swb]),o([e.fn4,e.swa,e.swa]),o([e.fn1,e.fn1,e.fn1]),o([e.sta,e.sta,e.sta]),o([e.stb,e.stb,e.stb]),o([e.stc,e.stc,e.stc]),o([e.stp,e.stp,e.stp])]),e.charvals=o([new Map,new Map,new Map]);for(var m=0,g=e.charmaps.length-1;m<=g;m+=1){e.i=m,e.encs=h(e.charmaps,e.i);for(var v=0;v<=2;v+=1){e.j=v;var y=h(e.encs,e.j);if(n[t++]=y,ce(Ys(y),"stringtype")){var A=h(n[--t],0);n[t++]=A}C(h(e.charvals,e.j),n[--t],e.i)}}if(ce(e.encoding,"legacy")){e.seta=h(e.charvals,0),C(e.seta,e.lka,h(e.seta,e.swb)),C(e.seta,e.lkc,h(e.seta,e.swc)),e.setb=h(e.charvals,1),C(e.setb,e.lka,h(e.setb,e.swc)),C(e.setb,e.lkc,h(e.setb,e.swa)),e.setc=h(e.charvals,2),C(e.setc,e.lka,h(e.setc,e.swa)),C(e.setc,e.lkc,h(e.setc,e.swb)),n[t++]=1/0;for(var w=0,k=e.msglen;w<k;w++)n[t++]=0;n[t++]=0,e.numSA=o(),n[t++]=1/0;for(var E=0,I=e.msglen;E<I;E++)n[t++]=0;n[t++]=0,e.numEA=o();for(var T=e.msglen-1;T>=0;T-=1)e.i=T,h(e.msg,e.i)>=0&&(h(e.msg,e.i)>=128?C(e.numEA,e.i,h(e.numEA,e.i+1)+1):C(e.numSA,e.i,h(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=o([]);for(var N=0,j=e.msglen-1;N<=j;N+=1){if(e.i=N,e.c=h(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?n[t++]=e.numSA:n[t++]=e.numEA;var B=h(n[--t],e.i),U=R(B+e.i)==e.msglen?3:5;B<U?(n[t++]=1/0,W(e.msgtmp),n[t++]=e.fn4,e.msgtmp=o()):(n[t++]=1/0,W(e.msgtmp),n[t++]=e.fn4,n[t++]=e.fn4,e.msgtmp=o(),e.ea=!e.ea)}n[t++]=1/0,W(e.msgtmp),e.c>=0?n[t++]=e.c&127:n[t++]=e.c,e.msgtmp=o()}e.msg=e.msgtmp,e.msglen=e.msg.length,e.numsscr=function(){for(e.s=0,e.p=n[--t];!(e.p>=e.msglen);){var Me=h(e.msg,e.p),it=h(e.setc,Me)!==void 0;if(n[t++]=Me,!it){t--;break}var st=n[t-1];if(st<=-1){var mt=n[--t];if(mt==e.fn1&&e.s%2==0)e.s=e.s+1;else break}else t--;e.s=e.s+1,e.p=e.p+1}n[t++]=e.s},e.enca=function(){C(e.cws,e.j,h(e.seta,n[--t])),e.j=e.j+1},e.encb=function(){C(e.cws,e.j,h(e.setb,n[--t])),e.j=e.j+1},e.encc=function(){var Me=n[t-1];if(qe(Ys(Me),"arraytype")){var it=h(e.setc,n[--t]);n[t++]=it}else{W(n[--t]);var st=n[--t],mt=n[--t];n[t++]=R(st-48+(mt-48)*10)}C(e.cws,e.j,n[--t]),e.j=e.j+1},e.anotb=function(){var Me=n[--t],it=h(e.seta,Me)!==void 0,st=h(e.setb,Me)!==void 0;n[t++]=it&&!st},e.bnota=function(){var Me=n[--t],it=h(e.setb,Me)!==void 0,st=h(e.seta,Me)!==void 0;n[t++]=it&&!st},n[t++]=1/0;for(var F=0,P=e.msg.length;F<P;F++)n[t++]=0;n[t++]=9999,e.nextanotb=o(),n[t++]=1/0;for(var z=0,V=e.msg.length;z<V;z++)n[t++]=0;n[t++]=9999,e.nextbnota=o();for(var L=e.msg.length-1;L>=0;L-=1)e.i=L,n[t++]=h(e.msg,e.i),e.anotb(),n[--t]?C(e.nextanotb,e.i,0):C(e.nextanotb,e.i,h(e.nextanotb,e.i+1)+1),n[t++]=h(e.msg,e.i),e.bnota(),n[--t]?C(e.nextbnota,e.i,0):C(e.nextbnota,e.i,h(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var Me=n[--t];n[t++]=oo(h(e.nextanotb,Me),h(e.nextbnota,Me))},e.bbeforea=function(){var Me=n[--t];n[t++]=oo(h(e.nextbnota,Me),h(e.nextanotb,Me))},e.cws=o(e.barcode.length*2+3),e.j=0,e.msglen>0?(n[t++]=0,e.numsscr()):n[t++]=-1,e.nums=n[--t];;){if(e.msglen==0){n[t++]=e.stb,e.enca(),e.cset="setb";break}if(e.msglen==2&&e.nums==2){n[t++]=e.stc,e.enca(),e.cset="setc";break}if(e.nums>=4){n[t++]=e.stc,e.enca(),e.cset="setc";break}if(n[t++]=0,e.abeforeb(),n[--t]){n[t++]=e.sta,e.enca(),e.cset="seta";break}n[t++]=e.stb,e.enca(),e.cset="setb";break}for(e.i=0;e.i!=e.msglen;)for(n[t++]=e.i,e.numsscr(),e.nums=n[--t];;){if((ce(e.cset,"seta")||ce(e.cset,"setb"))&&e.nums>=4&&h(e.msg,e.i)!=e.fn1){if(e.nums%2==0){n[t++]=e.swc,ce(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";break}else if(n[t++]=h(e.msg,e.i),ce(e.cset,"seta")?e.enca():e.encb(),e.i=e.i+1,n[t++]=e.i,e.numsscr(),n[--t]>=4){n[t++]=e.swc,ce(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";break}}n[t++]=ce(e.cset,"setb"),n[t++]=h(e.msg,e.i),e.anotb();var Q=n[--t];if(n[--t]&&Q){if(e.i<e.msglen-1&&(n[t++]=e.i+1,e.bbeforea(),n[--t])){n[t++]=e.sft,e.encb(),n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}n[t++]=e.swa,e.encb(),e.cset="seta";break}n[t++]=ce(e.cset,"seta"),n[t++]=h(e.msg,e.i),e.bnota();var q=n[--t];if(n[--t]&&q){if(e.i<e.msglen-1&&(n[t++]=e.i+1,e.abeforeb(),n[--t])){n[t++]=e.sft,e.enca(),n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}n[t++]=e.swb,e.enca(),e.cset="setb";break}if(ce(e.cset,"setc")&&e.nums<2&&(h(e.msg,e.i)>-1||h(e.msg,e.i)==e.fn4)){if(n[t++]=e.i,e.abeforeb(),n[--t]){n[t++]=e.swa,e.encc(),e.cset="seta";break}n[t++]=e.swb,e.encc(),e.cset="setb";break}if(ce(e.cset,"seta")){n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}if(ce(e.cset,"setb")){n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(ce(e.cset,"setc")){h(e.msg,e.i)<=-1?(n[t++]=h(e.msg,e.i),e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}break}e.cws=O(e.cws,0,e.j)}if(ce(e.encoding,"new")){n[t++]=1/0,n[t++]=e.fn3,n[t++]=96,n[t++]=e.fn2,n[t++]=97,n[t++]=e.fn1,n[t++]=102,n[t++]=e.stp,n[t++]=106,n[t++]=e.lka,n[t++]=100,n[t++]=e.lkc,n[t++]=99,e.seta=rt(),n[t++]=1/0,n[t++]=e.fn3,n[t++]=96,n[t++]=e.fn2,n[t++]=97,n[t++]=e.fn1,n[t++]=102,n[t++]=e.stp,n[t++]=106,n[t++]=e.lka,n[t++]=99,n[t++]=e.lkc,n[t++]=101,e.setb=rt(),n[t++]=1/0,n[t++]=e.fn1,n[t++]=102,n[t++]=e.stp,n[t++]=106,n[t++]=e.lka,n[t++]=101,n[t++]=e.lkc,n[t++]=100,e.setc=rt(),e.latch_a0=o(["","e","e","ee","eee","eee"]),e.latch_b0=o(["d","","d","ddd","dd","ddd"]),e.latch_c0=o(["c","c","","eec","ddc","dddc"]),e.latch_a1=o(["ee","eee","eee","","e","e"]),e.latch_b1=o(["ddd","dd","ddd","d","","d"]),e.latch_c1=o(["eec","ddc","dddc","c","c",""]),n[t++]=1/0;for(var ee=e.latch_a0,X=0,ae=ee.length;X<ae;X++)n[t++]=h(ee,X).length;e.latch_length_a0=o(),n[t++]=1/0;for(var K=e.latch_a1,ie=0,ne=K.length;ie<ne;ie++)n[t++]=h(K,ie).length;e.latch_length_a1=o(),n[t++]=1/0;for(var J=e.latch_b0,te=0,$=J.length;te<$;te++)n[t++]=h(J,te).length;e.latch_length_b0=o(),n[t++]=1/0;for(var oe=e.latch_b1,we=0,be=oe.length;we<be;we++)n[t++]=h(oe,we).length;e.latch_length_b1=o(),n[t++]=1/0;for(var Te=e.latch_c0,ye=0,tt=Te.length;ye<tt;ye++)n[t++]=h(Te,ye).length;e.latch_length_c0=o(),n[t++]=1/0;for(var Qe=e.latch_c1,Ge=0,Xe=Qe.length;Ge<Xe;Ge++)n[t++]=h(Qe,Ge).length;e.latch_length_c1=o(),e.latch_sequence=o([e.latch_a0,e.latch_b0,e.latch_c0,e.latch_a1,e.latch_b1,e.latch_c1]);var Je=o([function(){e.enc_a0()},function(){e.enc_b0()},function(){e.enc_c()},function(){e.enc_a1()},function(){e.enc_b1()},function(){e.enc_c()}]);e.encode=Je,e.start_code=o([103,104,105]),e.state_priority=o([1,0,2,4,3,5]),e.start_state=o([0,1,2,0,1,2]),e.start_length=o([1,1,1,1,1,1]),n[t++]=1/0;for(var dt=o([5,4,3,2,1,0]),vt=0,_t=dt.length;vt<_t;vt++)n[t++]=h(e.state_priority,h(dt,vt));e.reverse_priority=o(),n[t++]=1/0;for(var xt=e.reverse_priority,bt=0,kt=xt.length;bt<kt;bt++){var Pt=h(xt,bt);n[t++]=Pt,n[t++]=h(e.latch_length_a0,Pt),n[t++]=Pt}e.prioritized_latch_length_a0=o(),n[t++]=1/0;for(var Rt=e.reverse_priority,Wt=0,zt=Rt.length;Wt<zt;Wt++){var Ct=h(Rt,Wt);n[t++]=Ct,n[t++]=h(e.latch_length_a1,Ct),n[t++]=Ct}e.prioritized_latch_length_a1=o(),n[t++]=1/0;for(var Yt=e.reverse_priority,jt=0,an=Yt.length;jt<an;jt++){var rn=h(Yt,jt);n[t++]=rn,n[t++]=h(e.latch_length_b0,rn),n[t++]=rn}e.prioritized_latch_length_b0=o(),n[t++]=1/0;for(var Kt=e.reverse_priority,Jt=0,Zt=Kt.length;Jt<Zt;Jt++){var Qt=h(Kt,Jt);n[t++]=Qt,n[t++]=h(e.latch_length_b1,Qt),n[t++]=Qt}e.prioritized_latch_length_b1=o(),n[t++]=1/0;for(var mn=e.reverse_priority,cn=0,dn=mn.length;cn<dn;cn++){var Ht=h(mn,cn);n[t++]=Ht,n[t++]=h(e.latch_length_c0,Ht),n[t++]=Ht}e.prioritized_latch_length_c0=o(),n[t++]=1/0;for(var Bt=e.reverse_priority,Y=0,le=Bt.length;Y<le;Y++){var se=h(Bt,Y);n[t++]=se,n[t++]=h(e.latch_length_c1,se),n[t++]=se}e.prioritized_latch_length_c1=o(),e.max_int=2147483647,e.can_a=function(){if(e.c>=0)n[t++]=!0;else{var Me=h(e.seta,e.c)!==void 0;n[t++]=Me}},e.can_b=function(){if(e.c>=0)n[t++]=!0;else{var Me=h(e.setb,e.c)!==void 0;n[t++]=Me}},e.can_c0=function(){if(e.num_digits>=2)n[t++]=!0;else{var Me=h(e.setc,e.c)!==void 0;n[t++]=Me}},e.can_c1=function(){if(e.num_digits>=2)n[t++]=!0;else{var Me=h(e.setc,e.c)!==void 0;n[t++]=Me}},e.suppressc&&(e.can_c0=function(){n[t++]=!1}),(e.suppressc||e.unlatchextbeforec)&&(e.can_c1=function(){n[t++]=!1}),e.out_a0=function(){if(n[t++]=1,e.c>=0){if(e.c>=128){var Me=n[--t];n[t++]=Me+1}if((e.c&127)>=96){var it=n[--t];n[t++]=it+1}}},e.out_a1=function(){if(n[t++]=1,e.c>=0){if(e.c<128){var Me=n[--t];n[t++]=Me+1}if((e.c&127)>=96){var it=n[--t];n[t++]=it+1}}},e.out_b0=function(){if(n[t++]=1,e.c>=0){if(e.c>=128){var Me=n[--t];n[t++]=Me+1}if((e.c&127)<32){var it=n[--t];n[t++]=it+1}}},e.out_b1=function(){if(n[t++]=1,e.c>=0){if(e.c<128){var Me=n[--t];n[t++]=Me+1}if((e.c&127)<32){var it=n[--t];n[t++]=it+1}}},e.map_ab=function(){var Me=n[t-1];if(Me<32){var it=n[--t];n[t++]=it+64}else{var st=n[--t];n[t++]=st-32}},e.enc_a0=function(){if(n[t++]=1/0,e.c<0)n[t++]=h(e.seta,e.c);else{e.c>=128&&(n[t++]=101);var Me=e.c&127;if(n[t++]=Me,Me>=96){var it=n[--t];n[t++]=98,n[t++]=it}e.map_ab()}var st=o();n[t++]=st},e.enc_a1=function(){if(n[t++]=1/0,e.c<0)n[t++]=h(e.seta,e.c);else{e.c<128&&(n[t++]=101);var Me=e.c&127;if(n[t++]=Me,Me>=96){var it=n[--t];n[t++]=98,n[t++]=it}e.map_ab()}var st=o();n[t++]=st},e.enc_b0=function(){if(n[t++]=1/0,e.c<0)n[t++]=h(e.setb,e.c);else{e.c>=128&&(n[t++]=100);var Me=e.c&127;if(n[t++]=Me,Me<32){var it=n[--t];n[t++]=98,n[t++]=it}e.map_ab()}var st=o();n[t++]=st},e.enc_b1=function(){if(n[t++]=1/0,e.c<0)n[t++]=h(e.setb,e.c);else{e.c<128&&(n[t++]=100);var Me=e.c&127;if(n[t++]=Me,Me<32){var it=n[--t];n[t++]=98,n[t++]=it}e.map_ab()}var st=o();n[t++]=st},e.enc_c=function(){n[t++]=1/0,e.c<0?n[t++]=h(e.setc,e.c):n[t++]=R((h(e.msg,e.n)-48)*10+(h(e.msg,e.n+1)-48));var Me=o();n[t++]=Me},e.get_best_prior_state=function(){var Me=h(e.bln_0,n[--t]);e.len=R(n[--t]+Me),e.o=n[--t];var it=h(e.bln_0,n[--t]),st=R(n[--t]+it);n[t++]=st,st<e.len?(e.len=n[--t],e.o=n[--t]):t-=2;var mt=h(e.bln_0,n[--t]),Tt=R(n[--t]+mt);n[t++]=Tt,Tt<e.len?(e.len=n[--t],e.o=n[--t]):t-=2;var Ot=h(e.bln_0,n[--t]),Et=R(n[--t]+Ot);n[t++]=Et,Et<e.len?(e.len=n[--t],e.o=n[--t]):t-=2;var Dt=h(e.bln_0,n[--t]),wt=R(n[--t]+Dt);n[t++]=wt,wt<e.len?(e.len=n[--t],e.o=n[--t]):t-=2;var en=h(e.bln_0,n[--t]);R(n[--t]+en)<e.len?e.o=n[--t]:t--,n[t++]=e.o},e.bln_0=e.start_length,e.bln_1=e.start_length,n[t++]=1/0;for(var ge=0;ge<4;ge++)n[t++]=o([0,0,0,0,0,0]);e.bln=o(),e.bps_0=e.start_state,e.bps_1=e.start_state,n[t++]=1/0;for(var ve=0;ve<4;ve++)n[t++]=o([0,0,0,0,0,0]);e.bps=o(),n[t++]=1/0;for(var _e=0,pe=e.msg.length;_e<pe;_e++)n[t++]=o([0,0,0,0,0,0]);e.path=o(),e.make_tables=function(){e.num_digits=0;for(var Me=0,it=e.msg.length-1;Me<=it;Me+=1){e.n=Me,e.c=h(e.msg,e.n),n[t++]="num_digits",e.c>=48&&e.c<58?n[t++]=e.num_digits+1:n[t++]=0;var st=n[--t];e[n[--t]]=st,e.bln_2=e.bln_1,e.bln_1=e.bln_0,e.bln_0=h(e.bln,e.n&3),e.bps_2=e.bps_1,e.bps_1=e.bps_0,e.bps_0=h(e.bps,e.n&3),n[t++]="bps_c",e.num_digits>=2?n[t++]=e.bps_2:n[t++]=e.bps_1;var mt=n[--t];e[n[--t]]=mt,n[t++]="bln_c",e.num_digits>=2?n[t++]=e.bln_2:n[t++]=e.bln_1;var Tt=n[--t];if(e[n[--t]]=Tt,n[t++]=e.bln_0,n[t++]=0,e.can_a(),n[--t]){e.p=h(e.bps_1,0),C(h(e.path,e.n),0,e.p),n[t++]=R(h(e.bln_1,e.p)+h(e.latch_length_a0,e.p)),e.out_a0();var Ot=n[--t],Et=n[--t];n[t++]=R(Et+Ot)}else n[t++]=e.max_int;var Dt=n[--t],wt=n[--t];if(C(n[--t],wt,Dt),n[t++]=e.bln_0,n[t++]=3,e.can_a(),n[--t]){e.p=h(e.bps_1,3),C(h(e.path,e.n),3,e.p),n[t++]=R(h(e.bln_1,e.p)+h(e.latch_length_a1,e.p)),e.out_a1();var en=n[--t],gt=n[--t];n[t++]=R(gt+en)}else n[t++]=e.max_int;var un=n[--t],Vt=n[--t];if(C(n[--t],Vt,un),n[t++]=e.bln_0,n[t++]=1,e.can_b(),n[--t]){e.p=h(e.bps_1,1),C(h(e.path,e.n),1,e.p),n[t++]=R(h(e.bln_1,e.p)+h(e.latch_length_b0,e.p)),e.out_b0();var fn=n[--t],$n=n[--t];n[t++]=R($n+fn)}else n[t++]=e.max_int;var ei=n[--t],Dn=n[--t];if(C(n[--t],Dn,ei),n[t++]=e.bln_0,n[t++]=4,e.can_b(),n[--t]){e.p=h(e.bps_1,4),C(h(e.path,e.n),4,e.p),n[t++]=R(h(e.bln_1,e.p)+h(e.latch_length_b1,e.p)),e.out_b1();var ai=n[--t],zn=n[--t];n[t++]=R(zn+ai)}else n[t++]=e.max_int;var mi=n[--t],Fn=n[--t];C(n[--t],Fn,mi),n[t++]=e.bln_0,n[t++]=2,e.can_c0(),n[--t]?(e.p=h(e.bps_c,2),C(h(e.path,e.n),2,e.p),n[t++]=R(h(e.bln_c,e.p)+h(e.latch_length_c0,e.p))+1):n[t++]=e.max_int;var Hn=n[--t],_n=n[--t];C(n[--t],_n,Hn),n[t++]=e.bln_0,n[t++]=5,e.can_c1(),n[--t]?(e.p=h(e.bps_c,5),C(h(e.path,e.n),5,e.p),n[t++]=R(h(e.bln_c,e.p)+h(e.latch_length_c1,e.p))+1):n[t++]=e.max_int;var vn=n[--t],kn=n[--t];C(n[--t],kn,vn),n[t++]=e.bps_0,n[t++]=0,W(e.prioritized_latch_length_a0),e.get_best_prior_state();var Ai=n[--t],Ei=n[--t];C(n[--t],Ei,Ai),n[t++]=e.bps_0,n[t++]=3,W(e.prioritized_latch_length_a1),e.get_best_prior_state();var Ji=n[--t],nn=n[--t];C(n[--t],nn,Ji),n[t++]=e.bps_0,n[t++]=1,W(e.prioritized_latch_length_b0),e.get_best_prior_state();var yn=n[--t],qn=n[--t];C(n[--t],qn,yn),n[t++]=e.bps_0,n[t++]=4,W(e.prioritized_latch_length_b1),e.get_best_prior_state();var Tn=n[--t],Gn=n[--t];C(n[--t],Gn,Tn),n[t++]=e.bps_0,n[t++]=2,W(e.prioritized_latch_length_c0),e.get_best_prior_state();var gi=n[--t],Vn=n[--t];C(n[--t],Vn,gi),n[t++]=e.bps_0,n[t++]=5,W(e.prioritized_latch_length_c1),e.get_best_prior_state();var ln=n[--t],ti=n[--t];C(n[--t],ti,ln)}},e.backtrack=function(){e.n=e.msg.length;for(var Me=e.reverse_priority,it=0,st=Me.length;it<st;it++){var mt=h(Me,it),Tt=h(e.bln_0,mt);n[t++]=mt,n[t++]=Tt,n[t++]=Tt}t--,e.len=n[--t],e.state=n[--t];for(var Ot=0;Ot<5;Ot++)oo(n[--t],e.len)?(e.len=n[--t],e.state=n[--t]):t-=2;for(n[t++]=o(e.len);!(e.n<=0);){e.prior_state=h(h(e.path,e.n-1),e.state),n[t++]=1/0,Ie(h(h(e.latch_sequence,e.state),e.prior_state)),e.latch=o();var Et=(e.state==2||e.state==5)&&h(e.msg,e.n-1)>=48?2:1;if(e.n=e.n-Et,e.c=h(e.msg,e.n),n[t++]="enc",h(e.encode,e.state)()===!0)break;var Dt=n[--t];e[n[--t]]=Dt,e.len=R(e.len-e.latch.length-e.enc.length);var wt=n[--t],en=e.len,gt=e.latch;H(wt,en,gt),H(wt,R(en+gt.length),e.enc),e.state=e.prior_state,n[t++]=wt}var un=n[t-1];C(un,0,h(e.start_code,e.state))},e.make_tables(),e.backtrack(),e.cws=n[--t]}e.j=e.cws.length;var Oe=o(e.j+2);H(Oe,0,e.cws),e.cws=Oe,e.csum=h(e.cws,0);for(var de=1,ke=e.j-1;de<=ke;de+=1)e.i=de,e.csum=R(e.csum+h(e.cws,e.i)*e.i);e.csum=e.csum%103,C(e.cws,e.j,e.csum),C(e.cws,e.j+1,106);var Ee=h(e.options,"debugcws")!==void 0;Ee&&(n[t++]="bwipp.debugcws#7483",n[t++]=e.cws,Z()),e.encs=o(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","2331112"]),e.sbs=fe(e.cws.length*6+1);for(var De=0,xe=e.cws.length-1;De<=xe;De+=1)e.i=De,H(e.sbs,e.i*6,h(e.encs,h(e.cws,e.i)));n[t++]=1/0,n[t++]=1/0;for(var Ne=e.sbs,je=0,Se=Ne.length;je<Se;je++)n[t++]=h(Ne,je)-48;var ze=o();n[t++]=1/0;for(var Pe=0,Be=~~((e.sbs.length+1)/2);Pe<Be;Pe++)n[t++]=e.height;var at=o();n[t++]=1/0;for(var Ze=0,ft=~~((e.sbs.length+1)/2);Ze<ft;Ze++)n[t++]=0;var Ve=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=ze,n[t++]="bhs",n[t++]=at,n[t++]="bbs",n[t++]=Ve,n[t++]="txt",n[t++]=o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]),n[t++]="textxalign",n[t++]="center",n[t++]="opt",n[t++]=e.options;var $e=rt();n[t++]=$e,e.dontdraw||on(),e=r}function Gy(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=.5,e.linkagea=!1,e.linkagec=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.linkagea&&e.linkagec&&(n[t++]="bwipp.gs1128badLinkage#7580",n[t++]="linkagea and linkagec cannot be used together",Z()),e.text=e.barcode,n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t],e.fnc1=-1,e.c128=o([e.fnc1]);for(var i=0,a=e.ais.length-1;i<=a;i+=1){e.i=i,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var s=o(e.c128.length+e.ai.length+e.val.length);H(s,0,e.c128),n[t++]=s,n[t++]=s,n[t++]=e.c128.length;var l=1/0,c=e.ai;n[t++]=l,Ie(c);var d=o(),f=n[--t];H(n[--t],f,d);var m=n[t-1];n[t++]=m,n[t++]=e.c128.length+e.ai.length;var g=1/0,v=e.val;n[t++]=g,Ie(v);var y=o(),A=n[--t];if(H(n[--t],A,y),e.c128=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var w=o(e.c128.length+1);H(w,0,e.c128),C(w,e.c128.length,e.fnc1),e.c128=w}}for(e.barcode=fe((e.c128.length+1)*5),e.i=0,e.j=0;e.i!=e.c128.length;){var k=h(e.c128,e.i);n[t++]=k,k==e.fnc1?(t--,H(e.barcode,e.j,"^FNC1"),e.j=e.j+4):C(e.barcode,e.j,n[--t]),e.i=e.i+1,e.j=e.j+1}if(e.linkagea||e.linkagec){n[t++]=e.barcode,n[t++]=e.j,e.linkagea?n[t++]="^LNKA":n[t++]="^LNKC";var E=n[--t],I=n[--t];H(n[--t],I,E),e.j=e.j+5}e.barcode=O(e.barcode,0,e.j),delete e.options.parse,C(e.options,"height",e.height),C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Hm();var T=n[--t];e[n[--t]]=T,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function ON(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.text=e.barcode;var i=e.barcode;n[t++]=fe(i.length),n[t++]=0,Ie(i,function(){var I=n[t-1];if(I!=32){var T=n[--t],N=n[--t],j=n[t-1];C(j,N,T),n[t++]=N+1}else t--});var a=n[--t];e.barcode=O(n[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=17&&e.barcode.length!=18&&(n[t++]="bwipp.ean14badLength#7695",n[t++]="EAN-14 must be 13 or 14 digits",Z()),qe(O(e.barcode,0,4),"(01)")&&(n[t++]="bwipp.ean14badAI#7698",n[t++]="EAN-14 must begin with (01) application identifier",Z());for(var s=O(e.barcode,4,e.barcode.length-4),l=0,c=s.length;l<c;l++){var d=h(s,l);(d<48||d>57)&&(n[t++]="bwipp.ean14badCharacter#7702",n[t++]="EAN-14 must contain only digits",Z())}e.checksum=0;for(var f=0;f<=12;f+=1){if(e.i=f,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var m=n[--t];n[t++]=m*3}var g=n[--t],v=n[--t];e[n[--t]]=R(v+g)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==18)h(e.barcode,17)!=e.checksum+48&&(n[t++]="bwipp.ean14badCheckDigit#7715",n[t++]="Incorrect EAN-14 check digit provided",Z());else{var y=fe(18);H(y,0,e.barcode),C(y,17,e.checksum+48),e.barcode=y;var A=e.hasspace?2:1,w=fe(e.text.length+A);H(w,w.length-2," "),C(w,w.length-1,e.checksum+48),H(w,0,e.text),e.text=w}e.gtin=O(e.barcode,4,14),e.barcode=fe(21),H(e.barcode,0,"^FNC101");var k=e.gtin;H(e.barcode,7,k),C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Hm();var E=n[--t];e[n[--t]]=E,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function DN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.text=e.barcode;var i=e.barcode;n[t++]=fe(i.length),n[t++]=0,Ie(i,function(){var I=n[t-1];if(I!=32){var T=n[--t],N=n[--t],j=n[t-1];C(j,N,T),n[t++]=N+1}else t--});var a=n[--t];e.barcode=O(n[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=21&&e.barcode.length!=22&&(n[t++]="bwipp.sscc18badLength#7799",n[t++]="SSCC-18 must be 17 or 18 digits",Z()),qe(O(e.barcode,0,4),"(00)")&&(n[t++]="bwipp.sscc18badAI#7802",n[t++]="SSCC-18 must begin with (00) application identifier",Z());for(var s=O(e.barcode,4,e.barcode.length-4),l=0,c=s.length;l<c;l++){var d=h(s,l);(d<48||d>57)&&(n[t++]="bwipp.sscc18badCharacter#7806",n[t++]="SSCC-18 must contain only digits",Z())}e.checksum=0;for(var f=0;f<=16;f+=1){if(e.i=f,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var m=n[--t];n[t++]=m*3}var g=n[--t],v=n[--t];e[n[--t]]=R(v+g)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==22)h(e.barcode,21)!=e.checksum+48&&(n[t++]="bwipp.sscc18badCheckDigit#7819",n[t++]="Incorrect SSCC-18 check digit provided",Z());else{var y=fe(22);H(y,0,e.barcode),C(y,21,e.checksum+48),e.barcode=y;var A=e.hasspace?2:1,w=fe(e.text.length+A);H(w,w.length-2," "),C(w,w.length-1,e.checksum+48),H(w,0,e.text),e.text=w}e.sscc=O(e.barcode,4,18),e.barcode=fe(25),H(e.barcode,0,"^FNC100");var k=e.sscc;H(e.barcode,7,k),C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Hm();var E=n[--t];e[n[--t]]=E,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function qm(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.hidestars=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.code39emptyData#7899",n[t++]="The data must not be empty",Z()),e.encs=o(["1113313111","3113111131","1133111131","3133111111","1113311131","3113311111","1133311111","1113113131","3113113111","1133113111","3111131131","1131131131","3131131111","1111331131","3111331111","1131331111","1111133131","3111133111","1131133111","1111333111","3111111331","1131111331","3131111311","1111311331","3111311311","1131311311","1111113331","3111113311","1131113311","1111313311","3311111131","1331111131","3331111111","1311311131","3311311111","1331311111","1311113131","3311113111","1331113111","1313131111","1313111311","1311131311","1113131311","1311313111"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.code39badCharacter#7927",n[t++]="Code 39 must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=0;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.code39badCheckDigit#7941",n[t++]="Incorrect Code 39 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen),e.includecheck=!0);var g=e.includecheck?3:2;e.sbs=fe(R(e.barlen+g)*10);var v=e.includecheck?3:2;e.txt=o(R(e.barlen+v)),H(e.sbs,0,h(e.encs,43)),e.hidestars?C(e.txt,0,o(["",0,e.textyoffset,e.textfont,e.textsize])):C(e.txt,0,o(["*",0,e.textyoffset,e.textfont,e.textsize]));for(var y=0,A=e.barlen-1;y<=A;y+=1)e.i=y,e.indx=h(e.charvals,O(e.barcode,e.i,1)),H(e.sbs,e.i*10+10,h(e.encs,e.indx)),C(e.txt,e.i+1,o([O(e.barcode,e.i,1),(e.i+1)*16,e.textyoffset,e.textfont,e.textsize]));e.includecheck?(H(e.sbs,e.barlen*10+10,h(e.encs,e.checksum)),e.includecheckintext?C(e.txt,e.barlen+1,o([O(e.barchars,e.checksum,1),(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen+1,o(["",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])),H(e.sbs,e.barlen*10+20,h(e.encs,43)),e.hidestars?C(e.txt,e.barlen+2,o(["",(e.barlen+2)*16,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen+2,o(["*",(e.barlen+2)*16,e.textyoffset,e.textfont,e.textsize]))):(H(e.sbs,e.barlen*10+10,h(e.encs,43)),e.hidestars?C(e.txt,e.barlen+1,o(["",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen+1,o(["*",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize]))),n[t++]=1/0,n[t++]=1/0;for(var w=e.sbs,k=0,E=w.length;k<E;k++)n[t++]=h(w,k)-48;var I=o();n[t++]=1/0;for(var T=0,N=~~((e.sbs.length+1)/2);T<N;T++)n[t++]=e.height;var j=o();n[t++]=1/0;for(var B=0,U=~~((e.sbs.length+1)/2);B<U;B++)n[t++]=0;var F=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=I,n[t++]="bhs",n[t++]=j,n[t++]="bbs",n[t++]=F,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var P=rt();n[t++]=P,e.dontdraw||on(),e=r}function jN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.parse=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,Ie(e.barcode,function(){n[--t]>=128&&(n[t++]="bwipp.code39extBadCharacter#8061",n[t++]="Code 39 Extended must contain only ASCII characters",Z())}),e.extencs=o(["%U","$A","$B","$C","$D","$E","$F","$G","$H","$I","$J","$K","$L","$M","$N","$O","$P","$Q","$R","$S","$T","$U","$V","$W","$X","$Y","$Z","%A","%B","%C","%D","%E"," ","/A","/B","/C","/D","/E","/F","/G","/H","/I","/J","/K","/L","-",".","/O","0","1","2","3","4","5","6","7","8","9","/Z","%F","%G","%H","%I","%J","%V","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","%K","%L","%M","%N","%O","%W","+A","+B","+C","+D","+E","+F","+G","+H","+I","+J","+K","+L","+M","+N","+O","+P","+Q","+R","+S","+T","+U","+V","+W","+X","+Y","+Z","%P","%Q","%R","%S","%T"]),e.newcode=fe(e.barlen*2),e.newtext=fe(e.barlen*2),e.j=0;for(var s=0,l=e.barlen-1;s<=l;s+=1){e.i=s,e.extchar=h(e.extencs,h(e.barcode,e.i)),H(e.newcode,e.j,e.extchar);var c=h(e.barcode,e.i);n[t++]=e.newtext,n[t++]=e.j,n[t++]=c,(c<32||c==127)&&(n[t-1]=32);var d=n[--t],f=n[--t];C(n[--t],f,d),e.extchar.length!=1&&C(e.newtext,e.j+1,32),e.j=e.j+e.extchar.length}e.newcode=O(e.newcode,0,e.j),e.newtext=O(e.newtext,0,e.j),C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.newcode,n[t++]=e.options,qm();var m=n[--t];if(e[n[--t]]=m,e.includetext){e.txt=h(e.args,"txt");for(var g=0,v=e.newtext.length-1;g<=v;g+=1)e.i=g,e.txtentry=h(e.txt,e.i+1),C(e.txtentry,0,O(e.newtext,e.i,1)),C(e.txt,e.i+1,e.txtentry);C(e.args,"txt",e.txt)}C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function BN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=8&&e.barcode.length!=9&&(n[t++]="bwipp.code32badLength#8160",n[t++]="Italian Pharmacode must be 8 or 9 digits",Z()),Ie(e.barcode,function(){var I=n[--t];(I<48||I>57)&&(n[t++]="bwipp.code32badCharacter#8164",n[t++]="Italian Pharmacode must contain only digits",Z())}),e.checksum=0;for(var i=0;i<=7;i+=1){if(e.i=i,n[t++]=h(e.barcode,e.i)-48,e.i%2!=0){var a=n[--t];n[t++]=a*2}var s=n[t-1];if(s>9){var l=n[--t];n[t++]=l-9}e.checksum=R(n[--t]+e.checksum)}e.checksum=e.checksum%10,e.barcode.length==9&&h(e.barcode,8)!=e.checksum+48&&(n[t++]="bwipp.code32badCheckDigit#8178",n[t++]="Incorrect Italian Pharmacode check digit provided",Z());var c=fe(10);H(c,0,e.barcode),C(c,8,e.checksum+48),e.text=c,e.val=Nn(fe(6),Ye(e.text),32),e.barcode=fe(6);for(var d=0;d<=5;d+=1)C(e.barcode,d,48);H(e.barcode,6-e.val.length,e.val);for(var f=0;f<=5;f+=1){var m=h(e.barcode,f);n[t++]=f,n[t++]=m,n[t++]=m;for(var g=0,v=4;g<v;g++){if(n[--t]>=h("AEIO",g)){var y=n[--t];n[t++]=y+1}var A=n[t-1];n[t++]=A}n[t-1]=e.barcode;var w=n[t-2],k=n[t-3];C(n[t-1],k,w),t-=3}H(e.text,1,O(e.text,0,9)),C(e.text,0,65),C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,qm();var E=n[--t];e[n[--t]]=E,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function PN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.height=1,e.pzn8=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.pzn8?e.barcode.length!=7&&e.barcode.length!=8&&(n[t++]="bwipp.pzn8badLength#8261",n[t++]="PZN8 must be 7 or 8 digits",Z()):e.barcode.length!=6&&e.barcode.length!=7&&(n[t++]="bwipp.pzn7badLength#8265",n[t++]="PZN7 must be 6 or 7 digits",Z()),Ie(e.barcode,function(){var m=n[--t];(m<48||m>57)&&(n[t++]="bwipp.pznBadCharacter#8270",n[t++]="PZN must contain only digits",Z())});var i=e.pzn8?9:8;e.msglen=i,e.checksum=0;for(var a=0,s=e.msglen-3;a<=s;a+=1){e.i=a;var l=e.pzn8?1:2;e.checksum=R((h(e.barcode,e.i)-48)*(e.i+l)+e.checksum)}e.checksum=e.checksum%11,e.checksum==10&&(n[t++]="bwipp.pznBadInputSequence#8284",n[t++]="Incorrect PZN input sequence provided",Z()),e.barcode.length==e.msglen-1&&h(e.barcode,e.msglen-2)!=e.checksum+48&&(n[t++]="bwipp.pznBadCheckDigit#8288",n[t++]="Incorrect PZN check digit provided",Z());var c=fe(e.msglen);C(c,0,45),H(c,1,e.barcode),C(c,e.msglen-1,e.checksum+48),e.msg=c,C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.msg,n[t++]=e.options,qm();var d=n[--t];e[n[--t]]=d,e.text=fe(e.msglen+5),H(e.text,0,"PZN - "),H(e.text,6,O(e.msg,1,e.msglen-1));var f=o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]);C(e.args,"txt",f),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function QS(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.encs=o(["131112","111213","111312","111411","121113","121212","121311","111114","131211","141111","211113","211212","211311","221112","221211","231111","112113","112212","112311","122112","132111","111123","111222","111321","121122","131121","212112","212211","211122","211221","221121","222111","112122","112221","122121","123111","121131","311112","311211","321111","112131","113121","211131","121221","312111","311121","122211","111141","1111411"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,h(e.barchars,i),i);e.sft1=-1,e.sft2=-2,e.sft3=-3,e.sft4=-4,C(e.charvals,e.sft1,43),C(e.charvals,e.sft2,44),C(e.charvals,e.sft3,45),C(e.charvals,e.sft4,46);var a=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["SFT$",e.sft1],["SFT%",e.sft2],["SFT/",e.sft3],["SFT+",e.sft4]]);e.fncvals=a,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var s=n[--t];e[n[--t]]=s,e.msglen=e.msg.length,Ie(e.msg,function(){var F=h(e.charvals,n[--t])!==void 0;F||(n[t++]="bwipp.code93BadCharacter#8405",n[t++]="Code 93 must only contain digits, capital letters, spaces, the symbols -.$/+ and shift non-data characters",Z())}),e.includecheck?e.sbs=fe(e.msglen*6+25):e.sbs=fe(e.msglen*6+13),e.txt=o(e.msglen),H(e.sbs,0,h(e.encs,47)),e.checksum1=0,e.checksum2=0;for(var l=0,c=e.msglen-1;l<=c;l+=1){e.i=l,e.indx=h(e.charvals,h(e.msg,e.i)),H(e.sbs,e.i*6+6,h(e.encs,e.indx));var d=h(e.msg,e.i);if(n[t++]="char",n[t++]=d,d<0)n[t-1]=" ";else{var f=fe(1);n[t++]=f,n[t++]=f,n[t++]=0,oa(4,-1);var m=n[--t],g=n[--t];C(n[--t],g,m)}var v=n[--t];e[n[--t]]=v,C(e.txt,e.i,o([e.char,e.i*9+9,e.textyoffset,e.textfont,e.textsize])),e.checksum1=R(e.checksum1+((e.msglen-e.i-1)%20+1)*e.indx),e.checksum2=R(e.checksum2+((e.msglen-e.i)%15+1)*e.indx)}e.includecheck?(e.checksum1=e.checksum1%47,e.checksum2=R(e.checksum2+e.checksum1)%47,H(e.sbs,e.msglen*6+6,h(e.encs,e.checksum1)),H(e.sbs,e.msglen*6+12,h(e.encs,e.checksum2)),H(e.sbs,e.msglen*6+18,h(e.encs,48))):H(e.sbs,e.msglen*6+6,h(e.encs,48)),n[t++]=1/0,n[t++]=1/0;for(var y=e.sbs,A=0,w=y.length;A<w;A++)n[t++]=h(y,A)-48;var k=o();n[t++]=1/0;for(var E=0,I=~~((e.sbs.length+1)/2);E<I;E++)n[t++]=e.height;var T=o();n[t++]=1/0;for(var N=0,j=~~((e.sbs.length+1)/2);N<j;N++)n[t++]=0;var B=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=k,n[t++]="bhs",n[t++]=T,n[t++]="bbs",n[t++]=B,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var U=rt();n[t++]=U,e.dontdraw||on(),e=r}function FN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.parse=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.extencs=o(["^SFT%U","^SFT$A","^SFT$B","^SFT$C","^SFT$D","^SFT$E","^SFT$F","^SFT$G","^SFT$H","^SFT$I","^SFT$J","^SFT$K","^SFT$L","^SFT$M","^SFT$N","^SFT$O","^SFT$P","^SFT$Q","^SFT$R","^SFT$S","^SFT$T","^SFT$U","^SFT$V","^SFT$W","^SFT$X","^SFT$Y","^SFT$Z","^SFT%A","^SFT%B","^SFT%C","^SFT%D","^SFT%E"," ","^SFT/A","^SFT/B","^SFT/C","$","%","^SFT/F","^SFT/G","^SFT/H","^SFT/I","^SFT/J","+","^SFT/L","-",".","/","0","1","2","3","4","5","6","7","8","9","^SFT/Z","^SFT%F","^SFT%G","^SFT%H","^SFT%I","^SFT%J","^SFT%V","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","^SFT%K","^SFT%L","^SFT%M","^SFT%N","^SFT%O","^SFT%W","^SFT+A","^SFT+B","^SFT+C","^SFT+D","^SFT+E","^SFT+F","^SFT+G","^SFT+H","^SFT+I","^SFT+J","^SFT+K","^SFT+L","^SFT+M","^SFT+N","^SFT+O","^SFT+P","^SFT+Q","^SFT+R","^SFT+S","^SFT+T","^SFT+U","^SFT+V","^SFT+W","^SFT+X","^SFT+Y","^SFT+Z","^SFT%P","^SFT%Q","^SFT%R","^SFT%S","^SFT%T"]),e.newcode=fe(e.barlen*6),e.newtext=fe(e.barlen*6),e.j=0,e.k=0;for(var s=0,l=e.barlen-1;s<=l;s+=1){e.i=s;var c=h(e.barcode,e.i);n[t++]=c,c>127&&(t--,n[t++]="bwipp.code93extbadCharacter#8542",n[t++]="Code 93 Extended only support ASCII characters with values 0 to 127",Z()),e.extchar=h(e.extencs,n[--t]),e.extlen=e.extchar.length,H(e.newcode,e.j,e.extchar);var d=h(e.barcode,e.i);n[t++]=e.newtext,n[t++]=e.k,n[t++]=d,(d<32||d==127)&&(n[t-1]=32);var f=n[--t],m=n[--t];C(n[--t],m,f),e.extlen!=1&&C(e.newtext,e.k+1,32),e.j=e.j+e.extlen;var g=e.extlen==1?1:2;e.k=e.k+g}e.newcode=O(e.newcode,0,e.j),e.newtext=O(e.newtext,0,e.k),C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.newcode,n[t++]=e.options,QS();var v=n[--t];if(e[n[--t]]=v,e.includetext){e.txt=h(e.args,"txt");for(var y=0,A=e.newtext.length-1;y<=A;y+=1)e.i=y,e.txtentry=h(e.txt,e.i),C(e.txtentry,0,O(e.newtext,e.i,1)),C(e.txt,e.i,e.txtentry);C(e.args,"txt",e.txt)}C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function wx(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],Ie(e.barcode,function(){var N=n[--t];(N<48||N>57)&&(n[t++]="bwipp.interleaved2of5badCharacter#8628",n[t++]="Interleaved 2 of 5 must contain only digits",Z())}),e.barlen=e.barcode.length,(e.barlen%2==0&&e.includecheck||e.barlen%2!=0&&!e.includecheck)&&(e.pad=fe(e.barlen+1),C(e.pad,0,48),H(e.pad,1,e.barcode),e.barcode=e.pad,e.barlen=e.barlen+1),e.includecheck){e.checksum=0;for(var i=0,a=e.barlen-1;i<=a;i+=1)e.i=i,e.i%2==0?e.checksum=e.checksum+(h(e.barcode,e.i)-48)*3:e.checksum=e.checksum+(h(e.barcode,e.i)-48);e.checksum=(10-e.checksum%10)%10,e.pad=fe(e.barlen+1),H(e.pad,0,e.barcode),C(e.pad,e.barlen,e.checksum+48),e.barcode=e.pad,e.barlen=e.barlen+1}e.encs=o(["11221","21112","12112","22111","11212","21211","12211","11122","21121","12121","1111","2111"]),e.barchars="0123456789",e.sbs=fe(e.barlen*5+8),e.txt=o(e.barlen),H(e.sbs,0,h(e.encs,10));for(var s=0,l=e.barlen-1;s<=l;s+=2){e.i=s,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enca=h(e.encs,e.indx),sn(e.barchars,O(e.barcode,e.i+1,1)),t--,e.indx=n[--t].length,t-=2,e.encb=h(e.encs,e.indx),e.intl=fe(e.enca.length*2);for(var c=0,d=e.enca.length-1;c<=d;c+=1)e.j=c,e.achar=h(e.enca,e.j),e.bchar=h(e.encb,e.j),C(e.intl,e.j*2,e.achar),C(e.intl,e.j*2+1,e.bchar);H(e.sbs,e.i*5+4,e.intl),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*9+4,e.textyoffset,e.textfont,e.textsize])),e.includecheck&&!e.includecheckintext&&e.barlen-2==e.i?C(e.txt,e.i+1,o([" ",(e.i+1)*9+4,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.i+1,o([O(e.barcode,e.i+1,1),(e.i+1)*9+4,e.textyoffset,e.textfont,e.textsize]))}H(e.sbs,e.barlen*5+4,h(e.encs,11)),n[t++]=1/0,n[t++]=1/0;for(var f=e.sbs,m=0,g=f.length;m<g;m++)n[t++]=h(f,m)-48;var v=o();n[t++]=1/0;for(var y=0,A=~~((e.sbs.length+1)/2);y<A;y++)n[t++]=e.height;var w=o();n[t++]=1/0;for(var k=0,E=~~((e.sbs.length+1)/2);k<E;k++)n[t++]=0;var I=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=v,n[t++]="bhs",n[t++]=w,n[t++]="bbs",n[t++]=I,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="barratio",n[t++]=2,n[t++]="spaceratio",n[t++]=2,n[t++]="opt",n[t++]=e.options;var T=rt();n[t++]=T,e.dontdraw||on(),e=r}function UN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.includecheckintext=!0,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-3.5,e.height=.5,e.showborder=!0,e.borderwidth=4,e.borderleft=10,e.borderright=10,e.bordertop=-.55,e.borderbottom=-.55,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.text=e.barcode;var i=e.barcode;n[t++]=fe(i.length),n[t++]=0,Ie(i,function(){var T=n[t-1];if(T!=32){var N=n[--t],j=n[--t],B=n[t-1];C(B,j,N),n[t++]=j+1}else t--});var a=n[--t];e.barcode=O(n[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=13&&e.barcode.length!=14&&(n[t++]="bwipp.itf14badLength#8796",n[t++]="ITF-14 must be 13 or 14 digits",Z());for(var s=e.barcode,l=0,c=s.length;l<c;l++){var d=h(s,l);(d<48||d>57)&&(n[t++]="bwipp.itf14badCharacter#8800",n[t++]="ITF-14 must contain only digits",Z())}e.checksum=0;for(var f=0;f<=12;f+=1){if(e.i=f,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i)-48,e.i%2==0){var m=n[--t];n[t++]=m*3}var g=n[--t],v=n[--t];e[n[--t]]=R(v+g)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==14)h(e.barcode,13)!=e.checksum+48&&(n[t++]="bwipp.itf14badCheckDigit#8813",n[t++]="Incorrect ITF-14 check digit provided",Z());else{var y=fe(14);H(y,0,e.barcode),C(y,13,e.checksum+48),e.barcode=y;var A=e.hasspace?2:1,w=fe(e.text.length+A);H(w,w.length-2," "),C(w,w.length-1,e.checksum+48),H(w,0,e.text),e.text=w}var k=e.options;C(k,"dontdraw",!0),C(e.options,"showborder",e.showborder),C(e.options,"borderwidth",e.borderwidth),C(e.options,"borderleft",e.borderleft),C(e.options,"borderright",e.borderright);var E=e.options;C(E,"bordertop",e.bordertop),C(e.options,"borderbottom",e.borderbottom),C(e.options,"height",e.height),C(e.options,"textyoffset",e.textyoffset),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,wx();var I=n[--t];e[n[--t]]=I,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function LN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=11&&e.barcode.length!=12&&(n[t++]="bwipp.identcodeBadLength#8891",n[t++]="Deutsche Post Identcode must be 11 or 12 digits",Z()),Ie(e.barcode,function(){var v=n[--t];(v<48||v>57)&&(n[t++]="bwipp.identcodeBadCharacter#8895",n[t++]="Deutsche Post Identcode must contain only digits",Z())}),e.checksum=0;for(var i=0;i<=10;i+=1){if(e.i=i,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i)-48,e.i%2==0){var a=n[--t];n[t++]=a*4}else{var s=n[--t];n[t++]=s*9}var l=n[--t],c=n[--t];e[n[--t]]=R(c+l)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==12&&h(e.barcode,11)!=e.checksum+48&&(n[t++]="bwipp.identcodeBadCheckDigit#8908",n[t++]="Incorrect Deutsche Post Identcode check digit provided",Z());var d=fe(12);H(d,0,e.barcode),C(d,11,e.checksum+48),e.barcode=d,e.text=zi(fe(16),"  .       .     "),H(e.text,0,O(e.barcode,0,2)),H(e.text,3,O(e.barcode,2,3)),H(e.text,7,O(e.barcode,5,3)),H(e.text,11,O(e.barcode,8,3)),H(e.text,15,O(e.barcode,11,1)),C(e.options,"dontdraw",!0),C(e.options,"includecheck",!1);var f=e.barcode;n[t++]="args",n[t++]=f,n[t++]=e.options,wx();var m=n[--t];e[n[--t]]=m;var g=e.textsize;C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,g])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function zN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=13&&e.barcode.length!=14&&(n[t++]="bwipp.leitcodeBadLength#8981",n[t++]="Deutsche Post Leitcode must be 13 or 14 digits",Z()),Ie(e.barcode,function(){var v=n[--t];(v<48||v>57)&&(n[t++]="bwipp.leitcodeBadCharacter#8985",n[t++]="Deutsche Post Leitcode must contain only digits",Z())}),e.checksum=0;for(var i=0;i<=12;i+=1){if(e.i=i,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i)-48,e.i%2==0){var a=n[--t];n[t++]=a*4}else{var s=n[--t];n[t++]=s*9}var l=n[--t],c=n[--t];e[n[--t]]=R(c+l)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==14&&h(e.barcode,13)!=e.checksum+48&&(n[t++]="bwipp.leitcodeBadCheckDigit#8998",n[t++]="Incorrect Deutsche Post Leitcode check digit provided",Z());var d=fe(14);H(d,0,e.barcode),C(d,13,e.checksum+48),e.barcode=d,e.text=zi(fe(18),"     .   .   .    "),H(e.text,0,O(e.barcode,0,5)),H(e.text,6,O(e.barcode,5,3)),H(e.text,10,O(e.barcode,8,3)),H(e.text,14,O(e.barcode,11,2)),H(e.text,17,O(e.barcode,13,1)),C(e.options,"dontdraw",!0),C(e.options,"includecheck",!1);var f=e.barcode;n[t++]="args",n[t++]=f,n[t++]=e.options,wx();var m=n[--t];e[n[--t]]=m;var g=e.textsize;C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,g])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function Gm(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.height=33/72,e.linkage=!1,e.format="omni",e.barxmult=33,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=17&&e.barcode.length!=18&&(n[t++]="bwipp.databaromniBadLength#9070",n[t++]="GS1 DataBar Omnidirectional must be 13 or 14 digits",Z()),qe(O(e.barcode,0,4),"(01)")&&(n[t++]="bwipp.databaromniBadAI#9073",n[t++]="GS1 DataBar Omnidirectional must begin with (01) application identifier",Z());for(var i=O(e.barcode,4,e.barcode.length-4),a=0,s=i.length;a<s;a++){var l=h(i,a);(l<48||l>57)&&(n[t++]="bwipp.databaromniBadCharacter#9077",n[t++]="GS1 DataBar Omnidirectional must contain only digits",Z())}e.barxmult<33&&(n[t++]="bwipp.databarStackedOmniBarXmult#9082",n[t++]="GS1 DataBar Stacked Omnidirectional must have a barxmult of at least 33",Z()),qe(e.format,"omni")&&qe(e.format,"stacked")&&qe(e.format,"stackedomni")&&qe(e.format,"truncated")&&(n[t++]="bwipp.databaromniBadFormat#9086",n[t++]="Valid formats are omni, stacked, stackedomni and truncated",Z()),ce(e.format,"truncated")&&(e.height=13/72),e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var d=n[--t];n[t++]=d*3}var f=n[--t],m=n[--t];e[n[--t]]=R(m+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(n[t++]="bwipp.databaromniBadCheckDigit#9102",n[t++]="Incorrect GS1 DataBar Omnidirectional check digit provided",Z());var g=fe(18);H(g,0,e.barcode),C(g,17,e.checksum+48),e.barcode=g,e.txt=o(e.barcode.length);for(var v=0,y=e.barcode.length-1;v<=y;v+=1)e.i=v,C(e.txt,e.i,o([O(e.barcode,e.i,1),0,0,"",0]));e.ncr=function(){var Bt=n[--t],Y=n[--t],le=R(Y-Bt);if(Bt<R(Y-Bt)){var se=le;le=Bt,Bt=se}n[t++]=le,n[t++]=1,n[t++]=1;for(var ge=Y,ve=Bt+1;ge>=ve;ge-=1){var _e=n[--t],pe=n[t-1],Oe=n[t-2];if(n[t++]=_e*ge,Zh(pe,Oe)){var de=n[--t],ke=n[--t];n[t++]=ke+1,n[t++]=~~(de/ke)}}for(;;){var Ee=n[t-2],De=n[t-3];if(_c(Ee,De))break;var xe=n[--t],Ne=n[--t];n[t++]=Ne+1,n[t++]=~~(xe/Ne)}var je=n[--t];n[t-1]=je;var Se=n[--t];n[t-1]=Se},e.getRSSwidths=function(){e.oe=n[--t],e.el=n[--t],e.mw=n[--t],e.nm=n[--t],e.val=n[--t],e.out=o(e.el),e.mask=0;for(var Bt=0,Y=e.el-2;Bt<=Y;Bt+=1){e.bar=Bt,e.ew=1;var le=e.bar;for(e.mask=e.mask|(le<0?1>>>-le:1<<le);;){n[t++]="sval",n[t++]=R(e.nm-e.ew)-1,n[t++]=R(e.el-e.bar)-2,e.ncr();var se=n[--t];if(e[n[--t]]=se,e.oe&&e.mask==0&&R(e.nm-e.ew-e.el*2+e.bar*2)>=-2){n[t++]="sval",n[t++]=e.sval,n[t++]=R(e.nm-e.ew-e.el+e.bar),n[t++]=R(e.el-e.bar)-2,e.ncr();var ge=n[--t],ve=n[--t];e[n[--t]]=R(ve-ge)}if(R(e.el-e.bar)>2){e.lval=0;for(var _e=R(e.nm-e.ew-e.el+e.bar)+2,pe=e.mw+1;_e>=pe;_e-=1)n[t++]=R(e.nm-_e-e.ew)-1,n[t++]=R(e.el-e.bar)-3,e.ncr(),e.lval=R(n[--t]+e.lval);e.sval=R(e.sval-e.lval*(e.el-e.bar-1))}else R(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=R(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var Oe=e.bar;e.mask=e.mask&~(Oe<0?1>>>-Oe:1<<Oe)}e.val=R(e.val+e.sval),e.nm=R(e.nm-e.ew),C(e.out,e.bar,e.ew)}C(e.out,e.el-1,e.nm),n[t++]=e.out},n[t++]=1/0;var A=e.linkage?1:0,w=O(e.barcode,4,13);n[t++]=A;for(var k=0,E=w.length;k<E;k++)n[t++]=h(w,k)-48;e.binval=o();for(var I=0;I<=12;I+=1){e.i=I;var T=e.binval,N=e.i;C(T,N+1,R(h(T,N+1)+h(e.binval,e.i)%4537077*10)),C(e.binval,e.i,~~(h(e.binval,e.i)/4537077))}e.right=h(e.binval,13)%4537077;var j=e.binval;C(j,13,~~(h(j,13)/4537077)),e.left=0,e.i=!0;for(var B=0;B<=13;B+=1){e.j=B;var U=h(e.binval,e.j);if(n[t++]=U,U==0&&e.i)t--;else{e.i=!1,n[t++]="left",n[t++]=e.left;var F=n[t-3],P=n[t-1];e[n[t-2]]=R(P+F*~~El(10,13-e.j)),t-=3}}for(e.d1=~~(e.left/1597),e.d2=e.left%1597,e.d3=~~(e.right/1597),e.d4=e.right%1597,e.tab164=o([160,0,12,4,8,1,161,1,960,161,10,6,6,3,80,10,2014,961,8,8,4,5,31,34,2714,2015,6,10,3,6,10,70,2840,2715,4,12,1,8,1,126]),e.tab154=o([335,0,5,10,2,7,4,84,1035,336,7,8,4,5,20,35,1515,1036,9,6,6,3,48,10,1596,1516,11,4,8,1,81,1]),e.i=0;;){if(e.d1<=h(e.tab164,e.i)){W(O(e.tab164,e.i+1,7)),e.d1te=n[--t],e.d1to=n[--t],e.d1mwe=n[--t],e.d1mwo=n[--t],e.d1ele=n[--t],e.d1elo=n[--t],e.d1gs=n[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d2<=h(e.tab154,e.i)){W(O(e.tab154,e.i+1,7)),e.d2te=n[--t],e.d2to=n[--t],e.d2mwe=n[--t],e.d2mwo=n[--t],e.d2ele=n[--t],e.d2elo=n[--t],e.d2gs=n[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d3<=h(e.tab164,e.i)){W(O(e.tab164,e.i+1,7)),e.d3te=n[--t],e.d3to=n[--t],e.d3mwe=n[--t],e.d3mwo=n[--t],e.d3ele=n[--t],e.d3elo=n[--t],e.d3gs=n[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d4<=h(e.tab154,e.i)){W(O(e.tab154,e.i+1,7)),e.d4te=n[--t],e.d4to=n[--t],e.d4mwe=n[--t],e.d4mwo=n[--t],e.d4ele=n[--t],e.d4elo=n[--t],e.d4gs=n[--t];break}e.i=e.i+8}n[t++]="d1wo",n[t++]=~~(R(e.d1-e.d1gs)/e.d1te),n[t++]=e.d1elo,n[t++]=e.d1mwo,n[t++]=4,n[t++]=!1,e.getRSSwidths();var z=n[--t];e[n[--t]]=z,n[t++]="d1we",n[t++]=R(e.d1-e.d1gs)%e.d1te,n[t++]=e.d1ele,n[t++]=e.d1mwe,n[t++]=4,n[t++]=!0,e.getRSSwidths();var V=n[--t];e[n[--t]]=V,n[t++]="d2wo",n[t++]=R(e.d2-e.d2gs)%e.d2to,n[t++]=e.d2elo,n[t++]=e.d2mwo,n[t++]=4,n[t++]=!0,e.getRSSwidths();var L=n[--t];e[n[--t]]=L,n[t++]="d2we",n[t++]=~~(R(e.d2-e.d2gs)/e.d2to),n[t++]=e.d2ele,n[t++]=e.d2mwe,n[t++]=4,n[t++]=!1,e.getRSSwidths();var Q=n[--t];e[n[--t]]=Q,n[t++]="d3wo",n[t++]=~~(R(e.d3-e.d3gs)/e.d3te),n[t++]=e.d3elo,n[t++]=e.d3mwo,n[t++]=4,n[t++]=!1,e.getRSSwidths();var q=n[--t];e[n[--t]]=q,n[t++]="d3we",n[t++]=R(e.d3-e.d3gs)%e.d3te,n[t++]=e.d3ele,n[t++]=e.d3mwe,n[t++]=4,n[t++]=!0,e.getRSSwidths();var ee=n[--t];e[n[--t]]=ee,n[t++]="d4wo",n[t++]=R(e.d4-e.d4gs)%e.d4to,n[t++]=e.d4elo,n[t++]=e.d4mwo,n[t++]=4,n[t++]=!0,e.getRSSwidths();var X=n[--t];e[n[--t]]=X,n[t++]="d4we",n[t++]=~~(R(e.d4-e.d4gs)/e.d4to),n[t++]=e.d4ele,n[t++]=e.d4mwe,n[t++]=4,n[t++]=!1,e.getRSSwidths();var ae=n[--t];e[n[--t]]=ae,e.d1w=o(8);for(var K=0;K<=3;K+=1)e.i=K,C(e.d1w,e.i*2,h(e.d1wo,e.i)),C(e.d1w,e.i*2+1,h(e.d1we,e.i));e.d2w=o(8);for(var ie=0;ie<=3;ie+=1)e.i=ie,C(e.d2w,7-e.i*2,h(e.d2wo,e.i)),C(e.d2w,6-e.i*2,h(e.d2we,e.i));e.d3w=o(8);for(var ne=0;ne<=3;ne+=1)e.i=ne,C(e.d3w,7-e.i*2,h(e.d3wo,e.i)),C(e.d3w,6-e.i*2,h(e.d3we,e.i));e.d4w=o(8);for(var J=0;J<=3;J+=1)e.i=J,C(e.d4w,e.i*2,h(e.d4wo,e.i)),C(e.d4w,e.i*2+1,h(e.d4we,e.i));n[t++]=1/0,W(e.d1w),W(e.d2w),W(e.d3w),W(e.d4w),e.widths=o(),e.checkweights=o([1,3,9,27,2,6,18,54,58,72,24,8,29,36,12,4,74,51,17,32,37,65,48,16,64,34,23,69,49,68,46,59]),e.checkwidths=o([3,8,2,1,1,3,5,5,1,1,3,3,7,1,1,3,1,9,1,1,2,7,4,1,1,2,5,6,1,1,2,3,8,1,1,1,5,7,1,1,1,3,9,1,1]),e.checksum=0;for(var te=0;te<=31;te+=1)e.i=te,e.checksum=R(e.checksum+h(e.widths,e.i)*h(e.checkweights,e.i));e.checksum=e.checksum%79,e.checksum>=8&&(e.checksum=e.checksum+1),e.checksum>=72&&(e.checksum=e.checksum+1),e.checklt=O(e.checkwidths,~~(e.checksum/9)*5,5),e.checkrtrev=O(e.checkwidths,e.checksum%9*5,5),e.checkrt=o(5);for(var $=0;$<=4;$+=1)e.i=$,C(e.checkrt,e.i,h(e.checkrtrev,4-e.i));if(ce(e.format,"omni")||ce(e.format,"truncated")){n[t++]=1/0,n[t++]=1,W(e.d1w),W(e.checklt),W(e.d2w),W(e.d4w),W(e.checkrt),W(e.d3w),n[t++]=1,n[t++]=1,e.sbs=o(),n[t++]=1/0;var oe=e.sbs;n[t++]=1/0;for(var we=0,be=~~((e.sbs.length+1)/2);we<be;we++)n[t++]=e.height;var Te=o();n[t++]=1/0;for(var ye=0,tt=~~((e.sbs.length+1)/2);ye<tt;ye++)n[t++]=0;var Qe=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=oe,n[t++]="bhs",n[t++]=Te,n[t++]="bbs",n[t++]=Qe,n[t++]="txt",n[t++]=e.txt,n[t++]="textxalign",n[t++]="center",n[t++]="borderleft",n[t++]=0,n[t++]="borderright",n[t++]=0,n[t++]="opt",n[t++]=e.options;var Ge=rt();n[t++]=Ge,e.dontdraw||on()}else{n[t++]=1/0,n[t++]=1,n[t++]=1,W(e.d1w),W(e.checklt),W(e.d2w),n[t++]=1,n[t++]=1,n[t++]=0,e.top=o(),n[t++]=1/0,n[t++]=1,n[t++]=1,W(e.d4w),W(e.checkrt),W(e.d3w),n[t++]=1,n[t++]=1,n[t++]=0,e.bot=o();for(var Xe=0;Xe<=24;Xe+=2){e.i=Xe;for(var Je=0,dt=h(e.top,e.i);Je<dt;Je++)n[t++]=0;for(var vt=0,_t=h(e.top,e.i+1);vt<_t;vt++)n[t++]=1}Rn(o(50)),e.top=n[--t];for(var xt=0;xt<=24;xt+=2){e.i=xt;for(var bt=0,kt=h(e.bot,e.i);bt<kt;bt++)n[t++]=1;for(var Pt=0,Rt=h(e.bot,e.i+1);Pt<Rt;Pt++)n[t++]=0}if(Rn(o(50)),e.bot=n[--t],ce(e.format,"stacked")){e.sep=o(50),C(e.sep,0,0);for(var Wt=1;Wt<=49;Wt+=1)e.i=Wt,ce(h(e.top,e.i),h(e.bot,e.i))?C(e.sep,e.i,1-h(e.top,e.i)):C(e.sep,e.i,1-h(e.sep,e.i-1));H(e.sep,0,o([0,0,0,0])),H(e.sep,46,o([0,0,0,0])),n[t++]=1/0;for(var zt=0;zt<5;zt++)W(e.top);W(e.sep);for(var Ct=0;Ct<7;Ct++)W(e.bot);e.pixs=o(),e.pixy=~~(e.pixs.length/50)}if(ce(e.format,"stackedomni")){n[t++]=1/0,Ie(e.top,function(){var Bt=n[--t];n[t++]=1-Bt}),e.sep1=o(),H(e.sep1,0,o([0,0,0,0])),H(e.sep1,46,o([0,0,0,0]));for(var Yt=18;Yt<=30;Yt+=1){if(e.i=Yt,h(e.top,e.i)==0)if(h(e.top,e.i-1)==1)n[t++]=1;else{var jt=h(e.sep1,e.i-1)==0?1:0;n[t++]=jt}else n[t++]=0;C(e.sep1,e.i,n[--t])}n[t++]=1/0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;for(var an=0;an<21;an++)n[t++]=0,n[t++]=1;n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,e.sep2=o(),n[t++]=1/0,Ie(e.bot,function(){var Bt=n[--t];n[t++]=1-Bt}),e.sep3=o(),H(e.sep3,0,o([0,0,0,0])),H(e.sep3,46,o([0,0,0,0]));for(var rn=19;rn<=31;rn+=1){if(e.i=rn,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var Kt=h(e.sep3,e.i-1)==0?1:0;n[t++]=Kt}else n[t++]=0;C(e.sep3,e.i,n[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),n[t++]=!0;for(var Jt=0;Jt<=12;Jt+=1){var Zt=n[--t];n[t++]=Zt&&ce(h(e.bot,Jt+19),h(e.f3,Jt))}n[--t]&&H(e.sep3,19,o([0,0,0,0,0,0,0,0,0,0,1,0,0])),n[t++]=1/0;for(var Qt=0,mn=e.barxmult;Qt<mn;Qt++)W(e.top);W(e.sep1),W(e.sep2),W(e.sep3);for(var cn=0,dn=e.barxmult;cn<dn;cn++)W(e.bot);e.pixs=o(),e.pixy=~~(e.pixs.length/50)}var Ht=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",50],["pixy",e.pixy],["height",e.pixy/72],["width",50/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);n[t++]=Ht,e.dontdraw||Lt()}e=r}function $S(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=17&&e.barcode.length!=18&&(n[t++]="bwipp.databarstackedBadLength#9532",n[t++]="GS1 DataBar Stacked must be 13 or 14 digits",Z()),qe(O(e.barcode,0,4),"(01)")&&(n[t++]="bwipp.databarstackedBadAI#9535",n[t++]="GS1 DataBar Stacked must begin with (01) application identifier",Z());for(var i=O(e.barcode,4,e.barcode.length-4),a=0,s=i.length;a<s;a++){var l=h(i,a);(l<48||l>57)&&(n[t++]="bwipp.databarstackedBadCharacter#9539",n[t++]="GS1 DataBar Stacked must contain only digits",Z())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var d=n[--t];n[t++]=d*3}var f=n[--t],m=n[--t];e[n[--t]]=R(m+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(n[t++]="bwipp.databarstackedBadCheckDigit#9552",n[t++]="Incorrect GS1 DataBar Stacked check digit provided",Z());var g=fe(18);H(g,0,e.barcode),C(g,17,e.checksum+48),e.barcode=g,C(e.options,"dontdraw",!0),C(e.options,"format","stacked"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Gm();var v=n[--t];e[n[--t]]=v,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function WS(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],qe(O(e.barcode,0,4),"(01)")&&(n[t++]="bwipp.databarstackedomniBadAI#9610",n[t++]="GS1 DataBar Stacked Omnidirectional must begin with (01) application identifier",Z()),e.barcode.length!=17&&e.barcode.length!=18&&(n[t++]="bwipp.databarstackedomniBadLength#9613",n[t++]="GS1 DataBar Stacked Omnidirectional must be 13 or 14 digits",Z());for(var i=O(e.barcode,4,e.barcode.length-4),a=0,s=i.length;a<s;a++){var l=h(i,a);(l<48||l>57)&&(n[t++]="bwipp.databarstackedomniBadCharacter#9617",n[t++]="GS1 DataBar Stacked Omnidirectional must contain only digits",Z())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var d=n[--t];n[t++]=d*3}var f=n[--t],m=n[--t];e[n[--t]]=R(m+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(n[t++]="bwipp.databarstackedomniBadCheckDigit#9630",n[t++]="Incorrect GS1 DataBar Stacked Omnidirectional check digit provided",Z());var g=fe(18);H(g,0,e.barcode),C(g,17,e.checksum+48),e.barcode=g,C(e.options,"dontdraw",!0),C(e.options,"format","stackedomni"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Gm();var v=n[--t];e[n[--t]]=v,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function XS(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=17&&e.barcode.length!=18&&(n[t++]="bwipp.databartruncatedBadLength#9688",n[t++]="GS1 DataBar Truncated must be 13 or 14 digits",Z()),qe(O(e.barcode,0,4),"(01)")&&(n[t++]="bwipp.databartruncatedBadAI#9691",n[t++]="GS1 DataBar Truncated must begin with (01) application identifier",Z());for(var i=O(e.barcode,4,e.barcode.length-4),a=0,s=i.length;a<s;a++){var l=h(i,a);(l<48||l>57)&&(n[t++]="bwipp.databartruncatedBadCharacter#9695",n[t++]="GS1 DataBar Truncated must contain only digits",Z())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var d=n[--t];n[t++]=d*3}var f=n[--t],m=n[--t];e[n[--t]]=R(m+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(n[t++]="bwipp.databartruncatedBadCheckDigit#9708",n[t++]="Incorrect GS1 DataBar Truncated check digit provided",Z());var g=fe(18);H(g,0,e.barcode),C(g,17,e.checksum+48),e.barcode=g,C(e.options,"dontdraw",!0),C(e.options,"format","truncated"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Gm();var v=n[--t];e[n[--t]]=v,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function KS(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.height=10/72,e.linkage=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length!=17&&e.barcode.length!=18&&(n[t++]="bwipp.databarlimitedBadLength#9771",n[t++]="GS1 DataBar Limited must be 13 or 14 digits",Z()),qe(O(e.barcode,0,4),"(01)")&&(n[t++]="bwipp.databarlimitedBadAI#9774",n[t++]="GS1 DataBar Limited must begin with (01) application identifier",Z());var i=h(e.barcode,4);(i<48||i>49)&&(n[t++]="bwipp.databarlimitedBadStartDigit#9777",n[t++]="GS1 DataBar Limited must begin with 0 or 1",Z());for(var a=O(e.barcode,5,e.barcode.length-5),s=0,l=a.length;s<l;s++){var c=h(a,s);(c<48||c>57)&&(n[t++]="bwipp.databarlimitedBadCharacter#9781",n[t++]="GS1 DataBar Limited must contain only digits",Z())}e.checksum=0;for(var d=0;d<=12;d+=1){if(e.i=d,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var f=n[--t];n[t++]=f*3}var m=n[--t],g=n[--t];e[n[--t]]=R(g+m)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(n[t++]="bwipp.databarlimitedBadCheckDigit#9794",n[t++]="Incorrect GS1 DataBar Limited check digit provided",Z());var v=fe(18);H(v,0,e.barcode),C(v,17,e.checksum+48),e.barcode=v,e.linkval=o([2,0,1,5,1,3,3,5,3,1,0,9,6]),n[t++]=1/0;for(var y=O(e.barcode,4,13),A=0,w=y.length;A<w;A++)n[t++]=h(y,A)-48;if(e.binval=o(),e.linkage)for(var k=0,E=e.binval.length-1;k<=E;k+=1)e.i=k,C(e.binval,e.i,R(h(e.binval,e.i)+h(e.linkval,e.i)));e.txt=o(e.barcode.length);for(var I=0,T=e.barcode.length-1;I<=T;I+=1)e.i=I,C(e.txt,e.i,o([O(e.barcode,e.i,1),0,0,"",0]));e.ncr=function(){var xt=n[--t],bt=n[--t],kt=R(bt-xt);if(xt<R(bt-xt)){var Pt=kt;kt=xt,xt=Pt}n[t++]=kt,n[t++]=1,n[t++]=1;for(var Rt=bt,Wt=xt+1;Rt>=Wt;Rt-=1){var zt=n[--t],Ct=n[t-1],Yt=n[t-2];if(n[t++]=zt*Rt,Zh(Ct,Yt)){var jt=n[--t],an=n[--t];n[t++]=an+1,n[t++]=~~(jt/an)}}for(;;){var rn=n[t-2],Kt=n[t-3];if(_c(rn,Kt))break;var Jt=n[--t],Zt=n[--t];n[t++]=Zt+1,n[t++]=~~(Jt/Zt)}var Qt=n[--t];n[t-1]=Qt;var mn=n[--t];n[t-1]=mn},e.getRSSwidths=function(){e.oe=n[--t],e.el=n[--t],e.mw=n[--t],e.nm=n[--t],e.val=n[--t],e.out=o(e.el),e.mask=0;for(var xt=0,bt=e.el-2;xt<=bt;xt+=1){e.bar=xt,e.ew=1;var kt=e.bar;for(e.mask=e.mask|(kt<0?1>>>-kt:1<<kt);;){n[t++]="sval",n[t++]=R(e.nm-e.ew)-1,n[t++]=R(e.el-e.bar)-2,e.ncr();var Pt=n[--t];if(e[n[--t]]=Pt,e.oe&&e.mask==0&&R(e.nm-e.ew-e.el*2+e.bar*2)>=-2){n[t++]="sval",n[t++]=e.sval,n[t++]=R(e.nm-e.ew-e.el+e.bar),n[t++]=R(e.el-e.bar)-2,e.ncr();var Rt=n[--t],Wt=n[--t];e[n[--t]]=R(Wt-Rt)}if(R(e.el-e.bar)>2){e.lval=0;for(var zt=R(e.nm-e.ew-e.el+e.bar)+2,Ct=e.mw+1;zt>=Ct;zt-=1)n[t++]=R(e.nm-zt-e.ew)-1,n[t++]=R(e.el-e.bar)-3,e.ncr(),e.lval=R(n[--t]+e.lval);e.sval=R(e.sval-e.lval*(e.el-e.bar-1))}else R(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=R(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var Yt=e.bar;e.mask=e.mask&~(Yt<0?1>>>-Yt:1<<Yt)}e.val=R(e.val+e.sval),e.nm=R(e.nm-e.ew),C(e.out,e.bar,e.ew)}C(e.out,e.el-1,e.nm),n[t++]=e.out};for(var N=0;N<=11;N+=1){e.i=N;var j=e.binval,B=e.i;C(j,B+1,R(h(j,B+1)+h(e.binval,e.i)%2013571*10)),C(e.binval,e.i,~~(h(e.binval,e.i)/2013571))}e.d2=h(e.binval,12)%2013571;var U=e.binval;C(U,12,~~(h(U,12)/2013571)),e.d1=0,e.i=!0;for(var F=0;F<=12;F+=1){e.j=F;var P=h(e.binval,e.j);if(n[t++]=P,P==0&&e.i)t--;else{e.i=!1,n[t++]="d1",n[t++]=e.d1;var z=n[t-3],V=n[t-1];e[n[t-2]]=R(V+z*~~El(10,12-e.j)),t-=3}}for(e.tab267=o([183063,0,17,9,6,3,6538,28,820063,183064,13,13,5,4,875,728,1000775,820064,9,17,3,6,28,6454,1491020,1000776,15,11,5,4,2415,203,1979844,1491021,11,15,4,5,203,2408,1996938,1979845,19,7,8,1,17094,1,2013570,1996939,7,19,1,8,1,16632]),e.i=0;;){if(e.d1<=h(e.tab267,e.i)){W(O(e.tab267,e.i+1,7)),e.d1te=n[--t],e.d1to=n[--t],e.d1mwe=n[--t],e.d1mwo=n[--t],e.d1ele=n[--t],e.d1elo=n[--t],e.d1gs=n[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d2<=h(e.tab267,e.i)){W(O(e.tab267,e.i+1,7)),e.d2te=n[--t],e.d2to=n[--t],e.d2mwe=n[--t],e.d2mwo=n[--t],e.d2ele=n[--t],e.d2elo=n[--t],e.d2gs=n[--t];break}e.i=e.i+8}n[t++]="d1wo",n[t++]=~~(R(e.d1-e.d1gs)/e.d1te),n[t++]=e.d1elo,n[t++]=e.d1mwo,n[t++]=7,n[t++]=!1,e.getRSSwidths();var L=n[--t];e[n[--t]]=L,n[t++]="d1we",n[t++]=R(e.d1-e.d1gs)%e.d1te,n[t++]=e.d1ele,n[t++]=e.d1mwe,n[t++]=7,n[t++]=!0,e.getRSSwidths();var Q=n[--t];e[n[--t]]=Q,n[t++]="d2wo",n[t++]=~~(R(e.d2-e.d2gs)/e.d2te),n[t++]=e.d2elo,n[t++]=e.d2mwo,n[t++]=7,n[t++]=!1,e.getRSSwidths();var q=n[--t];e[n[--t]]=q,n[t++]="d2we",n[t++]=R(e.d2-e.d2gs)%e.d2te,n[t++]=e.d2ele,n[t++]=e.d2mwe,n[t++]=7,n[t++]=!0,e.getRSSwidths();var ee=n[--t];e[n[--t]]=ee,e.d1w=o(14);for(var X=0;X<=6;X+=1)e.i=X,C(e.d1w,e.i*2,h(e.d1wo,e.i)),C(e.d1w,e.i*2+1,h(e.d1we,e.i));e.d2w=o(14);for(var ae=0;ae<=6;ae+=1)e.i=ae,C(e.d2w,e.i*2,h(e.d2wo,e.i)),C(e.d2w,e.i*2+1,h(e.d2we,e.i));n[t++]=1/0,W(e.d1w),W(e.d2w),e.widths=o(),e.checkweights=o([1,3,9,27,81,65,17,51,64,14,42,37,22,66,20,60,2,6,18,54,73,41,34,13,39,28,84,74]),n[t++]=1/0;for(var K=0;K<=43;K+=1)n[t++]=K;n[t++]=45,n[t++]=52,n[t++]=57;for(var ie=63;ie<=66;ie+=1)n[t++]=ie;for(var ne=73;ne<=79;ne+=1)n[t++]=ne;n[t++]=82;for(var J=126;J<=130;J+=1)n[t++]=J;n[t++]=132;for(var te=141;te<=146;te+=1)n[t++]=te;for(var $=210;$<=217;$+=1)n[t++]=$;n[t++]=220;for(var oe=316;oe<=320;oe+=1)n[t++]=oe;n[t++]=322,n[t++]=323,n[t++]=326,n[t++]=337,e.checkseq=o(),e.checksum=0;for(var we=0;we<=27;we+=1)e.i=we,e.checksum=R(e.checksum+h(e.widths,e.i)*h(e.checkweights,e.i));e.checksum=e.checksum%89,e.seq=h(e.checkseq,e.checksum),n[t++]="swidths",n[t++]=~~(e.seq/21),n[t++]=8,n[t++]=3,n[t++]=6,n[t++]=!1,e.getRSSwidths();var be=n[--t];e[n[--t]]=be,n[t++]="bwidths",n[t++]=e.seq%21,n[t++]=8,n[t++]=3,n[t++]=6,n[t++]=!1,e.getRSSwidths();var Te=n[--t];e[n[--t]]=Te,e.checkwidths=o([0,0,0,0,0,0,0,0,0,0,0,0,1,1]);for(var ye=0;ye<=5;ye+=1)e.i=ye,C(e.checkwidths,e.i*2,h(e.swidths,e.i)),C(e.checkwidths,e.i*2+1,h(e.bwidths,e.i));n[t++]=1/0,n[t++]=1,W(e.d1w),W(e.checkwidths),W(e.d2w),n[t++]=1,n[t++]=1,n[t++]=5,e.sbs=o(),n[t++]=1/0;var tt=e.sbs;n[t++]=1/0;for(var Qe=0,Ge=~~((e.sbs.length+1)/2);Qe<Ge;Qe++)n[t++]=e.height;var Xe=o();n[t++]=1/0;for(var Je=0,dt=~~((e.sbs.length+1)/2);Je<dt;Je++)n[t++]=0;var vt=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=tt,n[t++]="bhs",n[t++]=Xe,n[t++]="bbs",n[t++]=vt,n[t++]="txt",n[t++]=e.txt,n[t++]="textxalign",n[t++]="center",n[t++]="borderleft",n[t++]=0,n[t++]="borderright",n[t++]=0,n[t++]="opt",n[t++]=e.options;var _t=rt();n[t++]=_t,e.dontdraw||on(),e=r}function dw(){var r=e;if(e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,e.height=34/72,e.format="expanded",e.segments=-1,e.linkage=!1,e.barxmult=34,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barxmult<34&&(n[t++]="bwipp.databarStackedOmniBarXmult#10075",n[t++]="GS1 DataBar Expanded Stacked must have a barxmult of at least 34",Z()),qe(e.format,"expanded")&&qe(e.format,"expandedstacked")&&(n[t++]="bwipp.databarexpandedBadFormat#10079",n[t++]="Valid formats are expanded and expandedstacked",Z()),e.segments==-1){var i=ce(e.format,"expandedstacked")?4:22;e.segments=i}else(e.segments<2||e.segments>22||e.segments%2!=0)&&(n[t++]="bwipp.gs1databarexpandedBadSegments#10086",n[t++]="The number of segments must be even from 2 to 22",Z());for(n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t];;){if(e.ais.length==2&&ce(h(e.ais,0),"01")&&ce(h(e.ais,1),"3103")&&ce(O(h(e.vals,0),0,1),"9")&&Ye(h(e.vals,1))<=32767){n[t++]="0100",n[t++]=!1;break}if(e.ais.length==2&&ce(h(e.ais,0),"01")&&ce(h(e.ais,1),"3202")&&ce(O(h(e.vals,0),0,1),"9")&&Ye(h(e.vals,1))<=9999){n[t++]="0101",n[t++]=!1;break}if(e.ais.length==2&&ce(h(e.ais,0),"01")&&ce(h(e.ais,1),"3203")&&ce(O(h(e.vals,0),0,1),"9")&&Ye(h(e.vals,1))<=22767){n[t++]="0101",n[t++]=!1;break}var a=e.ais.length;if(a==2||a==3){n[t++]="ai310x",n[t++]=!1;for(var s=3100;s<=3109;s+=1){var l=n[--t];n[t++]=l||ce(Nn(fe(4),s,10),h(e.ais,1))}var c=n[--t];e[n[--t]]=c,n[t++]="ai320x",n[t++]=!1;for(var d=3200;d<=3209;d+=1){var f=n[--t];n[t++]=f||ce(Nn(fe(4),d,10),h(e.ais,1))}var m=n[--t];if(e[n[--t]]=m,e.ais.length==3){var g=o(["11","13","15","17"]);n[t++]="aibad",n[t++]=!0;for(var v=0,y=g.length;v<y;v++){var A=n[--t];n[t++]=A&&qe(h(g,v),h(e.ais,2))}var w=n[--t];e[n[--t]]=w}else e.aibad=!1;if(ce(h(e.ais,0),"01")&&(e.ai310x||e.ai320x)&&!e.aibad){if(e.ais.length==3){var k=Ye(O(h(e.vals,2),2,2)),E=Ye(O(h(e.vals,2),4,2));if(ce(O(h(e.vals,0),0,1),"9")&&Ye(h(e.vals,1))<=99999&&k>=1&&k<=12&&E>=0&&E<=31){if(e.ai310x&&ce(h(e.ais,2),"11")){n[t++]="0111000",n[t++]=!1;break}if(e.ai320x&&ce(h(e.ais,2),"11")){n[t++]="0111001",n[t++]=!1;break}if(e.ai310x&&ce(h(e.ais,2),"13")){n[t++]="0111010",n[t++]=!1;break}if(e.ai320x&&ce(h(e.ais,2),"13")){n[t++]="0111011",n[t++]=!1;break}if(e.ai310x&&ce(h(e.ais,2),"15")){n[t++]="0111100",n[t++]=!1;break}if(e.ai320x&&ce(h(e.ais,2),"15")){n[t++]="0111101",n[t++]=!1;break}if(e.ai310x&&ce(h(e.ais,2),"17")){n[t++]="0111110",n[t++]=!1;break}if(e.ai320x&&ce(h(e.ais,2),"17")){n[t++]="0111111",n[t++]=!1;break}}}else if(ce(O(h(e.vals,0),0,1),"9")&&Ye(h(e.vals,1))<=99999){if(e.ai310x){n[t++]="0111000",n[t++]=!1;break}if(e.ai320x){n[t++]="0111001",n[t++]=!1;break}}}}if(e.ais.length>=2){n[t++]="ai392x",n[t++]=!1;for(var I=3920;I<=3923;I+=1){var T=n[--t];n[t++]=T||ce(Nn(fe(4),I,10),h(e.ais,1))}var N=n[--t];if(e[n[--t]]=N,ce(h(e.ais,0),"01")&&e.ai392x&&ce(O(h(e.vals,0),0,1),"9")){n[t++]="01100",n[t++]=!0;break}}if(e.ais.length>=2){n[t++]="ai393x",n[t++]=!1;for(var j=3930;j<=3933;j+=1){var B=n[--t];n[t++]=B||ce(Nn(fe(4),j,10),h(e.ais,1))}var U=n[--t];if(e[n[--t]]=U,ce(h(e.ais,0),"01")&&e.ai393x&&ce(O(h(e.vals,0),0,1),"9")){n[t++]="01101",n[t++]=!0;break}}if(ce(h(e.ais,0),"01")){n[t++]="1",n[t++]=!0;break}n[t++]="00",n[t++]=!0;break}if(e.gpfallow=n[--t],e.method=n[--t],e.conv12to40=function(){var Un=zi(fe(40),"0000000000000000000000000000000000000000"),ni=n[--t],hi=Nn(fe(10),Ye(O(ni,0,3)),2);H(O(Un,0,10),10-hi.length,hi);var Wi=Nn(fe(10),Ye(O(ni,3,3)),2);H(O(Un,10,10),10-Wi.length,Wi);var Ri=Nn(fe(10),Ye(O(ni,6,3)),2);H(O(Un,20,10),10-Ri.length,Ri);var er=Nn(fe(10),Ye(O(ni,9,3)),2);H(O(Un,30,10),10-er.length,er),n[t++]=Un},e.conv13to44=function(){var Un=zi(fe(44),"00000000000000000000000000000000000000000000"),ni=n[--t],hi=Nn(fe(4),Ye(O(ni,0,1)),2);H(O(Un,0,4),4-hi.length,hi),n[t++]=Un,n[t++]=Un,n[t++]=O(ni,1,12),e.conv12to40();var Wi=n[--t];H(n[--t],4,Wi)},e.tobin=function(){var Un=fe(n[--t]);n[t++]=Un;for(var ni=0,hi=Un.length-1;ni<=hi;ni+=1){var Wi=n[t-1];C(Wi,ni,48)}var Ri=n[t-1];n[t++]=Ri;var er=n[t-3],Yi=n[t-1];n[t-3]=n[t-2],t-=2;var Oi=Nn(fe(Yi.length),er,2);H(Yi,Yi.length-Oi.length,Oi)},e.fnc1=-1,e.lnumeric=-2,e.lalphanumeric=-3,e.liso646=-4,ce(e.method,"00")&&(e.cdf=o([]),e.gpf=o([])),ce(e.method,"1")){n[t++]="cdf",n[t++]=O(h(e.vals,0),0,13),e.conv13to44();var F=n[--t];e[n[--t]]=F,n[t++]=1/0;for(var P=e.cdf,z=0,V=P.length;z<V;z++)n[t++]=h(P,z)-48;e.cdf=o(),e.gpf=o([]),e.ais=O(e.ais,1,e.ais.length-1),e.vals=O(e.vals,1,e.vals.length-1),e.fncs=O(e.fncs,1,e.fncs.length-1)}if(ce(e.method,"0100")){e.cdf=fe(55),n[t++]=e.cdf,n[t++]=0,n[t++]=O(h(e.vals,0),1,12),e.conv12to40();var L=n[--t],Q=n[--t];H(n[--t],Q,L),n[t++]=e.cdf,n[t++]=40,n[t++]=Ye(h(e.vals,1)),n[t++]=15,e.tobin();var q=n[--t],ee=n[--t];H(n[--t],ee,q),n[t++]=1/0;for(var X=e.cdf,ae=0,K=X.length;ae<K;ae++)n[t++]=h(X,ae)-48;e.cdf=o(),e.gpf=o([]),e.ais=o([]),e.vals=o([]),e.fncs=o([])}if(ce(e.method,"0101")){e.cdf=fe(55),n[t++]=e.cdf,n[t++]=0,n[t++]=O(h(e.vals,0),1,12),e.conv12to40();var ie=n[--t],ne=n[--t];H(n[--t],ne,ie),ce(h(e.ais,1),"3202")?(n[t++]=Ye(h(e.vals,1)),n[t++]=15,e.tobin()):(n[t++]=Ye(h(e.vals,1))+1e4,n[t++]=15,e.tobin()),H(e.cdf,40,n[--t]),n[t++]=1/0;for(var J=e.cdf,te=0,$=J.length;te<$;te++)n[t++]=h(J,te)-48;e.cdf=o(),e.gpf=o([]),e.ais=o([]),e.vals=o([]),e.fncs=o([])}if(e.method.length==7){e.cdf=fe(76),n[t++]=e.cdf,n[t++]=0,n[t++]=O(h(e.vals,0),1,12),e.conv12to40();var oe=n[--t],we=n[--t];H(n[--t],we,oe);var be=fe(6);if(H(be,0,O(h(e.ais,1),3,1)),H(be,1,O(h(e.vals,1),1,5)),n[t++]=Ye(be),n[t++]=20,e.tobin(),H(e.cdf,40,n[--t]),e.ais.length==3){var Te=h(e.vals,2);n[t++]=Ye(O(Te,0,2))*384+((Ye(O(Te,2,2))-1)*32+Ye(O(Te,4,2)))}else n[t++]=38400;n[t++]=16,e.tobin(),H(e.cdf,60,n[--t]),n[t++]=1/0;for(var ye=e.cdf,tt=0,Qe=ye.length;tt<Qe;tt++)n[t++]=h(ye,tt)-48;e.cdf=o(),e.gpf=o([]),e.ais=o([]),e.vals=o([]),e.fncs=o([])}if(ce(e.method,"01100")){e.cdf=fe(42),n[t++]=e.cdf,n[t++]=0,n[t++]=O(h(e.vals,0),1,12),e.conv12to40();var Ge=n[--t],Xe=n[--t];H(n[--t],Xe,Ge),n[t++]=e.cdf,n[t++]=40,n[t++]=Ye(O(h(e.ais,1),3,1)),n[t++]=2,e.tobin();var Je=n[--t],dt=n[--t];H(n[--t],dt,Je),n[t++]=1/0;for(var vt=e.cdf,_t=0,xt=vt.length;_t<xt;_t++)n[t++]=h(vt,_t)-48;e.cdf=o(),n[t++]=1/0,Ie(h(e.vals,1)),e.ais.length>2&&(n[t++]=e.fnc1),e.gpf=o(),e.ais=O(e.ais,2,e.ais.length-2),e.vals=O(e.vals,2,e.vals.length-2),e.fncs=O(e.fncs,2,e.fncs.length-2)}if(ce(e.method,"01101")){e.cdf=fe(52),n[t++]=e.cdf,n[t++]=0,n[t++]=O(h(e.vals,0),1,12),e.conv12to40();var bt=n[--t],kt=n[--t];H(n[--t],kt,bt),n[t++]=e.cdf,n[t++]=40,n[t++]=Ye(O(h(e.ais,1),3,1)),n[t++]=2,e.tobin();var Pt=n[--t],Rt=n[--t];H(n[--t],Rt,Pt),n[t++]=e.cdf,n[t++]=42,n[t++]=Ye(O(h(e.vals,1),0,3)),n[t++]=10,e.tobin();var Wt=n[--t],zt=n[--t];H(n[--t],zt,Wt),n[t++]=1/0;for(var Ct=e.cdf,Yt=0,jt=Ct.length;Yt<jt;Yt++)n[t++]=h(Ct,Yt)-48;e.cdf=o(),n[t++]=1/0;for(var an=h(e.vals,1),rn=O(an,3,an.length-3),Kt=0,Jt=rn.length;Kt<Jt;Kt++)n[t++]=h(rn,Kt);e.ais.length>2&&(n[t++]=e.fnc1),e.gpf=o(),e.ais=O(e.ais,2,e.ais.length-2),e.vals=O(e.vals,2,e.vals.length-2),e.fncs=O(e.fncs,2,e.fncs.length-2)}e.gpfallow?e.vlf=o(2):e.vlf=o([]),n[t++]=1/0;for(var Zt=0;Zt<=119;Zt+=1){var Qt=zi(fe(2),"00"),mn=Nn(fe(2),Zt,11);if(H(Qt,2-mn.length,mn),n[t++]=Zt,n[t++]=Qt,h(Qt,0)==65){var cn=n[t-1];C(cn,0,94)}var dn=n[t-1];if(h(dn,1)==65){var Ht=n[t-1];C(Ht,1,94)}var Bt=n[--t],Y=zi(fe(7),"0000000"),le=Nn(fe(7),n[--t]+8,2);H(Y,7-le.length,le),n[t++]=Bt,n[t++]=Y}n[t++]=e.lalphanumeric,n[t++]="0000",e.numeric=rt(),n[t++]=1/0;for(var se=48;se<=57;se+=1)n[t++]=se,n[t++]=se-43,n[t++]=5,e.tobin();n[t++]=e.fnc1,n[t++]="01111";for(var ge=65;ge<=90;ge+=1)n[t++]=ge,n[t++]=ge-33,n[t++]=6,e.tobin();n[t++]=42,n[t++]="111010";for(var ve=44;ve<=47;ve+=1)n[t++]=ve,n[t++]=ve+15,n[t++]=6,e.tobin();n[t++]=e.lnumeric,n[t++]="000",n[t++]=e.liso646,n[t++]="00100",e.alphanumeric=rt(),n[t++]=1/0;for(var _e=48;_e<=57;_e+=1)n[t++]=_e,n[t++]=_e-43,n[t++]=5,e.tobin();n[t++]=e.fnc1,n[t++]="01111";for(var pe=65;pe<=90;pe+=1)n[t++]=pe,n[t++]=pe-1,n[t++]=7,e.tobin();for(var Oe=97;Oe<=122;Oe+=1)n[t++]=Oe,n[t++]=Oe-7,n[t++]=7,e.tobin();n[t++]=33,n[t++]="11101000",n[t++]=34,n[t++]="11101001";for(var de=37;de<=47;de+=1)n[t++]=de,n[t++]=de+197,n[t++]=8,e.tobin();for(var ke=58;ke<=63;ke+=1)n[t++]=ke,n[t++]=ke+187,n[t++]=8,e.tobin();n[t++]=95,n[t++]="11111011",n[t++]=32,n[t++]="11111100",n[t++]=e.lnumeric,n[t++]="000",n[t++]=e.lalphanumeric,n[t++]="00100",e.iso646=rt();for(var Ee=0,De=e.ais.length-1;Ee<=De;Ee+=1){e.i=Ee,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var xe=o(e.gpf.length+e.ai.length+e.val.length);H(xe,0,e.gpf),n[t++]=xe,n[t++]=xe,n[t++]=e.gpf.length;var Ne=1/0,je=e.ai;n[t++]=Ne,Ie(je);var Se=o(),ze=n[--t];H(n[--t],ze,Se);var Pe=n[t-1];n[t++]=Pe,n[t++]=e.gpf.length+e.ai.length;var Be=1/0,at=e.val;n[t++]=Be,Ie(at);var Ze=o(),ft=n[--t];if(H(n[--t],ft,Ze),e.gpf=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var Ve=o(e.gpf.length+1);H(Ve,0,e.gpf),C(Ve,e.gpf.length,e.fnc1),e.gpf=Ve}}e.rembits=function(){var Un=n[--t],ni=48,hi=~~li(Un/12)*12;if(~~li(Un/12)*12<48){var Wi=ni;ni=hi,hi=Wi}var Ri=~~(hi/12);if(n[t++]=Un,n[t++]=hi,n[t++]=Ri,Ri%e.segments==1){var er=n[--t];n[t-1]=(er+1)*12}else t--;var Yi=n[--t],Oi=n[--t];n[t++]=R(Yi-Oi)},e.encode=function(){var Un=n[t-1];if(qe(Un,"raw")){var ni=n[--t],hi=h(ni,n[--t]);n[t++]=hi}else t--;var Wi=n[t-1];Wi.length+e.j>=252&&(t--,n[t++]="bwipp.gs1databarexpandedTooLong#10374",n[t++]="Maximum length exceeded",Z()),n[t++]=1/0;var Ri=n[--t],er=n[--t];n[t++]=Ri,Ie(er,function(){var Oi=n[--t];n[t++]=Oi-48});var Yi=o();H(e.gpfenc,e.j,Yi),e.j=Yi.length+e.j},n[t++]=1/0;for(var $e=0,Me=e.gpf.length;$e<Me;$e++)n[t++]=0;n[t++]=0,n[t++]=-1,e.numericruns=o(),n[t++]=1/0;for(var it=0,st=e.gpf.length;it<st;it++)n[t++]=0;n[t++]=0,e.alphanumericruns=o(),n[t++]=1/0;for(var mt=0,Tt=e.gpf.length;mt<Tt;mt++)n[t++]=0;n[t++]=9999,e.nextiso646only=o();for(var Ot=e.gpf.length-1;Ot>=0;Ot-=1){e.i=Ot;var Et=zi(fe(2),"00"),Dt=h(e.gpf,e.i);n[t++]=h(e.gpf,e.i),n[t++]=Et,n[t++]=Et,n[t++]=0,n[t++]=Dt,Dt==e.fnc1&&(n[t-1]=94);var wt=n[--t],en=n[--t];if(C(n[--t],en,wt),e.i<e.gpf.length-1){var gt=n[t-1],un=h(e.gpf,e.i+1);n[t++]=gt,n[t++]=1,n[t++]=un,un==e.fnc1&&(n[t-1]=94);var Vt=n[--t],fn=n[--t];C(n[--t],fn,Vt)}var $n=h(e.numeric,n[--t])!==void 0;$n?C(e.numericruns,e.i,h(e.numericruns,e.i+2)+2):C(e.numericruns,e.i,0);var ei=n[t-1],Dn=h(e.alphanumeric,ei)!==void 0;Dn?C(e.alphanumericruns,e.i,h(e.alphanumericruns,e.i+1)+1):C(e.alphanumericruns,e.i,0);var ai=n[--t],zn=h(e.iso646,ai)!==void 0,mi=h(e.alphanumeric,ai)!==void 0;zn&&!mi?C(e.nextiso646only,e.i,0):C(e.nextiso646only,e.i,h(e.nextiso646only,e.i+1)+1)}for(e.gpfenc=o(252),e.i=0,e.j=0,e.mode="numeric";e.i!=e.gpf.length;)for(;;){if(ce(e.mode,"numeric"))if(e.i<=e.gpf.length-2){var Fn=fe(2),Hn=h(e.gpf,e.i);n[t++]=Fn,n[t++]=Fn,n[t++]=0,n[t++]=Hn,Hn==e.fnc1&&(n[t-1]=94);var _n=n[--t],vn=n[--t];C(n[--t],vn,_n);var kn=n[t-1],Ai=h(e.gpf,e.i+1);n[t++]=kn,n[t++]=1,n[t++]=Ai,Ai==e.fnc1&&(n[t-1]=94);var Ei=n[--t],Ji=n[--t];C(n[--t],Ji,Ei);var nn=n[t-1],yn=h(e.numeric,nn)!==void 0;if(yn){n[t++]=e.numeric,e.encode(),e.i=e.i+2;break}n[t-1]=e.lalphanumeric,n[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}else{var qn=h(e.gpf,e.i);if(qn<48||qn>57){n[t++]=e.lalphanumeric,n[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}n[t++]="rem",n[t++]=13+e.method.length+e.vlf.length+e.cdf.length+e.j,e.rembits();var Tn=n[--t];if(e[n[--t]]=Tn,e.rem>=4&&e.rem<=6){var Gn=O(zi(fe(6),"000000"),0,e.rem),gi=Nn(fe(4),h(e.gpf,e.i)-47,2);H(Gn,4-gi.length,gi),n[t++]=Gn,n[t++]="raw",e.encode(),e.i=e.i+1;break}else{var Vn=fe(2);C(Vn,0,h(e.gpf,e.i)),C(Vn,1,94),n[t++]=Vn,n[t++]=e.numeric,e.encode(),e.i=e.i+1;break}}if(ce(e.mode,"alphanumeric")){if(h(e.gpf,e.i)==e.fnc1){n[t++]=e.fnc1,n[t++]=e.alphanumeric,e.encode(),e.mode="numeric",e.i=e.i+1;break}var ln=h(e.gpf,e.i),ti=h(e.iso646,ln)!==void 0,Qi=h(e.alphanumeric,ln)!==void 0;if(ti&&!Qi){n[t++]=e.liso646,n[t++]=e.alphanumeric,e.encode(),e.mode="iso646";break}if(h(e.numericruns,e.i)>=6){n[t++]=e.lnumeric,n[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}var Bi=h(e.numericruns,e.i);if(Bi>=4&&R(Bi+e.i)==e.gpf.length){n[t++]=e.lnumeric,n[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}n[t++]=h(e.gpf,e.i),n[t++]=e.alphanumeric,e.encode(),e.i=e.i+1;break}if(ce(e.mode,"iso646")){if(h(e.gpf,e.i)==e.fnc1){n[t++]=e.fnc1,n[t++]=e.iso646,e.encode(),e.mode="numeric",e.i=e.i+1;break}if(h(e.numericruns,e.i)>=4&&h(e.nextiso646only,e.i)>=10){n[t++]=e.lnumeric,n[t++]=e.iso646,e.encode(),e.mode="numeric";break}if(h(e.alphanumericruns,e.i)>=5&&h(e.nextiso646only,e.i)>=10){n[t++]=e.lalphanumeric,n[t++]=e.iso646,e.encode(),e.mode="alphanumeric";break}n[t++]=h(e.gpf,e.i),n[t++]=e.iso646,e.encode(),e.i=e.i+1;break}}e.gpf=O(e.gpfenc,0,e.j);var Ir=13+e.method.length+e.vlf.length+e.cdf.length+e.gpf.length;n[t++]=Ir,n[t++]=Ir,e.rembits();var _i=n[--t];if(e.pad=o(_i),n[t++]=_i,e.vlf.length!=0){var Nr=n[--t],rr=~~(R(n[--t]+Nr)/12);C(e.vlf,0,rr%2);var Zr=rr<=14?0:1;C(e.vlf,1,Zr)}else t-=2;if(e.pad.length>0){for(var ar=0,sr=e.pad.length-1;ar<=sr;ar+=5){e.i=ar;var Pi=e.pad,hr=e.i,Lr=o([0,0,1,0,0]),pr=e.pad,xr=e.i,wa=5,br=pr.length-xr;if(pr.length-xr>5){var Ba=wa;wa=br,br=Ba}H(Pi,hr,O(Lr,0,br))}ce(e.mode,"numeric")&&(n[t++]=1/0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.pad),e.pad=O(o(),0,e.pad.length))}n[t++]=1/0;var yr=e.linkage?1:0;n[t++]=yr,Ie(e.method,function(){var Un=n[--t];n[t++]=Un-48}),W(e.vlf),W(e.cdf),W(e.gpf),W(e.pad),e.binval=o(),e.datalen=~~(e.binval.length/12),e.ncr=function(){var Un=n[--t],ni=n[--t],hi=R(ni-Un);if(Un<R(ni-Un)){var Wi=hi;hi=Un,Un=Wi}n[t++]=hi,n[t++]=1,n[t++]=1;for(var Ri=ni,er=Un+1;Ri>=er;Ri-=1){var Yi=n[--t],Oi=n[t-1],Or=n[t-2];if(n[t++]=Yi*Ri,Zh(Oi,Or)){var Ya=n[--t],bs=n[--t];n[t++]=bs+1,n[t++]=~~(Ya/bs)}}for(;;){var Ts=n[t-2],Xs=n[t-3];if(_c(Ts,Xs))break;var Ms=n[--t],Rs=n[--t];n[t++]=Rs+1,n[t++]=~~(Ms/Rs)}var ys=n[--t];n[t-1]=ys;var Os=n[--t];n[t-1]=Os},e.getRSSwidths=function(){e.oe=n[--t],e.el=n[--t],e.mw=n[--t],e.nm=n[--t],e.val=n[--t],e.out=o(e.el),e.mask=0;for(var Un=0,ni=e.el-2;Un<=ni;Un+=1){e.bar=Un,e.ew=1;var hi=e.bar;for(e.mask=e.mask|(hi<0?1>>>-hi:1<<hi);;){n[t++]="sval",n[t++]=R(e.nm-e.ew)-1,n[t++]=R(e.el-e.bar)-2,e.ncr();var Wi=n[--t];if(e[n[--t]]=Wi,e.oe&&e.mask==0&&R(e.nm-e.ew-e.el*2+e.bar*2)>=-2){n[t++]="sval",n[t++]=e.sval,n[t++]=R(e.nm-e.ew-e.el+e.bar),n[t++]=R(e.el-e.bar)-2,e.ncr();var Ri=n[--t],er=n[--t];e[n[--t]]=R(er-Ri)}if(R(e.el-e.bar)>2){e.lval=0;for(var Yi=R(e.nm-e.ew-e.el+e.bar)+2,Oi=e.mw+1;Yi>=Oi;Yi-=1)n[t++]=R(e.nm-Yi-e.ew)-1,n[t++]=R(e.el-e.bar)-3,e.ncr(),e.lval=R(n[--t]+e.lval);e.sval=R(e.sval-e.lval*(e.el-e.bar-1))}else R(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=R(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var Or=e.bar;e.mask=e.mask&~(Or<0?1>>>-Or:1<<Or)}e.val=R(e.val+e.sval),e.nm=R(e.nm-e.ew),C(e.out,e.bar,e.ew)}C(e.out,e.el-1,e.nm),n[t++]=e.out},e.tab174=o([347,0,12,5,7,2,87,4,1387,348,10,7,5,4,52,20,2947,1388,8,9,4,5,30,52,3987,2948,6,11,3,6,10,104,4191,3988,4,13,1,8,1,204]),e.dxw=o(e.datalen);for(var zr=0,Tr=e.datalen-1;zr<=Tr;zr+=1){e.x=zr,e.d=O(e.binval,e.x*12,12),n[t++]="d",n[t++]=0;for(var ea=0;ea<=11;ea+=1){e.j=ea;var Hr=n[--t];n[t++]=R(Hr+~~El(2,11-e.j)*h(e.d,e.j))}var _a=n[--t];for(e[n[--t]]=_a,e.j=0;;){if(Zh(e.d,h(e.tab174,e.j))){W(O(e.tab174,e.j+1,7)),e.dte=n[--t],e.dto=n[--t],e.dmwe=n[--t],e.dmwo=n[--t],e.dele=n[--t],e.delo=n[--t],e.dgs=n[--t];break}e.j=e.j+8}n[t++]="dwo",n[t++]=~~(R(e.d-e.dgs)/e.dte),n[t++]=e.delo,n[t++]=e.dmwo,n[t++]=4,n[t++]=!0,e.getRSSwidths();var qr=n[--t];e[n[--t]]=qr,n[t++]="dwe",n[t++]=R(e.d-e.dgs)%e.dte,n[t++]=e.dele,n[t++]=e.dmwe,n[t++]=4,n[t++]=!1,e.getRSSwidths();var Va=n[--t];if(e[n[--t]]=Va,e.dw=o(8),e.x%2==0)for(var Gr=0;Gr<=3;Gr+=1)e.j=Gr,C(e.dw,7-e.j*2,h(e.dwo,e.j)),C(e.dw,6-e.j*2,h(e.dwe,e.j));else for(var la=0;la<=3;la+=1)e.j=la,C(e.dw,e.j*2,h(e.dwo,e.j)),C(e.dw,e.j*2+1,h(e.dwe,e.j));C(e.dxw,e.x,e.dw)}e.finderwidths=o([1,8,4,1,1,1,1,4,8,1,3,6,4,1,1,1,1,4,6,3,3,4,6,1,1,1,1,6,4,3,3,2,8,1,1,1,1,8,2,3,2,6,5,1,1,1,1,5,6,2,2,2,9,1,1,1,1,9,2,2]),e.finderseq=o([o([0,1]),o([0,3,2]),o([0,5,2,7]),o([0,9,2,7,4]),o([0,9,2,7,6,11]),o([0,9,2,7,8,11,10]),o([0,1,2,3,4,5,6,7]),o([0,1,2,3,4,5,6,9,8]),o([0,1,2,3,4,5,6,9,10,11]),o([0,1,2,3,4,7,6,9,8,11,10])]),e.seq=h(e.finderseq,~~((e.datalen-2)/2)),e.fxw=o(e.seq.length);for(var Vr=0,wr=e.seq.length-1;Vr<=wr;Vr+=1)e.x=Vr,C(e.fxw,e.x,O(e.finderwidths,h(e.seq,e.x)*5,5));e.checkweights=o([-1,-1,-1,-1,-1,-1,-1,-1,77,96,32,81,27,9,3,1,20,60,180,118,143,7,21,63,205,209,140,117,39,13,145,189,193,157,49,147,19,57,171,91,132,44,85,169,197,136,186,62,185,133,188,142,4,12,36,108,50,87,29,80,97,173,128,113,150,28,84,41,123,158,52,156,166,196,206,139,187,203,138,46,76,17,51,153,37,111,122,155,146,119,110,107,106,176,129,43,16,48,144,10,30,90,59,177,164,125,112,178,200,137,116,109,70,210,208,202,184,130,179,115,190,204,68,93,31,151,191,134,148,22,66,198,172,94,71,2,40,154,192,64,162,54,18,6,120,149,25,75,14,42,126,167,175,199,207,69,23,78,26,79,103,98,83,38,114,131,182,124,159,53,88,170,127,183,61,161,55,165,73,8,24,72,5,15,89,100,174,58,160,194,135,45]),n[t++]=1/0,Ie(e.seq,function(){W(O(e.checkweights,n[--t]*16,16))});var or=o();e.checkweightseq=O(or,8,or.length-8),n[t++]=1/0;for(var ds=e.dxw,lr=0,us=ds.length;lr<us;lr++)W(h(ds,lr));e.widths=o(),e.checksum=0;for(var Mr=0,es=e.widths.length-1;Mr<=es;Mr+=1)e.i=Mr,e.checksum=R(e.checksum+h(e.widths,e.i)*h(e.checkweightseq,e.i));for(e.checksum=R(e.checksum%211+(e.datalen-3)*211),e.i=0;;){if(e.checksum<=h(e.tab174,e.i)){W(O(e.tab174,e.i+1,7)),e.cte=n[--t],e.cto=n[--t],e.cmwe=n[--t],e.cmwo=n[--t],e.cele=n[--t],e.celo=n[--t],e.cgs=n[--t];break}e.i=e.i+8}n[t++]="cwo",n[t++]=~~(R(e.checksum-e.cgs)/e.cte),n[t++]=e.celo,n[t++]=e.cmwo,n[t++]=4,n[t++]=!0,e.getRSSwidths();var Yr=n[--t];e[n[--t]]=Yr,n[t++]="cwe",n[t++]=R(e.checksum-e.cgs)%e.cte,n[t++]=e.cele,n[t++]=e.cmwe,n[t++]=4,n[t++]=!1,e.getRSSwidths();var Mn=n[--t];e[n[--t]]=Mn,e.cw=o(8);for(var Hi=0;Hi<=3;Hi+=1)e.i=Hi,C(e.cw,e.i*2,h(e.cwo,e.i)),C(e.cw,e.i*2+1,h(e.cwe,e.i));var Rr=o(22);C(Rr,0,e.cw),H(Rr,1,e.dxw),e.dxw=O(Rr,0,e.datalen+1),e.datalen=e.dxw.length,e.rows=o(~~li(e.datalen/e.segments)),e.numrows=e.rows.length;for(var ta=0,Ia=e.numrows-1;ta<=Ia;ta+=1){e.r=ta,n[t++]=1/0,e.segments%4!=0&&e.r%2==1&&(n[t++]=0),n[t++]=1,n[t++]=1;for(var Ci=0,Aa=e.segments-1;Ci<=Aa;Ci+=1)e.pos=Ci+e.r*e.segments,e.pos<e.datalen&&(W(h(e.dxw,e.pos)),e.pos%2==0&&W(h(e.fxw,~~(e.pos/2))));var Na=Ur()+2;n[t++]=1,n[t++]=1,Rn(o(Na)),C(e.rows,e.r,n[--t]),t--}if(qe(e.format,"expandedstacked")){var na=h(e.rows,0);e.sbs=O(na,1,na.length-1),n[t++]=1/0,n[t++]=1;for(var $s=0,Qr=e.datalen-1;$s<=Qr;$s+=1)e.i=$s,W(h(e.dxw,e.i)),e.i%2==0&&W(h(e.fxw,~~(e.i/2)));n[t++]=1,n[t++]=1,e.sbs=o(),n[t++]=1/0;var Co=e.sbs;n[t++]=1/0;for(var ts=0,$r=~~((e.sbs.length+1)/2);ts<$r;ts++)n[t++]=e.height;var Ws=o();n[t++]=1/0;for(var pa=0,gs=~~((e.sbs.length+1)/2);pa<gs;pa++)n[t++]=0;var Ta=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=Co,n[t++]="bhs",n[t++]=Ws,n[t++]="bbs",n[t++]=Ta,n[t++]="borderleft",n[t++]=0,n[t++]="borderright",n[t++]=0,n[t++]="bordertop",n[t++]=0,n[t++]="borderbottom",n[t++]=0,n[t++]="opt",n[t++]=e.options;var vs=rt();n[t++]=vs,e.dontdraw||on()}else{e.seps=o(e.numrows);for(var xs=0,lo=e.numrows-1;xs<=lo;xs+=1){e.r=xs,e.row=h(e.rows,e.r),n[t++]=1/0;for(var Gt=0,qi=e.row.length-1;Gt<=qi;Gt+=2){e.i=Gt;for(var Zi=0,ia=h(e.row,e.i);Zi<ia;Zi++)n[t++]=0;if(e.i<e.row.length-1)for(var cr=0,ma=h(e.row,e.i+1);cr<ma;cr++)n[t++]=1}Rn(o(Ur())),e.row=n[--t],n[t-1]=1/0,Ie(e.row,function(){var Un=n[--t];n[t++]=1-Un}),e.sep=o(),n[t++]=1/0;for(var Ma=19,Ns=e.row.length-13;Ma<=Ns;Ma+=98)n[t++]=Ma;for(var Nt=68,$t=e.row.length-13;Nt<=$t;Nt+=98)n[t++]=Nt;e.finderpos=o();for(var Yn=e.finderpos,Kn=0,Jn=Yn.length;Kn<Jn;Kn++)for(var Si=h(Yn,Kn),Wn=Si,$i=Si+14;Wn<=$i;Wn+=1){if(e.i=Wn,h(e.row,e.i)==0)if(h(e.row,e.i-1)==1)n[t++]=1;else{var Ii=h(e.sep,e.i-1)==0?1:0;n[t++]=Ii}else n[t++]=0;C(e.sep,e.i,n[--t])}if(H(e.sep,0,o([0,0,0,0])),H(e.sep,e.row.length-4,o([0,0,0,0])),e.segments%4==0&&e.r%2==1)if(h(e.rows,e.r).length!=h(e.rows,0).length&&e.finderpos.length%2==1)n[t++]=1/0,n[t++]=0,W(e.row),e.row=o(),n[t++]=1/0,n[t++]=0,W(e.sep),e.sep=o();else{for(var fi=e.row.length-1;fi>=0;fi-=1)n[t++]=h(e.row,fi);Rn(e.row),t--;for(var Fi=e.sep.length-1;Fi>=0;Fi-=1)n[t++]=h(e.sep,Fi);Rn(e.sep),t--}C(e.rows,e.r,e.row),C(e.seps,e.r,e.sep)}e.pixx=h(e.rows,0).length,n[t++]=1/0;for(var Gi=0,mr=e.pixx;Gi<mr;Gi++)n[t++]=0;var Vi=o();H(Vi,0,h(e.rows,e.numrows-1)),C(e.rows,e.numrows-1,Vi),n[t++]=1/0;for(var Ni=0,Ti=e.pixx;Ni<Ti;Ni++)n[t++]=0;var ci=o();H(ci,0,h(e.seps,e.numrows-1)),C(e.seps,e.numrows-1,ci),n[t++]=1/0;for(var Mi=0,Ar=~~(e.pixx/2)+1;Mi<Ar;Mi++)n[t++]=0,n[t++]=1;e.sep=O(o(),0,e.pixx),H(e.sep,0,o([0,0,0,0])),H(e.sep,e.pixx-4,o([0,0,0,0])),n[t++]=1/0;for(var gr=0,ga=e.numrows-1;gr<=ga;gr+=1){e.r=gr,e.r!=0&&W(h(e.seps,e.r));for(var Sa=0,ns=e.barxmult;Sa<ns;Sa++)W(h(e.rows,e.r));e.r!=e.numrows-1&&(W(h(e.seps,e.r)),W(e.sep))}e.pixs=o();var Pa=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",~~(e.pixs.length/e.pixx)],["height",~~(e.pixs.length/e.pixx)/72],["width",e.pixx/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);n[t++]=Pa,e.dontdraw||Lt()}e=r}function uw(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"format","expandedstacked"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,dw();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function HN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.coupontextfont="OCR-B",e.coupontextsize=9,e.coupontextxoffset=null,e.coupontextyoffset=null,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]=e.barcode,n[t++]="ai",cs(),t--,e.vals=n[--t],e.ais=n[--t],e.ais.length!=1&&(n[t++]="bwipp.gs1northamericancouponBadAIStructure#11001",n[t++]="A GS1 North American Coupon should consist of a single AI (8110)",Z()),qe(h(e.ais,0),"8110")&&(n[t++]="bwipp.gs1northamericancouponBadAIStructure#11004",n[t++]="A GS1 North American Coupon should consist of a single AI (8110)",Z()),e.val=h(e.vals,0),e.vli=h(e.val,0)-48,(e.vli<0||e.vli>6)&&(n[t++]="bwipp.gs1northamericancouponBadVLI#11011",n[t++]="The AI (8110) data should start with a Company Prefix length indicator in the range 0 to 6",Z()),e.gcp=O(e.val,1,e.vli+6),e.cod=O(e.val,e.vli+7,6),e.coupontext=fe(e.gcp.length+7),H(e.coupontext,0,e.gcp),H(e.coupontext,e.gcp.length,"-"),H(e.coupontext,e.gcp.length+1,e.cod),C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,uw();var i=n[--t];if(e[n[--t]]=i,e.includetext){e.coupontextxoffset==null&&(e.coupontextxoffset=0),e.coupontextyoffset==null&&(e.coupontextyoffset=h(e.args,"height")*72+3);var a=h(e.args,"txt")!==void 0;a?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),H(e.newtxt,0,e.txt),C(e.newtxt,e.newtxt.length-1,o([e.coupontext,e.coupontextxoffset,e.coupontextyoffset,e.coupontextfont,e.coupontextsize])),C(e.args,"txt",e.newtxt)):C(e.args,"txt",o([o([e.coupontext,e.coupontextxoffset,e.coupontextyoffset,e.coupontextfont,e.coupontextsize])]))}C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function qN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.height=8*2.835/72,e.nwidth=.5*2.835,e.wwidth=1.5*2.835,e.swidth=1*2.835,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],(e.barcode.length<1||e.barcode.length>6)&&(n[t++]="bwipp.pharmacodeBadLength#11091",n[t++]="Pharmacode must be 1 to 6 digits",Z()),Ie(e.barcode,function(){var k=n[--t];(k<48||k>57)&&(n[t++]="bwipp.pharmacodeBadCharacter#11095",n[t++]="Pharmacode must contain only digits",Z())});var i=Ye(e.barcode);(i<3||i>131070)&&(n[t++]="bwipp.pharmacodeBadValue#11099",n[t++]="Pharmacode value must be between 3 and 131070",Z()),e.txt=o(e.barcode.length);for(var a=0,s=e.barcode.length-1;a<=s;a+=1)e.i=a,C(e.txt,e.i,o([O(e.barcode,e.i,1),0,0,"",0]));e.barcode=Nn(fe(17),Ye(e.barcode)+1,2),e.barcode=O(e.barcode,1,e.barcode.length-1),e.barlen=e.barcode.length,e.sbs=o(e.barlen*2);for(var l=0,c=e.barlen-1;l<=c;l+=1)e.i=l,e.enc=O(e.barcode,e.i,1),ce(e.enc,"0")?C(e.sbs,e.i*2,e.nwidth):C(e.sbs,e.i*2,e.wwidth),C(e.sbs,e.i*2+1,e.swidth);n[t++]=1/0;var d=e.sbs;n[t++]=1/0;for(var f=0,m=~~((e.sbs.length+1)/2);f<m;f++)n[t++]=e.height;var g=o();n[t++]=1/0;for(var v=0,y=~~((e.sbs.length+1)/2);v<y;v++)n[t++]=0;var A=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=d,n[t++]="bhs",n[t++]=g,n[t++]="bbs",n[t++]=A,n[t++]="txt",n[t++]=e.txt,n[t++]="textxalign",n[t++]="center",n[t++]="opt",n[t++]=e.options;var w=rt();n[t++]=w,e.dontdraw||on(),e=r}function JS(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.height=4,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],(e.barcode.length<1||e.barcode.length>8)&&(n[t++]="bwipp.pharmacode2BadLength#11180",n[t++]="Two-track Pharmacode must be 1 to 6 digits",Z()),Ie(e.barcode,function(){var k=n[--t];(k<48||k>57)&&(n[t++]="bwipp.pharmacode2badCharacter#11184",n[t++]="Two-track Pharmacode must contain only digits",Z())});var i=Ye(e.barcode);(i<4||i>64570080)&&(n[t++]="bwipp.pharmacode2badValue#11188",n[t++]="Two-track Pharmacode value must be between 4 and 64570080",Z()),e.txt=o(e.barcode.length);for(var a=0,s=e.barcode.length-1;a<=s;a+=1)e.i=a,C(e.txt,e.i,o([O(e.barcode,e.i,1),0,0,"",0]));for(e.encstr=fe(16),e.sbs=o(32),e.bar=1/25.4*e.height,e.spc=1/25.4*72,e.i=15,e.val=Ye(e.barcode);e.val!=0;){var l=e.val%3;e.val=~~(R(e.val-h(o([3,1,2]),l))/3),C(e.encstr,e.i,h(o([2,0,1]),l)),e.i=e.i-1}e.encstr=O(e.encstr,e.i+1,15-e.i),e.bhs=o(e.encstr.length),e.bbs=o(e.encstr.length);for(var c=0,d=e.encstr.length-1;c<=d;c+=1){e.i=c;var f=h(e.encstr,e.i);C(e.bhs,e.i,e.bar*h(o([1,1,2]),f)),C(e.bbs,e.i,h(o([0,e.bar,0]),f))}n[t++]=1/0;var m=e.bhs,g=e.bbs;n[t++]=1/0;for(var v=0,y=e.encstr.length*2;v<y;v++)n[t++]=e.spc;var A=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bhs",n[t++]=m,n[t++]="bbs",n[t++]=g,n[t++]="sbs",n[t++]=A,n[t++]="txt",n[t++]=e.txt,n[t++]="textxalign",n[t++]="center",n[t++]="textyoffset",n[t++]=4,n[t++]="opt",n[t++]=e.options;var w=rt();n[t++]=w,e.dontdraw||on(),e=r}function f2(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.version="industrial",n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.code2of5emptyData#11287",n[t++]="The data must not be empty",Z()),Ie(e.barcode,function(){var L=n[--t];(L<48||L>57)&&(n[t++]="bwipp.code2of5badCharacter#11295",n[t++]="Code 25 must contain only digits",Z())}),n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var i=n[--t];n[t++]=i-1}var a=n[--t];e[n[--t]]=a,e.checksum=0;for(var s=0,l=e.barlen-1;s<=l;s+=1){if(e.i=s,n[t++]="checksum",n[t++]=e.checksum,n[t++]=h(e.barcode,e.i)-48,R(e.barlen-e.i)%2!=0){var c=n[--t];n[t++]=c*3}var d=n[--t],f=n[--t];e[n[--t]]=R(f+d)}e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(h(e.barcode,e.barlen)!=e.checksum+48&&(n[t++]="bwipp.code2of5badCheckDigit#11309",n[t++]="Incorrect Code 25 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen),e.includecheck=!0);var m=new Map([["industrial",o(["1111313111","3111111131","1131111131","3131111111","1111311131","3111311111","1131311111","1111113131","3111113111","1131113111","313111","31113"])],["iata",o(["1111313111","3111111131","1131111131","3131111111","1111311131","3111311111","1131311111","1111113131","3111113111","1131113111","1111","311"])],["matrix",o(["113311","311131","131131","331111","113131","313111","133111","111331","311311","131311","311111","31111"])],["coop",o(["331111","111331","113131","113311","131131","131311","133111","311131","311311","313111","3131","133"])],["datalogic",o(["113311","311131","131131","331111","113131","313111","133111","111331","311311","131311","1111","311"])]]);e.versions=m;var g=h(e.versions,e.version)!==void 0;g||(n[t++]="bwipp.code2of5badVersion#11344",n[t++]="Unrecognised Code 25 version",Z()),e.encs=h(e.versions,e.version),e.cs=h(e.encs,0).length,n[t++]="cw",n[t++]=0,Ie(h(e.encs,0),function(){var L=n[--t],Q=n[--t];n[t++]=R(Q+(L-48))});var v=n[--t];e[n[--t]]=v,e.ss=h(e.encs,10).length,n[t++]="sw",n[t++]=0,Ie(h(e.encs,10),function(){var L=n[--t],Q=n[--t];n[t++]=R(Q+(L-48))});var y=n[--t];if(e[n[--t]]=y,e.es=h(e.encs,11).length,e.barchars="0123456789",n[t++]="sbs",n[t++]=e.barlen,e.includecheck){var A=n[--t];n[t++]=A+1}var w=fe(R(n[--t]*e.cs+e.ss+e.es));if(e[n[--t]]=w,n[t++]="txt",n[t++]=e.barlen,e.includecheck){var k=n[--t];n[t++]=k+1}var E=o(n[--t]);e[n[--t]]=E,H(e.sbs,0,h(e.encs,10));for(var I=0,T=e.barlen-1;I<=T;I+=1)e.i=I,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*e.cs+e.ss,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),R(e.i*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize]));e.includecheck?(H(e.sbs,R(e.barlen*e.cs+e.ss),h(e.encs,e.checksum)),H(e.sbs,R(e.barlen*e.cs+e.cs+e.ss),h(e.encs,11)),e.includecheckintext?C(e.txt,e.barlen,o([O(e.barchars,e.checksum,1),R(e.barlen*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen,o([" ",R(e.barlen*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize]))):H(e.sbs,R(e.barlen*e.cs+e.ss),h(e.encs,11)),n[t++]=1/0,n[t++]=1/0,Ie(e.sbs,function(){var L=n[--t];n[t++]=L-48});var N=o();n[t++]=1/0;for(var j=0,B=~~((e.sbs.length+1)/2);j<B;j++)n[t++]=e.height;var U=o();n[t++]=1/0;for(var F=0,P=~~((e.sbs.length+1)/2);F<P;F++)n[t++]=0;var z=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=N,n[t++]="bhs",n[t++]=U,n[t++]="bbs",n[t++]=z,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var V=rt();n[t++]=V,e.dontdraw||on(),e=r}function GN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"version","industrial"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,f2();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function VN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"version","iata"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,f2();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function YN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"version","matrix"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,f2();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function QN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"version","coop"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,f2();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function $N(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"version","datalogic"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,f2();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function WN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.code11emptyData#11692",n[t++]="The data must not be empty",Z()),e.encs=o(["111131","311131","131131","331111","113131","313111","133111","111331","311311","311111","113111","113311"]),e.barchars="0123456789-",e.charvals=new Map;for(var i=0;i<=10;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.code11badCharacter#11714",n[t++]="Code 11 must contain only digits and dashes",Z())}if(e.barlen=e.barcode.length,e.validatecheck){e.barlen==11&&(n[t++]="bwipp.code11badLength#11721",n[t++]="Code 11 cannot be 11 characters using check digits",Z());var c=e.barlen<=10?1:2;e.barlen=e.barlen-c}if(n[t++]="numchecks",e.includecheck||e.validatecheck){var d=e.barlen>=10?2:1;n[t++]=d}else n[t++]=0;var f=n[--t];e[n[--t]]=f,e.checksum1=0,e.checksum2=0;for(var m=0,g=e.barlen-1;m<=g;m+=1)e.i=m,e.indx=h(e.charvals,O(e.barcode,e.i,1)),e.checksum1=R(e.checksum1+((e.barlen-e.i-1)%10+1)*e.indx),e.checksum2=R(e.checksum2+((e.barlen-e.i)%9+1)*e.indx);if(e.checksum1=e.checksum1%11,e.checksum2=R(e.checksum2+e.checksum1)%11,e.validatecheck){if(e.numchecks==1){var v=e.checksum1;h(e.barcode,e.barlen)!=h(e.barchars,v)&&(n[t++]="bwipp.code11badCheckDigit#11739",n[t++]="Incorrect Code 11 check digit provided",Z())}else(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum1)||h(e.barcode,e.barlen+1)!=h(e.barchars,e.checksum2))&&(n[t++]="bwipp.code11badCheckDigits#11744",n[t++]="Incorrect Code 11 check digits provided",Z());e.barcode=O(e.barcode,0,e.barlen),e.includecheck=!0}e.sbs=fe(R(e.barlen+e.numchecks)*6+12),e.txt=o(R(e.barlen+e.numchecks)),H(e.sbs,0,h(e.encs,11)),e.xpos=8;for(var y=0,A=e.barlen-1;y<=A;y+=1){e.i=y,e.indx=h(e.charvals,O(e.barcode,e.i,1)),e.enc=h(e.encs,e.indx),H(e.sbs,e.i*6+6,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var w=0;w<=5;w+=1)e.xpos=R(h(e.enc,w)-48+e.xpos)}if(e.includecheck)if(e.barlen>=10){if(H(e.sbs,e.barlen*6+6,h(e.encs,e.checksum1)),H(e.sbs,e.barlen*6+12,h(e.encs,e.checksum2)),e.includecheckintext){C(e.txt,e.barlen,o([O(e.barchars,e.checksum1,1),e.xpos,e.textyoffset,e.textfont,e.textsize])),e.enc=h(e.encs,e.checksum1);for(var k=0;k<=5;k+=1)e.xpos=R(h(e.enc,k)-48+e.xpos);C(e.txt,e.barlen+1,o([O(e.barchars,e.checksum2,1),e.xpos,e.textyoffset,e.textfont,e.textsize]))}else C(e.txt,e.barlen,o(["",e.xpos,e.textyoffset,e.textfont,e.textsize])),C(e.txt,e.barlen+1,o(["",e.xpos,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,e.barlen*6+18,h(e.encs,11))}else H(e.sbs,e.barlen*6+6,h(e.encs,e.checksum1)),e.includecheckintext?C(e.txt,e.barlen,o([O(e.barchars,e.checksum1,1),e.xpos,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen,o(["",e.xpos,e.textyoffset,e.textfont,e.textsize])),H(e.sbs,e.barlen*6+12,h(e.encs,11));else H(e.sbs,e.barlen*6+6,h(e.encs,11));n[t++]=1/0,n[t++]=1/0;for(var E=e.sbs,I=0,T=E.length;I<T;I++)n[t++]=h(E,I)-48;var N=o();n[t++]=1/0;for(var j=0,B=~~((e.sbs.length+1)/2);j<B;j++)n[t++]=e.height;var U=o();n[t++]=1/0;for(var F=0,P=~~((e.sbs.length+1)/2);F<P;F++)n[t++]=0;var z=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=N,n[t++]="bhs",n[t++]=U,n[t++]="bbs",n[t++]=z,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var V=rt();n[t++]=V,e.dontdraw||on(),e=r}function XN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.includestartstop=!1,e.semi=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.bc412emptyData#11864",n[t++]="The data must not be empty",Z()),e.semi&&(e.includestartstop=!0),e.barchars="0R9GLVHA8EZ4NTS1J2Q6C7DYKBUIX3FWP5M",e.charvals=new Map;for(var i=0;i<=34;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.bc412badCharacter#11884",n[t++]="BC412 must contain only digits and capital letters except O",Z())}if(e.semi){e.validatecheck?(e.barcode.length<8||e.barcode.length>19)&&(n[t++]="bwipp.bc412semivalidateBadLength#11892",n[t++]="BC412 semi with check digit must be 8 to 19 characters long",Z()):(e.barcode.length<7||e.barcode.length>18)&&(n[t++]="bwipp.bc412semiBadLength#11896",n[t++]="BC412 semi must be 7 to 18 characters long",Z()),e.barlen=e.barcode.length,e.validatecheck||(e.barlen=e.barlen+1,e.sbarcode=fe(e.barlen),C(e.sbarcode,0,h(e.barcode,0)),C(e.sbarcode,1,48),H(e.sbarcode,2,O(e.barcode,1,e.barlen-2)),e.barcode=e.sbarcode),e.sumodd=0,e.sumeven=0;for(var c=0,d=e.barlen-1;c<=d;c+=1)e.i=c,n[t++]=h(e.charvals,O(e.barcode,e.i,1)),e.i%2==0?e.sumodd=R(n[--t]+e.sumodd):e.sumeven=R(n[--t]+e.sumeven);e.checksum=R(e.sumodd%35+e.sumeven%35*2)%35,e.validatecheck?e.checksum!=0&&(n[t++]="bwipp.bc412semiBadCheckDigit#11922",n[t++]="Incorrect BC412 semi check digit provided",Z()):(e.checksum=e.checksum*17%35,C(e.barcode,1,h(e.barchars,e.checksum)))}else{if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var f=n[--t];n[t++]=f-1}var m=n[--t];e[n[--t]]=m,e.checksum=0;for(var g=0,v=e.barlen-1;g<=v;g+=1)e.checksum=R(h(e.charvals,O(e.barcode,g,1))+e.checksum);e.checksum=e.checksum%35,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.bc412badCheckDigit#11939",n[t++]="Incorrect BC412 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen),e.includecheck=!0)}e.encs=o(["11111115","13111212","11131113","12111213","12121311","13131111","12111312","11131212","11121411","11151111","15111111","11111511","12131211","13121112","13111311","11111214","12121113","11111313","13111113","11121213","11141112","11121312","11141211","14121111","12121212","11131311","13121211","12111411","14111211","11111412","12111114","14111112","12141111","11121114","12131112","12","111"]),e.sbs=fe((e.barlen+1)*8+5),e.includecheck?e.txt=o(e.barlen+1):e.txt=o(e.barlen),e.includestartstop?(H(e.sbs,0,h(e.encs,35)),e.pos=2,e.txtpos=3):(e.pos=0,e.txtpos=0);for(var y=0,A=e.barlen-1;y<=A;y+=1)e.i=y,e.indx=h(e.charvals,O(e.barcode,e.i,1)),H(e.sbs,e.pos,h(e.encs,e.indx)),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])),e.pos=e.pos+8;e.includecheck&&(H(e.sbs,e.pos,h(e.encs,e.checksum)),e.includecheckintext?C(e.txt,e.barlen,o([O(e.barchars,e.checksum,1),e.barlen*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen,o(["",e.barlen*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])),e.pos=e.pos+8),e.includestartstop&&(H(e.sbs,e.pos,h(e.encs,36)),e.pos=e.pos+3),e.sbs=O(e.sbs,0,e.pos),n[t++]=1/0,n[t++]=1/0;for(var w=e.sbs,k=0,E=w.length;k<E;k++)n[t++]=h(w,k)-48;var I=o();n[t++]=1/0;for(var T=0,N=~~((e.sbs.length+1)/2);T<N;T++)n[t++]=e.height;var j=o();n[t++]=1/0;for(var B=0,U=~~((e.sbs.length+1)/2);B<U;B++)n[t++]=0;var F=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=I,n[t++]="bhs",n[t++]=j,n[t++]="bbs",n[t++]=F,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var P=rt();n[t++]=P,e.dontdraw||on(),e=r}function KN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.altstartstop=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],(e.barcode.length<2||e.barcode.length<3&&e.validatecheck)&&(n[t++]="bwipp.rationalizedCodabarBadLength#12067",n[t++]="Codabar must be at least 2 characters in length excluding any check digit",Z()),e.encs=o(["11111331","11113311","11131131","33111111","11311311","31111311","13111131","13113111","13311111","31131111","11133111","11331111","31113131","31311131","31313111","11313131","11331311","13131131","11131331","11133311"]),e.barcharsnormal="0123456789-$:/.+ABCD",e.barcharsalt="0123456789-$:/.+TN*E";var i=e.altstartstop?e.barcharsalt:e.barcharsnormal;e.barchars=i,e.charvals=new Map;for(var a=0;a<=19;a+=1)C(e.charvals,O(e.barchars,a,1),a);e.bodyvals=new Map;for(var s=0;s<=15;s+=1)C(e.bodyvals,O(e.barchars,s,1),s);e.ssvals=new Map;for(var l=16;l<=19;l+=1)C(e.ssvals,O(e.barchars,l,1),l);var c=h(e.ssvals,O(e.barcode,0,1))!==void 0,d=h(e.ssvals,O(e.barcode,e.barcode.length-1,1))!==void 0;(!c||!d)&&(e.altstartstop?(n[t++]="bwipp.rationalizedCodabarBadAltStartStop#12099",n[t++]="Codabar start and stop characters must be one of E N T or *",Z()):(n[t++]="bwipp.rationalizedCodabarBadStartStop#12101",n[t++]="Codabar start and stop characters must be one of A B C or D",Z()));for(var f=1,m=e.barcode.length-2;f<=m;f+=1){var g=h(e.bodyvals,O(e.barcode,f,1))!==void 0;g||(n[t++]="bwipp.rationalizedCodabarBadCharacter#12106",n[t++]="Codabar body must contain only digits and symbols - $ : / . +",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var v=n[--t];n[t++]=v-1}var y=n[--t];e[n[--t]]=y,e.checksum=0;for(var A=0,w=e.barlen-2;A<=w;A+=1)e.checksum=R(h(e.charvals,O(e.barcode,A,1))+e.checksum);var k=O(e.barcode,e.barcode.length-1,1);if(e.checksum=R(h(e.charvals,k)+e.checksum),e.checksum=(16-e.checksum%16)%16,e.validatecheck){h(e.barcode,e.barlen-1)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.rationalizedCodabarBadCheckDigit#12122",n[t++]="Incorrect Codabar check digit provided",Z());var E=fe(e.barlen);H(E,0,O(e.barcode,0,e.barlen-1)),H(E,e.barlen-1,O(e.barcode,e.barlen,1)),e.barcode=E,e.includecheck=!0}if(n[t++]="sbs",n[t++]=e.barlen,e.includecheck){var I=n[--t];n[t++]=I+1}var T=fe(n[--t]*8);if(e[n[--t]]=T,n[t++]="txt",n[t++]=e.barlen,e.includecheck){var N=n[--t];n[t++]=N+1}var j=o(n[--t]);e[n[--t]]=j,e.xpos=0;for(var B=0,U=e.barlen-2;B<=U;B+=1){e.i=B,e.indx=h(e.charvals,O(e.barcode,e.i,1)),e.enc=h(e.encs,e.indx),H(e.sbs,e.i*8,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var F=0;F<=7;F+=1)e.xpos=R(h(e.enc,F)-48+e.xpos)}if(e.includecheck){H(e.sbs,e.barlen*8-8,h(e.encs,e.checksum)),e.includecheckintext?C(e.txt,e.barlen-1,o([O(e.barchars,e.checksum,1),e.xpos,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen-1,o([" ",e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var P=0;P<=7;P+=1)e.xpos=R(h(h(e.encs,e.checksum),P)-48+e.xpos);e.indx=h(e.charvals,O(e.barcode,e.barlen-1,1)),e.enc=h(e.encs,e.indx),H(e.sbs,e.barlen*8,e.enc),C(e.txt,e.barlen,o([O(e.barcode,e.barlen-1,1),e.xpos,e.textyoffset,e.textfont,e.textsize]))}else e.indx=h(e.charvals,O(e.barcode,e.barlen-1,1)),e.enc=h(e.encs,e.indx),H(e.sbs,e.barlen*8-8,e.enc),C(e.txt,e.barlen-1,o([O(e.barcode,e.barlen-1,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));n[t++]=1/0,n[t++]=1/0,Ie(e.sbs,function(){var K=n[--t];n[t++]=K-48});var z=o();n[t++]=1/0;for(var V=0,L=~~((e.sbs.length+1)/2);V<L;V++)n[t++]=e.height;var Q=o();n[t++]=1/0;for(var q=0,ee=~~((e.sbs.length+1)/2);q<ee;q++)n[t++]=0;var X=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=z,n[t++]="bhs",n[t++]=Q,n[t++]="bbs",n[t++]=X,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var ae=rt();n[t++]=ae,e.dontdraw||on(),e=r}function JN(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.height=.15,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barlen=e.barcode.length,Ie(e.barcode,function(){var bt=n[--t];(bt<48||bt>57)&&(n[t++]="bwipp.onecodeBadCharacter#12232",n[t++]="The data must contain only digits",Z())}),e.barlen!=20&&e.barlen!=25&&e.barlen!=29&&e.barlen!=31&&(n[t++]="bwipp.onecodeInvalidLength#12237",n[t++]="The data must be 20, 25, 29 or 31 digits",Z()),n[t++]=1/0;var i=ce(O(e.barcode,5,1),"9")?14:11;n[t++]=2,n[t++]=2,n[t++]=5,n[t++]=5,n[t++]=i,n[t++]=i,n[t++]=20,n[t++]=20,n[t++]=25,n[t++]=25,n[t++]=29,n[t++]=29,e.txtdict=rt(),e.txt=o(e.barlen+6),e.spacecnt=0;for(var a=0,s=e.barlen-1;a<=s;a+=1){e.i=a;var l=h(e.txtdict,e.i)!==void 0;l&&(C(e.txt,e.i+e.spacecnt,o([" ",0,0,"",0])),e.spacecnt=e.spacecnt+1),C(e.txt,e.i+e.spacecnt,o([O(e.barcode,e.i,1),0,0,"",0]))}e.txt=O(e.txt,0,e.barcode.length+e.spacecnt),e.normalize=function(){e.base=n[--t],e.num=n[--t];for(var bt=e.num.length-1;bt>=1;bt-=1){e.i=bt;var kt=e.num,Pt=e.i;C(kt,Pt-1,R(h(kt,Pt-1)+~~(h(e.num,e.i)/e.base))),C(e.num,e.i,h(e.num,e.i)%e.base)}for(;!oo(h(e.num,0),e.base);)n[t++]=1/0,n[t++]=0,W(e.num),e.num=o(),C(e.num,0,R(h(e.num,0)+~~(h(e.num,1)/e.base))),C(e.num,1,h(e.num,1)%e.base);n[t++]=1/0,e.i=!0;for(var Rt=e.num,Wt=0,zt=Rt.length;Wt<zt;Wt++){var Ct=h(Rt,Wt);n[t++]=Ct,Ct==0&&e.i?t--:e.i=!1}e.num=o(),e.num.length==0&&(e.num=o([0])),n[t++]=e.num},e.bigadd=function(){var bt=n[--t],kt=n[--t];if(e.offset=Fu(bt.length-kt.length),bt.length<kt.length){var Pt=bt;bt=kt,kt=Pt}e.a=bt,e.b=kt;for(var Rt=0,Wt=e.b.length-1;Rt<=Wt;Rt+=1){var zt=e.a,Ct=e.offset;C(zt,Rt+Ct,R(h(zt,Rt+Ct)+h(e.b,Rt)))}n[t++]=e.a};var c=new Map([[20,o([0])],[25,o([1])],[29,o([1,0,0,0,0,1])],[31,o([1,0,0,0,1,0,0,0,0,1])]]);e.startvals=c,n[t++]="binval",n[t++]=h(e.startvals,e.barlen),n[t++]=1/0;for(var d=O(e.barcode,20,e.barlen-20),f=0,m=d.length;f<m;f++)n[t++]=h(d,f)-48;var g=o();n[t++]=g,e.bigadd();var v=n[--t];e[n[--t]]=v,n[t++]=1/0,W(e.binval),n[t++]=h(e.barcode,0)-48,e.binval=o(),n[t++]=1/0;for(var y=e.binval,A=0,w=y.length;A<w;A++)n[t++]=h(y,A)*5;var k=o();n[t++]="binval",n[t++]=k,n[t++]=o([h(e.barcode,1)-48]),e.bigadd(),n[t++]=10,e.normalize();var E=n[--t];e[n[--t]]=E,n[t++]=1/0,W(e.binval);for(var I=O(e.barcode,2,18),T=0,N=I.length;T<N;T++)n[t++]=h(I,T)-48;e.binval=o(),e.bytes=o(13);var j=e.binval;e.bintmp=Jh(o(j.length),j);for(var B=12;B>=0;B-=1){e.i=B;for(var U=0,F=e.bintmp.length-2;U<=F;U+=1){e.j=U;var P=e.bintmp,z=e.j;C(P,z+1,R(h(P,z+1)+h(e.bintmp,e.j)%256*10)),C(e.bintmp,e.j,~~(h(e.bintmp,e.j)/256))}C(e.bytes,e.i,h(e.bintmp,e.bintmp.length-1)%256);var V=e.bintmp,L=e.bintmp;C(V,L.length-1,~~(h(V,L.length-1)/256))}e.fcs=2047,e.dat=h(e.bytes,0)<<5;for(var Q=0;Q<6;Q++)((e.fcs^e.dat)&1024)!=0?e.fcs=e.fcs<<1^3893:e.fcs=e.fcs<<1,e.fcs=e.fcs&2047,e.dat=e.dat<<1;for(var q=1;q<=12;q+=1){e.dat=h(e.bytes,q)<<3;for(var ee=0;ee<8;ee++)((e.fcs^e.dat)&1024)!=0?e.fcs=e.fcs<<1^3893:e.fcs=e.fcs<<1,e.fcs=e.fcs&2047,e.dat=e.dat<<1}e.codewords=o(10);for(var X=9;X>=0;X-=1){e.i=X;var ae=e.i==9?636:1365;e.b=ae;for(var K=0,ie=e.binval.length-2;K<=ie;K+=1){e.j=K;var ne=e.binval,J=e.j;C(ne,J+1,R(h(ne,J+1)+h(e.binval,e.j)%e.b*10)),C(e.binval,e.j,~~(h(e.binval,e.j)/e.b))}C(e.codewords,e.i,h(e.binval,e.binval.length-1)%e.b);var te=e.binval,$=e.binval;C(te,$.length-1,~~(h(te,$.length-1)/e.b))}C(e.codewords,9,h(e.codewords,9)*2),(e.fcs&1024)!=0&&C(e.codewords,0,h(e.codewords,0)+659),e.tab513=o([31,7936,47,7808,55,7552,59,7040,61,6016,62,3968,79,7744,87,7488,91,6976,93,5952,94,3904,103,7360,107,6848,109,5824,110,3776,115,6592,117,5568,118,3520,121,5056,122,3008,124,1984,143,7712,151,7456,155,6944,157,5920,158,3872,167,7328,171,6816,173,5792,174,3744,179,6560,181,5536,182,3488,185,5024,186,2976,188,1952,199,7264,203,6752,205,5728,206,3680,211,6496,213,5472,214,3424,217,4960,218,2912,220,1888,227,6368,229,5344,230,3296,233,4832,234,2784,236,1760,241,4576,242,2528,244,1504,248,992,271,7696,279,7440,283,6928,285,5904,286,3856,295,7312,299,6800,301,5776,302,3728,307,6544,309,5520,310,3472,313,5008,314,2960,316,1936,327,7248,331,6736,333,5712,334,3664,339,6480,341,5456,342,3408,345,4944,346,2896,348,1872,355,6352,357,5328,358,3280,361,4816,362,2768,364,1744,369,4560,370,2512,372,1488,376,976,391,7216,395,6704,397,5680,398,3632,403,6448,405,5424,406,3376,409,4912,410,2864,412,1840,419,6320,421,5296,422,3248,425,4784,426,2736,428,1712,433,4528,434,2480,436,1456,440,944,451,6256,453,5232,454,3184,457,4720,458,2672,460,1648,465,4464,466,2416,468,1392,472,880,481,4336,482,2288,484,1264,488,752,527,7688,535,7432,539,6920,541,5896,542,3848,551,7304,555,6792,557,5768,558,3720,563,6536,565,5512,566,3464,569,5e3,570,2952,572,1928,583,7240,587,6728,589,5704,590,3656,595,6472,597,5448,598,3400,601,4936,602,2888,604,1864,611,6344,613,5320,614,3272,617,4808,618,2760,620,1736,625,4552,626,2504,628,1480,632,968,647,7208,651,6696,653,5672,654,3624,659,6440,661,5416,662,3368,665,4904,666,2856,668,1832,675,6312,677,5288,678,3240,681,4776,682,2728,684,1704,689,4520,690,2472,692,1448,696,936,707,6248,709,5224,710,3176,713,4712,714,2664,716,1640,721,4456,722,2408,724,1384,728,872,737,4328,738,2280,740,1256,775,7192,779,6680,781,5656,782,3608,787,6424,789,5400,790,3352,793,4888,794,2840,796,1816,803,6296,805,5272,806,3224,809,4760,810,2712,812,1688,817,4504,818,2456,820,1432,824,920,835,6232,837,5208,838,3160,841,4696,842,2648,844,1624,849,4440,850,2392,852,1368,865,4312,866,2264,868,1240,899,6200,901,5176,902,3128,905,4664,906,2616,908,1592,913,4408,914,2360,916,1336,929,4280,930,2232,932,1208,961,4216,962,2168,964,1144,1039,7684,1047,7428,1051,6916,1053,5892,1054,3844,1063,7300,1067,6788,1069,5764,1070,3716,1075,6532,1077,5508,1078,3460,1081,4996,1082,2948,1084,1924,1095,7236,1099,6724,1101,5700,1102,3652,1107,6468,1109,5444,1110,3396,1113,4932,1114,2884,1116,1860,1123,6340,1125,5316,1126,3268,1129,4804,1130,2756,1132,1732,1137,4548,1138,2500,1140,1476,1159,7204,1163,6692,1165,5668,1166,3620,1171,6436,1173,5412,1174,3364,1177,4900,1178,2852,1180,1828,1187,6308,1189,5284,1190,3236,1193,4772,1194,2724,1196,1700,1201,4516,1202,2468,1204,1444,1219,6244,1221,5220,1222,3172,1225,4708,1226,2660,1228,1636,1233,4452,1234,2404,1236,1380,1249,4324,1250,2276,1287,7188,1291,6676,1293,5652,1294,3604,1299,6420,1301,5396,1302,3348,1305,4884,1306,2836,1308,1812,1315,6292,1317,5268,1318,3220,1321,4756,1322,2708,1324,1684,1329,4500,1330,2452,1332,1428,1347,6228,1349,5204,1350,3156,1353,4692,1354,2644,1356,1620,1361,4436,1362,2388,1377,4308,1378,2260,1411,6196,1413,5172,1414,3124,1417,4660,1418,2612,1420,1588,1425,4404,1426,2356,1441,4276,1442,2228,1473,4212,1474,2164,1543,7180,1547,6668,1549,5644,1550,3596,1555,6412,1557,5388,1558,3340,1561,4876,1562,2828,1564,1804,1571,6284,1573,5260,1574,3212,1577,4748,1578,2700,1580,1676,1585,4492,1586,2444,1603,6220,1605,5196,1606,3148,1609,4684,1610,2636,1617,4428,1618,2380,1633,4300,1634,2252,1667,6188,1669,5164,1670,3116,1673,4652,1674,2604,1681,4396,1682,2348,1697,4268,1698,2220,1729,4204,1730,2156,1795,6172,1797,5148,1798,3100,1801,4636,1802,2588,1809,4380,1810,2332,1825,4252,1826,2204,1857,4188,1858,2140,1921,4156,1922,2108,2063,7682,2071,7426,2075,6914,2077,5890,2078,3842,2087,7298,2091,6786,2093,5762,2094,3714,2099,6530,2101,5506,2102,3458,2105,4994,2106,2946,2119,7234,2123,6722,2125,5698,2126,3650,2131,6466,2133,5442,2134,3394,2137,4930,2138,2882,2147,6338,2149,5314,2150,3266,2153,4802,2154,2754,2161,4546,2162,2498,2183,7202,2187,6690,2189,5666,2190,3618,2195,6434,2197,5410,2198,3362,2201,4898,2202,2850,2211,6306,2213,5282,2214,3234,2217,4770,2218,2722,2225,4514,2226,2466,2243,6242,2245,5218,2246,3170,2249,4706,2250,2658,2257,4450,2258,2402,2273,4322,2311,7186,2315,6674,2317,5650,2318,3602,2323,6418,2325,5394,2326,3346,2329,4882,2330,2834,2339,6290,2341,5266,2342,3218,2345,4754,2346,2706,2353,4498,2354,2450,2371,6226,2373,5202,2374,3154,2377,4690,2378,2642,2385,4434,2401,4306,2435,6194,2437,5170,2438,3122,2441,4658,2442,2610,2449,4402,2465,4274,2497,4210,2567,7178,2571,6666,2573,5642,2574,3594,2579,6410,2581,5386,2582,3338,2585,4874,2586,2826,2595,6282,2597,5258,2598,3210,2601,4746,2602,2698,2609,4490,2627,6218,2629,5194,2630,3146,2633,4682,2641,4426,2657,4298,2691,6186,2693,5162,2694,3114,2697,4650,2705,4394,2721,4266,2753,4202,2819,6170,2821,5146,2822,3098,2825,4634,2833,4378,2849,4250,2881,4186,2945,4154,3079,7174,3083,6662,3085,5638,3086,3590,3091,6406,3093,5382,3094,3334,3097,4870,3107,6278,3109,5254,3110,3206,3113,4742,3121,4486,3139,6214,3141,5190,3145,4678,3153,4422,3169,4294,3203,6182,3205,5158,3209,4646,3217,4390,3233,4262,3265,4198,3331,6166,3333,5142,3337,4630,3345,4374,3361,4246,3393,4182,3457,4150,3587,6158,3589,5134,3593,4622,3601,4366,3617,4238,3649,4174,3713,4142,3841,4126,4111,7681,4119,7425,4123,6913,4125,5889,4135,7297,4139,6785,4141,5761,4147,6529,4149,5505,4153,4993,4167,7233,4171,6721,4173,5697,4179,6465,4181,5441,4185,4929,4195,6337,4197,5313,4201,4801,4209,4545,4231,7201,4235,6689,4237,5665,4243,6433,4245,5409,4249,4897,4259,6305,4261,5281,4265,4769,4273,4513,4291,6241,4293,5217,4297,4705,4305,4449,4359,7185,4363,6673,4365,5649,4371,6417,4373,5393,4377,4881,4387,6289,4389,5265,4393,4753,4401,4497,4419,6225,4421,5201,4425,4689,4483,6193,4485,5169,4489,4657,4615,7177,4619,6665,4621,5641,4627,6409,4629,5385,4633,4873,4643,6281,4645,5257,4649,4745,4675,6217,4677,5193,4739,6185,4741,5161,4867,6169,4869,5145,5127,7173,5131,6661,5133,5637,5139,6405,5141,5381,5155,6277,5157,5253,5187,6213,5251,6181,5379,6165,5635,6157,6151,7171,6155,6659,6163,6403,6179,6275,6211,5189,4681,4433,4321,3142,2634,2386,2274,1612,1364,1252,856,744,496]),e.tab213=o([3,6144,5,5120,6,3072,9,4608,10,2560,12,1536,17,4352,18,2304,20,1280,24,768,33,4224,34,2176,36,1152,40,640,48,384,65,4160,66,2112,68,1088,72,576,80,320,96,192,129,4128,130,2080,132,1056,136,544,144,288,257,4112,258,2064,260,1040,264,528,513,4104,514,2056,516,1032,1025,4100,1026,2052,2049,4098,4097,2050,1028,520,272,160]),e.chars=o(10);for(var oe=0;oe<=9;oe+=1){e.i=oe;var we=h(e.codewords,e.i);if(n[t++]=we,we<=1286){var be=h(e.tab513,n[--t]);n[t++]=be}else{var Te=h(e.tab213,n[--t]-1287);n[t++]=Te}n[t++]=e.chars,n[t++]=e.i;var ye=n[t-3],tt=n[t-1];C(n[t-2],tt,ye),t-=3}for(var Qe=9;Qe>=0;Qe-=1)e.i=Qe,(~~El(2,e.i)&e.fcs)!=0&&C(e.chars,e.i,h(e.chars,e.i)^8191);e.barmap=o([7,2,4,3,1,10,0,0,9,12,2,8,5,5,6,11,8,9,3,1,0,1,5,12,2,5,1,8,4,4,9,11,6,3,8,10,3,9,7,6,5,11,1,4,8,5,2,12,9,10,0,2,7,1,6,7,3,6,4,9,0,3,8,6,6,4,2,7,1,1,9,9,7,10,5,2,4,0,3,8,6,2,0,4,8,11,1,0,9,8,3,12,2,6,7,7,5,1,4,10,1,12,6,9,7,3,8,0,5,8,9,7,4,6,2,10,3,4,0,5,8,4,5,7,7,11,1,9,6,0,9,6,0,6,4,8,2,1,3,2,5,9,8,12,4,11,6,1,9,5,7,4,3,3,1,2,0,7,2,0,1,3,4,1,6,10,3,5,8,7,9,4,2,11,5,6,0,8,7,12,4,2,8,1,5,10,3,0,9,3,0,9,6,5,2,4,7,8,1,7,5,0,4,5,2,3,0,10,6,12,9,2,3,11,1,6,8,8,7,9,5,4,0,11,1,5,2,2,9,1,4,12,8,3,6,6,7,0,3,7,4,7,7,5,0,12,1,11,2,9,9,0,6,8,5,3,3,10,8,2]),e.bbs=o(65),e.bhs=o(65);for(var Ge=0;Ge<=64;Ge+=1)e.i=Ge,e.dec=(h(e.chars,h(e.barmap,e.i*4))&~~El(2,h(e.barmap,e.i*4+1)))!=0,e.asc=(h(e.chars,h(e.barmap,e.i*4+2))&~~El(2,h(e.barmap,e.i*4+3)))!=0,!e.dec&&!e.asc&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,2*e.height/8)),!e.dec&&e.asc&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,5*e.height/8)),e.dec&&!e.asc&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,5*e.height/8)),e.dec&&e.asc&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,8*e.height/8));n[t++]=1/0;var Xe=e.bbs,Je=e.bhs;n[t++]=1/0;for(var dt=0,vt=e.bhs.length-1;dt<vt;dt++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var _t=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bbs",n[t++]=Xe,n[t++]="bhs",n[t++]=Je,n[t++]="sbs",n[t++]=_t,n[t++]="txt",n[t++]=e.txt,n[t++]="textxalign",n[t++]="left",n[t++]="textfont",n[t++]="OCR-B",n[t++]="textyoffset",n[t++]=1,n[t++]="textxoffset",n[t++]=-.3,n[t++]="opt",n[t++]=e.options;var xt=rt();n[t++]=xt,e.dontdraw||on(),e=r}function ZN(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.125,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var i=n[--t];n[t++]=i-1}var a=n[--t];e[n[--t]]=a,e.barlen!=5&&e.barlen!=9&&e.barlen!=11&&(n[t++]="bwipp.postnetBadLength#12597",n[t++]="USPS POSTNET must be 5, 9 or 11 digits excluding check digit",Z()),Ie(e.barcode,function(){var P=n[--t];(P<48||P>57)&&(n[t++]="bwipp.postnetBadCharacter#12601",n[t++]="USPS POSTNET must contain only digits",Z())}),e.barchars="0123456789",e.encs=o(["55222","22255","22525","22552","25225","25252","25522","52225","52252","52522","5","5"]),e.checksum=0;for(var s=0,l=e.barlen-1;s<=l;s+=1)e.i=s,e.checksum=R(e.checksum+(h(e.barcode,e.i)-48));e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.postnetBadCheckDigit#12625",n[t++]="Incorrect USPS POSTNET check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen)),e.bhs=o(e.barlen*5+7),e.txt=o(e.barlen+1),e.enc=h(e.encs,10),e.heights=o(e.enc.length);for(var c=0,d=e.enc.length-1;c<=d;c+=1)e.j=c,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,0,e.heights);for(var f=0,m=e.barlen-1;f<=m;f+=1){e.i=f,e.enc=h(e.encs,h(e.barcode,e.i)-48),e.heights=o(e.enc.length);for(var g=0,v=e.enc.length-1;g<=v;g+=1)e.j=g,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,e.i*5+1,e.heights),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i*5+1)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.enc=h(e.encs,e.checksum),e.heights=o(e.enc.length);for(var y=0,A=e.enc.length-1;y<=A;y+=1)e.j=y,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,e.barlen*5+1,e.heights),e.includecheckintext?C(e.txt,e.barlen,o([O(e.barchars,e.checksum,1),(e.barlen*5+1)*3.312,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen,o([" ",(e.barlen*5+1)*72/25,e.textyoffset,e.textfont,e.textsize])),e.enc=h(e.encs,11),e.heights=o(e.enc.length);for(var w=0,k=e.enc.length-1;w<=k;w+=1)e.j=w,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,e.barlen*5+6,e.heights),n[t++]=1/0;var E=e.bhs;n[t++]=1/0;for(var I=0,T=e.bhs.length;I<T;I++)n[t++]=0;var N=o();n[t++]=1/0;for(var j=0,B=e.bhs.length-1;j<B;j++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var U=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bhs",n[t++]=E,n[t++]="bbs",n[t++]=N,n[t++]="sbs",n[t++]=U,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var F=rt();n[t++]=F,e.dontdraw||on(),e=r}function eT(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.125,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var i=n[--t];n[t++]=i-1}var a=n[--t];e[n[--t]]=a,e.barlen!=11&&e.barlen!=13&&(n[t++]="bwipp.planetBadLength#12745",n[t++]="USPS PLANET must be 11 or 13 digits excluding check digit",Z()),Ie(e.barcode,function(){var P=n[--t];(P<48||P>57)&&(n[t++]="bwipp.planetBadCharacter#12749",n[t++]="USPS PLANET must contain only digits",Z())}),e.barchars="0123456789",e.encs=o(["22555","55522","55252","55225","52552","52525","52255","25552","25525","25255","5","5"]),e.checksum=0;for(var s=0,l=e.barlen-1;s<=l;s+=1)e.i=s,e.checksum=R(e.checksum+(h(e.barcode,e.i)-48));e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.planetBadCheckDigit#12774",n[t++]="Incorrect USPS PLANET check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen)),e.bhs=o(e.barlen*5+7),e.txt=o(e.barlen+1),e.enc=h(e.encs,10),e.heights=o(e.enc.length);for(var c=0,d=e.enc.length-1;c<=d;c+=1)e.j=c,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,0,e.heights);for(var f=0,m=e.barlen-1;f<=m;f+=1){e.i=f,e.enc=h(e.encs,h(e.barcode,e.i)-48),e.heights=o(e.enc.length);for(var g=0,v=e.enc.length-1;g<=v;g+=1)e.j=g,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,e.i*5+1,e.heights),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i*5+1)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.enc=h(e.encs,e.checksum),e.heights=o(e.enc.length);for(var y=0,A=e.enc.length-1;y<=A;y+=1)e.j=y,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,e.barlen*5+1,e.heights),e.includecheckintext?C(e.txt,e.barlen,o([O(e.barchars,e.checksum,1),(e.barlen*5+1)*3.312,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen,o([" ",(e.barlen*5+1)*72/25,e.textyoffset,e.textfont,e.textsize])),e.enc=h(e.encs,11),e.heights=o(e.enc.length);for(var w=0,k=e.enc.length-1;w<=k;w+=1)e.j=w,C(e.heights,e.j,Ye(O(e.enc,e.j,1))*e.height/5);H(e.bhs,e.barlen*5+6,e.heights),n[t++]=1/0;var E=e.bhs;n[t++]=1/0;for(var I=0,T=e.bhs.length;I<T;I++)n[t++]=0;var N=o();n[t++]=1/0;for(var j=0,B=e.bhs.length-1;j<B;j++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var U=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bhs",n[t++]=E,n[t++]="bbs",n[t++]=N,n[t++]="sbs",n[t++]=U,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var F=rt();n[t++]=F,e.dontdraw||on(),e=r}function tT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.royalmailEmptyData#12889",n[t++]="The data must not be empty",Z()),e.barchars="ZUVWXY501234B6789AHCDEFGNIJKLMTOPQRS",e.charvals=new Map;for(var i=0;i<=35;i+=1)C(e.charvals,O(e.barchars,i,1),i);e.encs=o(["3300","2211","2301","2310","3201","3210","1122","0033","0123","0132","1023","1032","1302","0213","0303","0312","1203","1212","1320","0231","0321","0330","1221","1230","3102","2013","2103","2112","3003","3012","3120","2031","2121","2130","3021","3030","2","3"]);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.royalmailBadCharacter#12915",n[t++]="RM4SCC must contain only capital letters and digits",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksumrow=0,e.checksumcol=0;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.i=f,e.indx=h(e.charvals,O(e.barcode,e.i,1)),e.checksumrow=e.checksumrow+~~(e.indx/6),e.checksumcol=R(e.checksumcol+e.indx%6);e.checksum=R(e.checksumrow%6*6+e.checksumcol%6),e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.royalmailBadCheckDigit#12932",n[t++]="Incorrect RM4SCC check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen)),e.encstr=fe(e.barlen*4+6),e.txt=o(e.barlen+1),H(e.encstr,0,h(e.encs,36));for(var g=0,v=e.barlen-1;g<=v;g+=1)e.i=g,e.indx=h(e.charvals,O(e.barcode,e.i,1)),H(e.encstr,e.i*4+1,h(e.encs,e.indx)),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.i*4+1)*3.312,e.textyoffset,e.textfont,e.textsize]));H(e.encstr,e.barlen*4+1,h(e.encs,e.checksum)),e.includecheckintext?C(e.txt,e.barlen,o([O(e.barchars,e.checksum,1),(e.barlen*4+1)*3.312,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.barlen,o([" ",(e.barlen*4+1)*3.312,e.textyoffset,e.textfont,e.textsize])),H(e.encstr,e.barlen*4+5,h(e.encs,37)),e.bbs=o(e.encstr.length),e.bhs=o(e.encstr.length);for(var y=0,A=e.encstr.length-1;y<=A;y+=1)e.i=y,e.enc=O(e.encstr,e.i,1),ce(e.enc,"0")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,2*e.height/8)),ce(e.enc,"1")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"2")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"3")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,8*e.height/8));n[t++]=1/0;var w=e.bbs,k=e.bhs;n[t++]=1/0;for(var E=0,I=e.bhs.length-1;E<I;E++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var T=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bbs",n[t++]=w,n[t++]="bhs",n[t++]=k,n[t++]="sbs",n[t++]=T,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var N=rt();n[t++]=N,e.dontdraw||on(),e=r}function nT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,e.custinfoenc="character",n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],qe(e.custinfoenc,"character")&&qe(e.custinfoenc,"numeric")&&(n[t++]="bwipp.auspostBadCustinfoEncoding#13045",n[t++]="Customer information encoding must be either character or numeric",Z()),e.encs=o(["000","001","002","010","011","012","020","021","022","100","101","102","110","111","112","120","121","122","200","201","202","210","211","212","220","221","222","300","301","302","310","311","312","320","321","322","023","030","031","032","033","103","113","123","130","131","132","133","203","213","223","230","231","232","233","303","313","323","330","331","332","333","003","013","00","01","02","10","11","12","20","21","22","30","13","3"]),e.barchars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz #";var i=new Map([["11",37],["45",37],["59",52],["62",67]]);e.fcclen=i,e.barlen=e.barcode.length,e.barlen<10&&(n[t++]="bwipp.auspostTooShort#13075",n[t++]="The data length must be at least 10",Z()),e.txt=o(e.barlen-2),n[t++]=e.fcclen,e.barlen>=2?n[t++]=O(e.barcode,0,2):n[t++]="";var a=n[t-1],s=n[t-2],l=h(s,a)!==void 0;l||(t-=2,n[t++]="bwipp.auspostBadFCC#13082",n[t++]="Must begin with an FCC, either 11, 45, 59 or 62",Z());var c=n[--t];e.encstr=fe(h(n[--t],c)),n[t++]=!0;for(var d=0;d<1;d++){if(e.barlen<10){n[t-1]=!1;break}for(var f=O(e.barcode,2,8),m=0,g=f.length;m<g;m++){var v=h(f,m);if(v<48||v>57){n[t-1]=!1;break}}}n[--t]||(n[t++]="bwipp.auspostIncompleteDPID#13093",n[t++]="The DPID must be 8 digits",Z());var y=ce(e.custinfoenc,"numeric")?2:3;(e.barlen-10)*y>e.encstr.length-22-14&&(n[t++]="bwipp.auspostTooLong#13099",n[t++]="The message is too long",Z()),H(e.encstr,0,h(e.encs,74));for(var A=0;A<=1;A+=1)e.i=A,H(e.encstr,e.i*2+2,h(e.encs,Ye(O(e.barcode,e.i,1))+64));for(var w=2;w<=9;w+=1)e.i=w,H(e.encstr,e.i*2+2,h(e.encs,Ye(O(e.barcode,e.i,1))+64)),C(e.txt,e.i-2,o([O(e.barcode,e.i,1),((e.i-2)*2+6)*3.312,e.textyoffset,e.textfont,e.textsize]));if(ce(e.custinfoenc,"numeric")){for(var k=0,E=e.barlen-11;k<=E;k+=1){e.i=k;var I=h(e.barcode,e.i+10);n[t++]=e.encs,n[t++]=I,(I<48||I>57)&&(n[t++]="bwipp.auspostInvalidCustinfoDigit#13126",n[t++]="The customer information data contains a non-digit character",Z());var T=n[--t];H(e.encstr,e.i*2+22,h(n[--t],T-48+64)),C(e.txt,e.i+8,o([O(e.barcode,e.i+10,1),(e.i*2+22)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.ciflen=(e.barlen-10)*2}else{for(var N=0,j=e.barlen-11;N<=j;N+=1)e.i=N,sn(e.barchars,O(e.barcode,e.i+10,1)),n[--t]||(t--,n[t++]="bwipp.auspostInvalidCustinfoCharacter#13138",n[t++]="The customer information contains an invalid character",Z()),e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.encstr,e.i*3+22,e.enc),C(e.txt,e.i+8,o([O(e.barcode,e.i+10,1),(e.i*3+22)*3.312,e.textyoffset,e.textfont,e.textsize]));e.ciflen=(e.barlen-10)*3}for(var B=22+e.ciflen,U=e.encstr.length-14;B<=U;B+=1)H(e.encstr,B,h(e.encs,75));e.rstable=o(4096),n[t++]=e.rstable,n[t++]=0,n[t++]=1/0;for(var F=0;F<64;F++)n[t++]=0;var P=o(),z=n[--t];H(n[--t],z,P),n[t++]=e.rstable,n[t++]=64,n[t++]=1/0;for(var V=0;V<=63;V+=1)n[t++]=V;var L=o(),Q=n[--t];H(n[--t],Q,L),e.prev=1;for(var q=0;q<64;q++){e.next=e.prev<<1,(e.next&64)!=0&&(e.next=e.next^67);for(var ee=0;ee<=63;ee+=1){e.j=ee,e.nextcell=function(){n[t++]=e.rstable,n[t++]=64*e.next+e.j},e.nextcell();var X=n[--t];C(n[--t],X,h(e.rstable,64*e.prev+e.j)<<1),e.nextcell();var ae=n[--t];if((h(n[--t],ae)&64)!=0){e.nextcell(),e.nextcell();var K=n[--t],ie=h(n[--t],K),ne=n[--t];C(n[--t],ne,ie^67)}}e.prev=e.next}e.rscodes=o(~~((e.encstr.length-16)/3)+4),n[t++]=e.rscodes,n[t++]=0,n[t++]=1/0;for(var J=0;J<4;J++)n[t++]=0;var te=o(),$=n[--t];H(n[--t],$,te);for(var oe=2,we=e.encstr.length-16;oe<=we;oe+=3)e.i=oe,C(e.rscodes,e.rscodes.length-~~((e.i-2)/3)-1,Ye(O(e.encstr,e.i,1))*16+Ye(O(e.encstr,e.i+1,1))*4+Ye(O(e.encstr,e.i+2,1)));for(var be=e.rscodes.length-5;be>=0;be-=1){e.i=be;for(var Te=0;Te<=4;Te+=1)e.j=Te,C(e.rscodes,e.i+e.j,Ha(h(e.rscodes,e.i+e.j),h(e.rstable,R(64*h(o([48,17,29,30,1]),e.j)+h(e.rscodes,e.i+4)))))}e.checkcode=zi(fe(12),"000000000000");for(var ye=0;ye<=3;ye+=1)e.i=ye,e.enc=Nn(fe(3),h(e.rscodes,3-e.i),4),H(e.checkcode,e.i*3+(3-e.enc.length),e.enc);H(e.encstr,e.encstr.length-14,e.checkcode),H(e.encstr,e.encstr.length-2,h(e.encs,74)),e.bbs=o(e.encstr.length),e.bhs=o(e.encstr.length);for(var tt=0,Qe=e.encstr.length-1;tt<=Qe;tt+=1)e.i=tt,e.enc=O(e.encstr,e.i,1),ce(e.enc,"0")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,8*e.height/8)),ce(e.enc,"1")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"2")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"3")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,2*e.height/8));n[t++]=1/0;var Ge=e.bbs,Xe=e.bhs;n[t++]=1/0;for(var Je=0,dt=e.bhs.length-1;Je<dt;Je++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var vt=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bbs",n[t++]=Ge,n[t++]="bhs",n[t++]=Xe,n[t++]="sbs",n[t++]=vt,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var _t=rt();n[t++]=_t,e.dontdraw||on(),e=r}function iT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.kixEmptyData#13291",n[t++]="The data must not be empty",Z()),e.encs=o(["0033","0123","0132","1023","1032","1122","0213","0303","0312","1203","1212","1302","0231","0321","0330","1221","1230","1320","2013","2103","2112","3003","3012","3102","2031","2121","2130","3021","3030","3120","2211","2301","2310","3201","3210","3300"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.charvals=new Map;for(var i=0;i<=35;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.kixBadCharacter#13316",n[t++]="KIX must contain only capital letters and digits",Z())}e.barlen=e.barcode.length,e.encstr=fe(e.barlen*4),e.txt=o(e.barlen);for(var c=0,d=e.barlen-1;c<=d;c+=1)e.i=c,e.indx=h(e.charvals,O(e.barcode,e.i,1)),H(e.encstr,e.i*4,h(e.encs,e.indx)),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*4*3.312,e.textyoffset,e.textfont,e.textsize]));e.bbs=o(e.encstr.length),e.bhs=o(e.encstr.length);for(var f=0,m=e.encstr.length-1;f<=m;f+=1)e.i=f,e.enc=O(e.encstr,e.i,1),ce(e.enc,"0")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,2*e.height/8)),ce(e.enc,"1")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"2")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"3")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,8*e.height/8));n[t++]=1/0;var g=e.bbs,v=e.bhs;n[t++]=1/0;for(var y=0,A=e.bhs.length-1;y<A;y++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var w=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bbs",n[t++]=g,n[t++]="bhs",n[t++]=v,n[t++]="sbs",n[t++]=w,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var k=rt();n[t++]=k,e.dontdraw||on(),e=r}function rT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.japanpostEmptyData#13415",n[t++]="The data must not be empty",Z()),Ie(e.barcode,function(){var w=n[--t];w>=48&&w<=57||w>=65&&w<=90||w==45||(n[t++]="bwipp.japanpostBadCharacter#13425",n[t++]="Japan Post must contain only digits, capital letters and the dash symbol",Z())}),e.encs=o(["300","330","312","132","321","303","123","231","213","033","030","120","102","210","012","201","021","003","333","31","13"]),e.barchars="0123456789-ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.barlen=e.barcode.length,e.encstr=fe(67),e.digits=o(20),e.txt=o(e.barlen+1),H(e.encstr,0,h(e.encs,19)),e.checksum=0,e.j=0,e.i=0,n[t++]=!0;for(var i=0,a=e.barlen-1;i<=a;i+=1){if(e.i=i,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.indx>=11&&e.indx<37){if(e.j>18){n[t-1]=!1;break}e.digit=~~((e.indx-1)/10)+10,H(e.encstr,e.j*3+2,h(e.encs,e.digit)),e.checksum=e.checksum+e.digit,C(e.digits,e.j,e.digit),e.j=e.j+1}if(e.j>19){n[t-1]=!1;break}e.digit=0,e.indx==37&&(e.digit=14),e.indx>=11&&e.indx<37&&(e.digit=(e.indx-1)%10),e.indx<11&&(e.digit=e.indx),H(e.encstr,e.j*3+2,h(e.encs,e.digit)),e.checksum=e.checksum+e.digit,C(e.digits,e.j,e.digit),C(e.txt,e.i,o([O(e.barcode,e.i,1),(e.j*3+2)*3.312,e.textyoffset,e.textfont,e.textsize])),e.j=e.j+1}n[--t]||(n[t++]="bwipp.japanpostTooLong#13489",n[t++]="The input is too long",Z());for(var s=e.j,l=19;s<=l;s+=1)e.k=s,H(e.encstr,e.k*3+2,h(e.encs,14)),e.checksum=e.checksum+14,C(e.digits,e.k,14);e.checksum=19-e.checksum%19,H(e.encstr,62,h(e.encs,e.checksum)),H(e.encstr,65,h(e.encs,20)),e.checkdigit=" ",e.includecheckintext&&(e.checkdigit=O(e.barchars,e.checksum,1)),C(e.txt,e.i+1,o([e.checkdigit,62*3.312,e.textyoffset,e.textfont,e.textsize])),H(e.encstr,65,h(e.encs,20)),e.bbs=o(67),e.bhs=o(e.bbs.length);for(var c=0,d=e.bbs.length-1;c<=d;c+=1)e.i=c,e.enc=O(e.encstr,e.i,1),e.bunit=0,e.hunit=0,ce(e.enc,"0")&&(e.bunit=3,e.hunit=2),ce(e.enc,"1")&&(e.bunit=0,e.hunit=5),ce(e.enc,"2")&&(e.bunit=3,e.hunit=5),ce(e.enc,"3")&&(e.bunit=0,e.hunit=8),C(e.bbs,e.i,e.bunit*e.height/8),C(e.bhs,e.i,e.hunit*e.height/8);n[t++]=1/0;var f=e.bbs,m=e.bhs;n[t++]=1/0;for(var g=0,v=e.bhs.length-1;g<v;g++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var y=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bbs",n[t++]=f,n[t++]="bhs",n[t++]=m,n[t++]="sbs",n[t++]=y,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var A=rt();n[t++]=A,e.dontdraw||on(),e=r}function aT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.checktype="unset",e.badmod11=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],qe(e.checktype,"unset")&&!e.includecheck&&(n[t++]="bwipp.msiCheckTypeWithoutCheck#13606",n[t++]="checktype requires includecheck",Z()),e.badmod11&&qe(e.checktype,"mod11")&&qe(e.checktype,"ncrmod11")&&qe(e.checktype,"mod1110")&&qe(e.checktype,"ncrmod1110")&&(n[t++]="bwipp.msiBadMod11Mismatch#13610",n[t++]="badmod11 requires checktype with mod11",Z()),ce(e.checktype,"unset")&&(e.checktype="mod10"),Ie(e.barcode,function(){var B=n[--t];(B<48||B>57)&&(n[t++]="bwipp.msiBadCharacter#13620",n[t++]="MSI must contain only digits",Z())}),e.encs=o(["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221","21","121"]),e.barchars="0123456789",e.barlen=e.barcode.length,e.txtlen=e.barlen,e.mod10=function(){e.code=n[--t],n[t++]=0,n[t++]=0,Ie(e.code,function(){var ee=n[--t],X=n[--t],ae=n[--t];n[t++]=R(ee-48+X*10),n[t++]=ae}),t--;var B=n[--t];for(n[t++]=B*2,n[t++]=0;;){var U=n[--t],F=n[--t],P=~~(F/10);if(n[t++]=R(U+F%10),n[t++]=P,P==0){t--;break}var z=n[--t],V=n[--t];n[t++]=z,n[t++]=V}n[t++]=0,n[t++]=0,Ie(e.code,function(){var ee=n[--t],X=n[--t],ae=n[--t];n[t++]=R(X+(ee-48)),n[t++]=ae});var L=n[--t];n[t-1]=L;var Q=n[--t],q=fe(e.code.length+1);H(q,0,e.code),C(q,e.code.length,(10-R(n[--t]+Q)%10)%10+48),n[t++]=q},e.mod11=function(){e.code=n[--t],n[t++]=e.code.length-1,Ie(e.code,function(){var X=n[--t],ae=n[--t];n[t++]=X-48,n[t++]=ae%6+2,n[t++]=ae-1}),n[t-1]=0;for(var B=0,U=e.code.length;B<U;B++){var F=n[t-2],P=n[t-3],z=n[t-1];t-=3,n[t++]=R(z+P*F)}var V=(11-n[--t]%11)%11;if(n[t++]=V,V==10)if(e.badmod11){t--;var L=fe(e.code.length+2);H(L,0,e.code),H(L,e.code.length,"10"),n[t++]=L}else t--,n[t++]="bwipp.msiBadMod11NotSpecified#13657",n[t++]="mod11 check digit is 10 but badmod11 not specified",Z();else{var Q=fe(e.code.length+1);H(Q,0,e.code),n[t++]=Q,n[t++]=Q,n[t++]=e.code.length,oa(4,-1);var q=n[--t],ee=n[--t];C(n[--t],ee,q+48)}},e.ncrmod11=function(){e.code=n[--t],n[t++]=e.code.length-1,Ie(e.code,function(){var X=n[--t],ae=n[--t];n[t++]=X-48,n[t++]=ae%8+2,n[t++]=ae-1}),n[t-1]=0;for(var B=0,U=e.code.length;B<U;B++){var F=n[t-2],P=n[t-3],z=n[t-1];t-=3,n[t++]=R(z+P*F)}var V=(11-n[--t]%11)%11;if(n[t++]=V,V==10)if(e.badmod11){t--;var L=fe(e.code.length+2);H(L,0,e.code),H(L,e.code.length,"10"),n[t++]=L}else t--,n[t++]="bwipp.msiBadMod11NotSpecified#13673",n[t++]="mod11 check digit is 10 but badmod11 not specified",Z();else{var Q=fe(e.code.length+1);H(Q,0,e.code),n[t++]=Q,n[t++]=Q,n[t++]=e.code.length,oa(4,-1);var q=n[--t],ee=n[--t];C(n[--t],ee,q+48)}};var i=new Map([["mod10",function(){e.mod10()}],["mod1010",function(){e.mod10(),e.mod10()}],["mod11",function(){e.mod11()}],["ncrmod11",function(){e.ncrmod11()}],["mod1110",function(){e.mod11(),e.mod10()}],["ncrmod1110",function(){e.ncrmod11(),e.mod10()}]]);if(e.checkfunc=i,e.includecheck){var a=e.checkfunc,s=e.checktype,l=h(a,s)!==void 0;n[t++]=a,n[t++]=s,l||(t-=2,n[t++]="bwipp.msiBadCharacter#13694",n[t++]="MSI checktype must be mod10, mod1010, mod11, ncrmod11, mod1110 or ncrmod1110",Z());var c=n[--t],d=h(n[--t],c);if(n[t++]=e.barcode,d()===!0)return!0;e.barcode=n[--t],e.barlen=e.barcode.length,e.includecheckintext&&(e.txtlen=e.barlen)}e.sbs=fe(e.barlen*8+5),e.txt=o(e.barlen),H(e.sbs,0,h(e.encs,10));for(var f=0,m=e.barlen-1;f<=m;f+=1)e.i=f,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*8+2,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*12+3,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,e.barlen*8+2,h(e.encs,11)),n[t++]=1/0,n[t++]=1/0;for(var g=e.sbs,v=0,y=g.length;v<y;v++)n[t++]=h(g,v)-48;var A=o();n[t++]=1/0;for(var w=0,k=~~((e.sbs.length+1)/2);w<k;w++)n[t++]=e.height;var E=o();n[t++]=1/0;for(var I=0,T=~~((e.sbs.length+1)/2);I<T;I++)n[t++]=0;var N=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=A,n[t++]="bhs",n[t++]=E,n[t++]="bbs",n[t++]=N,e.includetext&&(n[t++]="txt",n[t++]=O(e.txt,0,e.txtlen)),n[t++]="opt",n[t++]=e.options;var j=rt();n[t++]=j,e.dontdraw||on(),e=r}function sT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.unidirectional=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.plesseyEmptyData#13785",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEF",e.charvals=new Map;for(var i=0;i<=15;i+=1)C(e.charvals,O(e.barchars,i,1),i);e.encs=o(["14141414","32141414","14321414","32321414","14143214","32143214","14323214","32323214","14141432","32141432","14321432","32321432","14143232","32143232","14323232","32323232","32321432","541412323","323"]);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.plesseyBadCharacter#13809",n[t++]="Plessey must contain only digits and letters A B C D E F",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-2}var d=n[--t];e[n[--t]]=d,e.checkbits=o(e.barlen*4+8),H(e.checkbits,e.barlen*4,o([0,0,0,0,0,0,0,0]));for(var f=0,m=e.barlen-1;f<=m;f+=1)e.i=f,e.indx=h(e.charvals,O(e.barcode,e.i,1)),H(e.checkbits,e.i*4,o([e.indx&1,e.indx>>>1&1,e.indx>>>2&1,e.indx>>>3]));e.checksalt=o([1,1,1,1,0,1,0,0,1]);for(var g=0,v=e.barlen*4-1;g<=v;g+=1)if(e.i=g,h(e.checkbits,e.i)==1)for(var y=0;y<=8;y+=1)e.j=y,C(e.checkbits,e.i+e.j,Ha(h(e.checkbits,e.i+e.j),h(e.checksalt,e.j)));e.checkval=0;for(var A=0;A<=7;A+=1)e.i=A,e.checkval=R(e.checkval+~~El(2,e.i)*h(e.checkbits,R(e.barlen*4+e.i)));e.checksum1=e.checkval&15,e.checksum2=e.checkval>>>4,e.validatecheck&&((h(e.barcode,e.barlen)!=h(e.barchars,e.checksum1)||h(e.barcode,e.barlen+1)!=h(e.barchars,e.checksum2))&&(n[t++]="bwipp.plesseyBadCheckDigits#13848",n[t++]="Incorrect Plessey check digits provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var w=e.unidirectional?27:33;e.sbs=fe(R(e.barlen*8+w)),e.txt=o(e.barlen+2),H(e.sbs,0,h(e.encs,16));for(var k=0,E=e.barlen-1;k<=E;k+=1)e.i=k,e.indx=h(e.charvals,O(e.barcode,e.i,1)),H(e.sbs,e.i*8+8,h(e.encs,e.indx)),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*20+20,e.textyoffset,e.textfont,e.textsize]));H(e.sbs,e.barlen*8+8,h(e.encs,e.checksum1)),H(e.sbs,e.barlen*8+16,h(e.encs,e.checksum2)),e.includecheckintext?(C(e.txt,e.barlen,o([O(e.barchars,e.checksum1,1),e.barlen*20+20,e.textyoffset,e.textfont,e.textsize])),C(e.txt,e.barlen+1,o([O(e.barchars,e.checksum2,1),(e.barlen+1)*20+20,e.textyoffset,e.textfont,e.textsize]))):(C(e.txt,e.barlen,o([" ",e.barlen*20+20,e.textyoffset,e.textfont,e.textsize])),C(e.txt,e.barlen+1,o([" ",(e.barlen+1)*20+20,e.textyoffset,e.textfont,e.textsize])));var I=e.unidirectional?18:17;H(e.sbs,e.barlen*8+24,h(e.encs,I)),n[t++]=1/0,n[t++]=1/0;for(var T=e.sbs,N=0,j=T.length;N<j;N++)n[t++]=h(T,N)-48;var B=o();n[t++]=1/0;for(var U=0,F=~~((e.sbs.length+1)/2);U<F;U++)n[t++]=e.height;var P=o();n[t++]=1/0;for(var z=0,V=~~((e.sbs.length+1)/2);z<V;z++)n[t++]=0;var L=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=B,n[t++]="bhs",n[t++]=P,n[t++]="bbs",n[t++]=L,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var Q=rt();n[t++]=Q,e.dontdraw||on(),e=r}function ZS(){var r=e;e=Object.assign({},e),e.numeric=!1,e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.parse=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];for(e[n[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.numeric&&e.barlen%2!=0&&(n[t++]="bwipp.telepenNumericOddLength#13955",n[t++]="Telepen Numeric must have an even length",Z()),e.encs=o(["31313131","1131313111","33313111","1111313131","3111313111","11333131","13133131","111111313111","31333111","1131113131","33113131","1111333111","3111113131","1113133111","1311133111","111111113131","3131113111","11313331","333331","111131113111","31113331","1133113111","1313113111","1111113331","31131331","113111113111","3311113111","1111131331","311111113111","1113111331","1311111331","11111111113111","31313311","1131311131","33311131","1111313311","3111311131","11333311","13133311","111111311131","31331131","1131113311","33113311","1111331131","3111113311","1113131131","1311131131","111111113311","3131111131","1131131311","33131311","111131111131","3111131311","1133111131","1313111131","111111131311","3113111311","113111111131","3311111131","111113111311","311111111131","111311111311","131111111311","11111111111131","3131311111","11313133","333133","111131311111","31113133","1133311111","1313311111","1111113133","313333","113111311111","3311311111","11113333","311111311111","11131333","13111333","11111111311111","31311133","1131331111","33331111","1111311133","3111331111","11331133","13131133","111111331111","3113131111","1131111133","33111133","111113131111","3111111133","111311131111","131111131111","111111111133","31311313","113131111111","3331111111","1111311313","311131111111","11331313","13131313","11111131111111","3133111111","1131111313","33111313","111133111111","3111111313","111313111111","131113111111","111111111313","313111111111","1131131113","33131113","11113111111111","3111131113","113311111111","131311111111","111111131113","3113111113","11311111111111","331111111111","111113111113","31111111111111","111311111113","131111111113","1111111111111111"]),e.sbs=fe(e.barlen*16+48),e.txt=o(e.barlen),e.enc=h(e.encs,95),H(e.sbs,0,e.enc),e.l=e.enc.length,e.checksum=0,e.i=0,e.j=0;e.i!=e.barlen;){if(e.numeric)if(h(e.barcode,e.i)>16){e.np=O(e.barcode,e.i,2);var s=h(e.np,0),l=h(e.np,1);if(s<48||s>57||(l<48||l>57)&&l!=88)n[t++]=-1;else{var c=h(e.np,1)-48;if(n[t++]=h(e.np,0)-48,n[t++]=c,c!=40){var d=n[--t],f=n[--t];n[t++]=R(d+f*10)+10}else t--;var m=n[--t];n[t++]=m+17}var g=n[t-1];g==-1&&(n[t++]="bwipp.telepenInvalidNumericCharacter#14021",n[t++]="Telepen Numeric may contain only digits, or X in even positions",Z()),e.indx=n[--t],C(e.txt,e.j,o([e.np,e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+2}else e.indx=h(e.barcode,e.i),C(e.txt,e.j,o([" ",e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+1;else e.indx=h(e.barcode,e.i),e.indx>127&&(n[t++]="bwipp.telepenInvalidAlphaCharacter#14034",n[t++]="Telepen Alpha characters must have ordinal values 0 to 127",Z()),e.indx>=32&&e.indx<=126?C(e.txt,e.j,o([O(e.barcode,e.i,1),e.j*16+16,e.textyoffset,e.textfont,e.textsize])):C(e.txt,e.j,o([" ",e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+1;e.checksum=R(e.checksum+e.indx),e.enc=h(e.encs,e.indx),H(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.j=e.j+1}e.checksum=(127-e.checksum%127)%127,e.enc=h(e.encs,e.checksum),H(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.enc=h(e.encs,122),H(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.sbs=O(e.sbs,0,e.l),e.txt=O(e.txt,0,e.j),n[t++]=1/0,n[t++]=1/0;for(var v=e.sbs,y=0,A=v.length;y<A;y++)n[t++]=h(v,y)-48;var w=o();n[t++]=1/0;for(var k=0,E=~~((e.sbs.length+1)/2);k<E;k++)n[t++]=e.height;var I=o();n[t++]=1/0;for(var T=0,N=~~((e.sbs.length+1)/2);T<N;T++)n[t++]=0;var j=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=w,n[t++]="bhs",n[t++]=I,n[t++]="bbs",n[t++]=j,e.includetext&&(n[t++]="txt",n[t++]=e.txt),n[t++]="opt",n[t++]=e.options;var B=rt();n[t++]=B,e.dontdraw||on(),e=r}function oT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"numeric",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,ZS();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function lT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,e.encoding="auto",e.version="a",e.checkoffset=0,e.raw=!1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t];var i=n[--t];e.barcode=i,e.la0=-1,e.la1=-2,e.la2=-3,e.sf0=-4,e.sf1=-5,e.sf2=-6,e.fn1=-7,e.fn2=-8,e.fn3=-9,e.fn4=-10;var a=o([e.sf1,e.sf0,e.fn3]);e.charmapsnormal=o([o(["0","^","'"]),o(["1",";",27]),o(["2","<",28]),o(["3","=",29]),o(["4",">",30]),o(["5","?",31]),o(["6","@","!"]),o(["7","[",'"']),o(["8",92,"#"]),o(["9","]","&"]),o(["A","a",1]),o(["B","b",2]),o(["C","c",3]),o(["D","d",4]),o(["E","e",5]),o(["F","f",6]),o(["G","g",7]),o(["H","h",8]),o(["I","i",9]),o(["J","j",10]),o(["K","k",11]),o(["L","l",12]),o(["M","m",13]),o(["N","n",14]),o(["O","o",15]),o(["P","p",16]),o(["Q","q",17]),o(["R","r",18]),o(["S","s",19]),o(["T","t",20]),o(["U","u",21]),o(["V","v",22]),o(["W","w",23]),o(["X","x",24]),o(["Y","y",25]),o(["Z","z",26]),o(["-","_",40]),o([".","`",41]),o([" ",127,0]),o(["$","{","*"]),o(["/","|",","]),o(["+","}",":"]),o(["%","~",e.fn1]),o([e.la1,e.la0,e.fn2]),a,o([e.sf2,e.sf2,e.fn4])]),e.chapmapslimited=o([o(["0",-98,-98]),o(["1",-98,-98]),o(["2",-98,-98]),o(["3",-98,-98]),o(["4",-98,-98]),o(["5",-98,-98]),o(["6",-98,-98]),o(["7",-98,-98]),o(["8",-98,-98]),o(["9",-98,-98]),o(["A",-98,-98]),o(["B",-98,-98]),o(["C",-98,-98]),o(["D",-98,-98]),o(["E",-98,-98]),o(["F",-98,-98]),o(["G",-98,-98]),o(["H",-98,-98]),o(["I",-98,-98]),o(["J",-98,-98]),o(["K",-98,-98]),o(["L",-98,-98]),o(["M",-98,-98]),o(["N",-98,-98]),o(["O",-98,-98]),o(["P",-98,-98]),o(["Q",-98,-98]),o(["R",-98,-98]),o(["S",-98,-98]),o(["T",-98,-98]),o(["U",-98,-98]),o(["V",-98,-98]),o(["W",-98,-98]),o(["X",-98,-98]),o(["Y",-98,-98]),o(["Z",-98,-98]),o(["-",-98,-98]),o([".",-98,-98])]),qe(e.version,"a")&&qe(e.version,"b")&&qe(e.version,"limiteda")&&qe(e.version,"limitedb")&&(n[t++]="bwipp.posicodeInvalidVersion#14226",n[t++]="The version must be either a, b, limiteda or limitedb",Z()),n[t++]="charmaps",ce(e.version,"a")||ce(e.version,"b")?n[t++]=e.charmapsnormal:n[t++]=e.chapmapslimited;var s=n[--t];e[n[--t]]=s,e.charmaps,e.charmaps,e.charmaps,e.charvals=o([new Map,new Map,new Map]);for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=h(e.charmaps,e.i);for(var d=0;d<=2;d+=1){e.j=d;var f=h(e.encs,e.j);if(n[t++]=f,ce(Ys(f),"stringtype")){var m=h(n[--t],0);n[t++]=m}C(h(e.charvals,e.j),n[--t],e.i)}}if(e.set0=h(e.charvals,0),e.set1=h(e.charvals,1),e.set2=h(e.charvals,2),ce(e.version,"limiteda")||ce(e.version,"limitedb"))for(var g=0,v=e.barcode.length-1;g<=v;g+=1){var y=h(e.set0,h(O(e.barcode,g,1),0))!==void 0;y||(n[t++]="bwipp.posicodeBadCharacter#14252",n[t++]="Posicode limited must contain only digits, capital letters, and the symbols - and .",Z())}if(e.raw&&(e.encoding="raw"),ce(e.encoding,"raw")){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ye(O(e.barcode,e.i+1,3)),C(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=O(e.cws,0,e.j),e.text=""}if(ce(e.encoding,"auto")){var A=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=A,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var w=n[--t];e[n[--t]]=w,e.msglen=e.msg.length,e.text=fe(e.msglen);for(var k=0,E=e.msglen-1;k<=E;k+=1){e.i=k;var I=h(e.msg,e.i);n[t++]=e.text,n[t++]=e.i,n[t++]=I,I<0&&(n[t-1]=32);var T=n[--t],N=n[--t];C(n[--t],N,T)}n[t++]=1/0;for(var j=0,B=e.msglen;j<B;j++)n[t++]=0;n[t++]=0,e.numSA=o(),n[t++]=1/0;for(var U=0,F=e.msglen;U<F;U++)n[t++]=0;n[t++]=0,e.numEA=o();for(var P=e.msglen-1;P>=0;P-=1)e.i=P,h(e.msg,e.i)>=0&&(h(e.msg,e.i)>=128?C(e.numEA,e.i,h(e.numEA,e.i+1)+1):C(e.numSA,e.i,h(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=o([]);for(var z=0,V=e.msglen-1;z<=V;z+=1){if(e.i=z,e.c=h(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?n[t++]=e.numSA:n[t++]=e.numEA;var L=h(n[--t],e.i),Q=R(L+e.i)==e.msglen?3:5;L<Q?(n[t++]=1/0,W(e.msgtmp),n[t++]=e.fn4,e.msgtmp=o()):(n[t++]=1/0,W(e.msgtmp),n[t++]=e.fn4,n[t++]=e.fn4,e.msgtmp=o(),e.ea=!e.ea)}n[t++]=1/0,W(e.msgtmp),e.c>=0?n[t++]=e.c&127:n[t++]=e.c,e.msgtmp=o()}for(e.msg=e.msgtmp,e.msglen=e.msg.length,e.enc=function(){var jt=n[--t];C(e.cws,e.j,h(jt,n[--t])),e.j=e.j+1},e.cws=o(e.msglen*2),e.i=0,e.j=0,e.cset="set0";e.i!=e.msglen;)for(;;){e.char1=h(e.msg,e.i),n[t++]="char2",e.i+1<e.msglen?n[t++]=h(e.msg,e.i+1):n[t++]=-99;var q=n[--t];e[n[--t]]=q;var ee=h(e[e.cset],e.char1)!==void 0;if(ee){n[t++]=e.char1,n[t++]=e[e.cset],e.enc(),e.i=e.i+1;break}var X=h(e.set2,e.char1)!==void 0;if(X){n[t++]=e.sf2,n[t++]=e[e.cset],e.enc(),n[t++]=e.char1,n[t++]=e.set2,e.enc(),e.i=e.i+1;break}var ae=h(e[e.cset],e.char2)!==void 0;if(ae){ce(e.cset,"set0")?(n[t++]=e.sf1,n[t++]=e[e.cset],e.enc(),n[t++]=e.char1,n[t++]=e.set1,e.enc()):(n[t++]=e.sf0,n[t++]=e[e.cset],e.enc(),n[t++]=e.char1,n[t++]=e.set0,e.enc()),e.i=e.i+1;break}else{ce(e.cset,"set0")?(n[t++]=e.la1,n[t++]=e[e.cset],e.enc(),e.cset="set1"):(n[t++]=e.la0,n[t++]=e[e.cset],e.enc(),e.cset="set0");break}}e.cws=O(e.cws,0,e.j)}var K=new Map([["a",o(["141112","131212","121312","111412","131113","121213","111313","121114","111214","111115","181111","171211","161311","151411","141511","131611","121711","111811","171112","161212","151312","141412","131512","121612","111712","161113","151213","141313","131413","121513","111613","151114","141214","131314","121414","111514","141115","131215","121315","111415","131116","121216","111316","121117","111217","111118","1<111112","111111111;1"])],["b",o(["151213","141313","131413","121513","141214","131314","121414","131215","121315","121216","191212","181312","171412","161512","151612","141712","131812","121912","181213","171313","161413","151513","141613","131713","121813","171214","161314","151414","141514","131614","121714","161215","151315","141415","131515","121615","151216","141316","131416","121516","141217","131317","121417","131218","121318","121219","1<121312","121212121<1"])],["limiteda",o(["111411","111312","111213","111114","121311","121212","121113","141111","131211","131112","171111","161211","151311","141411","131511","121611","111711","161112","151212","141312","131412","121512","111612","151113","141213","131313","121413","111513","141114","131214","121314","111414","131115","121215","111315","121116","111216","111117","151111","1"])],["limitedb",o(["121512","121413","121314","121215","131412","131313","131214","151212","141312","141213","181212","171312","161412","151512","141612","131712","121812","171213","161313","151413","141513","131613","121713","161214","151314","141414","131514","121614","151215","141315","131415","121515","141216","131316","121416","131217","121317","121218","141212","1"])]]);e.encmaps=K,e.encs=h(e.encmaps,e.version),e.c2w=o([o([495,330,210,126,70,35,15,5]),o([165,120,84,56,35,20,10,4]),o([45,36,28,21,15,10,6,3]),o([9,8,7,6,5,4,3,2]),o([1,1,1,1,1,1,1,1])]),e.v=0;for(var ie=e.cws,ne=0,J=ie.length;ne<J;ne++){e.cw=h(ie,ne);for(var te=0;te<6;te++)((e.cw^e.v)&1)!=0&&(e.v=e.v^7682),e.v=e.v>>>1,e.cw=e.cw>>>1}for(e.v=e.v+e.checkoffset,ce(e.version,"limiteda")||ce(e.version,"limitedb")?(e.v=e.v&1023,e.v>824&&e.v<853&&(e.v=e.v+292)):e.v=(e.v&1023)+45,e.d=o([2,2,2,2,2,2]),e.r=0,e.c=0,e.w=0,e.sum=0;e.sum!=e.v;)e.t=R(e.sum+h(h(e.c2w,e.r),e.c)),e.t==e.v&&(e.w=e.w+1,C(e.d,e.r,e.w+2),e.sum=e.t),e.t>e.v&&(C(e.d,e.r,e.w+2),e.r=e.r+1,e.w=0),e.t<e.v&&(e.c=e.c+1,e.w=e.w+1,e.sum=e.t);n[t++]=20;for(var $=0;$<=4;$+=1){var oe=n[--t];n[t++]=R(oe-h(e.d,$))}if(C(e.d,5,n[--t]),ce(e.version,"b")||ce(e.version,"limitedb")){n[t++]=1/0;for(var we=e.d,be=0,Te=we.length;be<Te;be++)n[t++]=h(we,be)+1;e.d=o()}e.cbs=zi(fe(12),"111111111111");for(var ye=5;ye>=0;ye-=1)e.i=ye,C(e.cbs,(5-e.i)*2+1,h(e.d,e.i)+47);e.sbs=fe(e.cws.length*6+31);var tt=h(e.encs,e.encs.length-2);H(e.sbs,0,tt),e.j=tt.length;for(var Qe=0,Ge=e.cws.length-1;Qe<=Ge;Qe+=1)e.i=Qe,H(e.sbs,e.j,h(e.encs,h(e.cws,e.i))),e.j=e.j+6;H(e.sbs,e.j,e.cbs),e.j=e.j+12;var Xe=h(e.encs,e.encs.length-1);H(e.sbs,e.j,Xe),e.j=Xe.length+e.j,e.sbs=O(e.sbs,0,e.j),n[t++]=1/0,n[t++]=1/0;for(var Je=e.sbs,dt=0,vt=Je.length;dt<vt;dt++)n[t++]=h(Je,dt)-48;var _t=o();n[t++]=1/0;for(var xt=0,bt=~~((e.sbs.length+1)/2);xt<bt;xt++)n[t++]=e.height;var kt=o();n[t++]=1/0;for(var Pt=0,Rt=~~((e.sbs.length+1)/2);Pt<Rt;Pt++)n[t++]=0;var Wt=o(),zt=new Map([["a",0],["b",0],["limiteda",12],["limitedb",13]]),Ct=new Map([["a",0],["b",0],["limiteda",12],["limitedb",13]]);n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=_t,n[t++]="bhs",n[t++]=kt,n[t++]="bbs",n[t++]=Wt,n[t++]="txt",n[t++]=o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]),n[t++]="textxalign",n[t++]="center",n[t++]="borderleft",n[t++]=h(zt,e.version),n[t++]="borderright",n[t++]=h(Ct,e.version),n[t++]="opt",n[t++]=e.options;var Yt=rt();n[t++]=Yt,e.dontdraw||on(),e=r}function e9(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=8,e.rowheight=10,e.sepheight=1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],(e.columns<4||e.columns>62)&&(n[t++]="bwipp.codablockfBadColumns#14582",n[t++]="Codablock F must have 4 to 62 columns",Z()),e.rows!=-1&&(e.rows<2||e.rows>44)&&(n[t++]="bwipp.codablockfBadRows#14586",n[t++]="Codablock F must have 2 to 44 rows",Z()),e.rowheight<8&&(n[t++]="bwipp.codablockfBadRowHeight#14590",n[t++]="Codablock F must have rowheight of at least 8",Z()),e.sepheight<1&&(n[t++]="bwipp.codablockfBadSepHeight#14594",n[t++]="Codablock F must have sepheight of at least 1",Z()),n[t++]="c",e.columns>=4&&e.columns<=62?n[t++]=e.columns:n[t++]=8;var i=n[--t];e[n[--t]]=i,n[t++]="rows",e.rows>=2&&e.rows<=44?n[t++]=e.rows:n[t++]=-1;var a=n[--t];e[n[--t]]=a,e.swa=-1,e.swb=-2,e.swc=-3,e.sft=-4,e.fn1=-5,e.fn2=-6,e.fn3=-7,e.fn4=-8,e.sta=-9,e.stp=-10;var s=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=s,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var l=n[--t];e[n[--t]]=l,e.msglen=e.msg.length,e.msgtmp=o([]);for(var c=e.msg,d=0,f=c.length;d<f;d++)e.char=h(c,d),n[t++]=1/0,W(e.msgtmp),e.char<128?n[t++]=e.char:(n[t++]=e.fn4,n[t++]=e.char&127),e.msgtmp=o();e.kmsg=e.msg,e.msg=e.msgtmp,e.msglen=e.msg.length,e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.fn3,e.fn3,"96"]),o([e.fn2,e.fn2,"97"]),o([e.sft,e.sft,"98"]),o([e.swc,e.swc,"99"]),o([e.swb,e.fn4,e.swb]),o([e.fn4,e.swa,e.swa]),o([e.fn1,e.fn1,e.fn1]),o([e.sta,e.sta,e.sta]),o([e.stp,e.stp,e.stp])]),e.charvals=o([new Map,new Map,new Map]);for(var m=0,g=e.charmaps.length-1;m<=g;m+=1){e.i=m,e.encs=h(e.charmaps,e.i);for(var v=0;v<=2;v+=1){e.j=v;var y=h(e.encs,e.j);if(n[t++]=y,ce(Ys(y),"stringtype")){var A=h(n[--t],0);n[t++]=A}C(h(e.charvals,e.j),n[--t],e.i)}}e.seta=h(e.charvals,0),e.setb=h(e.charvals,1),e.setc=h(e.charvals,2),e.numsscr=function(){for(e.n=0,e.s=0,e.p=n[--t];!(e.p>=e.msglen||e.p!=0&&h(e.msg,e.p-1)==e.fn4);){var Ne=h(e.msg,e.p),je=h(e.setc,Ne)!==void 0;if(n[t++]=Ne,!je){t--;break}if(n[--t]==e.fn1)if(e.s%2==0)e.s=e.s+1;else break;e.n=e.n+1,e.s=e.s+1,e.p=e.p+1}n[t++]=e.n,n[t++]=e.s},e.enca=function(){C(e.cws,e.j,h(e.seta,n[--t])),e.j=e.j+1},e.encb=function(){C(e.cws,e.j,h(e.setb,n[--t])),e.j=e.j+1},e.encc=function(){var Ne=n[t-1];if(qe(Ys(Ne),"arraytype")){var je=h(e.setc,n[--t]);n[t++]=je}else{W(n[--t]);var Se=n[--t],ze=n[--t];n[t++]=R(Se-48+(ze-48)*10)}C(e.cws,e.j,n[--t]),e.j=e.j+1},e.anotb=function(){var Ne=n[--t],je=h(e.seta,Ne)!==void 0,Se=h(e.setb,Ne)!==void 0;n[t++]=je&&!Se},e.bnota=function(){var Ne=n[--t],je=h(e.setb,Ne)!==void 0,Se=h(e.seta,Ne)!==void 0;n[t++]=je&&!Se},n[t++]=1/0;for(var w=0,k=e.msg.length;w<k;w++)n[t++]=0;n[t++]=9999,e.nextanotb=o(),n[t++]=1/0;for(var E=0,I=e.msg.length;E<I;E++)n[t++]=0;n[t++]=9999,e.nextbnota=o();for(var T=e.msg.length-1;T>=0;T-=1)e.i=T,n[t++]=h(e.msg,e.i),e.anotb(),n[--t]?C(e.nextanotb,e.i,0):C(e.nextanotb,e.i,h(e.nextanotb,e.i+1)+1),n[t++]=h(e.msg,e.i),e.bnota(),n[--t]?C(e.nextbnota,e.i,0):C(e.nextbnota,e.i,h(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var Ne=n[--t];n[t++]=oo(h(e.nextanotb,Ne),h(e.nextbnota,Ne))},e.bbeforea=function(){var Ne=n[--t];n[t++]=oo(h(e.nextbnota,Ne),h(e.nextanotb,Ne))},e.padrow=function(){for(var Ne=0,je=n[--t];Ne<je;Ne++)for(;;){if(ce(e.cset,"seta")){n[t++]=e.swc,e.enca(),e.cset="setc";break}if(ce(e.cset,"setb")){n[t++]=e.swc,e.encb(),e.cset="setc";break}if(ce(e.cset,"setc")){n[t++]=e.swb,e.encc(),e.cset="setb";break}}},e.encafitsrow=function(){if(e.rem<=2&&h(e.msg,e.i)==e.fn4){var Ne=e.rem==2&&h(e.msg,e.i+1)<=95;n[t++]=Ne,Ne&&(n[t++]=e.fn4,e.enca(),n[t++]=h(e.msg,e.i+1),e.enca(),e.i=e.i+2)}else n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1,n[t++]=!0},e.encbfitsrow=function(){if(e.rem<=2&&h(e.msg,e.i)==e.fn4){var Ne=e.rem==2&&h(e.msg,e.i+1)>=32;n[t++]=Ne,Ne&&(n[t++]=e.fn4,e.encb(),n[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2)}else n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1,n[t++]=!0},e.cws=o((e.c+5)*44),e.i=0,e.j=0,e.r=1,e.lastrow=!1;!e.lastrow;){for(e.r>44&&(n[t++]="bwipp.codablockfTooBig#14803",n[t++]="Maximum length exceeded",Z()),n[t++]=e.sta,e.enca(),e.i<e.msglen?(n[t++]=e.i,e.numsscr()):(n[t++]=-1,n[t++]=-1),e.nums=n[--t],e.nchars=n[--t];;){if(e.msglen==0){n[t++]=e.swb,e.enca(),e.cset="setb";break}if(e.nums>=2){n[t++]=e.swc,e.enca(),e.cset="setc";break}if(n[t++]=e.i,e.abeforeb(),n[--t]){n[t++]=e.sft,e.enca(),e.cset="seta";break}n[t++]=e.swb,e.enca(),e.cset="setb";break}for(e.j=e.j+1,e.endofrow=!1;e.rem=R(e.c+3-e.j%(e.c+5)),!(e.i==e.msglen||e.endofrow);){n[t++]=e.i,e.numsscr(),e.nums=n[--t],e.nchars=n[--t],n[t++]="remnums",e.nums>e.rem*2?n[t++]=e.rem*2:n[t++]=e.nums;var N=n[--t];for(e[n[--t]]=N;;){if((ce(e.cset,"seta")||ce(e.cset,"setb"))&&e.remnums>=4&&h(e.msg,e.i)!=e.fn1){if(e.remnums%2==0&&e.rem>=3){n[t++]=e.swc,ce(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";for(var j=0;j<2;j++)h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}if(e.remnums%2!=0&&e.rem>=4){n[t++]=h(e.msg,e.i),ce(e.cset,"seta")?e.enca():e.encb(),e.i=e.i+1,n[t++]=e.swc,ce(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";for(var B=0;B<2;B++)h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}n[t++]=ce(e.cset,"setb"),n[t++]=h(e.msg,e.i),e.anotb();var U=n[--t],F=n[--t];if(F&&U&&e.rem>=2){if(e.i<e.msglen-1&&(n[t++]=e.i+1,e.bbeforea(),n[--t])){n[t++]=e.sft,e.encb(),n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}n[t++]=e.swa,e.encb(),e.cset="seta",n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}n[t++]=ce(e.cset,"seta"),n[t++]=h(e.msg,e.i),e.bnota();var P=n[--t],z=n[--t];if(z&&P&&e.rem>=2){if(e.i<e.msglen-1&&(n[t++]=e.i+1,e.abeforeb(),n[--t])){n[t++]=e.sft,e.enca(),n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}n[t++]=e.swb,e.enca(),e.cset="setb",n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(ce(e.cset,"setc")&&e.remnums<2&&e.rem>=2){if(e.rem=e.rem-1,n[t++]=e.i,e.abeforeb(),n[--t]){if(n[t++]=e.swa,e.encc(),e.cset="seta",e.encafitsrow(),n[--t])break}else if(n[t++]=e.swb,e.encc(),e.cset="setb",e.encbfitsrow(),n[--t])break}var V=h(e.seta,h(e.msg,e.i))!==void 0;if(ce(e.cset,"seta")&&V&&e.rem>=1&&(e.encafitsrow(),n[--t]))break;var L=h(e.setb,h(e.msg,e.i))!==void 0;if(ce(e.cset,"setb")&&L&&e.rem>=1&&(e.encbfitsrow(),n[--t]))break;if(ce(e.cset,"setc")&&e.remnums>=2&&e.rem>=1){h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}e.endofrow=!0;break}}(e.r>=e.rows||e.rows==-1)&&e.r>1&&e.i==e.msglen&&e.rem>=2?(n[t++]=e.rem-2,e.padrow(),e.j=e.j+3,n[t++]=e.stp,e.enca(),e.lastrow=!0):(n[t++]=e.rem,e.padrow(),e.j=e.j+1,n[t++]=e.stp,e.enca(),e.r=e.r+1)}e.cws=O(e.cws,0,e.j),n[t++]=1/0;for(var Q=64;Q<=95;Q+=1)n[t++]=Q;for(var q=0;q<=15;q+=1)n[t++]=q;for(var ee=26;ee<=63;ee+=1)n[t++]=ee;e.abmap=o(),n[t++]=1/0;for(var X=0;X<=85;X+=1)n[t++]=X;e.cmap=o(),e.chkmsg=o(e.kmsg.length),e.j=0;for(var ae=0,K=e.kmsg.length-1;ae<=K;ae+=1)e.i=ae,e.char=h(e.kmsg,e.i),e.char>=0&&(C(e.chkmsg,e.j,e.char),e.j=e.j+1),e.char==e.fn1&&e.i!=0&&(C(e.chkmsg,e.j,29),e.j=e.j+1);e.t1=0,e.t2=0,e.k1=0,e.k2=0;for(var ie=0,ne=e.j-1;ie<=ne;ie+=1)e.i=ie,e.t1=h(e.chkmsg,e.i)*e.i%86,e.t2=R(e.t1+h(e.chkmsg,e.i))%86,e.k1=R(e.k1+e.t2)%86,e.k2=R(e.k2+e.t1)%86;n[t++]=e.cws,n[t++]=e.cws.length-4,qe(e.cset,"setc")?n[t++]=e.abmap:n[t++]=e.cmap;var J=h(n[--t],e.k1),te=n[--t];C(n[--t],te,J),n[t++]=e.cws,n[t++]=e.cws.length-3,qe(e.cset,"setc")?n[t++]=e.abmap:n[t++]=e.cmap;var $=h(n[--t],e.k2),oe=n[--t];C(n[--t],oe,$);var we=e.cws;n[t++]=we,n[t++]=2,h(we,1)!=99?n[t++]=e.abmap:n[t++]=e.cmap;var be=h(n[--t],e.r-2),Te=n[--t];C(n[--t],Te,be);for(var ye=1,tt=e.r-1;ye<=tt;ye+=1){e.i=ye;var Qe=e.cws,Ge=e.i,Xe=e.c;n[t++]=Qe,n[t++]=Ge*(Xe+5)+2,h(Qe,Ge*(Xe+5)+2-1)!=99?n[t++]=e.abmap:n[t++]=e.cmap;var Je=h(n[--t],e.i+42),dt=n[--t];C(n[--t],dt,Je)}for(var vt=0,_t=e.r-1;vt<=_t;vt+=1){e.rcws=O(e.cws,vt*(e.c+5),e.c+4),e.csum=h(e.rcws,0);for(var xt=1,bt=e.rcws.length-2;xt<=bt;xt+=1)e.i=xt,e.csum=R(e.csum+h(e.rcws,e.i)*e.i);C(e.rcws,e.rcws.length-1,e.csum%103)}var kt=h(e.options,"debugcws")!==void 0;kt&&(n[t++]="bwipp.debugcws#15016",n[t++]=e.cws,Z()),e.encs=o(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","2331112"]),e.rowbits=o(e.r);for(var Pt=0,Rt=e.r-1;Pt<=Rt;Pt+=1){e.i=Pt,n[t++]=1/0;for(var Wt=O(e.cws,e.i*(e.c+5),e.c+5),zt=0,Ct=Wt.length;zt<Ct;zt++)Ie(h(e.encs,h(Wt,zt)),function(){var Ne=n[--t];n[t++]=Ne-48});e.sbs=o(),n[t++]=1/0;var Yt=e.sbs;n[t++]=0;for(var jt=0,an=Yt.length;jt<an;jt++)for(var rn=n[t-1],Kt=rn==1?0:1,Jt=0,Zt=h(Yt,jt);Jt<Zt;Jt++)n[t++]=Kt;Rn(o(Ur()-1));var Qt=n[--t];n[t-1]=Qt;var mn=n[--t];n[t-1]=mn,n[t++]=e.rowbits,n[t++]=e.i;var cn=n[t-3],dn=n[t-1];C(n[t-2],dn,cn),t-=3}e.symwid=e.c*11+57,n[t++]=1/0;for(var Ht=0,Bt=e.symwid*e.sepheight;Ht<Bt;Ht++)n[t++]=1;for(var Y=0,le=e.r-2;Y<=le;Y+=1){e.i=Y;for(var se=0,ge=e.rowheight;se<ge;se++)W(h(e.rowbits,e.i));for(var ve=0,_e=e.sepheight;ve<_e;ve++){n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=0;for(var pe=0,Oe=e.symwid-24;pe<Oe;pe++)n[t++]=1;n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=1}}for(var de=0,ke=e.rowheight;de<ke;de++)W(h(e.rowbits,e.r-1));for(var Ee=0,De=e.symwid*e.sepheight;Ee<De;Ee++)n[t++]=1;e.pixs=o();var xe=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.symwid],["pixy",~~(e.pixs.length/e.symwid)],["height",~~(e.pixs.length/e.symwid)/72],["width",e.symwid/72],["opt",e.options]]);n[t++]=xe,e.dontdraw||Lt(),e=r}function cT(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.sam=-1,e.rows=0,e.rowheight=8,e.sepheight=1,e.raw=!1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.rows!=0&&(e.rows<2||e.rows>16)&&(n[t++]="bwipp.code16kBadRows#15133",n[t++]="Code 16K must have 2 to 16 rows",Z()),e.rowheight<8&&(n[t++]="bwipp.code16kBadRowHeight#15137",n[t++]="Code 16K must have rowheight of at least 8",Z()),e.sepheight<1&&(n[t++]="bwipp.code16kBadSepHeight#15141",n[t++]="Code 16K must have sepheight of at least 1",Z()),e.sam!=-1){n[t++]=!0;for(var i=0;i<1;i++){var a=e.sam;if(a<12||a>99){n[t-1]=!1;break}if(e.sam%10<2){n[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){n[t-1]=!1;break}}n[--t]||(n[t++]="bwipp.code16kBadSAM#15152",n[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 9 symbols',Z())}e.sam!=-1&&(e.rows=16),e.swa=-1,e.swb=-2,e.swc=-3,e.sa1=-4,e.sb1=-5,e.sc1=-6,e.sa2=-7,e.sb2=-8,e.sc2=-9,e.pad=-10,e.sb3=-11,e.sc3=-12,e.fn1=-13,e.fn2=-14,e.fn3=-15,e.fn4=-16,e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.fn3,e.fn3,"96"]),o([e.fn2,e.fn2,"97"]),o([e.sb1,e.sa1,"98"]),o([e.swc,e.swc,"99"]),o([e.swb,e.fn4,e.swb]),o([e.fn4,e.swa,e.swa]),o([e.fn1,e.fn1,e.fn1]),o([e.pad,e.pad,e.pad]),o([e.sb2,e.sa2,e.sb1]),o([e.sc2,e.sc2,e.sb2]),o([e.sc3,e.sc3,e.sb3])]),e.charvals=o([new Map,new Map,new Map]);for(var s=0,l=e.charmaps.length-1;s<=l;s+=1){e.i=s,e.encs=h(e.charmaps,e.i);for(var c=0;c<=2;c+=1){e.j=c;var d=h(e.encs,e.j);if(n[t++]=d,ce(Ys(d),"stringtype")){var f=h(n[--t],0);n[t++]=f}C(h(e.charvals,e.j),n[--t],e.i)}}if(e.seta=h(e.charvals,0),e.setb=h(e.charvals,1),e.setc=h(e.charvals,2),e.raw){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||h(e.barcode,e.i)!=94);){var m=O(e.barcode,e.i+1,3);n[t++]=m,n[t++]=!1;for(var g=0,v=m.length;g<v;g++){var y=h(m,g);(y<48||y>57)&&(n[t-1]=!0)}if(n[--t]){t--;break}e.cw=Ye(n[--t]),C(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(n[t++]="bwipp.code16kBadRawFormat#15241",n[t++]="raw data must be formatted as ^NNN",Z()),e.cws=O(e.cws,0,e.j)}else{var A=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=A,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var w=n[--t];e[n[--t]]=w,e.msglen=e.msg.length,n[t++]=1/0;for(var k=0,E=e.msglen;k<E;k++)n[t++]=0;n[t++]=0,e.numSA=o(),n[t++]=1/0;for(var I=0,T=e.msglen;I<T;I++)n[t++]=0;n[t++]=0,e.numEA=o();for(var N=e.msglen-1;N>=0;N-=1)e.i=N,h(e.msg,e.i)>=0&&(h(e.msg,e.i)>=128?C(e.numEA,e.i,h(e.numEA,e.i+1)+1):C(e.numSA,e.i,h(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=o([]);for(var j=0,B=e.msglen-1;j<=B;j+=1){if(e.i=j,e.c=h(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?n[t++]=e.numSA:n[t++]=e.numEA;var U=h(n[--t],e.i),F=R(U+e.i)==e.msglen?3:5;U<F?(n[t++]=1/0,W(e.msgtmp),n[t++]=e.fn4,e.msgtmp=o()):(n[t++]=1/0,W(e.msgtmp),n[t++]=e.fn4,n[t++]=e.fn4,e.msgtmp=o(),e.ea=!e.ea)}n[t++]=1/0,W(e.msgtmp),e.c>=0?n[t++]=e.c&127:n[t++]=e.c,e.msgtmp=o()}e.msg=e.msgtmp,e.msglen=e.msg.length,e.numsscr=function(){for(e.n=0,e.s=0,e.p=n[--t];!(e.p>=e.msglen);){var ln=h(e.msg,e.p),ti=h(e.setc,ln)!==void 0;if(n[t++]=ln,!ti){t--;break}if(n[--t]==e.fn1)if(e.s%2==0)e.s=e.s+1;else break;e.n=e.n+1,e.s=e.s+1,e.p=e.p+1}n[t++]=e.n,n[t++]=e.s},e.enca=function(){C(e.cws,e.j,h(e.seta,n[--t])),e.j=e.j+1},e.encb=function(){C(e.cws,e.j,h(e.setb,n[--t])),e.j=e.j+1},e.encc=function(){var ln=n[t-1];if(qe(Ys(ln),"arraytype")){var ti=h(e.setc,n[--t]);n[t++]=ti}else{W(n[--t]);var Qi=n[--t],Bi=n[--t];n[t++]=R(Qi-48+(Bi-48)*10)}C(e.cws,e.j,n[--t]),e.j=e.j+1},e.anotb=function(){var ln=n[--t],ti=h(e.seta,ln)!==void 0,Qi=h(e.setb,ln)!==void 0;n[t++]=ti&&!Qi},e.bnota=function(){var ln=n[--t],ti=h(e.setb,ln)!==void 0,Qi=h(e.seta,ln)!==void 0;n[t++]=ti&&!Qi},n[t++]=1/0;for(var P=0,z=e.msg.length;P<z;P++)n[t++]=0;n[t++]=9999,e.nextanotb=o(),n[t++]=1/0;for(var V=0,L=e.msg.length;V<L;V++)n[t++]=0;n[t++]=9999,e.nextbnota=o();for(var Q=e.msg.length-1;Q>=0;Q-=1)e.i=Q,n[t++]=h(e.msg,e.i),e.anotb(),n[--t]?C(e.nextanotb,e.i,0):C(e.nextanotb,e.i,h(e.nextanotb,e.i+1)+1),n[t++]=h(e.msg,e.i),e.bnota(),n[--t]?C(e.nextbnota,e.i,0):C(e.nextbnota,e.i,h(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var ln=n[--t];n[t++]=oo(h(e.nextanotb,ln),h(e.nextbnota,ln))},e.bbeforea=function(){var ln=n[--t];n[t++]=oo(h(e.nextbnota,ln),h(e.nextanotb,ln))},e.cws=o(e.barcode.length*2+3),e.i=0,e.j=0;;){if(e.sam!=-1){C(e.cws,0,~~(e.sam/10)-1),C(e.cws,1,e.sam%10-1),e.j=2,e.cset="setb",e.mode=7;break}if(e.msglen==0){e.cset="setb",e.mode=1;break}if(e.msglen>=2){n[t++]=h(e.msg,0)==e.fn1,n[t++]=1,e.numsscr();var q=n[--t];n[t-1]=q;var ee=n[--t],X=n[--t];if(X&&ee>=2){e.cset="setc",e.mode=4,e.i=1;break}}if(h(e.msg,0)==e.fn1){e.cset="setb",e.mode=3,e.i=1;break}if(e.msglen>=2){n[t++]=0,e.numsscr();var ae=n[--t];n[t-1]=ae;var K=n[--t];if(K>=2&&K%2==0){e.cset="setc",e.mode=2;break}n[t++]=0,e.numsscr();var ie=n[--t];n[t-1]=ie;var ne=n[--t];if(ne>=3&&ne%2==1){n[t++]=h(e.msg,0),e.encb(),e.cset="setc",e.mode=5,e.i=1;break}var J=h(e.setb,h(e.msg,0))!==void 0;n[t++]=J,n[t++]=1,e.numsscr();var te=n[--t];n[t-1]=te;var $=n[--t],oe=n[--t];if(oe&&$>=2&&$%2==0){n[t++]=h(e.msg,0),e.encb(),e.cset="setc",e.mode=5,e.i=1;break}var we=h(e.setb,h(e.msg,0))!==void 0;n[t++]=we,n[t++]=1,e.numsscr();var be=n[--t];n[t-1]=be;var Te=n[--t],ye=n[--t];if(ye&&Te>=3&&Te%2==1){n[t++]=h(e.msg,0),e.encb(),n[t++]=h(e.msg,1),e.encb(),e.cset="setc",e.mode=6,e.i=2;break}var tt=h(e.setb,h(e.msg,0))!==void 0,Qe=h(e.setb,h(e.msg,1))!==void 0;n[t++]=tt&&Qe,n[t++]=2,e.numsscr();var Ge=n[--t];n[t-1]=Ge;var Xe=n[--t],Je=n[--t];if(Je&&Xe>=2&&Xe%2==0){n[t++]=h(e.msg,0),e.encb(),n[t++]=h(e.msg,1),e.encb(),e.cset="setc",e.mode=6,e.i=2;break}}if(n[t++]=0,e.abeforeb(),n[--t]){e.cset="seta",e.mode=0;break}e.cset="setb",e.mode=1;break}for(;e.i!=e.msglen;)for(n[t++]=e.i,e.numsscr(),e.nums=n[--t],e.nchars=n[--t];;){if(ce(e.cset,"seta")){if(e.i<e.msglen-1){n[t++]=h(e.msg,e.i),e.bnota(),n[t++]=e.i+1,e.abeforeb();var dt=n[--t];if(n[--t]&&dt){n[t++]=e.sb1,e.enca(),n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}}if(e.i<e.msglen-2){n[t++]=h(e.msg,e.i),e.bnota(),n[t++]=h(e.msg,e.i+1),e.bnota();var vt=n[--t],_t=n[--t];n[t++]=_d(_t,vt),n[t++]=e.i+2,e.abeforeb();var xt=n[--t];if(n[--t]&&xt){n[t++]=e.sb2,e.enca(),n[t++]=h(e.msg,e.i),e.encb(),n[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(n[t++]=h(e.msg,e.i),e.bnota(),n[--t]){n[t++]=e.swb,e.enca(),e.cset="setb";break}if(e.i<e.msglen-4){var bt=h(e.seta,h(e.msg,e.i+4))!==void 0;if(e.nums==4&&bt){n[t++]=e.sc2,e.enca();for(var kt=0;kt<2;kt++)h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.i<e.msglen-6){var Pt=h(e.seta,h(e.msg,e.i+6))!==void 0;if(e.nums==6&&Pt){n[t++]=e.sc3,e.enca();for(var Rt=0;Rt<3;Rt++)h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.nums>=4&&e.nums%2==0){n[t++]=e.swc,e.enca(),e.cset="setc";break}n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}if(ce(e.cset,"setb")){if(e.i<e.msglen-1){n[t++]=h(e.msg,e.i),e.anotb(),n[t++]=e.i+1,e.bbeforea();var Wt=n[--t];if(n[--t]&&Wt){n[t++]=e.sa1,e.encb(),n[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}}if(e.i<e.msglen-2){n[t++]=h(e.msg,e.i),e.anotb(),n[t++]=h(e.msg,e.i+1),e.anotb();var zt=n[--t],Ct=n[--t];n[t++]=_d(Ct,zt),n[t++]=e.i+2,e.bbeforea();var Yt=n[--t];if(n[--t]&&Yt){n[t++]=e.sa2,e.encb(),n[t++]=h(e.msg,e.i),e.enca(),n[t++]=h(e.msg,e.i+1),e.enca(),e.i=e.i+2;break}}if(n[t++]=h(e.msg,e.i),e.anotb(),n[--t]){n[t++]=e.swa,e.encb(),e.cset="seta";break}if(e.i<e.msglen-4){var jt=h(e.setb,h(e.msg,e.i+4))!==void 0;if(e.nums==4&&jt){n[t++]=e.sc2,e.encb();for(var an=0;an<2;an++)h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.i<e.msglen-6){var rn=h(e.setb,h(e.msg,e.i+6))!==void 0;if(e.nums==6&&rn){n[t++]=e.sc3,e.encb();for(var Kt=0;Kt<3;Kt++)h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.nums>=4&&e.nums%2==0){n[t++]=e.swc,e.encb(),e.cset="setc";break}n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(ce(e.cset,"setc")){if(e.nums>=2){h(e.msg,e.i)==e.fn1?(n[t++]=e.fn1,e.encc(),e.i=e.i+1):(n[t++]=O(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}if(e.i<e.msglen-1){var Jt=h(e.setb,h(e.msg,e.i))!==void 0;n[t++]=Jt,n[t++]=e.i+1,e.numsscr();var Zt=n[--t];n[t-1]=Zt;var Qt=n[--t],mn=n[--t];if(mn&&Qt>=2&&Qt%2==0){n[t++]=e.sb1,e.encc(),n[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}}if(e.i<e.msglen-1){var cn=h(e.setb,h(e.msg,e.i))!==void 0;n[t++]=cn,n[t++]=e.i+1,e.numsscr();var dn=n[--t];n[t-1]=dn;var Ht=n[--t],Bt=n[--t];if(Bt&&Ht>=3&&Ht%2==1){n[t++]=e.sb2,e.encc(),n[t++]=h(e.msg,e.i),e.encb(),n[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(e.i<e.msglen-2){var Y=h(e.setb,h(e.msg,e.i))!==void 0,le=h(e.setb,h(e.msg,e.i+1))!==void 0;n[t++]=Y&&le,n[t++]=e.i+2,e.numsscr();var se=n[--t];n[t-1]=se;var ge=n[--t],ve=n[--t];if(ve&&ge>=2&&ge%2==0){n[t++]=e.sb2,e.encc(),n[t++]=h(e.msg,e.i),e.encb(),n[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(e.i<e.msglen-3){var _e=h(e.setb,h(e.msg,e.i))!==void 0,pe=h(e.setb,h(e.msg,e.i+1))!==void 0;n[t++]=_e&&pe,n[t++]=e.i+2,e.numsscr();var Oe=n[--t];n[t-1]=Oe;var de=n[--t],ke=n[--t];if(ke&&de>=3&&de%2==1){n[t++]=e.sb3,e.encc(),n[t++]=h(e.msg,e.i),e.encb(),n[t++]=h(e.msg,e.i+1),e.encb(),n[t++]=h(e.msg,e.i+2),e.encb(),e.i=e.i+3;break}}if(e.i<e.msglen-3){var Ee=h(e.setb,h(e.msg,e.i))!==void 0,De=h(e.setb,h(e.msg,e.i+1))!==void 0,xe=h(e.setb,h(e.msg,e.i+2))!==void 0;n[t++]=Ee&&De&&xe,n[t++]=e.i+3,e.numsscr();var Ne=n[--t];n[t-1]=Ne;var je=n[--t],Se=n[--t];if(Se&&je>=2&&je%2==0){n[t++]=e.sb3,e.encc(),n[t++]=h(e.msg,e.i),e.encb(),n[t++]=h(e.msg,e.i+1),e.encb(),n[t++]=h(e.msg,e.i+2),e.encb(),e.i=e.i+3;break}}if(n[t++]=e.i,e.abeforeb(),n[--t]){n[t++]=e.swa,e.encc(),e.cset="seta";break}n[t++]=e.swb,e.encc(),e.cset="setb";break}break}e.cws=O(e.cws,0,e.j)}e.metrics=o([o([2,7]),o([3,12]),o([4,17]),o([5,22]),o([6,27]),o([7,32]),o([8,37]),o([9,42]),o([10,47]),o([11,52]),o([12,57]),o([13,62]),o([14,67]),o([15,72]),o([16,77])]),e.urows=e.rows;for(var ze=e.metrics,Pe=0,Be=ze.length;Pe<Be&&(e.m=h(ze,Pe),e.r=h(e.m,0),e.dcws=h(e.m,1),e.okay=!0,e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);Pe++);e.okay||(n[t++]="bwipp.code16kNoValidSymbol#15731",n[t++]="Maximum length exceeded or data too large for given options",Z()),n[t++]=1/0,W(e.cws);for(var at=0,Ze=R(e.dcws-e.cws.length);at<Ze;at++)n[t++]=103;e.cws=o(),n[t++]=1/0,n[t++]=R((e.r-2)*7+e.mode),W(e.cws),e.cws=o(),n[t++]=0;for(var ft=0,Ve=e.dcws;ft<=Ve;ft+=1){var $e=n[--t];n[t++]=R($e+(ft+2)*h(e.cws,ft))}e.c1=n[--t]%107,n[t++]=0;for(var Me=0,it=e.dcws;Me<=it;Me+=1){var st=n[--t];n[t++]=R(st+(Me+1)*h(e.cws,Me))}e.c2=R(n[--t]+e.c1*(e.dcws+2))%107,n[t++]=1/0,W(e.cws),n[t++]=e.c1,n[t++]=e.c2,e.cws=o();var mt=h(e.options,"debugcws")!==void 0;mt&&(n[t++]="bwipp.debugcws#15747",n[t++]=e.cws,Z()),e.encs=o(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","211133"]),e.startencs=o(["3211","2221","2122","1411","1132","1231","1114","3112","3211","2221","2122","1411","1132","1231","1114","3112"]),e.stopencsodd=o(["3211","2221","2122","1411","1132","1231","1114","3112","1132","1231","1114","3112","3211","2221","2122","1411"]),e.stopencseven=o(["2122","1411","1132","1231","1114","3112","1132","1231","1114","3112","3211","2221","2122","1411","3211","2221"]),e.sam==-1||~~(e.sam/10)%2==1?e.stopencs=e.stopencsodd:e.stopencs=e.stopencseven,e.rowbits=o(e.r);for(var Tt=0,Ot=e.r-1;Tt<=Ot;Tt+=1){e.i=Tt,n[t++]=1/0,n[t++]=10,Ie(h(e.startencs,e.i),function(){var ln=n[--t];n[t++]=ln-48});var Et=O(e.cws,e.i*5,5);n[t++]=1;for(var Dt=0,wt=Et.length;Dt<wt;Dt++)Ie(h(e.encs,h(Et,Dt)),function(){var ln=n[--t];n[t++]=ln-48});Ie(h(e.stopencs,e.i),function(){var ln=n[--t];n[t++]=ln-48}),n[t++]=1,e.sbs=o(),n[t++]=1/0;var en=e.sbs;n[t++]=1;for(var gt=0,un=en.length;gt<un;gt++)for(var Vt=n[t-1],fn=Vt==0?1:0,$n=0,ei=h(en,gt);$n<ei;$n++)n[t++]=fn;Rn(o(Ur()-1));var Dn=n[--t];n[t-1]=Dn;var ai=n[--t];n[t-1]=ai,n[t++]=e.rowbits,n[t++]=e.i;var zn=n[t-3],mi=n[t-1];C(n[t-2],mi,zn),t-=3}n[t++]=1/0;for(var Fn=0,Hn=81*e.sepheight;Fn<Hn;Fn++)n[t++]=1;for(var _n=0,vn=e.r-2;_n<=vn;_n+=1){e.i=_n;for(var kn=0,Ai=e.rowheight;kn<Ai;kn++)W(h(e.rowbits,e.i));for(var Ei=0,Ji=e.sepheight;Ei<Ji;Ei++){for(var nn=0;nn<10;nn++)n[t++]=0;for(var yn=0;yn<70;yn++)n[t++]=1;n[t++]=0}}for(var qn=0,Tn=e.rowheight;qn<Tn;qn++)W(h(e.rowbits,e.r-1));for(var Gn=0,gi=81*e.sepheight;Gn<gi;Gn++)n[t++]=1;e.pixs=o();var Vn=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",81],["pixy",~~(e.pixs.length/81)],["height",~~(e.pixs.length/81)/72],["width",81/72],["opt",e.options]]);n[t++]=Vn,e.dontdraw||Lt(),e=r}function dT(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.sam=-1,e.append=!1,e.rows=0,e.rowheight=8,e.sepheight=1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.rows!=0&&(e.rows<2||e.rows>8)&&(n[t++]="bwipp.code49badRows#15885",n[t++]="Code 49 must have 2 to 8 rows",Z()),e.rowheight<8&&(n[t++]="bwipp.code49badRowHeight#15889",n[t++]="Code 49 must have rowheight of at least 8",Z()),e.sepheight<1&&(n[t++]="bwipp.code49badSepHeight#15893",n[t++]="Code 49 must have sepheight of at least 1",Z()),e.append&&e.sam!=-1&&(n[t++]="bwipp.code49samAndAppend#15897",n[t++]="sam and append cannot be specified together",Z()),e.sam!=-1){n[t++]=!0;for(var i=0;i<1;i++){var a=e.sam;if(a<12||a>99){n[t-1]=!1;break}if(e.sam%10<2){n[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){n[t-1]=!1;break}}n[--t]||(n[t++]="bwipp.code49badSAM#15908",n[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 9 symbols',Z())}e.s1=-1,e.s2=-2,e.fn1=-3,e.fn2=-4,e.fn3=-5,e.ns=-6;var s=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=s,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var l=n[--t];e[n[--t]]=l,e.msglen=e.msg.length,Ie(e.msg,function(){n[--t]>127&&(n[t++]="bwipp.code49badCharacter#15931",n[t++]="Code 49 can only support ASCII characters with values 0 to 127",Z())}),e.charmap=o(["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%",e.s1,e.s2,e.fn1,e.fn2,e.fn3,e.ns]),e.charvals=new Map;for(var c=0;c<=48;c+=1){e.i=c;var d=h(e.charmap,e.i);if(n[t++]=d,ce(Ys(d),"stringtype")){var f=h(n[--t],0);n[t++]=f}C(e.charvals,n[--t],e.i)}e.combos=o(["1 ","1A","1B","1C","1D","1E","1F","1G","1H","1I","1J","1K","1L","1M","1N","1O","1P","1Q","1R","1S","1T","1U","1V","1W","1X","1Y","1Z","11","12","13","14","15","  ","16","17","18"," $"," %","19","10","1-","1.","1$"," +","1/"," -"," ."," /"," 0"," 1"," 2"," 3"," 4"," 5"," 6"," 7"," 8"," 9","1+","21","22","23","24","25","26"," A"," B"," C"," D"," E"," F"," G"," H"," I"," J"," K"," L"," M"," N"," O"," P"," Q"," R"," S"," T"," U"," V"," W"," X"," Y"," Z","27","28","29","20","2-","2.","2A","2B","2C","2D","2E","2F","2G","2H","2I","2J","2K","2L","2M","2N","2O","2P","2Q","2R","2S","2T","2U","2V","2W","2X","2Y","2Z","2$","2/","2+","2%","2 "]);for(var m=0;m<=127;m+=1){e.i=m;var g=h(e.combos,e.i);e.c1=h(g,0),e.c2=h(g,1),e.c1==49&&C(e.charvals,e.i,o([h(e.charvals,e.s1),h(e.charvals,e.c2)])),e.c1==50&&C(e.charvals,e.i,o([h(e.charvals,e.s2),h(e.charvals,e.c2)]))}e.encodealpha=function(){var Be=h(e.charvals,n[--t]);n[t++]=Be,qe(Ys(Be),"arraytype")&&Rn(o(1));var at=n[--t];H(e.cws,e.j,at),e.j=at.length+e.j},e.base48=function(){var Be=n[--t];n[t++]=0,Ie(Be,function(){var Et=n[--t],Dt=n[--t];n[t++]=R(Et-48+Dt*10)}),n[t++]=1/0;var at=n[t-2],Ze=n[t-3];n[t-3]=n[t-1],t-=2,n[t++]=at;for(var ft=0,Ve=Ze-1;ft<Ve;ft++){var $e=n[--t];n[t++]=$e%48,n[t++]=~~($e/48)}var Me=o(),it=1/0,st=Me;n[t++]=it,n[t++]=st;for(var mt=st.length-1;mt>=0;mt-=1){var Tt=n[--t];n[t++]=h(Tt,mt),n[t++]=Tt}t--;var Ot=o();H(e.cws,e.j,Ot),e.j=Ot.length+e.j},e.encodenumeric=function(){e.nums=n[--t];var Be=e.nums.length,at=Be%5;if(n[t++]="pre",n[t++]=Be,n[t++]=at,at!=2){var Ze=n[--t],ft=n[--t];n[t++]=R(ft-Ze)}else{var Ve=n[--t],$e=n[--t];n[t++]=R($e-Ve)-5}var Me=n[--t];e[n[--t]]=Me;for(var it=0,st=e.pre-1;it<=st;it+=5)n[t++]=3,n[t++]=O(e.nums,it,5),e.base48();e.nums=O(e.nums,e.pre,R(e.nums.length-e.pre));var mt=e.nums.length;n[t++]=mt,mt==1&&(n[t++]=h(e.nums,e.i),e.encodealpha());var Tt=n[t-1];Tt==3&&(n[t++]=2,n[t++]=e.nums,e.base48());var Ot=n[t-1];if(Ot==4){n[t++]=3,n[t++]=1/0,n[t++]=49,n[t++]=48,W(e.nums);var Et=o();n[t++]=Et,e.base48()}if(n[--t]==7){n[t++]=3,n[t++]=1/0,n[t++]=49,n[t++]=48,W(O(e.nums,0,4));var Dt=o();n[t++]=Dt,e.base48(),n[t++]=2,n[t++]=O(e.nums,4,3),e.base48()}},n[t++]=1/0;for(var v=0,y=e.msglen;v<y;v++)n[t++]=0;n[t++]=0,e.numericruns=o();for(var A=e.msglen-1;A>=0;A-=1){e.i=A;var w=h(e.msg,e.i);w>=48&&w<=57?C(e.numericruns,e.i,h(e.numericruns,e.i+1)+1):C(e.numericruns,e.i,0)}for(e.cws=o(e.msglen*2+1),e.samval=o([12,22,13,23,33,14,24,34,44,15,25,35,45,55,16,26,36,46,56,66,17,27,37,47,57,67,77,18,28,38,48,58,68,78,88,19,29,39,49,59,69,79,89,99]);;){if(e.append){e.mode=1,e.method="alpha",e.i=0,e.j=0;break}if(e.sam!=-1){e.mode=3,n[t++]=e.cws,n[t++]=0;for(var k=0;k<=43;k+=1)n[t++]=k,h(e.samval,k)!=e.sam&&t--;var E=n[--t],I=n[--t];C(n[--t],I,E+1),e.method="alpha",e.i=0,e.j=1;break}if(h(e.numericruns,0)>=5){e.mode=2,e.method="numeric",e.i=0,e.j=0;break}var T=h(e.charvals,h(e.msg,0));if(n[t++]=T,qe(Ys(T),"arraytype")){t--,e.mode=0,e.method="alpha",e.i=0,e.j=0;break}var N=h(n[--t],0)==43?4:5;e.mode=N,C(e.cws,0,h(h(e.charvals,h(e.msg,0)),1)),e.method="alpha",e.i=1,e.j=1;break}for(;e.i!=e.msglen;)for(;;){if(ce(e.method,"alpha")){if(h(e.numericruns,e.i)>=5){n[t++]=e.ns,e.encodealpha(),e.method="numeric";break}n[t++]=h(e.msg,e.i),e.encodealpha(),e.i=e.i+1;break}if(ce(e.method,"numeric")){if(h(e.numericruns,e.i)<5){n[t++]=e.ns,e.encodealpha(),e.method="alpha";break}n[t++]=O(e.msg,e.i,h(e.numericruns,e.i)),e.encodenumeric(),e.i=R(e.i+h(e.numericruns,e.i));break}}e.cws=O(e.cws,0,e.j),e.metrics=o([o([2,9]),o([3,16]),o([4,23]),o([5,30]),o([6,37]),o([7,42]),o([8,49])]),e.urows=e.rows;for(var j=e.metrics,B=0,U=j.length;B<U&&(e.m=h(j,B),e.r=h(e.m,0),e.dcws=h(e.m,1),e.okay=!0,e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);B++);e.okay||(n[t++]="bwipp.code49noValidSymbol#16125",n[t++]="Maximum length exceeded",Z()),n[t++]=1/0,W(e.cws);for(var F=0,P=R(e.dcws-e.cws.length);F<P;F++)n[t++]=48;e.cws=o(),e.ccs=o(e.r*8),e.j=0;for(var z=0,V=e.r-2;z<=V;z+=1){e.i=z,e.cc=O(e.cws,e.j,7),H(e.ccs,e.i*8,e.cc);var L=e.cc;n[t++]=e.ccs,n[t++]=e.i*8+7,n[t++]=0;for(var Q=0,q=L.length;Q<q;Q++){var ee=n[--t];n[t++]=R(ee+h(L,Q))}var X=n[--t],ae=n[--t];C(n[--t],ae,X%49),e.j=e.j+7}e.j<e.dcws&&H(e.ccs,e.ccs.length-8,O(e.cws,e.j,R(e.dcws-e.j))),e.cr7=R((e.r-2)*7+e.mode),C(e.ccs,e.ccs.length-2,e.cr7);var K=o([1,9,31,26,2,12,17,23,37,18,22,6,27,44,15,43,39,11,13,5,41,33,36,8,4,32,3,19,40,25,29,10,24,30]);n[t++]=K,n[t++]=K,n[t++]=1/0;var ie=n[--t],ne=O(n[--t],0,32);n[t++]=ie,n[t++]=20,W(ne),e.weightx=o();var J=n[t-1];n[t++]=J,n[t++]=1/0;var te=n[--t],$=O(n[--t],1,32);n[t++]=te,n[t++]=16,W($),e.weighty=o(),n[t++]=1/0;var oe=n[--t],we=O(n[--t],2,32);if(n[t++]=oe,n[t++]=38,W(we),e.weightz=o(),e.calccheck=function(){e.weights=n[--t],e.score=0;for(var Be=0,at=~~((e.r-1)*8/2)-1;Be<=at;Be+=1)e.i=Be,e.score=R((h(e.ccs,e.i*2)*49+h(e.ccs,e.i*2+1))*h(e.weights,e.i+1)+e.score);n[t++]=e.score},e.lastrow=O(e.ccs,e.ccs.length-8,8),e.r>=7){n[t++]=e.cr7*h(e.weightz,0),n[t++]=e.weightz,e.calccheck();var be=n[--t],Te=R(n[--t]+be)%2401;n[t++]=~~(Te/49),n[t++]=Te%49,Rn(o(2)),n[t++]=e.lastrow,n[t++]=0;var ye=n[t-3],tt=n[t-1];H(n[t-2],tt,ye),t-=3}e.wr1=R(h(e.lastrow,0)*49+h(e.lastrow,1)),n[t++]=e.cr7*h(e.weighty,0),n[t++]=e.weighty,e.calccheck();var Qe=n[--t],Ge=R(n[--t]+Qe+e.wr1*h(e.weighty,e.r*4-3))%2401;e.wr2=Ge,n[t++]=~~(Ge/49),n[t++]=Ge%49,Rn(o(2)),n[t++]=e.lastrow,n[t++]=2;var Xe=n[t-3],Je=n[t-1];H(n[t-2],Je,Xe),t-=3,n[t++]=e.cr7*h(e.weightx,0),n[t++]=e.weightx,e.calccheck();var dt=n[--t],vt=R(n[--t]+dt+e.wr1*h(e.weightx,e.r*4-3)+e.wr2*h(e.weightx,e.r*4-2))%2401;n[t++]=~~(vt/49),n[t++]=vt%49,Rn(o(2)),n[t++]=e.lastrow,n[t++]=4;var _t=n[t-3],xt=n[t-1];H(n[t-2],xt,_t),t-=3;var bt=O(e.ccs,e.ccs.length-8,7);n[t++]=0;for(var kt=0,Pt=bt.length;kt<Pt;kt++){var Rt=n[--t];n[t++]=R(Rt+h(bt,kt))}C(e.ccs,e.ccs.length-1,n[--t]%49);var Wt=h(e.options,"debugcws")!==void 0;Wt&&(n[t++]="bwipp.debugcws#16196",n[t++]=e.ccs,Z()),e.patterns=o([o(["11521132","25112131","14212132","25121221","14221222","12412132","23321221","12421222","21521221","15112222","15121312","13312222","24221311","13321312","11512222","22421311","11521312","25112311","14212312","23312311","12412312","21512311","16121131","14321131","12521131","15212131","15221221","13412131","13421221","11612131","16112221","16121311","14312221","14321311","12512221","12521311","15212311","13412311","11612311","11131135","31131133","51131131","21122134","41122132","21131224","41131222","11113135","31113133","51113131","11122225","31122223","51122221","11131315","31131313","51131311","21113224","41113222","21122314","41122312","11113315","31113313","51113311","12131134","32131132","21231133","41231131","22122133","42122131","11222134","22131223","42131221","11231224","31231222","12113134","32113132","12122224","32122222","12131314","32131312","21231313","41231311","22113223","42113221","11213224","22122313","42122311","11222314","31222312","12113314","32113312","21213313","41213311","13131133","33131131","22231132","11331133","31331131","23122132","12222133","23131222","12231223","32231221","21331222","13113133","33113131","13122223","33122221","11313133","13131313","33131311","11322223","22231312","11331313","31331311","23113222","12213223","23122312","12222313","32222311","21322312","13113313","33113311","22213312","11313313","31313311","14131132","23231131","12331132","21431131","24122131","13222132","24131221","13231222","11422132","22331221","11431222","14113132","14122222","12313132","14131312","12322222","23231311","12331312","21431311","24113221","13213222","24122311","13222312","11413222","22322311","11422312","14113312","23213311","12313312","21413311","15131131","13331131","14222131","14231221","12422131","12431221","15113131","15122221","13313131","15131311","13322221","11513131","13331311","11522221","14213221","14222311","12413221","12422311","15113311","13313311","11513311","11141134","31141132","21132133","41132131","21141223","41141221","11123134","31123132","11132224","31132222","11141314","31141312","21114133","41114131","21123223","41123221","21132313","41132311","11114224","31114222","11123314","31123312","21114313","41114311","12141133","32141131","21241132","22132132","11232133","22141222","11241223","31241221","12123133","32123131","12132223","32132221","12141313","32141311","21241312","22114132","11214133","22123222","11223223","22132312","11232313","31232311","12114223","32114221","12123313","32123311","21223312","22114312","11214313","31214311","13141132","22241131","11341132","23132131","12232132","23141221","12241222","21341221","13123132","13132222","11323132","13141312","11332222","22241311","11341312","23114131","12214132","23123221","12223222","23132311","12232312","21332311","13114222","13123312","11314222","22223311","11323312","23114311","12214312","21314311","14141131","12341131","13232131","13241221","11432131","14123131","14132221","12323131","14141311","12332221","12341311","13214131","13223221","11414131","13232311","11423221","11432311","14114221","14123311","12314221","12323311","13214311","11414311","11151133","31151131","21142132","21151222","11133133","31133131","11142223","31142221","11151313","31151311","21124132","21133222","21142312","11115133","31115131","11124223","31124221","11133313","31133311","21115222","21124312","12151132","21251131","22142131","11242132","22151221","11251222","12133132","12142222","12151312","21251311","22124131","11224132","22133221","11233222","22142311","11242312","12115132","12124222","12133312","21233311","22115221","11215222","22124311","11224312","13151131","12242131","12251221","13133131","13142221","11333131","13151311","11342221","12224131","12233221","12242311","13115131","13124221","11315131","13133311","11324221","11333311","12215221","12224311","11161132","21152131","21161221","11143132","11152222","11161312","21134131","21143221","21152311","11125132","11134222","11143312","21116131","21125221","21134311","12161131","11252131","12143131","12152221","12161311","11234131","11243221","11252311","12125131","12134221","12143311","11216131","11225221","11234311","11111236","31111234","51111232","21111325","41111323","61111321","11111416","31111414","51111412","31211143","51211141","12111235","32111233","52111231","21211234","41211232","22111324","42111322","11211325","31211323","51211321","12111415","32111413","52111411","21211414","41211412","12211144","32211142","21311143","41311141","13111234","33111232","22211233","42211231","11311234","31311232","23111323","43111321","12211324","32211322","21311323","41311321","13111414","33111412","22211413","42211411","11311414","31311412","13211143","33211141","22311142","11411143","31411141","14111233","34111231","23211232","12311233","32311231","21411232","24111322","13211323","33211321","22311322","11411323","31411321","14111413","34111411","23211412","12311413","32311411","21411412","14211142","23311141","12411142","21511141","15111232","24211231","13311232","22411231","11511232","25111321","14211322","23311321","12411322","21511321","15111412","24211411","13311412","22411411","11511412","15211141","13411141","11611141","16111231","14311231","12511231","15211321","13411321","11611321","16111411","14311411","12511411","21121144","41121142","11112145","31112143","51112141","11121235","31121233","51121231","21112234","41112232","21121324","41121322","11112325","31112323","51112321","11121415","31121413","51121411","21112414","41112412","22121143","42121141","11221144","31221142","12112144","32112142","12121234","32121232","21221233","41221231","22112233","42112231","11212234","22121323","42121321","11221324","31221322","12112324","32112322","12121414","32121412","21221413","41221411","22112413","42112411","11212414","31212412","23121142","12221143","32221141","21321142","13112143","33112141","13121233","33121231","11312143","22221232","11321233","31321231","23112232","12212233","23121322","12221323","32221321","21321322","13112323","33112321","13121413","33121411","11312323","22221412","11321413","31321411","23112412","12212413","32212411","21312412","24121141","13221142","22321141","11421142","14112142","14121232","12312142","23221231","12321232","21421231","24112231","13212232","24121321","13221322","11412232","22321321","11421322","14112322","14121412","12312322","23221411","12321412","21421411","24112411","13212412","22312411","11412412","14221141","12421141","15112141","15121231","13312141","13321231","11512141","11521231","14212231","14221321","12412231","12421321","15112321","15121411","13312321","13321411","11512321","11521411","14212411","12412411","21131143","41131141","11122144","31122142","11131234","31131232","21113143","41113141","21122233","41122231","21131323","41131321","11113234","31113232","11122324","31122322","11131414","31131412","21113323","41113321","21122413","41122411","11113414","31113412","22131142","11231143","31231141","12122143","32122141","12131233","32131231","21231232","22113142","11213143","22122232","11222233","22131322","11231323","31231321","12113233","32113231","12122323","32122321","12131413","32131411","21231412","22113322","11213323","22122412","11222413","31222411","12113413","32113411","21213412","23131141","12231142","21331141","13122142","13131232","11322142","22231231","11331232","23113141","12213142","23122231","12222232","23131321","12231322","21331321","13113232","13122322","11313232","13131412","11322322","22231411","11331412","23113321","12213322","23122411","12222412","21322411","13113412","22213411","11313412","13231141","11431141","14122141","14131231","12322141","12331231","13213141","13222231","11413141","13231321","11422231","11431321","14113231","14122321","12313231","14131411","12322321","12331411","13213321","13222411","11413321","11422411","14113411","12313411","21141142","11132143","31132141","11141233","31141231","21123142","21132232","21141322","11114143","31114141","11123233","31123231","11132323","31132321","11141413","31141411","21114232","21123322","21132412","11114323","31114321","11123413","31123411","22141141","11241142","12132142","12141232","21241231","22123141","11223142","22132231","11232232","22141321","11241322","12114142","12123232","12132322","12141412","21241411","22114231","11214232","22123321","11223322","22132411","11232412","12114322","12123412","21223411","12241141","13132141","13141231","11332141","11341231","12223141","12232231","12241321","13114141","13123231","11314141","13132321","11323231","13141411","11332321","11341411","12214231","12223321","12232411","13114321","13123411","11314321","11323411","21151141","11142142","11151232","21133141","21142231","21151321","11124142","11133232","11142322","11151412","21115141","21124231","21133321","21142411","11115232","11124322","11133412","11251141","12142141","12151231","11233141","11242231","11251321","12124141","12133231","12142321","12151411","11215141","11224231","11233321","11242411","12115231","12124321","12133411","11152141","11161231","11134141","11143231","11152321","11161411","11116141","11125231","11134321","11143411","21111244","41111242","11111335","31111333","51111331","21111424","41111422","11111515","31111513","51111511","21211153","41211151","22111243","42111241","11211244","31211242","12111334","32111332","21211333","41211331","22111423","42111421","11211424","31211422","12111514","32111512","21211513","41211511","22211152","11311153","31311151","23111242","12211243","32211241","21311242","13111333","33111331","22211332","11311333","31311331","23111422","12211423","32211421","21311422","13111513","33111511","22211512","11311513","31311511","23211151","12311152","21411151","24111241","13211242","22311241","11411242","14111332","23211331","12311332","21411331","24111421","13211422","22311421","11411422","14111512","23211511","12311512","21411511","13311151","11511151","14211241","12411241","15111331","13311331","11511331","14211421","12411421","15111511","13311511","11511511","31121152","21112153","41112151","21121243","41121241","11112244","31112242","11121334","31121332","21112333","41112331","21121423","41121421","11112424","31112422","11121514","31121512","21112513","41112511","12121153","32121151","21221152","22112152","11212153","22121242","11221243","31221241","12112243","32112241","12121333","32121331","21221332","22112332","11212333","22121422","11221423","31221421","12112423","32112421","12121513","32121511","21221512","22112512","11212513","31212511","13121152","22221151","11321152","23112151","12212152","23121241","12221242","21321241","13112242","13121332","11312242","22221331","11321332","23112331","12212332","23121421","12221422","21321421","13112422","13121512","11312422","22221511","11321512","23112511","12212512","21312511","14121151","12321151","13212151","13221241","11412151","11421241","14112241","14121331","12312241","12321331","13212331","13221421","11412331","11421421","14112421","14121511","12312421","12321511","13212511","11412511","11131153","31131151","21122152","21131242","11113153","31113151","11122243","31122241","11131333","31131331","21113242","21122332","21131422","11113333","31113331","11122423","31122421","11131513","31131511","21113422","21122512","12131152","21231151","22122151","11222152","22131241","11231242","12113152","12122242","12131332","21231331","22113241","11213242","22122331","11222332","22131421","11231422","12113332","12122422","12131512","21231511","22113421","11213422","22122511","11222512","13131151","11331151","12222151","12231241","13113151","13122241","11313151","13131331","11322241","11331331","12213241","12222331","12231421","13113331","13122421","11313331","13131511","11322421","11331511","12213421","12222511","11141152","21132151","21141241","11123152","11132242","11141332","21114151","21123241","21132331","21141421","11114242","11123332","11132422","11141512","21114331","21123421","21132511","12141151","11232151","11241241","12123151","12132241","12141331","11214151","11223241","11232331","11241421","12114241","12123331","12132421","12141511","11214331","11223421","11232511","11151151","11133151","11142241","11151331","11115151","11124241","11133331","11142421","11151511","11111254","31111252","21111343","41111341","11111434","31111432","21111523","41111521","11111614","31111612","31211161","12111253","32111251","21211252","22111342","11211343","31211341","12111433","32111431","21211432","22111522","11211523","31211521","12111613","32111611","21211612","12211162","21311161","13111252","22211251","11311252","23111341","12211342","21311341","13111432","22211431","11311432","23111521","12211522","21311521","13111612","22211611","11311612","13211161","11411161","14111251","12311251","13211341","11411341","14111431","12311431","13211521","11411521","14111611","12311611","21121162","11112163","31112161","11121253","31121251","21112252","21121342","11112343","31112341","11121433","31121431","21112432","21121522","11112523","31112521","11121613","31121611","22121161","11221162","12112162","12121252","21221251","22112251","11212252","22121341","11221342","12112342","12121432","21221431","22112431","11212432","22121521","11221522","12112522","12121612","21221611","12221161","13112161","13121251","11312161","11321251","32121115","52121113","21221116","41221114","61221112","22112116","42112114","31212115","51212113","13121116","33121114","22221115","42221113","11321116","31321114","51321112","23112115","43112113","12212116","32212114","52212112","21312115","41312113","61312111","14121115","34121113","23221114","43221112","12321115","32321113","52321111","21421114","41421112","24112114","13212115","33212113","22312114","42312112","11412115","31412113","51412111","15121114","24221113","13321114","33321112","22421113","42421111","11521114","31521112","25112113","14212114","34212112","23312113","43312111","12412114","32412112","21512113","41512111","16121113","25221112","14321113","34321111","23421112","12521113","32521111","15212113","24312112","13412113","33412111","22512112","11612113","31612111","31131115","51131113","21122116","41122114","61122112","31113115","51113113","12131116","32131114","52131112","21231115","41231113","61231111","22122115","42122113","11222116","31222114","51222112","12113116","32113114","52113112","21213115","41213113","61213111","13131115","33131113","22231114","42231112","11331115","31331113","51331111","23122114","43122112","12222115","32222113","52222111","21322114","41322112","13113115","33113113","22213114","42213112","11313115","31313113","51313111","14131114","34131112","23231113","43231111","12331114","32331112","21431113","41431111","24122113","13222114","33222112","22322113","42322111","11422114","31422112","14113114","34113112","23213113","43213111","12313114","32313112","21413113","41413111","15131113","24231112","13331113","33331111","22431112","25122112","14222113","34222111","23322112","12422113","32422111","21522112","15113113","24213112","13313113","33313111","22413112","11513113","31513111","16131112","25231111","14331112","23431111","15222112","24322111","13422112","22522111","16113112","25213111","14313112","23413111","12513112","21613111","11141116","31141114","51141112","21132115","41132113","61132111","11123116","31123114","51123112","21114115","41114113","61114111","12141115","32141113","52141111","21241114","41241112","22132114","42132112","11232115","31232113","51232111","12123115","32123113","52123111","21223114","41223112","22114114","42114112","11214115","31214113","51214111","13141114","33141112","22241113","42241111","11341114","31341112","23132113","43132111","12232114","32232112","21332113","41332111","13123114","33123112","22223113","42223111","11323114","31323112","23114113","43114111","12214114","32214112","21314113","41314111","14141113","34141111","23241112","12341113","32341111","24132112","13232113","33232111","22332112","11432113","31432111","14123113","34123111","23223112","12323113","32323111","21423112","24114112","13214113","33214111","22314112","11414113","31414111","15141112","24241111","13341112","25132111","14232112","23332111","12432112","15123112","24223111","13323112","22423111","11523112","25114111","14214112","23314111","12414112","21514111","16141111","14341111","15232111","13432111","16123111","14323111","12523111","15214111","13414111","11614111","11151115","31151113","51151111","21142114","41142112","11133115","31133113","51133111","21124114","41124112","11115115","31115113","51115111","12151114","32151112","21251113","41251111","22142113","42142111","11242114","31242112","12133114","32133112","21233113","41233111","22124113","42124111","11224114","31224112","12115114","32115112","21215113","41215111","13151113","33151111","22251112","23142112","12242113","32242111","21342112","13133113","33133111","22233112","11333113","31333111","23124112","12224113","32224111","21324112","13115113","33115111","22215112","11315113","31315111","14151112","23251111","24142111","13242112","22342111","14133112","23233111","12333112","21433111","24124111","13224112","22324111","11424112","14115112","23215111","12315112","21415111","15151111","14242111","15133111","13333111","14224111","12424111","15115111","13315111","11515111","11161114","31161112","21152113","41152111","11143114","31143112","21134113","41134111","11125114","31125112","21116113","41116111","12161113","32161111","22152112","11252113","31252111","12143113","32143111","21243112","22134112","11234113","31234111","12125113","32125111","21225112","22116112","11216113","31216111","13161112","23152111","12252112","13143112","22243111","11343112","23134111","12234112","21334111","13125112","22225111","11325112","23116111","12216112","21316111","14161111","13252111","14143111","12343111","13234111","11434111","14125111","12325111","13216111","11416111","31111216","51111214","31211125","51211123","32111215","52111213","21211216","41211214","61211212","12211126","32211124","52211122","21311125","41311123","61311121","13111216","33111214","22211215","42211213","11311216","31311214","51311212","13211125","33211123","22311124","42311122","11411125","31411123","51411121","14111215","34111213","23211214","43211212","12311215","32311213","52311211","21411214","41411212","14211124","34211122","23311123","43311121","12411124","32411122","21511123","41511121","15111214","24211213","13311214","33311212","22411213","42411211","11511214","31511212","15211123","24311122","13411123","33411121","22511122","11611123","31611121","16111213","25211212","14311213","34311211","23411212","12511213","32511211","21611212","21121126","41121124","61121122","31112125","51112123","31121215","51121213","21112216","41112214","61112212","22121125","42121123","11221126","31221124","51221122","12112126","32112124","52112122","12121216","32121214","52121212","21221215","41221213","61221211","22112215","42112213","11212216","31212214","51212212","23121124","43121122","12221125","32221123","52221121","21321124","41321122","13112125","33112123","13121215","33121213","11312125","22221214","42221212","11321215","31321213","51321211","23112214","43112212","12212215","32212213","52212211","21312214","41312212","24121123","13221124","33221122","22321123","42321121","11421124","31421122","14112124","34112122","14121214","34121212","12312124","23221213","43221211","12321214","32321212","21421213","41421211","24112213","13212214","33212212","22312213","42312211","11412214","31412212","25121122","14221123","34221121","23321122","12421123","32421121","21521122","15112123","15121213","13312123","24221212","13321213","33321211","11512123","22421212","11521213","31521211","25112212","14212213","34212211","23312212","12412213","32412211","21512212","15221122","24321121","13421122","22521121","16112122","16121212","14312122","25221211","14321212","12512122","23421211","12521212","15212212","24312211","13412212","22512211","11612212","21131125","41131123","61131121","11122126","31122124","51122122","11131216","31131214","51131212","21113125","41113123","61113121","21122215","41122213","61122211","11113216","31113214","51113212","22131124","42131122","11231125","31231123","51231121","12122125","32122123","52122121","12131215","32131213","52131211","21231214","41231212","22113124","42113122","11213125","22122214","42122212","11222215","31222213","51222211","12113215","32113213","52113211","21213214","41213212","23131123","43131121","12231124","32231122","21331123","41331121","13122124","33122122","13131214","33131212","11322124","22231213","42231211","11331214","31331212","23113123","43113121","12213124","23122213","43122211","12222214","32222212","21322213","41322211","13113214","33113212","22213213","42213211","11313214","31313212","24131122","13231123","33231121","22331122","11431123","31431121","14122123","34122121","14131213","34131211","12322123","23231212","12331213","32331211","21431212","24113122","13213123","24122212","13222213","33222211","11413123","22322212","11422213","31422211","14113213","34113211","23213212","12313213","32313211","21413212","25131121","14231122","23331121","12431122","15122122","15131212","13322122","24231211","13331212","11522122","22431211","25113121","14213122","25122211","14222212","12413122","23322211","12422212","21522211","15113212","24213211","13313212","22413211","11513212","15231121","13431121","16122121","16131211","14322121","14331211","12522121","15213121","15222211","13413121","13422211","11613121","16113211","14313211","12513211","21141124","41141122","11132125","31132123","51132121","11141215","31141213","51141211","21123124","41123122","21132214","41132212","11114125","31114123","51114121","11123215","31123213","51123211","21114214","41114212","22141123","42141121","11241124","31241122","12132124","32132122","12141214","32141212","21241213","41241211","22123123","42123121","11223124","22132213","42132211","11232214","31232212","12114124","32114122","12123214","32123212","21223213","41223211","22114213","42114211","11214214","31214212","23141122","12241123","32241121","21341122","13132123","33132121","13141213","33141211","11332123","22241212","11341213","31341211","23123122","12223123","23132212","12232213","32232211","21332212","13114123","33114121","13123213","33123211","11314123","22223212","11323213","31323211","23114212","12214213","32214211","21314212","24141121","13241122","22341121","14132122","14141212","12332122","23241211","12341212","24123121","13223122","24132211","13232212","11423122","22332211","11432212","14114122","14123212","12314122","23223211","12323212","21423211","24114211","13214212","22314211","11414212","14241121","15132121","15141211","13332121","13341211","14223121","14232211","12423121","12432211","15114121","15123211","13314121","13323211","11514121","11523211","14214211","12414211","21151123","41151121","11142124","31142122","11151214","31151212","21133123","41133121","21142213","41142211","11124124","31124122","11133214","31133212","21115123","41115121","21124213","41124211","11115214","31115212","22151122","11251123","31251121","12142123","32142121","12151213","32151211","21251212","22133122","11233123","22142212","11242213","31242211","12124123","32124121","12133213","32133211","21233212","22115122","11215123","22124212","11224213","31224211","12115213","32115211","21215212","23151121","12251122","13142122","13151212","11342122","22251211","23133121","12233122","23142211","12242212","21342211","13124122","13133212","11324122","22233211","11333212","23115121","12215122","23124211","12224212","21324211","13115212","22215211","11315212","13251121","14142121","14151211","12342121","13233121","13242211","11433121","14124121","14133211","12324121","12333211","13215121","13224211","11415121","11424211","14115211","12315211","21161122","11152123","31152121","11161213","31161211","21143122","21152212","11134123","31134121","11143213","31143211","21125122","21134212","11116123","31116121","11125213","31125211","22161121","12152122","12161212","22143121","11243122","22152211","11252212","12134122","12143212","21243211","22125121","11225122","22134211","11234212","12116122","12125212","21225211","13152121","13161211","12243121","12252211","13134121","13143211","11334121","11343211","12225121","12234211","13116121","13125211","11316121","11325211","21111226","41111224","61111222","31111315","51111313","21211135","41211133","61211131","22111225","42111223","11211226","31211224","51211222","12111316","32111314","52111312","21211315","41211313","61211311","22211134","42211132","11311135","31311133","51311131","23111224","43111222","12211225","32211223","52211221","21311224","41311222","13111315","33111313","22211314","42211312","11311315","31311313","51311311","23211133","43211131","12311134","32311132","21411133","41411131","24111223","13211224","33211222","22311223","42311221","11411224","31411222","14111314","34111312","23211313","43211311","12311314","32311312","21411313","41411311","24211132","13311133","33311131","22411132","11511133","31511131","25111222","14211223","34211221","23311222","12411223","32411221","21511222","15111313","24211312","13311313","33311311","22411312","11511313","31511311","25211131","14311132","23411131","12511132","21611131","15211222","24311221","13411222","22511221","11611222","16111312","25211311","14311312","23411311","12511312","21611311","31121134","51121132","21112135","41112133","61112131","21121225","41121223","61121221","11112226","31112224","51112222","11121316","31121314","51121312","21112315","41112313","61112311","12121135","32121133","52121131","21221134","41221132","22112134","42112132","11212135","22121224","42121222","11221225","31221223","51221221","12112225","32112223","52112221","12121315","32121313","52121311","21221314","41221312","22112314","42112312","11212315","31212313","51212311","13121134","33121132","22221133","42221131","11321134","31321132","23112133","43112131","12212134","23121223","43121221","12221224","32221222","21321223","41321221","13112224","33112222","13121314","33121312","11312224","22221313","42221311","11321314","31321312","23112313","43112311","12212314","32212312","21312313","41312311","14121133","34121131","23221132","12321133","32321131","21421132","24112132","13212133","24121222","13221223","33221221","11412133","22321222","11421223","31421221","14112223","34112221","14121313","34121311","12312223","23221312","12321313","32321311","21421312","24112312","13212313","33212311","22312312","11412313","31412311","15121132","24221131","13321132","22421131"]),o(["22121116","42121114","31221115","51221113","32112115","52112113","21212116","41212114","61212112","23121115","43121113","12221116","32221114","52221112","21321115","41321113","61321111","13112116","33112114","22212115","42212113","11312116","31312114","51312112","24121114","13221115","33221113","22321114","42321112","11421115","31421113","51421111","14112115","34112113","23212114","43212112","12312115","32312113","52312111","21412114","41412112","25121113","14221114","34221112","23321113","43321111","12421114","32421112","21521113","41521111","15112114","24212113","13312114","33312112","22412113","42412111","11512114","31512112","15221113","24321112","13421113","33421111","22521112","16112113","25212112","14312113","34312111","23412112","12512113","32512111","21612112","21131116","41131114","61131112","31122115","51122113","21113116","41113114","61113112","22131115","42131113","11231116","31231114","51231112","12122116","32122114","52122112","21222115","41222113","61222111","22113115","42113113","11213116","31213114","51213112","23131114","43131112","12231115","32231113","52231111","21331114","41331112","13122115","33122113","22222114","42222112","11322115","31322113","51322111","23113114","43113112","12213115","32213113","52213111","21313114","41313112","24131113","13231114","33231112","22331113","42331111","11431114","31431112","14122114","34122112","23222113","43222111","12322114","32322112","21422113","41422111","24113113","13213114","33213112","22313113","42313111","11413114","31413112","25131112","14231113","34231111","23331112","12431113","32431111","15122113","24222112","13322113","33322111","22422112","11522113","31522111","25113112","14213113","34213111","23313112","12413113","32413111","21513112","15231112","24331111","13431112","16122112","25222111","14322112","23422111","12522112","15213112","24313111","13413112","22513111","11613112","21141115","41141113","61141111","11132116","31132114","51132112","21123115","41123113","61123111","11114116","31114114","51114112","22141114","42141112","11241115","31241113","51241111","12132115","32132113","52132111","21232114","41232112","22123114","42123112","11223115","31223113","51223111","12114115","32114113","52114111","21214114","41214112","23141113","43141111","12241114","32241112","21341113","41341111","13132114","33132112","22232113","42232111","11332114","31332112","23123113","43123111","12223114","32223112","21323113","41323111","13114114","33114112","22214113","42214111","11314114","31314112","24141112","13241113","33241111","22341112","14132113","34132111","23232112","12332113","32332111","21432112","24123112","13223113","33223111","22323112","11423113","31423111","14114113","34114111","23214112","12314113","32314111","21414112","25141111","14241112","23341111","15132112","24232111","13332112","22432111","25123111","14223112","23323111","12423112","21523111","15114112","24214111","13314112","22414111","11514112","15241111","16132111","14332111","15223111","13423111","16114111","14314111","12514111","21151114","41151112","11142115","31142113","51142111","21133114","41133112","11124115","31124113","51124111","21115114","41115112","22151113","42151111","11251114","31251112","12142114","32142112","21242113","41242111","22133113","42133111","11233114","31233112","12124114","32124112","21224113","41224111","22115113","42115111","11215114","31215112","23151112","12251113","32251111","13142113","33142111","22242112","11342113","31342111","23133112","12233113","32233111","21333112","13124113","33124111","22224112","11324113","31324111","23115112","12215113","32215111","21315112","24151111","13251112","14142112","23242111","12342112","24133111","13233112","22333111","11433112","14124112","23224111","12324112","21424111","24115111","13215112","22315111","11415112","14251111","15142111","13342111","14233111","12433111","15124111","13324111","11524111","14215111","12415111","21161113","41161111","11152114","31152112","21143113","41143111","11134114","31134112","21125113","41125111","11116114","31116112","22161112","12152113","32152111","21252112","22143112","11243113","31243111","12134113","32134111","21234112","22125112","11225113","31225111","12116113","32116111","21216112","23161111","13152112","22252111","23143111","12243112","21343111","13134112","22234111","11334112","23125111","12225112","21325111","13116112","22216111","11316112","14152111","13243111","14134111","12334111","13225111","11425111","14116111","12316111","41111215","61111213","21211126","41211124","61211122","22111216","42111214","31211215","51211213","22211125","42211123","11311126","31311124","51311122","23111215","43111213","12211216","32211214","52211212","21311215","41311213","61311211","23211124","43211122","12311125","32311123","52311121","21411124","41411122","24111214","13211215","33211213","22311214","42311212","11411215","31411213","51411211","24211123","13311124","33311122","22411123","42411121","11511124","31511122","25111213","14211214","34211212","23311213","43311211","12411214","32411212","21511213","41511211","25211122","14311123","34311121","23411122","12511123","32511121","21611122","15211213","24311212","13411213","33411211","22511212","11611213","31611211","31121125","51121123","21112126","41112124","61112122","21121216","41121214","61121212","31112215","51112213","12121126","32121124","52121122","21221125","41221123","61221121","22112125","42112123","11212126","22121215","42121213","11221216","31221214","51221212","12112216","32112214","52112212","21212215","41212213","61212211","13121125","33121123","22221124","42221122","11321125","31321123","51321121","23112124","43112122","12212125","23121214","43121212","12221215","32221213","52221211","21321214","41321212","13112215","33112213","22212214","42212212","11312215","31312213","51312211","14121124","34121122","23221123","43221121","12321124","32321122","21421123","41421121","24112123","13212124","24121213","13221214","33221212","11412124","22321213","42321211","11421214","31421212","14112214","34112212","23212213","43212211","12312214","32312212","21412213","41412211","15121123","24221122","13321123","33321121","22421122","11521123","31521121","25112122","14212123","25121212","14221213","34221211","12412123","23321212","12421213","32421211","21521212","15112213","24212212","13312213","33312211","22412212","11512213","31512211","16121122","25221121","14321122","23421121","12521122","15212122","15221212","13412122","24321211","13421212","11612122","22521211","16112212","25212211","14312212","23412211","12512212","21612211","11131126","31131124","51131122","21122125","41122123","61122121","21131215","41131213","61131211","11113126","31113124","51113122","11122216","31122214","51122212","21113215","41113213","61113211","12131125","32131123","52131121","21231124","41231122","22122124","42122122","11222125","22131214","42131212","11231215","31231213","51231211","12113125","32113123","52113121","12122215","32122213","52122211","21222214","41222212","22113214","42113212","11213215","31213213","51213211","13131124","33131122","22231123","42231121","11331124","31331122","23122123","43122121","12222124","23131213","43131211","12231214","32231212","21331213","41331211","13113124","33113122","13122214","33122212","11313124","22222213","42222211","11322214","31322212","23113213","43113211","12213214","32213212","21313213","41313211","14131123","34131121","23231122","12331123","32331121","21431122","24122122","13222123","24131212","13231213","33231211","11422123","22331212","11431213","31431211","14113123","34113121","14122213","34122211","12313123","23222212","12322213","32322211","21422212","24113212","13213213","33213211","22313212","11413213","31413211","15131122","24231121","13331122","22431121","25122121","14222122","25131211","14231212","12422122","23331211","12431212","15113122","15122212","13313122","24222211","13322212","11513122","22422211","11522212","25113211","14213212","23313211","12413212","21513211","16131121","14331121","15222121","15231211","13422121","13431211","16113121","16122211","14313121","14322211","12513121","12522211","15213211","13413211","11613211","11141125","31141123","51141121","21132124","41132122","21141214","41141212","11123125","31123123","51123121","11132215","31132213","51132211","21114124","41114122","21123214","41123212","11114215","31114213","51114211","12141124","32141122","21241123","41241121","22132123","42132121","11232124","22141213","42141211","11241214","31241212","12123124","32123122","12132214","32132212","21232213","41232211","22114123","42114121","11214124","22123213","42123211","11223214","31223212","12114214","32114212","21214213","41214211","13141123","33141121","22241122","11341123","31341121","23132122","12232123","23141212","12241213","32241211","21341212","13123123","33123121","13132213","33132211","11323123","22232212","11332213","31332211","23114122","12214123","23123212","12223213","32223211","21323212","13114213","33114211","22214212","11314213","31314211","14141122","23241121","12341122","24132121","13232122","24141211","13241212","11432122","22341211","14123122","14132212","12323122","23232211","12332212","21432211","24114121","13214122","24123211","13223212","11414122","22323211","11423212","14114212","23214211","12314212","21414211","15141121","13341121","14232121","14241211","12432121","15123121","15132211","13323121","13332211","11523121","14214121","14223211","12414121","12423211","15114211","13314211","11514211","11151124","31151122","21142123","41142121","21151213","41151211","11133124","31133122","11142214","31142212","21124123","41124121","21133213","41133211","11115124","31115122","11124214","31124212","21115213","41115211","12151123","32151121","21251122","22142122","11242123","22151212","11251213","31251211","12133123","32133121","12142213","32142211","21242212","22124122","11224123","22133212","11233213","31233211","12115123","32115121","12124213","32124211","21224212","22115212","11215213","31215211","13151122","22251121","23142121","12242122","23151211","12251212","13133122","13142212","11333122","22242211","11342212","23124121","12224122","23133211","12233212","21333211","13115122","13124212","11315122","22224211","11324212","23115211","12215212","21315211","14151121","13242121","13251211","14133121","14142211","12333121","12342211","13224121","13233211","11424121","11433211","14115121","14124211","12315121","12324211","13215211","11415211","11161123","31161121","21152122","21161212","11143123","31143121","11152213","31152211","21134122","21143212","11125123","31125121","11134213","31134211","21116122","21125212","12161122","22152121","11252122","22161211","12143122","12152212","21252211","22134121","11234122","22143211","11243212","12125122","12134212","21234211","22116121","11216122","22125211","11225212","13161121","12252121","13143121","13152211","11343121","12234121","12243211","13125121","13134211","11325121","11334211","12216121","12225211","31111225","51111223","21111316","41111314","61111312","31211134","51211132","12111226","32111224","52111222","21211225","41211223","61211221","22111315","42111313","11211316","31211314","51211312","12211135","32211133","52211131","21311134","41311132","13111225","33111223","22211224","42211222","11311225","31311223","51311221","23111314","43111312","12211315","32211313","52211311","21311314","41311312","13211134","33211132","22311133","42311131","11411134","31411132","14111224","34111222","23211223","43211221","12311224","32311222","21411223","41411221","24111313","13211314","33211312","22311313","42311311","11411314","31411312","14211133","34211131","23311132","12411133","32411131","21511132","15111223","24211222","13311223","33311221","22411222","11511223","31511221","25111312","14211313","34211311","23311312","12411313","32411311","21511312","15211132","24311131","13411132","22511131","11611132","16111222","25211221","14311222","23411221","12511222","21611221","15211312","24311311","13411312","22511311","11611312","21121135","41121133","61121131","11112136","31112134","51112132","11121226","31121224","51121222","21112225","41112223","61112221","21121315","41121313","61121311","11112316","31112314","51112312","22121134","42121132","11221135","31221133","51221131","12112135","32112133","52112131","12121225","32121223","52121221","21221224","41221222","22112224","42112222","11212225","22121314","42121312","11221315","31221313","51221311","12112315","32112313","52112311","21212314","41212312","23121133","43121131","12221134","32221132","21321133","41321131","13112134","33112132","13121224","33121222","11312134","22221223","42221221","11321224","31321222","23112223","43112221","12212224","23121313","43121311","12221314","32221312","21321313","41321311","13112314","33112312","22212313","42212311","11312314","31312312","24121132","13221133","33221131","22321132","11421133","31421131","14112133","34112131","14121223","34121221","12312133","23221222","12321223","32321221","21421222","24112222","13212223","24121312","13221313","33221311","11412223","22321312","11421313","31421311","14112313","34112311","23212312","12312313","32312311","21412312","25121131","14221132","23321131","12421132","21521131","15112132","15121222","13312132","24221221","13321222","11512132","22421221","11521222","25112221","14212222","25121311","14221312","12412222","23321311","12421312","21521311","15112312","24212311","13312312","22412311","11512312","15221131","13421131","16112131","16121221","14312131","14321221","12512131","12521221","15212221","15221311","13412221","13421311","11612221","16112311","14312311","12512311","21131134","41131132","11122135","31122133","51122131","11131225","31131223","51131221","21113134","41113132","21122224","41122222","21131314","41131312","11113225","31113223","51113221","11122315","31122313","51122311","21113314","41113312","22131133","42131131","11231134","31231132","12122134","32122132","12131224","32131222","21231223","41231221","22113133","42113131","11213134","22122223","42122221","11222224","22131313","42131311","11231314","31231312","12113224","32113222","12122314","32122312","21222313","41222311","22113313","42113311","11213314","31213312","23131132","12231133","32231131","21331132","13122133","33122131","13131223","33131221","11322133","22231222","11331223","31331221","23113132","12213133","23122222","12222223","23131312","12231313","32231311","21331312","13113223","33113221","13122313","33122311","11313223","22222312","11322313","31322311","23113312","12213313","32213311","21313312","24131131","13231132","22331131","11431132","14122132","14131222","12322132","23231221","12331222","21431221","24113131","13213132","24122221","13222222","24131311","11413132","13231312","11422222","22331311","11431312","14113222","14122312","12313222","23222311","12322312","21422311","24113311","13213312","22313311","11413312","14231131","12431131","15122131","15131221","13322131","13331221","11522131","14213131","14222221","12413131","14231311","12422221","12431311","15113221","15122311","13313221","13322311","11513221","11522311","14213311","12413311","21141133","41141131","11132134","31132132","11141224","31141222","21123133","41123131","21132223","41132221","21141313","41141311","11114134","31114132","11123224","31123222","11132314","31132312","21114223","41114221","21123313","41123311","11114314","31114312","22141132","11241133","31241131","12132133","32132131","12141223","32141221","21241222","22123132","11223133","22132222","11232223","22141312","11241313","31241311","12114133","32114131","12123223","32123221","12132313","32132311","21232312","22114222","11214223","22123312","11223313","31223311","12114313","32114311","21214312","23141131","12241132","21341131","13132132","13141222","11332132","22241221","11341222","23123131","12223132","23132221","12232222","23141311","12241312","21341311","13114132","13123222","11314132","13132312","11323222","22232311","11332312","23114221","12214222","23123311","12223312","21323311","13114312","22214311","11314312","13241131","14132131","14141221","12332131","12341221","13223131","13232221","11423131","13241311","11432221","14114131","14123221","12314131","14132311","12323221","12332311","13214221","13223311","11414221","11423311","14114311","12314311","21151132","11142133","31142131","11151223","31151221","21133132","21142222","21151312","11124133","31124131","11133223","31133221","11142313","31142311","21115132","21124222","21133312","11115223","31115221","11124313","31124311","22151131","11251132","12142132","12151222","21251221","22133131","11233132","22142221","11242222","22151311","11251312","12124132","12133222","12142312","21242311","22115131","11215132","22124221","11224222","22133311","11233312","12115222","12124312","21224311","12251131","13142131","13151221","11342131","12233131","12242221","12251311","13124131","13133221","11324131","13142311","11333221","11342311","12215131","12224221","12233311","13115221","13124311","11315221","11324311","21161131","11152132","11161222","21143131","21152221","21161311","11134132","11143222","11152312","21125131","21134221","21143311","11116132","11125222","11134312","12152131","12161221","11243131","11252221","12134131","12143221","12152311","11225131","11234221","11243311","12116131","12125221","12134311","21111235","41111233","61111231","11111326","31111324","51111322","21111415","41111413","61111411","21211144","41211142","22111234","42111232","11211235","31211233","51211231","12111325","32111323","52111321","21211324","41211322","22111414","42111412","11211415","31211413","51211411","22211143","42211141","11311144","31311142","23111233","43111231","12211234","32211232","21311233","41311231","13111324","33111322","22211323","42211321","11311324","31311322","23111413","43111411","12211414","32211412","21311413","41311411","23211142","12311143","32311141","21411142","24111232","13211233","33211231","22311232","11411233","31411231","14111323","34111321","23211322","12311323","32311321","21411322","24111412","13211413","33211411","22311412","11411413","31411411","24211141","13311142","22411141","11511142","25111231","14211232","23311231","12411232","21511231","15111322","24211321","13311322","22411321","11511322","25111411","14211412","23311411","12411412","21511411","14311141","12511141","15211231","13411231","11611231","16111321","14311321","12511321","15211411","13411411","11611411","31121143","51121141","21112144","41112142","21121234","41121232","11112235","31112233","51112231","11121325","31121323","51121321","21112324","41112322","21121414","41121412","11112415","31112413","51112411","12121144","32121142","21221143","41221141","22112143","42112141","11212144","22121233","42121231","11221234","31221232","12112234","32112232","12121324","32121322","21221323","41221321","22112323","42112321","11212324","22121413","42121411","11221414","31221412","12112414","32112412","21212413","41212411","13121143","33121141","22221142","11321143","31321141","23112142","12212143","23121232","12221233","32221231","21321232","13112233","33112231","13121323","33121321","11312233","22221322","11321323","31321321","23112322","12212323","23121412","12221413","32221411","21321412","13112413","33112411","22212412","11312413","31312411","14121142","23221141","12321142","21421141","24112141","13212142","24121231","13221232","11412142","22321231","11421232","14112232","14121322","12312232","23221321","12321322","21421321","24112321","13212322","24121411","13221412","11412322","22321411","11421412","14112412","23212411","12312412","21412411","15121141","13321141","11521141","14212141","14221231","12412141","12421231","15112231","15121321","13312231","13321321","11512231","11521321","14212321","14221411","12412321","12421411","15112411","13312411","11512411","11131144","31131142","21122143","41122141","21131233","41131231","11113144","31113142","11122234","31122232","11131324","31131322","21113233","41113231","21122323","41122321","21131413","41131411","11113324","31113322","11122414","31122412","21113413","41113411","12131143","32131141","21231142","22122142","11222143","22131232","11231233","31231231","12113143","32113141","12122233","32122231","12131323","32131321","21231322","22113232","11213233","22122322","11222323","22131412","11231413","31231411","12113323","32113321","12122413","32122411","21222412","22113412","11213413","31213411","13131142","22231141","11331142","23122141","12222142","23131231","12231232","21331231","13113142","13122232","11313142","13131322","11322232","22231321","11331322","23113231","12213232","23122321","12222322","23131411","12231412","21331411","13113322","13122412","11313322","22222411","11322412","23113411","12213412","21313411","14131141","12331141","13222141","13231231","11422141","11431231","14113141","14122231","12313141","14131321","12322231","12331321","13213231","13222321","11413231","13231411","11422321","11431411","14113321","14122411","12313321","12322411","13213411","11413411","11141143","31141141","21132142","21141232","11123143","31123141","11132233","31132231","11141323","31141321","21114142","21123232","21132322","21141412","11114233","31114231","11123323","31123321","11132413","31132411","21114322","21123412","12141142","21241141","22132141","11232142","22141231","11241232","12123142","12132232","12141322","21241321","22114141","11214142","22123231","11223232","22132321","11232322","22141411","11241412","12114232","12123322","12132412","21232411","22114321","11214322","22123411","11223412","13141141","11341141","12232141","12241231","13123141","13132231","11323141","13141321","11332231","11341321","12214141","12223231","12232321","12241411","13114231","13123321","11314231","13132411","11323321","11332411","12214321","12223411","11151142","21142141","21151231","11133142","11142232","11151322","21124141","21133231","21142321","21151411","11115142","11124232","11133322","11142412","21115231","21124321","21133411","12151141","11242141","11251231","12133141","12142231","12151321","11224141","11233231","11242321","11251411","12115141","12124231","12133321","12142411","11215231","11224321","11233411","11161141","11143141","11152231","11161321","11125141","11134231","11143321","11152411","11111245","31111243","51111241","21111334","41111332","11111425","31111423","51111421","21111514","41111512","31211152","12111244","32111242","21211243","41211241","22111333","42111331","11211334","31211332","12111424","32111422","21211423","41211421","22111513","42111511","11211514","31211512","12211153","32211151","21311152","13111243","33111241","22211242","11311243","31311241","23111332","12211333","32211331","21311332","13111423","33111421","22211422","11311423","31311421","23111512","12211513","32211511","21311512","13211152","22311151","11411152","14111242","23211241","12311242","21411241","24111331","13211332","22311331","11411332","14111422","23211421","12311422","21411421","24111511","13211512","22311511","11411512","14211151","12411151","15111241","13311241","11511241","14211331","12411331","15111421","13311421","11511421","14211511","12411511","21121153","41121151","11112154","31112152","11121244","31121242","21112243","41112241","21121333","41121331","11112334","31112332","11121424","31121422","21112423","41112421","21121513","41121511","11112514","31112512","22121152","11221153","31221151","12112153","32112151","12121243","32121241","21221242","22112242","11212243","22121332","11221333","31221331","12112333","32112331","12121423","32121421","21221422","22112422","11212423","22121512","11221513","31221511","12112513","32112511","21212512","23121151","12221152","21321151","13112152","13121242","11312152","22221241","11321242","23112241","12212242","23121331","12221332","21321331","13112332","13121422","11312332","22221421","11321422","23112421","12212422","23121511","12221512","21321511","13112512","22212511","11312512","13221151","11421151","14112151","14121241","12312151","12321241","13212241","13221331","11412241","11421331","14112331","14121421","12312331","12321421","13212421","13221511","11412421","11421511","14112511","12312511","21131152","11122153","31122151","11131243","31131241","21113152","21122242","21131332","11113243","31113241","11122333","31122331","11131423","31131421","21113332","21122422","21131512","11113423","31113421","11122513","31122511","22131151","11231152","12122152","12131242","21231241","22113151","11213152","22122241","11222242","22131331","11231332","12113242","12122332","12131422","21231421","22113331","11213332","22122421","11222422","22131511","11231512","12113422","12122512","21222511","12231151","13122151","13131241","11322151","11331241","12213151","12222241","12231331","13113241","13122331","11313241","13131421","11322331","11331421","12213331","12222421","12231511","13113421","13122511","11313421","11322511","21141151","11132152","11141242","21123151","21132241","21141331","11114152","11123242","11132332","11141422","21114241","21123331","21132421","21141511","11114332","11123422","11132512","11241151","12132151","12141241","11223151","11232241","11241331","12114151","12123241","12132331","12141421","11214241","11223331","11232421","11241511","12114331","12123421","12132511","11142151","11151241","11124151","11133241","11142331","11151421","11115241","11124331","11133421","11142511","21111253","41111251","11111344","31111342","21111433","41111431","11111524","31111522","21111613","41111611","21211162","22111252","11211253","31211251","12111343","32111341","21211342","22111432","11211433","31211431","12111523","32111521","21211522","22111612","11211613","31211611","22211161","11311162","23111251","12211252","21311251","13111342","22211341","11311342","23111431","12211432","21311431","13111522","22211521","11311522","23111611","12211612","21311611","12311161","13211251","11411251","14111341","12311341","13211431","11411431","14111521","12311521","13211611","11411611","31121161","21112162","21121252","11112253","31112251","11121343","31121341","21112342","21121432","11112433","31112431","11121523","31121521","21112522","21121612","12121162","21221161","22112161","11212162","22121251","11221252","12112252","12121342","21221341","22112341","11212342","22121431","11221432","12112432","12121522","21221521","22112521","11212522","22121611","11221612","13121161","11321161","12212161","12221251","13112251","13121341","11312251","11321341","12212341","12221431","13112431","13121521","11312431","11321521","12212521","12221611","11131162","21122161","21131251","11113162"])]),e.parity=o(["1001","0101","1100","0011","1010","0110","1111","0000"]),e.rowbits=o(e.r);for(var zt=0,Ct=e.r-1;zt<=Ct;zt+=1){e.i=zt,n[t++]="p",e.i!=e.r-1?n[t++]=h(e.parity,e.i):n[t++]="0000";var Yt=n[--t];e[n[--t]]=Yt,e.ccrow=O(e.ccs,e.i*8,8),n[t++]=1/0;for(var jt=0;jt<=7;jt+=2){W(O(e.ccrow,jt,2));var an=n[--t],rn=n[--t];n[t++]=R(an+rn*49)}e.scrow=o(),n[t++]=1/0,n[t++]=10,n[t++]=1,n[t++]=1;for(var Kt=0;Kt<=3;Kt+=1)e.j=Kt,Ie(h(h(e.patterns,h(e.p,e.j)-48),h(e.scrow,e.j)),function(){var Be=n[--t];n[t++]=Be-48});n[t++]=4,n[t++]=1,e.sbs=o(),n[t++]=1/0;var Jt=e.sbs;n[t++]=1;for(var Zt=0,Qt=Jt.length;Zt<Qt;Zt++)for(var mn=n[t-1],cn=mn==0?1:0,dn=0,Ht=h(Jt,Zt);dn<Ht;dn++)n[t++]=cn;Rn(o(Ur()-1));var Bt=n[--t];n[t-1]=Bt;var Y=n[--t];n[t-1]=Y,n[t++]=e.rowbits,n[t++]=e.i;var le=n[t-3],se=n[t-1];C(n[t-2],se,le),t-=3}n[t++]=1/0;for(var ge=0,ve=81*e.sepheight;ge<ve;ge++)n[t++]=1;for(var _e=0,pe=e.r-2;_e<=pe;_e+=1){e.i=_e;for(var Oe=0,de=e.rowheight;Oe<de;Oe++)W(h(e.rowbits,e.i));for(var ke=0,Ee=e.sepheight;ke<Ee;ke++){for(var De=0;De<10;De++)n[t++]=0;for(var xe=0;xe<70;xe++)n[t++]=1;n[t++]=0}}for(var Ne=0,je=e.rowheight;Ne<je;Ne++)W(h(e.rowbits,e.r-1));for(var Se=0,ze=81*e.sepheight;Se<ze;Se++)n[t++]=1;e.pixs=o();var Pe=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",81],["pixy",~~(e.pixs.length/81)],["height",~~(e.pixs.length/81)/72],["width",81/72],["opt",e.options]]);n[t++]=Pe,e.dontdraw||Lt(),e=r}function uT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.3,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],Ie(e.barcode,function(){var k=n[--t];(k<48||k>57)&&(n[t++]="bwipp.flattermarkenBadCharacter#17258",n[t++]="Flattermarken must contain only digits",Z())}),e.encs=o(["0018","0117","0216","0315","0414","0513","0612","0711","0810","0900"]),e.barchars="1234567890",e.barlen=e.barcode.length,e.sbs=fe(e.barlen*4),e.txt=o(e.barlen);for(var i=0,a=e.barlen-1;i<=a;i+=1)e.i=i,sn(e.barchars,O(e.barcode,e.i,1)),t--,e.indx=n[--t].length,t-=2,e.enc=h(e.encs,e.indx),H(e.sbs,e.i*4,e.enc),C(e.txt,e.i,o([O(e.barcode,e.i,1),e.i*9,e.textyoffset,e.textfont,e.textsize]));n[t++]=1/0,n[t++]=1/0;for(var s=e.sbs,l=0,c=s.length;l<c;l++)n[t++]=h(s,l)-48;var d=o();n[t++]=1/0;for(var f=0,m=~~((e.sbs.length+1)/2);f<m;f++)n[t++]=e.height;var g=o();n[t++]=1/0;for(var v=0,y=~~((e.sbs.length+1)/2);v<y;v++)n[t++]=0;var A=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=d,n[t++]="bhs",n[t++]=g,n[t++]="bbs",n[t++]=A,n[t++]="txt",n[t++]=e.txt,n[t++]="opt",n[t++]=e.options;var w=rt();n[t++]=w,e.dontdraw||on(),e=r}function fT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.height=1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],Ie(e.barcode,function(){var g=n[--t];(g<49||g>57)&&(n[t++]="bwipp.rawBadCharacter#17344",n[t++]="Raw must contain only digits 1 to 9",Z())}),n[t++]=1/0,n[t++]=1/0,Ie(e.barcode,function(){var g=n[--t];n[t++]=g-48});var i=o();n[t++]=1/0;for(var a=0,s=~~((e.barcode.length+1)/2);a<s;a++)n[t++]=e.height;var l=o();n[t++]=1/0;for(var c=0,d=~~((e.barcode.length+1)/2);c<d;c++)n[t++]=0;var f=o();n[t++]="ren",n[t++]="renlinear",n[t++]="sbs",n[t++]=i,n[t++]="bhs",n[t++]=l,n[t++]="bbs",n[t++]=f,n[t++]="opt",n[t++]=e.options;var m=rt();n[t++]=m,e.dontdraw||on(),e=r}function hT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.height=.175,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.daftEmptyData#17397",n[t++]="The data must not be empty",Z()),Ie(e.barcode,function(){var g=n[--t];g!=68&&g!=65&&g!=70&&g!=84&&(n[t++]="bwipp.daftBadCharacter#17402",n[t++]="DAFT must contain only characters D, A, F and T",Z())}),e.barlen=e.barcode.length,e.bbs=o(e.barlen),e.bhs=o(e.barlen);for(var i=0,a=e.barlen-1;i<=a;i+=1)e.i=i,e.enc=O(e.barcode,e.i,1),ce(e.enc,"D")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"A")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,5*e.height/8)),ce(e.enc,"F")&&(C(e.bbs,e.i,0*e.height/8),C(e.bhs,e.i,8*e.height/8)),ce(e.enc,"T")&&(C(e.bbs,e.i,3*e.height/8),C(e.bhs,e.i,2*e.height/8));n[t++]=1/0;var s=e.bbs,l=e.bhs;n[t++]=1/0;for(var c=0,d=e.bhs.length-1;c<d;c++)n[t++]=1.44,n[t++]=1.872;n[t++]=1.44;var f=o();n[t++]="ren",n[t++]="renlinear",n[t++]="bbs",n[t++]=s,n[t++]="bhs",n[t++]=l,n[t++]="sbs",n[t++]=f,n[t++]="opt",n[t++]=e.options;var m=rt();n[t++]=m,e.dontdraw||on(),e=r}function pT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.fimasbs=o([2.25,2.25,2.25,11.25,2.25,11.25,2.25,2.25,2.25]),n[t++]=1/0;for(var i=0,a=~~(e.fimasbs.length/2)+1;i<a;i++)n[t++]=.625;e.fimabhs=o(),n[t++]=1/0;for(var s=0,l=~~(e.fimasbs.length/2)+1;s<l;s++)n[t++]=0;e.fimabbs=o(),e.fimbsbs=o([2.25,6.75,2.25,2.25,2.25,6.25,2.25,2.25,2.25,6.75,2.25]),n[t++]=1/0;for(var c=0,d=~~(e.fimbsbs.length/2)+1;c<d;c++)n[t++]=.625;e.fimbbhs=o(),n[t++]=1/0;for(var f=0,m=~~(e.fimbsbs.length/2)+1;f<m;f++)n[t++]=0;e.fimbbbs=o(),e.fimcsbs=o([2.25,2.25,2.25,6.75,2.25,6.75,2.25,6.75,2.25,2.25,2.25]),n[t++]=1/0;for(var g=0,v=~~(e.fimcsbs.length/2)+1;g<v;g++)n[t++]=.625;e.fimcbhs=o(),n[t++]=1/0;for(var y=0,A=~~(e.fimcsbs.length/2)+1;y<A;y++)n[t++]=0;e.fimcbbs=o(),e.fimdsbs=o([2.25,2.25,2.25,2.25,2.25,6.75,2.25,6.75,2.25,2.25,2.25,2.25,2.25]),n[t++]=1/0;for(var w=0,k=~~(e.fimdsbs.length/2)+1;w<k;w++)n[t++]=.625;e.fimdbhs=o(),n[t++]=1/0;for(var E=0,I=~~(e.fimdsbs.length/2)+1;E<I;E++)n[t++]=0;e.fimdbbs=o(),e.fimesbs=o([2.25,6.75,2.25,15.75,2.25,6.75,2.25]),n[t++]=1/0;for(var T=0,N=~~(e.fimesbs.length/2)+1;T<N;T++)n[t++]=.625;e.fimebhs=o(),n[t++]=1/0;for(var j=0,B=~~(e.fimesbs.length/2)+1;j<B;j++)n[t++]=0;e.fimebbs=o(),n[t++]=1/0;for(var U=0;U<100;U++)n[t++]=1,n[t++]=1;n[t++]=1,e.zebrasbs=o(),n[t++]=1/0;for(var F=0,P=~~(e.zebrasbs.length/2)+1;F<P;F++)n[t++]=1;e.zebrabhs=o(),n[t++]=1/0;for(var z=0,V=~~(e.zebrasbs.length/2)+1;z<V;z++)n[t++]=0;e.zebrabbs=o(),e.checksize=199,n[t++]=1/0;for(var L=e.checksize,Q=0,q=~~(L*L/2);Q<q;Q++)n[t++]=1,n[t++]=0;n[t++]=1,e.checkpixs=o();var ee=new Map([["renlinear",on],["renmatrix",Lt]]);e.renmap=ee;var X=new Map([["fima",function(){var ne=new Map([["ren","renlinear"],["sbs",e.fimasbs],["bhs",e.fimabhs],["bbs",e.fimabbs]]);n[t++]=ne}],["fimb",function(){var ne=new Map([["ren","renlinear"],["sbs",e.fimbsbs],["bhs",e.fimbbhs],["bbs",e.fimbbbs]]);n[t++]=ne}],["fimc",function(){var ne=new Map([["ren","renlinear"],["sbs",e.fimcsbs],["bhs",e.fimcbhs],["bbs",e.fimcbbs]]);n[t++]=ne}],["fimd",function(){var ne=new Map([["ren","renlinear"],["sbs",e.fimdsbs],["bhs",e.fimdbhs],["bbs",e.fimdbbs]]);n[t++]=ne}],["fime",function(){var ne=new Map([["ren","renlinear"],["sbs",e.fimesbs],["bhs",e.fimebhs],["bbs",e.fimebbs]]);n[t++]=ne}],["zebra",function(){var ne=new Map([["ren","renlinear"],["sbs",e.zebrasbs],["bhs",e.zebrabhs],["bbs",e.zebrabbs]]);n[t++]=ne}],["check",function(){var ne=new Map([["ren","renmatrix"],["pixs",e.checkpixs],["pixx",e.checksize],["pixy",e.checksize],["height",e.checksize/72],["width",e.checksize/72]]);n[t++]=ne}]]);e.symbols=X;var ae=h(e.symbols,e.barcode)!==void 0;if(ae||(n[t++]="bwipp.symbolUnknownSymbol#17531",n[t++]="Unknown symbol name provided",Z()),h(e.symbols,e.barcode)()===!0)return!0;var K=n[t-1];if(C(K,"opt",e.options),!e.dontdraw){var ie=n[t-1];if(h(e.renmap,h(ie,"ren"))()===!0)return!0}e=r}function Ax(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.compact=!1,e.eclevel=-1,e.fixedeclevel=!1,e.columns=0,e.rows=0,e.rowmult=3,e.ccc=!1,e.raw=!1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.pdf417emptyData#17591",n[t++]="The data must not be empty",Z()),e.eclevel!=-1&&(e.eclevel<0||e.eclevel>8)&&(n[t++]="bwipp.pdf417InvalidErrorCorrectionLevel#17595",n[t++]="Valid error correction levels are 0 to 8",Z()),e.ccc&&e.raw&&(n[t++]="bwipp.pdf417cccAndRaw#17599",n[t++]="Cannot combine ccc and raw",Z()),e.ccc&&e.compact&&(n[t++]="bwipp.pdf417cccAndCompact#17603",n[t++]="Cannot combine ccc and compact",Z()),e.rows!=0&&(e.rows<3||e.rows>90)&&(n[t++]="bwipp.pdf417invalidRows#17607",n[t++]="There must be between 3 and 90 rows",Z()),e.columns!=0&&(e.columns<1||e.columns>30)&&(n[t++]="bwipp.pdf417invalidColumns#17611",n[t++]="There must be between 1 and 30 columns",Z()),e.rowmult<=0&&(n[t++]="bwipp.pdf417badRowMult#17615",n[t++]="The row multiplier must be greater than zero",Z()),e.T=0,e.N=1,e.B=2,e.A=0,e.L=1,e.M=2,e.P=3,e.tl=-1,e.nl=-2,e.bl=-3,e.bl6=-4,e.bs=-5,e.al=-6,e.ll=-7,e.ml=-8,e.pl=-9,e.as=-10,e.ps=-11,e.charmaps=o([o(["A","a","0",";"]),o(["B","b","1","<"]),o(["C","c","2",">"]),o(["D","d","3","@"]),o(["E","e","4","["]),o(["F","f","5",92]),o(["G","g","6","]"]),o(["H","h","7","_"]),o(["I","i","8","`"]),o(["J","j","9","~"]),o(["K","k","&","!"]),o(["L","l",13,13]),o(["M","m",9,9]),o(["N","n",",",","]),o(["O","o",":",":"]),o(["P","p","#",10]),o(["Q","q","-","-"]),o(["R","r",".","."]),o(["S","s","$","$"]),o(["T","t","/","/"]),o(["U","u","+",'"']),o(["V","v","%","|"]),o(["W","w","*","*"]),o(["X","x","=",40]),o(["Y","y","^",41]),o(["Z","z",e.pl,"?"]),o([" "," "," ","{"]),o([e.ll,e.as,e.ll,"}"]),o([e.ml,e.ml,e.al,"'"]),o([e.ps,e.ps,e.ps,e.al])]),e.charvals=o([new Map,new Map,new Map,new Map]),e.alltext=new Map;for(var i=0,a=e.charmaps.length-1;i<=a;i+=1){e.i=i,e.encs=h(e.charmaps,e.i);for(var s=0;s<=3;s+=1){e.j=s;var l=h(e.encs,e.j);if(n[t++]=l,ce(Ys(l),"stringtype")){var c=h(n[--t],0);n[t++]=c}var d=n[--t];C(h(e.charvals,e.j),d,e.i),C(e.alltext,d,-1)}}if(e.e=1e4,e.latlen=o([o([0,1,1,2]),o([2,0,1,2]),o([1,1,0,1]),o([1,2,2,0])]),e.latseq=o([o([o([]),o([e.ll]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.ml,e.al]),o([]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.al]),o([e.ll]),o([]),o([e.pl])]),o([o([e.al]),o([e.al,e.ll]),o([e.al,e.ml]),o([])])]),e.shftlen=o([o([e.e,e.e,e.e,1]),o([1,e.e,e.e,1]),o([e.e,e.e,e.e,1]),o([e.e,e.e,e.e,e.e])]),n[t++]=1/0,n[t++]=e.tl,n[t++]=900,n[t++]=e.bl,n[t++]=901,n[t++]=e.bl6,n[t++]=924,n[t++]=e.nl,n[t++]=902,n[t++]=e.bs,n[t++]=913,e.latchcws=rt(),e.raw){for(e.datcws=o(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||h(e.barcode,e.i)!=94);){var f=O(e.barcode,e.i+1,3);n[t++]=f,n[t++]=!1;for(var m=0,g=f.length;m<g;m++){var v=h(f,m);(v<48||v>57)&&(n[t-1]=!0)}if(n[--t]){t--;break}e.cw=Ye(n[--t]),C(e.datcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(n[t++]="bwipp.pdf417badRawFormat#17727",n[t++]="raw data must be formatted as ^NNN",Z()),e.datcws=O(e.datcws,0,e.j)}if(e.encb=function(){e.in=n[--t],e.inlen=e.in.length,e.out=o(~~(e.inlen/6)*5+e.inlen%6);for(var Ee=0,De=~~(e.inlen/6)-1;Ee<=De;Ee+=1){e.k=Ee,n[t++]=1/0,W(O(e.in,e.k*6,3)),e.msbs=o(),n[t++]=1/0,W(e.msbs);var xe=n[--t],Ne=n[--t],je=n[--t];n[t++]=R(xe+Ne*256+je*65536);for(var Se=0;Se<3;Se++){var ze=n[--t];n[t++]=ze%900,n[t++]=~~(ze/900)}e.mscs=o(),n[t++]=1/0,W(O(e.in,e.k*6+3,3)),e.lsbs=o(),n[t++]=1/0,W(e.lsbs);var Pe=n[--t],Be=n[--t],at=n[--t];n[t++]=R(Pe+Be*256+at*65536);for(var Ze=0;Ze<3;Ze++){var ft=n[--t];n[t++]=ft%900,n[t++]=~~(ft/900)}e.lscs=o();var Ve=h(e.lscs,0),$e=h(e.mscs,0);C(e.out,e.k*5+4,R(Ve+$e*316)%900);var Me=h(e.lscs,1),it=h(e.mscs,0),st=h(e.mscs,1);C(e.out,e.k*5+3,R(~~((Ve+$e*316)/900)+Me+it*641+st*316)%900);var mt=h(e.lscs,2),Tt=h(e.mscs,0),Ot=h(e.mscs,1),Et=h(e.mscs,2);C(e.out,e.k*5+2,R(~~((~~((Ve+$e*316)/900)+Me+it*641+st*316)/900)+mt+Tt*20+Ot*641+Et*316)%900);var Dt=h(e.lscs,3),wt=h(e.mscs,1),en=h(e.mscs,2);C(e.out,e.k*5+1,R(~~((~~((~~((Ve+$e*316)/900)+Me+it*641+st*316)/900)+mt+Tt*20+Ot*641+Et*316)/900)+Dt+wt*20+en*641)%900),C(e.out,e.k*5,R(~~((~~((~~((~~((Ve+$e*316)/900)+Me+it*641+st*316)/900)+mt+Tt*20+Ot*641+Et*316)/900)+Dt+wt*20+en*641)/900)+h(e.mscs,2)*20)%900)}if(e.rem=e.inlen%6,e.rem!=0){n[t++]=e.out,n[t++]=e.out.length-e.rem,n[t++]=1/0,W(O(e.in,e.inlen-e.rem,e.rem));var gt=o(),un=n[--t];H(n[--t],un,gt)}n[t++]=e.out},e.ccc){e.barlen=e.barcode.length,e.datcws=o(~~(e.barlen/6)*5+e.barlen%6+2),C(e.datcws,0,920);var y=e.barlen%6==0?924:901;C(e.datcws,1,y),n[t++]=e.datcws,n[t++]=2,n[t++]=1/0,Ie(e.barcode);var A=o();n[t++]=A,e.encb();var w=n[--t],k=n[--t];H(n[--t],k,w)}if(!e.raw&&!e.ccc){var E=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=E,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var I=n[--t];e[n[--t]]=I,e.msglen=e.msg.length,n[t++]=1/0;for(var T=0,N=e.msglen;T<N;T++)n[t++]=0;n[t++]=0,e.numdigits=o(),n[t++]=1/0;for(var j=0,B=e.msglen;j<B;j++)n[t++]=0;n[t++]=0,e.numtext=o(),n[t++]=1/0;for(var U=0,F=e.msglen;U<F;U++)n[t++]=0;n[t++]=0,e.numbytes=o(),n[t++]=1/0;for(var P=0,z=e.msglen;P<z;P++)n[t++]=0;n[t++]=0,e.iseci=o();for(var V=e.msglen-1;V>=0;V-=1){e.i=V;var L=h(e.msg,e.i);L>=48&&L<=57&&C(e.numdigits,e.i,h(e.numdigits,e.i+1)+1);var Q=h(e.alltext,h(e.msg,e.i))!==void 0;Q&&h(e.numdigits,e.i)<13&&C(e.numtext,e.i,h(e.numtext,e.i+1)+1),h(e.msg,e.i)>=0&&h(e.numtext,e.i)<5&&h(e.numdigits,e.i)<13&&C(e.numbytes,e.i,h(e.numbytes,e.i+1)+1),C(e.iseci,e.i,h(e.msg,e.i)<=-1e6)}for(e.numdigits=O(e.numdigits,0,e.msglen),e.numtext=O(e.numtext,0,e.msglen),e.numbytes=O(e.numbytes,0,e.msglen),e.seq=o([]),e.seqlen=0,e.state=e.T,e.p=0;e.p!=e.msglen;)if(h(e.iseci,e.p)){if(e.eci=h(e.msg,e.p),n[t++]=1/0,W(e.seq),n[t++]=o([e.eci]),e.seq=o(),e.p=e.p+1,n[t++]="seqlen",n[t++]=e.seqlen,e.eci<=-1810900)n[t++]=2;else{var q=e.eci<=-1000900?3:2;n[t++]=q}var ee=n[--t],X=n[--t];e[n[--t]]=R(X+ee)}else if(e.n=h(e.numdigits,e.p),e.n>=13||e.n==e.msglen&&e.n>=8){n[t++]=1/0,W(e.seq),n[t++]=e.nl,n[t++]=1/0,W(O(e.msg,e.p,e.n));var ae=o();n[t++]=ae,e.seq=o(),e.state=e.N,e.p=R(e.p+e.n),e.seqlen=R(e.seqlen+1+e.n)}else if(e.t=h(e.numtext,e.p),e.t>=5){n[t++]=1/0,W(e.seq),e.state!=e.T&&(n[t++]=e.tl),n[t++]=1/0,W(O(e.msg,e.p,e.t));var K=o();n[t++]=K,e.seq=o(),e.state=e.T,e.p=R(e.p+e.t),e.seqlen=R(e.seqlen+1+e.t)}else if(e.b=h(e.numbytes,e.p),e.b==1&&e.state==e.T)n[t++]=1/0,W(e.seq),n[t++]=e.bs,n[t++]=o([h(e.msg,e.p)]),e.seq=o(),e.p=R(e.p+e.b),e.seqlen=e.seqlen+2;else{n[t++]=1/0,W(e.seq);var ie=e.b%6!=0?e.bl:e.bl6;n[t++]=ie,n[t++]=1/0,W(O(e.msg,e.p,e.b));var ne=o();n[t++]=ne,e.seq=o(),e.state=e.B,e.p=R(e.p+e.b),e.seqlen=R(e.seqlen+1+e.b)}for(e.enca=function(){var Ee=h(h(e.charvals,e.A),n[--t]);n[t++]=Ee},e.encl=function(){var Ee=h(h(e.charvals,e.L),n[--t]);n[t++]=Ee},e.encm=function(){var Ee=h(h(e.charvals,e.M),n[--t]);n[t++]=Ee},e.encp=function(){var Ee=h(h(e.charvals,e.P),n[--t]);n[t++]=Ee},e.textencfuncs=o(["enca","encl","encm","encp"]),e.addtotext=function(){C(e.text,e.l,n[--t]),e.l=e.l+1},e.enct=function(){e.in=n[--t],e.curlen=o([e.e,e.e,e.e,e.e]),C(e.curlen,e.submode,0),e.curseq=o([o([]),o([]),o([]),o([])]),Ie(e.in,function(){for(e.char=n[--t];;){e.imp=!1;for(var Tt=o([e.A,e.L,e.M,e.P]),Ot=0,Et=Tt.length;Ot<Et;Ot++){e.x=h(Tt,Ot);for(var Dt=o([e.A,e.L,e.M,e.P]),wt=0,en=Dt.length;wt<en;wt++)if(e.y=h(Dt,wt),e.cost=R(h(e.curlen,e.x)+h(h(e.latlen,e.x),e.y)),e.cost<h(e.curlen,e.y)){C(e.curlen,e.y,e.cost),n[t++]=e.curseq,n[t++]=e.y,n[t++]=1/0,W(h(e.curseq,e.x)),W(h(h(e.latseq,e.x),e.y));var gt=o(),un=n[--t];C(n[--t],un,gt),e.imp=!0}}if(!e.imp)break}e.nxtlen=o([e.e,e.e,e.e,e.e]),e.nxtseq=o(4);for(var Vt=o([e.A,e.L,e.M,e.P]),fn=0,$n=Vt.length;fn<$n;fn++)for(e.x=h(Vt,fn);;){var ei=h(h(e.charvals,e.x),e.char)!==void 0;if(!ei)break;if(e.cost=h(e.curlen,e.x)+1,e.cost<h(e.nxtlen,e.x)){C(e.nxtlen,e.x,e.cost),n[t++]=e.nxtseq,n[t++]=e.x,n[t++]=1/0,W(h(e.curseq,e.x)),n[t++]=e.char;var Dn=o(),ai=n[--t];C(n[--t],ai,Dn)}for(var zn=o([e.A,e.L,e.M,e.P]),mi=0,Fn=zn.length;mi<Fn;mi++)if(e.y=h(zn,mi),qe(e.x,e.y)&&(e.cost=R(h(e.curlen,e.y)+h(h(e.shftlen,e.y),e.x))+1,e.cost<h(e.nxtlen,e.y))){C(e.nxtlen,e.y,e.cost),n[t++]=e.nxtseq,n[t++]=e.y,n[t++]=1/0,W(h(e.curseq,e.y));var Hn=e.x==e.A?e.as:e.ps;n[t++]=Hn,n[t++]=e.char;var _n=o(),vn=n[--t];C(n[--t],vn,_n)}break}e.curlen=e.nxtlen,e.curseq=e.nxtseq}),e.minseq=e.e;for(var Ee=o([e.A,e.L,e.M,e.P]),De=0,xe=Ee.length;De<xe;De++)e.k=h(Ee,De),h(e.curlen,e.k)<e.minseq&&(e.minseq=h(e.curlen,e.k),e.txtseq=h(e.curseq,e.k));for(e.text=o(e.minseq),e.k=0,e.l=0;!(e.k>=e.txtseq.length||(e.char=h(e.txtseq,e.k),n[t++]=e.char,e[h(e.textencfuncs,e.submode)]()===!0));)e.addtotext(),e.k=e.k+1,(e.char==e.as||e.char==e.ps)&&(n[t++]=h(e.txtseq,e.k),e.char==e.as?e.enca():e.encp(),e.addtotext(),e.k=e.k+1),e.char==e.al&&(e.submode=e.A),e.char==e.ll&&(e.submode=e.L),e.char==e.ml&&(e.submode=e.M),e.char==e.pl&&(e.submode=e.P);if(e.text.length%2==1){if(e.submode==e.P){n[t++]="pad",n[t++]=e.al,e.encp();var Ne=n[--t];e[n[--t]]=Ne,e.submode=e.A}else{e.nextecitext=!1;for(var je=e.i+1,Se=e.seq.length-1;je<=Se;je+=1){if(e.ti=je,qe(Ys(h(e.seq,e.ti)),"arraytype")){e.nextecitext=!1;break}if(h(h(e.seq,e.ti),0)>-1e6)break;e.nextecitext=!0}if(e.nextecitext)if(e.submode==e.A){var ze=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(ze){n[t++]="pad",n[t++]=e.ll,e.enca();var Pe=n[--t];e[n[--t]]=Pe,e.submode=e.L}else{n[t++]="pad",n[t++]=e.ml,e.enca();var Be=n[--t];e[n[--t]]=Be,e.submode=e.M}}else if(e.submode==e.M){var at=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(at){n[t++]="pad",n[t++]=e.ll,e.encm();var Ze=n[--t];e[n[--t]]=Ze,e.submode=e.L}else{var ft=h(h(e.charvals,e.P),h(h(e.seq,e.ti),0))!==void 0;if(ft){n[t++]="pad",n[t++]=e.pl,e.encm();var Ve=n[--t];e[n[--t]]=Ve,e.submode=e.P}else{n[t++]="pad",n[t++]=e.al,e.encm();var $e=n[--t];e[n[--t]]=$e,e.submode=e.A}}}else{n[t++]="pad",n[t++]=e.ml,e.encl();var Me=n[--t];e[n[--t]]=Me,e.submode=e.M}else{if(n[t++]="pad",n[t++]=e.ps,e[h(e.textencfuncs,e.submode)]()===!0)return!0;var it=n[--t];e[n[--t]]=it}}n[t++]=1/0,W(e.text),n[t++]=e.pad,e.text=o()}e.out=o(~~(e.text.length/2));for(var st=0,mt=e.out.length-1;st<=mt;st+=1)e.k=st,C(e.out,e.k,R(h(e.text,e.k*2)*30+h(e.text,e.k*2+1)));n[t++]=e.out},e.encn=function(){e.in=n[--t],e.out=o([]);for(var Ee=0,De=e.in.length-1;Ee<=De;Ee+=44){e.k=Ee,n[t++]=1/0;var xe=e.in.length-e.k;n[t++]=1,n[t++]=e.in,n[t++]=e.k,n[t++]=xe,xe>44&&(n[t-1]=44);for(var Ne=n[--t],je=n[--t],Se=O(n[--t],je,Ne),ze=0,Pe=Se.length;ze<Pe;ze++)n[t++]=h(Se,ze)-48;for(e.gmod=o(),e.cwn=o([]);;){for(e.dv=900,e.gmul=o([]),e.val=0;e.gmod.length!=0;)e.val=R(e.val*10+h(e.gmod,0)),e.gmod=O(e.gmod,1,e.gmod.length-1),e.val<e.dv?e.gmul.length!=0&&(n[t++]=1/0,W(e.gmul),n[t++]=0,e.gmul=o()):(n[t++]=1/0,W(e.gmul),n[t++]=~~(e.val/e.dv),e.gmul=o()),e.val=e.val%e.dv;if(e.dv=e.val,n[t++]=1/0,n[t++]=e.dv,W(e.cwn),e.cwn=o(),e.gmod=e.gmul,e.gmul.length==0)break}n[t++]=1/0,W(e.out),W(e.cwn),e.out=o()}n[t++]=e.out},e.ence=function(){var Ee=-h(n[--t],0)-1e6;if(n[t++]=Ee,Ee<=899){var De=n[--t];n[t++]=927,n[t++]=De,Rn(o(2))}else{var xe=n[t-1];if(xe<=810899){var Ne=n[--t];n[t++]=926,n[t++]=~~(Ne/900)-1,n[t++]=Ne%900,Rn(o(3))}else{var je=n[t-1];if(je<=811799){var Se=n[--t];n[t++]=925,n[t++]=Se-810900,Rn(o(2))}else n[t++]="bwipp.pdf417badECI#18089",n[t++]="PDF417 supports ECIs 000000 to 811799",Z()}}},e.encfuncs=o(["enct","encn","encb"]),e.addtocws=function(){var Ee=n[--t];H(e.datcws,e.j,Ee),e.j=Ee.length+e.j},e.state=e.T,e.submode=e.A,e.datcws=o(e.seqlen),e.i=0,e.j=0;!(e.i>=e.seq.length);){if(e.chars=h(e.seq,e.i),ce(Ys(e.chars),"arraytype"))if(h(e.chars,0)<=-1e6)n[t++]=e.chars,e.ence(),e.addtocws();else{if(n[t++]=e.chars,e[h(e.encfuncs,e.state)]()===!0)break;e.addtocws()}else n[t++]=o([h(e.latchcws,e.chars)]),e.addtocws(),e.chars==e.tl&&(e.state=e.T,e.submode=e.A),e.chars==e.nl&&(e.state=e.N),(e.chars==e.bl||e.chars==e.bl6)&&(e.state=e.B),e.chars==e.bs&&(e.i=e.i+1,n[t++]=h(e.seq,e.i),e.encb(),e.addtocws());e.i=e.i+1}e.datcws=O(e.datcws,0,e.j)}e.m=e.datcws.length,e.m>926&&(n[t++]="bwipp.pdf417dataTooLong#18129",n[t++]="The data is too long",Z()),e.eclevel==-1&&(e.m<=40&&(e.eclevel=2),e.m>=41&&e.m<=160&&(e.eclevel=3),e.m>=161&&e.m<=320&&(e.eclevel=4),e.m>=321&&(e.eclevel=5)),e.fixedeclevel||(e.maxeclevel=~~(ro(927-e.m)/ro(2))-1,e.eclevel>e.maxeclevel&&(e.eclevel=e.maxeclevel)),e.k=~~El(2,e.eclevel+1),e.columns==0&&(e.columns=~~yc(L3((e.m+e.k)/3))),n[t++]="c",e.columns>=1?n[t++]=e.columns:n[t++]=1;var J=n[--t];if(e[n[--t]]=J,e.r=~~li((e.m+e.k+1)/e.columns),e.r<e.rows&&e.rows<=90&&(e.r=e.rows),e.r<3&&(e.r=3),e.r>90&&(n[t++]="bwipp.pdf417insufficientCapacity#18158",n[t++]="Insufficient capacity in the symbol",Z()),!e.fixedeclevel){var te=e.c,$=e.r,oe=e.m,we=8,be=~~(ro(R(te*$-1-oe))/ro(2))-1;if(~~(ro(R(te*$-1-oe))/ro(2))-1>8){var Te=we;we=be,be=Te}e.maxeclevel=be,e.maxeclevel>e.eclevel&&(e.eclevel=e.maxeclevel,e.k=~~El(2,e.eclevel+1))}e.n=R(e.c*e.r-e.k),e.cws=o(e.c*e.r+1),C(e.cws,0,e.n),H(e.cws,1,e.datcws),n[t++]=e.cws,n[t++]=e.m+1,n[t++]=1/0;for(var ye=0,tt=R(e.n-e.m)-1;ye<tt;ye++)n[t++]=900;var Qe=o(),Ge=n[--t];H(n[--t],Ge,Qe),n[t++]=e.cws,n[t++]=e.n,n[t++]=1/0;for(var Xe=0,Je=e.k;Xe<Je;Xe++)n[t++]=0;n[t++]=0;var dt=o(),vt=n[--t];H(n[--t],vt,dt),n[t++]=1/0,n[t++]=1;for(var _t=0;_t<928;_t++){var xt=n[t-1];n[t++]=xt*3%929}e.rsalog=o(),e.rslog=o(929);for(var bt=1;bt<=928;bt+=1)C(e.rslog,h(e.rsalog,bt),bt);e.rsprod=function(){var Ee=n[t-1],De=n[t-2];if(Ee!=0&&De!=0){var xe=h(e.rslog,n[--t]),Ne=h(e.rsalog,R(xe+h(e.rslog,n[--t]))%928);n[t++]=Ne}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var kt=0,Pt=e.k;kt<Pt;kt++)n[t++]=0;e.coeffs=o();for(var Rt=1,Wt=e.k;Rt<=Wt;Rt+=1){e.i=Rt,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var zt=e.i-1;zt>=1;zt-=1){e.j=zt,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var Ct=n[--t],Yt=n[--t],jt=n[--t];C(n[--t],jt,R(Yt+Ct)%929)}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var an=n[--t],rn=n[--t];C(n[--t],rn,an)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1);for(var Kt=e.coeffs.length-1;Kt>=0;Kt-=2){var Jt=e.coeffs;C(Jt,Kt,929-h(Jt,Kt))}for(var Zt=0,Qt=e.n-1;Zt<=Qt;Zt+=1){e.t=R(h(e.cws,Zt)+h(e.cws,e.n))%929;for(var mn=0,cn=e.k-1;mn<=cn;mn+=1)e.j=mn,C(e.cws,R(e.n+e.j),R(h(e.cws,R(e.n+e.j)+1)+(929-e.t*h(e.coeffs,e.k-e.j-1)%929))%929)}for(var dn=e.n,Ht=R(e.n+e.k);dn<=Ht;dn+=1)C(e.cws,dn,(929-h(e.cws,dn))%929);e.cws=O(e.cws,0,e.cws.length-1);var Bt=h(e.options,"debugcws")!==void 0;Bt&&(n[t++]="bwipp.debugcws#18221",n[t++]=e.cws,Z()),e.clusters=o([o([120256,125680,128380,120032,125560,128318,108736,119920,108640,86080,108592,86048,110016,120560,125820,109792,120440,125758,88256,109680,88160,89536,110320,120700,89312,110200,120638,89200,110140,89840,110460,89720,110398,89980,128506,119520,125304,128190,107712,119408,125244,107616,119352,84032,107568,119324,84e3,107544,83984,108256,119672,125374,85184,108144,119612,85088,108088,119582,85040,108060,85728,108408,119742,85616,108348,85560,108318,85880,108478,85820,85790,107200,119152,125116,107104,119096,125086,83008,107056,119068,82976,107032,82960,82952,83648,107376,119228,83552,107320,119198,83504,107292,83480,83468,83824,107452,83768,107422,83740,83900,106848,118968,125022,82496,106800,118940,82464,106776,118926,82448,106764,82440,106758,82784,106936,119006,82736,106908,82712,106894,82700,82694,106974,82830,82240,106672,118876,82208,106648,118862,82192,106636,82184,106630,82180,82352,82328,82316,82080,118830,106572,106566,82050,117472,124280,127678,103616,117360,124220,103520,117304,124190,75840,103472,75808,104160,117624,124350,76992,104048,117564,76896,103992,76848,76824,77536,104312,117694,77424,104252,77368,77340,77688,104382,77628,77758,121536,126320,128700,121440,126264,128670,111680,121392,126236,111648,121368,126222,111632,121356,103104,117104,124092,112320,103008,117048,124062,112224,121656,126366,93248,74784,102936,117006,93216,112152,93200,75456,103280,117180,93888,75360,103224,117150,93792,112440,121758,93744,75288,93720,75632,103356,94064,75576,103326,94008,112542,93980,75708,94140,75678,94110,121184,126136,128606,111168,121136,126108,111136,121112,126094,111120,121100,111112,111108,102752,116920,123998,111456,102704,116892,91712,74272,121244,116878,91680,74256,102668,91664,111372,102662,74244,74592,102840,116958,92e3,74544,102812,91952,111516,102798,91928,74508,74502,74680,102878,92088,74652,92060,74638,92046,92126,110912,121008,126044,110880,120984,126030,110864,120972,110856,120966,110852,110850,74048,102576,116828,90944,74016,102552,116814,90912,111e3,121038,90896,73992,102534,90888,110982,90884,74160,102620,91056,74136,102606,91032,111054,91020,74118,91014,91100,91086,110752,120920,125998,110736,120908,110728,120902,110724,110722,73888,102488,116782,90528,73872,102476,90512,110796,102470,90504,73860,90500,73858,73944,90584,90572,90566,120876,120870,110658,102444,73800,90312,90308,90306,101056,116080,123580,100960,116024,70720,100912,115996,70688,100888,70672,70664,71360,101232,116156,71264,101176,116126,71216,101148,71192,71180,71536,101308,71480,101278,71452,71612,71582,118112,124600,127838,105024,118064,124572,104992,118040,124558,104976,118028,104968,118022,100704,115896,123486,105312,100656,115868,79424,70176,118172,115854,79392,105240,100620,79376,70152,79368,70496,100792,115934,79712,70448,118238,79664,105372,100750,79640,70412,79628,70584,100830,79800,70556,79772,70542,70622,79838,122176,126640,128860,122144,126616,128846,122128,126604,122120,126598,122116,104768,117936,124508,113472,104736,126684,124494,113440,122264,126670,113424,104712,117894,113416,122246,104706,69952,100528,115804,78656,69920,100504,115790,96064,78624,104856,117966,96032,113560,122318,100486,96016,78600,104838,96008,69890,70064,100572,78768,70040,100558,96176,78744,104910,96152,113614,70022,78726,70108,78812,70094,96220,78798,122016,126552,128814,122e3,126540,121992,126534,121988,121986,104608,117848,124462,113056,104592,126574,113040,122060,117830,113032,104580,113028,104578,113026,69792,100440,115758,78240,69776,100428,95136,78224,104652,100422,95120,113100,69764,95112,78212,69762,78210,69848,100462,78296,69836,95192,78284,69830,95180,78278,69870,95214,121936,126508,121928,126502,121924,121922,104528,117804,112848,104520,117798,112840,121958,112836,104514,112834,69712,100396,78032,69704,100390,94672,78024,104550,94664,112870,69698,94660,78018,94658,78060,94700,94694,126486,121890,117782,104484,104482,69672,77928,94440,69666,77922,99680,68160,99632,68128,99608,115342,68112,99596,68104,99590,68448,99768,115422,68400,99740,68376,99726,68364,68358,68536,99806,68508,68494,68574,101696,116400,123740,101664,116376,101648,116364,101640,116358,101636,67904,99504,115292,72512,67872,116444,115278,72480,101784,116430,72464,67848,99462,72456,101766,67842,68016,99548,72624,67992,99534,72600,101838,72588,67974,68060,72668,68046,72654,118432,124760,127918,118416,124748,118408,124742,118404,118402,101536,116312,105888,101520,116300,105872,118476,116294,105864,101508,105860,101506,105858,67744,99416,72096,67728,116334,80800,72080,101580,99398,80784,105932,67716,80776,72068,67714,72066,67800,99438,72152,67788,80856,72140,67782,80844,72134,67822,72174,80878,126800,128940,126792,128934,126788,126786,118352,124716,122576,126828,124710,122568,126822,122564,118338,122562,101456,116268,105680,101448,116262,114128,105672,118374,114120,122598,101442,114116,105666,114114,67664,99372,71888,67656,99366,80336,71880,101478,97232,80328,105702,67650,97224,114150,71874,97220,67692,71916,67686,80364,71910,97260,80358,97254,126760,128918,126756,126754,118312,124694,122472,126774,122468,118306,122466,101416,116246,105576,101412,113896,105572,101410,113892,105570,113890,67624,99350,71784,101430,80104,71780,67618,96744,80100,71778,96740,80098,96738,71798,96758,126738,122420,122418,105524,113780,113778,71732,79988,96500,96498,66880,66848,98968,66832,66824,66820,66992,66968,66956,66950,67036,67022,1e5,99984,115532,99976,115526,99972,99970,66720,98904,69024,100056,98892,69008,100044,69e3,100038,68996,66690,68994,66776,98926,69080,100078,69068,66758,69062,66798,69102,116560,116552,116548,116546,99920,102096,116588,115494,102088,116582,102084,99906,102082,66640,68816,66632,98854,73168,68808,66628,73160,68804,66626,73156,68802,66668,68844,66662,73196,68838,73190,124840,124836,124834,116520,118632,124854,118628,116514,118626,99880,115478,101992,116534,106216,101988,99874,106212,101986,106210,66600,98838,68712,99894,72936,68708,66594,81384,72932,68706,81380,72930,66614,68726,72950,81398,128980,128978,124820,126900,124818,126898,116500,118580,116498,122740,118578,122738,99860,101940,99858,106100,101938,114420]),o([128352,129720,125504,128304,129692,125472,128280,129678,125456,128268,125448,128262,125444,125792,128440,129758,120384,125744,128412,120352,125720,128398,120336,125708,120328,125702,120324,120672,125880,128478,110144,120624,125852,110112,120600,125838,110096,120588,110088,120582,110084,110432,120760,125918,89664,110384,120732,89632,110360,120718,89616,110348,89608,110342,89952,110520,120798,89904,110492,89880,110478,89868,90040,110558,90012,89998,125248,128176,129628,125216,128152,129614,125200,128140,125192,128134,125188,125186,119616,125360,128220,119584,125336,128206,119568,125324,119560,125318,119556,119554,108352,119728,125404,108320,119704,125390,108304,119692,108296,119686,108292,108290,85824,108464,119772,85792,108440,119758,85776,108428,85768,108422,85764,85936,108508,85912,108494,85900,85894,85980,85966,125088,128088,129582,125072,128076,125064,128070,125060,125058,119200,125144,128110,119184,125132,119176,125126,119172,119170,107424,119256,125166,107408,119244,107400,119238,107396,107394,83872,107480,119278,83856,107468,83848,107462,83844,83842,83928,107502,83916,83910,83950,125008,128044,125e3,128038,124996,124994,118992,125036,118984,125030,118980,118978,106960,119020,106952,119014,106948,106946,82896,106988,82888,106982,82884,82882,82924,82918,124968,128022,124964,124962,118888,124982,118884,118882,106728,118902,106724,106722,82408,106742,82404,82402,124948,124946,118836,118834,106612,106610,124224,127664,129372,124192,127640,129358,124176,127628,124168,127622,124164,124162,117568,124336,127708,117536,124312,127694,117520,124300,117512,124294,117508,117506,104256,117680,124380,104224,117656,124366,104208,117644,104200,117638,104196,104194,77632,104368,117724,77600,104344,117710,77584,104332,77576,104326,77572,77744,104412,77720,104398,77708,77702,77788,77774,128672,129880,93168,128656,129868,92664,128648,129862,92412,128644,128642,124064,127576,129326,126368,124048,129902,126352,128716,127558,126344,124036,126340,124034,126338,117152,124120,127598,121760,117136,124108,121744,126412,124102,121736,117124,121732,117122,121730,103328,117208,124142,112544,103312,117196,112528,121804,117190,112520,103300,112516,103298,112514,75680,103384,117230,94112,75664,103372,94096,112588,103366,94088,75652,94084,75650,75736,103406,94168,75724,94156,75718,94150,75758,128592,129836,91640,128584,129830,91388,128580,91262,128578,123984,127532,126160,123976,127526,126152,128614,126148,123970,126146,116944,124012,121296,116936,124006,121288,126182,121284,116930,121282,102864,116972,111568,102856,116966,111560,121318,111556,102850,111554,74704,102892,92112,74696,102886,92104,111590,92100,74690,92098,74732,92140,74726,92134,128552,129814,90876,128548,90750,128546,123944,127510,126056,128566,126052,123938,126050,116840,123958,121064,116836,121060,116834,121058,102632,116854,111080,121078,111076,102626,111074,74216,102646,91112,74212,91108,74210,91106,74230,91126,128532,90494,128530,123924,126004,123922,126002,116788,120948,116786,120946,102516,110836,102514,110834,73972,90612,73970,90610,128522,123914,125978,116762,120890,102458,110714,123552,127320,129198,123536,127308,123528,127302,123524,123522,116128,123608,127342,116112,123596,116104,123590,116100,116098,101280,116184,123630,101264,116172,101256,116166,101252,101250,71584,101336,116206,71568,101324,71560,101318,71556,71554,71640,101358,71628,71622,71662,127824,129452,79352,127816,129446,79100,127812,78974,127810,123472,127276,124624,123464,127270,124616,127846,124612,123458,124610,115920,123500,118224,115912,123494,118216,124646,118212,115906,118210,100816,115948,105424,100808,115942,105416,118246,105412,100802,105410,70608,100844,79824,70600,100838,79816,105446,79812,70594,79810,70636,79852,70630,79846,129960,95728,113404,129956,95480,113278,129954,95356,95294,127784,129430,78588,128872,129974,95996,78462,128868,127778,95870,128866,123432,127254,124520,123428,126696,128886,123426,126692,124514,126690,115816,123446,117992,115812,122344,117988,115810,122340,117986,122338,100584,115830,104936,100580,113640,104932,100578,113636,104930,113634,70120,100598,78824,70116,96232,78820,70114,96228,78818,96226,70134,78838,129940,94968,113022,129938,94844,94782,127764,78206,128820,127762,95102,128818,123412,124468,123410,126580,124466,126578,115764,117876,115762,122100,117874,122098,100468,104692,100466,113140,104690,113138,69876,78324,69874,95220,78322,95218,129930,94588,94526,127754,128794,123402,124442,126522,115738,117818,121978,100410,104570,112890,69754,78074,94714,94398,123216,127148,123208,127142,123204,123202,115408,123244,115400,123238,115396,115394,99792,115436,99784,115430,99780,99778,68560,99820,68552,99814,68548,68546,68588,68582,127400,129238,72444,127396,72318,127394,123176,127126,123752,123172,123748,123170,123746,115304,123190,116456,115300,116452,115298,116450,99560,115318,101864,99556,101860,99554,101858,68072,99574,72680,68068,72676,68066,72674,68086,72694,129492,80632,105854,129490,80508,80446,127380,72062,127924,127378,80766,127922,123156,123700,123154,124788,123698,124786,115252,116340,115250,118516,116338,118514,99444,101620,99442,105972,101618,105970,67828,72180,67826,80884,72178,80882,97008,114044,96888,113982,96828,96798,129482,80252,130010,97148,80190,97086,127370,127898,128954,123146,123674,124730,126842,115226,116282,118394,122618,99386,101498,105722,114170,67706,71930,80378,96632,113854,96572,96542,80062,96702,96444,96414,96350,123048,123044,123042,115048,123062,115044,115042,99048,115062,99044,99042,67048,99062,67044,67042,67062,127188,68990,127186,123028,123316,123026,123314,114996,115572,114994,115570,98932,100084,98930,100082,66804,69108,66802,69106,129258,73084,73022,127178,127450,123018,123290,123834,114970,115514,116602,98874,99962,102138,66682,68858,73210,81272,106174,81212,81182,72894,81342,97648,114364,97592,114334,97564,97550,81084,97724,81054,97694,97464,114270,97436,97422,80990,97502,97372,97358,97326,114868,114866,98676,98674,66292,66290,123098,114842,115130,98618,99194,66170,67322,69310,73404,73374,81592,106334,81564,81550,73310,81630,97968,114524,97944,114510,97932,97926,81500,98012,81486,97998,97880,114478,97868,97862,81454,97902,97836,97830,69470,73564,73550,81752,106414,81740,81734,73518,81774,81708,81702]),o([109536,120312,86976,109040,120060,86496,108792,119934,86256,108668,86136,129744,89056,110072,129736,88560,109820,129732,88312,109694,129730,88188,128464,129772,89592,128456,129766,89340,128452,89214,128450,125904,128492,125896,128486,125892,125890,120784,125932,120776,125926,120772,120770,110544,120812,110536,120806,110532,84928,108016,119548,84448,107768,119422,84208,107644,84088,107582,84028,129640,85488,108284,129636,85240,108158,129634,85116,85054,128232,129654,85756,128228,85630,128226,125416,128246,125412,125410,119784,125430,119780,119778,108520,119798,108516,108514,83424,107256,119166,83184,107132,83064,107070,83004,82974,129588,83704,107390,129586,83580,83518,128116,83838,128114,125172,125170,119284,119282,107508,107506,82672,106876,82552,106814,82492,82462,129562,82812,82750,128058,125050,119034,82296,106686,82236,82206,82366,82108,82078,76736,103920,117500,76256,103672,117374,76016,103548,75896,103486,75836,129384,77296,104188,129380,77048,104062,129378,76924,76862,127720,129398,77564,127716,77438,127714,124392,127734,124388,124386,117736,124406,117732,117730,104424,117750,104420,104418,112096,121592,126334,92608,111856,121468,92384,111736,121406,92272,111676,92216,111646,92188,75232,103160,117118,93664,74992,103036,93424,112252,102974,93304,74812,93244,74782,93214,129332,75512,103294,129908,129330,93944,75388,129906,93820,75326,93758,127604,75646,128756,127602,94078,128754,124148,126452,124146,126450,117236,121844,117234,121842,103412,103410,91584,111344,121212,91360,111224,121150,91248,111164,91192,111134,91164,91150,74480,102780,91888,74360,102718,91768,111422,91708,74270,91678,129306,74620,129850,92028,74558,91966,127546,128634,124026,126202,116986,121338,102906,90848,110968,121022,90736,110908,90680,110878,90652,90638,74104,102590,91e3,74044,90940,74014,90910,74174,91070,90480,110780,90424,110750,90396,90382,73916,90556,73886,90526,90296,110686,90268,90254,73822,90334,90204,90190,71136,101112,116094,70896,100988,70776,100926,70716,70686,129204,71416,101246,129202,71292,71230,127348,71550,127346,123636,123634,116212,116210,101364,101362,79296,105200,118140,79072,105080,118078,78960,105020,78904,104990,78876,78862,70384,100732,79600,70264,100670,79480,105278,79420,70174,79390,129178,70524,129466,79740,70462,79678,127290,127866,123514,124666,115962,118266,100858,113376,122232,126654,95424,113264,122172,95328,113208,122142,95280,113180,95256,113166,95244,78560,104824,117950,95968,78448,104764,95856,113468,104734,95800,78364,95772,78350,95758,70008,100542,78712,69948,96120,78652,69918,96060,78622,96030,70078,78782,96190,94912,113008,122044,94816,112952,122014,94768,112924,94744,112910,94732,94726,78192,104636,95088,78136,104606,95032,113054,95004,78094,94990,69820,78268,69790,95164,78238,95134,94560,112824,121950,94512,112796,94488,112782,94476,94470,78008,104542,94648,77980,94620,77966,94606,69726,78046,94686,94384,112732,94360,112718,94348,94342,77916,94428,77902,94414,94296,112686,94284,94278,77870,94318,94252,94246,68336,99708,68216,99646,68156,68126,68476,68414,127162,123258,115450,99834,72416,101752,116414,72304,101692,72248,101662,72220,72206,67960,99518,72568,67900,72508,67870,72478,68030,72638,80576,105840,118460,80480,105784,118430,80432,105756,80408,105742,80396,80390,72048,101564,80752,71992,101534,80696,71964,80668,71950,80654,67772,72124,67742,80828,72094,80798,114016,122552,126814,96832,113968,122524,96800,113944,122510,96784,113932,96776,113926,96772,80224,105656,118366,97120,80176,105628,97072,114076,105614,97048,80140,97036,80134,97030,71864,101470,80312,71836,97208,80284,71822,97180,80270,97166,67678,71902,80350,97246,96576,113840,122460,96544,113816,122446,96528,113804,96520,113798,96516,96514,80048,105564,96688,80024,105550,96664,113870,96652,80006,96646,71772,80092,71758,96732,80078,96718,96416,113752,122414,96400,113740,96392,113734,96388,96386,79960,105518,96472,79948,96460,79942,96454,71726,79982,96494,96336,113708,96328,113702,96324,96322,79916,96364,79910,96358,96296,113686,96292,96290,79894,96310,66936,99006,66876,66846,67006,68976,100028,68920,99998,68892,68878,66748,69052,66718,69022,73056,102072,116574,73008,102044,72984,102030,72972,72966,68792,99934,73144,68764,73116,68750,73102,66654,68830,73182,81216,106160,118620,81184,106136,118606,81168,106124,81160,106118,81156,81154,72880,101980,81328,72856,101966,81304,106190,81292,72838,81286,68700,72924,68686,81372,72910,81358,114336,122712,126894,114320,122700,114312,122694,114308,114306,81056,106072,118574,97696,81040,106060,97680,114380,106054,97672,81028,97668,81026,97666,72792,101934,81112,72780,97752,81100,72774,97740,81094,97734,68654,72814,81134,97774,114256,122668,114248,122662,114244,114242,80976,106028,97488,80968,106022,97480,114278,97476,80962,97474,72748,81004,72742,97516,80998,97510,114216,122646,114212,114210,80936,106006,97384,80932,97380,80930,97378,72726,80950,97398,114196,114194,80916,97332,80914,97330,66236,66206,67256,99166,67228,67214,66142,67294,69296,100188,69272,100174,69260,69254,67164,69340,67150,69326,73376,102232,116654,73360,102220,73352,102214,73348,73346,69208,100142,73432,102254,73420,69190,73414,67118,69230,73454,106320,118700,106312,118694,106308,106306,73296,102188,81616,106348,102182,81608,73284,81604,73282,81602,69164,73324,69158,81644,73318,81638,122792,126934,122788,122786,106280,118678,114536,106276,114532,106274,114530,73256,102166,81512,73252,98024,81508,73250,98020,81506,98018,69142,73270,81526,98038,122772,122770,106260,114484,106258,114482,73236,81460,73234,97908,81458,97906,122762,106250,114458,73226,81434,97850,66396,66382,67416,99246,67404,67398,66350,67438,69456,100268,69448,100262,69444,69442,67372,69484,67366,69478,102312,116694,102308,102306,69416,100246,73576,102326,73572,69410,73570,67350,69430,73590,118740,118738,102292,106420,102290,106418,69396,73524,69394,81780,73522,81778,118730,102282,106394,69386,73498,81722,66476,66470,67496,99286,67492,67490,66454,67510,100308,100306,67476,69556,67474,69554,116714])]),e.cwtobits=function(){var Ee=h(e.clusters,n[--t]);e.v=h(Ee,n[--t]),n[t++]=1/0;for(var De=0;De<17;De++)n[t++]=0;for(var xe=Nn(fe(17),e.v,2),Ne=0,je=xe.length;Ne<je;Ne++)n[t++]=h(xe,Ne)-48;var Se=o();n[t++]=O(Se,Se.length-17,17)},e.compact?e.rwid=17*e.c+17+17+1:e.rwid=17*e.c+17+17+17+18,e.pixs=o(e.rwid*e.r*e.rowmult);for(var Y=0,le=e.r-1;Y<=le;Y+=1){e.i=Y,e.i%3==0&&(e.lcw=~~(e.i/3)*30+~~((e.r-1)/3),e.rcw=R(~~(e.i/3)*30+e.c)-1),e.i%3==1&&(e.lcw=~~(e.i/3)*30+e.eclevel*3+(e.r-1)%3,e.rcw=~~(e.i/3)*30+~~((e.r-1)/3)),e.i%3==2&&(e.lcw=R(~~(e.i/3)*30+e.c)-1,e.rcw=~~(e.i/3)*30+e.eclevel*3+(e.r-1)%3),n[t++]=1/0,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=e.lcw,n[t++]=e.i%3,e.cwtobits(),W(n[--t]);for(var se=O(e.cws,e.c*e.i,e.c),ge=0,ve=se.length;ge<ve;ge++)n[t++]=h(se,ge),n[t++]=e.i%3,e.cwtobits(),W(n[--t]);e.compact||(n[t++]=e.rcw,n[t++]=e.i%3,e.cwtobits(),W(n[--t]),n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=0),n[t++]=1;var _e=o();n[t++]=_e;for(var pe=0,Oe=e.rowmult-1;pe<=Oe;pe+=1){var de=n[t-1];H(e.pixs,(pe+e.i*e.rowmult)*e.rwid,de)}t--}var ke=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.rwid],["pixy",e.r*e.rowmult],["height",e.r*e.rowmult/72],["width",e.rwid/72],["borderleft",2],["borderright",2],["bordertop",2],["borderbottom",2],["opt",e.options]]);n[t++]=ke,e.dontdraw||Lt(),e=r}function mT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"compact",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Ax();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function z3(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.columns=0,e.rows=0,e.rowmult=2,e.cca=!1,e.ccb=!1,e.raw=!1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.micropdf417emptyData#18631",n[t++]="The data must not be empty",Z()),e.rowmult<=0&&(n[t++]="bwipp.micropdf417badRowMult#18635",n[t++]="The row multiplier must be greater than zero",Z()),(e.cca&&e.ccb||e.cca&&e.raw||e.ccb&&e.raw)&&(n[t++]="bwipp.micropdf417ccaAndCcb#18639",n[t++]="Cannot combine cca, ccb and raw",Z()),qe(e.version,"unset"))if(sn(e.version,"x"),n[--t]){var i=n[--t];n[t-1]=i;var a=n[t-1],s=n[t-2];n[t++]=s,n[t++]=a,Rn(o(2)),Ie(n[--t],function(){var Se=n[t-1];n[t++]=!0,Se.length==0&&(n[t-1]=!1);var ze=n[--t],Pe=n[--t];n[t++]=ze,Ie(Pe,function(){var Be=n[--t];(Be<48||Be>57)&&(n[t-1]=!1)}),n[--t]||(n[t++]="bwipp.micropdf417BadVersionBadRowOrColumn#18653",n[t++]="version must be formatted as RxC",Z())}),e.rows=Ye(n[--t]),e.columns=Ye(n[--t])}else t--,n[t++]="bwipp.micropdf417badVersionFormat#18659",n[t++]="version must be formatted as RxC",Z();e.T=0,e.N=1,e.B=2,e.A=0,e.L=1,e.M=2,e.P=3,e.tl=-1,e.nl=-2,e.bl=-3,e.bl6=-4,e.bs=-5,e.al=-6,e.ll=-7,e.ml=-8,e.pl=-9,e.as=-10,e.ps=-11,e.m05=-12,e.m06=-13,e.charmaps=o([o(["A","a","0",";"]),o(["B","b","1","<"]),o(["C","c","2",">"]),o(["D","d","3","@"]),o(["E","e","4","["]),o(["F","f","5",92]),o(["G","g","6","]"]),o(["H","h","7","_"]),o(["I","i","8","`"]),o(["J","j","9","~"]),o(["K","k","&","!"]),o(["L","l",13,13]),o(["M","m",9,9]),o(["N","n",",",","]),o(["O","o",":",":"]),o(["P","p","#",10]),o(["Q","q","-","-"]),o(["R","r",".","."]),o(["S","s","$","$"]),o(["T","t","/","/"]),o(["U","u","+",'"']),o(["V","v","%","|"]),o(["W","w","*","*"]),o(["X","x","=",40]),o(["Y","y","^",41]),o(["Z","z",e.pl,"?"]),o([" "," "," ","{"]),o([e.ll,e.as,e.ll,"}"]),o([e.ml,e.ml,e.al,"'"]),o([e.ps,e.ps,e.ps,e.al])]),e.charvals=o([new Map,new Map,new Map,new Map]),e.alltext=new Map;for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=h(e.charmaps,e.i);for(var d=0;d<=3;d+=1){e.j=d;var f=h(e.encs,e.j);if(n[t++]=f,ce(Ys(f),"stringtype")){var m=h(n[--t],0);n[t++]=m}var g=n[--t];C(h(e.charvals,e.j),g,e.i),C(e.alltext,g,-1)}}if(e.e=1e4,e.latlen=o([o([0,1,1,2]),o([2,0,1,2]),o([1,1,0,1]),o([1,2,2,0])]),e.latseq=o([o([o([]),o([e.ll]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.ml,e.al]),o([]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.al]),o([e.ll]),o([]),o([e.pl])]),o([o([e.al]),o([e.al,e.ll]),o([e.al,e.ml]),o([])])]),e.shftlen=o([o([e.e,e.e,e.e,1]),o([1,e.e,e.e,1]),o([e.e,e.e,e.e,1]),o([e.e,e.e,e.e,e.e])]),e.raw||e.cca){for(e.datcws=o(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||h(e.barcode,e.i)!=94);){var v=O(e.barcode,e.i+1,3);n[t++]=v,n[t++]=!1;for(var y=0,A=v.length;y<A;y++){var w=h(v,y);(w<48||w>57)&&(n[t-1]=!0)}if(n[--t]){t--;break}e.cw=Ye(n[--t]),C(e.datcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(n[t++]="bwipp.micropdf417badCcaRawFormat#18771",n[t++]="cca and raw data must be formatted as ^NNN",Z()),e.datcws=O(e.datcws,0,e.j)}if(e.encb=function(){e.in=n[--t],e.inlen=e.in.length,e.out=o(~~(e.inlen/6)*5+e.inlen%6);for(var Se=0,ze=~~(e.inlen/6)-1;Se<=ze;Se+=1){e.k=Se,n[t++]=1/0,W(O(e.in,e.k*6,3)),e.msbs=o(),n[t++]=1/0,W(e.msbs);var Pe=n[--t],Be=n[--t],at=n[--t];n[t++]=R(Pe+Be*256+at*65536);for(var Ze=0;Ze<3;Ze++){var ft=n[--t];n[t++]=ft%900,n[t++]=~~(ft/900)}e.mscs=o(),n[t++]=1/0,W(O(e.in,e.k*6+3,3)),e.lsbs=o(),n[t++]=1/0,W(e.lsbs);var Ve=n[--t],$e=n[--t],Me=n[--t];n[t++]=R(Ve+$e*256+Me*65536);for(var it=0;it<3;it++){var st=n[--t];n[t++]=st%900,n[t++]=~~(st/900)}e.lscs=o();var mt=h(e.lscs,0),Tt=h(e.mscs,0);C(e.out,e.k*5+4,R(mt+Tt*316)%900);var Ot=h(e.lscs,1),Et=h(e.mscs,0),Dt=h(e.mscs,1);C(e.out,e.k*5+3,R(~~((mt+Tt*316)/900)+Ot+Et*641+Dt*316)%900);var wt=h(e.lscs,2),en=h(e.mscs,0),gt=h(e.mscs,1),un=h(e.mscs,2);C(e.out,e.k*5+2,R(~~((~~((mt+Tt*316)/900)+Ot+Et*641+Dt*316)/900)+wt+en*20+gt*641+un*316)%900);var Vt=h(e.lscs,3),fn=h(e.mscs,1),$n=h(e.mscs,2);C(e.out,e.k*5+1,R(~~((~~((~~((mt+Tt*316)/900)+Ot+Et*641+Dt*316)/900)+wt+en*20+gt*641+un*316)/900)+Vt+fn*20+$n*641)%900),C(e.out,e.k*5,R(~~((~~((~~((~~((mt+Tt*316)/900)+Ot+Et*641+Dt*316)/900)+wt+en*20+gt*641+un*316)/900)+Vt+fn*20+$n*641)/900)+h(e.mscs,2)*20)%900)}if(e.rem=e.inlen%6,e.rem!=0){n[t++]=e.out,n[t++]=e.out.length-e.rem,n[t++]=1/0,W(O(e.in,e.inlen-e.rem,e.rem));var ei=o(),Dn=n[--t];H(n[--t],Dn,ei)}n[t++]=e.out},e.ccb){e.barlen=e.barcode.length,e.datcws=o(~~(e.barlen/6)*5+e.barlen%6+2),C(e.datcws,0,920);var k=e.barlen%6==0?924:901;C(e.datcws,1,k),n[t++]=e.datcws,n[t++]=2,n[t++]=1/0,Ie(e.barcode);var E=o();n[t++]=E,e.encb();var I=n[--t],T=n[--t];H(n[--t],T,I)}if(!e.raw&&!e.cca&&!e.ccb){var N=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=N,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var j=n[--t];if(e[n[--t]]=j,e.msglen=e.msg.length,e.msglen>=9){W(O(e.msg,0,7));var B=n[--t];n[t-1]=B==29;var U=n[--t],F=n[--t],P=n[--t],z=n[--t],V=n[--t],L=n[--t];if(U&&F==48&&P==30&&z==62&&V==41&&L==91){W(O(e.msg,e.msglen-2,2));var Q=n[--t],q=n[--t];Q==4&&q==30&&(h(e.msg,5)==53?(n[t++]=1/0,n[t++]=e.m05,W(O(e.msg,7,e.msg.length-9)),e.msg=o()):h(e.msg,5)==54&&(n[t++]=1/0,n[t++]=e.m06,W(O(e.msg,7,e.msg.length-9)),e.msg=o()))}}e.msglen=e.msg.length,n[t++]=1/0;for(var ee=0,X=e.msglen;ee<X;ee++)n[t++]=0;n[t++]=0,e.numdigits=o(),n[t++]=1/0;for(var ae=0,K=e.msglen;ae<K;ae++)n[t++]=0;n[t++]=0,e.numtext=o(),n[t++]=1/0;for(var ie=0,ne=e.msglen;ie<ne;ie++)n[t++]=0;n[t++]=0,e.numbytes=o(),n[t++]=1/0;for(var J=0,te=e.msglen;J<te;J++)n[t++]=0;e.iseci=o();for(var $=e.msglen-1;$>=0;$-=1){e.i=$;var oe=h(e.msg,e.i);oe>=48&&oe<=57&&C(e.numdigits,e.i,h(e.numdigits,e.i+1)+1);var we=h(e.alltext,h(e.msg,e.i))!==void 0;we&&h(e.numdigits,e.i)<13&&C(e.numtext,e.i,h(e.numtext,e.i+1)+1),h(e.msg,e.i)>=0&&h(e.numtext,e.i)<5&&h(e.numdigits,e.i)<13&&C(e.numbytes,e.i,h(e.numbytes,e.i+1)+1),C(e.iseci,e.i,h(e.msg,e.i)<=-1e6)}for(e.numdigits=O(e.numdigits,0,e.msglen),e.numtext=O(e.numtext,0,e.msglen),e.numbytes=O(e.numbytes,0,e.msglen),e.seq=o([]),e.seqlen=0,e.state=e.B,e.p=0;e.p!=e.msglen;){var be=h(e.msg,e.p);if(e.p==0&&(be==e.m05||be==e.m06)){n[t++]=1/0,W(e.seq);var Te=h(e.msg,e.p)==e.m05?e.m05:e.m06;n[t++]=Te,e.seq=o(),e.p=e.p+1,e.seqlen=e.seqlen+1}else if(h(e.iseci,e.p)){if(e.eci=h(e.msg,e.p),n[t++]=1/0,W(e.seq),n[t++]=o([e.eci]),e.seq=o(),e.p=e.p+1,n[t++]="seqlen",n[t++]=e.seqlen,e.eci<=-1810900)n[t++]=2;else{var ye=e.eci<=-1000900?3:2;n[t++]=ye}var tt=n[--t],Qe=n[--t];e[n[--t]]=R(Qe+tt)}else if(e.n=h(e.numdigits,e.p),e.n>=13||e.n==e.msglen&&e.n>=8){n[t++]=1/0,W(e.seq),n[t++]=e.nl,n[t++]=1/0,W(O(e.msg,e.p,e.n));var Ge=o();n[t++]=Ge,e.seq=o(),e.state=e.N,e.p=R(e.p+e.n),e.seqlen=R(e.seqlen+1+e.n)}else if(e.t=h(e.numtext,e.p),e.t>=5){n[t++]=1/0,W(e.seq),e.state!=e.T&&(n[t++]=e.tl),n[t++]=1/0,W(O(e.msg,e.p,e.t));var Xe=o();n[t++]=Xe,e.seq=o(),e.state=e.T,e.p=R(e.p+e.t),e.seqlen=R(e.seqlen+1+e.t)}else if(e.b=h(e.numbytes,e.p),e.b==1&&e.state==e.T)n[t++]=1/0,W(e.seq),n[t++]=e.bs,n[t++]=o([h(e.msg,e.p)]),e.seq=o(),e.p=R(e.p+e.b),e.seqlen=e.seqlen+2;else{n[t++]=1/0,W(e.seq);var Je=e.b%6!=0?e.bl:e.bl6;n[t++]=Je,n[t++]=1/0,W(O(e.msg,e.p,e.b));var dt=o();n[t++]=dt,e.seq=o(),e.state=e.B,e.p=R(e.p+e.b),e.seqlen=R(e.seqlen+1+e.b)}}for(n[t++]=1/0,n[t++]=e.tl,n[t++]=900,n[t++]=e.bl,n[t++]=901,n[t++]=e.bl6,n[t++]=924,n[t++]=e.nl,n[t++]=902,n[t++]=e.bs,n[t++]=913,n[t++]=e.m05,n[t++]=916,n[t++]=e.m06,n[t++]=917,e.latchcws=rt(),e.enca=function(){var Se=h(h(e.charvals,e.A),n[--t]);n[t++]=Se},e.encl=function(){var Se=h(h(e.charvals,e.L),n[--t]);n[t++]=Se},e.encm=function(){var Se=h(h(e.charvals,e.M),n[--t]);n[t++]=Se},e.encp=function(){var Se=h(h(e.charvals,e.P),n[--t]);n[t++]=Se},e.textencfuncs=o(["enca","encl","encm","encp"]),e.addtotext=function(){C(e.text,e.l,n[--t]),e.l=e.l+1},e.enct=function(){e.in=n[--t],e.curlen=o([e.e,e.e,e.e,e.e]),C(e.curlen,e.submode,0),e.curseq=o([o([]),o([]),o([]),o([])]),Ie(e.in,function(){for(e.char=n[--t];;){e.imp=!1;for(var en=o([e.A,e.L,e.M,e.P]),gt=0,un=en.length;gt<un;gt++){e.x=h(en,gt);for(var Vt=o([e.A,e.L,e.M,e.P]),fn=0,$n=Vt.length;fn<$n;fn++)if(e.y=h(Vt,fn),e.cost=R(h(e.curlen,e.x)+h(h(e.latlen,e.x),e.y)),e.cost<h(e.curlen,e.y)){C(e.curlen,e.y,e.cost),n[t++]=e.curseq,n[t++]=e.y,n[t++]=1/0,W(h(e.curseq,e.x)),W(h(h(e.latseq,e.x),e.y));var ei=o(),Dn=n[--t];C(n[--t],Dn,ei),e.imp=!0}}if(!e.imp)break}e.nxtlen=o([e.e,e.e,e.e,e.e]),e.nxtseq=o(4);for(var ai=o([e.A,e.L,e.M,e.P]),zn=0,mi=ai.length;zn<mi;zn++)for(e.x=h(ai,zn);;){var Fn=h(h(e.charvals,e.x),e.char)!==void 0;if(!Fn)break;if(e.cost=h(e.curlen,e.x)+1,e.cost<h(e.nxtlen,e.x)){C(e.nxtlen,e.x,e.cost),n[t++]=e.nxtseq,n[t++]=e.x,n[t++]=1/0,W(h(e.curseq,e.x)),n[t++]=e.char;var Hn=o(),_n=n[--t];C(n[--t],_n,Hn)}for(var vn=o([e.A,e.L,e.M,e.P]),kn=0,Ai=vn.length;kn<Ai;kn++)if(e.y=h(vn,kn),qe(e.x,e.y)&&(e.cost=R(h(e.curlen,e.y)+h(h(e.shftlen,e.y),e.x))+1,e.cost<h(e.nxtlen,e.y))){C(e.nxtlen,e.y,e.cost),n[t++]=e.nxtseq,n[t++]=e.y,n[t++]=1/0,W(h(e.curseq,e.y));var Ei=e.x==e.A?e.as:e.ps;n[t++]=Ei,n[t++]=e.char;var Ji=o(),nn=n[--t];C(n[--t],nn,Ji)}break}e.curlen=e.nxtlen,e.curseq=e.nxtseq}),e.minseq=e.e;for(var Se=o([e.A,e.L,e.M,e.P]),ze=0,Pe=Se.length;ze<Pe;ze++)e.k=h(Se,ze),h(e.curlen,e.k)<e.minseq&&(e.minseq=h(e.curlen,e.k),e.txtseq=h(e.curseq,e.k));for(e.text=o(e.minseq),e.k=0,e.l=0;!(e.k>=e.txtseq.length||(e.char=h(e.txtseq,e.k),n[t++]=e.char,e[h(e.textencfuncs,e.submode)]()===!0));)e.addtotext(),e.k=e.k+1,(e.char==e.as||e.char==e.ps)&&(n[t++]=h(e.txtseq,e.k),e.char==e.as?e.enca():e.encp(),e.addtotext(),e.k=e.k+1),e.char==e.al&&(e.submode=e.A),e.char==e.ll&&(e.submode=e.L),e.char==e.ml&&(e.submode=e.M),e.char==e.pl&&(e.submode=e.P);if(e.text.length%2==1){if(e.submode==e.P){n[t++]="pad",n[t++]=e.al,e.encp();var Be=n[--t];e[n[--t]]=Be,e.submode=e.A}else{e.nextecitext=!1;for(var at=e.i+1,Ze=e.seq.length-1;at<=Ze;at+=1){if(e.ti=at,qe(Ys(h(e.seq,e.ti)),"arraytype")){e.nextecitext=!1;break}if(h(h(e.seq,e.ti),0)>-1e6)break;e.nextecitext=!0}if(e.nextecitext)if(e.submode==e.A){var ft=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(ft){n[t++]="pad",n[t++]=e.ll,e.enca();var Ve=n[--t];e[n[--t]]=Ve,e.submode=e.L}else{n[t++]="pad",n[t++]=e.ml,e.enca();var $e=n[--t];e[n[--t]]=$e,e.submode=e.M}}else if(e.submode==e.M){var Me=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(Me){n[t++]="pad",n[t++]=e.ll,e.encm();var it=n[--t];e[n[--t]]=it,e.submode=e.L}else{var st=h(h(e.charvals,e.P),h(h(e.seq,e.ti),0))!==void 0;if(st){n[t++]="pad",n[t++]=e.pl,e.encm();var mt=n[--t];e[n[--t]]=mt,e.submode=e.P}else{n[t++]="pad",n[t++]=e.al,e.encm();var Tt=n[--t];e[n[--t]]=Tt,e.submode=e.A}}}else{n[t++]="pad",n[t++]=e.ml,e.encl();var Ot=n[--t];e[n[--t]]=Ot,e.submode=e.M}else{if(n[t++]="pad",n[t++]=e.ps,e[h(e.textencfuncs,e.submode)]()===!0)return!0;var Et=n[--t];e[n[--t]]=Et}}n[t++]=1/0,W(e.text),n[t++]=e.pad,e.text=o()}e.out=o(~~(e.text.length/2));for(var Dt=0,wt=e.out.length-1;Dt<=wt;Dt+=1)e.k=Dt,C(e.out,e.k,R(h(e.text,e.k*2)*30+h(e.text,e.k*2+1)));n[t++]=e.out},e.encn=function(){e.in=n[--t],e.out=o([]);for(var Se=0,ze=e.in.length-1;Se<=ze;Se+=44){e.k=Se,n[t++]=1/0;var Pe=e.in.length-e.k;n[t++]=1,n[t++]=e.in,n[t++]=e.k,n[t++]=Pe,Pe>44&&(n[t-1]=44);for(var Be=n[--t],at=n[--t],Ze=O(n[--t],at,Be),ft=0,Ve=Ze.length;ft<Ve;ft++)n[t++]=h(Ze,ft)-48;for(e.gmod=o(),e.cwn=o([]);;){for(e.dv=900,e.gmul=o([]),e.val=0;e.gmod.length!=0;)e.val=R(e.val*10+h(e.gmod,0)),e.gmod=O(e.gmod,1,e.gmod.length-1),e.val<e.dv?e.gmul.length!=0&&(n[t++]=1/0,W(e.gmul),n[t++]=0,e.gmul=o()):(n[t++]=1/0,W(e.gmul),n[t++]=~~(e.val/e.dv),e.gmul=o()),e.val=e.val%e.dv;if(e.dv=e.val,n[t++]=1/0,n[t++]=e.dv,W(e.cwn),e.cwn=o(),e.gmod=e.gmul,e.gmul.length==0)break}n[t++]=1/0,W(e.out),W(e.cwn),e.out=o()}n[t++]=e.out},e.ence=function(){var Se=-h(n[--t],0)-1e6;if(n[t++]=Se,Se<=899){var ze=n[--t];n[t++]=927,n[t++]=ze,Rn(o(2))}else{var Pe=n[t-1];if(Pe<=810899){var Be=n[--t];n[t++]=926,n[t++]=~~(Be/900)-1,n[t++]=Be%900,Rn(o(3))}else{var at=n[t-1];if(at<=811799){var Ze=n[--t];n[t++]=925,n[t++]=Ze-810900,Rn(o(2))}else n[t++]="bwipp.pdf417badECI#19167",n[t++]="PDF417 supports ECIs 000000 to 811799",Z()}}},e.encfuncs=o(["enct","encn","encb"]),e.addtocws=function(){var Se=n[--t];H(e.datcws,e.j,Se),e.j=Se.length+e.j},e.datcws=o(e.seqlen),e.i=0,e.j=0;!(e.i>=e.seq.length);){if(e.chars=h(e.seq,e.i),ce(Ys(e.chars),"arraytype"))if(h(e.chars,0)<=-1e6)n[t++]=e.chars,e.ence(),e.addtocws();else{if(n[t++]=e.chars,e[h(e.encfuncs,e.state)]()===!0)break;e.addtocws()}else n[t++]=o([h(e.latchcws,e.chars)]),e.addtocws(),e.chars==e.tl&&(e.state=e.T,e.submode=e.A),e.chars==e.nl&&(e.state=e.N),(e.chars==e.bl||e.chars==e.bl6)&&(e.state=e.B),e.chars==e.bs&&(e.i=e.i+1,n[t++]=h(e.seq,e.i),e.encb(),e.addtocws()),e.chars==e.m05&&(e.i+1<e.seq.length&&h(e.seq,e.i+1)==e.nl&&(e.i=e.i+1),e.state=e.N),e.chars==e.m06&&(e.i+1<e.seq.length&&h(e.seq,e.i+1)==e.tl&&(e.i=e.i+1),e.state=e.T,e.submode=e.M);e.i=e.i+1}e.datcws=O(e.datcws,0,e.j)}e.ccametrics=o([o([2,5,4,39,0,19]),o([2,6,4,1,0,33]),o([2,7,5,32,0,12]),o([2,8,5,8,0,40]),o([2,9,6,14,0,46]),o([2,10,6,43,0,23]),o([2,12,7,20,0,52]),o([3,4,4,11,43,23]),o([3,5,5,1,33,13]),o([3,6,6,5,37,17]),o([3,7,7,15,47,27]),o([3,8,7,21,1,33]),o([4,3,4,40,20,52]),o([4,4,5,43,23,3]),o([4,5,6,46,26,6]),o([4,6,7,34,14,46]),o([4,7,8,29,9,41])]),e.nonccametrics=o([o([1,11,7,1,0,9]),o([1,14,7,8,0,8]),o([1,17,7,36,0,36]),o([1,20,8,19,0,19]),o([1,24,8,9,0,17]),o([1,28,8,25,0,33]),o([2,8,8,1,0,1]),o([2,11,9,1,0,9]),o([2,14,9,8,0,8]),o([2,17,10,36,0,36]),o([2,20,11,19,0,19]),o([2,23,13,9,0,17]),o([2,26,15,27,0,35]),o([3,6,12,1,1,1]),o([3,8,14,7,7,7]),o([3,10,16,15,15,15]),o([3,12,18,25,25,25]),o([3,15,21,37,37,37]),o([3,20,26,1,17,33]),o([3,26,32,1,9,17]),o([3,32,38,21,29,37]),o([3,38,44,15,31,47]),o([3,44,50,1,25,49]),o([4,4,8,47,19,43]),o([4,6,12,1,1,1]),o([4,8,14,7,7,7]),o([4,10,16,15,15,15]),o([4,12,18,25,25,25]),o([4,15,21,37,37,37]),o([4,20,26,1,17,33]),o([4,26,32,1,9,17]),o([4,32,38,21,29,37]),o([4,38,44,15,31,47]),o([4,44,50,1,25,49])]),n[t++]="metrics",e.cca?n[t++]=e.ccametrics:n[t++]=e.nonccametrics;var vt=n[--t];e[n[--t]]=vt,e.urows=e.rows,e.ucols=e.columns,Ie(e.metrics,function(){if(e.m=n[--t],e.c=h(e.m,0),e.r=h(e.m,1),e.k=h(e.m,2),e.rapl=h(e.m,3),e.rapc=h(e.m,4),e.rapr=h(e.m,5),e.ncws=R(e.r*e.c-e.k),e.okay=!0,e.datcws.length>e.ncws&&(e.okay=!1),e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.c&&(e.okay=!1),e.okay)return!0}),e.okay||(n[t++]="bwipp.micropdf417noValidSymbol#19306",n[t++]="Maximum length exceeded or invalid size",Z()),e.m=e.datcws.length,e.n=R(e.c*e.r-e.k),e.cws=o(e.c*e.r+1),H(e.cws,0,e.datcws),n[t++]=e.cws,n[t++]=e.m,n[t++]=1/0;for(var _t=0,xt=R(e.n-e.m);_t<xt;_t++)n[t++]=900;var bt=o(),kt=n[--t];H(n[--t],kt,bt),n[t++]=e.cws,n[t++]=e.n,n[t++]=1/0;for(var Pt=0,Rt=e.k;Pt<Rt;Pt++)n[t++]=0;n[t++]=0;var Wt=o(),zt=n[--t];H(n[--t],zt,Wt),n[t++]=1/0,n[t++]=1;for(var Ct=0;Ct<928;Ct++){var Yt=n[t-1];n[t++]=Yt*3%929}e.rsalog=o(),e.rslog=o(929);for(var jt=1;jt<=928;jt+=1)C(e.rslog,h(e.rsalog,jt),jt);e.rsprod=function(){var Se=n[t-1],ze=n[t-2];if(Se!=0&&ze!=0){var Pe=h(e.rslog,n[--t]),Be=h(e.rsalog,R(Pe+h(e.rslog,n[--t]))%928);n[t++]=Be}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var an=0,rn=e.k;an<rn;an++)n[t++]=0;e.coeffs=o();for(var Kt=1,Jt=e.k;Kt<=Jt;Kt+=1){e.i=Kt,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Zt=e.i-1;Zt>=1;Zt-=1){e.j=Zt,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var Qt=n[--t],mn=n[--t],cn=n[--t];C(n[--t],cn,R(mn+Qt)%929)}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var dn=n[--t],Ht=n[--t];C(n[--t],Ht,dn)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1);for(var Bt=e.coeffs.length-1;Bt>=0;Bt-=2){var Y=e.coeffs;C(Y,Bt,929-h(Y,Bt))}for(var le=0,se=e.n-1;le<=se;le+=1){e.t=R(h(e.cws,le)+h(e.cws,e.n))%929;for(var ge=0,ve=e.k-1;ge<=ve;ge+=1)e.j=ge,C(e.cws,R(e.n+e.j),R(h(e.cws,R(e.n+e.j)+1)+(929-e.t*h(e.coeffs,R(e.k-e.j)-1)%929))%929)}for(var _e=e.n,pe=R(e.n+e.k);_e<=pe;_e+=1)C(e.cws,_e,(929-h(e.cws,_e))%929);e.cws=O(e.cws,0,e.cws.length-1);var Oe=h(e.options,"debugcws")!==void 0;Oe&&(n[t++]="bwipp.debugcws#19360",n[t++]=e.cws,Z()),e.clusters=o([o([120256,125680,128380,120032,125560,128318,108736,119920,108640,86080,108592,86048,110016,120560,125820,109792,120440,125758,88256,109680,88160,89536,110320,120700,89312,110200,120638,89200,110140,89840,110460,89720,110398,89980,128506,119520,125304,128190,107712,119408,125244,107616,119352,84032,107568,119324,84e3,107544,83984,108256,119672,125374,85184,108144,119612,85088,108088,119582,85040,108060,85728,108408,119742,85616,108348,85560,108318,85880,108478,85820,85790,107200,119152,125116,107104,119096,125086,83008,107056,119068,82976,107032,82960,82952,83648,107376,119228,83552,107320,119198,83504,107292,83480,83468,83824,107452,83768,107422,83740,83900,106848,118968,125022,82496,106800,118940,82464,106776,118926,82448,106764,82440,106758,82784,106936,119006,82736,106908,82712,106894,82700,82694,106974,82830,82240,106672,118876,82208,106648,118862,82192,106636,82184,106630,82180,82352,82328,82316,82080,118830,106572,106566,82050,117472,124280,127678,103616,117360,124220,103520,117304,124190,75840,103472,75808,104160,117624,124350,76992,104048,117564,76896,103992,76848,76824,77536,104312,117694,77424,104252,77368,77340,77688,104382,77628,77758,121536,126320,128700,121440,126264,128670,111680,121392,126236,111648,121368,126222,111632,121356,103104,117104,124092,112320,103008,117048,124062,112224,121656,126366,93248,74784,102936,117006,93216,112152,93200,75456,103280,117180,93888,75360,103224,117150,93792,112440,121758,93744,75288,93720,75632,103356,94064,75576,103326,94008,112542,93980,75708,94140,75678,94110,121184,126136,128606,111168,121136,126108,111136,121112,126094,111120,121100,111112,111108,102752,116920,123998,111456,102704,116892,91712,74272,121244,116878,91680,74256,102668,91664,111372,102662,74244,74592,102840,116958,92e3,74544,102812,91952,111516,102798,91928,74508,74502,74680,102878,92088,74652,92060,74638,92046,92126,110912,121008,126044,110880,120984,126030,110864,120972,110856,120966,110852,110850,74048,102576,116828,90944,74016,102552,116814,90912,111e3,121038,90896,73992,102534,90888,110982,90884,74160,102620,91056,74136,102606,91032,111054,91020,74118,91014,91100,91086,110752,120920,125998,110736,120908,110728,120902,110724,110722,73888,102488,116782,90528,73872,102476,90512,110796,102470,90504,73860,90500,73858,73944,90584,90572,90566,120876,120870,110658,102444,73800,90312,90308,90306,101056,116080,123580,100960,116024,70720,100912,115996,70688,100888,70672,70664,71360,101232,116156,71264,101176,116126,71216,101148,71192,71180,71536,101308,71480,101278,71452,71612,71582,118112,124600,127838,105024,118064,124572,104992,118040,124558,104976,118028,104968,118022,100704,115896,123486,105312,100656,115868,79424,70176,118172,115854,79392,105240,100620,79376,70152,79368,70496,100792,115934,79712,70448,118238,79664,105372,100750,79640,70412,79628,70584,100830,79800,70556,79772,70542,70622,79838,122176,126640,128860,122144,126616,128846,122128,126604,122120,126598,122116,104768,117936,124508,113472,104736,126684,124494,113440,122264,126670,113424,104712,117894,113416,122246,104706,69952,100528,115804,78656,69920,100504,115790,96064,78624,104856,117966,96032,113560,122318,100486,96016,78600,104838,96008,69890,70064,100572,78768,70040,100558,96176,78744,104910,96152,113614,70022,78726,70108,78812,70094,96220,78798,122016,126552,128814,122e3,126540,121992,126534,121988,121986,104608,117848,124462,113056,104592,126574,113040,122060,117830,113032,104580,113028,104578,113026,69792,100440,115758,78240,69776,100428,95136,78224,104652,100422,95120,113100,69764,95112,78212,69762,78210,69848,100462,78296,69836,95192,78284,69830,95180,78278,69870,95214,121936,126508,121928,126502,121924,121922,104528,117804,112848,104520,117798,112840,121958,112836,104514,112834,69712,100396,78032,69704,100390,94672,78024,104550,94664,112870,69698,94660,78018,94658,78060,94700,94694,126486,121890,117782,104484,104482,69672,77928,94440,69666,77922,99680,68160,99632,68128,99608,115342,68112,99596,68104,99590,68448,99768,115422,68400,99740,68376,99726,68364,68358,68536,99806,68508,68494,68574,101696,116400,123740,101664,116376,101648,116364,101640,116358,101636,67904,99504,115292,72512,67872,116444,115278,72480,101784,116430,72464,67848,99462,72456,101766,67842,68016,99548,72624,67992,99534,72600,101838,72588,67974,68060,72668,68046,72654,118432,124760,127918,118416,124748,118408,124742,118404,118402,101536,116312,105888,101520,116300,105872,118476,116294,105864,101508,105860,101506,105858,67744,99416,72096,67728,116334,80800,72080,101580,99398,80784,105932,67716,80776,72068,67714,72066,67800,99438,72152,67788,80856,72140,67782,80844,72134,67822,72174,80878,126800,128940,126792,128934,126788,126786,118352,124716,122576,126828,124710,122568,126822,122564,118338,122562,101456,116268,105680,101448,116262,114128,105672,118374,114120,122598,101442,114116,105666,114114,67664,99372,71888,67656,99366,80336,71880,101478,97232,80328,105702,67650,97224,114150,71874,97220,67692,71916,67686,80364,71910,97260,80358,97254,126760,128918,126756,126754,118312,124694,122472,126774,122468,118306,122466,101416,116246,105576,101412,113896,105572,101410,113892,105570,113890,67624,99350,71784,101430,80104,71780,67618,96744,80100,71778,96740,80098,96738,71798,96758,126738,122420,122418,105524,113780,113778,71732,79988,96500,96498,66880,66848,98968,66832,66824,66820,66992,66968,66956,66950,67036,67022,1e5,99984,115532,99976,115526,99972,99970,66720,98904,69024,100056,98892,69008,100044,69e3,100038,68996,66690,68994,66776,98926,69080,100078,69068,66758,69062,66798,69102,116560,116552,116548,116546,99920,102096,116588,115494,102088,116582,102084,99906,102082,66640,68816,66632,98854,73168,68808,66628,73160,68804,66626,73156,68802,66668,68844,66662,73196,68838,73190,124840,124836,124834,116520,118632,124854,118628,116514,118626,99880,115478,101992,116534,106216,101988,99874,106212,101986,106210,66600,98838,68712,99894,72936,68708,66594,81384,72932,68706,81380,72930,66614,68726,72950,81398,128980,128978,124820,126900,124818,126898,116500,118580,116498,122740,118578,122738,99860,101940,99858,106100,101938,114420]),o([128352,129720,125504,128304,129692,125472,128280,129678,125456,128268,125448,128262,125444,125792,128440,129758,120384,125744,128412,120352,125720,128398,120336,125708,120328,125702,120324,120672,125880,128478,110144,120624,125852,110112,120600,125838,110096,120588,110088,120582,110084,110432,120760,125918,89664,110384,120732,89632,110360,120718,89616,110348,89608,110342,89952,110520,120798,89904,110492,89880,110478,89868,90040,110558,90012,89998,125248,128176,129628,125216,128152,129614,125200,128140,125192,128134,125188,125186,119616,125360,128220,119584,125336,128206,119568,125324,119560,125318,119556,119554,108352,119728,125404,108320,119704,125390,108304,119692,108296,119686,108292,108290,85824,108464,119772,85792,108440,119758,85776,108428,85768,108422,85764,85936,108508,85912,108494,85900,85894,85980,85966,125088,128088,129582,125072,128076,125064,128070,125060,125058,119200,125144,128110,119184,125132,119176,125126,119172,119170,107424,119256,125166,107408,119244,107400,119238,107396,107394,83872,107480,119278,83856,107468,83848,107462,83844,83842,83928,107502,83916,83910,83950,125008,128044,125e3,128038,124996,124994,118992,125036,118984,125030,118980,118978,106960,119020,106952,119014,106948,106946,82896,106988,82888,106982,82884,82882,82924,82918,124968,128022,124964,124962,118888,124982,118884,118882,106728,118902,106724,106722,82408,106742,82404,82402,124948,124946,118836,118834,106612,106610,124224,127664,129372,124192,127640,129358,124176,127628,124168,127622,124164,124162,117568,124336,127708,117536,124312,127694,117520,124300,117512,124294,117508,117506,104256,117680,124380,104224,117656,124366,104208,117644,104200,117638,104196,104194,77632,104368,117724,77600,104344,117710,77584,104332,77576,104326,77572,77744,104412,77720,104398,77708,77702,77788,77774,128672,129880,93168,128656,129868,92664,128648,129862,92412,128644,128642,124064,127576,129326,126368,124048,129902,126352,128716,127558,126344,124036,126340,124034,126338,117152,124120,127598,121760,117136,124108,121744,126412,124102,121736,117124,121732,117122,121730,103328,117208,124142,112544,103312,117196,112528,121804,117190,112520,103300,112516,103298,112514,75680,103384,117230,94112,75664,103372,94096,112588,103366,94088,75652,94084,75650,75736,103406,94168,75724,94156,75718,94150,75758,128592,129836,91640,128584,129830,91388,128580,91262,128578,123984,127532,126160,123976,127526,126152,128614,126148,123970,126146,116944,124012,121296,116936,124006,121288,126182,121284,116930,121282,102864,116972,111568,102856,116966,111560,121318,111556,102850,111554,74704,102892,92112,74696,102886,92104,111590,92100,74690,92098,74732,92140,74726,92134,128552,129814,90876,128548,90750,128546,123944,127510,126056,128566,126052,123938,126050,116840,123958,121064,116836,121060,116834,121058,102632,116854,111080,121078,111076,102626,111074,74216,102646,91112,74212,91108,74210,91106,74230,91126,128532,90494,128530,123924,126004,123922,126002,116788,120948,116786,120946,102516,110836,102514,110834,73972,90612,73970,90610,128522,123914,125978,116762,120890,102458,110714,123552,127320,129198,123536,127308,123528,127302,123524,123522,116128,123608,127342,116112,123596,116104,123590,116100,116098,101280,116184,123630,101264,116172,101256,116166,101252,101250,71584,101336,116206,71568,101324,71560,101318,71556,71554,71640,101358,71628,71622,71662,127824,129452,79352,127816,129446,79100,127812,78974,127810,123472,127276,124624,123464,127270,124616,127846,124612,123458,124610,115920,123500,118224,115912,123494,118216,124646,118212,115906,118210,100816,115948,105424,100808,115942,105416,118246,105412,100802,105410,70608,100844,79824,70600,100838,79816,105446,79812,70594,79810,70636,79852,70630,79846,129960,95728,113404,129956,95480,113278,129954,95356,95294,127784,129430,78588,128872,129974,95996,78462,128868,127778,95870,128866,123432,127254,124520,123428,126696,128886,123426,126692,124514,126690,115816,123446,117992,115812,122344,117988,115810,122340,117986,122338,100584,115830,104936,100580,113640,104932,100578,113636,104930,113634,70120,100598,78824,70116,96232,78820,70114,96228,78818,96226,70134,78838,129940,94968,113022,129938,94844,94782,127764,78206,128820,127762,95102,128818,123412,124468,123410,126580,124466,126578,115764,117876,115762,122100,117874,122098,100468,104692,100466,113140,104690,113138,69876,78324,69874,95220,78322,95218,129930,94588,94526,127754,128794,123402,124442,126522,115738,117818,121978,100410,104570,112890,69754,78074,94714,94398,123216,127148,123208,127142,123204,123202,115408,123244,115400,123238,115396,115394,99792,115436,99784,115430,99780,99778,68560,99820,68552,99814,68548,68546,68588,68582,127400,129238,72444,127396,72318,127394,123176,127126,123752,123172,123748,123170,123746,115304,123190,116456,115300,116452,115298,116450,99560,115318,101864,99556,101860,99554,101858,68072,99574,72680,68068,72676,68066,72674,68086,72694,129492,80632,105854,129490,80508,80446,127380,72062,127924,127378,80766,127922,123156,123700,123154,124788,123698,124786,115252,116340,115250,118516,116338,118514,99444,101620,99442,105972,101618,105970,67828,72180,67826,80884,72178,80882,97008,114044,96888,113982,96828,96798,129482,80252,130010,97148,80190,97086,127370,127898,128954,123146,123674,124730,126842,115226,116282,118394,122618,99386,101498,105722,114170,67706,71930,80378,96632,113854,96572,96542,80062,96702,96444,96414,96350,123048,123044,123042,115048,123062,115044,115042,99048,115062,99044,99042,67048,99062,67044,67042,67062,127188,68990,127186,123028,123316,123026,123314,114996,115572,114994,115570,98932,100084,98930,100082,66804,69108,66802,69106,129258,73084,73022,127178,127450,123018,123290,123834,114970,115514,116602,98874,99962,102138,66682,68858,73210,81272,106174,81212,81182,72894,81342,97648,114364,97592,114334,97564,97550,81084,97724,81054,97694,97464,114270,97436,97422,80990,97502,97372,97358,97326,114868,114866,98676,98674,66292,66290,123098,114842,115130,98618,99194,66170,67322,69310,73404,73374,81592,106334,81564,81550,73310,81630,97968,114524,97944,114510,97932,97926,81500,98012,81486,97998,97880,114478,97868,97862,81454,97902,97836,97830,69470,73564,73550,81752,106414,81740,81734,73518,81774,81708,81702]),o([109536,120312,86976,109040,120060,86496,108792,119934,86256,108668,86136,129744,89056,110072,129736,88560,109820,129732,88312,109694,129730,88188,128464,129772,89592,128456,129766,89340,128452,89214,128450,125904,128492,125896,128486,125892,125890,120784,125932,120776,125926,120772,120770,110544,120812,110536,120806,110532,84928,108016,119548,84448,107768,119422,84208,107644,84088,107582,84028,129640,85488,108284,129636,85240,108158,129634,85116,85054,128232,129654,85756,128228,85630,128226,125416,128246,125412,125410,119784,125430,119780,119778,108520,119798,108516,108514,83424,107256,119166,83184,107132,83064,107070,83004,82974,129588,83704,107390,129586,83580,83518,128116,83838,128114,125172,125170,119284,119282,107508,107506,82672,106876,82552,106814,82492,82462,129562,82812,82750,128058,125050,119034,82296,106686,82236,82206,82366,82108,82078,76736,103920,117500,76256,103672,117374,76016,103548,75896,103486,75836,129384,77296,104188,129380,77048,104062,129378,76924,76862,127720,129398,77564,127716,77438,127714,124392,127734,124388,124386,117736,124406,117732,117730,104424,117750,104420,104418,112096,121592,126334,92608,111856,121468,92384,111736,121406,92272,111676,92216,111646,92188,75232,103160,117118,93664,74992,103036,93424,112252,102974,93304,74812,93244,74782,93214,129332,75512,103294,129908,129330,93944,75388,129906,93820,75326,93758,127604,75646,128756,127602,94078,128754,124148,126452,124146,126450,117236,121844,117234,121842,103412,103410,91584,111344,121212,91360,111224,121150,91248,111164,91192,111134,91164,91150,74480,102780,91888,74360,102718,91768,111422,91708,74270,91678,129306,74620,129850,92028,74558,91966,127546,128634,124026,126202,116986,121338,102906,90848,110968,121022,90736,110908,90680,110878,90652,90638,74104,102590,91e3,74044,90940,74014,90910,74174,91070,90480,110780,90424,110750,90396,90382,73916,90556,73886,90526,90296,110686,90268,90254,73822,90334,90204,90190,71136,101112,116094,70896,100988,70776,100926,70716,70686,129204,71416,101246,129202,71292,71230,127348,71550,127346,123636,123634,116212,116210,101364,101362,79296,105200,118140,79072,105080,118078,78960,105020,78904,104990,78876,78862,70384,100732,79600,70264,100670,79480,105278,79420,70174,79390,129178,70524,129466,79740,70462,79678,127290,127866,123514,124666,115962,118266,100858,113376,122232,126654,95424,113264,122172,95328,113208,122142,95280,113180,95256,113166,95244,78560,104824,117950,95968,78448,104764,95856,113468,104734,95800,78364,95772,78350,95758,70008,100542,78712,69948,96120,78652,69918,96060,78622,96030,70078,78782,96190,94912,113008,122044,94816,112952,122014,94768,112924,94744,112910,94732,94726,78192,104636,95088,78136,104606,95032,113054,95004,78094,94990,69820,78268,69790,95164,78238,95134,94560,112824,121950,94512,112796,94488,112782,94476,94470,78008,104542,94648,77980,94620,77966,94606,69726,78046,94686,94384,112732,94360,112718,94348,94342,77916,94428,77902,94414,94296,112686,94284,94278,77870,94318,94252,94246,68336,99708,68216,99646,68156,68126,68476,68414,127162,123258,115450,99834,72416,101752,116414,72304,101692,72248,101662,72220,72206,67960,99518,72568,67900,72508,67870,72478,68030,72638,80576,105840,118460,80480,105784,118430,80432,105756,80408,105742,80396,80390,72048,101564,80752,71992,101534,80696,71964,80668,71950,80654,67772,72124,67742,80828,72094,80798,114016,122552,126814,96832,113968,122524,96800,113944,122510,96784,113932,96776,113926,96772,80224,105656,118366,97120,80176,105628,97072,114076,105614,97048,80140,97036,80134,97030,71864,101470,80312,71836,97208,80284,71822,97180,80270,97166,67678,71902,80350,97246,96576,113840,122460,96544,113816,122446,96528,113804,96520,113798,96516,96514,80048,105564,96688,80024,105550,96664,113870,96652,80006,96646,71772,80092,71758,96732,80078,96718,96416,113752,122414,96400,113740,96392,113734,96388,96386,79960,105518,96472,79948,96460,79942,96454,71726,79982,96494,96336,113708,96328,113702,96324,96322,79916,96364,79910,96358,96296,113686,96292,96290,79894,96310,66936,99006,66876,66846,67006,68976,100028,68920,99998,68892,68878,66748,69052,66718,69022,73056,102072,116574,73008,102044,72984,102030,72972,72966,68792,99934,73144,68764,73116,68750,73102,66654,68830,73182,81216,106160,118620,81184,106136,118606,81168,106124,81160,106118,81156,81154,72880,101980,81328,72856,101966,81304,106190,81292,72838,81286,68700,72924,68686,81372,72910,81358,114336,122712,126894,114320,122700,114312,122694,114308,114306,81056,106072,118574,97696,81040,106060,97680,114380,106054,97672,81028,97668,81026,97666,72792,101934,81112,72780,97752,81100,72774,97740,81094,97734,68654,72814,81134,97774,114256,122668,114248,122662,114244,114242,80976,106028,97488,80968,106022,97480,114278,97476,80962,97474,72748,81004,72742,97516,80998,97510,114216,122646,114212,114210,80936,106006,97384,80932,97380,80930,97378,72726,80950,97398,114196,114194,80916,97332,80914,97330,66236,66206,67256,99166,67228,67214,66142,67294,69296,100188,69272,100174,69260,69254,67164,69340,67150,69326,73376,102232,116654,73360,102220,73352,102214,73348,73346,69208,100142,73432,102254,73420,69190,73414,67118,69230,73454,106320,118700,106312,118694,106308,106306,73296,102188,81616,106348,102182,81608,73284,81604,73282,81602,69164,73324,69158,81644,73318,81638,122792,126934,122788,122786,106280,118678,114536,106276,114532,106274,114530,73256,102166,81512,73252,98024,81508,73250,98020,81506,98018,69142,73270,81526,98038,122772,122770,106260,114484,106258,114482,73236,81460,73234,97908,81458,97906,122762,106250,114458,73226,81434,97850,66396,66382,67416,99246,67404,67398,66350,67438,69456,100268,69448,100262,69444,69442,67372,69484,67366,69478,102312,116694,102308,102306,69416,100246,73576,102326,73572,69410,73570,67350,69430,73590,118740,118738,102292,106420,102290,106418,69396,73524,69394,81780,73522,81778,118730,102282,106394,69386,73498,81722,66476,66470,67496,99286,67492,67490,66454,67510,100308,100306,67476,69556,67474,69554,116714])]),e.raps=o([o([802,930,946,818,882,890,826,954,922,986,970,906,778,794,786,914,978,982,980,916,948,932,934,942,940,936,808,812,814,806,822,950,918,790,788,820,884,868,870,878,876,872,840,856,860,862,846,844,836,838,834,866]),o([718,590,622,558,550,566,534,530,538,570,562,546,610,626,634,762,754,758,630,628,612,614,582,578,706,738,742,740,748,620,556,552,616,744,712,716,708,710,646,654,652,668,664,696,688,656,720,592,600,604,732,734])]),e.cwtobits=function(){var Se=h(e.clusters,n[--t]);e.v=h(Se,n[--t]),n[t++]=1/0;for(var ze=0;ze<17;ze++)n[t++]=0;for(var Pe=Nn(fe(17),e.v,2),Be=0,at=Pe.length;Be<at;Be++)n[t++]=h(Pe,Be)-48;var Ze=o();n[t++]=O(Ze,Ze.length-17,17)},e.raptobits=function(){var Se=h(e.raps,n[--t]);e.v=h(Se,n[--t]),n[t++]=1/0;for(var ze=0;ze<10;ze++)n[t++]=0;for(var Pe=Nn(fe(10),e.v,2),Be=0,at=Pe.length;Be<at;Be++)n[t++]=h(Pe,Be)-48;var Ze=o();n[t++]=O(Ze,Ze.length-10,10)},e.rwid=h(o([38,55,82,99]),e.c-1),e.c==3&&e.cca&&(e.rwid=72),e.pixs=o(e.rwid*e.r*e.rowmult);for(var de=0,ke=e.r-1;de<=ke;de+=1){e.i=de,e.clst=(R(e.i+e.rapl)-1)%3,n[t++]=1/0,e.c==1&&(n[t++]=(R(e.i+e.rapl)-1)%52,n[t++]=0,e.raptobits(),W(n[--t]),n[t++]=h(e.cws,e.i),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=(R(e.i+e.rapr)-1)%52,n[t++]=0,e.raptobits(),W(n[--t])),e.c==2&&(n[t++]=(R(e.i+e.rapl)-1)%52,n[t++]=0,e.raptobits(),W(n[--t]),n[t++]=h(e.cws,e.i*2),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=h(e.cws,e.i*2+1),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=(R(e.i+e.rapr)-1)%52,n[t++]=0,e.raptobits(),W(n[--t])),e.c==3&&(e.cca||(n[t++]=(R(e.i+e.rapl)-1)%52,n[t++]=0,e.raptobits(),W(n[--t])),n[t++]=h(e.cws,e.i*3),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=(R(e.i+e.rapc)-1)%52,n[t++]=1,e.raptobits(),W(n[--t]),n[t++]=h(e.cws,e.i*3+1),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=h(e.cws,e.i*3+2),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=(R(e.i+e.rapr)-1)%52,n[t++]=0,e.raptobits(),W(n[--t])),e.c==4&&(n[t++]=(R(e.i+e.rapl)-1)%52,n[t++]=0,e.raptobits(),W(n[--t]),n[t++]=h(e.cws,e.i*4),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=h(e.cws,e.i*4+1),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=(R(e.i+e.rapc)-1)%52,n[t++]=1,e.raptobits(),W(n[--t]),n[t++]=h(e.cws,e.i*4+2),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=h(e.cws,e.i*4+3),n[t++]=e.clst,e.cwtobits(),W(n[--t]),n[t++]=(R(e.i+e.rapr)-1)%52,n[t++]=0,e.raptobits(),W(n[--t])),n[t++]=1;var Ee=o();n[t++]=Ee;for(var De=0,xe=e.rowmult-1;De<=xe;De+=1){var Ne=n[t-1];H(e.pixs,(De+e.i*e.rowmult)*e.rwid,Ne)}t--}var je=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.rwid],["pixy",e.r*e.rowmult],["height",e.r*e.rowmult/72],["width",e.rwid/72],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);n[t++]=je,e.dontdraw||Lt(),e=r}function Dc(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.columns=0,e.rows=0,e.format="unset",e.version="unset",e.parse=!1,e.parsefnc=!1,e.c40headerlength=-1,e.raw=!1,e.dmre=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.datamatrixEmptyData#19750",n[t++]="The data must not be empty",Z()),qe(e.version,"unset")&&(e.rows!=0||e.columns!=0)&&(n[t++]="bwipp.datamatrixVersionRowsCols#19754",n[t++]="rows and columns must not be given if version is specified",Z()),qe(e.version,"unset"))if(sn(e.version,"x"),n[--t]){var i=n[--t];n[t-1]=i;var a=n[t-1],s=n[t-2];n[t++]=s,n[t++]=a,Rn(o(2)),Ie(n[--t],function(){var At=n[t-1];n[t++]=!0,At.length==0&&(n[t-1]=!1);var tn=n[--t],Cn=n[--t];n[t++]=tn,Ie(Cn,function(){var In=n[--t];(In<48||In>57)&&(n[t-1]=!1)}),n[--t]||(n[t++]="bwipp.datamatrixVersionBadRowOrColumn#19768",n[t++]="version must be formatted as RxC",Z())}),e.rows=Ye(n[--t]),e.columns=Ye(n[--t]),n[t++]="format",e.rows==e.columns?n[t++]="square":n[t++]="rectangle";var l=n[--t];e[n[--t]]=l}else t--,n[t++]="bwipp.datamatrixVersionFormat#19775",n[t++]="version must be formatted as RxC",Z();else if(ce(e.format,"unset")){n[t++]="format",e.dmre?n[t++]="rectangle":n[t++]="square";var c=n[--t];e[n[--t]]=c}qe(e.format,"square")&&qe(e.format,"rectangle")&&(n[t++]="bwipp.datamatrixInvalidFormat#19784",n[t++]="The format must be either square or rectangle",Z()),e.metrics=o([o([10,10,1,1,5,1,0]),o([12,12,1,1,7,1,0]),o([14,14,1,1,10,1,0]),o([16,16,1,1,12,1,0]),o([18,18,1,1,14,1,0]),o([20,20,1,1,18,1,0]),o([22,22,1,1,20,1,0]),o([24,24,1,1,24,1,0]),o([26,26,1,1,28,1,0]),o([32,32,2,2,36,1,0]),o([36,36,2,2,42,1,0]),o([40,40,2,2,48,1,0]),o([44,44,2,2,56,1,0]),o([48,48,2,2,68,1,0]),o([52,52,2,2,84,2,0]),o([64,64,4,4,112,2,0]),o([72,72,4,4,144,4,0]),o([80,80,4,4,192,4,0]),o([88,88,4,4,224,4,0]),o([96,96,4,4,272,4,0]),o([104,104,4,4,336,6,0]),o([120,120,6,6,408,6,0]),o([132,132,6,6,496,8,0]),o([144,144,6,6,620,10,0]),o([8,18,1,1,7,1,0]),o([8,32,1,2,11,1,0]),o([8,48,1,2,15,1,1]),o([8,64,1,4,18,1,1]),o([8,80,1,4,22,1,1]),o([8,96,1,4,28,1,1]),o([8,120,1,6,32,1,1]),o([8,144,1,6,36,1,1]),o([12,26,1,1,14,1,0]),o([12,36,1,2,18,1,0]),o([12,64,1,4,27,1,1]),o([12,88,1,4,36,1,1]),o([16,36,1,2,24,1,0]),o([16,48,1,2,28,1,0]),o([16,64,1,4,36,1,1]),o([20,36,1,2,28,1,1]),o([20,44,1,2,34,1,1]),o([20,64,1,4,42,1,1]),o([22,48,1,2,38,1,1]),o([24,48,1,2,41,1,1]),o([24,64,1,4,46,1,1]),o([26,40,1,2,38,1,1]),o([26,48,1,2,42,1,1]),o([26,64,1,4,50,1,1])]),e.urows=e.rows,e.ucols=e.columns,e.fullcws=o([]);for(var d=e.metrics,f=0,m=d.length;f<m;f++)e.m=h(d,f),e.rows=h(e.m,0),e.cols=h(e.m,1),e.regh=h(e.m,2),e.regv=h(e.m,3),e.rscw=h(e.m,4),e.rsbl=h(e.m,5),e.doly=h(e.m,6),e.mrows=R(e.rows-2*e.regh),e.mcols=R(e.cols-2*e.regv),e.ncws=R(~~(e.mrows*e.mcols/8)-e.rscw),e.okay=!0,e.urows!=0&&e.urows!=e.rows&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.cols&&(e.okay=!1),ce(e.format,"square")&&qe(e.rows,e.cols)&&(e.okay=!1),ce(e.format,"rectangle")&&ce(e.rows,e.cols)&&(e.okay=!1),!e.dmre&&e.doly==1&&(e.okay=!1),e.okay&&(n[t++]=1/0,W(e.fullcws),n[t++]=e.ncws,e.fullcws=o());n[t++]=1/0;for(var g=0;g<1558;g++)n[t++]=1e4;e.numremcws=o();for(var v=e.fullcws,y=0,A=v.length;y<A;y++)C(e.numremcws,h(v,y)-1,1);for(var w=1556;w>=0;w-=1)e.i=w,h(e.numremcws,e.i)!=1&&C(e.numremcws,e.i,h(e.numremcws,e.i+1)+1);e.fnc1=-1,e.prog=-2,e.m05=-3,e.m06=-4,e.lC=-5,e.lB=-6,e.lX=-7,e.lT=-8,e.lE=-9,e.unl=-10,e.sapp=-11,e.usft=-12,e.sft1=-13,e.sft2=-14,e.sft3=-15,e.eci=-16,e.pad=-17,e.unlcw=254,n[t++]=1/0;for(var k=0;k<=128;k+=1)n[t++]=k,n[t++]=k+1;n[t++]=e.pad,n[t++]=129;for(var E=0;E<=99;E+=1){var I=Nn(fe(2),E,10),T=zi(fe(2),"00");H(T,2-I.length,I),n[t++]=T,n[t++]=E+130}var N=o([e.lC,e.lB,e.fnc1,e.sapp,e.prog,e.usft,e.m05,e.m06,e.lX,e.lT,e.lE,e.eci]);n[t++]=229;for(var j=0,B=N.length;j<B;j++){var U=n[--t]+1;n[t++]=h(N,j),n[t++]=U,n[t++]=U}t--,e.Avals=rt(),n[t++]=1/0;for(var F=e.Avals,P=F.size,z=F.keys(),V=0;V<P;V++){var L=z.next().value;n[t++]=L;var Q=1/0,q=F.get(L);n[t++]=Q,n[t++]=q;var ee=o();n[t++]=ee}e.Avals=rt(),n[t++]=1/0,n[t++]=e.sft1,n[t++]=0,n[t++]=e.sft2,n[t++]=1,n[t++]=e.sft3,n[t++]=2,n[t++]=32,n[t++]=3;for(var X=48;X<=57;X+=1)n[t++]=X,n[t++]=X-44;for(var ae=65;ae<=90;ae+=1)n[t++]=ae,n[t++]=ae-51;e.CNvals=rt(),n[t++]=1/0;for(var K=0;K<=31;K+=1)n[t++]=K,n[t++]=K;e.C1vals=rt(),n[t++]=1/0;for(var ie=33;ie<=47;ie+=1)n[t++]=ie,n[t++]=ie-33;for(var ne=58;ne<=64;ne+=1)n[t++]=ne,n[t++]=ne-43;for(var J=91;J<=95;J+=1)n[t++]=J,n[t++]=J-69;n[t++]=e.fnc1,n[t++]=27,n[t++]=e.usft,n[t++]=30,e.C2vals=rt(),n[t++]=1/0;for(var te=96;te<=127;te+=1)n[t++]=te,n[t++]=te-96;e.C3vals=rt(),n[t++]=1/0;for(var $=e.CNvals,oe=$.size,we=$.keys(),be=0;be<oe;be++){var Te=we.next().value;n[t++]=Te;var ye=1/0,tt=$.get(Te);n[t++]=ye,n[t++]=tt;var Qe=o();n[t++]=Qe}for(var Ge=e.C1vals,Xe=Ge.size,Je=Ge.keys(),dt=0;dt<Xe;dt++){var vt=Je.next().value;n[t++]=vt;var _t=1/0,xt=Ge.get(vt);n[t++]=_t,n[t++]=h(e.CNvals,e.sft1),n[t++]=xt;var bt=o();n[t++]=bt}for(var kt=e.C2vals,Pt=kt.size,Rt=kt.keys(),Wt=0;Wt<Pt;Wt++){var zt=Rt.next().value;n[t++]=zt;var Ct=1/0,Yt=kt.get(zt);n[t++]=Ct,n[t++]=h(e.CNvals,e.sft2),n[t++]=Yt;var jt=o();n[t++]=jt}for(var an=e.C3vals,rn=an.size,Kt=an.keys(),Jt=0;Jt<rn;Jt++){var Zt=Kt.next().value;n[t++]=Zt;var Qt=1/0,mn=an.get(Zt);n[t++]=Qt,n[t++]=h(e.CNvals,e.sft3),n[t++]=mn;var cn=o();n[t++]=cn}e.Cvals=rt(),n[t++]=1/0,n[t++]=e.sft1,n[t++]=0,n[t++]=e.sft2,n[t++]=1,n[t++]=e.sft3,n[t++]=2,n[t++]=32,n[t++]=3;for(var dn=48;dn<=57;dn+=1)n[t++]=dn,n[t++]=dn-44;for(var Ht=97;Ht<=122;Ht+=1)n[t++]=Ht,n[t++]=Ht-83;e.TNvals=rt(),n[t++]=1/0;for(var Bt=0;Bt<=31;Bt+=1)n[t++]=Bt,n[t++]=Bt;e.T1vals=rt(),n[t++]=1/0;for(var Y=33;Y<=47;Y+=1)n[t++]=Y,n[t++]=Y-33;for(var le=58;le<=64;le+=1)n[t++]=le,n[t++]=le-43;for(var se=91;se<=95;se+=1)n[t++]=se,n[t++]=se-69;n[t++]=e.fnc1,n[t++]=27,n[t++]=e.usft,n[t++]=30,e.T2vals=rt(),n[t++]=1/0,n[t++]=96,n[t++]=0;for(var ge=65;ge<=90;ge+=1)n[t++]=ge,n[t++]=ge-64;for(var ve=123;ve<=127;ve+=1)n[t++]=ve,n[t++]=ve-96;e.T3vals=rt(),n[t++]=1/0;for(var _e=e.TNvals,pe=_e.size,Oe=_e.keys(),de=0;de<pe;de++){var ke=Oe.next().value;n[t++]=ke;var Ee=1/0,De=_e.get(ke);n[t++]=Ee,n[t++]=De;var xe=o();n[t++]=xe}for(var Ne=e.T1vals,je=Ne.size,Se=Ne.keys(),ze=0;ze<je;ze++){var Pe=Se.next().value;n[t++]=Pe;var Be=1/0,at=Ne.get(Pe);n[t++]=Be,n[t++]=h(e.TNvals,e.sft1),n[t++]=at;var Ze=o();n[t++]=Ze}for(var ft=e.T2vals,Ve=ft.size,$e=ft.keys(),Me=0;Me<Ve;Me++){var it=$e.next().value;n[t++]=it;var st=1/0,mt=ft.get(it);n[t++]=st,n[t++]=h(e.TNvals,e.sft2),n[t++]=mt;var Tt=o();n[t++]=Tt}for(var Ot=e.T3vals,Et=Ot.size,Dt=Ot.keys(),wt=0;wt<Et;wt++){var en=Dt.next().value;n[t++]=en;var gt=1/0,un=Ot.get(en);n[t++]=gt,n[t++]=h(e.TNvals,e.sft3),n[t++]=un;var Vt=o();n[t++]=Vt}e.Tvals=rt();for(var fn=128;fn<=255;fn+=1){e.i=fn,n[t++]=e.Avals,n[t++]=e.i,n[t++]=1/0,W(h(e.Avals,e.usft)),W(h(e.Avals,e.i-128));var $n=o(),ei=n[--t];C(n[--t],ei,$n),n[t++]=e.Cvals,n[t++]=e.i,n[t++]=1/0,W(h(e.Cvals,e.usft)),W(h(e.Cvals,e.i-128));var Dn=o(),ai=n[--t];C(n[--t],ai,Dn),n[t++]=e.Tvals,n[t++]=e.i,n[t++]=1/0,W(h(e.Tvals,e.usft)),W(h(e.Tvals,e.i-128));var zn=o(),mi=n[--t];C(n[--t],mi,zn)}n[t++]=1/0,n[t++]=13,n[t++]=0,n[t++]=42,n[t++]=1,n[t++]=62,n[t++]=2,n[t++]=32,n[t++]=3;for(var Fn=48;Fn<=57;Fn+=1)n[t++]=Fn,n[t++]=Fn-44;for(var Hn=65;Hn<=90;Hn+=1)n[t++]=Hn,n[t++]=Hn-51;e.Xvals=rt(),n[t++]=1/0;for(var _n=e.Xvals,vn=_n.size,kn=_n.keys(),Ai=0;Ai<vn;Ai++){var Ei=kn.next().value;n[t++]=Ei;var Ji=1/0,nn=_n.get(Ei);n[t++]=Ji,n[t++]=nn;var yn=o();n[t++]=yn}e.Xvals=rt(),n[t++]=1/0;for(var qn=64;qn<=94;qn+=1)n[t++]=qn,n[t++]=qn-64;n[t++]=e.unl,n[t++]=31;for(var Tn=32;Tn<=63;Tn+=1)n[t++]=Tn,n[t++]=Tn;e.Evals=rt(),n[t++]=1/0;for(var Gn=e.Evals,gi=Gn.size,Vn=Gn.keys(),ln=0;ln<gi;ln++){var ti=Vn.next().value;n[t++]=ti;var Qi=1/0,Bi=Gn.get(ti);n[t++]=Qi,n[t++]=Bi;var Ir=o();n[t++]=Ir}e.Evals=rt(),n[t++]=1/0;for(var _i=0;_i<=255;_i+=1)n[t++]=_i,n[t++]=_i;e.Bvals=rt(),n[t++]=1/0;for(var Nr=e.Bvals,rr=Nr.size,Zr=Nr.keys(),ar=0;ar<rr;ar++){var sr=Zr.next().value;n[t++]=sr;var Pi=1/0,hr=Nr.get(sr);n[t++]=Pi,n[t++]=hr;var Lr=o();n[t++]=Lr}if(e.Bvals=rt(),e.encvals=o([e.Avals,e.Cvals,e.Tvals,e.Xvals,e.Evals,e.Bvals]),e.A=0,e.C=1,e.T=2,e.X=3,e.E=4,e.B=5,e.raw){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ye(O(e.barcode,e.i+1,3)),C(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=O(e.cws,0,e.j)}else{var pr=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fnc1],["PROG",e.prog]]);e.fncvals=pr,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var xr=n[--t];if(e[n[--t]]=xr,e.msglen=e.msg.length,e.msglen>=9){W(O(e.msg,0,7));var wa=n[--t];n[t-1]=wa==29;var br=n[--t],Ba=n[--t],yr=n[--t],zr=n[--t],Tr=n[--t],ea=n[--t];if(br&&Ba==48&&yr==30&&zr==62&&Tr==41&&ea==91){W(O(e.msg,e.msglen-2,2));var Hr=n[--t],_a=n[--t];Hr==4&&_a==30&&(h(e.msg,5)==53?(n[t++]=1/0,n[t++]=e.m05,W(O(e.msg,7,e.msg.length-9)),e.msg=o()):h(e.msg,5)==54&&(n[t++]=1/0,n[t++]=e.m06,W(O(e.msg,7,e.msg.length-9)),e.msg=o()))}}e.msglen=e.msg.length,n[t++]=1/0;for(var qr=0,Va=e.msglen;qr<Va;qr++)n[t++]=0;n[t++]=0,e.numD=o(),n[t++]=1/0;for(var Gr=0,la=e.msglen;Gr<la;Gr++)n[t++]=0;n[t++]=9999,e.nextXterm=o(),n[t++]=1/0;for(var Vr=0,wr=e.msglen;Vr<wr;Vr++)n[t++]=0;n[t++]=9999,e.nextNonX=o(),n[t++]=1/0;for(var or=0,ds=e.msglen;or<ds;or++)n[t++]=!1;n[t++]=!1,e.isECI=o();for(var lr=e.msglen-1;lr>=0;lr-=1){e.i=lr,e.barchar=h(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&C(e.numD,e.i,h(e.numD,e.i+1)+1),e.barchar==13||e.barchar==42||e.barchar==62?C(e.nextXterm,e.i,0):C(e.nextXterm,e.i,h(e.nextXterm,e.i+1)+1);var us=h(e.Xvals,e.barchar)!==void 0;us?C(e.nextNonX,e.i,h(e.nextNonX,e.i+1)+1):C(e.nextNonX,e.i,0),C(e.isECI,e.i,e.barchar<=-1e6)}n[t++]=1/0;for(var Mr=e.nextXterm,es=0,Yr=Mr.length;es<Yr;es++){var Mn=h(Mr,es);n[t++]=Mn,Mn>1e4&&(n[t-1]=1e4)}e.nextXterm=o(),n[t++]=1/0;for(var Hi=e.nextNonX,Rr=0,ta=Hi.length;Rr<ta;Rr++){var Ia=h(Hi,Rr);n[t++]=Ia,Ia>1e4&&(n[t-1]=1e4)}for(e.nextNonX=o(),e.isD=function(){n[t++]=e.char>=48&&e.char<=57},e.isC=function(){var At=h(e.CNvals,e.char)!==void 0;n[t++]=At},e.isT=function(){var At=h(e.TNvals,e.char)!==void 0;n[t++]=At},e.isX=function(){var At=h(e.Xvals,e.char)!==void 0;n[t++]=At},e.isE=function(){var At=h(e.Evals,e.char)!==void 0;n[t++]=At},e.isEA=function(){n[t++]=e.char>127},e.isFN=function(){n[t++]=e.char<0},e.XtermFirst=function(){var At=n[--t];n[t++]=oo(h(e.nextXterm,At),h(e.nextNonX,At))},e.lookup=function(){e.ac=1,e.cc=2,e.tc=2,e.xc=2,e.ec=2,e.bc=2.25,e.mode==e.A&&(e.ac=0,e.cc=1,e.tc=1,e.xc=1,e.ec=1,e.bc=1.25),e.mode==e.C&&(e.cc=0),e.mode==e.T&&(e.tc=0),e.mode==e.X&&(e.xc=0),e.mode==e.E&&(e.ec=0),e.mode==e.B&&(e.bc=0);for(var At=0;At<1;At++){if(h(e.isECI,e.i)){n[t++]=e.A;break}if(e.c40headerlength!=-1&&e.i<e.c40headerlength){n[t++]=e.C;break}for(e.k=0;;){if(e.i+e.k==e.msglen){for(var tn=o(["ac","cc","tc","xc","ec","bc"]),Cn=0,In=tn.length;Cn<In;Cn++){var xi=h(tn,Cn);e[xi]=li(e[xi])}var Sr=o([e.cc,e.tc,e.xc,e.ec,e.bc]);n[t++]=!0;for(var oi=0,da=Sr.length;oi<da;oi++){var Wr=n[--t];n[t++]=Wr&&e.ac<=h(Sr,oi)}if(n[--t]){n[t++]=e.A;break}var fs=o([e.ac,e.cc,e.tc,e.xc,e.ec]);n[t++]=!0;for(var Qa=0,$a=fs.length;Qa<$a;Qa++){var Il=n[--t];n[t++]=Il&&e.bc<h(fs,Qa)}if(n[--t]){n[t++]=e.B;break}var Nl=o([e.ac,e.cc,e.tc,e.xc,e.bc]);n[t++]=!0;for(var Vo=0,zl=Nl.length;Vo<zl;Vo++){var Wa=n[--t];n[t++]=Wa&&e.ec<h(Nl,Vo)}if(n[--t]){n[t++]=e.E;break}var Yo=o([e.ac,e.cc,e.xc,e.ec,e.bc]);n[t++]=!0;for(var Io=0,j1=Yo.length;Io<j1;Io++){var u1=n[--t];n[t++]=u1&&e.tc<h(Yo,Io)}if(n[--t]){n[t++]=e.T;break}var js=o([e.ac,e.cc,e.tc,e.ec,e.bc]);n[t++]=!0;for(var ks=0,cl=js.length;ks<cl;ks++){var No=n[--t];n[t++]=No&&e.xc<h(js,ks)}if(n[--t]){n[t++]=e.X;break}n[t++]=e.C;break}if(e.char=h(e.msg,e.i+e.k),n[t++]="ac",n[t++]=e.ac,e.isD(),n[--t]){var To=n[--t];n[t++]=R(To+1/2)}else if(e.isEA(),n[--t]){var Qo=n[--t];n[t++]=li(Qo)+2}else{var Bc=n[--t];n[t++]=li(Bc)+1}var oc=n[--t];if(e[n[--t]]=oc,n[t++]="cc",n[t++]=e.cc,e.isC(),n[--t]){var lc=n[--t];n[t++]=R(lc+.6666667)}else if(e.isEA(),n[--t]){var Pc=n[--t];n[t++]=R(Pc+2.6666667)}else{var Xa=n[--t];n[t++]=R(Xa+1.3333334)}var Dr=n[--t];if(e[n[--t]]=Dr,n[t++]="tc",n[t++]=e.tc,e.isT(),n[--t]){var bi=n[--t];n[t++]=R(bi+.6666667)}else if(e.isEA(),n[--t]){var Mo=n[--t];n[t++]=R(Mo+2.6666667)}else{var Js=n[--t];n[t++]=R(Js+1.3333334)}var cc=n[--t];if(e[n[--t]]=cc,n[t++]="xc",n[t++]=e.xc,e.isX(),n[--t]){var $o=n[--t];n[t++]=R($o+.6666667)}else if(e.isEA(),n[--t]){var B1=n[--t];n[t++]=R(B1+4.3333334)}else{var Fc=n[--t];n[t++]=R(Fc+3.3333334)}var Hl=n[--t];if(e[n[--t]]=Hl,n[t++]="ec",n[t++]=e.ec,e.isE(),n[--t]){var dl=n[--t];n[t++]=R(dl+3/4)}else if(e.isEA(),n[--t]){var f1=n[--t];n[t++]=R(f1+17/4)}else{var h1=n[--t];n[t++]=R(h1+13/4)}var dc=n[--t];if(e[n[--t]]=dc,n[t++]="bc",n[t++]=e.bc,e.isFN(),n[--t]){var ul=n[--t];n[t++]=ul+4}else{var uo=n[--t];n[t++]=uo+1}var fl=n[--t];if(e[n[--t]]=fl,e.k>=4){var Ro=o([e.cc,e.tc,e.xc,e.ec,e.bc]);n[t++]=!0;for(var ql=0,p1=Ro.length;ql<p1;ql++){var Gl=n[--t];n[t++]=Gl&&e.ac+1<=h(Ro,ql)}if(n[--t]){n[t++]=e.A;break}if(e.bc+1<=e.ac){n[t++]=e.B;break}var Cs=o([e.cc,e.tc,e.xc,e.ec]);n[t++]=!0;for(var Tl=0,hs=Cs.length;Tl<hs;Tl++){var Uc=n[--t];n[t++]=Uc&&e.bc+1<h(Cs,Tl)}if(n[--t]){n[t++]=e.B;break}var Fd=o([e.ac,e.cc,e.tc,e.xc,e.bc]);n[t++]=!0;for(var Ud=0,A2=Fd.length;Ud<A2;Ud++){var S2=n[--t];n[t++]=S2&&e.ec+1<h(Fd,Ud)}if(n[--t]){n[t++]=e.E;break}var Ra=o([e.ac,e.cc,e.xc,e.ec,e.bc]);n[t++]=!0;for(var Wo=0,uc=Ra.length;Wo<uc;Wo++){var fc=n[--t];n[t++]=fc&&e.tc+1<h(Ra,Wo)}if(n[--t]){n[t++]=e.T;break}var fo=o([e.ac,e.cc,e.tc,e.ec,e.bc]);n[t++]=!0;for(var Vl=0,P1=fo.length;Vl<P1;Vl++){var k2=n[--t];n[t++]=k2&&e.xc+1<h(fo,Vl)}if(n[--t]){n[t++]=e.X;break}var Ld=o([e.ac,e.tc,e.ec,e.bc]);n[t++]=!0;for(var zd=0,ff=Ld.length;zd<ff;zd++){var m1=n[--t];n[t++]=m1&&e.cc+1<h(Ld,zd)}if(n[--t]){if(e.cc<e.xc){n[t++]=e.C;break}if(e.cc==e.xc)if(n[t++]=e.i+e.k+1,e.XtermFirst(),n[--t]){n[t++]=e.X;break}else{n[t++]=e.C;break}}}e.k=e.k+1}}},e.addtocws=function(){var At=n[--t];H(e.cws,e.j,At),e.j=At.length+e.j},e.ECItocws=function(){var At=-n[--t]-1e6;if(n[t++]=At,At<=126){var tn=n[--t];n[t++]=tn+1,Rn(o(1))}else{var Cn=n[t-1];if(Cn<=16382){var In=n[--t]-127;n[t++]=~~(In/254)+128,n[t++]=In%254+1,Rn(o(2))}else{var xi=n[--t]-16383;n[t++]=~~(xi/64516)+192,n[t++]=~~(xi/254)%254+1,n[t++]=xi%254+1,Rn(o(3))}}},e.encA=function(){for(var At=0;At<1;At++){if(h(e.isECI,e.i)){n[t++]=h(e.Avals,e.eci),e.addtocws(),n[t++]=h(e.msg,e.i),e.ECItocws(),e.addtocws(),e.i=e.i+1;break}if(h(e.numD,e.i)>=2){var tn=fe(2);C(tn,0,h(e.msg,e.i)),C(tn,1,h(e.msg,e.i+1)),n[t++]=h(e.Avals,tn),e.addtocws(),e.i=e.i+2;break}n[t++]="newmode",e.lookup();var Cn=n[--t];if(e[n[--t]]=Cn,e.newmode!=e.mode){n[t++]=h(e.Avals,h(o([-1,e.lC,e.lT,e.lX,e.lE,e.lB]),e.newmode)),e.addtocws(),e.mode=e.newmode;break}n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1;break}},e.CTXvalstocws=function(){e.in=n[--t],n[t++]=1/0;for(var At=0,tn=e.in.length-1;At<=tn;At+=3){var Cn=O(e.in,At,3);n[t++]=0;for(var In=0,xi=Cn.length;In<xi;In++){var Sr=n[--t];n[t++]=R(Sr+h(Cn,In))*40}var oi=~~(n[--t]/40)+1;n[t++]=~~(oi/256),n[t++]=oi%256}Rn(o(Ur()));var da=n[--t];n[t-1]=da},e.encCTX=function(){for(e.p=0,e.ctxvals=o(2500),e.done=!1;e.i!=e.msglen;){var At=h(h(e.encvals,e.mode),h(e.msg,e.i))!==void 0;if(!At)break;if(e.p%3==0){if(e.p>0){n[t++]="newmode",e.lookup();var tn=n[--t];if(e[n[--t]]=tn,qe(e.newmode,e.mode)){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),e.newmode!=e.A&&(n[t++]=h(e.Avals,h(o([-1,e.lC,e.lT,e.lX,e.lE,e.lB]),e.newmode)),e.addtocws()),e.mode=e.newmode,e.done=!0;break}}if(e.msglen-e.i<=3){e.remcws=h(e.numremcws,e.j+~~(e.p/3)*2),n[t++]=1/0;for(var Cn=O(e.msg,e.i,e.msglen-e.i),In=0,xi=Cn.length;In<xi;In++){var Sr=h(Cn,In),oi=h(h(e.encvals,e.mode),Sr)!==void 0;n[t++]=Sr,oi?W(h(h(e.encvals,e.mode),n[--t])):(n[t-1]=-1,n[t++]=-1,n[t++]=-1,n[t++]=-1)}if(e.remvals=o(),e.remcws==2&&e.remvals.length==3){n[t++]=1/0,W(O(e.ctxvals,0,e.p)),W(e.remvals);var da=o();n[t++]=da,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==2&&e.remvals.length==2&&e.mode!=e.X){n[t++]=1/0,W(O(e.ctxvals,0,e.p)),W(e.remvals),W(h(h(e.encvals,e.mode),e.sft1));var Wr=o();n[t++]=Wr,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==2&&e.remvals.length==1){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==1&&e.remvals.length==1){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}}}var fs=h(h(e.encvals,e.mode),h(e.msg,e.i));H(e.ctxvals,e.p,fs),e.p=fs.length+e.p,e.i=e.i+1}if(!e.done){for(;e.p%3!=0;)e.i=e.i-1,e.p=e.p-h(h(e.encvals,e.mode),h(e.msg,e.i)).length;n[t++]=1/0,W(O(e.ctxvals,0,e.p));var Qa=o();if(n[t++]=Qa,e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A,e.i!=e.msglen&&!h(e.isECI,e.i))if(h(e.numD,e.i)>=2){var $a=fe(2);C($a,0,h(e.msg,e.i)),C($a,1,h(e.msg,e.i+1)),n[t++]=h(e.Avals,$a),e.addtocws(),e.i=e.i+2}else n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.Evalstocws=function(){e.in=n[--t],e.inlen=e.in.length,e.outlen=~~li(e.in.length/4*3),n[t++]=1/0,W(e.in),n[t++]=0,n[t++]=0,n[t++]=0,e.in=o(),n[t++]=1/0;for(var At=0,tn=e.inlen-1;At<=tn;At+=4){var Cn=O(e.in,At,4);n[t++]=0;for(var In=0,xi=Cn.length;In<xi;In++){var Sr=n[--t];n[t++]=IN(Sr,h(Cn,In))<<6}var oi=n[--t]>>>6;n[t++]=oi>>>16&255,n[t++]=oi>>>8&255,n[t++]=oi&255}Rn(o(Ur()));var da=n[--t];n[t-1]=da;var Wr=O(n[--t],0,e.outlen);n[t++]=Wr},e.encE=function(){for(e.p=0,e.edifactvals=o(2100);e.i!=e.msglen;){var At=h(e.Evals,h(e.msg,e.i))!==void 0;if(!At)break;if(e.p%4==0){if(e.msglen-e.i<=2){e.remcws=h(e.numremcws,e.j+~~(e.p/4)*3),n[t++]=1/0;for(var tn=O(e.msg,e.i,e.msglen-e.i),Cn=0,In=tn.length;Cn<In;Cn++)W(h(e.Avals,h(tn,Cn)));if(e.remvals=o(),(e.remcws==1||e.remcws==2)&&e.remvals.length<=e.remcws){n[t++]=O(e.edifactvals,0,e.p),e.Evalstocws(),e.addtocws(),n[t++]=e.remvals,e.addtocws(),e.mode=e.A,e.i=e.msglen;break}}if(e.lookup(),n[--t]!=e.mode)break}var xi=h(e.Evals,h(e.msg,e.i));H(e.edifactvals,e.p,xi),e.p=xi.length+e.p,e.i=e.i+1}if(e.mode!=e.A){if(e.remcws=h(e.numremcws,e.j+~~(e.p/4)*3-1)-1,e.p%4!=0||e.i!=e.msglen||e.remcws>=3){var Sr=h(e.Evals,e.unl);H(e.edifactvals,e.p,Sr),e.p=Sr.length+e.p}if(n[t++]=O(e.edifactvals,0,e.p),e.Evalstocws(),e.addtocws(),e.mode=e.A,e.i!=e.msglen&&!h(e.isECI,e.i))if(h(e.numD,e.i)>=2){var oi=fe(2);C(oi,0,h(e.msg,e.i)),C(oi,1,h(e.msg,e.i+1)),n[t++]=h(e.Avals,oi),e.addtocws(),e.i=e.i+2}else n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.encB=function(){for(e.p=0,e.bvals=o(1558);!(e.i==e.msglen||(e.lookup(),n[--t]!=e.mode));)C(e.bvals,e.p,h(e.msg,e.i)),e.p=e.p+1,e.i=e.i+1;e.remcws=h(e.numremcws,e.j+e.p)-1,n[t++]=1/0,e.remcws==0&&e.i==e.msglen?n[t++]=0:e.p<250?n[t++]=e.p:(n[t++]=~~(e.p/250)+249,n[t++]=e.p%250),W(O(e.bvals,0,e.p)),e.bvals=o();for(var At=0,tn=e.bvals.length-1;At<=tn;At+=1){e.p=At;var Cn=R((e.j+e.p+1)*149%255+1+h(e.bvals,e.p));if(n[t++]=Cn,Cn>=256){var In=n[--t];n[t++]=In-256}C(e.bvals,e.p,n[--t])}n[t++]=e.bvals,e.addtocws(),e.mode=e.A},e.cws=o(1558),e.mode=e.A,e.i=0,e.j=0;!(e.i>=e.msglen||e[h(o(["encA","encCTX","encCTX","encCTX","encE","encB"]),e.mode)]()===!0););e.cws=O(e.cws,0,e.j)}if(e.datlen=e.cws.length,e.remcws=h(e.numremcws,e.j-1)-1,e.remcws>0){n[t++]=1/0,W(e.cws);for(var Ci=0,Aa=e.remcws;Ci<Aa;Ci++)n[t++]=129;e.cws=o();for(var Na=e.datlen+1,na=R(e.datlen+e.remcws)-1;Na<=na;Na+=1){e.i=Na;var $s=(e.i+1)*149%253+1+129;if(n[t++]=$s,$s>254){var Qr=n[--t];n[t++]=Qr-254}C(e.cws,e.i,n[--t])}}var Co=h(e.options,"debugcws")!==void 0;Co&&(n[t++]="bwipp.debugcws#20411",n[t++]=e.cws,Z());for(var ts=e.metrics,$r=0,Ws=ts.length;$r<Ws&&(e.m=h(ts,$r),e.rows=h(e.m,0),e.cols=h(e.m,1),e.regh=h(e.m,2),e.regv=h(e.m,3),e.rscw=h(e.m,4),e.rsbl=h(e.m,5),e.doly=h(e.m,6),e.mrows=R(e.rows-2*e.regh),e.mcols=R(e.cols-2*e.regv),e.rrows=~~(e.mrows/e.regh),e.rcols=~~(e.mcols/e.regv),e.ncws=R(~~(e.mrows*e.mcols/8)-e.rscw),e.okay=!0,e.cws.length!=e.ncws&&(e.okay=!1),e.urows!=0&&e.urows!=e.rows&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.cols&&(e.okay=!1),ce(e.format,"square")&&qe(e.rows,e.cols)&&(e.okay=!1),ce(e.format,"rectangle")&&ce(e.rows,e.cols)&&(e.okay=!1),!e.dmre&&e.doly==1&&(e.okay=!1),!e.okay);$r++);e.okay||(n[t++]="bwipp.datamatrixNoValidSymbol#20439",n[t++]="Maximum length exceeded or invalid size",Z()),e.cwbs=o(e.rsbl),e.ecbs=o(e.rsbl);for(var pa=0,gs=e.rsbl-1;pa<=gs;pa+=1){e.i=pa,e.cws.length!=1558?e.cwbsize=~~(e.cws.length/e.rsbl):e.i<=7?e.cwbsize=156:e.cwbsize=155,e.cwb=o(e.cwbsize);for(var Ta=0,vs=e.cwbsize-1;Ta<=vs;Ta+=1)e.j=Ta,C(e.cwb,e.j,h(e.cws,R(e.j*e.rsbl+e.i)));C(e.cwbs,e.i,e.cwb),n[t++]=e.ecbs,n[t++]=e.i,n[t++]=1/0;for(var xs=0,lo=~~(e.rscw/e.rsbl);xs<lo;xs++)n[t++]=0;var Gt=o(),qi=n[--t];C(n[--t],qi,Gt)}n[t++]=1/0,n[t++]=1;for(var Zi=0;Zi<255;Zi++){var ia=n[t-1],cr=ia*2;if(n[t++]=cr,cr>=256){var ma=n[--t];n[t++]=ma^301}}e.rsalog=o(),e.rslog=o(256);for(var Ma=1;Ma<=255;Ma+=1)C(e.rslog,h(e.rsalog,Ma),Ma);e.rsprod=function(){var At=n[t-1],tn=n[t-2];if(At!=0&&tn!=0){var Cn=h(e.rslog,n[--t]),In=h(e.rsalog,R(Cn+h(e.rslog,n[--t]))%255);n[t++]=In}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var Ns=0,Nt=~~(e.rscw/e.rsbl);Ns<Nt;Ns++)n[t++]=0;e.coeffs=o();for(var $t=1,Yn=~~(e.rscw/e.rsbl);$t<=Yn;$t+=1){e.i=$t,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Kn=e.i-1;Kn>=1;Kn-=1){e.j=Kn,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var Jn=n[--t],Si=n[--t],Wn=n[--t];C(n[--t],Wn,Ha(Si,Jn))}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var $i=n[--t],Ii=n[--t];C(n[--t],Ii,$i)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1);for(var fi=0,Fi=e.cwbs.length-1;fi<=Fi;fi+=1){e.i=fi,e.cwb=h(e.cwbs,e.i),e.ecb=h(e.ecbs,e.i);for(var Gi=0,mr=e.cwb.length-1;Gi<=mr;Gi+=1){e.t=Ha(h(e.cwb,Gi),h(e.ecb,0));for(var Vi=e.ecb.length-1;Vi>=0;Vi-=1){e.j=Vi,e.p=e.ecb.length-e.j-1,n[t++]=e.ecb,n[t++]=e.p,n[t++]=e.t,n[t++]=h(e.coeffs,e.j),e.rsprod();var Ni=n[--t],Ti=n[--t];C(n[--t],Ti,Ni),e.j>0&&C(e.ecb,e.p,Ha(h(e.ecb,e.p+1),h(e.ecb,e.p)))}}}e.ncws==1558&&(n[t++]=1/0,W(O(e.ecbs,8,2)),W(O(e.ecbs,0,8)),e.ecbs=o()),n[t++]=1/0,W(e.cws);for(var ci=0,Mi=e.rscw;ci<Mi;ci++)n[t++]=0;e.cws=o();for(var Ar=0,gr=e.rscw-1;Ar<=gr;Ar+=1)e.i=Ar,C(e.cws,R(e.ncws+e.i),h(h(e.ecbs,e.i%e.rsbl),~~(e.i/e.rsbl)));e.module=function(){oa(4,-1);var At=zi(fe(8),"00000000");n[t++]=At,n[t++]=At;var tn=Nn(fe(8),n[t-3],2);H(n[t-1],8-tn.length,tn),n[t-3]=n[t-2],t-=2;for(var Cn=7;Cn>=0;Cn-=1){var In=n[--t];n[t++]=h(In,Cn)-48,n[t++]=In}t--,oa(11,-3),Ie(n[--t],function(){if(n[--t]()===!0)return!0;var xi=n[t-2];if(xi<0){var Sr=n[--t],oi=n[--t];n[t++]=R(oi+e.mrows),n[t++]=R(Sr+(4-(e.mrows+4)%8))}var da=n[t-1];if(da<0){var Wr=n[--t],fs=n[--t];n[t++]=R(fs+(4-(e.mcols+4)%8)),n[t++]=R(Wr+e.mcols)}var Qa=n[t-2];if(Qa>=e.mrows){var $a=n[--t],Il=n[--t];n[t++]=R(Il-e.mrows),n[t++]=$a}var Nl=n[--t],Vo=n[--t];n[t++]=e.mmat,n[t++]=R(Nl+Vo*e.mcols),oa(5,-1);var zl=n[--t],Wa=n[--t];C(n[--t],Wa,zl)})};var ga=o([function(){var At=n[t-1],tn=n[t-2];n[t++]=tn-2,n[t++]=At-2},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn-2,n[t++]=At-1},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn-1,n[t++]=At-2},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn-1,n[t++]=At-1},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn-1,n[t++]=At},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn,n[t++]=At-2},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn,n[t++]=At-1},function(){var At=n[t-1],tn=n[t-2];n[t++]=tn,n[t++]=At}]);e.dmn=ga;var Sa=o([function(){n[t++]=e.mrows-1,n[t++]=0},function(){n[t++]=e.mrows-1,n[t++]=1},function(){n[t++]=e.mrows-1,n[t++]=2},function(){n[t++]=0,n[t++]=e.mcols-2},function(){n[t++]=0,n[t++]=e.mcols-1},function(){n[t++]=1,n[t++]=e.mcols-1},function(){n[t++]=2,n[t++]=e.mcols-1},function(){n[t++]=3,n[t++]=e.mcols-1}]);e.dmc1=Sa;var ns=o([function(){n[t++]=e.mrows-3,n[t++]=0},function(){n[t++]=e.mrows-2,n[t++]=0},function(){n[t++]=e.mrows-1,n[t++]=0},function(){n[t++]=0,n[t++]=e.mcols-4},function(){n[t++]=0,n[t++]=e.mcols-3},function(){n[t++]=0,n[t++]=e.mcols-2},function(){n[t++]=0,n[t++]=e.mcols-1},function(){n[t++]=1,n[t++]=e.mcols-1}]);e.dmc2=ns;var Pa=o([function(){n[t++]=e.mrows-3,n[t++]=0},function(){n[t++]=e.mrows-2,n[t++]=0},function(){n[t++]=e.mrows-1,n[t++]=0},function(){n[t++]=0,n[t++]=e.mcols-2},function(){n[t++]=0,n[t++]=e.mcols-1},function(){n[t++]=1,n[t++]=e.mcols-1},function(){n[t++]=2,n[t++]=e.mcols-1},function(){n[t++]=3,n[t++]=e.mcols-1}]);e.dmc3=Pa;var Un=o([function(){n[t++]=e.mrows-1,n[t++]=0},function(){n[t++]=e.mrows-1,n[t++]=e.mcols-1},function(){n[t++]=0,n[t++]=e.mcols-3},function(){n[t++]=0,n[t++]=e.mcols-2},function(){n[t++]=0,n[t++]=e.mcols-1},function(){n[t++]=1,n[t++]=e.mcols-3},function(){n[t++]=1,n[t++]=e.mcols-2},function(){n[t++]=1,n[t++]=e.mcols-1}]);e.dmc4=Un,n[t++]=1/0;for(var ni=0,hi=e.mrows*e.mcols;ni<hi;ni++)n[t++]=-1;e.mmat=o();for(var Wi=e.cws.length-1;Wi>=0;Wi-=1)n[t++]=h(e.cws,Wi);for(n[t++]=4,n[t++]=0;;){var Ri=n[t-1],er=n[t-2];Ri==0&&er==e.mrows&&(n[t++]=e.dmc1,e.module());var Yi=n[t-1],Oi=n[t-2];Yi==0&&Oi==e.mrows-2&&e.mcols%4!=0&&(n[t++]=e.dmc2,e.module());var Or=n[t-1],Ya=n[t-2];Or==0&&Ya==e.mrows-2&&e.mcols%8==4&&(n[t++]=e.dmc3,e.module());var bs=n[t-1],Ts=n[t-2];for(bs==2&&Ts==e.mrows+4&&e.mcols%8==0&&(n[t++]=e.dmc4,e.module());;){var Xs=n[t-1],Ms=n[t-2];if(Xs>=0&&Ms<e.mrows){var Rs=n[t-1],ys=n[t-2];h(e.mmat,R(Rs+ys*e.mcols))==-1&&(n[t++]=e.dmn,e.module())}var Os=n[--t],Ds=n[--t];if(n[t++]=Ds-2,n[t++]=Os+2,!(Os+2<e.mcols&&Ds-2>=0))break}var ol=n[--t],Eo=n[--t];for(n[t++]=Eo+1,n[t++]=ol+3;;){var Ks=n[t-1],co=n[t-2];if(Ks<e.mcols&&co>=0){var lt=n[t-1],Ft=n[t-2];h(e.mmat,R(lt+Ft*e.mcols))==-1&&(n[t++]=e.dmn,e.module())}var jn=n[--t],si=n[--t];if(n[t++]=si+2,n[t++]=jn-2,!(jn-2>=0&&si+2<e.mrows))break}var dr=n[--t],ca=n[--t];if(n[t++]=ca+3,n[t++]=dr+1,!(dr+1<e.mcols||ca+3<e.mrows)){t-=2;break}}h(e.mmat,e.mrows*e.mcols-1)==-1&&(H(e.mmat,e.mrows*(e.mcols-1)-2,o([1,0])),H(e.mmat,e.mrows*e.mcols-2,o([0,1]))),e.pixs=o(e.rows*e.cols),e.cwpos=0;for(var va=0,Fa=e.rows-1;va<=Fa;va+=1){if(e.i=va,e.i%(e.rrows+2)==0){n[t++]=e.pixs,n[t++]=e.i*e.cols,n[t++]=1/0;for(var ws=0,As=~~(e.cols/2);ws<As;ws++)n[t++]=1,n[t++]=0;var ll=o(),qo=n[--t];H(n[--t],qo,ll)}if(e.i%(e.rrows+2)==e.rrows+1){n[t++]=e.pixs,n[t++]=e.i*e.cols,n[t++]=1/0;for(var xa=0,_o=e.cols;xa<_o;xa++)n[t++]=1;var Ss=o(),Go=n[--t];H(n[--t],Go,Ss)}if(e.i%(e.rrows+2)!=0&&e.i%(e.rrows+2)!=e.rrows+1)for(var It=0,xn=e.cols-1;It<=xn;It+=1)e.j=It,e.j%(e.rcols+2)==0&&C(e.pixs,R(e.i*e.cols+e.j),1),e.j%(e.rcols+2)==e.rcols+1&&C(e.pixs,R(e.i*e.cols+e.j),e.i%2),e.j%(e.rcols+2)!=0&&e.j%(e.rcols+2)!=e.rcols+1&&(C(e.pixs,R(e.i*e.cols+e.j),h(e.mmat,e.cwpos)),e.cwpos=e.cwpos+1)}var vi=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.cols],["pixy",e.rows],["height",e.rows*2/72],["width",e.cols*2/72],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);n[t++]=vi,e.dontdraw||Lt(),e=r}function gT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"format","rectangle"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function vT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"dmre",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function xT(){var r=e;e=Object.assign({},e),e.type="unset",e.parse=!1,e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse;var s=e.type;qe(s,"7")&&qe(s,"9")&&qe(s,"29")&&(n[t++]="bwipp.mailmarkBadType#20820",n[t++]="Royal Mail Mailmark type must be 7, 9 or 29",Z());var l=new Map([["7","24x24"],["9","32x32"],["29","16x48"]]);e.version=h(l,e.type);var c=new Map([["7","square"],["9","square"],["29","rectangle"]]);e.format=h(c,e.type),e.barcode.length<45&&(n[t++]="bwipp.mailmarkBadLength#20836",n[t++]="Royal Mail Mailmark must contain at least 45 characters of Mailmark formatted data, including any required space padding",Z()),qe(O(e.barcode,0,4),"JGB ")&&(n[t++]="bwipp.mailmarkBadIndicator#20839",n[t++]="Royal Mail Mailmark must begin with JGB<space> identifier",Z()),C(e.options,"dontdraw",!0),C(e.options,"version",e.version),C(e.options,"format",e.format),C(e.options,"c40headerlength",45),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var d=n[--t];e[n[--t]]=d,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function sf(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.format="unset",e.version="unset",e.eclevel="unset",e.fixedeclevel=!1,e.parse=!1,e.parsefnc=!1,e.mask=-1,e.suppresskanjimode=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.qrcodeEmptyData#20904",n[t++]="The data must not be empty",Z()),qe(e.version,"unset")?ce(e.format,"unset")&&(n[t++]="full",ce(O(e.version,0,1),"M")&&(n[t-1]="micro"),ce(O(e.version,0,1),"R")&&(n[t-1]="rmqr"),e.format=n[--t]):ce(e.format,"unset")&&(e.format="full"),qe(e.format,"full")&&qe(e.format,"micro")&&qe(e.format,"rmqr")&&(n[t++]="bwipp.qrcodeInvalidFormat#20920",n[t++]="The format must be either full, micro or rmqr",Z()),ce(e.format,"rmqr")&&ce(e.version,"unset")&&(n[t++]="bwipp.qrcodeRMQRwithoutVersion#20924",n[t++]="A version must be provided for RMQR",Z()),ce(e.eclevel,"unset")){n[t++]="eclevel",qe(e.format,"micro")?n[t++]="M":n[t++]="L";var i=n[--t];e[n[--t]]=i}if(qe(e.eclevel,"L")&&qe(e.eclevel,"M")&&qe(e.eclevel,"Q")&&qe(e.eclevel,"H")&&(n[t++]="bwipp.qrcodeInvalidEClevel#20931",n[t++]="Error correction level must be either L, M, Q, or H",Z()),e.mask!=-1&&ce(e.format,"rmqr")&&(n[t++]="bwipp.qrcodeRMQRmask#20935",n[t++]="A mask cannot be supplied for RMQR",Z()),e.mask!=-1){var a=ce(e.format,"full")?8:4;(e.mask<1||e.mask>a)&&(n[t++]="bwipp.qrcodeBadMask#20940",n[t++]="An invalid mask was supplied",Z())}e.fn1=-1;var s=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1]]);e.fncvals=s,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var l=n[--t];if(e[n[--t]]=l,e.msglen=e.msg.length,e.fnc1first=!1,e.msglen>0&&h(e.msg,0)==e.fn1){e.fnc1first=!0,n[t++]=1/0;for(var c=O(e.msg,1,e.msglen-1),d=0,f=c.length;d<f;d++){var m=h(c,d);if(n[t++]=m,m==37){var g=n[t-1];n[t++]=g}}e.msg=o(),e.msglen=e.msg.length}var v=o(["v1to9","v10to26","v27to40","vM1","vM2","vM3","vM4","vR7x43","vR7x59","vR7x77","vR7x99","vR7x139","vR9x43","vR9x59","vR9x77","vR9x99","vR9x139","vR11x27","vR11x43","vR11x59","vR11x77","vR11x99","vR11x139","vR13x27","vR13x43","vR13x59","vR13x77","vR13x99","vR13x139","vR15x43","vR15x59","vR15x77","vR15x99","vR15x139","vR17x43","vR17x59","vR17x77","vR17x99","vR17x139"]);n[t++]=0;for(var y=0,A=v.length;y<A;y++){var w=n[--t];e[h(v,y)]=w,n[t++]=w+1}t--,e.N=0,e.A=1,e.B=2,e.K=3,e.E=4,n[t++]=1/0,n[t++]=1/0;for(var k=48;k<=57;k+=1)n[t++]=k;for(var E=o(),I=0,T=E.length;I<T;I++)n[t++]=h(E,I),n[t++]=-1;e.Nexcl=rt(),n[t++]=1/0,n[t++]=1/0,n[t++]=32,n[t++]=36,n[t++]=37,n[t++]=42,n[t++]=43,n[t++]=45,n[t++]=46,n[t++]=47,n[t++]=58;for(var N=65;N<=90;N+=1)n[t++]=N;n[t++]=e.fn1;for(var j=o(),B=0,U=j.length;B<U;B++)n[t++]=h(j,B),n[t++]=-1;e.Aexcl=rt(),n[t++]=1/0,n[t++]=1/0;for(var F=129;F<=159;F+=1)n[t++]=F;for(var P=224;P<=235;P+=1)n[t++]=P;for(var z=o(),V=0,L=z.length;V<L;V++)n[t++]=h(z,V),n[t++]=-1;e.Kexcl=rt(),n[t++]=1/0,n[t++]=o(["0001","0010","0100","1000","0111"]),n[t++]=o(["0001","0010","0100","1000","0111"]),n[t++]=o(["0001","0010","0100","1000","0111"]),n[t++]=o(["",-1,-1,-1,-1]),n[t++]=o(["0","1",-1,-1,-1]),n[t++]=o(["00","01","10","11",-1]),n[t++]=o(["000","001","010","011",-1]);for(var Q=0;Q<32;Q++)n[t++]=o(["001","010","011","100","111"]);e.mids=o(),e.cclens=o([o([10,9,8,8]),o([12,11,16,10]),o([14,13,16,12]),o([3,-1,-1,-1]),o([4,3,-1,-1]),o([5,4,4,3]),o([6,5,5,4]),o([4,3,3,2]),o([5,5,4,3]),o([6,5,5,4]),o([7,6,5,5]),o([7,6,6,5]),o([5,5,4,3]),o([6,5,5,4]),o([7,6,5,5]),o([7,6,6,5]),o([8,7,6,6]),o([4,4,3,2]),o([6,5,5,4]),o([7,6,5,5]),o([7,6,6,5]),o([8,7,6,6]),o([8,7,7,6]),o([5,5,4,3]),o([6,6,5,5]),o([7,6,6,5]),o([7,7,6,6]),o([8,7,7,6]),o([8,8,7,7]),o([7,6,6,5]),o([7,7,6,5]),o([8,7,7,6]),o([8,7,7,6]),o([9,8,7,7]),o([7,6,6,5]),o([8,7,6,6]),o([8,7,7,6]),o([8,8,7,6]),o([9,8,8,7])]),n[t++]=1/0;for(var q=0;q<3;q++)n[t++]=4;n[t++]=3,n[t++]=5,n[t++]=7,n[t++]=9;for(var ee=0;ee<32;ee++)n[t++]=3;e.termlens=o(),e.padstrs=o(["11101100","00010001"]),e.charmap="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.charvals=new Map;for(var X=0;X<=44;X+=1)C(e.charvals,h(e.charmap,X),X);e.tobin=function(){var lt=fe(n[--t]);n[t++]=lt;for(var Ft=0,jn=lt.length-1;Ft<=jn;Ft+=1){var si=n[t-1];C(si,Ft,48)}var dr=n[t-1];n[t++]=dr;var ca=n[t-3],va=n[t-1];n[t-3]=n[t-2],t-=2;var Fa=Nn(fe(va.length),ca,2);H(va,va.length-Fa.length,Fa)},e.encA=function(){for(e.in=n[--t],e.fnc1first&&(n[t++]=1/0,Ie(e.in,function(){var Ft=n[t-1];Ft==e.fn1&&(n[t-1]=37)}),e.in=o()),e.out=fe(~~(e.in.length*11/2)+1),e.k=0,e.m=0;e.k!=e.in.length;){e.k<e.in.length-1?(n[t++]=R(h(e.charvals,h(e.in,e.k))*45+h(e.charvals,h(e.in,e.k+1))),n[t++]=11,e.tobin(),e.k=e.k+2):(n[t++]=h(e.charvals,h(e.in,e.k)),n[t++]=6,e.tobin(),e.k=e.k+1);var lt=n[--t];H(e.out,e.m,lt),e.m=lt.length+e.m}n[t++]=O(e.out,0,e.m)},e.encN=function(){for(e.in=n[--t],e.out=fe(~~(e.in.length*10/3)+1),e.k=0,e.m=0;e.k!=e.in.length;){if(e.k<e.in.length-2){var lt=O(e.in,e.k,3);n[t++]=0;for(var Ft=0,jn=lt.length;Ft<jn;Ft++){var si=n[--t];n[t++]=R(h(lt,Ft)+(si*10-48))}n[t++]=10,e.tobin(),e.k=e.k+3}else if(e.k==e.in.length-2){var dr=O(e.in,e.k,2);n[t++]=0;for(var ca=0,va=dr.length;ca<va;ca++){var Fa=n[--t];n[t++]=R(h(dr,ca)+(Fa*10-48))}n[t++]=7,e.tobin(),e.k=e.k+2}else{var ws=O(e.in,e.k,1);n[t++]=0;for(var As=0,ll=ws.length;As<ll;As++){var qo=n[--t];n[t++]=R(h(ws,As)+(qo*10-48))}n[t++]=4,e.tobin(),e.k=e.k+1}var xa=n[--t];H(e.out,e.m,xa),e.m=xa.length+e.m}n[t++]=O(e.out,0,e.m)},e.encB=function(){e.in=n[--t],e.fnc1first&&(n[t++]=1/0,Ie(e.in,function(){var dr=n[t-1];dr==e.fn1&&(n[t-1]=29)}),e.in=o()),e.out=fe(e.in.length*8);for(var lt=0,Ft=e.in.length-1;lt<=Ft;lt+=1){e.k=lt,n[t++]=Ye(h(e.in,e.k)),n[t++]=8,e.tobin(),n[t++]=e.out,n[t++]=e.k*8;var jn=n[t-3],si=n[t-1];H(n[t-2],si,jn),t-=3}n[t++]=e.out},e.encK=function(){for(e.in=n[--t],e.out=fe(~~(e.in.length/2)*13),e.k=0,e.m=0;e.k!=e.in.length;){var lt=R(h(e.in,e.k)*256+h(e.in,e.k+1));n[t++]=lt,lt<57408?n[t++]=33088:n[t++]=49472;var Ft=n[--t],jn=R(n[--t]-Ft);n[t++]=R((jn>>>8)*192+(jn&255)),n[t++]=13,e.tobin();var si=n[--t];H(e.out,e.m,si),e.m=si.length+e.m,e.k=e.k+2}n[t++]=e.out},e.encE=function(){var lt=-h(n[--t],0)-1e6;if(n[t++]=lt,lt<=127)n[t++]=8,e.tobin();else{var Ft=n[t-1];if(Ft<=16383){var jn=n[--t];n[t++]=jn+32768,n[t++]=16,e.tobin()}else{var si=n[--t];n[t++]=si+12582912,n[t++]=24,e.tobin()}}},e.encfuncs=o(["encN","encA","encB","encK","encE"]),e.addtobits=function(){var lt=n[--t];H(e.bits,e.j,lt),e.j=lt.length+e.j},n[t++]=1/0;for(var ae=0,K=e.msglen;ae<K;ae++)n[t++]=0;n[t++]=0,e.numNs=o(),n[t++]=1/0;for(var ie=0,ne=e.msglen;ie<ne;ie++)n[t++]=0;n[t++]=0,e.numAs=o(),n[t++]=1/0;for(var J=0,te=e.msglen;J<te;J++)n[t++]=0;n[t++]=0,e.numAorNs=o(),n[t++]=1/0;for(var $=0,oe=e.msglen;$<oe;$++)n[t++]=0;n[t++]=0,e.numBs=o(),n[t++]=1/0;for(var we=0,be=e.msglen;we<be;we++)n[t++]=0;n[t++]=0,e.numKs=o(),n[t++]=1/0;for(var Te=0,ye=e.msglen;Te<ye;Te++)n[t++]=0;n[t++]=9999,e.nextNs=o(),n[t++]=1/0;for(var tt=0,Qe=e.msglen;tt<Qe;tt++)n[t++]=0;n[t++]=9999,e.nextBs=o(),n[t++]=1/0;for(var Ge=0,Xe=e.msglen;Ge<Xe;Ge++)n[t++]=0;n[t++]=9999,e.nextAs=o(),n[t++]=1/0;for(var Je=0,dt=e.msglen;Je<dt;Je++)n[t++]=0;n[t++]=9999,e.nextKs=o(),e.isECI=o(e.msglen);for(var vt=e.msglen-1;vt>=0;vt-=1){e.i=vt,e.barchar=h(e.msg,e.i);var _t=h(e.Kexcl,e.barchar)!==void 0;if(_t&&!e.suppresskanjimode){e.i+1<e.msglen?n[t++]=R(e.barchar*256+h(e.msg,e.i+1)):n[t++]=0;var xt=n[--t],bt=xt&255;(xt>=33088&&xt<=40956||xt>=57408&&xt<=60351)&&bt>=64&&bt<=252&&bt!=127?(C(e.nextKs,e.i,0),C(e.numKs,e.i,h(e.numKs,e.i+2)+1)):C(e.nextKs,e.i,h(e.nextKs,e.i+1)+1)}else C(e.nextKs,e.i,h(e.nextKs,e.i+1)+1);var kt=h(e.Nexcl,e.barchar)!==void 0;kt?(C(e.nextNs,e.i,0),C(e.numNs,e.i,h(e.numNs,e.i+1)+1),C(e.numAorNs,e.i,h(e.numAorNs,e.i+1)+1)):C(e.nextNs,e.i,h(e.nextNs,e.i+1)+1);var Pt=h(e.Aexcl,e.barchar)!==void 0;Pt?(C(e.nextAs,e.i,0),C(e.numAs,e.i,h(e.numAs,e.i+1)+1),C(e.numAorNs,e.i,h(e.numAorNs,e.i+1)+1)):C(e.nextAs,e.i,h(e.nextAs,e.i+1)+1),C(e.isECI,e.i,e.barchar<=-1e6)}for(var Rt=0,Wt=e.msglen-1;Rt<=Wt;Rt+=1)e.i=Rt,h(e.numKs,e.i)>0&&(C(e.numKs,e.i+1,0),C(e.nextKs,e.i+1,h(e.nextKs,e.i+1)+1));for(var zt=e.msglen-1;zt>=0;zt-=1)e.i=zt,R(h(e.numNs,e.i)+(h(e.numAs,e.i)+h(e.numKs,e.i)))==0&&!h(e.isECI,e.i)?(C(e.nextBs,e.i,0),C(e.numBs,e.i,h(e.numBs,e.i+1)+1)):C(e.nextBs,e.i,h(e.nextBs,e.i+1)+1);e.KbeforeB=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numK,lt)&&h(e.nextBs,R(e.numK*2+e.i))==0},e.KbeforeA=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numK,lt)&&h(e.nextAs,R(e.numK*2+e.i))==0},e.KbeforeN=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numK,lt)&&h(e.nextNs,R(e.numK*2+e.i))==0},e.KbeforeE=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numK,lt)&&R(e.numK*2+e.i)==e.msglen},e.AbeforeK=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numA,lt)&&h(e.nextKs,R(e.numA+e.i))==0},e.AbeforeB=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numA,lt)&&h(e.nextBs,R(e.numA+e.i))==0},e.AbeforeN=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numA,lt)&&h(e.nextNs,R(e.numA+e.i))==0},e.AbeforeE=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numA,lt)&&R(e.numA+e.i)==e.msglen},e.NbeforeK=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numN,lt)&&h(e.nextKs,R(e.numN+e.i))==0},e.NbeforeB=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numN,lt)&&h(e.nextBs,R(e.numN+e.i))==0},e.NbeforeA=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numN,lt)&&h(e.nextAs,R(e.numN+e.i))==0},e.NbeforeE=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numN,lt)&&R(e.numN+e.i)==e.msglen},e.AorNbeforeB=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numAorN,lt)&&h(e.nextBs,R(e.numAorN+e.i))==0},e.AorNbeforeE=function(){var lt=h(n[--t],e.ver);n[t++]=il(e.numAorN,lt)&&R(e.numAorN+e.i)==e.msglen},e.nextNslt=function(){if(h(e.nextNs,e.i)>=e.msglen)n[t-1]=!0;else{var lt=h(n[--t],e.ver);n[t++]=oo(h(e.numNs,R(h(e.nextNs,e.i)+e.i)),lt)}},n[t++]=1/0,n[t++]="full",n[t++]=1/0;for(var Ct=0;Ct<=9;Ct+=1)n[t++]=Nn(fe(2),Ct,10),n[t++]=e.v1to9;for(var Yt=10;Yt<=26;Yt+=1)n[t++]=Nn(fe(2),Yt,10),n[t++]=e.v10to26;for(var jt=27;jt<=40;jt+=1)n[t++]=Nn(fe(2),jt,10),n[t++]=e.v27to40;var an=rt(),rn=new Map([["M1",e.vM1],["M2",e.vM2],["M3",e.vM3],["M4",e.vM4]]),Kt=new Map([["R7x43",e.vR7x43],["R7x59",e.vR7x59],["R7x77",e.vR7x77],["R7x99",e.vR7x99],["R7x139",e.vR7x139],["R9x43",e.vR9x43],["R9x59",e.vR9x59],["R9x77",e.vR9x77],["R9x99",e.vR9x99],["R9x139",e.vR9x139],["R11x27",e.vR11x27],["R11x43",e.vR11x43],["R11x59",e.vR11x59],["R11x77",e.vR11x77],["R11x99",e.vR11x99],["R11x139",e.vR11x139],["R13x27",e.vR13x27],["R13x43",e.vR13x43],["R13x59",e.vR13x59],["R13x77",e.vR13x77],["R13x99",e.vR13x99],["R13x139",e.vR13x139],["R15x43",e.vR15x43],["R15x59",e.vR15x59],["R15x77",e.vR15x77],["R15x99",e.vR15x99],["R15x139",e.vR15x139],["R17x43",e.vR17x43],["R17x59",e.vR17x59],["R17x77",e.vR17x77],["R17x99",e.vR17x99],["R17x139",e.vR17x139]]);if(n[t++]=an,n[t++]="micro",n[t++]=rn,n[t++]="rmqr",n[t++]=Kt,e.versetmap=rt(),e.versetfull=o([e.v1to9,e.v10to26,e.v27to40]),e.versetmicro=o([e.vM1,e.vM2,e.vM3,e.vM4]),qe(e.version,"unset")){var Jt=h(e.versetmap,e.format),Zt=e.version,Qt=h(Jt,Zt)!==void 0;n[t++]=Jt,n[t++]=Zt,Qt||(t-=2,ce(e.format,"full")?(n[t++]="bwipp.qrcodeInvalidFullVersion#21296",n[t++]="Valid versions for QR Code symbols are 1 to 40",Z()):ce(e.format,"micro")?(n[t++]="bwipp.qrcodeInvalidMicroVersion#21299",n[t++]="Valid versions for Micro QR Code symbols are M1 to M4",Z()):(n[t++]="bwipp.qrcodeInvalidRMQRversion#21301",n[t++]="Invalid version for an RMQR symbol",Z()));var mn=n[--t],cn=h(n[--t],mn),dn=1/0,Ht=cn;n[t++]=dn,n[t++]=Ht,e.verset=o()}else ce(e.format,"full")&&(e.verset=e.versetfull),ce(e.format,"micro")&&(e.verset=e.versetmicro);n[t++]=1/0;for(var Bt=0;Bt<39;Bt++)n[t++]=-1;e.msgbits=o(),e.e=1e4,e.mode0forceKB=o([1,1,1,e.e,e.e,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0forceA=o([1,1,1,e.e,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0forceN=o([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0NbeforeB=o([4,4,5,e.e,e.e,2,3,2,2,3,3,3,2,3,3,3,3,2,3,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),e.modeBKbeforeB=o([9,12,13,e.e,e.e,4,6,4,5,6,6,6,5,6,6,6,7,4,6,6,6,7,7,5,6,6,7,7,7,6,6,7,7,7,6,7,7,7,8]),e.modeBKbeforeA=o([8,10,11,e.e,e.e,4,5,4,5,5,6,6,5,5,6,6,6,4,5,6,6,6,6,5,6,6,6,6,7,6,6,6,6,7,6,6,6,7,7]),e.modeBKbeforeN=o([8,9,11,e.e,e.e,3,5,3,4,5,5,5,4,5,5,5,6,3,5,5,5,6,6,4,5,5,6,6,6,5,5,6,6,7,5,6,6,6,7]),e.modeBKbeforeE=o([5,5,6,e.e,e.e,2,3,2,3,3,3,3,3,3,3,3,4,2,3,3,3,4,4,3,3,3,4,4,4,3,3,4,4,4,3,4,4,4,4]),e.modeBAbeforeK=o([11,12,14,e.e,e.e,5,7,5,6,7,8,8,6,7,8,8,8,6,7,8,8,8,8,6,8,8,8,8,9,8,8,8,8,9,8,8,8,9,9]),e.modeBAbeforeB=o([11,15,16,e.e,e.e,6,7,6,7,7,8,8,7,7,8,8,8,6,7,8,8,8,9,7,8,8,8,9,9,8,8,9,9,9,8,8,9,9,10]),e.modeBAbeforeN=o([12,13,15,e.e,e.e,6,8,6,7,8,8,8,7,8,8,8,9,6,8,8,8,9,9,7,8,8,9,9,10,8,9,9,9,10,8,9,9,10,10]),e.modeBAbeforeE=o([6,7,8,e.e,e.e,3,4,3,4,4,4,4,4,4,4,4,5,4,4,4,4,5,5,4,4,4,5,5,5,4,5,5,5,5,4,5,5,5,5]),e.modeBNbeforeK=o([6,7,8,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,3,4,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5]),e.modeBNbeforeB=o([6,8,9,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,3,4,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,6]),e.modeBNbeforeA=o([6,7,8,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,4,4,5,5,5,5,4,5,5,5,5,5,5,5,5,5,6,5,5,5,5,6]),e.modeBNbeforeE=o([3,4,4,e.e,e.e,2,3,2,2,3,3,3,2,3,3,3,3,2,3,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),e.modeANbeforeA=o([13,15,17,e.e,5,7,9,7,8,9,9,9,8,9,9,9,11,7,9,9,9,11,11,8,9,9,10,11,11,9,10,11,11,11,9,11,11,11,11]),e.modeANbeforeB=o([13,17,18,e.e,e.e,7,9,7,8,9,9,9,8,9,9,9,10,7,9,9,9,10,11,8,9,9,9,11,11,9,9,11,11,11,9,10,11,11,11]),e.modeANbeforeE=o([7,8,9,e.e,3,4,5,4,5,5,5,5,5,5,5,5,6,4,5,5,5,6,6,5,5,5,5,6,6,5,5,6,6,6,5,6,6,6,6]);for(var Y=e.verset,le=0,se=Y.length;le<se;le++){for(e.ver=h(Y,le),e.mode=-1,e.seq=o([]),e.i=0;!(e.i>=e.msglen);){if(e.numK=h(e.numKs,e.i),e.numB=h(e.numBs,e.i),e.numA=h(e.numAs,e.i),e.numN=h(e.numNs,e.i),e.numAorN=h(e.numAorNs,e.i),e.eci=h(e.isECI,e.i),ce(e.ver,e.vM1)&&e.numA>=1){e.seq=-1;break}if(ce(e.ver,e.vM1)&&e.numB>=1){e.seq=-1;break}if(ce(e.ver,e.vM1)&&e.numK>=1){e.seq=-1;break}if(ce(e.ver,e.vM1)&&e.eci){e.seq=-1;break}if(ce(e.ver,e.vM2)&&e.numB>=1){e.seq=-1;break}if(ce(e.ver,e.vM2)&&e.numK>=1){e.seq=-1;break}if(ce(e.ver,e.vM2)&&e.eci){e.seq=-1;break}if(ce(e.ver,e.vM3)&&e.eci){e.seq=-1;break}if(ce(e.ver,e.vM4)&&e.eci){e.seq=-1;break}for(;;){if(e.eci){n[t++]=e.E;break}if(e.mode==-1){if(n[t++]=e.mode0forceKB,e.KbeforeA(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.mode0forceKB,e.KbeforeN(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.modeBKbeforeE,e.KbeforeB(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.mode0forceKB,e.KbeforeE(),n[--t]){n[t++]=e.K;break}if(e.numK>=1){n[t++]=e.B;break}if(n[t++]=e.mode0NbeforeB,e.NbeforeK(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.mode0NbeforeB,e.NbeforeB(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.mode0forceKB,e.NbeforeB(),n[--t]){n[t++]=e.B;break}if(n[t++]=e.modeANbeforeE,e.NbeforeA(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.mode0forceN,e.NbeforeE(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.modeBAbeforeE,e.AbeforeK(),n[--t]){n[t++]=e.A;break}if(n[t++]=e.modeBAbeforeE,e.AorNbeforeB(),n[--t]){n[t++]=e.A;break}if(n[t++]=e.mode0forceA,e.AorNbeforeE(),n[--t]){n[t++]=e.A;break}n[t++]=e.B;break}if(e.mode==e.B){if(n[t++]=e.modeBKbeforeB,e.KbeforeB(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.modeBKbeforeA,e.KbeforeA(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.modeBKbeforeN,e.KbeforeN(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.modeBKbeforeE,e.KbeforeE(),n[--t]){n[t++]=e.K;break}if(n[t++]=e.modeBAbeforeK,e.AbeforeK(),n[--t]){n[t++]=e.A;break}if(n[t++]=e.modeBAbeforeB,e.AbeforeB(),n[--t]){n[t++]=e.A;break}if(n[t++]=e.modeBAbeforeN,e.AbeforeN(),n[--t]){n[t++]=e.A;break}if(n[t++]=e.modeBAbeforeE,e.AbeforeE(),n[--t]){n[t++]=e.A;break}if(n[t++]=e.modeBNbeforeK,e.NbeforeK(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.modeBNbeforeB,e.NbeforeB(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.modeBNbeforeA,e.NbeforeA(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.modeBNbeforeE,e.NbeforeE(),n[--t]){n[t++]=e.N;break}n[t++]=e.modeBAbeforeE,e.AorNbeforeE();var ge=n[--t];if(ge&&Zh(e.numAorN,h(e.modeBAbeforeN,e.ver))&&(n[t++]=e.modeBNbeforeA,e.nextNslt(),n[--t])){n[t++]=e.A;break}n[t++]=e.B;break}if(e.mode==e.A){if(e.numK>=1){n[t++]=e.K;break}if(e.numB>=1){n[t++]=e.B;break}if(n[t++]=e.modeANbeforeA,e.NbeforeA(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.modeANbeforeB,e.NbeforeB(),n[--t]){n[t++]=e.N;break}if(n[t++]=e.modeANbeforeE,e.NbeforeE(),n[--t]){n[t++]=e.N;break}if(e.numA>=1||e.numN>=1){n[t++]=e.A;break}n[t++]=e.B;break}if(e.mode==e.N){if(e.numK>=1){n[t++]=e.K;break}if(e.numB>=1){n[t++]=e.B;break}if(e.numA>=1){n[t++]=e.A;break}if(e.numN>=1){n[t++]=e.N;break}n[t++]=e.B;break}if(e.mode==e.K){if(e.numB>=1){n[t++]=e.B;break}if(e.numA>=1){n[t++]=e.A;break}if(e.numN>=1){n[t++]=e.N;break}if(e.numK>=1){n[t++]=e.K;break}n[t++]=e.B;break}}var ve=n[t-1];ve==e.K&&e.fnc1first&&(n[t-1]=e.B);var _e=n[t-1];if(_e==e.mode){t--;var pe=e.mode==e.K?2:1;e.dat=O(e.msg,e.i,pe),n[t++]=1/0,W(e.seq),n[t++]=1/0;var Oe=n[--t],de=n[--t];n[t++]=Oe,W(de),W(e.dat);var ke=o();n[t++]=ke,e.seq=o()}else e.mode=n[--t],e.mode==e.K&&(n[t++]=e.K,n[t++]=O(e.msg,e.i,e.numK*2)),e.mode==e.B&&(n[t++]=e.B,n[t++]=O(e.msg,e.i,e.numB)),e.mode==e.A&&(n[t++]=e.A,n[t++]=O(e.msg,e.i,e.numA)),e.mode==e.N&&(n[t++]=e.N,n[t++]=O(e.msg,e.i,e.numN)),e.mode==e.E&&(e.mode=-1,n[t++]=e.E,n[t++]=O(e.msg,e.i,1)),e.dat=n[--t],e.sw=n[--t],n[t++]=1/0,W(e.seq),n[t++]=e.sw,n[t++]=e.dat,e.seq=o();e.i=e.i+e.dat.length}for(;e.seq!=-1;){e.bits=fe(23648),e.j=0,e.fnc1first&&(oo(e.ver,e.vR7x43)?n[t++]="0101":n[t++]="101",e.addtobits()),e.abort=!1;for(var Ee=0,De=e.seq.length-1;Ee<=De;Ee+=2){if(e.i=Ee,e.mode=h(e.seq,e.i),n[t++]=h(h(e.mids,e.ver),e.mode),e.addtobits(),e.chars=h(e.seq,e.i+1),n[t++]="charslen",n[t++]=e.chars.length,e.mode==e.K){var xe=n[--t];n[t++]=~~(xe/2)}var Ne=n[--t];if(e[n[--t]]=Ne,e.mode!=e.E){if(e.cclen=h(h(e.cclens,e.ver),e.mode),e.charslen>=~~El(2,e.cclen)){e.abort=!0;break}n[t++]=e.charslen,n[t++]=e.cclen,e.tobin(),e.addtobits()}if(n[t++]=e.chars,e[h(e.encfuncs,e.mode)]()===!0)break;e.addtobits()}if(e.abort)break;e.bits=O(e.bits,0,e.j),C(e.msgbits,e.ver,e.bits);break}}e.metrics=o([o(["micro","M1",e.vM1,11,11,98,99,36,o([2,99,99,99]),o([1,0,-1,-1,-1,-1,-1,-1])]),o(["micro","M2",e.vM2,13,13,98,99,80,o([5,6,99,99]),o([1,0,1,0,-1,-1,-1,-1])]),o(["micro","M3",e.vM3,15,15,98,99,132,o([6,8,99,99]),o([1,0,1,0,-1,-1,-1,-1])]),o(["micro","M4",e.vM4,17,17,98,99,192,o([8,10,14,99]),o([1,0,1,0,1,0,-1,-1])]),o(["full","1",e.v1to9,21,21,98,99,208,o([7,10,13,17]),o([1,0,1,0,1,0,1,0])]),o(["full","2",e.v1to9,25,25,18,99,359,o([10,16,22,28]),o([1,0,1,0,1,0,1,0])]),o(["full","3",e.v1to9,29,29,22,99,567,o([15,26,36,44]),o([1,0,1,0,2,0,2,0])]),o(["full","4",e.v1to9,33,33,26,99,807,o([20,36,52,64]),o([1,0,2,0,2,0,4,0])]),o(["full","5",e.v1to9,37,37,30,99,1079,o([26,48,72,88]),o([1,0,2,0,2,2,2,2])]),o(["full","6",e.v1to9,41,41,34,99,1383,o([36,64,96,112]),o([2,0,4,0,4,0,4,0])]),o(["full","7",e.v1to9,45,45,22,38,1568,o([40,72,108,130]),o([2,0,4,0,2,4,4,1])]),o(["full","8",e.v1to9,49,49,24,42,1936,o([48,88,132,156]),o([2,0,2,2,4,2,4,2])]),o(["full","9",e.v1to9,53,53,26,46,2336,o([60,110,160,192]),o([2,0,3,2,4,4,4,4])]),o(["full","10",e.v10to26,57,57,28,50,2768,o([72,130,192,224]),o([2,2,4,1,6,2,6,2])]),o(["full","11",e.v10to26,61,61,30,54,3232,o([80,150,224,264]),o([4,0,1,4,4,4,3,8])]),o(["full","12",e.v10to26,65,65,32,58,3728,o([96,176,260,308]),o([2,2,6,2,4,6,7,4])]),o(["full","13",e.v10to26,69,69,34,62,4256,o([104,198,288,352]),o([4,0,8,1,8,4,12,4])]),o(["full","14",e.v10to26,73,73,26,46,4651,o([120,216,320,384]),o([3,1,4,5,11,5,11,5])]),o(["full","15",e.v10to26,77,77,26,48,5243,o([132,240,360,432]),o([5,1,5,5,5,7,11,7])]),o(["full","16",e.v10to26,81,81,26,50,5867,o([144,280,408,480]),o([5,1,7,3,15,2,3,13])]),o(["full","17",e.v10to26,85,85,30,54,6523,o([168,308,448,532]),o([1,5,10,1,1,15,2,17])]),o(["full","18",e.v10to26,89,89,30,56,7211,o([180,338,504,588]),o([5,1,9,4,17,1,2,19])]),o(["full","19",e.v10to26,93,93,30,58,7931,o([196,364,546,650]),o([3,4,3,11,17,4,9,16])]),o(["full","20",e.v10to26,97,97,34,62,8683,o([224,416,600,700]),o([3,5,3,13,15,5,15,10])]),o(["full","21",e.v10to26,101,101,28,50,9252,o([224,442,644,750]),o([4,4,17,0,17,6,19,6])]),o(["full","22",e.v10to26,105,105,26,50,10068,o([252,476,690,816]),o([2,7,17,0,7,16,34,0])]),o(["full","23",e.v10to26,109,109,30,54,10916,o([270,504,750,900]),o([4,5,4,14,11,14,16,14])]),o(["full","24",e.v10to26,113,113,28,54,11796,o([300,560,810,960]),o([6,4,6,14,11,16,30,2])]),o(["full","25",e.v10to26,117,117,32,58,12708,o([312,588,870,1050]),o([8,4,8,13,7,22,22,13])]),o(["full","26",e.v10to26,121,121,30,58,13652,o([336,644,952,1110]),o([10,2,19,4,28,6,33,4])]),o(["full","27",e.v27to40,125,125,34,62,14628,o([360,700,1020,1200]),o([8,4,22,3,8,26,12,28])]),o(["full","28",e.v27to40,129,129,26,50,15371,o([390,728,1050,1260]),o([3,10,3,23,4,31,11,31])]),o(["full","29",e.v27to40,133,133,30,54,16411,o([420,784,1140,1350]),o([7,7,21,7,1,37,19,26])]),o(["full","30",e.v27to40,137,137,26,52,17483,o([450,812,1200,1440]),o([5,10,19,10,15,25,23,25])]),o(["full","31",e.v27to40,141,141,30,56,18587,o([480,868,1290,1530]),o([13,3,2,29,42,1,23,28])]),o(["full","32",e.v27to40,145,145,34,60,19723,o([510,924,1350,1620]),o([17,0,10,23,10,35,19,35])]),o(["full","33",e.v27to40,149,149,30,58,20891,o([540,980,1440,1710]),o([17,1,14,21,29,19,11,46])]),o(["full","34",e.v27to40,153,153,34,62,22091,o([570,1036,1530,1800]),o([13,6,14,23,44,7,59,1])]),o(["full","35",e.v27to40,157,157,30,54,23008,o([570,1064,1590,1890]),o([12,7,12,26,39,14,22,41])]),o(["full","36",e.v27to40,161,161,24,50,24272,o([600,1120,1680,1980]),o([6,14,6,34,46,10,2,64])]),o(["full","37",e.v27to40,165,165,28,54,25568,o([630,1204,1770,2100]),o([17,4,29,14,49,10,24,46])]),o(["full","38",e.v27to40,169,169,32,58,26896,o([660,1260,1860,2220]),o([4,18,13,32,48,14,42,32])]),o(["full","39",e.v27to40,173,173,26,54,28256,o([720,1316,1950,2310]),o([20,4,40,7,43,22,10,67])]),o(["full","40",e.v27to40,177,177,30,58,29648,o([750,1372,2040,2430]),o([19,6,18,31,34,34,20,61])]),o(["rmqr","R7x43",e.vR7x43,7,43,22,99,104,o([99,7,99,10]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x59",e.vR7x59,7,59,20,40,171,o([99,9,99,14]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x77",e.vR7x77,7,77,26,52,261,o([99,12,99,22]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x99",e.vR7x99,7,99,24,50,358,o([99,16,99,30]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x139",e.vR7x139,7,139,28,56,545,o([99,24,99,44]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R9x43",e.vR9x43,9,43,22,99,170,o([99,9,99,14]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R9x59",e.vR9x59,9,59,20,40,267,o([99,12,99,22]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R9x77",e.vR9x77,9,77,26,52,393,o([99,18,99,32]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R9x99",e.vR9x99,9,99,24,50,532,o([99,24,99,44]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R9x139",e.vR9x139,9,139,28,56,797,o([99,36,99,66]),o([-1,-1,1,1,-1,-1,3,0])]),o(["rmqr","R11x27",e.vR11x27,11,27,98,99,122,o([99,8,99,10]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R11x43",e.vR11x43,11,43,22,99,249,o([99,12,99,20]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R11x59",e.vR11x59,11,59,20,40,376,o([99,16,99,32]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R11x77",e.vR11x77,11,77,26,52,538,o([99,24,99,44]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R11x99",e.vR11x99,11,99,24,50,719,o([99,32,99,60]),o([-1,-1,1,1,-1,-1,1,1])]),o(["rmqr","R11x139",e.vR11x139,11,139,28,56,1062,o([99,48,99,90]),o([-1,-1,2,0,-1,-1,3,0])]),o(["rmqr","R13x27",e.vR13x27,13,27,98,99,172,o([99,9,99,14]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R13x43",e.vR13x43,13,43,22,99,329,o([99,14,99,28]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R13x59",e.vR13x59,13,59,20,40,486,o([99,22,99,40]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R13x77",e.vR13x77,13,77,26,52,684,o([99,32,99,56]),o([-1,-1,1,1,-1,-1,1,1])]),o(["rmqr","R13x99",e.vR13x99,13,99,24,50,907,o([99,40,99,78]),o([-1,-1,1,1,-1,-1,1,2])]),o(["rmqr","R13x139",e.vR13x139,13,139,28,56,1328,o([99,60,99,112]),o([-1,-1,2,1,-1,-1,2,2])]),o(["rmqr","R15x43",e.vR15x43,15,43,22,99,409,o([99,18,99,36]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R15x59",e.vR15x59,15,59,20,40,596,o([99,26,99,48]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R15x77",e.vR15x77,15,77,26,52,830,o([99,36,99,72]),o([-1,-1,1,1,-1,-1,2,1])]),o(["rmqr","R15x99",e.vR15x99,15,99,24,50,1095,o([99,48,99,88]),o([-1,-1,2,0,-1,-1,4,0])]),o(["rmqr","R15x139",e.vR15x139,15,139,28,56,1594,o([99,72,99,130]),o([-1,-1,2,1,-1,-1,1,4])]),o(["rmqr","R17x43",e.vR17x43,17,43,22,99,489,o([99,22,99,40]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R17x59",e.vR17x59,17,59,20,40,706,o([99,32,99,60]),o([-1,-1,2,0,-1,-1,2,0])]),o(["rmqr","R17x77",e.vR17x77,17,77,26,52,976,o([99,44,99,84]),o([-1,-1,2,0,-1,-1,1,2])]),o(["rmqr","R17x99",e.vR17x99,17,99,24,50,1283,o([99,60,99,104]),o([-1,-1,2,1,-1,-1,4,0])]),o(["rmqr","R17x139",e.vR17x139,17,139,28,56,1860,o([99,80,99,156]),o([-1,-1,4,0,-1,-1,2,4])])]),n[t++]="eclval",sn("LMQH",e.eclevel),t--;var je=n[--t];n[t-1]=je.length;var Se=n[--t];n[t-1]=Se;var ze=n[--t];e[n[--t]]=ze;for(var Pe=0,Be=e.metrics.length-1;Pe<=Be;Pe+=1){e.i=Pe,e.m=h(e.metrics,e.i),e.frmt=h(e.m,0),e.vers=h(e.m,1),e.vergrp=h(e.m,2),e.verind=e.i-44,e.rows=h(e.m,3),e.cols=h(e.m,4),e.asp2=h(e.m,5),e.asp3=h(e.m,6),e.nmod=h(e.m,7),e.ncws=~~(e.nmod/8),e.rbit=e.nmod%8,e.lc4b=!1,(ce(e.vers,"M1")||ce(e.vers,"M3"))&&(e.ncws=e.ncws+1,e.rbit=0,e.lc4b=!0),e.ecws=h(h(e.m,8),e.eclval),e.dcws=R(e.ncws-e.ecws);var at=e.lc4b?4:0;if(e.dmod=R(e.dcws*8-at),e.ecb1=h(h(e.m,9),e.eclval*2),e.ecb2=h(h(e.m,9),e.eclval*2+1),e.okay=!0,qe(e.format,e.frmt)&&(e.okay=!1),ce(e.frmt,"micro")&&e.fnc1first&&(e.okay=!1),qe(e.version,"unset")&&qe(e.version,e.vers)&&(e.okay=!1),(e.ecb1==-1||e.ecb2==-1)&&(e.okay=!1),e.verbits=h(e.msgbits,e.vergrp),(e.verbits==-1||e.verbits.length>e.dmod)&&(e.okay=!1),e.term=O("000000000",0,h(e.termlens,e.vergrp)),e.okay)break}if(e.okay||(n[t++]="bwipp.qrcodeNoValidSymbol#21607",n[t++]="Maximum length exceeded or invalid content",Z()),e.format=e.frmt,e.version=e.vers,e.msgbits=e.verbits,!e.fixedeclevel)for(var Ze=e.eclval+1;Ze<=3;Ze+=1){e.eclval_=Ze,e.ecws_=h(h(e.m,8),e.eclval_),e.dcws_=R(e.ncws-e.ecws_);var ft=e.lc4b?4:0;e.dmod_=R(e.dcws_*8-ft),e.ecb1_=h(h(e.m,9),e.eclval_*2),e.ecb2_=h(h(e.m,9),e.eclval_*2+1),e.okay=!0,(e.ecb1_==-1||e.ecb2_==-1)&&(e.okay=!1),e.msgbits.length>e.dmod_&&(e.okay=!1),e.okay&&(e.eclval=e.eclval_,e.dcws=e.dcws_,e.dmod=e.dmod_,e.ecb1=e.ecb1_,e.ecb2=e.ecb2_)}e.dcpb=~~(e.dcws/R(e.ecb1+e.ecb2)),e.ecpb=~~(e.ncws/R(e.ecb1+e.ecb2))-e.dcpb;var Ve=e.term,$e=e.dmod,Me=e.msgbits,it=e.term,st=it.length,mt=R($e-Me.length);if(R($e-Me.length)>it.length){var Tt=st;st=mt,mt=Tt}e.term=O(Ve,0,mt);var Ot=fe(e.msgbits.length+e.term.length);H(Ot,0,e.msgbits),H(Ot,e.msgbits.length,e.term),e.msgbits=Ot,e.pad=fe(e.dmod);for(var Et=0,Dt=e.pad.length-1;Et<=Dt;Et+=1)C(e.pad,Et,48);H(e.pad,0,e.msgbits),e.padnum=0;for(var wt=e.lc4b?5:1,en=~~(li(e.msgbits.length/8)*8),gt=R(e.dmod-wt);en<=gt;en+=8)H(e.pad,en,h(e.padstrs,e.padnum)),e.padnum=(e.padnum+1)%2;e.cws=o(e.dcws);for(var un=0,Vt=e.cws.length-1;un<=Vt;un+=1){e.c=un,e.bpcw=8,e.lc4b&&e.c==e.cws.length-1&&(e.bpcw=4),e.cwb=O(e.pad,e.c*8,e.bpcw),e.cw=0;for(var fn=0,$n=e.bpcw-1;fn<=$n;fn+=1)e.i=fn,e.cw=R(e.cw+~~El(2,e.bpcw-e.i-1)*(h(e.cwb,e.i)-48));C(e.cws,e.c,e.cw)}if(e.lc4b){var ei=e.cws,Dn=e.cws;C(ei,Dn.length-1,h(ei,Dn.length-1)<<4)}var ai=h(e.options,"debugcws")!==void 0;ai&&(n[t++]="bwipp.debugcws#21674",n[t++]=e.cws,Z()),n[t++]=1/0,n[t++]=1;for(var zn=0;zn<255;zn++){var mi=n[t-1],Fn=mi*2;if(n[t++]=Fn,Fn>=256){var Hn=n[--t];n[t++]=Hn^285}}e.rsalog=o(),e.rslog=o(256);for(var _n=1;_n<=255;_n+=1)C(e.rslog,h(e.rsalog,_n),_n);e.rsprod=function(){var lt=n[t-1],Ft=n[t-2];if(lt!=0&&Ft!=0){var jn=h(e.rslog,n[--t]),si=h(e.rsalog,R(jn+h(e.rslog,n[--t]))%255);n[t++]=si}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var vn=0,kn=e.ecpb;vn<kn;vn++)n[t++]=0;e.coeffs=o();for(var Ai=0,Ei=e.ecpb-1;Ai<=Ei;Ai+=1){e.i=Ai,C(e.coeffs,e.i+1,h(e.coeffs,e.i));for(var Ji=e.i;Ji>=1;Ji-=1){e.j=Ji,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var nn=n[--t],yn=n[--t],qn=n[--t];C(n[--t],qn,Ha(yn,nn))}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var Tn=n[--t],Gn=n[--t];C(n[--t],Gn,Tn)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1),e.rscodes=function(){e.rscws=n[--t],e.rsnd=e.rscws.length,n[t++]=1/0,W(e.rscws);for(var lt=0,Ft=e.ecpb;lt<Ft;lt++)n[t++]=0;e.rscws=o();for(var jn=0,si=e.rsnd-1;jn<=si;jn+=1){e.m=jn,e.k=h(e.rscws,e.m);for(var dr=0,ca=e.ecpb-1;dr<=ca;dr+=1){e.j=dr,n[t++]=e.rscws,n[t++]=e.m+e.j+1,n[t++]=h(e.coeffs,e.ecpb-e.j-1),n[t++]=e.k,e.rsprod();var va=n[--t],Fa=n[--t];C(n[--t],Fa,Ha(va,h(e.rscws,e.m+e.j+1)))}}n[t++]=O(e.rscws,e.rsnd,e.ecpb)},e.dcwsb=o(R(e.ecb1+e.ecb2)),e.ecwsb=o(R(e.ecb1+e.ecb2));for(var gi=0,Vn=e.ecb1-1;gi<=Vn;gi+=1){e.i=gi,C(e.dcwsb,e.i,O(e.cws,e.i*e.dcpb,e.dcpb)),n[t++]=e.ecwsb,n[t++]=e.i,n[t++]=h(e.dcwsb,e.i),e.rscodes();var ln=n[--t],ti=n[--t];C(n[--t],ti,ln)}for(var Qi=0,Bi=e.ecb2-1;Qi<=Bi;Qi+=1){e.i=Qi,C(e.dcwsb,R(e.ecb1+e.i),O(e.cws,R(e.ecb1*e.dcpb+e.i*(e.dcpb+1)),e.dcpb+1)),n[t++]=e.ecwsb,n[t++]=R(e.ecb1+e.i),n[t++]=h(e.dcwsb,R(e.ecb1+e.i)),e.rscodes();var Ir=n[--t],_i=n[--t];C(n[--t],_i,Ir)}e.cws=o(e.ncws),e.cw=0;for(var Nr=0,rr=e.dcpb;Nr<=rr;Nr+=1){e.i=Nr;for(var Zr=0,ar=R(e.ecb1+e.ecb2)-1;Zr<=ar;Zr+=1)e.j=Zr,e.i<h(e.dcwsb,e.j).length&&(C(e.cws,e.cw,h(h(e.dcwsb,e.j),e.i)),e.cw=e.cw+1)}for(var sr=0,Pi=e.ecpb-1;sr<=Pi;sr+=1){e.i=sr;for(var hr=0,Lr=R(e.ecb1+e.ecb2)-1;hr<=Lr;hr+=1)e.j=hr,C(e.cws,e.cw,h(h(e.ecwsb,e.j),e.i)),e.cw=e.cw+1}if(e.rbit>0&&(e.pad=o(e.cws.length+1),H(e.pad,0,e.cws),C(e.pad,e.pad.length-1,0),e.cws=e.pad),e.lc4b){var pr=e.cws,xr=e.dcws;C(pr,xr-1,h(pr,xr-1)>>>4);for(var wa=e.dcws-1,br=e.ncws-2;wa<=br;wa+=1)e.i=wa,C(e.cws,e.i,(h(e.cws,e.i)&15)<<4),C(e.cws,e.i,h(e.cws,e.i+1)>>>4&15|h(e.cws,e.i));C(e.cws,e.ncws-1,(h(e.cws,e.ncws-1)&15)<<4)}var Ba=h(e.options,"debugecc")!==void 0;Ba&&(n[t++]="bwipp.debugecc#21776",n[t++]=e.cws,Z()),n[t++]=1/0;for(var yr=0,zr=e.rows*e.cols;yr<zr;yr++)n[t++]=-1;if(e.pixs=o(),e.qmv=function(){var lt=n[--t],Ft=n[--t];n[t++]=R(Ft+lt*e.cols)},ce(e.format,"full"))for(var Tr=8,ea=e.cols-9;Tr<=ea;Tr+=1){e.i=Tr,n[t++]=e.pixs,n[t++]=e.i,n[t++]=6,e.qmv();var Hr=n[--t];C(n[--t],Hr,(e.i+1)%2),n[t++]=e.pixs,n[t++]=6,n[t++]=e.i,e.qmv();var _a=n[--t];C(n[--t],_a,(e.i+1)%2)}if(ce(e.format,"micro"))for(var qr=8,Va=e.cols-1;qr<=Va;qr+=1){e.i=qr,n[t++]=e.pixs,n[t++]=e.i,n[t++]=0,e.qmv();var Gr=n[--t];C(n[--t],Gr,(e.i+1)%2),n[t++]=e.pixs,n[t++]=0,n[t++]=e.i,e.qmv();var la=n[--t];C(n[--t],la,(e.i+1)%2)}if(ce(e.format,"rmqr")){for(var Vr=3,wr=e.cols-4;Vr<=wr;Vr+=1){e.i=Vr,n[t++]=e.pixs,n[t++]=e.i,n[t++]=0,e.qmv();var or=n[--t];C(n[--t],or,(e.i+1)%2),n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.rows-1,e.qmv();var ds=n[--t];C(n[--t],ds,(e.i+1)%2)}for(var lr=3,us=e.rows-4;lr<=us;lr+=1){e.i=lr,n[t++]=e.pixs,n[t++]=0,n[t++]=e.i,e.qmv();var Mr=n[--t];C(n[--t],Mr,(e.i+1)%2),n[t++]=e.pixs,n[t++]=e.cols-1,n[t++]=e.i,e.qmv();var es=n[--t];C(n[--t],es,(e.i+1)%2)}for(var Yr=e.asp2-1,Mn=R(e.asp3-e.asp2),Hi=e.cols-13;Mn<0?Yr>=Hi:Yr<=Hi;Yr+=Mn){e.i=Yr;for(var Rr=3,ta=e.rows-4;Rr<=ta;Rr+=1){e.j=Rr,n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.j,e.qmv();var Ia=n[--t];C(n[--t],Ia,(e.j+1)%2)}}}e.fpat=o([o([1,1,1,1,1,1,1,0]),o([1,0,0,0,0,0,1,0]),o([1,0,1,1,1,0,1,0]),o([1,0,1,1,1,0,1,0]),o([1,0,1,1,1,0,1,0]),o([1,0,0,0,0,0,1,0]),o([1,1,1,1,1,1,1,0]),o([0,0,0,0,0,0,0,0])]),e.fsubpat=o([o([1,1,1,1,1,9,9,9]),o([1,0,0,0,1,9,9,9]),o([1,0,1,0,1,9,9,9]),o([1,0,0,0,1,9,9,9]),o([1,1,1,1,1,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9])]),e.fcorpat=o([o([1,1,1,9,9,9,9,9]),o([1,0,9,9,9,9,9,9]),o([1,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9])]),e.fnullpat=o([o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9])]);var Ci=new Map([["full",o([e.fpat,e.fpat,e.fpat,e.fnullpat])],["micro",o([e.fpat,e.fnullpat,e.fnullpat,e.fnullpat])],["rmqr",o([e.fpat,e.fcorpat,e.fcorpat,e.fsubpat])]]);e.fpatmap=Ci,e.fpats=h(e.fpatmap,e.format);for(var Aa=0;Aa<=7;Aa+=1){e.y=Aa;for(var Na=0;Na<=7;Na+=1){if(e.x=Na,e.fpb0=h(h(h(e.fpats,0),e.y),e.x),e.fpb1=h(h(h(e.fpats,1),e.y),e.x),e.fpb2=h(h(h(e.fpats,2),e.y),e.x),e.fpb3=h(h(h(e.fpats,3),e.y),e.x),e.fpb0!=9&&e.y<e.rows){n[t++]=e.pixs,n[t++]=e.x,n[t++]=e.y,e.qmv();var na=n[--t];C(n[--t],na,e.fpb0)}if(e.fpb1!=9){n[t++]=e.pixs,n[t++]=R(e.cols-e.x)-1,n[t++]=e.y,e.qmv();var $s=n[--t];C(n[--t],$s,e.fpb1)}if(e.fpb2!=9){n[t++]=e.pixs,n[t++]=e.x,n[t++]=R(e.rows-e.y)-1,e.qmv();var Qr=n[--t];C(n[--t],Qr,e.fpb2)}if(e.fpb3!=9){n[t++]=e.pixs,n[t++]=R(e.cols-e.x)-1,n[t++]=R(e.rows-e.y)-1,e.qmv();var Co=n[--t];C(n[--t],Co,e.fpb3)}}}if(e.algnpatfull=o([o([1,1,1,1,1]),o([1,0,0,0,1]),o([1,0,1,0,1]),o([1,0,0,0,1]),o([1,1,1,1,1])]),e.algnpatrmqr=o([o([1,1,1,9,9]),o([1,0,1,9,9]),o([1,1,1,9,9]),o([9,9,9,9,9]),o([9,9,9,9,9])]),e.putalgnpat=function(){e.py=n[--t],e.px=n[--t];for(var lt=0;lt<=4;lt+=1){e.pb=lt;for(var Ft=0;Ft<=4;Ft+=1)if(e.pa=Ft,e.algnb=h(h(e.algnpat,e.pb),e.pa),e.algnb!=9){n[t++]=e.pixs,n[t++]=R(e.px+e.pa),n[t++]=R(e.py+e.pb),e.qmv();var jn=n[--t];C(n[--t],jn,e.algnb)}}},ce(e.format,"full")){e.algnpat=e.algnpatfull;for(var ts=e.asp2-2,$r=R(e.asp3-e.asp2),Ws=e.cols-13;$r<0?ts>=Ws:ts<=Ws;ts+=$r)e.i=ts,n[t++]=e.i,n[t++]=4,e.putalgnpat(),n[t++]=4,n[t++]=e.i,e.putalgnpat();for(var pa=e.asp2-2,gs=R(e.asp3-e.asp2),Ta=e.cols-9;gs<0?pa>=Ta:pa<=Ta;pa+=gs){e.x=pa;for(var vs=e.asp2-2,xs=R(e.asp3-e.asp2),lo=e.rows-9;xs<0?vs>=lo:vs<=lo;vs+=xs)e.y=vs,n[t++]=e.x,n[t++]=e.y,e.putalgnpat()}}if(ce(e.format,"rmqr")){e.algnpat=e.algnpatrmqr;for(var Gt=e.asp2-2,qi=R(e.asp3-e.asp2),Zi=e.cols-13;qi<0?Gt>=Zi:Gt<=Zi;Gt+=qi)e.i=Gt,n[t++]=e.i,n[t++]=0,e.putalgnpat(),n[t++]=e.i,n[t++]=e.rows-3,e.putalgnpat()}e.formatmapmicro=o([o([o([1,8])]),o([o([2,8])]),o([o([3,8])]),o([o([4,8])]),o([o([5,8])]),o([o([6,8])]),o([o([7,8])]),o([o([8,8])]),o([o([8,7])]),o([o([8,6])]),o([o([8,5])]),o([o([8,4])]),o([o([8,3])]),o([o([8,2])]),o([o([8,1])])]);var ia=new Map([["full",o([o([o([0,8]),o([8,e.cols-1])]),o([o([1,8]),o([8,e.cols-2])]),o([o([2,8]),o([8,e.cols-3])]),o([o([3,8]),o([8,e.cols-4])]),o([o([4,8]),o([8,e.cols-5])]),o([o([5,8]),o([8,e.cols-6])]),o([o([7,8]),o([8,e.cols-7])]),o([o([8,8]),o([e.cols-8,8])]),o([o([8,7]),o([e.cols-7,8])]),o([o([8,5]),o([e.cols-6,8])]),o([o([8,4]),o([e.cols-5,8])]),o([o([8,3]),o([e.cols-4,8])]),o([o([8,2]),o([e.cols-3,8])]),o([o([8,1]),o([e.cols-2,8])]),o([o([8,0]),o([e.cols-1,8])])])],["micro",e.formatmapmicro],["rmqr",o([o([o([11,3]),o([e.cols-3,e.rows-6])]),o([o([11,2]),o([e.cols-4,e.rows-6])]),o([o([11,1]),o([e.cols-5,e.rows-6])]),o([o([10,5]),o([e.cols-6,e.rows-2])]),o([o([10,4]),o([e.cols-6,e.rows-3])]),o([o([10,3]),o([e.cols-6,e.rows-4])]),o([o([10,2]),o([e.cols-6,e.rows-5])]),o([o([10,1]),o([e.cols-6,e.rows-6])]),o([o([9,5]),o([e.cols-7,e.rows-2])]),o([o([9,4]),o([e.cols-7,e.rows-3])]),o([o([9,3]),o([e.cols-7,e.rows-4])]),o([o([9,2]),o([e.cols-7,e.rows-5])]),o([o([9,1]),o([e.cols-7,e.rows-6])]),o([o([8,5]),o([e.cols-8,e.rows-2])]),o([o([8,4]),o([e.cols-8,e.rows-3])]),o([o([8,3]),o([e.cols-8,e.rows-4])]),o([o([8,2]),o([e.cols-8,e.rows-5])]),o([o([8,1]),o([e.cols-8,e.rows-6])])])]]);e.formatmap=h(ia,e.format),Ie(e.formatmap,function(){Ie(n[--t],function(){W(n[--t]),e.qmv(),C(e.pixs,n[--t],1)})}),ce(e.format,"full")&&e.cols>=45?e.versionmap=o([o([o([e.cols-9,5]),o([5,e.cols-9])]),o([o([e.cols-10,5]),o([5,e.cols-10])]),o([o([e.cols-11,5]),o([5,e.cols-11])]),o([o([e.cols-9,4]),o([4,e.cols-9])]),o([o([e.cols-10,4]),o([4,e.cols-10])]),o([o([e.cols-11,4]),o([4,e.cols-11])]),o([o([e.cols-9,3]),o([3,e.cols-9])]),o([o([e.cols-10,3]),o([3,e.cols-10])]),o([o([e.cols-11,3]),o([3,e.cols-11])]),o([o([e.cols-9,2]),o([2,e.cols-9])]),o([o([e.cols-10,2]),o([2,e.cols-10])]),o([o([e.cols-11,2]),o([2,e.cols-11])]),o([o([e.cols-9,1]),o([1,e.cols-9])]),o([o([e.cols-10,1]),o([1,e.cols-10])]),o([o([e.cols-11,1]),o([1,e.cols-11])]),o([o([e.cols-9,0]),o([0,e.cols-9])]),o([o([e.cols-10,0]),o([0,e.cols-10])]),o([o([e.cols-11,0]),o([0,e.cols-11])])]):e.versionmap=o([]);for(var cr=e.versionmap,ma=0,Ma=cr.length;ma<Ma;ma++)Ie(h(cr,ma),function(){W(n[--t]),e.qmv(),C(e.pixs,n[--t],0)});if(ce(e.format,"full")){n[t++]=e.pixs,n[t++]=8,n[t++]=e.rows-8,e.qmv();var Ns=n[--t];C(n[--t],Ns,0)}var Nt=o([function(){var lt=n[--t],Ft=n[--t];n[t++]=R(Ft+lt)%2},function(){var lt=n[--t];n[t-1]=lt;var Ft=n[--t];n[t++]=Ft%2},function(){t--;var lt=n[--t];n[t++]=lt%3},function(){var lt=n[--t],Ft=n[--t];n[t++]=R(Ft+lt)%3},function(){var lt=n[--t],Ft=n[--t];n[t++]=(~~(lt/2)+~~(Ft/3))%2},function(){var lt=n[--t],Ft=n[--t]*lt;n[t++]=R(Ft%2+Ft%3)},function(){var lt=n[--t],Ft=n[--t]*lt;n[t++]=R(Ft%2+Ft%3)%2},function(){var lt=n[--t],Ft=n[--t];n[t++]=R(Ft*lt%3+(Ft+lt)%2)%2}]),$t=o([function(){var lt=n[--t];n[t-1]=lt;var Ft=n[--t];n[t++]=Ft%2},function(){var lt=n[--t],Ft=n[--t];n[t++]=(~~(lt/2)+~~(Ft/3))%2},function(){var lt=n[--t],Ft=n[--t]*lt;n[t++]=R(Ft%2+Ft%3)%2},function(){var lt=n[--t],Ft=n[--t];n[t++]=R(Ft*lt%3+(Ft+lt)%2)%2}]),Yn=o([function(){var lt=n[--t],Ft=n[--t];n[t++]=(~~(lt/2)+~~(Ft/3))%2}]),Kn=new Map([["full",Nt],["micro",$t],["rmqr",Yn]]);e.maskfuncs=h(Kn,e.format),e.mask!=-1&&(e.maskfuncs=o([h(e.maskfuncs,e.mask-1)]),e.bestmaskval=e.mask-1),e.masks=o(e.maskfuncs.length);for(var Jn=0,Si=e.masks.length-1;Jn<=Si;Jn+=1){e.m=Jn,e.mask=o(e.rows*e.cols);for(var Wn=0,$i=e.rows-1;Wn<=$i;Wn+=1){e.j=Wn;for(var Ii=0,fi=e.cols-1;Ii<=fi&&(e.i=Ii,n[t++]=e.i,n[t++]=e.j,h(e.maskfuncs,e.m)()!==!0);Ii+=1){var Fi=n[--t];n[t++]=Fi==0,n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.j,e.qmv();var Gi=n[--t],mr=h(n[--t],Gi),Vi=n[--t],Ni=Vi&&mr==-1?1:0;n[t++]=Ni,n[t++]=e.mask,n[t++]=e.i,n[t++]=e.j,e.qmv();var Ti=n[t-3],ci=n[t-1];C(n[t-2],ci,Ti),t-=3}}C(e.masks,e.m,e.mask)}var Mi=qe(e.format,"rmqr")?1:2;for(e.posx=R(e.cols-Mi),e.posy=e.rows-1,e.dir=-1,e.col=1,e.num=0;!(e.posx<0);){n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.qmv();var Ar=n[--t];if(h(n[--t],Ar)==-1){var gr=h(e.cws,~~(e.num/8)),ga=-(7-e.num%8);n[t++]=(ga<0?gr>>>-ga:gr<<ga)&1,n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.qmv();var Sa=n[t-3],ns=n[t-1];C(n[t-2],ns,Sa),t-=3,e.num=e.num+1}e.col==1?(e.col=0,e.posx=e.posx-1):(e.col=1,e.posx=e.posx+1,e.posy=R(e.posy+e.dir),(e.posy<0||e.posy>=e.rows)&&(e.dir=e.dir*-1,e.posy=R(e.posy+e.dir),e.posx=e.posx-2,ce(e.format,"full")&&e.posx==6&&(e.posx=e.posx-1)))}e.evalfulln1n3=function(){e.scrle=n[--t],n[t++]="scr1",n[t++]=0,Ie(e.scrle,function(){var ll=n[t-1];if(ll>=5){var qo=n[--t],xa=R(n[--t]+qo)-2;n[t++]=xa,n[t++]=xa}t--});var lt=n[--t];e[n[--t]]=lt,e.scr3=0;for(var Ft=3,jn=e.scrle.length-3;Ft<=jn;Ft+=2)if(e.j=Ft,h(e.scrle,e.j)%3==0){e.fact=~~(h(e.scrle,e.j)/3);for(var si=O(e.scrle,e.j-2,5),dr=0,ca=si.length;dr<ca;dr++)n[t++]=h(si,dr)==e.fact;var va=n[--t],Fa=n[--t];n[t-1]=_d(Fa,va);var ws=n[--t],As=n[--t];n[--t]&&As&&ws&&(e.j==3||e.j+4>=e.scrle.length||h(e.scrle,e.j-3)>=4||h(e.scrle,e.j+3)>=4)&&(e.scr3=e.scr3+40)}n[t++]=e.scr1,n[t++]=e.scr3},e.evalfull=function(){e.sym=n[--t],e.n1=0,e.n2=0,e.n3=0,e.rle=o(e.cols+1),e.lastpairs=o(e.cols),e.thispairs=o(e.cols),e.colsadd1=e.cols+1;for(var lt=0,Ft=e.cols-1;lt<=Ft;lt+=1){e.i=lt,n[t++]=1/0;var jn=e.cols;n[t++]=0,n[t++]=0;for(var si=e.i,dr=jn,ca=jn*jn-1;dr<0?si>=ca:si<=ca;si+=dr){var va=h(e.sym,si),Fa=n[--t];if(n[t++]=va,ce(Fa,va)){var ws=n[--t],As=n[--t];n[t++]=As+1,n[t++]=ws}else{var ll=n[--t];n[t++]=1,n[t++]=ll}}t--;var qo=Ur()+2;Rn(O(e.rle,0,qo-2)),e.evalfulln1n3(),e.n3=R(n[--t]+e.n3),e.n1=R(n[--t]+e.n1),t--,e.symrow=O(e.sym,e.i*e.cols,e.cols),n[t++]=1/0;var xa=e.symrow;n[t++]=0,n[t++]=0;for(var _o=0,Ss=xa.length;_o<Ss;_o++){var Go=h(xa,_o),It=n[--t];if(n[t++]=Go,ce(It,Go)){var xn=n[--t],vi=n[--t];n[t++]=vi+1,n[t++]=xn}else{var At=n[--t];n[t++]=1,n[t++]=At}}t--;var tn=Ur()+2;Rn(O(e.rle,0,tn-2)),e.evalfulln1n3(),e.n3=R(n[--t]+e.n3),e.n1=R(n[--t]+e.n1),t--;var Cn=e.thispairs;e.thispairs=e.lastpairs,e.lastpairs=Cn;var In=h(e.symrow,0)==1?0:1,xi=e.symrow;n[t++]=In;for(var Sr=0,oi=xi.length;Sr<oi;Sr++){var da=h(xi,Sr),Wr=n[--t];n[t++]=R(Wr+da),n[t++]=da}if(t--,Rn(e.thispairs),t--,e.i>0){n[t++]=1/0,W(e.lastpairs),W(e.thispairs),n[t++]=e.n2;for(var fs=0,Qa=e.cols;fs<Qa;fs++){var $a=n[--t],Il=n[--t];n[t++]=$a,n[t++]=Il;var Nl=n[t-1-e.colsadd1];if((R(n[--t]+Nl)&3)==0){var Vo=n[--t];n[t++]=Vo+3}}e.n2=n[--t],Qu()}}n[t++]="dark",n[t++]=0,Ie(e.sym,function(){var Yo=n[--t],Io=n[--t];n[t++]=R(Io+Yo)});var zl=n[--t];e[n[--t]]=zl;var Wa=e.cols;e.n4=~~(Fu(e.dark*100/(Wa*Wa)-50)/5)*10,n[t++]=R(e.n1+e.n2+e.n3+e.n4)},e.evalmicro=function(){e.sym=n[--t],e.dkrhs=0,e.dkbot=0;for(var lt=1,Ft=e.cols-1;lt<=Ft;lt+=1){e.i=lt,n[t++]="dkrhs",n[t++]=e.dkrhs,n[t++]=e.sym,n[t++]=e.cols-1,n[t++]=e.i,e.qmv();var jn=n[--t],si=h(n[--t],jn),dr=n[--t];e[n[--t]]=R(dr+si),n[t++]="dkbot",n[t++]=e.dkbot,n[t++]=e.sym,n[t++]=e.i,n[t++]=e.cols-1,e.qmv();var ca=n[--t],va=h(n[--t],ca),Fa=n[--t];e[n[--t]]=R(Fa+va)}e.dkrhs<=e.dkbot?n[t++]=-(e.dkrhs*16+e.dkbot):n[t++]=-(e.dkbot*16+e.dkrhs)},e.bestscore=999999999;for(var Pa=0,Un=e.masks.length-1;Pa<=Un;Pa+=1){e.m=Pa,e.masksym=o(e.rows*e.cols);for(var ni=0,hi=e.rows*e.cols-1;ni<=hi;ni+=1)e.i=ni,C(e.masksym,e.i,Ha(h(e.pixs,e.i),h(h(e.masks,e.m),e.i)));e.masks.length!=1?(ce(e.format,"full")?(n[t++]=e.masksym,e.evalfull(),e.score=n[--t]):(n[t++]=e.masksym,e.evalmicro(),e.score=n[--t]),e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}if(e.pixs=e.bestsym,ce(e.format,"full")){n[t++]=e.pixs,n[t++]=8,n[t++]=e.cols-8,e.qmv();var Wi=n[--t];C(n[--t],Wi,1)}if(e.fmtvalsfull=o([21522,20773,24188,23371,17913,16590,20375,19104,30660,29427,32170,30877,26159,25368,27713,26998,5769,5054,7399,6608,1890,597,3340,2107,13663,12392,16177,14854,9396,8579,11994,11245]),e.fmtvalsmicro=o([17477,16754,20011,19228,21934,20633,24512,23287,26515,25252,28157,26826,30328,29519,31766,31009,1758,1001,3248,2439,5941,4610,7515,6252,9480,8255,12134,10833,13539,12756,16013,15290]),e.fmtvalsrmqr1=o([129714,124311,121821,115960,112748,108361,104707,99878,98062,90155,89697,82244,81360,74485,72895,66458,61898,61167,53413,53120,45844,44081,37499,36190,29814,27475,21785,19004,13992,10637,6087,2274,258919,257090,250376,249133,242105,241308,233686,233459,227035,223742,219060,215185,209925,207648,202090,199247,194591,190266,186736,181845,178881,173540,170926,165003,163235,156294,154828,148457,147325,139352,138770,131383]),e.fmtvalsrmqr2=o([133755,136542,142100,144433,149669,153472,158154,161519,167879,168162,175784,176525,183577,184892,191606,193363,196867,204326,204908,212809,213981,220408,221874,228759,230591,236442,239056,244469,247393,252228,255758,260139,942,7307,8897,15844,16752,24149,24607,32570,34322,39223,42877,47192,50380,56297,58787,64134,67798,71667,76217,79516,84488,87341,93031,95298,101738,102991,109573,111392,118708,118929,126683,127486]),ce(e.format,"full")){e.ecid=h(o([1,0,3,2]),e.eclval),e.fmtval=h(e.fmtvalsfull,(e.ecid<<3)+e.bestmaskval);for(var Ri=0,er=e.formatmap.length-1;Ri<=er;Ri+=1)e.i=Ri,Ie(h(e.formatmap,e.i),function(){var lt=n[--t];n[t++]=e.pixs,W(lt),e.qmv();var Ft=e.fmtval,jn=-(14-e.i),si=n[--t];C(n[--t],si,(jn<0?Ft>>>-jn:Ft<<jn)&1)})}if(ce(e.format,"micro")){e.symid=h(h(o([o([0]),o([1,2]),o([3,4]),o([5,6,7])]),~~((e.cols-11)/2)),e.eclval),e.fmtval=h(e.fmtvalsmicro,(e.symid<<2)+e.bestmaskval);for(var Yi=0,Oi=e.formatmap.length-1;Yi<=Oi;Yi+=1){e.i=Yi,n[t++]=e.pixs,W(h(h(e.formatmap,e.i),0)),e.qmv();var Or=e.fmtval,Ya=-(14-e.i),bs=n[--t];C(n[--t],bs,(Ya<0?Or>>>-Ya:Or<<Ya)&1)}}if(ce(e.format,"rmqr")){e.fmtvalu=(h(o([-1,0,-1,1]),e.eclval)<<5)+e.verind,e.fmtval1=h(e.fmtvalsrmqr1,e.fmtvalu),e.fmtval2=h(e.fmtvalsrmqr2,e.fmtvalu);for(var Ts=0,Xs=e.formatmap.length-1;Ts<=Xs;Ts+=1){e.i=Ts,n[t++]=e.pixs,W(h(h(e.formatmap,e.i),0)),e.qmv();var Ms=e.fmtval1,Rs=-(17-e.i),ys=n[--t];C(n[--t],ys,(Rs<0?Ms>>>-Rs:Ms<<Rs)&1),n[t++]=e.pixs,W(h(h(e.formatmap,e.i),1)),e.qmv();var Os=e.fmtval2,Ds=-(17-e.i),ol=n[--t];C(n[--t],ol,(Ds<0?Os>>>-Ds:Os<<Ds)&1)}}if(e.vervals=o([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ce(e.format,"full")&&e.cols>=45){e.verval=h(e.vervals,~~((e.cols-17)/4)-7);for(var Eo=0,Ks=e.versionmap.length-1;Eo<=Ks;Eo+=1)e.i=Eo,Ie(h(e.versionmap,e.i),function(){var lt=n[--t];n[t++]=e.pixs,Ie(lt),e.qmv();var Ft=e.verval,jn=-(17-e.i),si=n[--t];C(n[--t],si,(jn<0?Ft>>>-jn:Ft<<jn)&1)})}n[t++]=1/0,n[t++]="ren",n[t++]="renmatrix",n[t++]="pixs",n[t++]=e.pixs,n[t++]="pixx",n[t++]=e.cols,n[t++]="pixy",n[t++]=e.rows,n[t++]="height",n[t++]=e.rows*2/72,n[t++]="width",n[t++]=e.cols*2/72,n[t++]="borderleft",ce(e.format,"full")?n[t++]=4:n[t++]=2,n[t++]="borderright",ce(e.format,"full")?n[t++]=4:n[t++]=2,n[t++]="bordertop",ce(e.format,"full")?n[t++]=4:n[t++]=2,n[t++]="borderbottom",ce(e.format,"full")?n[t++]=4:n[t++]=2,n[t++]="opt",n[t++]=e.options;var co=rt();n[t++]=co,e.dontdraw||Lt(),e=r}function bT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.barcode.length>997&&(n[t++]="bwipp.swissqrcodeBadLength#22347",n[t++]="Swiss QR Code input must not exceed 997 digits",Z()),C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,sf();var s=n[--t];if(e[n[--t]]=s,C(e.args,"opt",e.options),n[t++]=e.args,!e.dontdraw){he.save();var l=he.currpos();he.translate(l.x,l.y);var c=72/25.4;he.scale(c,c),he.save(),he.newpath(),he.moveto(0,0),he.lineto(46,0),he.lineto(46,46),he.lineto(0,46),he.closepath(),he.moveto(19.5,19.5),he.lineto(19.5,26.5),he.lineto(26.5,26.5),he.lineto(26.5,19.5),he.closepath(),he.clip(),he.save(),he.moveto(0,0);var d=46/h(e.args,"pixx")/2;he.scale(d,d),Lt(),he.restore(),he.restore(),he.translate(19.5,19.5);var f=7/83;he.scale(f,f),he.newpath(),he.moveto(6,6),he.lineto(6,77),he.lineto(77,77),he.lineto(77,6),he.closepath(),he.moveto(49,18),he.lineto(49,34),he.lineto(65,34),he.lineto(65,49),he.lineto(49,49),he.lineto(49,65),he.lineto(34,65),he.lineto(34,49),he.lineto(18,49),he.lineto(18,34),he.lineto(34,34),he.lineto(34,18),he.closepath(),he.setrgbcolor(0,0,0),he.fill(),he.restore()}e=r}function yT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"format","micro"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,sf();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function wT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"format","rmqr"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,sf();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function AT(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.mode=-1,e.sam=-1,e.parse=!1,e.parsefnc=!1,e.legacyencoder=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.maxicodeEmptyData#22566",n[t++]="The data must not be empty",Z()),e.mode!=-1&&(e.mode<2||e.mode>6)&&(n[t++]="bwipp.maxicodeBadMode#22570",n[t++]="Mode must be 2 to 6",Z()),e.sam!=-1){n[t++]=!0;for(var i=0;i<1;i++){var a=e.sam;if(a<12||a>88){n[t-1]=!1;break}var s=e.sam%10;if(s<2||s>8){n[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){n[t-1]=!1;break}}n[--t]||(n[t++]="bwipp.maxicodeBadSAM#22581",n[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 8 symbols',Z())}e.encoding="new",e.legacyencoder&&(e.encoding="legacy");var l=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=l,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var c=n[--t];if(e[n[--t]]=c,e.msglen=e.msg.length,e.mode==2||e.mode==3){e.barcode=fe(e.msglen),e.barlen=e.msglen;for(var d=0,f=e.msglen-1;d<=f;d+=1){if(e.i=d,h(e.msg,e.i)<0){e.barlen=e.i;break}C(e.barcode,e.i,h(e.msg,e.i))}if(e.difflen=e.msglen-e.barlen,e.fid="",e.barlen>=9){var m=e.barcode,g=h(m,7),v=h(m,8);ce(O(m,0,7),"[)>01")&&g>=48&&g<=57&&v>=48&&v<=57&&(e.fid=O(e.barcode,0,9),e.barcode=O(e.barcode,9,e.barlen-9))}if(sn(e.barcode,""),n[--t])if(e.pcode=n[--t],t--,e.mode==2){n[t++]=!0;for(var y=0;y<1;y++){var A=e.pcode.length;if(A>9||A==0){n[t-1]=!1;break}Ie(e.pcode,function(){var Gt=n[--t];if(Gt<48||Gt>57)return n[t-1]=!1,!0})}n[--t]||(t--,n[t++]="bwipp.maxicodeBadMode2PostCode#22635",n[t++]="A mode 2 postcode must not be empty or exceed 9 digits",Z())}else{n[t++]=!0;for(var w=0;w<1;w++){var k=e.pcode.length;if(k>6||k==0){n[t-1]=!1;break}Ie(e.pcode,function(){var Gt=n[--t];if(!(Gt==32||Gt>=34&&Gt<=58||Gt>=65&&Gt<=90))return n[t-1]=!1,!0})}n[--t]||(t--,n[t++]="bwipp.maxicodeBadMode3PostCode#22649",n[t++]="A mode 3 postcode must not be empty or exceed 6 characters",Z())}else t--,n[t++]="bwipp.maxicodeExpectedPostCode#22653",n[t++]="Expected postcode followed by group separator character",Z();if(sn(n[--t],""),n[--t]){e.ccode=n[--t],n[t-1]=!0;for(var E=0;E<1;E++){if(e.ccode.length!=3){n[t-1]=!1;break}Ie(e.ccode,function(){var Gt=n[--t];if(Gt<48||Gt>57)return n[t-1]=!1,!0})}n[--t]||(t--,n[t++]="bwipp.maxicodeBadCountryCode#22663",n[t++]="Country code must be three digits",Z())}else t--,n[t++]="bwipp.maxicodeExpectedCountryCode#22666",n[t++]="Expected country code followed by group separator character",Z();if(sn(n[--t],""),n[--t]){e.scode=n[--t],n[t-1]=!0;for(var I=0;I<1;I++){if(e.scode.length!=3){n[t-1]=!1;break}Ie(e.scode,function(){var Gt=n[--t];if(Gt<48||Gt>57)return n[t-1]=!1,!0})}n[--t]||(t--,n[t++]="bwipp.maxicodeBadServiceClass#22676",n[t++]="Service class must be three digits",Z())}else t--,n[t++]="bwipp.maxicodeExpectedServiceClass#22679",n[t++]="Expected service class followed by group separator character",Z();e.barcode=n[--t];var T=fe(e.barcode.length+e.fid.length);H(T,0,e.fid),H(T,e.fid.length,e.barcode),e.barcode=T,e.barlen=e.barcode.length,n[t++]=1/0;for(var N=e.barcode,j=0,B=N.length;j<B;j++)n[t++]=h(N,j);W(O(e.msg,e.msglen-e.difflen,e.difflen)),e.msg=o(),e.msglen=e.msg.length}e.eci=-1,e.pad=-2,e.ns=-3,e.la=-4,e.lb=-5,e.sa=-6,e.sb=-7,e.sc=-8,e.sd=-9,e.se=-10,e.sa2=-11,e.sa3=-12,e.lkc=-13,e.lkd=-14,e.lke=-15,e.pd2=-16,e.pd3=-17,e.charmaps=o([o([13,"`",192,224,0]),o(["A","a",193,225,1]),o(["B","b",194,226,2]),o(["C","c",195,227,3]),o(["D","d",196,228,4]),o(["E","e",197,229,5]),o(["F","f",198,230,6]),o(["G","g",199,231,7]),o(["H","h",200,232,8]),o(["I","i",201,233,9]),o(["J","j",202,234,10]),o(["K","k",203,235,11]),o(["L","l",204,236,12]),o(["M","m",205,237,13]),o(["N","n",206,238,14]),o(["O","o",207,239,15]),o(["P","p",208,240,16]),o(["Q","q",209,241,17]),o(["R","r",210,242,18]),o(["S","s",211,243,19]),o(["T","t",212,244,20]),o(["U","u",213,245,21]),o(["V","v",214,246,22]),o(["W","w",215,247,23]),o(["X","x",216,248,24]),o(["Y","y",217,249,25]),o(["Z","z",218,250,26]),o([e.eci,e.eci,e.eci,e.eci,e.eci]),o([28,28,28,28,e.pad]),o([29,29,29,29,e.pd2]),o([30,30,30,30,27]),o([e.ns,e.ns,e.ns,e.ns,e.ns]),o([" ","{",219,251,28]),o([e.pad,e.pad,220,252,29]),o(['"',"}",221,253,30]),o(["#","~",222,254,31]),o(["$",127,223,255,159]),o(["%",";",170,161,160]),o(["&","<",172,168,162]),o(["'","=",177,171,163]),o([40,">",178,175,164]),o([41,"?",179,176,165]),o(["*","[",181,180,166]),o(["+",92,185,183,167]),o([",","]",186,184,169]),o(["-","^",188,187,173]),o([".","_",189,191,174]),o(["/"," ",190,138,182]),o(["0",",",128,139,149]),o(["1",".",129,140,150]),o(["2","/",130,141,151]),o(["3",":",131,142,152]),o(["4","@",132,143,153]),o(["5","!",133,144,154]),o(["6","|",134,145,155]),o(["7",e.pd2,135,146,156]),o(["8",e.sa2,136,147,157]),o(["9",e.sa3,137,148,158]),o([":",e.pd3,e.la,e.la,e.la]),o([e.sb,e.sa," "," "," "]),o([e.sc,e.sc,e.lkc,e.sc,e.sc]),o([e.sd,e.sd,e.sd,e.lkd,e.sd]),o([e.se,e.se,e.se,e.se,e.lke]),o([e.lb,e.la,e.lb,e.lb,e.lb])]),e.charvals=o([new Map,new Map,new Map,new Map,new Map]);for(var U=0,F=e.charmaps.length-1;U<=F;U+=1){e.i=U,e.encs=h(e.charmaps,e.i);for(var P=0;P<=4;P+=1){e.j=P;var z=h(e.encs,e.j);if(n[t++]=z,ce(Ys(z),"stringtype")){var V=h(n[--t],0);n[t++]=V}C(h(e.charvals,e.j),n[--t],e.i)}}if(e.seta=h(e.charvals,0),e.setb=h(e.charvals,1),e.setc=h(e.charvals,2),e.setd=h(e.charvals,3),e.sete=h(e.charvals,4),n[t++]="maxlen",e.mode==5)n[t++]=77;else{var L=e.mode<=3?84:93;n[t++]=L}var Q=n[--t];if(e[n[--t]]=Q,ce(e.encoding,"legacy")){n[t++]=1/0;for(var q=0,ee=e.msglen+1;q<ee;q++)n[t++]=0;e.nseq=o();for(var X=e.msglen-1;X>=0;X-=1){e.i=X;var ae=h(e.msg,e.i);ae>=48&&ae<=57?C(e.nseq,e.i,h(e.nseq,e.i+1)+1):C(e.nseq,e.i,0)}for(e.nseq=O(e.nseq,0,e.msglen),e.prefixinset=function(){for(n[t++]=0;;){var Gt=n[t-1],qi=n[t-2];if(Gt>=qi.length)break;var Zi=n[t-1],ia=n[t-2],cr=n[t-3],ma=h(cr,h(ia,Zi))!==void 0;if(ma){var Ma=n[--t];n[t++]=Ma+1}else break}var Ns=n[--t];n[t-1]=Ns;var Nt=n[--t];n[t-1]=Nt},e.enc=function(){var Gt=n[--t];C(e.out,e.j,h(Gt,n[--t])),e.j=e.j+1},e.out=o(144),e.i=0,e.j=0,e.cset="seta";;){if(e.i==e.msglen){qe(e.cset,"seta")&&qe(e.cset,"setb")&&e.out.length<e.maxlen&&(n[t++]=e.la,n[t++]=e[e.cset],e.enc(),e.cset="seta");break}for(;;){if(h(e.msg,e.i)<=-1e6){n[t++]=e.eci,n[t++]=e[e.cset],e.enc();var K=-h(e.msg,e.i)-1e6;if(n[t++]=K,K<=31){var ie=n[--t];n[t++]=ie&63,Rn(o(1))}else{var ne=n[t-1];if(ne<=1023){var J=n[--t];n[t++]=J>>>6&31|32,n[t++]=J&63,Rn(o(2))}else{var te=n[t-1];if(te<=32767){var $=n[--t];n[t++]=$>>>12&47|48,n[t++]=$>>>6&63,n[t++]=$&63,Rn(o(3))}else{var oe=n[--t];n[t++]=oe>>>18&55|56,n[t++]=oe>>>12&63,n[t++]=oe>>>6&63,n[t++]=oe&63,Rn(o(4))}}}var we=n[--t];H(e.out,e.j,we),e.j=we.length+e.j,e.i=e.i+1;break}if(h(e.nseq,e.i)>=9){var be=O(e.msg,e.i,9);n[t++]=0;for(var Te=0,ye=be.length;Te<ye;Te++){var tt=n[--t];n[t++]=R(tt+(h(be,Te)-48))*10}var Qe=n[--t];n[t++]=~~(Qe/10);for(var Ge=0;Ge<4;Ge++){var Xe=n[--t];n[t++]=Xe&63,n[t++]=Xe>>>6}n[t++]=h(e[e.cset],e.ns);for(var Je=0;Je<=10;Je+=2){var dt=n[t-1-Je];n[t++]=dt}Rn(o(6)),oa(7,1);for(var vt=0;vt<6;vt++)t--;H(e.out,e.j,n[--t]),e.i=e.i+9,e.j=e.j+6;break}e.char1=h(e.msg,e.i),n[t++]="char2",e.i+1<e.msglen?n[t++]=h(e.msg,e.i+1):n[t++]=-99;var _t=n[--t];e[n[--t]]=_t,n[t++]="char3",e.i+2<e.msglen?n[t++]=h(e.msg,e.i+2):n[t++]=-99;var xt=n[--t];e[n[--t]]=xt;var bt=h(e[e.cset],e.char1)!==void 0;if(bt){n[t++]=e.char1,n[t++]=e[e.cset],e.enc(),e.i=e.i+1;break}var kt=h(e.setb,e.char1)!==void 0;if(ce(e.cset,"seta")&&kt){var Pt=h(e.setb,e.char2)!==void 0;Pt?(n[t++]=e.lb,n[t++]=e.seta,e.enc(),e.cset="setb"):(n[t++]=e.sb,n[t++]=e.seta,e.enc(),n[t++]=e.char1,n[t++]=e.setb,e.enc(),e.i=e.i+1);break}var Rt=h(e.seta,e.char1)!==void 0;if(ce(e.cset,"setb")&&Rt){var Wt=e.seta,zt=e.msg,Ct=e.i,Yt=e.msglen,jt=e.i,an=Yt-jt,rn=4;if(4>Yt-jt){var Kt=an;an=rn,rn=Kt}n[t++]="p",n[t++]=Wt,n[t++]=O(zt,Ct,rn),e.prefixinset();var Jt=n[--t];e[n[--t]]=Jt,e.p==1&&(n[t++]=e.sa,n[t++]=e.setb,e.enc(),n[t++]=e.char1,n[t++]=e.seta,e.enc(),e.i=e.i+1),e.p==2&&(n[t++]=e.sa2,n[t++]=e.setb,e.enc(),n[t++]=e.char1,n[t++]=e.seta,e.enc(),n[t++]=e.char2,n[t++]=e.seta,e.enc(),e.i=e.i+2),e.p==3&&(n[t++]=e.sa3,n[t++]=e.setb,e.enc(),n[t++]=e.char1,n[t++]=e.seta,e.enc(),n[t++]=e.char2,n[t++]=e.seta,e.enc(),n[t++]=e.char3,n[t++]=e.seta,e.enc(),e.i=e.i+3),e.p>=4&&(n[t++]=e.la,n[t++]=e.setb,e.enc(),e.cset="seta");break}var Zt=h(e.seta,e.char1)!==void 0;if(Zt){n[t++]=e.la,n[t++]=e[e.cset],e.enc(),e.cset="seta";break}var Qt=h(e.setb,e.char1)!==void 0;if(Qt){n[t++]=e.lb,n[t++]=e[e.cset],e.enc(),e.cset="setb";break}var mn=h(e.setc,e.char1)!==void 0;mn&&(e.setx="setc",e.sx=e.sc,e.lkx=e.lkc);var cn=h(e.setd,e.char1)!==void 0;cn&&(e.setx="setd",e.sx=e.sd,e.lkx=e.lkd);var dn=h(e.sete,e.char1)!==void 0;dn&&(e.setx="sete",e.sx=e.se,e.lkx=e.lke);var Ht=e[e.setx],Bt=e.msg,Y=e.i,le=e.msglen,se=e.i,ge=le-se,ve=4;if(4>le-se){var Kt=ge;ge=ve,ve=Kt}n[t++]="p",n[t++]=Ht,n[t++]=O(Bt,Y,ve),e.prefixinset();var _e=n[--t];e[n[--t]]=_e,e.p==1&&(n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.char1,n[t++]=e[e.setx],e.enc(),e.i=e.i+1),e.p==2&&(n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.char1,n[t++]=e[e.setx],e.enc(),n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.char2,n[t++]=e[e.setx],e.enc(),e.i=e.i+2),e.p==3&&(n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.char1,n[t++]=e[e.setx],e.enc(),n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.char2,n[t++]=e[e.setx],e.enc(),n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.char3,n[t++]=e[e.setx],e.enc(),e.i=e.i+3),e.p>=4&&(n[t++]=e.sx,n[t++]=e[e.cset],e.enc(),n[t++]=e.lkx,n[t++]=e[e.setx],e.enc(),e.cset=e.setx);break}}e.encmsg=O(e.out,0,e.j),e.padval=h(e[e.cset],e.pad)}if(ce(e.encoding,"new")){e.haveb=!1,e.havec=!1,e.haved=!1,e.havee=!1,e.havei=!1;for(var pe=0,Oe=e.msglen-1;pe<=Oe;pe+=1)if(e.c=h(e.msg,pe),e.c<=-1e6)e.havei=!0;else if((e.c<28||e.c>30)&&e.c!=32){var de=h(e.setb,e.c)!==void 0;de&&(e.haveb=!0);var ke=h(e.setc,e.c)!==void 0;ke&&(e.havec=!0);var Ee=h(e.setd,e.c)!==void 0;Ee&&(e.haved=!0);var De=h(e.sete,e.c)!==void 0;De&&(e.havee=!0)}n[t++]=1/0,n[t++]=0,e.haveb&&(n[t++]=1),e.havee&&(n[t++]=4),e.havec&&(n[t++]=2),e.haved&&(n[t++]=3),e.priority=o(),e.priority_rest=O(e.priority,1,e.priority.length-1),e.latch_sequence=o([o([o([]),o([63]),o([58]),o([58]),o([58])]),o([o([63]),o([]),o([63]),o([63]),o([63])]),o([o([60,60]),o([60,60]),o([]),o([60,60]),o([60,60])]),o([o([61,61]),o([61,61]),o([61,61]),o([]),o([61,61])]),o([o([62,62]),o([62,62]),o([62,62]),o([62,62]),o([])])]),e.latch_length=o([o([0,1,1,1,1]),o([1,0,1,1,1]),o([2,2,0,2,2]),o([2,2,2,0,2]),o([2,2,2,2,0])]),e.max_int=2147483647,n[t++]=1/0;for(var xe=0;xe<16;xe++)n[t++]=o([0,0,0,0,0]);e.best_length=o(),n[t++]=1/0;for(var Ne=0;Ne<16;Ne++)n[t++]=o([0,0,0,0,0]);e.best_origin=o(),n[t++]=1/0;for(var je=0,Se=e.msglen;je<Se;je++){n[t++]=1/0;for(var ze=0;ze<5;ze++)n[t++]=0;var Pe=o();n[t++]=Pe}e.prior_code_set=o(),n[t++]=1/0;for(var Be=0,at=e.msglen;Be<at;Be++){n[t++]=1/0;for(var Ze=0;Ze<5;Ze++)n[t++]=0;var ft=o();n[t++]=ft}if(e.path_op=o(),e.out_eci=function(){var Gt=-e.c-1e6;if(n[t++]=Gt,Gt<1024){var qi=n[--t]<32?2:3;n[t++]=qi}else{var Zi=n[--t]<32768?4:5;n[t++]=Zi}},e.enc_eci=function(){var Gt=-e.c-1e6;if(n[t++]=Gt,Gt>=32){var qi=n[t-1];if(qi<1024){var Zi=n[--t];n[t++]=Zi>>>6|32,n[t++]=Zi&63}else{var ia=n[t-1];if(ia<32768){var cr=n[--t];n[t++]=cr>>>12|48,n[t++]=cr>>>6&63,n[t++]=cr&63}else{var ma=n[--t];n[t++]=ma>>>18|56,n[t++]=ma>>>12&63,n[t++]=ma>>>6&63,n[t++]=ma&63}}}},e.enc_ns=function(){var Gt=O(e.msg,e.n,9);n[t++]=0;for(var qi=0,Zi=Gt.length;qi<Zi;qi++){var ia=n[--t];n[t++]=R(h(Gt,qi)-48+ia*10)}var cr=n[--t];n[t++]=cr>>>24,n[t++]=cr>>>18&63,n[t++]=cr>>>12&63,n[t++]=cr>>>6&63,n[t++]=cr&63},e.enc_sha2=function(){n[t++]=h(e.seta,e.c),n[t++]=h(e.seta,h(e.msg,e.n+1))},e.enc_sha3=function(){n[t++]=h(e.seta,e.c),n[t++]=h(e.seta,h(e.msg,e.n+1)),n[t++]=h(e.seta,h(e.msg,e.n+2))},n[t++]=1/0,e.havei){var Ve=new Map([["can",function(){n[t++]=e.c<=-1e6}],["intake",1],["output",function(){e.out_eci()}],["sets",31],["enc",function(){n[t++]=27,e.enc_eci()}]]);n[t++]=Ve}var $e=new Map([["can",function(){n[t++]=e.digits>=9}],["intake",9],["output",function(){n[t++]=6}],["sets",31],["enc",function(){n[t++]=31,e.enc_ns()}]]),Me=new Map([["can",function(){var Gt=h(e.seta,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=1}],["sets",1],["enc",function(){n[t++]=h(e.seta,e.c)}]]);if(n[t++]=$e,n[t++]=Me,e.haveb){var it=new Map([["can",function(){var Gt=h(e.setb,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=1}],["sets",2],["enc",function(){n[t++]=h(e.setb,e.c)}]]);n[t++]=it}if(e.havec){var st=new Map([["can",function(){var Gt=h(e.setc,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=1}],["sets",4],["enc",function(){n[t++]=h(e.setc,e.c)}]]);n[t++]=st}if(e.haved){var mt=new Map([["can",function(){var Gt=h(e.setd,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=1}],["sets",8],["enc",function(){n[t++]=h(e.setd,e.c)}]]);n[t++]=mt}if(e.havee){var Tt=new Map([["can",function(){var Gt=h(e.sete,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=1}],["sets",16],["enc",function(){n[t++]=h(e.sete,e.c)}]]);n[t++]=Tt}var Ot=new Map([["can",function(){n[t++]=e.num_a>=1}],["intake",1],["output",function(){n[t++]=2}],["sets",2],["enc",function(){n[t++]=59,n[t++]=h(e.seta,e.c)}]]),Et=new Map([["can",function(){n[t++]=e.num_a>=2}],["intake",2],["output",function(){n[t++]=3}],["sets",2],["enc",function(){n[t++]=56,e.enc_sha2()}]]),Dt=new Map([["can",function(){n[t++]=e.num_a>=3}],["intake",3],["output",function(){n[t++]=4}],["sets",2],["enc",function(){n[t++]=57,e.enc_sha3()}]]);if(n[t++]=Ot,n[t++]=Et,n[t++]=Dt,e.haveb){var wt=new Map([["can",function(){var Gt=h(e.setb,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=2}],["sets",1],["enc",function(){n[t++]=59,n[t++]=h(e.setb,e.c)}]]);n[t++]=wt}if(e.havec){var en=new Map([["can",function(){var Gt=h(e.setc,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=2}],["sets",27],["enc",function(){n[t++]=60,n[t++]=h(e.setc,e.c)}]]);n[t++]=en}if(e.haved){var gt=new Map([["can",function(){var Gt=h(e.setd,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=2}],["sets",23],["enc",function(){n[t++]=61,n[t++]=h(e.setd,e.c)}]]);n[t++]=gt}if(e.havee){var un=new Map([["can",function(){var Gt=h(e.sete,e.c)!==void 0;n[t++]=Gt}],["intake",1],["output",function(){n[t++]=2}],["sets",15],["enc",function(){n[t++]=62,n[t++]=h(e.sete,e.c)}]]);n[t++]=un}e.op_tab=o();var Vt=e.op_tab;n[t++]=0;for(var fn=0,$n=Vt.length;fn<$n;fn++){var ei=n[--t];C(h(Vt,fn),"idx",ei),n[t++]=ei+1}n[t-1]=1/0;for(var Dn=o([1,2,4,8,16]),ai=0,zn=Dn.length;ai<zn;ai++){e.n=h(Dn,ai),n[t++]=1/0;for(var mi=e.op_tab,Fn=0,Hn=mi.length;Fn<Hn;Fn++){var _n=h(mi,Fn);n[t++]=_n,_d(h(_n,"sets"),e.n)==0&&t--}var vn=o();n[t++]=vn}e.code_set_operations=o(),e.get_best_length=function(){e.latch_length_s=h(e.latch_length,e.state),n[t++]=e.max_int,Ie(h(e.code_set_operations,e.state),function(){if(e.op=n[--t],h(e.op,"can")()===!0)return!0;if(n[--t]){if(e.m=R(e.n-h(e.op,"intake"))&15,e.org=h(h(e.best_origin,e.m),e.state),n[t++]=R(h(h(e.best_length,e.m),e.org)+h(e.latch_length_s,e.org)),h(e.op,"output")()===!0)return!0;var Gt=n[--t],qi=n[--t],Zi=n[t-1];if(n[t++]=R(qi+Gt),Zi>R(qi+Gt)){var ia=n[--t],cr=n[--t];C(e.path_op_0,e.state,h(e.op,"idx")),C(e.prior_code_set_0,e.state,e.org),n[t++]=ia,n[t++]=cr}t--}})},e.get_best_origin=function(){e.latch_length_s=h(e.latch_length,e.state),e.orglen=R(h(e.best_length_0,0)+h(e.latch_length_s,0));var Gt=e.priority_rest;n[t++]=0;for(var qi=0,Zi=Gt.length;qi<Zi;qi++){e.p=h(Gt,qi);var ia=R(h(e.best_length_0,e.p)+h(e.latch_length_s,e.p));n[t++]=ia,ia<e.orglen?(e.orglen=n[--t],n[t-1]=e.p):t--}},e.digits=0,e.num_a=0;for(var kn=0,Ai=e.msglen-1;kn<=Ai;kn+=1){e.n=kn,e.c=h(e.msg,e.n),n[t++]="digits",e.c>=48&&e.c<58?n[t++]=e.digits+1:n[t++]=0;var Ei=n[--t];e[n[--t]]=Ei;var Ji=h(e.seta,e.c)!==void 0;n[t++]="num_a",Ji?n[t++]=e.num_a+1:n[t++]=0;var nn=n[--t];e[n[--t]]=nn,e.path_op_0=h(e.path_op,e.n),e.prior_code_set_0=h(e.prior_code_set,e.n),e.best_length_0=h(e.best_length,e.n&15),e.best_origin_0=h(e.best_origin,e.n&15);for(var yn=e.priority,qn=0,Tn=yn.length;qn<Tn;qn++){e.state=h(yn,qn),n[t++]=e.best_length_0,n[t++]=e.state,e.get_best_length();var Gn=n[--t],gi=n[--t];C(n[--t],gi,Gn)}for(var Vn=e.priority,ln=0,ti=Vn.length;ln<ti;ln++){e.state=h(Vn,ln),n[t++]=e.best_origin_0,n[t++]=e.state,e.get_best_origin();var Qi=n[--t],Bi=n[--t];C(n[--t],Bi,Qi)}}e.n=e.msglen;var Ir=e.priority;n[t++]=0,n[t++]=e.max_int;for(var _i=0,Nr=Ir.length;_i<Nr;_i++){var rr=h(Ir,_i),Zr=h(e.best_length_0,rr),ar=n[t-1];n[t++]=rr,n[t++]=Zr,oo(Zr,ar)&&oa(4,2),t-=2}e.j=n[--t],e.state=n[--t],e.pad_code=o([33,33,0,0,28]),n[t++]="final_code_set",h(e.pad_code,e.state)==0?n[t++]=0:n[t++]=e.state;var sr=n[--t];if(e[n[--t]]=sr,h(e.pad_code,e.state)==0&&oo(e.j,e.maxlen)){var Pi=o(e.j+1);C(Pi,e.j,58),n[t++]=Pi}else n[t++]=o(e.j);for(e.padval=h(e.pad_code,e.final_code_set),e.len=e.j;!(e.n<=0||(e.pcs=h(h(e.prior_code_set,e.n-1),e.state),e.op_idx=h(h(e.path_op,e.n-1),e.state),e.op=h(e.op_tab,e.op_idx),e.n=R(e.n-h(e.op,"intake")),e.c=h(e.msg,e.n),e.enc=h(e.op,"enc"),n[t++]=1/0,e.enc()===!0));){e.output=o(),e.latch=h(h(e.latch_sequence,e.state),e.pcs),e.len=R(e.len-e.latch.length-e.output.length);var hr=n[--t],Lr=e.len,pr=e.latch;H(hr,Lr,pr),H(hr,R(Lr+pr.length),e.output),e.state=e.pcs,n[t++]=hr}e.encmsg=n[--t]}n[t++]="sami",e.sam!=-1?n[t++]=o([h(e.seta,e.pad),(~~(e.sam/10)-1)*8+(e.sam%10-1)]):n[t++]=o([]);var xr=n[--t];if(e[n[--t]]=xr,n[t++]=1/0,W(e.sami),W(e.encmsg),e.encmsg=o(),e.mode==2||e.mode==3){e.encmsg.length>84&&(n[t++]="bwipp.maxicodeMode23TooLong#23176",n[t++]="The secondary message is too long",Z());var wa=zi(fe(4),"0000"),br=Nn(fe(4),~~e.mode,2);H(wa,4-br.length,br),e.mdb=wa;var Ba=zi(fe(10),"0000000000"),yr=Nn(fe(10),Ye(e.ccode),2);H(Ba,10-yr.length,yr),e.ccb=Ba;var zr=zi(fe(10),"0000000000"),Tr=Nn(fe(10),Ye(e.scode),2);if(H(zr,10-Tr.length,Tr),e.scb=zr,e.pcb=zi(fe(36),"000000000000000000000000000000000000"),e.mode==2){if(ce(e.ccode,"840")&&e.pcode.length==5){var ea=zi(fe(9),"     0000");H(ea,0,e.pcode),e.pcode=ea}var Hr=Nn(fe(6),e.pcode.length,2);H(e.pcb,6-Hr.length,Hr);var _a=Nn(fe(30),Ye(e.pcode),2);H(e.pcb,36-_a.length,_a)}else{n[t++]=1/0;var qr=zi(fe(6),"      ");n[t++]=qr,n[t++]=qr,n[t++]=0,e.pcode.length>6?n[t++]=O(e.pcode,0,6):n[t++]=e.pcode;var Va=n[--t],Gr=n[--t];H(n[--t],Gr,Va),Ie(n[--t],function(){var Gt=h(e.seta,n[--t]);n[t++]=Gt}),e.pccw=o();for(var la=0;la<=5;la+=1){e.i=la;var Vr=Nn(fe(6),h(e.pccw,e.i),2);H(e.pcb,6*e.i+6-Vr.length,Vr)}}e.scm=fe(60),H(e.scm,2,e.mdb),H(e.scm,38,O(e.pcb,0,4)),H(e.scm,30,O(e.pcb,4,6)),H(e.scm,24,O(e.pcb,10,6)),H(e.scm,18,O(e.pcb,16,6)),H(e.scm,12,O(e.pcb,22,6)),H(e.scm,6,O(e.pcb,28,6)),H(e.scm,0,O(e.pcb,34,2)),H(e.scm,52,O(e.ccb,0,2)),H(e.scm,42,O(e.ccb,2,6)),H(e.scm,36,O(e.ccb,8,2)),H(e.scm,54,O(e.scb,0,6)),H(e.scm,48,O(e.scb,6,4)),e.pri=o([0,0,0,0,0,0,0,0,0,0]);for(var wr=0;wr<=59;wr+=1)e.i=wr,e.ps=~~(e.i/6),e.ep=~~El(2,5-e.i%6)*(h(e.scm,e.i)-48),C(e.pri,e.ps,R(h(e.pri,e.ps)+e.ep));n[t++]=1/0;for(var or=0;or<84;or++)n[t++]=e.padval;e.sec=o(),H(e.sec,0,e.encmsg)}if(e.mode==4||e.mode==5||e.mode==6||e.mode==-1){if(e.mode==-1){var ds=e.encmsg.length<=77?5:4;e.mode=ds}n[t++]=1/0;for(var lr=e.mode==5?78:94,us=0,Mr=lr;us<Mr;us++)n[t++]=e.padval;e.cws=o(),e.encmsg.length>e.cws.length-1&&(n[t++]="bwipp.maxicodeMode56TooLong#23243",n[t++]="The message is too long",Z()),C(e.cws,0,e.mode),H(e.cws,1,e.encmsg),e.pri=O(e.cws,0,10),e.sec=O(e.cws,10,e.cws.length-10)}n[t++]=1/0,n[t++]=1;for(var es=0;es<63;es++){var Yr=n[t-1],Mn=Yr*2;if(n[t++]=Mn,Mn>=64){var Hi=n[--t];n[t++]=Hi^67}}e.rsalog=o(),e.rslog=o(64);for(var Rr=1;Rr<=63;Rr+=1)C(e.rslog,h(e.rsalog,Rr),Rr);e.rsprod=function(){var Gt=n[t-1],qi=n[t-2];if(Gt!=0&&qi!=0){var Zi=h(e.rslog,n[--t]),ia=h(e.rsalog,R(Zi+h(e.rslog,n[--t]))%63);n[t++]=ia}else t-=2,n[t++]=0},e.rscodes=function(){e.rsnum=n[--t],e.cwb=n[--t],n[t++]=1/0,n[t++]=1;for(var Gt=0,qi=e.rsnum;Gt<qi;Gt++)n[t++]=0;e.coeffs=o();for(var Zi=1,ia=e.rsnum;Zi<=ia;Zi+=1){e.i=Zi,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var cr=e.i-1;cr>=1;cr-=1){e.j=cr,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var ma=n[--t],Ma=n[--t],Ns=n[--t];C(n[--t],Ns,Ha(Ma,ma))}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var Nt=n[--t],$t=n[--t];C(n[--t],$t,Nt)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1),n[t++]=1/0;for(var Yn=0,Kn=e.rsnum;Yn<Kn;Yn++)n[t++]=0;e.ecb=o();for(var Jn=0,Si=e.cwb.length-1;Jn<=Si;Jn+=1){e.t=Ha(h(e.cwb,Jn),h(e.ecb,0));for(var Wn=e.ecb.length-1;Wn>=0;Wn-=1){e.i=Wn,e.p=e.ecb.length-e.i-1,n[t++]=e.ecb,n[t++]=e.p,n[t++]=e.t,n[t++]=h(e.coeffs,e.i),e.rsprod();var $i=n[--t],Ii=n[--t];C(n[--t],Ii,$i),e.i>0&&C(e.ecb,e.p,Ha(h(e.ecb,e.p+1),h(e.ecb,e.p)))}}n[t++]=e.ecb},n[t++]=1/0;for(var ta=0,Ia=e.sec.length-1;ta<=Ia;ta+=2)n[t++]=h(e.sec,ta);e.seco=o(),n[t++]=1/0;for(var Ci=1,Aa=e.sec.length-1;Ci<=Aa;Ci+=2)n[t++]=h(e.sec,Ci);e.sece=o();var Na=e.sec.length==84?20:28;e.scodes=Na,n[t++]="secochk",n[t++]=e.seco,n[t++]=e.scodes,e.rscodes();var na=n[--t];e[n[--t]]=na,n[t++]="secechk",n[t++]=e.sece,n[t++]=e.scodes,e.rscodes();var $s=n[--t];e[n[--t]]=$s,n[t++]=1/0;for(var Qr=0,Co=e.scodes-1;Qr<=Co;Qr+=1)n[t++]=h(e.secochk,Qr),n[t++]=h(e.secechk,Qr);e.secchk=o(),n[t++]=1/0,W(e.pri),n[t++]=e.pri,n[t++]=10,e.rscodes(),W(n[--t]),W(e.sec),W(e.secchk),e.codewords=o();var ts=h(e.options,"debugcws")!==void 0;ts&&(n[t++]="bwipp.debugcws#23325",n[t++]=e.codewords,Z()),n[t++]=1/0;for(var $r=0;$r<864;$r++)n[t++]=0;e.mods=o();for(var Ws=0;Ws<=143;Ws+=1){e.i=Ws,n[t++]=1/0;for(var pa=Nn(fe(6),h(e.codewords,e.i),2),gs=0,Ta=pa.length;gs<Ta;gs++)n[t++]=h(pa,gs)-48;e.cw=o(),H(e.mods,6*e.i+(6-e.cw.length),e.cw)}e.modmap=o([469,529,286,316,347,346,673,672,703,702,647,676,283,282,313,312,370,610,618,379,378,409,408,439,705,704,559,589,588,619,458,518,640,701,675,674,285,284,315,314,310,340,531,289,288,319,349,348,456,486,517,516,471,470,369,368,399,398,429,428,549,548,579,578,609,608,649,648,679,678,709,708,639,638,669,668,699,698,279,278,309,308,339,338,381,380,411,410,441,440,561,560,591,590,621,620,547,546,577,576,607,606,367,366,397,396,427,426,291,290,321,320,351,350,651,650,681,680,711,710,1,0,31,30,61,60,3,2,33,32,63,62,5,4,35,34,65,64,7,6,37,36,67,66,9,8,39,38,69,68,11,10,41,40,71,70,13,12,43,42,73,72,15,14,45,44,75,74,17,16,47,46,77,76,19,18,49,48,79,78,21,20,51,50,81,80,23,22,53,52,83,82,25,24,55,54,85,84,27,26,57,56,87,86,117,116,147,146,177,176,115,114,145,144,175,174,113,112,143,142,173,172,111,110,141,140,171,170,109,108,139,138,169,168,107,106,137,136,167,166,105,104,135,134,165,164,103,102,133,132,163,162,101,100,131,130,161,160,99,98,129,128,159,158,97,96,127,126,157,156,95,94,125,124,155,154,93,92,123,122,153,152,91,90,121,120,151,150,181,180,211,210,241,240,183,182,213,212,243,242,185,184,215,214,245,244,187,186,217,216,247,246,189,188,219,218,249,248,191,190,221,220,251,250,193,192,223,222,253,252,195,194,225,224,255,254,197,196,227,226,257,256,199,198,229,228,259,258,201,200,231,230,261,260,203,202,233,232,263,262,205,204,235,234,265,264,207,206,237,236,267,266,297,296,327,326,357,356,295,294,325,324,355,354,293,292,323,322,353,352,277,276,307,306,337,336,275,274,305,304,335,334,273,272,303,302,333,332,271,270,301,300,331,330,361,360,391,390,421,420,363,362,393,392,423,422,365,364,395,394,425,424,383,382,413,412,443,442,385,384,415,414,445,444,387,386,417,416,447,446,477,476,507,506,537,536,475,474,505,504,535,534,473,472,503,502,533,532,455,454,485,484,515,514,453,452,483,482,513,512,451,450,481,480,511,510,541,540,571,570,601,600,543,542,573,572,603,602,545,544,575,574,605,604,563,562,593,592,623,622,565,564,595,594,625,624,567,566,597,596,627,626,657,656,687,686,717,716,655,654,685,684,715,714,653,652,683,682,713,712,637,636,667,666,697,696,635,634,665,664,695,694,633,632,663,662,693,692,631,630,661,660,691,690,721,720,751,750,781,780,723,722,753,752,783,782,725,724,755,754,785,784,727,726,757,756,787,786,729,728,759,758,789,788,731,730,761,760,791,790,733,732,763,762,793,792,735,734,765,764,795,794,737,736,767,766,797,796,739,738,769,768,799,798,741,740,771,770,801,800,743,742,773,772,803,802,745,744,775,774,805,804,747,746,777,776,807,806,837,836,867,866,897,896,835,834,865,864,895,894,833,832,863,862,893,892,831,830,861,860,891,890,829,828,859,858,889,888,827,826,857,856,887,886,825,824,855,854,885,884,823,822,853,852,883,882,821,820,851,850,881,880,819,818,849,848,879,878,817,816,847,846,877,876,815,814,845,844,875,874,813,812,843,842,873,872,811,810,841,840,871,870,901,900,931,930,961,960,903,902,933,932,963,962,905,904,935,934,965,964,907,906,937,936,967,966,909,908,939,938,969,968,911,910,941,940,971,970,913,912,943,942,973,972,915,914,945,944,975,974,917,916,947,946,977,976,919,918,949,948,979,978,921,920,951,950,981,980,923,922,953,952,983,982,925,924,955,954,985,984,927,926,957,956,987,986,58,89,88,118,149,148,178,209,208,238,269,268,298,329,328,358,389,388,418,449,448,478,509,508,538,569,568,598,629,628,658,689,688,718,749,748,778,809,808,838,869,868,898,929,928,958,989,988]),e.pixs=o(864),e.j=0;for(var vs=0,xs=e.mods.length-1;vs<=xs;vs+=1)e.i=vs,h(e.mods,e.i)==1&&(C(e.pixs,e.j,h(e.modmap,e.i)),e.j=e.j+1);n[t++]=1/0,W(O(e.pixs,0,e.j)),n[t++]=28,n[t++]=29,n[t++]=280,n[t++]=281,n[t++]=311,n[t++]=457,n[t++]=488,n[t++]=500,n[t++]=530,n[t++]=670,n[t++]=700,n[t++]=677,n[t++]=707,e.pixs=o();var lo=new Map([["ren","renmaximatrix"],["pixs",e.pixs],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);n[t++]=lo,e.dontdraw||iM(),e=r}function Sx(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.format="full",e.readerinit=!1,e.layers=-1,e.eclevel=23,e.ecaddchars=3,e.raw=!1,e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.aztecEmptyData#23462",n[t++]="The data must not be empty",Z()),(e.eclevel<5||e.eclevel>95)&&(n[t++]="bwipp.aztecInvalidEClevel#23466",n[t++]="The EC percentage must be from 5 to 95",Z()),e.ecaddchars<3&&(n[t++]="bwipp.aztecInvalidECaddChars#23470",n[t++]="The number of additional EC codewords must be 3 or more",Z()),qe(e.format,"full")&&qe(e.format,"compact")&&qe(e.format,"rune")&&(n[t++]="bwipp.aztecInvalidFormat#23474",n[t++]="The format must be either full, compact or rune",Z()),ce(e.format,"full")&&(e.readerinit&&(e.layers<1||e.layers>22)&&(n[t++]="bwipp.aztecFullInitInvalidLayers#23479",n[t++]="Full-range symbols for reader programming must specify from 1 to 22 layers",Z()),e.layers!=-1&&(e.layers<1||e.layers>32)&&(n[t++]="bwipp.aztecFullInvalidLayers#23482",n[t++]="Layers for full-range symbols must be from 1 to 32",Z())),ce(e.format,"compact")&&(e.readerinit&&(e.layers!=-1&&e.layers!=1&&(n[t++]="bwipp.aztecCompactInitInvalidLayers#23489",n[t++]="Compact symbols for reader programming must have 1 layer",Z()),e.layers=1),e.layers!=-1&&(e.layers<1||e.layers>4)&&(n[t++]="bwipp.aztecCompactInvalidLayers#23494",n[t++]="Layers for compact symbols must be from 1 to 4",Z())),ce(e.format,"rune")){e.layers!=-1&&(n[t++]="bwipp.aztecRuneInvalidLayers#23500",n[t++]="It is not valid to specify layers for runes",Z()),e.readerinit&&(n[t++]="bwipp.aztecRuneReaderInit#23503",n[t++]="Reader initialisation is not compactible with Aztec Runes",Z()),e.barcode.length==0&&(n[t++]="bwipp.aztecRuneNotNumeric#23506",n[t++]="Aztec runes must be numeric",Z()),Ie(e.barcode,function(){var ve=n[--t];(ve<48||ve>57)&&(n[t++]="bwipp.aztecRuneNotNumeric#23510",n[t++]="Aztec runes must be numeric",Z())});var i=Ye(e.barcode);(i<0||i>255)&&(n[t++]="bwipp.aztecRuneInvalid#23514",n[t++]="Aztec runes must be 0 to 255",Z())}e.fn1=-1;var a=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1]]);e.fncvals=a,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var s=n[--t];e[n[--t]]=s,e.msglen=e.msg.length,e.U=0,e.L=1,e.M=2,e.P=3,e.D=4,e.B=5,e.lu=-2,e.ll=-3,e.lm=-4,e.lp=-5,e.ld=-6,e.su=-7,e.sp=-8,e.sb=-9,e.fl=-10,e.p2=-11,e.p3=-12,e.p4=-13,e.p5=-14,e.charmaps=o([o([e.sp,e.sp,e.sp,e.fl,e.sp]),o([32,32,32,13,32]),o(["A","a",1,e.p2,"0"]),o(["B","b",2,e.p3,"1"]),o(["C","c",3,e.p4,"2"]),o(["D","d",4,e.p5,"3"]),o(["E","e",5,"!","4"]),o(["F","f",6,'"',"5"]),o(["G","g",7,"#","6"]),o(["H","h",8,"$","7"]),o(["I","i",9,"%","8"]),o(["J","j",10,"&","9"]),o(["K","k",11,"'",","]),o(["L","l",12,40,"."]),o(["M","m",13,41,e.lu]),o(["N","n",27,"*",e.su]),o(["O","o",28,"+",-99]),o(["P","p",29,",",-99]),o(["Q","q",30,"-",-99]),o(["R","r",31,".",-99]),o(["S","s","@","/",-99]),o(["T","t",92,":",-99]),o(["U","u","^",";",-99]),o(["V","v","_","<",-99]),o(["W","w","`","=",-99]),o(["X","x","|",">",-99]),o(["Y","y","~","?",-99]),o(["Z","z",127,"[",-99]),o([e.ll,e.su,e.ll,"]",-99]),o([e.lm,e.lm,e.lu,"{",-99]),o([e.ld,e.ld,e.lp,"}",-99]),o([e.sb,e.sb,e.sb,e.lu,-99])]),e.charvals=o([new Map,new Map,new Map,new Map,new Map]);for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=h(e.charmaps,e.i);for(var d=0;d<=4;d+=1){e.j=d;var f=h(e.encs,e.j);if(n[t++]=f,ce(Ys(f),"stringtype")){var m=h(n[--t],0);n[t++]=m}C(h(e.charvals,e.j),n[--t],e.i)}}var g=new Map([[`\r
`,e.p2],[". ",e.p3],[", ",e.p4],[": ",e.p5]]);if(e.pcomp=g,e.e=1e6,e.latlen=o([o([0,5,5,10,5,10]),o([9,0,5,10,5,10]),o([5,5,0,5,10,10]),o([5,10,10,0,10,15]),o([4,9,9,14,0,14]),o([0,0,0,0,0,0])]),e.latseq=o([o([o([]),o([e.ll]),o([e.lm]),o([e.lm,e.lp]),o([e.ld]),o([e.sb])]),o([o([e.ld,e.lu]),o([]),o([e.lm]),o([e.lm,e.lp]),o([e.ld]),o([e.sb])]),o([o([e.lu]),o([e.ll]),o([]),o([e.lp]),o([e.lu,e.ld]),o([e.sb])]),o([o([e.lu]),o([e.lu,e.ll]),o([e.lu,e.lm]),o([]),o([e.lu,e.ld]),o([e.lu,e.sb])]),o([o([e.lu]),o([e.lu,e.ll]),o([e.lu,e.lm]),o([e.lu,e.lm,e.lp]),o([]),o([e.lu,e.sb])]),o([o([e.lu]),o([e.ll]),o([e.lm]),o([]),o([]),o([])])]),e.shftlen=o([o([e.e,e.e,e.e,5,e.e]),o([5,e.e,e.e,5,e.e]),o([e.e,e.e,e.e,5,e.e]),o([e.e,e.e,e.e,e.e,e.e]),o([4,e.e,e.e,4,e.e])]),e.msgbits="",qe(e.format,"rune")&&e.raw&&(e.msgbits=e.barcode),qe(e.format,"rune")&&!e.raw){e.charsize=function(){var ve=n[t-1];if(ve>=0){t--;var _e=h(o([5,5,5,5,4,8]),n[--t]);n[t++]=_e}else{var pe=n[--t];n[t-1]=pe;var Oe=n[t-1];if(Oe==e.fn1)n[t-1]=8;else{var de=-n[--t]-1e6;n[t++]=de,de==0&&(n[t-1]=1);var ke=n[--t];n[t++]=(~~(ro(ke)/ro(10))+1)*4+8}}},e.curlen=o([0,e.e,e.e,e.e,e.e,e.e]),e.curseq=o([o([]),o([]),o([]),o([]),o([]),o([])]),e.backto=e.U,e.lastchar="",Ie(e.msg,function(){for(e.char=n[--t];;){e.imp=!1;for(var ve=o([e.U,e.L,e.M,e.P,e.D,e.B]),_e=0,pe=ve.length;_e<pe;_e++){e.x=h(ve,_e);for(var Oe=o([e.U,e.L,e.M,e.P,e.D,e.B]),de=0,ke=Oe.length;de<ke;de++)if(e.y=h(Oe,de),(e.x!=e.B||e.y==e.backto)&&(e.cost=R(h(e.curlen,e.x)+h(h(e.latlen,e.x),e.y)),e.cost<h(e.curlen,e.y))){C(e.curlen,e.y,e.cost),n[t++]=e.curseq,n[t++]=e.y,n[t++]=1/0,W(h(e.curseq,e.x)),W(h(h(e.latseq,e.x),e.y));var Ee=o(),De=n[--t];if(C(n[--t],De,Ee),e.y==e.B){n[t++]="backto",e.x==e.P||e.x==e.D?n[t++]=e.U:n[t++]=e.x;var xe=n[--t];e[n[--t]]=xe}e.imp=!0}}if(!e.imp)break}e.nxtlen=o([e.e,e.e,e.e,e.e,e.e,e.e]),e.nxtseq=o(6);for(var Ne=o([e.U,e.L,e.M,e.P,e.D,e.B]),je=0,Se=Ne.length;je<Se;je++)for(e.x=h(Ne,je);;){if(e.char>=0){if(e.x!=e.B){var ze=h(h(e.charvals,e.x),e.char)!==void 0;if(!ze)break}}else if(e.x!=e.P)break;n[t++]="cost",n[t++]=h(e.curlen,e.x),n[t++]=e.x,n[t++]=e.char,e.charsize();var Pe=n[--t],Be=n[--t];if(e[n[--t]]=R(Be+Pe),e.cost<h(e.nxtlen,e.x)){C(e.nxtlen,e.x,e.cost),n[t++]=e.nxtseq,n[t++]=e.x,n[t++]=1/0,W(h(e.curseq,e.x)),n[t++]=e.char;var at=o(),Ze=n[--t];C(n[--t],Ze,at)}if(e.x==e.B)break;for(var ft=o([e.U,e.L,e.M,e.P,e.D]),Ve=0,$e=ft.length;Ve<$e;Ve++)if(e.y=h(ft,Ve),qe(e.x,e.y)){n[t++]="cost",n[t++]=R(h(e.curlen,e.y)+h(h(e.shftlen,e.y),e.x)),n[t++]=e.x,n[t++]=e.char,e.charsize();var Me=n[--t],it=n[--t];if(e[n[--t]]=R(it+Me),e.cost<h(e.nxtlen,e.y)){C(e.nxtlen,e.y,e.cost),n[t++]=e.nxtseq,n[t++]=e.y,n[t++]=1/0,W(h(e.curseq,e.y));var st=e.x==e.U?e.su:e.sp;n[t++]=st,n[t++]=e.char;var mt=o(),Tt=n[--t];C(n[--t],Tt,mt)}}break}if(e.lastchar.length!=0&&e.char>=0){var Ot=fe(2);C(Ot,0,e.lastchar),C(Ot,1,e.char),e.pchars=Ot;var Et=h(e.pcomp,e.pchars)!==void 0;if(Et){for(var Dt=o([e.U,e.L,e.M,e.P,e.D]),wt=0,en=Dt.length;wt<en;wt++)if(e.i=h(Dt,wt),e.inP=!0,e.i==e.M?e.lastchar==13&&(e.inP=!1):e.i==e.D&&(e.lastchar==44||e.lastchar==46)&&(e.inP=!1),e.inP&&oo(h(e.curlen,e.i),h(e.nxtlen,e.i))){e.curseqi=h(e.curseq,e.i),e.lastld=!1,e.lastsp=!1,e.lastidx=-1;for(var gt=e.curseqi.length-1;gt>=0;gt-=1)if(e.idx=gt,e.ch=h(e.curseqi,e.idx),e.lastidx==-1)ce(e.ch,e.lastchar)&&(e.lastidx=e.idx,e.idx>0&&h(e.curseqi,e.idx-1)==e.sp&&(e.lastsp=!0));else{if(e.ch==e.sb){e.lastidx=-1;break}if(e.ch<0&&e.ch>=e.ld){e.i==e.P?e.ch==e.ld&&(e.lastld=!0):e.ch!=e.lp&&(e.inP=e.lastsp);break}}if(e.inP&&e.lastidx>=0)if(C(e.nxtlen,e.i,h(e.curlen,e.i)),e.lastidx<e.curseqi.length-1)if(e.i==e.P){e.lastld&&C(e.nxtlen,e.i,h(e.nxtlen,e.i)+1),n[t++]=e.nxtseq,n[t++]=e.i,n[t++]=1/0,W(e.curseqi),oa(e.curseqi.length-e.lastidx,-1),n[t-1]=h(e.pcomp,e.pchars);var un=o(),Vt=n[--t];C(n[--t],Vt,un)}else{n[t++]=e.nxtseq,n[t++]=e.i,n[t++]=1/0,W(e.curseqi);var fn=o(),$n=n[--t];C(n[--t],$n,fn),C(h(e.nxtseq,e.i),e.lastidx,h(e.pcomp,e.pchars))}else{n[t++]=e.nxtseq,n[t++]=e.i,n[t++]=1/0,W(e.curseqi),n[t-1]=h(e.pcomp,e.pchars);var ei=o(),Dn=n[--t];C(n[--t],Dn,ei)}}}}qe(h(e.nxtseq,e.B),null)&&(e.numbytes=0,Ie(h(e.nxtseq,e.B),function(){n[--t]==e.sb?n[t++]=0:n[t++]=e.numbytes+1,e.numbytes=n[--t]}),e.numbytes==32&&C(e.nxtlen,e.B,h(e.nxtlen,e.B)+11)),e.curlen=e.nxtlen,e.curseq=e.nxtseq,n[t++]="lastchar",e.char>=0?n[t++]=e.char:n[t++]="";var ai=n[--t];e[n[--t]]=ai}),e.minseq=e.e;for(var v=o([e.U,e.L,e.M,e.P,e.D,e.B]),y=0,A=v.length;y<A;y++)e.i=h(v,y),h(e.curlen,e.i)<e.minseq&&(e.minseq=h(e.curlen,e.i),e.seq=h(e.curseq,e.i));for(e.tobin=function(){var ve=fe(n[--t]);n[t++]=ve;for(var _e=0,pe=ve.length-1;_e<=pe;_e+=1){var Oe=n[t-1];C(Oe,_e,48)}var de=n[t-1];n[t++]=de;var ke=n[t-3],Ee=n[t-1];n[t-3]=n[t-2],t-=2;var De=Nn(fe(Ee.length),ke,2);H(Ee,Ee.length-De.length,De)},e.encu=function(){var ve=h(h(e.charvals,e.U),n[--t]);n[t++]=ve,n[t++]=5,e.tobin()},e.encl=function(){var ve=h(h(e.charvals,e.L),n[--t]);n[t++]=ve,n[t++]=5,e.tobin()},e.encm=function(){var ve=h(h(e.charvals,e.M),n[--t]);n[t++]=ve,n[t++]=5,e.tobin()},e.encd=function(){var ve=h(h(e.charvals,e.D),n[--t]);n[t++]=ve,n[t++]=4,e.tobin()},e.encp=function(){var ve=n[t-1];if(ve==e.fn1)n[t-1]="00000000";else{var _e=n[t-1];if(_e<=-1e6){var pe=-n[--t]-1e6;n[t++]=pe,n[t++]=pe,pe==0&&(n[t-1]=1);var Oe=~~(ro(n[--t])/ro(10)),de=fe((Oe+1)*4+8);H(de,0,"00000"),n[t++]=Oe,n[t++]=de,n[t++]=de,n[t++]=Oe+1,n[t++]=3,e.tobin();var ke=n[--t];if(H(n[--t],5,ke),oa(3,1),n[t++]=-1,n[t++]=0,t<3)throw"--stack-underflow--";t-=3;for(var Ee=n[t],De=n[t+1],xe=n[t+2];De<0?Ee>=xe:Ee<=xe;Ee+=De){var Ne=n[--t],je=n[t-1];n[t++]=~~(Ne/10),n[t++]=je,n[t++]=Ee*4+8,n[t++]=Ne%10+2,n[t++]=4,e.tobin();var Se=n[--t],ze=n[--t];H(n[--t],ze,Se)}t--}else{var Pe=h(h(e.charvals,e.P),n[--t]);n[t++]=Pe,n[t++]=5,e.tobin()}}},e.encfuncs=o(["encu","encl","encm","encp","encd"]),e.addtomsgbits=function(){e.v=n[--t],H(e.msgbits,e.j,e.v),e.j=e.j+e.v.length},e.state=e.U,e.msgbits=fe(e.minseq),e.i=0,e.j=0;!(e.i>=e.seq.length);)if(e.state!=e.B){if(e.char=h(e.seq,e.i),n[t++]=e.char,e[h(e.encfuncs,e.state)]()===!0)break;e.addtomsgbits(),e.i=e.i+1,(e.char==e.su||e.char==e.sp)&&(n[t++]=h(e.seq,e.i),e.char==e.su?e.encu():e.encp(),e.addtomsgbits(),e.i=e.i+1),e.char==e.lu&&(e.state=e.U),e.char==e.ll&&(e.state=e.L),e.char==e.lm&&(e.state=e.M),e.char==e.lp&&(e.state=e.P),e.char==e.ld&&(e.state=e.D),e.char==e.sb&&(e.state=e.B)}else{for(e.numbytes=0;!(e.i+e.numbytes>=e.seq.length||h(e.seq,e.i+e.numbytes)<0);)e.numbytes=e.numbytes+1;e.numbytes<=31?(n[t++]=e.numbytes,n[t++]=5,e.tobin(),e.addtomsgbits()):(n[t++]=0,n[t++]=5,e.tobin(),e.addtomsgbits(),n[t++]=e.numbytes-31,n[t++]=11,e.tobin(),e.addtomsgbits());for(var w=0,k=e.numbytes;w<k;w++)n[t++]=h(e.seq,e.i),n[t++]=8,e.tobin(),e.addtomsgbits(),e.i=e.i+1;e.i<e.seq.length&&(e.char=h(e.seq,e.i),e.i=e.i+1,e.char==e.lu&&(e.state=e.U),e.char==e.ll&&(e.state=e.L),e.char==e.lm&&(e.state=e.M))}e.msgbits=O(e.msgbits,0,e.j)}e.metrics=o([o(["rune",0,0,0,6]),o(["compact",1,1,17,6]),o(["full",1,1,21,6]),o(["compact",2,0,40,6]),o(["full",2,1,48,6]),o(["compact",3,0,51,8]),o(["full",3,1,60,8]),o(["compact",4,0,76,8]),o(["full",4,1,88,8]),o(["full",5,1,120,8]),o(["full",6,1,156,8]),o(["full",7,1,196,8]),o(["full",8,1,240,8]),o(["full",9,1,230,10]),o(["full",10,1,272,10]),o(["full",11,1,316,10]),o(["full",12,1,364,10]),o(["full",13,1,416,10]),o(["full",14,1,470,10]),o(["full",15,1,528,10]),o(["full",16,1,588,10]),o(["full",17,1,652,10]),o(["full",18,1,720,10]),o(["full",19,1,790,10]),o(["full",20,1,864,10]),o(["full",21,1,940,10]),o(["full",22,1,1020,10]),o(["full",23,0,920,12]),o(["full",24,0,992,12]),o(["full",25,0,1066,12]),o(["full",26,0,1144,12]),o(["full",27,0,1224,12]),o(["full",28,0,1306,12]),o(["full",29,0,1392,12]),o(["full",30,0,1480,12]),o(["full",31,0,1570,12]),o(["full",32,0,1664,12])]);for(var E=e.metrics,I=0,T=E.length;I<T&&(e.m=h(E,I),e.frmt=h(e.m,0),e.mlyr=h(e.m,1),e.icap=h(e.m,2),e.ncws=h(e.m,3),e.bpcw=h(e.m,4),e.numecw=~~li(R(e.ncws*e.eclevel/100+e.ecaddchars)),e.msgbits.length==0&&(e.numecw=0),e.numdcw=R(e.ncws-e.numecw),e.okay=!0,qe(e.format,e.frmt)&&(e.okay=!1),e.readerinit&&e.icap!=1&&(e.okay=!1),e.layers!=-1&&e.layers!=e.mlyr&&(e.okay=!1),~~li(e.msgbits.length/e.bpcw)>e.numdcw&&(e.okay=!1),!e.okay);I++);for(e.okay||(n[t++]="bwipp.aztecNoValidSymbol#23967",n[t++]="Maximum length exceeded",Z()),e.layers=e.mlyr,e.allzero=function(){var ve=n[--t];n[t++]=ce(ve,O("000000000000",0,ve.length))},e.allones=function(){var ve=n[--t];n[t++]=ce(ve,O("111111111111",0,ve.length))},e.cws=o(e.ncws),e.m=0,e.c=0;!(e.msgbits.length<=e.m);){if(e.msgbits.length-e.m>=e.bpcw){e.cwb=O(e.msgbits,e.m,e.bpcw-1),e.cwf=O(e.msgbits,R(e.m+e.bpcw)-1,1),n[t++]=e.cwb,e.allzero(),n[--t]&&(e.cwf="1",e.m=e.m-1),n[t++]=e.cwb,e.allones(),n[--t]&&(e.cwf="0",e.m=e.m-1);var N=fe(12);H(N,0,e.cwb),H(N,e.bpcw-1,e.cwf),e.cwb=O(N,0,e.bpcw)}else{e.cwb=O(e.msgbits,e.m,e.msgbits.length-e.m);var j=zi(fe(12),"111111111111");H(j,0,e.cwb),e.cwb=O(j,0,e.bpcw),n[t++]=e.cwb,e.allones(),n[--t]&&H(e.cwb,e.cwb.length-1,"0")}e.cw=0;for(var B=0,U=e.bpcw-1;B<=U;B+=1)e.i=B,e.cw=R(e.cw+~~El(2,R(e.bpcw-e.i)-1)*(h(e.cwb,e.i)-48));C(e.cws,e.c,e.cw),e.m=R(e.m+e.bpcw),e.c=e.c+1}e.cws=O(e.cws,0,e.c);var F=h(e.options,"debugcws")!==void 0;if(F&&(n[t++]="bwipp.debugcws#24006",n[t++]=e.cws,Z()),e.rscodes=function(){e.rspm=n[--t],e.rsgf=n[--t],e.rsnc=n[--t],e.rscws=n[--t],n[t++]=1/0,n[t++]=1;for(var ve=0,_e=e.rsgf-1;ve<_e;ve++){var pe=n[t-1],Oe=pe*2;if(n[t++]=Oe,Oe>=e.rsgf){var de=n[--t];n[t++]=Ha(de,e.rspm)}}e.rsalog=o(),e.rslog=o(e.rsgf);for(var ke=1,Ee=e.rsgf-1;ke<=Ee;ke+=1)C(e.rslog,h(e.rsalog,ke),ke);e.rsprod=function(){var Et=n[t-1],Dt=n[t-2];if(Et!=0&&Dt!=0){var wt=h(e.rslog,n[--t]),en=h(e.rsalog,R(wt+h(e.rslog,n[--t]))%(e.rsgf-1));n[t++]=en}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var De=0,xe=e.rsnc;De<xe;De++)n[t++]=0;e.coeffs=o();for(var Ne=1,je=e.rsnc;Ne<=je;Ne+=1){e.i=Ne,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Se=e.i-1;Se>=1;Se-=1){e.j=Se,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var ze=n[--t],Pe=n[--t],Be=n[--t];C(n[--t],Be,Ha(Pe,ze))}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var at=n[--t],Ze=n[--t];C(n[--t],Ze,at)}e.nd=e.rscws.length,n[t++]=1/0,W(e.rscws);for(var ft=0,Ve=e.rsnc;ft<Ve;ft++)n[t++]=0;n[t++]=0,e.rscws=o();for(var $e=0,Me=e.nd-1;$e<=Me;$e+=1){e.k=Ha(h(e.rscws,$e),h(e.rscws,e.nd));for(var it=0,st=e.rsnc-1;it<=st;it+=1){e.j=it,n[t++]=e.rscws,n[t++]=e.nd+e.j,n[t++]=h(e.rscws,e.nd+e.j+1),n[t++]=e.k,n[t++]=h(e.coeffs,R(e.rsnc-e.j)-1),e.rsprod();var mt=n[--t],Tt=n[--t],Ot=n[--t];C(n[--t],Ot,Ha(Tt,mt))}}n[t++]=O(e.rscws,0,e.rscws.length-1)},ce(e.format,"full")){e.mode=(e.layers-1<<11)+(e.cws.length-1),e.readerinit&&(e.mode=e.mode|1024),e.mode=o([(e.mode&61440)>>>12,(e.mode&3840)>>>8,(e.mode&240)>>>4,e.mode&15]),n[t++]="mode",n[t++]=e.mode,n[t++]=6,n[t++]=16,n[t++]=19,e.rscodes();var P=n[--t];e[n[--t]]=P}if(ce(e.format,"compact")){e.mode=(e.layers-1<<6)+(e.cws.length-1),e.readerinit&&(e.mode=e.mode|32),e.mode=o([(e.mode&240)>>>4,e.mode&15]),n[t++]="mode",n[t++]=e.mode,n[t++]=5,n[t++]=16,n[t++]=19,e.rscodes();var z=n[--t];e[n[--t]]=z}if(ce(e.format,"rune")){e.mode=Ye(e.barcode),e.mode=o([(e.mode&240)>>>4,e.mode&15]),n[t++]="mode",n[t++]=e.mode,n[t++]=5,n[t++]=16,n[t++]=19,e.rscodes();var V=n[--t];e[n[--t]]=V,n[t++]=1/0;for(var L=e.mode,Q=0,q=L.length;Q<q;Q++)n[t++]=h(L,Q)^10;e.mode=o()}e.modebits=fe(e.mode.length*4);for(var ee=0,X=e.modebits.length-1;ee<=X;ee+=1)H(e.modebits,ee,"0");for(var ae=0,K=e.mode.length-1;ae<=K;ae+=1){e.i=ae;var ie=Nn(fe(4),h(e.mode,e.i),2);H(e.modebits,4-ie.length+4*e.i,ie)}e.rsparams=o([o([]),o([]),o([]),o([]),o([]),o([]),o([64,67]),o([]),o([256,301]),o([]),o([1024,1033]),o([]),o([4096,4201])]),n[t++]="cws",n[t++]=e.cws,n[t++]=R(e.ncws-e.cws.length),W(h(e.rsparams,e.bpcw)),e.rscodes();var ne=n[--t];e[n[--t]]=ne,ce(e.format,"full")?e.databits=fe(R(e.layers*e.layers*16+e.layers*112)):e.databits=fe(R(e.layers*e.layers*16+e.layers*88));for(var J=0,te=e.databits.length-1;J<=te;J+=1)H(e.databits,J,"0");for(var $=0,oe=e.ncws-1;$<=oe;$+=1){e.i=$;var we=Nn(fe(e.bpcw),h(e.cws,e.i),2);H(e.databits,R(e.bpcw-we.length+e.bpcw*e.i+(e.databits.length-e.ncws*e.bpcw)),we)}e.cmv=function(){var ve=n[--t],_e=n[--t];n[t++]=R(_e-ve*e.size+e.mid)},e.lmv=function(){e.lbit=n[--t],e.llyr=n[--t],e.lwid=R(e.fw+e.llyr*4),e.ldir=~~(~~(e.lbit/2)/e.lwid),e.ldir==0&&(n[t++]=R(-~~((e.lwid-1)/2)+1+~~(e.lbit/2)%e.lwid),n[t++]=R(~~((e.fw-1)/2)+e.llyr*2+e.lbit%2),e.cmv()),e.ldir==1&&(n[t++]=R(~~(e.fw/2)+e.llyr*2+e.lbit%2),n[t++]=R(~~((e.lwid-1)/2)-1-~~(e.lbit/2)%e.lwid),e.cmv()),e.ldir==2&&(n[t++]=-R(-~~(e.lwid/2)+1+~~(e.lbit/2)%e.lwid),n[t++]=-R(~~(e.fw/2)+e.llyr*2+e.lbit%2),e.cmv()),e.ldir==3&&(n[t++]=-R(~~((e.fw-1)/2)+e.llyr*2+e.lbit%2),n[t++]=-R(~~(e.lwid/2)-1-~~(e.lbit/2)%e.lwid),e.cmv())},ce(e.format,"full")?e.fw=12:e.fw=9,e.size=R(e.fw+e.layers*4)+2,n[t++]=1/0;for(var be=0,Te=e.size*e.size;be<Te;be++)n[t++]=-1;e.pixs=o(),e.mid=R(~~((e.size-1)/2)*e.size+~~((e.size-1)/2)),e.i=0;for(var ye=1,tt=e.layers;ye<=tt;ye+=1){e.layer=ye;for(var Qe=0,Ge=(e.fw+e.layer*4)*8-1;Qe<=Ge;Qe+=1){e.pos=Qe,n[t++]=e.pixs,n[t++]=e.layer,n[t++]=e.pos,e.lmv();var Xe=n[--t];C(n[--t],Xe,h(e.databits,e.databits.length-e.i-1)-48),e.i=e.i+1}}if(ce(e.format,"full")){e.fw=13,e.size=R(e.fw+e.layers*4+2+~~((e.layers+10.5)/7.5-1)*2),e.mid=~~(e.size*e.size/2),n[t++]=1/0;for(var Je=0,dt=e.size*e.size;Je<dt;Je++)n[t++]=-2;e.npixs=o();for(var vt=0,_t=~~(e.size/2);vt<=_t;vt+=16){e.i=vt;for(var xt=0,bt=e.size-1;xt<=bt;xt+=1){e.j=xt,n[t++]=e.npixs,n[t++]=-~~(e.size/2)+e.j,n[t++]=e.i,e.cmv();var kt=n[--t];H(n[--t],kt,o([(~~(e.size/2)+e.j+e.i+1)%2])),n[t++]=e.npixs,n[t++]=-~~(e.size/2)+e.j,n[t++]=-e.i,e.cmv();var Pt=n[--t];H(n[--t],Pt,o([(~~(e.size/2)+e.j+e.i+1)%2])),n[t++]=e.npixs,n[t++]=e.i,n[t++]=-~~(e.size/2)+e.j,e.cmv();var Rt=n[--t];H(n[--t],Rt,o([(~~(e.size/2)+e.j+e.i+1)%2])),n[t++]=e.npixs,n[t++]=-e.i,n[t++]=-~~(e.size/2)+e.j,e.cmv();var Wt=n[--t];H(n[--t],Wt,o([(~~(e.size/2)+e.j+e.i+1)%2]))}}e.j=0;for(var zt=0,Ct=e.npixs.length-1;zt<=Ct;zt+=1)e.i=zt,h(e.npixs,e.i)==-2&&(C(e.npixs,e.i,h(e.pixs,e.j)),e.j=e.j+1);e.pixs=e.npixs}e.fw=~~(e.fw/2);for(var Yt=-e.fw,jt=e.fw;Yt<=jt;Yt+=1){e.i=Yt;for(var an=-e.fw,rn=e.fw;an<=rn;an+=1){e.j=an,n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.j,e.cmv(),Fu(e.i)>Fu(e.j)?n[t++]=Fu(e.i):n[t++]=Fu(e.j);var Kt=n[--t],Jt=n[--t];C(n[--t],Jt,(Kt+1)%2)}}for(var Zt=o([o([-(e.fw+1),e.fw,1]),o([-(e.fw+1),e.fw+1,1]),o([-e.fw,e.fw+1,1]),o([e.fw+1,e.fw+1,1]),o([e.fw+1,e.fw,1]),o([e.fw+1,-e.fw,1]),o([e.fw,e.fw+1,0]),o([e.fw+1,-(e.fw+1),0]),o([e.fw,-(e.fw+1),0]),o([-e.fw,-(e.fw+1),0]),o([-(e.fw+1),-(e.fw+1),0]),o([-(e.fw+1),-e.fw,0])]),Qt=0,mn=Zt.length;Qt<mn;Qt++){n[t++]=e.pixs,W(h(Zt,Qt)),oa(3,1),e.cmv();var cn=n[--t],dn=n[--t];C(n[--t],cn,dn)}e.modemapfull=o([o([-5,7]),o([-4,7]),o([-3,7]),o([-2,7]),o([-1,7]),o([1,7]),o([2,7]),o([3,7]),o([4,7]),o([5,7]),o([7,5]),o([7,4]),o([7,3]),o([7,2]),o([7,1]),o([7,-1]),o([7,-2]),o([7,-3]),o([7,-4]),o([7,-5]),o([5,-7]),o([4,-7]),o([3,-7]),o([2,-7]),o([1,-7]),o([-1,-7]),o([-2,-7]),o([-3,-7]),o([-4,-7]),o([-5,-7]),o([-7,-5]),o([-7,-4]),o([-7,-3]),o([-7,-2]),o([-7,-1]),o([-7,1]),o([-7,2]),o([-7,3]),o([-7,4]),o([-7,5])]),e.modemapcompact=o([o([-3,5]),o([-2,5]),o([-1,5]),o([0,5]),o([1,5]),o([2,5]),o([3,5]),o([5,3]),o([5,2]),o([5,1]),o([5,0]),o([5,-1]),o([5,-2]),o([5,-3]),o([3,-5]),o([2,-5]),o([1,-5]),o([0,-5]),o([-1,-5]),o([-2,-5]),o([-3,-5]),o([-5,-3]),o([-5,-2]),o([-5,-1]),o([-5,0]),o([-5,1]),o([-5,2]),o([-5,3])]),n[t++]="modemap",ce(e.format,"full")?n[t++]=e.modemapfull:n[t++]=e.modemapcompact;var Ht=n[--t];e[n[--t]]=Ht;for(var Bt=0,Y=e.modemap.length-1;Bt<=Y;Bt+=1){n[t++]=Bt,n[t++]=e.pixs,W(h(e.modemap,Bt)),e.cmv();var le=n[--t],se=n[--t];C(se,le,h(e.modebits,n[--t])-48)}var ge=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.size],["pixy",e.size],["height",e.size*2/72],["width",e.size*2/72],["opt",e.options]]);n[t++]=ge,e.dontdraw||Lt(),e=r}function ST(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"format","compact"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Sx();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function kT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],C(e.options,"dontdraw",!0),C(e.options,"format","rune"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Sx();var i=n[--t];e[n[--t]]=i,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function CT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.parse=!1,e.parsefnc=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=o(["unset","T-16","T-32","T-48","S-10","S-20","S-30","A","B","C","D","E","F","G","H"]);n[t++]=!1;for(var a=0,s=i.length;a<s;a++){var l=n[--t];n[t++]=l||ce(h(i,a),e.version)}n[--t]||(n[t++]="bwipp.codeoneBadVersion#24394",n[t++]="version must be A to H, T-16, T-32, T-48, S-10, S-20 or S-30",Z()),e.stype=ce(O(e.version,0,1),"S"),e.ttype=ce(O(e.version,0,1),"T"),e.stypevals=o(["1","1010","1100100","1111101000","10011100010000","11000011010100000","11110100001001000000","100110001001011010000000","101111101011110000100000000","111011100110101100101000000000","1001010100000010111110010000000000","1011101001000011101101110100000000000","1110100011010100101001010001000000000000","10010001100001001110011100101010000000000000","10110101111001100010000011110100100000000000000","11100011010111111010100100110001101000000000000000","100011100001101111001001101111110000010000000000000000","101100011010001010111100001011101100010100000000000000000"]),e.stypemetrics=o([o(["S-10",8,11,10,4,4,1,99,99,99]),o(["S-20",8,21,20,8,8,1,99,99,99]),o(["S-30",8,31,30,12,12,1,99,99,99])]),e.nonstypemetrics=o([o(["A",16,18,16,10,10,1,4,99,6]),o(["B",22,22,20,19,16,1,4,99,8]),o(["C",28,32,28,44,26,1,4,22,11]),o(["D",40,42,36,91,44,1,4,16,16]),o(["E",52,54,48,182,70,1,4,22,22]),o(["F",70,76,68,370,140,2,4,22,31]),o(["G",104,98,88,732,280,4,6,21,47]),o(["H",148,134,120,1480,560,8,6,20,69]),o(["T-16",16,17,16,10,10,1,99,99,99]),o(["T-32",16,33,32,24,16,1,99,99,99]),o(["T-48",16,49,48,38,22,1,99,99,99])]),e.fnc1=-1,e.fnc3=-2,e.lC=-5,e.lB=-6,e.lX=-7,e.lT=-8,e.lD=-9,e.unl=-10,e.fnc2=-11,e.fnc4=-12,e.sft1=-13,e.sft2=-14,e.sft3=-15,e.eci=-16,e.pad=-17,e.fnc1lD=-18,e.unlcw=255,n[t++]=1/0;for(var c=0;c<=128;c+=1)n[t++]=c,n[t++]=c+1;n[t++]=e.pad,n[t++]=129;for(var d=0;d<=99;d+=1){var f=Nn(fe(2),d,10),m=zi(fe(2),"00");H(m,2-f.length,f),n[t++]=m,n[t++]=d+130}var g=o([e.lC,e.lB,e.fnc1,e.fnc2,e.fnc3,e.fnc4,e.fnc1lD]);n[t++]=229;for(var v=0,y=g.length;v<y;v++){var A=n[--t]+1;n[t++]=h(g,v),n[t++]=A,n[t++]=A}n[t-1]=e.lX,n[t++]=238,n[t++]=e.lT,n[t++]=239,e.Avals=rt(),n[t++]=1/0;for(var w=e.Avals,k=w.size,E=w.keys(),I=0;I<k;I++){var T=E.next().value;n[t++]=T;var N=1/0,j=w.get(T);n[t++]=N,n[t++]=j;var B=o();n[t++]=B}e.Avals=rt(),n[t++]=1/0,n[t++]=e.sft1,n[t++]=0,n[t++]=e.sft2,n[t++]=1,n[t++]=e.sft3,n[t++]=2,n[t++]=32,n[t++]=3;for(var U=48;U<=57;U+=1)n[t++]=U,n[t++]=U-44;for(var F=65;F<=90;F+=1)n[t++]=F,n[t++]=F-51;e.CNvals=rt(),n[t++]=1/0;for(var P=0;P<=31;P+=1)n[t++]=P,n[t++]=P;e.C1vals=rt(),n[t++]=1/0;for(var z=33;z<=47;z+=1)n[t++]=z,n[t++]=z-33;for(var V=58;V<=64;V+=1)n[t++]=V,n[t++]=V-43;for(var L=91;L<=95;L+=1)n[t++]=L,n[t++]=L-69;n[t++]=e.fnc1,n[t++]=27,n[t++]=e.fnc2,n[t++]=28,n[t++]=e.fnc3,n[t++]=29,n[t++]=e.fnc4,n[t++]=30,n[t++]=e.pad,n[t++]=31,e.C2vals=rt(),n[t++]=1/0;for(var Q=96;Q<=127;Q+=1)n[t++]=Q,n[t++]=Q-96;e.C3vals=rt(),n[t++]=1/0;for(var q=e.CNvals,ee=q.size,X=q.keys(),ae=0;ae<ee;ae++){var K=X.next().value;n[t++]=K;var ie=1/0,ne=q.get(K);n[t++]=ie,n[t++]=ne;var J=o();n[t++]=J}for(var te=e.C1vals,$=te.size,oe=te.keys(),we=0;we<$;we++){var be=oe.next().value;n[t++]=be;var Te=1/0,ye=te.get(be);n[t++]=Te,n[t++]=h(e.CNvals,e.sft1),n[t++]=ye;var tt=o();n[t++]=tt}for(var Qe=e.C2vals,Ge=Qe.size,Xe=Qe.keys(),Je=0;Je<Ge;Je++){var dt=Xe.next().value;n[t++]=dt;var vt=1/0,_t=Qe.get(dt);n[t++]=vt,n[t++]=h(e.CNvals,e.sft2),n[t++]=_t;var xt=o();n[t++]=xt}for(var bt=e.C3vals,kt=bt.size,Pt=bt.keys(),Rt=0;Rt<kt;Rt++){var Wt=Pt.next().value;n[t++]=Wt;var zt=1/0,Ct=bt.get(Wt);n[t++]=zt,n[t++]=h(e.CNvals,e.sft3),n[t++]=Ct;var Yt=o();n[t++]=Yt}e.Cvals=rt(),n[t++]=1/0,n[t++]=e.sft1,n[t++]=0,n[t++]=e.sft2,n[t++]=1,n[t++]=e.sft3,n[t++]=2,n[t++]=32,n[t++]=3;for(var jt=48;jt<=57;jt+=1)n[t++]=jt,n[t++]=jt-44;for(var an=97;an<=122;an+=1)n[t++]=an,n[t++]=an-83;e.TNvals=rt(),n[t++]=1/0;for(var rn=0;rn<=31;rn+=1)n[t++]=rn,n[t++]=rn;e.T1vals=rt(),n[t++]=1/0;for(var Kt=33;Kt<=47;Kt+=1)n[t++]=Kt,n[t++]=Kt-33;for(var Jt=58;Jt<=64;Jt+=1)n[t++]=Jt,n[t++]=Jt-43;for(var Zt=91;Zt<=95;Zt+=1)n[t++]=Zt,n[t++]=Zt-69;n[t++]=e.fnc1,n[t++]=27,n[t++]=e.fnc2,n[t++]=28,n[t++]=e.fnc3,n[t++]=29,n[t++]=e.fnc4,n[t++]=30,n[t++]=e.pad,n[t++]=31,e.T2vals=rt(),n[t++]=1/0,n[t++]=96,n[t++]=0;for(var Qt=65;Qt<=90;Qt+=1)n[t++]=Qt,n[t++]=Qt-64;for(var mn=123;mn<=127;mn+=1)n[t++]=mn,n[t++]=mn-96;e.T3vals=rt(),n[t++]=1/0;for(var cn=e.TNvals,dn=cn.size,Ht=cn.keys(),Bt=0;Bt<dn;Bt++){var Y=Ht.next().value;n[t++]=Y;var le=1/0,se=cn.get(Y);n[t++]=le,n[t++]=se;var ge=o();n[t++]=ge}for(var ve=e.T1vals,_e=ve.size,pe=ve.keys(),Oe=0;Oe<_e;Oe++){var de=pe.next().value;n[t++]=de;var ke=1/0,Ee=ve.get(de);n[t++]=ke,n[t++]=h(e.TNvals,e.sft1),n[t++]=Ee;var De=o();n[t++]=De}for(var xe=e.T2vals,Ne=xe.size,je=xe.keys(),Se=0;Se<Ne;Se++){var ze=je.next().value;n[t++]=ze;var Pe=1/0,Be=xe.get(ze);n[t++]=Pe,n[t++]=h(e.TNvals,e.sft2),n[t++]=Be;var at=o();n[t++]=at}for(var Ze=e.T3vals,ft=Ze.size,Ve=Ze.keys(),$e=0;$e<ft;$e++){var Me=Ve.next().value;n[t++]=Me;var it=1/0,st=Ze.get(Me);n[t++]=it,n[t++]=h(e.TNvals,e.sft3),n[t++]=st;var mt=o();n[t++]=mt}e.Tvals=rt();for(var Tt=128;Tt<=255;Tt+=1){e.i=Tt,n[t++]=e.Avals,n[t++]=e.i,n[t++]=1/0,W(h(e.Avals,e.fnc4)),W(h(e.Avals,e.i-128));var Ot=o(),Et=n[--t];C(n[--t],Et,Ot),n[t++]=e.Cvals,n[t++]=e.i,n[t++]=1/0,W(h(e.Cvals,e.fnc4)),W(h(e.Cvals,e.i-128));var Dt=o(),wt=n[--t];C(n[--t],wt,Dt),n[t++]=e.Tvals,n[t++]=e.i,n[t++]=1/0,W(h(e.Tvals,e.fnc4)),W(h(e.Tvals,e.i-128));var en=o(),gt=n[--t];C(n[--t],gt,en)}n[t++]=1/0,n[t++]=13,n[t++]=0,n[t++]=42,n[t++]=1,n[t++]=62,n[t++]=2,n[t++]=32,n[t++]=3;for(var un=48;un<=57;un+=1)n[t++]=un,n[t++]=un-44;for(var Vt=65;Vt<=90;Vt+=1)n[t++]=Vt,n[t++]=Vt-51;e.Xvals=rt(),n[t++]=1/0;for(var fn=e.Xvals,$n=fn.size,ei=fn.keys(),Dn=0;Dn<$n;Dn++){var ai=ei.next().value;n[t++]=ai;var zn=1/0,mi=fn.get(ai);n[t++]=zn,n[t++]=mi;var Fn=o();n[t++]=Fn}e.Xvals=rt(),n[t++]=1/0;for(var Hn=0;Hn<=255;Hn+=1)n[t++]=Hn,n[t++]=Hn;e.Bvals=rt(),n[t++]=1/0;for(var _n=e.Bvals,vn=_n.size,kn=_n.keys(),Ai=0;Ai<vn;Ai++){var Ei=kn.next().value;n[t++]=Ei;var Ji=1/0,nn=_n.get(Ei);n[t++]=Ji,n[t++]=nn;var yn=o();n[t++]=yn}if(e.Bvals=rt(),e.encvals=o([e.Avals,e.Cvals,e.Tvals,e.Xvals,-1,e.Bvals]),e.A=0,e.C=1,e.T=2,e.X=3,e.D=4,e.B=5,e.stype){Ie(e.barcode,function(){var It=n[--t];(It<48||It>57)&&(n[t++]="bwipp.codeoneStypeNonDigit#24564",n[t++]="S-Type symbols can only contain digits",Z())}),e.barlen=e.barcode.length,e.barlen>18&&(n[t++]="bwipp.codeoneStypeTooLong#24570",n[t++]="Maximum length exceeded",Z()),e.normalize=function(){e.base=n[--t],e.num=n[--t];for(var It=e.num.length-1;It>=1;It-=1){e.i=It;var xn=e.num,vi=e.i;C(xn,vi-1,R(h(xn,vi-1)+~~(h(e.num,e.i)/e.base))),C(e.num,e.i,h(e.num,e.i)%e.base)}for(;!oo(h(e.num,0),e.base);)n[t++]=1/0,n[t++]=0,W(e.num),e.num=o(),C(e.num,0,R(h(e.num,0)+~~(h(e.num,1)/e.base))),C(e.num,1,h(e.num,1)%e.base);n[t++]=1/0,e.i=!0;for(var At=e.num,tn=0,Cn=At.length;tn<Cn;tn++){var In=h(At,tn);n[t++]=In,In==0&&e.i?t--:e.i=!1}e.num=o(),e.num.length==0&&(e.num=o([0])),n[t++]=e.num},e.bigadd=function(){var It=n[--t],xn=n[--t];if(e.offset=Fu(It.length-xn.length),It.length<xn.length){var vi=It;It=xn,xn=vi}e.a=It,e.b=xn;for(var At=0,tn=e.b.length-1;At<=tn;At+=1){var Cn=e.a,In=e.offset;C(Cn,At+In,R(h(Cn,At+In)+h(e.b,At)))}n[t++]=e.a},e.barlen=e.barcode.length,e.v=o([1]);for(var qn=0,Tn=e.barlen-1;qn<=Tn;qn+=1){e.i=qn,n[t++]=1/0,Ie(h(e.stypevals,e.i),function(){var It=n[--t];n[t++]=(It-48)*(h(e.barcode,e.barlen-e.i-1)-48)});var Gn=o();n[t++]=Gn,n[t++]=e.v,e.bigadd(),e.v=n[--t]}n[t++]="v",n[t++]=e.v,n[t++]=2,e.normalize();var gi=n[--t];e[n[--t]]=gi,n[t++]=1/0;for(var Vn=0,ln=(5-e.v.length%5)%5;Vn<ln;Vn++)n[t++]=0;W(e.v),e.v=o(),e.cws=o(~~(e.v.length/5));for(var ti=0,Qi=e.cws.length-1;ti<=Qi;ti+=1){e.i=ti;var Bi=O(e.v,e.i*5,5);n[t++]=0;for(var Ir=0,_i=Bi.length;Ir<_i;Ir++){var Nr=n[--t];n[t++]=R(Nr+h(Bi,Ir))*2}C(e.cws,e.i,~~(n[--t]/2))}e.metrics=e.stypemetrics}else{var rr=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fnc1],["FNC3",e.fnc3]]);e.fncvals=rr,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var Zr=n[--t];e[n[--t]]=Zr,e.msglen=e.msg.length,e.eciesc=92;var ar=e.msg;n[t++]="numecis",n[t++]=0;for(var sr=0,Pi=ar.length;sr<Pi;sr++)if(h(ar,sr)<=-1e6){var hr=n[--t];n[t++]=hr+1}var Lr=n[--t];if(e[n[--t]]=Lr,e.numecis>0){e.msgtmp=o(R(e.msg.length*2+e.numecis*6)+2),C(e.msgtmp,0,e.pad),C(e.msgtmp,1,e.eciesc),e.j=2;for(var pr=0,xr=e.msg.length-1;pr<=xr;pr+=1){var wa=h(e.msg,pr);if(n[t++]=wa,wa<=-1e6){for(var br=O(Nn(fe(7),-n[--t],10),1,6),Ba=0,yr=br.length;Ba<yr;Ba++)n[t++]=h(br,Ba);Rn(o(6)),H(e.msgtmp,e.j+1,n[--t]),C(e.msgtmp,e.j,e.eciesc),e.j=e.j+7}else{var zr=n[t-1];zr!=e.eciesc?(C(e.msgtmp,e.j,n[--t]),e.j=e.j+1):(t--,C(e.msgtmp,e.j,e.eciesc),C(e.msgtmp,e.j+1,e.eciesc),e.j=e.j+2)}}e.msg=O(e.msgtmp,0,e.j),e.msglen=e.msg.length}e.metrics=e.nonstypemetrics,e.fullcws=o([]);for(var Tr=e.metrics,ea=0,Hr=Tr.length;ea<Hr;ea++)e.m=h(Tr,ea),e.vers=h(e.m,0),e.dcws=h(e.m,4),e.okay=!0,ce(e.version,"unset")?e.vers.length!=1&&(e.okay=!1):qe(e.version,e.vers)&&(e.okay=!1),e.okay&&(n[t++]=1/0,W(e.fullcws),n[t++]=e.dcws,e.fullcws=o());n[t++]=1/0;for(var _a=0;_a<1480;_a++)n[t++]=1e4;e.numremcws=o();for(var qr=e.fullcws,Va=0,Gr=qr.length;Va<Gr;Va++)C(e.numremcws,h(qr,Va)-1,1);for(var la=1478;la>=0;la-=1)e.i=la,h(e.numremcws,e.i)!=1&&C(e.numremcws,e.i,h(e.numremcws,e.i+1)+1);n[t++]=1/0;for(var Vr=0,wr=e.msglen;Vr<wr;Vr++)n[t++]=0;n[t++]=0,e.numD=o(),n[t++]=1/0;for(var or=0,ds=e.msglen;or<ds;or++)n[t++]=0;n[t++]=9999,e.nextXterm=o(),n[t++]=1/0;for(var lr=0,us=e.msglen;lr<us;lr++)n[t++]=0;n[t++]=9999,e.nextNonX=o();for(var Mr=e.msglen-1;Mr>=0;Mr-=1){e.i=Mr,e.barchar=h(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&C(e.numD,e.i,h(e.numD,e.i+1)+1),e.barchar==13||e.barchar==42||e.barchar==62?C(e.nextXterm,e.i,0):C(e.nextXterm,e.i,h(e.nextXterm,e.i+1)+1);var es=h(e.Xvals,e.barchar)!==void 0;es?C(e.nextNonX,e.i,h(e.nextNonX,e.i+1)+1):C(e.nextNonX,e.i,0)}n[t++]=1/0;for(var Yr=e.nextXterm,Mn=0,Hi=Yr.length;Mn<Hi;Mn++){var Rr=h(Yr,Mn);n[t++]=Rr,Rr>1e4&&(n[t-1]=1e4)}e.nextXterm=o(),n[t++]=1/0;for(var ta=e.nextNonX,Ia=0,Ci=ta.length;Ia<Ci;Ia++){var Aa=h(ta,Ia);n[t++]=Aa,Aa>1e4&&(n[t-1]=1e4)}for(e.nextNonX=o(),e.isD=function(){n[t++]=e.char>=48&&e.char<=57},e.isC=function(){var It=h(e.CNvals,e.char)!==void 0;n[t++]=It},e.isT=function(){var It=h(e.TNvals,e.char)!==void 0;n[t++]=It},e.isX=function(){var It=h(e.Xvals,e.char)!==void 0;n[t++]=It},e.isEA=function(){n[t++]=e.char>127},e.isFN=function(){n[t++]=e.char<0},e.XtermFirst=function(){var It=n[--t];n[t++]=oo(h(e.nextXterm,It),h(e.nextNonX,It))},e.lookup=function(){e.ac=1,e.cc=2,e.tc=2,e.xc=2,e.bc=3,e.mode==e.A&&(e.ac=0,e.cc=1,e.tc=1,e.xc=1,e.bc=2),e.mode==e.C&&(e.cc=0),e.mode==e.T&&(e.tc=0),e.mode==e.X&&(e.xc=0),e.mode==e.B&&(e.bc=0);for(var It=0;It<1;It++)for(e.k=0;;){if(e.i+e.k==e.msglen){var xn=o([e.ac,e.cc,e.tc,e.xc]);n[t++]=!0;for(var vi=0,At=xn.length;vi<At;vi++){var tn=n[--t];n[t++]=tn&&e.bc<=li(h(xn,vi))}if(n[--t]){n[t++]=e.B;break}var Cn=o([e.cc,e.tc,e.xc,e.bc]);n[t++]=!0;for(var In=0,xi=Cn.length;In<xi;In++){var Sr=n[--t];n[t++]=Sr&&e.ac<=li(h(Cn,In))}if(n[--t]){n[t++]=e.A;break}var oi=o([e.tc,e.xc]);n[t++]=!0;for(var da=0,Wr=oi.length;da<Wr;da++){var fs=n[--t];n[t++]=fs&&li(e.cc)<=li(h(oi,da))}if(n[--t]){n[t++]=e.C;break}var Qa=o([e.xc]);n[t++]=!0;for(var $a=0,Il=Qa.length;$a<Il;$a++){var Nl=n[--t];n[t++]=Nl&&li(e.tc)<=li(h(Qa,$a))}if(n[--t]){n[t++]=e.T;break}n[t++]=e.X;break}if(e.char=h(e.msg,e.i+e.k),n[t++]="ac",n[t++]=e.ac,e.isD(),n[--t]){var Vo=n[--t];n[t++]=R(Vo+1/2)}else if(e.isEA(),n[--t]){var zl=n[--t];n[t++]=li(zl)+2}else{var Wa=n[--t];n[t++]=li(Wa)+1}var Yo=n[--t];if(e[n[--t]]=Yo,n[t++]="cc",n[t++]=e.cc,e.isC(),n[--t]){var Io=n[--t];n[t++]=R(Io+.6666667)}else if(e.isEA(),n[--t]){var j1=n[--t];n[t++]=R(j1+2.6666667)}else{var u1=n[--t];n[t++]=R(u1+1.3333334)}var js=n[--t];if(e[n[--t]]=js,n[t++]="tc",n[t++]=e.tc,e.isT(),n[--t]){var ks=n[--t];n[t++]=R(ks+.6666667)}else if(e.isEA(),n[--t]){var cl=n[--t];n[t++]=R(cl+2.6666667)}else{var No=n[--t];n[t++]=R(No+1.3333334)}var To=n[--t];if(e[n[--t]]=To,n[t++]="xc",n[t++]=e.xc,e.isX(),n[--t]){var Qo=n[--t];n[t++]=R(Qo+.6666667)}else if(e.isEA(),n[--t]){var Bc=n[--t];n[t++]=R(Bc+4.3333334)}else{var oc=n[--t];n[t++]=R(oc+3.3333334)}var lc=n[--t];if(e[n[--t]]=lc,n[t++]="bc",n[t++]=e.bc,e.isFN(),n[--t]){var Pc=n[--t];n[t++]=Pc+3}else{var Xa=n[--t];n[t++]=Xa+1}var Dr=n[--t];if(e[n[--t]]=Dr,e.k>=3){var bi=o([e.ac,e.cc,e.tc,e.xc]);n[t++]=!0;for(var Mo=0,Js=bi.length;Mo<Js;Mo++){var cc=n[--t];n[t++]=cc&&e.bc+1<=li(h(bi,Mo))}if(n[--t]){n[t++]=e.B;break}var $o=o([e.cc,e.tc,e.xc,e.bc]);n[t++]=!0;for(var B1=0,Fc=$o.length;B1<Fc;B1++){var Hl=n[--t];n[t++]=Hl&&e.ac+1<=li(h($o,B1))}if(n[--t]){n[t++]=e.A;break}var dl=o([e.ac,e.cc,e.xc,e.bc]);n[t++]=!0;for(var f1=0,h1=dl.length;f1<h1;f1++){var dc=n[--t];n[t++]=dc&&li(e.tc)+1<=li(h(dl,f1))}if(n[--t]){n[t++]=e.T;break}var ul=o([e.ac,e.tc]);n[t++]=!0;for(var uo=0,fl=ul.length;uo<fl;uo++){var Ro=n[--t];n[t++]=Ro&&li(e.cc)+1<=li(h(ul,uo))}if(n[--t]){if(li(e.cc)<li(e.xc)){n[t++]=e.C;break}if(e.cc==e.xc)if(n[t++]=e.i+e.k+1,e.XtermFirst(),n[--t]){n[t++]=e.X;break}else{n[t++]=e.C;break}}var ql=o([e.ac,e.cc,e.tc,e.bc]);n[t++]=!0;for(var p1=0,Gl=ql.length;p1<Gl;p1++){var Cs=n[--t];n[t++]=Cs&&li(e.xc)+1<=li(h(ql,p1))}if(n[--t]){n[t++]=e.X;break}}e.k=e.k+1}},e.addtocws=function(){var It=n[t-1];It.length+e.j>1480&&(t--,n[t++]="bwipp.codeoneTooLong#24766",n[t++]="Maximum length exceeded",Z());var xn=n[--t];H(e.cws,e.j,xn),e.j=xn.length+e.j},e.tobin=function(){var It=fe(n[--t]);n[t++]=It;for(var xn=0,vi=It.length-1;xn<=vi;xn+=1){var At=n[t-1];C(At,xn,48)}var tn=n[t-1];n[t++]=tn;var Cn=n[t-3],In=n[t-1];n[t-3]=n[t-2],t-=2;var xi=Nn(fe(In.length),Cn,2);H(In,In.length-xi.length,xi),n[t++]=1/0;var Sr=n[--t],oi=n[--t];n[t++]=Sr,Ie(oi,function(){var Wr=n[--t];n[t++]=Wr-48});var da=o();n[t++]=da},e.encA=function(){for(var It=0;It<1;It++){if(h(e.numD,e.i)>=21){e.Dbits=o([1,1,1,1]),e.mode=e.D;break}var xn=h(e.numD,e.i);if(xn>=13&&R(xn+e.i)==e.msglen){e.Dbits=o([1,1,1,1]),e.mode=e.D;break}if(h(e.numD,e.i)>=2){var vi=fe(2);C(vi,0,h(e.msg,e.i)),C(vi,1,h(e.msg,e.i+1)),n[t++]=h(e.Avals,vi),e.addtocws(),e.i=e.i+2;break}if(h(e.msg,e.i)==e.fnc1){if(h(e.numD,e.i+1)>=15){n[t++]=h(e.Avals,e.fnc1lD),e.addtocws(),e.i=e.i+1,e.Dbits=o([]),e.mode=e.D;break}var At=h(e.numD,e.i+1);if(At>=7&&R(At+e.i)+1==e.msglen){n[t++]=h(e.Avals,e.fnc1lD),e.addtocws(),e.i=e.i+1,e.Dbits=o([]),e.mode=e.D;break}}n[t++]="newmode",e.lookup();var tn=n[--t];if(e[n[--t]]=tn,e.newmode!=e.mode){n[t++]=h(e.Avals,h(o([-1,e.lC,e.lT,e.lX,e.lD,e.lB]),e.newmode)),e.addtocws(),e.mode=e.newmode;break}n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1;break}},e.CTXvalstocws=function(){e.in=n[--t],n[t++]=1/0;for(var It=0,xn=e.in.length-1;It<=xn;It+=3){var vi=O(e.in,It,3);n[t++]=0;for(var At=0,tn=vi.length;At<tn;At++){var Cn=n[--t];n[t++]=R(Cn+h(vi,At))*40}var In=~~(n[--t]/40)+1;n[t++]=~~(In/256),n[t++]=In%256}Rn(o(Ur()));var xi=n[--t];n[t-1]=xi},e.encCTX=function(){for(e.p=0,e.ctxvals=o(2220);e.i!=e.msglen;){if(e.p%3==0){if(h(e.numD,e.i)>=12){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A;break}var It=h(e.numD,e.i);if(It>=8&&R(It+e.i)==e.msglen){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A;break}if(e.mode==e.X){var xn=h(e.Xvals,h(e.msg,e.i))!==void 0;if(!xn){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),(h(e.numremcws,e.j)!=1||h(e.msg,e.i)>127)&&(n[t++]=o([e.unlcw]),e.addtocws()),e.mode=e.A;break}if(e.i+1<e.msglen){var vi=h(e.Xvals,h(e.msg,e.i+1))!==void 0;if(!vi)break;if(e.i+2<e.msglen){var At=h(e.Xvals,h(e.msg,e.i+2))!==void 0;if(!At)break}}}else if(e.lookup(),n[--t]!=e.mode){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A;break}if(e.msglen-e.i<=3){e.remcws=h(e.numremcws,e.j+~~(e.p/3)*2),n[t++]=1/0;for(var tn=O(e.msg,e.i,e.msglen-e.i),Cn=0,In=tn.length;Cn<In;Cn++){var xi=h(tn,Cn),Sr=h(h(e.encvals,e.mode),xi)!==void 0;n[t++]=xi,Sr?W(h(h(e.encvals,e.mode),n[--t])):(n[t-1]=-1,n[t++]=-1,n[t++]=-1,n[t++]=-1)}if(e.remvals=o(),e.remcws==2&&e.remvals.length==3){n[t++]=1/0,W(O(e.ctxvals,0,e.p)),W(e.remvals);var oi=o();n[t++]=oi,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==2&&e.remvals.length==2&&e.mode!=e.X){n[t++]=1/0,W(O(e.ctxvals,0,e.p)),W(e.remvals),W(h(h(e.encvals,e.mode),e.sft1));var da=o();n[t++]=da,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==2&&e.remvals.length==1){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==1&&e.remvals.length==1){n[t++]=O(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}}}var Wr=h(h(e.encvals,e.mode),h(e.msg,e.i));H(e.ctxvals,e.p,Wr),e.p=Wr.length+e.p,e.i=e.i+1}if(e.mode!=e.A){for(;e.p%3!=0;)e.i=e.i-1,e.p=e.p-h(h(e.encvals,e.mode),h(e.msg,e.i)).length;n[t++]=1/0,W(O(e.ctxvals,0,e.p));var fs=o();if(n[t++]=fs,e.CTXvalstocws(),e.addtocws(),n[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A,e.i!=e.msglen)if(h(e.numD,e.i)>=2){var Qa=fe(2);C(Qa,0,h(e.msg,e.i)),C(Qa,1,h(e.msg,e.i+1)),n[t++]=h(e.Avals,Qa),e.addtocws(),e.i=e.i+2}else n[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.encD=function(){for(;;){if(h(e.numD,e.i)<3){if(e.Drem=(8-e.Dbits.length%8)%8,e.remcws=h(e.numremcws,e.j+~~(e.Dbits.length/8)),(h(e.numremcws,e.j+~~(e.Dbits.length/8)-1)-1==0&&e.Drem==0||e.remcws==1&&e.Drem!=0)&&e.i==e.msglen){(e.Drem==4||e.Drem==6)&&(n[t++]=1/0,W(e.Dbits),n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,e.Dbits=o()),(e.Drem==2||e.Drem==6)&&(n[t++]=1/0,W(e.Dbits),n[t++]=0,n[t++]=1,e.Dbits=o());break}if((e.i==e.msglen-1&&h(e.numD,e.i)==1||e.i==e.msglen-2&&h(e.numD,e.i)==2)&&e.remcws==1&&e.Drem==0)break;e.i==e.msglen-1&&h(e.numD,e.i)==1&&e.remcws==1&&(e.Drem==4||e.Drem==6)||(n[t++]=1/0,W(e.Dbits),n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,e.Dbits=o(),e.Drem=(8-e.Dbits.length%8)%8),(e.Drem==4||e.Drem==6)&&(h(e.numD,e.i)>=1?(n[t++]=1/0,W(e.Dbits),n[t++]=h(e.msg,e.i)-48+1,n[t++]=4,e.tobin(),W(n[--t]),e.Dbits=o(),e.i=e.i+1):(n[t++]=1/0,W(e.Dbits),n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,e.Dbits=o()),e.Drem=e.Drem-4),e.Drem==2&&(n[t++]=1/0,W(e.Dbits),n[t++]=0,n[t++]=1,e.Dbits=o(),e.Drem=0);break}n[t++]=1/0,W(e.Dbits);var It=O(e.msg,e.i,3);n[t++]=0;for(var xn=0,vi=It.length;xn<vi;xn++){var At=n[--t];n[t++]=R(At+(h(It,xn)-48))*10}var tn=n[--t];n[t++]=~~(tn/10)+1,n[t++]=10,e.tobin(),W(n[--t]),e.Dbits=o(),e.i=e.i+3}n[t++]=1/0;for(var Cn=0,In=e.Dbits.length-1;Cn<=In;Cn+=8){var xi=O(e.Dbits,Cn,8);n[t++]=0;for(var Sr=0,oi=xi.length;Sr<oi;Sr++){var da=n[--t];n[t++]=R(da+h(xi,Sr))*2}var Wr=n[--t];n[t++]=~~(Wr/2)}Rn(o(Ur()));var fs=n[--t];n[t-1]=fs,e.addtocws(),e.mode=e.A},e.encB=function(){for(e.p=0,e.bvals=o(1480);!(e.i==e.msglen||h(e.msg,e.i)<0||(e.lookup(),n[--t]!=e.mode));)C(e.bvals,e.p,h(e.msg,e.i)),e.p=e.p+1,e.i=e.i+1;e.remcws=h(e.numremcws,e.j+e.p)-1,n[t++]=1/0,e.remcws==0&&e.i==e.msglen?n[t++]=0:e.p<250?n[t++]=e.p:(n[t++]=~~(e.p/250)+249,n[t++]=e.p%250),W(O(e.bvals,0,e.p)),e.bvals=o(),n[t++]=e.bvals,e.addtocws(),e.mode=e.A},e.cws=o(1480),e.mode=e.A,e.i=0,e.j=0;!(e.i>=e.msglen||e[h(o(["encA","encCTX","encCTX","encCTX","encD","encB"]),e.mode)]()===!0););e.cws=O(e.cws,0,e.j)}for(var Na=e.metrics,na=0,$s=Na.length;na<$s&&(e.m=h(Na,na),e.vers=h(e.m,0),e.rows=h(e.m,1),e.cols=h(e.m,2),e.dcol=h(e.m,3),e.dcws=h(e.m,4),e.rscw=h(e.m,5),e.rsbl=h(e.m,6),e.riso=h(e.m,7),e.risi=h(e.m,8),e.risl=h(e.m,9),e.dcpb=~~(e.dcws/e.rsbl),e.ecpb=~~(e.rscw/e.rsbl),e.okay=!0,qe(e.version,"unset")&&qe(e.version,e.vers)&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);na++);if(e.okay||(n[t++]="bwipp.codeoneNoValidSymbol#25082",n[t++]="Maximum length exceeded",Z()),e.stype){n[t++]=1/0;for(var ts=0,$r=R(e.dcws-e.cws.length);ts<$r;ts++)n[t++]=0;W(e.cws),e.cws=o()}else{n[t++]=1/0,W(e.cws);for(var Qr=0,Co=R(e.dcws-e.cws.length);Qr<Co;Qr++)n[t++]=129;e.cws=o()}var Ws=h(e.options,"debugcws")!==void 0;Ws&&(n[t++]="bwipp.debugcws#25092",n[t++]=e.cws,Z()),e.cwbs=o(e.rsbl),e.ecbs=o(e.rsbl);for(var pa=0,gs=e.rsbl-1;pa<=gs;pa+=1){e.i=pa,e.cwb=o(e.dcpb);for(var Ta=0,vs=e.dcpb-1;Ta<=vs;Ta+=1)e.j=Ta,C(e.cwb,e.j,h(e.cws,R(e.j*e.rsbl+e.i)));C(e.cwbs,e.i,e.cwb)}var xs=e.stype?32:256;e.gf=xs,e["gf-1"]=e.gf-1;var lo=e.stype?37:301;e.pm=lo,n[t++]=1/0,n[t++]=1;for(var Gt=0,qi=e["gf-1"];Gt<qi;Gt++){var Zi=n[t-1],ia=Zi*2;if(n[t++]=ia,ia>=e.gf){var cr=n[--t];n[t++]=cr^e.pm}}e.rsalog=o(),e.rslog=o(e.gf);for(var ma=1,Ma=e["gf-1"];ma<=Ma;ma+=1)C(e.rslog,h(e.rsalog,ma),ma);e.rsprod=function(){var It=n[t-1],xn=n[t-2];if(It!=0&&xn!=0){var vi=h(e.rslog,n[--t]),At=h(e.rsalog,R(vi+h(e.rslog,n[--t]))%e["gf-1"]);n[t++]=At}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var Ns=0,Nt=e.ecpb;Ns<Nt;Ns++)n[t++]=0;e.coeffs=o();for(var $t=0,Yn=e.ecpb-1;$t<=Yn;$t+=1){e.i=$t,C(e.coeffs,e.i+1,h(e.coeffs,e.i));for(var Kn=e.i;Kn>=1;Kn-=1){e.j=Kn,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var Jn=n[--t],Si=n[--t],Wn=n[--t];C(n[--t],Wn,Ha(Si,Jn))}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var $i=n[--t],Ii=n[--t];C(n[--t],Ii,$i)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1);for(var fi=0,Fi=e.cwbs.length-1;fi<=Fi;fi+=1){e.i=fi,n[t++]=1/0,W(h(e.cwbs,e.i));for(var Gi=0,mr=e.ecpb;Gi<mr;Gi++)n[t++]=0;e.rscws=o();for(var Vi=0,Ni=e.dcpb-1;Vi<=Ni;Vi+=1){e.m=Vi,e.k=h(e.rscws,e.m);for(var Ti=0,ci=e.ecpb-1;Ti<=ci;Ti+=1){e.j=Ti,n[t++]=e.rscws,n[t++]=e.m+e.j+1,n[t++]=h(e.coeffs,e.ecpb-e.j-1),n[t++]=e.k,e.rsprod();var Mi=n[--t],Ar=n[--t];C(n[--t],Ar,Ha(Mi,h(e.rscws,e.m+e.j+1)))}}C(e.ecbs,e.i,O(e.rscws,e.dcpb,e.ecpb))}n[t++]=1/0,W(e.cws);for(var gr=0,ga=e.rscw;gr<ga;gr++)n[t++]=0;e.cws=o();for(var Sa=0,ns=e.rscw-1;Sa<=ns;Sa+=1)e.i=Sa,C(e.cws,R(e.dcws+e.i),h(h(e.ecbs,e.i%e.rsbl),~~(e.i/e.rsbl)));var Pa=e.stype?5:8;e.mmat=o(R(e.dcws+e.rscw)*Pa),e.r=0,e.c=0;for(var Un=e.stype?2:1,ni=0,hi=Un,Wi=e.cws.length-1;hi<0?ni>=Wi:ni<=Wi;ni+=hi){if(e.i=ni,e.stype){var Ya=zi(fe(5),"00000"),bs=Nn(fe(5),h(e.cws,e.i),2);H(Ya,5-bs.length,bs);var Ts=1/0,Xs=Ya;n[t++]=Ts,Ie(Xs,function(){var It=n[--t];n[t++]=It-48}),e.c1=o();var Ms=zi(fe(5),"00000"),Rs=Nn(fe(5),h(e.cws,e.i+1),2);H(Ms,5-Rs.length,Rs);var ys=1/0,Os=Ms;n[t++]=ys,Ie(Os,function(){var It=n[--t];n[t++]=It-48}),e.c2=o(),n[t++]=1/0,W(O(e.c1,0,3)),W(O(e.c2,0,2)),e.top=o(),n[t++]=1/0,W(O(e.c1,3,2)),W(O(e.c2,2,3)),e.bot=o()}else{var Ri=zi(fe(8),"00000000"),er=Nn(fe(8),h(e.cws,e.i),2);H(Ri,8-er.length,er);var Yi=1/0,Oi=Ri;n[t++]=Yi,Ie(Oi,function(){var It=n[--t];n[t++]=It-48});var Or=o();e.top=O(Or,0,4),e.bot=O(Or,4,4)}H(e.mmat,R(e.r*e.dcol+e.c),e.top),H(e.mmat,R((e.r+1)*e.dcol+e.c),e.bot),e.c=e.c+e.top.length,e.c==e.dcol&&(e.c=0,e.r=e.r+2)}e.mmv=function(){var It=n[--t],xn=n[--t];n[t++]=R(xn+It*e.cols)},n[t++]=1/0;for(var Ds=0,ol=e.rows*e.cols;Ds<ol;Ds++)n[t++]=-1;e.pixs=o();var Eo=o([function(){for(var It=0,xn=e.cols;It<xn;It++)n[t++]=0},function(){for(var It=0,xn=e.cols;It<xn;It++)n[t++]=1},function(){n[t++]=0;for(var It=0,xn=e.cols-2;It<xn;It++)n[t++]=1;n[t++]=0},function(){n[t++]=0,n[t++]=1;for(var It=0,xn=e.cols-4;It<xn;It++)n[t++]=0;n[t++]=1,n[t++]=0},function(){for(var It=0,xn=~~((e.cols-1)/2);It<xn;It++)n[t++]=-1;n[t++]=1;for(var vi=0,At=~~((e.cols-1)/2);vi<At;vi++)n[t++]=-1},function(){for(var It=0,xn=~~((e.cols-1)/2);It<xn;It++)n[t++]=-1;n[t++]=0;for(var vi=0,At=~~((e.cols-1)/2);vi<At;vi++)n[t++]=-1},function(){n[t++]=1;for(var It=0,xn=e.cols-2;It<xn;It++)n[t++]=0;n[t++]=1},function(){n[t++]=1,n[t++]=0;for(var It=0,xn=e.cols-4;It<xn;It++)n[t++]=1;n[t++]=0,n[t++]=1}]);e.artifact=Eo;var Ks=new Map([["A","121343"],["B","12134343"],["C","12121343"],["D","1213434343"],["E","1212134343"],["F","1212121343"],["G","121213434343"],["H","121212134343"],["S","56661278"],["T","5666666666127878"]]);e.cpatmap=Ks,e.cpat=h(e.cpatmap,O(e.vers,0,1)),n[t++]=e.pixs,n[t++]=0,n[t++]=~~(R(e.rows-e.cpat.length)/2),e.mmv(),n[t++]=1/0,Ie(e.cpat,function(){if(h(e.artifact,n[--t]-49)()===!0)return!0});var co=o(),lt=n[--t];H(n[--t],lt,co);for(var Ft=0,jn=e.risl-1;Ft<=jn;Ft+=1){e.i=Ft;for(var si=e.riso,dr=e.risi,ca=e.cols-1;dr<0?si>=ca:si<=ca;si+=dr){e.j=si;var va=e.i%12==0?1:0,Fa=o([1,va]);n[t++]=Fa,n[t++]=Fa,n[t++]=e.pixs,n[t++]=e.j,n[t++]=e.i,e.mmv();var ws=n[t-3],As=n[t-1];if(H(n[t-2],As,ws),t-=3,e.i!=e.risl-1){n[t++]=e.pixs,n[t++]=R(e.cols-e.j)-2,n[t++]=R(e.rows-e.i)-1,e.mmv();var ll=n[t-3],qo=n[t-1];H(n[t-2],qo,ll),t-=3}else t--}}var xa=new Map([["A",o([o([12,5])])],["B",o([o([16,7])])],["C",o([o([26,12])])],["D",o([])],["E",o([o([26,23])])],["F",o([o([26,32]),o([70,32]),o([26,34]),o([70,34])])],["G",o([o([27,48]),o([69,48])])],["H",o([o([26,70]),o([66,70]),o([106,70]),o([26,72]),o([66,72]),o([106,72])])],["S-10",o([])],["S-20",o([o([10,4])])],["S-30",o([o([15,4]),o([15,6])])],["T-16",o([o([8,10])])],["T-32",o([o([16,10]),o([16,12])])],["T-48",o([o([24,10]),o([24,12]),o([24,14])])]]);e.blackdotmap=xa,Ie(h(e.blackdotmap,e.vers),function(){var It=n[--t];n[t++]=e.pixs,W(It),e.mmv();var xn=n[--t];C(n[--t],xn,1)}),e.j=0;for(var _o=0,Ss=e.pixs.length-1;_o<=Ss;_o+=1)e.i=_o,h(e.pixs,e.i)==-1&&(C(e.pixs,e.i,h(e.mmat,e.j)),e.j=e.j+1);n[t++]=1/0,n[t++]="ren",n[t++]="renmatrix",n[t++]="pixs",n[t++]=e.pixs,n[t++]="pixx",n[t++]=e.cols,n[t++]="pixy",n[t++]=e.rows,n[t++]="height",n[t++]=e.rows/72*2,n[t++]="width",n[t++]=e.cols/72*2,(e.stype||e.ttype)&&(n[t++]="borderleft",n[t++]=1,n[t++]="borderright",n[t++]=1,n[t++]="bordertop",n[t++]=0,n[t++]="borderbottom",n[t++]=1),n[t++]="opt",n[t++]=e.options;var Go=rt();n[t++]=Go,e.dontdraw||Lt(),e=r}function ET(){var r=e;if(e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.eclevel="L2",e.parse=!1,e.parsefnc=!1,e.mask=-1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hanxinEmptyData#25328",n[t++]="The data must not be empty",Z()),qe(e.version,"unset")){var i=e.version.length,a=i>=1&&i<=2;if(n[t++]=a,a){t--;var s=e.version;n[t++]=!0;for(var l=0,c=s.length;l<c;l++){var d=h(s,l);(d<48||d>57)&&(n[t-1]=!1)}var f=n[t-1];if(f){t--;var m=Ye(e.version);n[t++]=m>=1&&m<=84}}n[--t]||(n[t++]="bwipp.hanxinInvalidVersion#25339",n[t++]="Valid versions are 1 to 84",Z())}var g=e.eclevel.length==2;if(n[t++]=g,g){t--;var v=ce(O(e.eclevel,0,1),"L");if(n[t++]=v,v){t--;var y=h(e.eclevel,1)-48;n[t++]=y>=1&&y<=4}}n[--t]||(n[t++]="bwipp.hanxinInvalidErrorCorrectionLevel#25349",n[t++]="Valid error correction levels are L1 to L4",Z()),e.mask!=-1&&(e.mask<1||e.mask>4)&&(n[t++]="bwipp.hanxinInvalidErrorCorrectionLevel#25354",n[t++]="The valid masks are 1 to 4",Z());var A=new Map([["parse",e.parse],["parsefnc",e.parsefnc]]);e.fncvals=A,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var w=n[--t];e[n[--t]]=w,e.msglen=e.msg.length,e.tobin=function(){var nn=fe(n[--t]);n[t++]=nn;for(var yn=0,qn=nn.length-1;yn<=qn;yn+=1){var Tn=n[t-1];C(Tn,yn,48)}var Gn=n[t-1];n[t++]=Gn;var gi=n[t-3],Vn=n[t-1];n[t-3]=n[t-2],t-=2;var ln=Nn(fe(Vn.length),gi,2);H(Vn,Vn.length-ln.length,ln)},e.bits=fe(17+e.msglen*8),H(e.bits,0,"0011"),n[t++]=e.bits,n[t++]=4,n[t++]=e.msglen,n[t++]=13,e.tobin();var k=n[--t],E=n[--t];H(n[--t],E,k);for(var I=0,T=e.msglen-1;I<=T;I+=1){e.i=I,n[t++]=e.bits,n[t++]=17+e.i*8,n[t++]=h(e.msg,e.i),n[t++]=8,e.tobin();var N=n[--t],j=n[--t];H(n[--t],j,N)}e.metrics=o([o(["1",23,-1,0,205,o([1,21,4]),o([0,-1,-1]),o([0,-1,-1]),o([1,17,8]),o([0,-1,-1]),o([0,-1,-1]),o([1,13,12]),o([0,-1,-1]),o([0,-1,-1]),o([1,9,16]),o([0,-1,-1]),o([0,-1,-1])]),o(["2",25,-1,0,301,o([1,31,6]),o([0,-1,-1]),o([0,-1,-1]),o([1,25,12]),o([0,-1,-1]),o([0,-1,-1]),o([1,19,18]),o([0,-1,-1]),o([0,-1,-1]),o([1,15,22]),o([0,-1,-1]),o([0,-1,-1])]),o(["3",27,-1,0,405,o([1,42,8]),o([0,-1,-1]),o([0,-1,-1]),o([1,34,16]),o([0,-1,-1]),o([0,-1,-1]),o([1,26,24]),o([0,-1,-1]),o([0,-1,-1]),o([1,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["4",29,14,1,439,o([1,46,8]),o([0,-1,-1]),o([0,-1,-1]),o([1,38,16]),o([0,-1,-1]),o([0,-1,-1]),o([1,30,24]),o([0,-1,-1]),o([0,-1,-1]),o([1,22,32]),o([0,-1,-1]),o([0,-1,-1])]),o(["5",31,16,1,555,o([1,57,12]),o([0,-1,-1]),o([0,-1,-1]),o([1,49,20]),o([0,-1,-1]),o([0,-1,-1]),o([1,37,32]),o([0,-1,-1]),o([0,-1,-1]),o([1,14,20]),o([1,13,22]),o([0,-1,-1])]),o(["6",33,16,1,675,o([1,70,14]),o([0,-1,-1]),o([0,-1,-1]),o([1,58,26]),o([0,-1,-1]),o([0,-1,-1]),o([1,24,20]),o([1,22,18]),o([0,-1,-1]),o([1,16,24]),o([1,18,26]),o([0,-1,-1])]),o(["7",35,17,1,805,o([1,84,16]),o([0,-1,-1]),o([0,-1,-1]),o([1,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([1,26,22]),o([1,28,24]),o([0,-1,-1]),o([2,14,20]),o([1,12,20]),o([0,-1,-1])]),o(["8",37,18,1,943,o([1,99,18]),o([0,-1,-1]),o([0,-1,-1]),o([1,40,18]),o([1,41,18]),o([0,-1,-1]),o([1,31,26]),o([1,32,28]),o([0,-1,-1]),o([2,16,24]),o([1,15,22]),o([0,-1,-1])]),o(["9",39,19,1,1089,o([1,114,22]),o([0,-1,-1]),o([0,-1,-1]),o([2,48,20]),o([0,-1,-1]),o([0,-1,-1]),o([2,24,20]),o([1,26,22]),o([0,-1,-1]),o([2,18,28]),o([1,18,26]),o([0,-1,-1])]),o(["10",41,20,1,1243,o([1,131,24]),o([0,-1,-1]),o([0,-1,-1]),o([1,52,22]),o([1,57,24]),o([0,-1,-1]),o([2,27,24]),o([1,29,24]),o([0,-1,-1]),o([2,21,32]),o([1,19,30]),o([0,-1,-1])]),o(["11",43,14,2,1289,o([1,135,26]),o([0,-1,-1]),o([0,-1,-1]),o([1,56,24]),o([1,57,24]),o([0,-1,-1]),o([2,28,24]),o([1,31,26]),o([0,-1,-1]),o([2,22,32]),o([1,21,32]),o([0,-1,-1])]),o(["12",45,15,2,1455,o([1,153,28]),o([0,-1,-1]),o([0,-1,-1]),o([1,62,26]),o([1,65,28]),o([0,-1,-1]),o([2,32,28]),o([1,33,28]),o([0,-1,-1]),o([3,17,26]),o([1,22,30]),o([0,-1,-1])]),o(["13",47,16,2,1629,o([1,86,16]),o([1,85,16]),o([0,-1,-1]),o([1,71,30]),o([1,72,30]),o([0,-1,-1]),o([2,37,32]),o([1,35,30]),o([0,-1,-1]),o([3,20,30]),o([1,21,32]),o([0,-1,-1])]),o(["14",49,16,2,1805,o([1,94,18]),o([1,95,18]),o([0,-1,-1]),o([2,51,22]),o([1,55,24]),o([0,-1,-1]),o([3,30,26]),o([1,31,26]),o([0,-1,-1]),o([4,18,28]),o([1,17,24]),o([0,-1,-1])]),o(["15",51,17,2,1995,o([1,104,20]),o([1,105,20]),o([0,-1,-1]),o([2,57,24]),o([1,61,26]),o([0,-1,-1]),o([3,33,28]),o([1,36,30]),o([0,-1,-1]),o([4,20,30]),o([1,19,30]),o([0,-1,-1])]),o(["16",53,17,2,2187,o([1,115,22]),o([1,114,22]),o([0,-1,-1]),o([2,65,28]),o([1,61,26]),o([0,-1,-1]),o([3,38,32]),o([1,33,30]),o([0,-1,-1]),o([5,19,28]),o([1,14,24]),o([0,-1,-1])]),o(["17",55,18,2,2393,o([1,126,24]),o([1,125,24]),o([0,-1,-1]),o([2,70,30]),o([1,69,30]),o([0,-1,-1]),o([4,33,28]),o([1,29,26]),o([0,-1,-1]),o([5,20,30]),o([1,19,30]),o([0,-1,-1])]),o(["18",57,19,2,2607,o([1,136,26]),o([1,137,26]),o([0,-1,-1]),o([3,56,24]),o([1,59,26]),o([0,-1,-1]),o([5,35,30]),o([0,-1,-1]),o([0,-1,-1]),o([6,18,28]),o([1,21,28]),o([0,-1,-1])]),o(["19",59,20,2,2829,o([1,148,28]),o([1,149,28]),o([0,-1,-1]),o([3,61,26]),o([1,64,28]),o([0,-1,-1]),o([7,24,20]),o([1,23,22]),o([0,-1,-1]),o([6,20,30]),o([1,21,32]),o([0,-1,-1])]),o(["20",61,20,2,3053,o([3,107,20]),o([0,-1,-1]),o([0,-1,-1]),o([3,65,28]),o([1,72,30]),o([0,-1,-1]),o([7,26,22]),o([1,23,22]),o([0,-1,-1]),o([7,19,28]),o([1,20,32]),o([0,-1,-1])]),o(["21",63,21,2,3291,o([3,115,22]),o([0,-1,-1]),o([0,-1,-1]),o([4,56,24]),o([1,63,28]),o([0,-1,-1]),o([7,28,24]),o([1,25,22]),o([0,-1,-1]),o([8,18,28]),o([1,21,22]),o([0,-1,-1])]),o(["22",65,16,3,3383,o([2,116,22]),o([1,122,24]),o([0,-1,-1]),o([4,56,24]),o([1,72,30]),o([0,-1,-1]),o([7,28,24]),o([1,32,26]),o([0,-1,-1]),o([8,18,28]),o([1,24,30]),o([0,-1,-1])]),o(["23",67,17,3,3631,o([3,127,24]),o([0,-1,-1]),o([0,-1,-1]),o([5,51,22]),o([1,62,26]),o([0,-1,-1]),o([7,30,26]),o([1,35,26]),o([0,-1,-1]),o([8,20,30]),o([1,21,32]),o([0,-1,-1])]),o(["24",69,17,3,3887,o([2,135,26]),o([1,137,26]),o([0,-1,-1]),o([5,56,24]),o([1,59,26]),o([0,-1,-1]),o([7,33,28]),o([1,30,28]),o([0,-1,-1]),o([11,16,24]),o([1,19,26]),o([0,-1,-1])]),o(["25",71,18,3,4151,o([3,105,20]),o([1,121,22]),o([0,-1,-1]),o([5,61,26]),o([1,57,26]),o([0,-1,-1]),o([9,28,24]),o([1,28,22]),o([0,-1,-1]),o([10,19,28]),o([1,18,30]),o([0,-1,-1])]),o(["26",73,18,3,4423,o([2,157,30]),o([1,150,28]),o([0,-1,-1]),o([5,65,28]),o([1,61,26]),o([0,-1,-1]),o([8,33,28]),o([1,34,30]),o([0,-1,-1]),o([10,19,28]),o([2,15,26]),o([0,-1,-1])]),o(["27",75,19,3,4703,o([3,126,24]),o([1,115,22]),o([0,-1,-1]),o([7,51,22]),o([1,54,22]),o([0,-1,-1]),o([8,35,30]),o([1,37,30]),o([0,-1,-1]),o([15,15,22]),o([1,10,22]),o([0,-1,-1])]),o(["28",77,19,3,4991,o([4,105,20]),o([1,103,20]),o([0,-1,-1]),o([7,56,24]),o([1,45,18]),o([0,-1,-1]),o([10,31,26]),o([1,27,26]),o([0,-1,-1]),o([10,17,26]),o([3,20,28]),o([1,21,28])]),o(["29",79,20,3,5287,o([3,139,26]),o([1,137,28]),o([0,-1,-1]),o([6,66,28]),o([1,66,30]),o([0,-1,-1]),o([9,36,30]),o([1,34,32]),o([0,-1,-1]),o([13,19,28]),o([1,17,32]),o([0,-1,-1])]),o(["30",81,20,3,5591,o([6,84,16]),o([1,82,16]),o([0,-1,-1]),o([6,70,30]),o([1,68,30]),o([0,-1,-1]),o([7,35,30]),o([3,33,28]),o([1,32,28]),o([13,20,30]),o([1,20,28]),o([0,-1,-1])]),o(["31",83,21,3,5903,o([5,105,20]),o([1,94,18]),o([0,-1,-1]),o([6,74,32]),o([1,71,30]),o([0,-1,-1]),o([11,33,28]),o([1,34,32]),o([0,-1,-1]),o([13,19,28]),o([3,16,26]),o([0,-1,-1])]),o(["32",85,17,4,6033,o([4,127,24]),o([1,126,24]),o([0,-1,-1]),o([7,66,28]),o([1,66,30]),o([0,-1,-1]),o([12,30,24]),o([1,24,28]),o([1,24,30]),o([15,19,28]),o([1,17,32]),o([0,-1,-1])]),o(["33",87,17,4,6353,o([7,84,16]),o([1,78,16]),o([0,-1,-1]),o([7,70,30]),o([1,66,28]),o([0,-1,-1]),o([12,33,28]),o([1,32,30]),o([0,-1,-1]),o([14,21,32]),o([1,24,28]),o([0,-1,-1])]),o(["34",89,18,4,6689,o([5,117,22]),o([1,117,24]),o([0,-1,-1]),o([8,66,28]),o([1,58,26]),o([0,-1,-1]),o([11,38,32]),o([1,34,32]),o([0,-1,-1]),o([15,20,30]),o([2,17,26]),o([0,-1,-1])]),o(["35",91,18,4,7025,o([4,148,28]),o([1,146,28]),o([0,-1,-1]),o([8,68,30]),o([1,70,24]),o([0,-1,-1]),o([10,36,32]),o([3,38,28]),o([0,-1,-1]),o([16,19,28]),o([3,16,26]),o([0,-1,-1])]),o(["36",93,19,4,7377,o([4,126,24]),o([2,135,26]),o([0,-1,-1]),o([8,70,28]),o([2,43,26]),o([0,-1,-1]),o([13,32,28]),o([2,41,30]),o([0,-1,-1]),o([17,19,28]),o([3,15,26]),o([0,-1,-1])]),o(["37",95,19,4,7729,o([5,136,26]),o([1,132,24]),o([0,-1,-1]),o([5,67,30]),o([4,68,28]),o([1,69,28]),o([14,35,30]),o([1,32,24]),o([0,-1,-1]),o([18,18,26]),o([3,16,28]),o([1,14,28])]),o(["38",97,19,4,8089,o([3,142,26]),o([3,141,28]),o([0,-1,-1]),o([8,70,30]),o([1,73,32]),o([1,74,32]),o([12,34,30]),o([3,34,26]),o([1,35,28]),o([18,21,32]),o([1,27,30]),o([0,-1,-1])]),o(["39",99,20,4,8465,o([5,116,22]),o([2,103,20]),o([1,102,20]),o([9,74,32]),o([1,74,30]),o([0,-1,-1]),o([14,34,28]),o([2,32,32]),o([1,32,30]),o([19,21,32]),o([1,25,26]),o([0,-1,-1])]),o(["40",101,20,4,8841,o([7,116,22]),o([1,117,22]),o([0,-1,-1]),o([11,65,28]),o([1,58,24]),o([0,-1,-1]),o([15,38,32]),o([1,27,28]),o([0,-1,-1]),o([20,20,30]),o([1,20,32]),o([1,21,32])]),o(["41",103,17,5,9009,o([6,136,26]),o([1,130,24]),o([0,-1,-1]),o([11,66,28]),o([1,62,30]),o([0,-1,-1]),o([14,34,28]),o([3,34,32]),o([1,30,30]),o([18,20,30]),o([3,20,28]),o([2,15,26])]),o(["42",105,17,5,9401,o([5,105,20]),o([2,115,22]),o([2,116,22]),o([10,75,32]),o([1,73,32]),o([0,-1,-1]),o([16,38,32]),o([1,27,28]),o([0,-1,-1]),o([22,19,28]),o([2,16,30]),o([1,19,30])]),o(["43",107,18,5,9799,o([6,147,28]),o([1,146,28]),o([0,-1,-1]),o([11,66,28]),o([2,65,30]),o([0,-1,-1]),o([18,33,28]),o([2,33,30]),o([0,-1,-1]),o([22,21,32]),o([1,28,30]),o([0,-1,-1])]),o(["44",109,18,5,10207,o([6,116,22]),o([3,125,24]),o([0,-1,-1]),o([11,75,32]),o([1,68,30]),o([0,-1,-1]),o([13,35,28]),o([6,34,32]),o([1,30,30]),o([23,21,32]),o([1,26,30]),o([0,-1,-1])]),o(["45",111,18,5,10623,o([7,105,20]),o([4,95,18]),o([0,-1,-1]),o([12,67,28]),o([1,63,30]),o([1,62,32]),o([21,31,26]),o([2,33,32]),o([0,-1,-1]),o([23,21,32]),o([2,24,30]),o([0,-1,-1])]),o(["46",113,19,5,11045,o([10,116,22]),o([0,-1,-1]),o([0,-1,-1]),o([12,74,32]),o([1,78,30]),o([0,-1,-1]),o([18,37,32]),o([1,39,30]),o([1,41,28]),o([25,21,32]),o([1,27,28]),o([0,-1,-1])]),o(["47",115,19,5,11477,o([5,126,24]),o([4,115,22]),o([1,114,22]),o([12,67,28]),o([2,66,32]),o([1,68,30]),o([21,35,30]),o([1,39,30]),o([0,-1,-1]),o([26,21,32]),o([1,28,28]),o([0,-1,-1])]),o(["48",117,19,5,11917,o([9,126,24]),o([1,117,22]),o([0,-1,-1]),o([13,75,32]),o([1,68,30]),o([0,-1,-1]),o([20,35,30]),o([3,35,28]),o([0,-1,-1]),o([27,21,32]),o([1,28,30]),o([0,-1,-1])]),o(["49",119,17,6,12111,o([9,126,24]),o([1,137,26]),o([0,-1,-1]),o([13,71,30]),o([2,68,32]),o([0,-1,-1]),o([20,37,32]),o([1,39,28]),o([1,38,28]),o([24,20,32]),o([5,25,28]),o([0,-1,-1])]),o(["50",121,17,6,12559,o([8,147,28]),o([1,141,28]),o([0,-1,-1]),o([10,73,32]),o([4,74,30]),o([1,73,30]),o([16,36,32]),o([6,39,30]),o([1,37,30]),o([27,21,32]),o([3,20,26]),o([0,-1,-1])]),o(["51",123,18,6,13025,o([9,137,26]),o([1,135,26]),o([0,-1,-1]),o([12,70,30]),o([4,75,32]),o([0,-1,-1]),o([24,35,30]),o([1,40,28]),o([0,-1,-1]),o([23,20,32]),o([8,24,30]),o([0,-1,-1])]),o(["52",125,18,6,13489,o([14,95,18]),o([1,86,18]),o([0,-1,-1]),o([13,73,32]),o([3,77,30]),o([0,-1,-1]),o([24,35,30]),o([2,35,28]),o([0,-1,-1]),o([26,21,32]),o([5,21,30]),o([1,23,30])]),o(["53",127,18,6,13961,o([9,147,28]),o([1,142,28]),o([0,-1,-1]),o([10,73,30]),o([6,70,32]),o([1,71,32]),o([25,35,30]),o([2,34,26]),o([0,-1,-1]),o([29,21,32]),o([4,22,30]),o([0,-1,-1])]),o(["54",129,18,6,14441,o([11,126,24]),o([1,131,24]),o([0,-1,-1]),o([16,74,32]),o([1,79,30]),o([0,-1,-1]),o([25,38,32]),o([1,25,30]),o([0,-1,-1]),o([33,21,32]),o([1,28,28]),o([0,-1,-1])]),o(["55",131,19,6,14939,o([14,105,20]),o([1,99,18]),o([0,-1,-1]),o([19,65,28]),o([1,72,28]),o([0,-1,-1]),o([24,37,32]),o([2,40,30]),o([1,41,30]),o([31,21,32]),o([4,24,32]),o([0,-1,-1])]),o(["56",133,19,6,15435,o([10,147,28]),o([1,151,28]),o([0,-1,-1]),o([15,71,30]),o([3,71,32]),o([1,73,32]),o([24,37,32]),o([3,38,30]),o([1,39,30]),o([36,19,30]),o([3,29,26]),o([0,-1,-1])]),o(["57",135,19,6,15939,o([15,105,20]),o([1,99,18]),o([0,-1,-1]),o([19,70,30]),o([1,64,28]),o([0,-1,-1]),o([27,38,32]),o([2,25,26]),o([0,-1,-1]),o([38,20,30]),o([2,18,28]),o([0,-1,-1])]),o(["58",137,17,7,16171,o([14,105,20]),o([1,113,22]),o([1,114,22]),o([17,67,30]),o([3,92,32]),o([0,-1,-1]),o([30,35,30]),o([1,41,30]),o([0,-1,-1]),o([36,21,32]),o([1,26,30]),o([1,27,30])]),o(["59",139,17,7,16691,o([11,146,28]),o([1,146,26]),o([0,-1,-1]),o([20,70,30]),o([1,60,26]),o([0,-1,-1]),o([29,38,32]),o([1,24,32]),o([0,-1,-1]),o([40,20,30]),o([2,17,26]),o([0,-1,-1])]),o(["60",141,18,7,17215,o([3,137,26]),o([1,136,26]),o([10,126,24]),o([22,65,28]),o([1,75,30]),o([0,-1,-1]),o([30,37,32]),o([1,51,30]),o([0,-1,-1]),o([42,20,30]),o([1,21,30]),o([0,-1,-1])]),o(["61",143,18,7,17751,o([12,126,24]),o([2,118,22]),o([1,116,22]),o([19,74,32]),o([1,74,30]),o([1,72,28]),o([30,38,32]),o([2,29,30]),o([0,-1,-1]),o([39,20,32]),o([2,37,26]),o([1,38,26])]),o(["62",145,18,7,18295,o([12,126,24]),o([3,136,26]),o([0,-1,-1]),o([21,70,30]),o([2,65,28]),o([0,-1,-1]),o([34,35,30]),o([1,44,32]),o([0,-1,-1]),o([42,20,30]),o([2,19,28]),o([2,18,28])]),o(["63",147,18,7,18847,o([12,126,24]),o([3,117,22]),o([1,116,22]),o([25,61,26]),o([2,62,28]),o([0,-1,-1]),o([34,35,30]),o([1,40,32]),o([1,41,32]),o([45,20,30]),o([1,20,32]),o([1,21,32])]),o(["64",149,19,7,19403,o([15,105,20]),o([2,115,22]),o([2,116,22]),o([25,65,28]),o([1,72,28]),o([0,-1,-1]),o([18,35,30]),o([17,37,32]),o([1,50,32]),o([42,20,30]),o([6,19,28]),o([1,15,28])]),o(["65",151,19,7,19971,o([19,105,20]),o([1,101,20]),o([0,-1,-1]),o([33,51,22]),o([1,65,22]),o([0,-1,-1]),o([40,33,28]),o([1,28,28]),o([0,-1,-1]),o([49,20,30]),o([1,18,28]),o([0,-1,-1])]),o(["66",153,17,8,20229,o([18,105,20]),o([2,117,22]),o([0,-1,-1]),o([26,65,28]),o([1,80,30]),o([0,-1,-1]),o([35,35,30]),o([3,35,28]),o([1,36,28]),o([52,18,28]),o([2,38,30]),o([0,-1,-1])]),o(["67",155,17,8,20805,o([26,84,16]),o([0,-1,-1]),o([0,-1,-1]),o([26,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([45,31,26]),o([1,9,26]),o([0,-1,-1]),o([52,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["68",157,17,8,21389,o([16,126,24]),o([1,114,22]),o([1,115,22]),o([23,70,30]),o([3,65,28]),o([1,66,28]),o([40,35,30]),o([1,43,30]),o([0,-1,-1]),o([46,20,30]),o([7,19,28]),o([1,16,28])]),o(["69",159,18,8,21993,o([19,116,22]),o([1,105,22]),o([0,-1,-1]),o([20,70,30]),o([7,66,28]),o([1,63,28]),o([40,35,30]),o([1,42,32]),o([1,43,32]),o([54,20,30]),o([1,19,30]),o([0,-1,-1])]),o(["70",161,18,8,22593,o([17,126,24]),o([2,115,22]),o([0,-1,-1]),o([24,70,30]),o([4,74,32]),o([0,-1,-1]),o([48,31,26]),o([2,18,26]),o([0,-1,-1]),o([54,19,28]),o([6,15,26]),o([1,14,26])]),o(["71",163,18,8,23201,o([29,84,16]),o([0,-1,-1]),o([0,-1,-1]),o([29,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([6,34,30]),o([3,36,30]),o([38,33,28]),o([58,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["72",165,18,8,23817,o([16,147,28]),o([1,149,28]),o([0,-1,-1]),o([31,66,28]),o([1,37,26]),o([0,-1,-1]),o([48,33,28]),o([1,23,26]),o([0,-1,-1]),o([53,20,30]),o([6,19,28]),o([1,17,28])]),o(["73",167,19,8,24453,o([20,115,22]),o([2,134,24]),o([0,-1,-1]),o([29,66,28]),o([2,56,26]),o([2,57,26]),o([45,36,30]),o([2,15,28]),o([0,-1,-1]),o([59,20,30]),o([2,21,32]),o([0,-1,-1])]),o(["74",169,19,8,25085,o([17,147,28]),o([1,134,26]),o([0,-1,-1]),o([26,70,30]),o([5,75,32]),o([0,-1,-1]),o([47,35,30]),o([1,48,32]),o([0,-1,-1]),o([64,18,28]),o([2,33,30]),o([1,35,30])]),o(["75",171,17,9,25373,o([22,115,22]),o([1,133,24]),o([0,-1,-1]),o([33,65,28]),o([1,74,28]),o([0,-1,-1]),o([43,36,30]),o([5,27,28]),o([1,30,28]),o([57,20,30]),o([5,21,32]),o([1,24,32])]),o(["76",173,17,9,26021,o([18,136,26]),o([2,142,26]),o([0,-1,-1]),o([33,66,28]),o([2,49,26]),o([0,-1,-1]),o([48,35,30]),o([2,38,28]),o([0,-1,-1]),o([64,20,30]),o([1,20,32]),o([0,-1,-1])]),o(["77",175,17,9,26677,o([19,126,24]),o([2,135,26]),o([1,136,26]),o([32,66,28]),o([2,55,26]),o([2,56,26]),o([49,36,30]),o([2,18,32]),o([0,-1,-1]),o([65,18,28]),o([5,27,30]),o([1,29,30])]),o(["78",177,18,9,27335,o([20,137,26]),o([1,130,26]),o([0,-1,-1]),o([30,75,32]),o([2,71,32]),o([0,-1,-1]),o([46,35,30]),o([6,39,32]),o([0,-1,-1]),o([3,12,30]),o([70,19,28]),o([0,-1,-1])]),o(["79",179,18,9,28007,o([20,147,28]),o([0,-1,-1]),o([0,-1,-1]),o([35,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([49,35,30]),o([5,35,28]),o([0,-1,-1]),o([70,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["80",181,18,9,28687,o([21,136,26]),o([1,155,28]),o([0,-1,-1]),o([34,70,30]),o([1,64,28]),o([1,65,28]),o([54,35,30]),o([1,45,30]),o([0,-1,-1]),o([68,20,30]),o([3,18,28]),o([1,19,28])]),o(["81",183,18,9,29375,o([19,126,24]),o([5,115,22]),o([1,114,22]),o([33,70,30]),o([3,65,28]),o([1,64,28]),o([52,35,30]),o([3,41,32]),o([1,40,32]),o([67,20,30]),o([5,21,32]),o([1,24,32])]),o(["82",185,18,9,30071,o([2,150,28]),o([21,136,26]),o([0,-1,-1]),o([32,70,30]),o([6,65,28]),o([0,-1,-1]),o([52,38,32]),o([2,27,32]),o([0,-1,-1]),o([73,20,30]),o([2,22,32]),o([0,-1,-1])]),o(["83",187,17,10,30387,o([21,126,24]),o([4,136,26]),o([0,-1,-1]),o([30,74,32]),o([6,73,30]),o([0,-1,-1]),o([54,35,30]),o([4,40,32]),o([0,-1,-1]),o([75,20,30]),o([1,20,28]),o([0,-1,-1])]),o(["84",189,17,10,31091,o([30,105,20]),o([1,114,22]),o([0,-1,-1]),o([3,45,22]),o([55,47,20]),o([0,-1,-1]),o([2,26,26]),o([62,33,28]),o([0,-1,-1]),o([79,18,28]),o([4,33,30]),o([0,-1,-1])])]),e.eclval=h(e.eclevel,1)-49;for(var B=e.metrics,U=0,F=B.length;U<F;U++){e.m=h(B,U),e.vers=h(e.m,0),e.size=h(e.m,1),e.alnk=h(e.m,2),e.alnn=h(e.m,3),e.alnr=R(e.size-e.alnk*e.alnn),e.nmod=h(e.m,4),e.ncws=~~(e.nmod/8),e.rbit=e.nmod%8,e.ecbs=O(e.m,5+e.eclval*3,3);var P=e.ecbs;n[t++]="ecws",n[t++]=0;for(var z=0,V=P.length;z<V;z++){var L=h(P,z),Q=n[--t];n[t++]=R(Q+h(L,0)*h(L,2))}var q=n[--t];if(e[n[--t]]=q,e.dcws=R(e.ncws-e.ecws),e.dmod=e.dcws*8,e.okay=!0,qe(e.version,"unset")&&qe(e.version,e.vers)&&(e.okay=!1),e.bits.length>e.dmod&&(e.okay=!1),e.okay)break}e.okay||(n[t++]="bwipp.hanxinNoValidSymbol#25749",n[t++]="Maximum length exceeded or invalid content",Z()),e.version=e.vers,e.msgbits=e.bits,e.e1nb=h(h(e.ecbs,0),0),e.e2nb=h(h(e.ecbs,1),0),e.e3nb=h(h(e.ecbs,2),0),e.e1dcws=h(h(e.ecbs,0),1),e.e2dcws=h(h(e.ecbs,1),1),e.e3dcws=h(h(e.ecbs,2),1),e.e1ecws=h(h(e.ecbs,0),2),e.e2ecws=h(h(e.ecbs,1),2),e.e3ecws=h(h(e.ecbs,2),2),e.pad=fe(e.dmod);for(var ee=0,X=e.pad.length-1;ee<=X;ee+=1)C(e.pad,ee,48);H(e.pad,0,e.msgbits),e.cws=o(e.dcws);for(var ae=0,K=e.cws.length-1;ae<=K;ae+=1){e.c=ae,e.cwb=O(e.pad,e.c*8,8),e.cw=0;for(var ie=0;ie<=7;ie+=1)e.i=ie,e.cw=R(e.cw+~~El(2,8-e.i-1)*(h(e.cwb,e.i)-48));C(e.cws,e.c,e.cw)}e.rscodes=function(){e.rspm=n[--t],e.rsgf=n[--t],e.rsnc=n[--t],e.rscws=n[--t],n[t++]=1/0,n[t++]=1;for(var nn=0,yn=e.rsgf-1;nn<yn;nn++){var qn=n[t-1],Tn=qn*2;if(n[t++]=Tn,Tn>=e.rsgf){var Gn=n[--t];n[t++]=Ha(Gn,e.rspm)}}e.rsalog=o(),e.rslog=o(e.rsgf);for(var gi=1,Vn=e.rsgf-1;gi<=Vn;gi+=1)C(e.rslog,h(e.rsalog,gi),gi);e.rsprod=function(){var yr=n[t-1],zr=n[t-2];if(yr!=0&&zr!=0){var Tr=h(e.rslog,n[--t]),ea=h(e.rsalog,R(Tr+h(e.rslog,n[--t]))%(e.rsgf-1));n[t++]=ea}else t-=2,n[t++]=0},n[t++]=1/0,n[t++]=1;for(var ln=0,ti=e.rsnc;ln<ti;ln++)n[t++]=0;e.coeffs=o();for(var Qi=1,Bi=e.rsnc;Qi<=Bi;Qi+=1){e.i=Qi,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Ir=e.i-1;Ir>=1;Ir-=1){e.j=Ir,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var _i=n[--t],Nr=n[--t],rr=n[--t];C(n[--t],rr,Ha(Nr,_i))}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var Zr=n[--t],ar=n[--t];C(n[--t],ar,Zr)}e.nd=e.rscws.length,n[t++]=1/0,W(e.rscws);for(var sr=0,Pi=e.rsnc;sr<Pi;sr++)n[t++]=0;n[t++]=0,e.rscws=o();for(var hr=0,Lr=e.nd-1;hr<=Lr;hr+=1){e.k=Ha(h(e.rscws,hr),h(e.rscws,e.nd));for(var pr=0,xr=e.rsnc-1;pr<=xr;pr+=1){e.j=pr,n[t++]=e.rscws,n[t++]=e.nd+e.j,n[t++]=h(e.rscws,e.nd+e.j+1),n[t++]=e.k,n[t++]=h(e.coeffs,R(e.rsnc-e.j)-1),e.rsprod();var wa=n[--t],br=n[--t],Ba=n[--t];C(n[--t],Ba,Ha(br,wa))}}n[t++]=O(e.rscws,0,e.rscws.length-1)},e.dcwsb=o(R(e.e1nb+e.e2nb+e.e3nb)),e.ecwsb=o(e.dcwsb.length),e.in=0,e.out=0;for(var ne=0,J=e.e1nb;ne<J;ne++){n[t++]=O(e.cws,e.in,e.e1dcws),n[t++]=e.e1ecws,n[t++]=256,n[t++]=355,e.rscodes();var te=n[--t];C(e.dcwsb,e.out,O(te,0,e.e1dcws)),C(e.ecwsb,e.out,O(te,e.e1dcws,e.e1ecws)),e.in=R(e.in+e.e1dcws),e.out=e.out+1}for(var $=0,oe=e.e2nb;$<oe;$++){n[t++]=O(e.cws,e.in,e.e2dcws),n[t++]=e.e2ecws,n[t++]=256,n[t++]=355,e.rscodes();var we=n[--t];C(e.dcwsb,e.out,O(we,0,e.e2dcws)),C(e.ecwsb,e.out,O(we,e.e2dcws,e.e2ecws)),e.in=R(e.in+e.e2dcws),e.out=e.out+1}for(var be=0,Te=e.e3nb;be<Te;be++){n[t++]=O(e.cws,e.in,e.e3dcws),n[t++]=e.e3ecws,n[t++]=256,n[t++]=355,e.rscodes();var ye=n[--t];C(e.dcwsb,e.out,O(ye,0,e.e3dcws)),C(e.ecwsb,e.out,O(ye,e.e3dcws,e.e3ecws)),e.in=R(e.in+e.e3dcws),e.out=e.out+1}e.cws=o(e.ncws),e.cw=0;for(var tt=0,Qe=e.dcwsb.length-1;tt<=Qe;tt+=1){e.i=tt;var Ge=h(e.dcwsb,e.i);H(e.cws,e.cw,Ge),e.cw=Ge.length+e.cw;var Xe=h(e.ecwsb,e.i);H(e.cws,e.cw,Xe),e.cw=Xe.length+e.cw}n[t++]=1/0;var Je=e.ncws,dt=12,vt=Je-1;if(Je-1>12){var _t=dt;dt=vt,vt=_t}for(var xt=0,bt=vt;xt<=bt;xt+=1)for(var kt=xt,Pt=e.ncws-1;kt<=Pt;kt+=13)if(n[t++]=kt,kt<e.ncws){var Rt=h(e.cws,n[--t]);n[t++]=Rt}else t--;e.cws=o(),e.rbit>0&&(e.pad=o(e.cws.length+1),H(e.pad,0,e.cws),C(e.pad,e.pad.length-1,0),e.cws=e.pad);var Wt=h(e.options,"debugcws")!==void 0;Wt&&(n[t++]="bwipp.debugcws#25872",n[t++]=e.cws,Z()),n[t++]=1/0;for(var zt=0,Ct=e.size*e.size;zt<Ct;zt++)n[t++]=-1;if(e.pixs=o(),e.qmv=function(){var nn=n[--t],yn=n[--t];n[t++]=R(yn+nn*e.size)},e.alnn!=0){for(e.trmv=function(){var nn=n[--t],yn=n[--t];n[t++]=R(nn*e.size+e.size-1-yn)},e.aplot=function(){var nn=n[t-2],yn=n[t-3],qn=n[t-1];t-=3,n[t++]=qn,n[t++]=yn,n[t++]=nn,n[t++]=qn,n[t++]=nn,n[t++]=yn,e.trmv();var Tn=n[--t];n[t++]=e.pixs,n[t++]=Tn;var Gn=n[t-3],gi=n[t-1];C(n[t-2],gi,Gn),t-=3,e.trmv();var Vn=n[--t];n[t++]=e.pixs,n[t++]=Vn;var ln=n[t-3],ti=n[t-1];C(n[t-2],ti,ln),t-=3},e.i=0,e.stag=0;!(e.i>=e.size);){for(var Yt=0,jt=e.size-1;Yt<=jt;Yt+=1)if(e.j=Yt,R(e.j+e.alnr)<e.size?n[t++]=(~~(e.j/e.alnk)+e.stag)%2==0&&!(e.i==0&&e.j<e.alnk)||e.j%e.alnk==0:n[t++]=R(e.alnn+e.stag)%2==0,n[--t]){n[t++]=e.j,n[t++]=e.i,n[t++]=1,e.aplot();var an=e.j,rn=e.i;n[t++]=an+1,n[t++]=rn+1,rn+1<e.size&&an+1<e.size?(n[t++]=0,e.aplot()):t-=2}R(e.i+e.alnr)==e.size?e.i=R(e.i+e.alnr)-1:e.i=R(e.i+e.alnk),e.stag=1-e.stag}for(var Kt=e.alnk,Jt=e.alnk,Zt=e.size-2;Jt<0?Kt>=Zt:Kt<=Zt;Kt+=Jt){if(e.i=Kt,~~(e.i/e.alnk)%2!=0){n[t++]=e.pixs,n[t++]=0,n[t++]=e.i-1,e.trmv();var Qt=n[--t];C(n[--t],Qt,0),n[t++]=e.pixs,n[t++]=0,n[t++]=e.i+1,e.trmv();var mn=n[--t];C(n[--t],mn,0),n[t++]=e.pixs,n[t++]=1,n[t++]=e.i-1,e.trmv();var cn=n[--t];C(n[--t],cn,0),n[t++]=e.pixs,n[t++]=1,n[t++]=e.i,e.trmv();var dn=n[--t];C(n[--t],dn,0),n[t++]=e.pixs,n[t++]=1,n[t++]=e.i+1,e.trmv();var Ht=n[--t];C(n[--t],Ht,0),n[t++]=e.pixs,n[t++]=e.i-1,n[t++]=0,e.trmv();var Bt=n[--t];C(n[--t],Bt,0),n[t++]=e.pixs,n[t++]=e.i+1,n[t++]=0,e.trmv();var Y=n[--t];C(n[--t],Y,0),n[t++]=e.pixs,n[t++]=e.i-1,n[t++]=1,e.trmv();var le=n[--t];C(n[--t],le,0),n[t++]=e.pixs,n[t++]=e.i,n[t++]=1,e.trmv();var se=n[--t];C(n[--t],se,0),n[t++]=e.pixs,n[t++]=e.i+1,n[t++]=1,e.trmv();var ge=n[--t];C(n[--t],ge,0)}n[t++]=e.pixs,n[t++]=e.size-1,n[t++]=e.i-1,e.trmv();var ve=n[--t];if(h(n[--t],ve)!=1){n[t++]=e.pixs,n[t++]=e.size-1,n[t++]=e.i-1,e.trmv();var _e=n[--t];C(n[--t],_e,0),n[t++]=e.pixs,n[t++]=e.size-2,n[t++]=e.i-1,e.trmv();var pe=n[--t];C(n[--t],pe,0),n[t++]=e.pixs,n[t++]=e.size-2,n[t++]=e.i,e.trmv();var Oe=n[--t];C(n[--t],Oe,0),n[t++]=e.pixs,n[t++]=e.size-2,n[t++]=e.i+1,e.trmv();var de=n[--t];C(n[--t],de,0),n[t++]=e.pixs,n[t++]=e.size-1,n[t++]=e.i+1,e.trmv();var ke=n[--t];C(n[--t],ke,0),n[t++]=e.pixs,n[t++]=e.i-1,n[t++]=e.size-1,e.trmv();var Ee=n[--t];C(n[--t],Ee,0),n[t++]=e.pixs,n[t++]=e.i-1,n[t++]=e.size-2,e.trmv();var De=n[--t];C(n[--t],De,0),n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.size-2,e.trmv();var xe=n[--t];C(n[--t],xe,0),n[t++]=e.pixs,n[t++]=e.i+1,n[t++]=e.size-2,e.trmv();var Ne=n[--t];C(n[--t],Ne,0),n[t++]=e.pixs,n[t++]=e.i+1,n[t++]=e.size-1,e.trmv();var je=n[--t];C(n[--t],je,0)}}}e.fpat=o([o([1,1,1,1,1,1,1,0]),o([1,0,0,0,0,0,0,0]),o([1,0,1,1,1,1,1,0]),o([1,0,1,0,0,0,0,0]),o([1,0,1,0,1,1,1,0]),o([1,0,1,0,1,1,1,0]),o([1,0,1,0,1,1,1,0]),o([0,0,0,0,0,0,0,0])]),e.fpat2=o([o([1,1,1,0,1,0,1,0]),o([1,1,1,0,1,0,1,0]),o([1,1,1,0,1,0,1,0]),o([0,0,0,0,1,0,1,0]),o([1,1,1,1,1,0,1,0]),o([0,0,0,0,0,0,1,0]),o([1,1,1,1,1,1,1,0]),o([0,0,0,0,0,0,0,0])]);for(var Se=0,ze=e.fpat.length-1;Se<=ze;Se+=1){e.y=Se;for(var Pe=0,Be=h(e.fpat,0).length-1;Pe<=Be;Pe+=1){e.x=Pe,e.fpb=h(h(e.fpat,e.y),e.x),e.fpb2=h(h(e.fpat2,e.y),e.x),n[t++]=e.pixs,n[t++]=e.x,n[t++]=e.y,e.qmv();var at=n[--t];C(n[--t],at,e.fpb),n[t++]=e.pixs,n[t++]=R(e.size-e.x)-1,n[t++]=e.y,e.qmv();var Ze=n[--t];C(n[--t],Ze,e.fpb),n[t++]=e.pixs,n[t++]=R(e.size-e.x)-1,n[t++]=R(e.size-e.y)-1,e.qmv();var ft=n[--t];C(n[--t],ft,e.fpb),n[t++]=e.pixs,n[t++]=e.x,n[t++]=R(e.size-e.y)-1,e.qmv();var Ve=n[--t];C(n[--t],Ve,e.fpb2)}}e.functionmap=o([o([o([0,8]),o([e.size-1,e.size-9])]),o([o([1,8]),o([e.size-2,e.size-9])]),o([o([2,8]),o([e.size-3,e.size-9])]),o([o([3,8]),o([e.size-4,e.size-9])]),o([o([4,8]),o([e.size-5,e.size-9])]),o([o([5,8]),o([e.size-6,e.size-9])]),o([o([6,8]),o([e.size-7,e.size-9])]),o([o([7,8]),o([e.size-8,e.size-9])]),o([o([8,8]),o([e.size-9,e.size-9])]),o([o([8,7]),o([e.size-9,e.size-8])]),o([o([8,6]),o([e.size-9,e.size-7])]),o([o([8,5]),o([e.size-9,e.size-6])]),o([o([8,4]),o([e.size-9,e.size-5])]),o([o([8,3]),o([e.size-9,e.size-4])]),o([o([8,2]),o([e.size-9,e.size-3])]),o([o([8,1]),o([e.size-9,e.size-2])]),o([o([8,0]),o([e.size-9,e.size-1])]),o([o([e.size-9,0]),o([8,e.size-1])]),o([o([e.size-9,1]),o([8,e.size-2])]),o([o([e.size-9,2]),o([8,e.size-3])]),o([o([e.size-9,3]),o([8,e.size-4])]),o([o([e.size-9,4]),o([8,e.size-5])]),o([o([e.size-9,5]),o([8,e.size-6])]),o([o([e.size-9,6]),o([8,e.size-7])]),o([o([e.size-9,7]),o([8,e.size-8])]),o([o([e.size-9,8]),o([8,e.size-9])]),o([o([e.size-8,8]),o([7,e.size-9])]),o([o([e.size-7,8]),o([6,e.size-9])]),o([o([e.size-6,8]),o([5,e.size-9])]),o([o([e.size-5,8]),o([4,e.size-9])]),o([o([e.size-4,8]),o([3,e.size-9])]),o([o([e.size-3,8]),o([2,e.size-9])]),o([o([e.size-2,8]),o([1,e.size-9])]),o([o([e.size-1,8]),o([0,e.size-9])])]);for(var $e=e.functionmap,Me=0,it=$e.length;Me<it;Me++)Ie(h($e,Me),function(){W(n[--t]),e.qmv(),C(e.pixs,n[--t],0)});var st=o([function(){t-=2,n[t++]=1},function(){var nn=n[--t],yn=n[--t];n[t++]=R(yn+nn)%2},function(){var nn=n[--t],yn=n[--t];n[t++]=R((nn+yn)%3+yn%3)%2},function(){var nn=n[--t],yn=n[--t];n[t++]=R(yn%nn+(nn%yn+(nn%3+yn%3)))%2}]);e.maskfuncs=st,e.mask!=-1&&(e.maskfuncs=o([h(e.maskfuncs,e.mask-1)]),e.bestmaskval=e.mask-1),e.masks=o(e.maskfuncs.length);for(var mt=0,Tt=e.masks.length-1;mt<=Tt;mt+=1){e.m=mt,e.mask=o(e.size*e.size);for(var Ot=0,Et=e.size-1;Ot<=Et;Ot+=1){e.j=Ot;for(var Dt=0,wt=e.size-1;Dt<=wt&&(e.i=Dt,n[t++]=e.i+1,n[t++]=e.j+1,h(e.maskfuncs,e.m)()!==!0);Dt+=1){var en=n[--t];n[t++]=en==0,n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.j,e.qmv();var gt=n[--t],un=h(n[--t],gt),Vt=n[--t],fn=Vt&&un==-1?1:0;n[t++]=fn,n[t++]=e.mask,n[t++]=e.i,n[t++]=e.j,e.qmv();var $n=n[t-3],ei=n[t-1];C(n[t-2],ei,$n),t-=3}}C(e.masks,e.m,e.mask)}for(e.posx=0,e.posy=0,e.num=0;e.posy!=e.size;){n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.qmv();var Dn=n[--t];if(h(n[--t],Dn)==-1){var ai=h(e.cws,~~(e.num/8)),zn=-(7-e.num%8);n[t++]=(zn<0?ai>>>-zn:ai<<zn)&1,n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.qmv();var mi=n[t-3],Fn=n[t-1];C(n[t-2],Fn,mi),t-=3,e.num=e.num+1}e.posx=e.posx+1,e.posx==e.size&&(e.posx=0,e.posy=e.posy+1)}e.evalfulln1n3=function(){e.scrle=n[--t],n[t++]="scr1",n[t++]=0,Ie(e.scrle,function(){var sr=n[t-1];if(sr>=3){var Pi=n[--t],hr=R(n[--t]+Pi*4);n[t++]=hr,n[t++]=hr}t--});var nn=n[--t];e[n[--t]]=nn,e.scr3=0;for(var yn=5,qn=e.scrle.length-1;yn<=qn;yn+=2)if(e.j=yn,h(e.scrle,e.j)%3==0){e.fact=~~(h(e.scrle,e.j)/3);for(var Tn=O(e.scrle,e.j-4,4),Gn=0,gi=Tn.length;Gn<gi;Gn++)n[t++]=h(Tn,Gn)==e.fact;var Vn=n[--t],ln=n[--t],ti=n[--t];n[--t]&&ti&&ln&&Vn&&(e.j==5||e.j+2>=e.scrle.length||h(e.scrle,e.j-5)>=3||h(e.scrle,e.j+1)>=3)&&(e.scr3=e.scr3+50)}for(var Qi=1,Bi=e.scrle.length-5;Qi<=Bi;Qi+=2)if(e.j=Qi,h(e.scrle,e.j)%3==0){e.fact=~~(h(e.scrle,e.j)/3);for(var Ir=O(e.scrle,e.j+1,4),_i=0,Nr=Ir.length;_i<Nr;_i++)n[t++]=h(Ir,_i)==e.fact;var rr=n[--t],Zr=n[--t],ar=n[--t];n[--t]&&ar&&Zr&&rr&&(e.j==1||e.j+6>=e.scrle.length||h(e.scrle,e.j-1)>=3||h(e.scrle,e.j+5)>=3)&&(e.scr3=e.scr3+50)}n[t++]=e.scr1,n[t++]=e.scr3},e.evalfull=function(){e.sym=n[--t],e.n1=0,e.n3=0,e.rle=o(e.size+1),e.lastpairs=o(e.size),e.thispairs=o(e.size),e.sizeadd1=e.size+1;for(var nn=0,yn=e.size-1;nn<=yn;nn+=1){e.i=nn,n[t++]=1/0;var qn=e.size;n[t++]=0,n[t++]=0;for(var Tn=e.i,Gn=qn,gi=qn*qn-1;Gn<0?Tn>=gi:Tn<=gi;Tn+=Gn){var Vn=h(e.sym,Tn),ln=n[--t];if(n[t++]=Vn,ce(ln,Vn)){var ti=n[--t],Qi=n[--t];n[t++]=Qi+1,n[t++]=ti}else{var Bi=n[--t];n[t++]=1,n[t++]=Bi}}t--;var Ir=Ur()+2;Rn(O(e.rle,0,Ir-2)),e.evalfulln1n3(),e.n3=R(n[--t]+e.n3),e.n1=R(n[--t]+e.n1),t--,e.symrow=O(e.sym,e.i*e.size,e.size),n[t++]=1/0;var _i=e.symrow;n[t++]=0,n[t++]=0;for(var Nr=0,rr=_i.length;Nr<rr;Nr++){var Zr=h(_i,Nr),ar=n[--t];if(n[t++]=Zr,ce(ar,Zr)){var sr=n[--t],Pi=n[--t];n[t++]=Pi+1,n[t++]=sr}else{var hr=n[--t];n[t++]=1,n[t++]=hr}}t--;var Lr=Ur()+2;Rn(O(e.rle,0,Lr-2)),e.evalfulln1n3(),e.n3=R(n[--t]+e.n3),e.n1=R(n[--t]+e.n1),t--}n[t++]=R(e.n1+e.n3)},e.bestscore=999999999;for(var Hn=0,_n=e.masks.length-1;Hn<=_n;Hn+=1){e.m=Hn,e.masksym=o(e.size*e.size);for(var vn=0,kn=e.size*e.size-1;vn<=kn;vn+=1)e.i=vn,C(e.masksym,e.i,Ha(h(e.pixs,e.i),h(h(e.masks,e.m),e.i)));e.masks.length!=1?(n[t++]=e.masksym,e.evalfull(),e.score=n[--t],e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}e.pixs=e.bestsym,e.funval=((~~((e.size-21)/2)+20)*4+e.eclval)*4+e.bestmaskval,n[t++]=o([(e.funval&3840)>>>8,(e.funval&240)>>>4,e.funval&15]),n[t++]=4,n[t++]=16,n[t++]=19,e.rscodes(),e.funvals=n[--t],n[t++]=1/0,Ie(e.funvals,function(){n[t++]=4,e.tobin(),Ie(n[--t],function(){var nn=n[--t];n[t++]=nn-48})}),n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1,e.funbits=o();for(var Ai=0,Ei=e.functionmap.length-1;Ai<=Ei;Ai+=1)e.i=Ai,Ie(h(e.functionmap,e.i),function(){var nn=n[--t];n[t++]=e.pixs,W(nn),e.qmv();var yn=n[--t];C(n[--t],yn,h(e.funbits,e.i))});var Ji=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.size],["pixy",e.size],["height",e.size*2/72],["width",e.size*2/72],["borderleft",3],["borderright",3],["bordertop",3],["borderbottom",3],["opt",e.options]]);n[t++]=Ji,e.dontdraw||Lt(),e=r}function t9(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=-1,e.ratio=-1,e.parse=!1,e.parsefnc=!1,e.raw=!1,e.fast=!1,e.mask=-1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.rows!=-1&&e.rows<5&&(n[t++]="bwipp.dotcodeBadRows#26228",n[t++]="There must be at least 5 rows",Z()),e.columns!=-1&&e.columns<5&&(n[t++]="bwipp.dotcodeBadColumns#26234",n[t++]="There must be at least 5 columns",Z()),e.rows!=-1&&e.columns!=-1&&(e.rows+e.columns)%2!=1&&(n[t++]="bwipp.dotcodeRowsColumnsBadParity#26239",n[t++]="Sum of rows and columns must be odd",Z()),e.ratio==-1&&e.rows==-1&&e.columns==-1&&(e.ratio=3/2),e.ratio!=-1&&e.ratio<=0&&(n[t++]="bwipp.dotcodeRatio#26248",n[t++]="The ratio must be greater than 0",Z()),e.mask!=-1&&(e.mask<0||e.mask>3)&&(n[t++]="bwipp.dotcodeBadMask#26254",n[t++]="Valid mask values are 0 to 3",Z()),e.laa=-1,e.lab=-2,e.lac=-3,e.bin=-4,e.sfa=-5,e.sfb=-6,e.sb2=-7,e.sb3=-8,e.sb4=-9,e.sb5=-10,e.sb6=-11,e.sfc=-12,e.sc2=-13,e.sc3=-14,e.sc4=-15,e.sc5=-16,e.sc6=-17,e.sc7=-18,e.bsa=-19,e.bsb=-20,e.tma=-21,e.tmb=-22,e.tmc=-23,e.tms=-24,e.fn1=-25,e.fn2=-26,e.fn3=-27,e.crl=-28,e.aim=-29,e.m05=-30,e.m06=-31,e.m12=-32,e.mac=-33;var i=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=i,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,e.msglen=e.msg.length;var s=e.msg;n[t++]="numecis",n[t++]=0;for(var l=0,c=s.length;l<c;l++)if(h(s,l)<=-1e6){var d=n[--t];n[t++]=d+1}var f=n[--t];e[n[--t]]=f,e.msgtmp=o(R(e.msg.length+e.numecis*6)),e.j=0;for(var m=0,g=e.msg.length-1;m<=g;m+=1){var v=h(e.msg,m);if(n[t++]=v,v<=-1e6){for(var y=O(Nn(fe(7),-n[--t],10),1,6),A=0,w=y.length;A<w;A++)n[t++]=h(y,A);Rn(o(6)),H(e.msgtmp,e.j+1,n[--t]),C(e.msgtmp,e.j,e.fn2),e.j=e.j+7}else C(e.msgtmp,e.j,n[--t]),e.j=e.j+1}e.msg=e.msgtmp,e.msglen=e.msg.length,e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.sfb,e.crl,"96"]),o([e.sb2,9,"97"]),o([e.sb3,28,"98"]),o([e.sb4,29,"99"]),o([e.sb5,30,e.aim]),o([e.sb6,e.sfa,e.laa]),o([e.lab,e.laa,e.sfb]),o([e.sc2,e.sc2,e.sb2]),o([e.sc3,e.sc3,e.sb3]),o([e.sc4,e.sc4,e.sb4]),o([e.lac,e.lac,e.lab]),o([e.fn1,e.fn1,e.fn1]),o([e.fn2,e.fn2,e.fn2]),o([e.fn3,e.fn3,e.fn3]),o([e.bsa,e.bsa,e.bsa]),o([e.bsb,e.bsb,e.bsb]),o([e.bin,e.bin,e.bin])]),e.charvals=o([new Map,new Map,new Map]);for(var k=0,E=e.charmaps.length-1;k<=E;k+=1){e.i=k,e.encs=h(e.charmaps,e.i);for(var I=0;I<=2;I+=1){e.j=I;var T=h(e.encs,e.j);if(n[t++]=T,ce(Ys(T),"stringtype")){var N=h(n[--t],0);n[t++]=N}C(h(e.charvals,e.j),n[--t],e.i)}}e.Avals=h(e.charvals,0),e.Bvals=h(e.charvals,1),C(e.Bvals,e.m05,97),C(e.Bvals,e.m06,98),C(e.Bvals,e.m12,99),C(e.Bvals,e.mac,100),e.Cvals=h(e.charvals,2),n[t++]=1/0;var j=o([e.sc2,e.sc3,e.sc4,e.sc5,e.sc6,e.sc7,e.tma,e.tmb,e.tmc,e.tms]);n[t++]=102;for(var B=0,U=j.length;B<U;B++){var F=n[--t]+1;n[t++]=h(j,B),n[t++]=F,n[t++]=F}t--,e.BINvals=rt(),e.A=0,e.B=1,e.C=2,e.BIN=3,n[t++]=1/0;for(var P=0,z=e.msglen+1;P<z;P++)n[t++]=0;e.nDigits=o(),n[t++]=1/0;for(var V=0,L=e.msglen+1;V<L;V++)n[t++]=!1;e.SeventeenTen=o(),n[t++]=1/0;for(var Q=0,q=e.msglen+1;Q<q;Q++)n[t++]=!1;e.ECI=o(),n[t++]=1/0;for(var ee=0,X=e.msglen+1;ee<X;ee++)n[t++]=!1;e.DatumA=o(),n[t++]=1/0;for(var ae=0,K=e.msglen+1;ae<K;ae++)n[t++]=!1;e.DatumB=o(),n[t++]=1/0;for(var ie=0,ne=e.msglen+1;ie<ne;ie++)n[t++]=!1;e.DatumC=o(),n[t++]=1/0;for(var J=0,te=e.msglen+8;J<te;J++)n[t++]=!1;e.Binary=o(),n[t++]=1/0;for(var $=0,oe=e.msglen+1;$<oe;$++)n[t++]=0;e.AheadC=o(),n[t++]=1/0;for(var we=0,be=e.msglen+1;we<be;we++)n[t++]=0;e.TryC=o(),n[t++]=1/0;for(var Te=0,ye=e.msglen+1;Te<ye;Te++)n[t++]=0;e.AheadA=o(),n[t++]=1/0;for(var tt=0,Qe=e.msglen+1;tt<Qe;tt++)n[t++]=0;e.AheadB=o(),n[t++]=1/0;for(var Ge=0,Xe=e.msglen+1;Ge<Xe;Ge++)n[t++]=0;e.UntilEndSeg=o();for(var Je=e.msglen-1;Je>=0;Je-=1){e.i=Je,e.barchar=h(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&C(e.nDigits,e.i,h(e.nDigits,e.i+1)+1);var dt=h(e.Avals,e.barchar)!==void 0;dt&&C(e.DatumA,e.i,!0);var vt=h(e.Bvals,e.barchar)!==void 0;if(vt&&C(e.DatumB,e.i,!0),e.CRLF=!1,e.barchar==13&&e.i<e.msglen-1&&h(e.msg,e.i+1)==10&&(e.CRLF=!0),e.CRLF&&C(e.DatumB,e.i,!0),h(e.nDigits,e.i)>=2&&C(e.DatumC,e.i,!0),e.barchar<0&&C(e.DatumC,e.i,!0),e.barchar>=128&&C(e.Binary,e.i,!0),h(e.nDigits,e.i)>=10){n[t++]=1/0,W(O(e.msg,e.i,10));for(var _t=0;_t<1;_t++){if(n[--t]!=48){n[t++]=!1;break}if(n[--t]!=49){n[t++]=!1;break}if(t-=6,n[--t]!=55){n[t++]=!1;break}if(n[--t]!=49){n[t++]=!1;break}n[t++]=!0}n[t++]=e.SeventeenTen,n[t++]=e.i;var xt=n[t-3],bt=n[t-1];C(n[t-2],bt,xt),t-=3,Qu()}if(h(e.nDigits,e.i+1)>=6&&h(e.msg,e.i)==e.fn2&&C(e.ECI,e.i,!0),e.barchar<0&&e.barchar!=e.fn3?C(e.AheadC,e.i,h(e.AheadC,e.i+1)+1):h(e.nDigits,e.i)<=1?C(e.AheadC,e.i,0):C(e.AheadC,e.i,h(e.AheadC,e.i+2)+1),h(e.nDigits,e.i)>0&&_c(h(e.AheadC,e.i),h(e.AheadC,e.i+1))&&C(e.TryC,e.i,h(e.AheadC,e.i)),h(e.DatumA,e.i)&&h(e.TryC,e.i)<2&&e.barchar!=e.fn3&&C(e.AheadA,e.i,h(e.AheadA,e.i+1)+1),h(e.DatumB,e.i)&&h(e.TryC,e.i)<2&&e.barchar!=e.fn3){if(n[t++]=e.AheadB,n[t++]=e.i,n[t++]=e.AheadB,n[t++]=e.i+1,e.CRLF){var kt=n[--t];n[t++]=kt+1}var Pt=n[--t],Rt=h(n[--t],Pt),Wt=n[--t];C(n[--t],Wt,Rt+1)}e.barchar!=e.fn3&&C(e.UntilEndSeg,e.i,h(e.UntilEndSeg,e.i+1)+1)}for(e.addtocws=function(){var ke=n[--t];H(e.cws,e.j,ke),e.j=ke.length+e.j},e.base259to103=function(){e.in=n[--t],e.inlen=e.in.length,n[t++]=1/0;for(var ke=0,Ee=5-e.inlen;ke<Ee;ke++)n[t++]=0;W(e.in),e.in=o(),e.out=o(6),n[t++]=1/0,W(O(e.in,0,2)),e.msbs=o(),n[t++]=1/0,W(e.msbs);var De=n[--t],xe=n[--t];n[t++]=R(De+xe*259);for(var Ne=0;Ne<2;Ne++){var je=n[--t];n[t++]=je%103,n[t++]=~~(je/103)}e.mscs=o(),n[t++]=1/0,W(O(e.in,2,3)),e.lsbs=o(),n[t++]=1/0,W(e.lsbs);var Se=n[--t],ze=n[--t],Pe=n[--t];n[t++]=R(Se+ze*259+Pe*67081);for(var Be=0;Be<3;Be++){var at=n[--t];n[t++]=at%103,n[t++]=~~(at/103)}e.lscs=o();var Ze=h(e.lscs,0),ft=h(e.mscs,0);C(e.out,5,R(Ze+ft*42)%103);var Ve=h(e.lscs,1),$e=h(e.mscs,0),Me=h(e.mscs,1);C(e.out,4,R(~~((Ze+ft*42)/103)+Ve+$e*68+Me*42)%103);var it=h(e.lscs,2),st=h(e.mscs,0),mt=h(e.mscs,1),Tt=h(e.mscs,2);C(e.out,3,R(~~((~~((Ze+ft*42)/103)+Ve+$e*68+Me*42)/103)+it+st*92+mt*68+Tt*42)%103);var Ot=h(e.lscs,3),Et=h(e.mscs,0),Dt=h(e.mscs,1),wt=h(e.mscs,2);C(e.out,2,R(~~((~~((~~((Ze+ft*42)/103)+Ve+$e*68+Me*42)/103)+it+st*92+mt*68+Tt*42)/103)+Ot+Et*15+Dt*92+wt*68)%103);var en=h(e.mscs,1),gt=h(e.mscs,2);C(e.out,1,R(~~((~~((~~((~~((Ze+ft*42)/103)+Ve+$e*68+Me*42)/103)+it+st*92+mt*68+Tt*42)/103)+Ot+Et*15+Dt*92+wt*68)/103)+en*15+gt*92)%103),C(e.out,0,R(~~((~~((~~((~~((~~((Ze+ft*42)/103)+Ve+$e*68+Me*42)/103)+it+st*92+mt*68+Tt*42)/103)+Ot+Et*15+Dt*92+wt*68)/103)+en*15+gt*92)/103)+h(e.mscs,2)*15)%103),n[t++]=O(e.out,6-e.inlen-1,e.inlen+1)},e.finaliseBIN=function(){e.bpos!=0&&(n[t++]=O(e.bvals,0,e.bpos),e.base259to103(),W(n[--t]),e.bpos=0)},e.addtobin=function(){C(e.bvals,e.bpos,n[--t]),e.bpos=e.bpos+1,e.bpos==5&&e.finaliseBIN()},e.ECIabc=function(){var ke=O(e.msg,e.i+1,6);n[t++]=0;for(var Ee=0,De=ke.length;Ee<De;Ee++){var xe=n[--t];n[t++]=R(xe+(h(ke,Ee)-48))*10}var Ne=~~(n[--t]/10);if(n[t++]=Ne,Ne>=40){var je=n[--t]-40,Se=je%12769;n[t++]=~~(je/12769)+40,n[t++]=~~(Se/113),n[t++]=Se%113}},e.ECIbin=function(){n[t++]=1/0;var ke=O(e.msg,e.i+1,6);n[t++]=0;for(var Ee=0,De=ke.length;Ee<De;Ee++){var xe=n[--t];n[t++]=R(xe+(h(ke,Ee)-48))*10}var Ne=~~(n[--t]/10);if(n[t++]=Ne,Ne>=65536){var je=n[--t],Se=je%65536;n[t++]=258,n[t++]=~~(je/65536),n[t++]=~~(Se/256),n[t++]=Se%256}else{var ze=n[t-1];if(ze>=256){var Pe=n[--t];n[t++]=257,n[t++]=~~(Pe/256),n[t++]=Pe%256}else{var Be=n[--t];n[t++]=256,n[t++]=Be}}for(var at=o(),Ze=0,ft=at.length;Ze<ft;Ze++)n[t++]=h(at,Ze),e.addtobin()},e.encC=function(){for(var ke=0;ke<1;ke++){if(e.i==e.segstart){for(var Ee=0;Ee<1;Ee++){if(e.i>e.segend-7){n[t++]=0;break}if(h(e.msg,e.segstart)!=91){n[t++]=0;break}if(h(e.msg,e.segstart+1)!=41){n[t++]=0;break}if(h(e.msg,e.segstart+2)!=62){n[t++]=0;break}if(h(e.msg,e.segstart+3)!=30){n[t++]=0;break}var De=h(e.msg,e.segstart+4);if(De<48||De>57){n[t++]=0;break}var xe=h(e.msg,e.segstart+5);if(xe<48||xe>57){n[t++]=0;break}if(h(e.msg,e.segend-1)!=4){n[t++]=0;break}var Ne=R((h(e.msg,e.segstart+4)-48)*10+(h(e.msg,e.segstart+5)-48));if(n[t++]=Ne,Ne!=5&&Ne!=6&&Ne!=12){n[t-1]=e.mac;break}if(h(e.msg,e.segstart+6)!=29){n[t-1]=0;break}if(h(e.msg,e.segend-2)!=30){n[t-1]=0;break}var je=n[t-1];if(je==5){n[t-1]=e.m05;break}if(n[--t]==6){n[t++]=e.m06;break}n[t++]=e.m12;break}if(e.inmac=n[--t],e.inmac!=0){n[t++]=o([h(e.Cvals,e.lab)]),e.addtocws(),e.mode=e.B,n[t++]=o([h(e.Bvals,e.inmac)]),e.addtocws(),e.inmac==e.mac?(n[t++]=o([h(e.Bvals,h(e.msg,e.segstart+4))]),e.addtocws(),n[t++]=o([h(e.Bvals,h(e.msg,e.segstart+5))]),e.addtocws(),e.i=e.i+6):e.i=e.i+7;break}}if(e.i==e.segstart&&(h(e.nDigits,e.i)>=2&&(n[t++]=o([h(e.Cvals,e.fn1)]),e.addtocws()),h(e.msg,e.i)==e.fn1&&h(e.nDigits,e.i+1)>=2&&(e.i=e.i+1)),h(e.SeventeenTen,e.i)){n[t++]=o([h(e.Cvals,e.aim),R((h(e.msg,e.i+2)-48)*10+(h(e.msg,e.i+3)-48)),R((h(e.msg,e.i+4)-48)*10+(h(e.msg,e.i+5)-48)),R((h(e.msg,e.i+6)-48)*10+(h(e.msg,e.i+7)-48))]),e.addtocws(),e.i=e.i+10;break}if(h(e.DatumC,e.i)){var Se=h(e.msg,e.i);if(Se==e.fn1||Se==e.fn2||Se==e.fn3){if(n[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),h(e.ECI,e.i)){n[t++]=1/0,e.ECIabc();var ze=o();n[t++]=ze,e.addtocws(),e.i=e.i+7;break}if(h(e.msg,e.i)==e.fn3&&e.segstart!=e.i){e.i=e.i+1,e.inmac=0,e.segstart=e.i,e.segend=R(e.i+h(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}n[t++]=o([R((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2;break}if(h(e.Binary,e.i)){if(h(e.nDigits,e.i+1)>0){h(e.msg,e.i)<160?(n[t++]=o([h(e.Cvals,e.bsa),h(e.Avals,h(e.msg,e.i)-128)]),e.addtocws()):(n[t++]=o([h(e.Cvals,e.bsb),h(e.Bvals,h(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}n[t++]=o([h(e.Cvals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(e.m=h(e.AheadA,e.i),e.n=h(e.AheadB,e.i),_c(e.m,e.n)){n[t++]=o([h(e.Cvals,e.laa)]),e.addtocws(),e.mode=e.A;break}if(e.i==e.segstart){var Pe=h(e.msg,e.i);if(Pe==9||Pe==28||Pe==29||Pe==30){n[t++]=o([h(e.Cvals,e.laa)]),e.addtocws(),e.mode=e.A;break}}if(e.n>4){n[t++]=o([h(e.Cvals,e.lab)]),e.addtocws(),e.mode=e.B;break}n[t++]=o([h(e.Cvals,h(o([e.sfb,e.sb2,e.sb3,e.sb4]),e.n-1))]),e.addtocws();for(var Be=0,at=e.n;Be<at;Be++)h(e.msg,e.i)==13?(n[t++]=o([h(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2):(n[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1);break}},e.encB=function(){for(var ke=0;ke<1;ke++){if(e.n=h(e.TryC,e.i),e.n>=2){if(e.n>4){n[t++]=o([h(e.Bvals,e.lac)]),e.addtocws(),e.mode=e.C;break}n[t++]=o([h(e.Bvals,h(o([e.sfc,e.sc2,e.sc3,e.sc4]),e.n-1))]),e.addtocws();for(var Ee=0,De=e.n;Ee<De;Ee++)h(e.msg,e.i)<0?(n[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(n[t++]=o([R((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(h(e.DatumB,e.i)){var xe=h(e.msg,e.i);if(xe==e.fn1||xe==e.fn2||xe==e.fn3){if(n[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),h(e.ECI,e.i)){n[t++]=1/0,e.ECIabc();var Ne=o();n[t++]=Ne,e.addtocws(),e.i=e.i+7;break}if(h(e.msg,e.i)==e.fn3&&e.i!=e.segstart){e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=R(e.i+h(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}if(h(e.msg,e.i)==13&&e.i<e.msglen-1&&h(e.msg,e.i+1)==10){n[t++]=o([h(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2;break}n[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}if(h(e.Binary,e.i)){if(h(e.DatumB,e.i+1)){h(e.msg,e.i)<160?(n[t++]=o([h(e.Bvals,e.bsa),h(e.Avals,h(e.msg,e.i)-128)]),e.addtocws()):(n[t++]=o([h(e.Bvals,e.bsb),h(e.Bvals,h(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}n[t++]=o([h(e.Bvals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(h(e.AheadA,e.i)==1){n[t++]=o([h(e.Bvals,e.sfa),h(e.Avals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}n[t++]=o([h(e.Bvals,e.laa)]),e.addtocws(),e.mode=e.A;break}},e.encA=function(){for(var ke=0;ke<1;ke++){if(e.n=h(e.TryC,e.i),e.n>=2){if(e.n>4){n[t++]=o([h(e.Avals,e.lac)]),e.addtocws(),e.mode=e.C;break}n[t++]=o([h(e.Avals,h(o([e.sfc,e.sc2,e.sc3,e.sc4]),e.n-1))]),e.addtocws();for(var Ee=0,De=e.n;Ee<De;Ee++)h(e.msg,e.i)<0?(n[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(n[t++]=o([R((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(h(e.DatumA,e.i)){var xe=h(e.msg,e.i);if(xe==e.fn1||xe==e.fn2||xe==e.fn3){if(n[t++]=o([h(e.Avals,h(e.msg,e.i))]),e.addtocws(),h(e.ECI,e.i)){n[t++]=1/0,e.ECIabc();var Ne=o();n[t++]=Ne,e.addtocws(),e.i=e.i+7;break}if(h(e.msg,e.i)==e.fn3&&e.i!=e.segstart){e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=R(e.i+h(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}n[t++]=o([h(e.Avals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}if(h(e.Binary,e.i)){if(h(e.DatumA,e.i+1)){h(e.msg,e.i)<160?(n[t++]=o([h(e.Avals,e.bsa),h(e.Avals,h(e.msg,e.i)-128)]),e.addtocws()):(n[t++]=o([h(e.Avals,e.bsb),h(e.Bvals,h(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}n[t++]=o([h(e.Avals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(e.n=h(e.AheadB,e.i),e.n>6){n[t++]=o([h(e.Avals,e.lab)]),e.addtocws(),e.mode=e.B;break}n[t++]=o([h(e.Avals,h(o([e.sfb,e.sb2,e.sb3,e.sb4,e.sb5,e.sb6]),e.n-1))]),e.addtocws();for(var je=0,Se=e.n;je<Se;je++)h(e.msg,e.i)==13?(n[t++]=o([h(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2):(n[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1);break}},e.encBIN=function(){for(var ke=0;ke<1;ke++){if(e.n=h(e.TryC,e.i),e.n>=2){n[t++]=1/0,e.finaliseBIN();var Ee=o();if(n[t++]=Ee,e.addtocws(),e.n>7){n[t++]=o([h(e.BINvals,e.tmc)]),e.addtocws(),e.mode=e.C;break}n[t++]=o([h(e.BINvals,h(o([e.sc2,e.sc3,e.sc4,e.sc5,e.sc6,e.sc7]),e.n-2))]),e.addtocws();for(var De=0,xe=e.n;De<xe;De++)h(e.msg,e.i)<0?(n[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(n[t++]=o([R((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(h(e.ECI,e.i)&&h(e.Binary,e.i+7)){n[t++]=1/0,e.ECIbin();var Ne=o();if(n[t++]=Ne,e.addtocws(),e.i=e.i+7,e.i==e.msglen){n[t++]=1/0,e.finaliseBIN();var je=o();n[t++]=je,e.addtocws()}break}if(h(e.msg,e.i)>=0&&(h(e.Binary,e.i)||h(e.Binary,e.i+1)||h(e.Binary,e.i+2)||h(e.Binary,e.i+3)||h(e.ECI,e.i+1)&&h(e.Binary,e.i+8))){n[t++]=1/0,n[t++]=h(e.msg,e.i),e.addtobin();var Se=o();if(n[t++]=Se,e.addtocws(),e.i=e.i+1,e.i==e.msglen){n[t++]=1/0,e.finaliseBIN();var ze=o();n[t++]=ze,e.addtocws()}break}n[t++]=1/0,e.finaliseBIN();var Pe=o();if(n[t++]=Pe,e.addtocws(),e.i!=e.msglen-1){if(h(e.msg,e.i)==e.fn3&&e.i!=e.segstart){n[t++]=o([h(e.BINvals,e.tms)]),e.addtocws(),e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=R(e.i+h(e.UntilEndSeg,e.i));break}_c(h(e.AheadA,e.i),h(e.AheadB,e.i))?(n[t++]=o([h(e.BINvals,e.tma)]),e.addtocws(),e.mode=e.A):(n[t++]=o([h(e.BINvals,e.tmb)]),e.addtocws(),e.mode=e.B);break}break}},e.cws=o(e.msglen*2+1),e.mode=e.C,e.bvals=o(5),e.bpos=0,e.inmac=0,e.segstart=0,e.segend=h(e.UntilEndSeg,0),e.i=0,e.j=0;!(e.i>=e.msglen||e.inmac!=0&&(e.inmac!=e.mac&&e.i==e.segend-2&&(e.i=e.i+2,e.i>=e.msglen)||e.inmac==e.mac&&e.i==e.segend-1&&(e.i=e.i+1,e.i>=e.msglen))||e[h(o(["encA","encB","encC","encBIN"]),e.mode)]()===!0););if(e.cws=O(e.cws,0,e.j),e.nd=e.cws.length,e.minarea=((e.nd+3+~~(e.nd/2))*9+2)*2,e.ratio!=-1)e.hgt=L3(e.minarea/e.ratio),e.wid=L3(e.minarea*e.ratio),e.h=~~e.hgt,e.w=~~e.wid,(e.h+e.w)%2==1?e.h*e.w<e.minarea&&(e.h=e.h+1,e.w=e.w+1):e.hgt*e.w<e.wid*e.h?(e.w=e.w+1,e.h*e.w<e.minarea&&(e.w=e.w-1,e.h=e.h+1,e.h*e.w<e.minarea&&(e.w=e.w+2))):(e.h=e.h+1,e.h*e.w<e.minarea&&(e.h=e.h-1,e.w=e.w+1,e.h*e.w<e.minarea&&(e.h=e.h+2))),e.rows=e.h,e.columns=e.w;else{if(e.columns==-1){var zt=~~((e.minarea+e.rows-1)/e.rows);if(n[t++]="columns",n[t++]=zt,(zt+e.rows)%2==0){var Ct=n[--t];n[t++]=Ct+1}var Yt=n[--t];e[n[--t]]=Yt}if(e.rows==-1){var jt=~~((e.minarea+e.columns-1)/e.columns);if(n[t++]="rows",n[t++]=jt,(jt+e.columns)%2==0){var an=n[--t];n[t++]=an+1}var rn=n[--t];e[n[--t]]=rn}}for(e.ndots=~~(e.rows*e.columns/2);;){var Kt=e.nd+1;if((Kt+(~~(Kt/2)+3))*9+2>e.ndots)break;e.nd=e.nd+1}if(e.nc=~~(e.nd/2)+3,e.nw=e.nd+e.nc,e.rembits=e.ndots-(e.nw*9+2),e.nd>e.cws.length){n[t++]=1/0,W(e.cws);var Jt=e.mode==e.BIN?109:106;n[t++]=Jt;for(var Zt=0,Qt=e.nd-e.cws.length-1;Zt<Qt;Zt++)n[t++]=106;e.cws=o()}var mn=h(e.options,"debugcws")!==void 0;mn&&(n[t++]="bwipp.debugcws#26927",n[t++]=e.cws,Z()),e.nw*9>e.ndots-2&&(n[t++]="bwipp.dotcodeTooLong#26931",n[t++]="Maximum length exceeded",Z()),e.encs=o(["101010101","010101011","010101101","010110101","011010101","101010110","101011010","101101010","110101010","010101110","010110110","010111010","011010110","011011010","011101010","100101011","100101101","100110101","101001011","101001101","101010011","101011001","101100101","101101001","110010101","110100101","110101001","001010111","001011011","001011101","001101011","001101101","001110101","010010111","010011011","010011101","010100111","010110011","010111001","011001011","011001101","011010011","011011001","011100101","011101001","100101110","100110110","100111010","101001110","101011100","101100110","101101100","101110010","101110100","110010110","110011010","110100110","110101100","110110010","110110100","111001010","111010010","111010100","001011110","001101110","001110110","001111010","010011110","010111100","011001110","011011100","011100110","011101100","011110010","011110100","100010111","100011011","100011101","100100111","100110011","100111001","101000111","101100011","101110001","110001011","110001101","110010011","110011001","110100011","110110001","111000101","111001001","111010001","000101111","000110111","000111011","000111101","001001111","001100111","001110011","001111001","010001111","011000111","011100011","011110001","100011110","100111100","101111000","110001110","110011100","110111000","111000110","111001100"]),e.rows%2==0?e.sixedges=o([o([e.columns-1,e.rows-2]),o([0,e.rows-2]),o([e.columns-2,e.rows-1]),o([1,e.rows-1]),o([e.columns-1,0]),o([0,0])]):e.sixedges=o([o([e.columns-2,0]),o([e.columns-2,e.rows-1]),o([e.columns-1,1]),o([e.columns-1,e.rows-2]),o([0,0]),o([0,e.rows-1])]),e.dmv=function(){var ke=n[--t],Ee=n[--t];n[t++]=R(Ee+ke*e.columns)},e.outline=o(e.rows*e.columns);for(var cn=0,dn=e.rows-1;cn<=dn;cn+=1){e.y=cn;for(var Ht=0,Bt=e.columns-1;Ht<=Bt;Ht+=1){e.x=Ht,n[t++]=e.outline,n[t++]=e.x,n[t++]=e.y,e.dmv();var Y=n[--t];C(n[--t],Y,(e.x+e.y)%2-1)}}for(var le=e.sixedges,se=0,ge=le.length;se<ge;se++){n[t++]=e.outline,W(h(le,se)),e.dmv();var ve=n[--t];C(n[--t],ve,1)}e.clearcol=function(){e.x=n[--t],n[t++]=!0;for(var ke=e.x&1,Ee=e.rows-1;ke<=Ee;ke+=2)if(n[t++]=e.x,n[t++]=ke,e.dmv(),h(e.sym,n[--t])==1){n[t-1]=!1;break}},e.clearrow=function(){e.y=n[--t],n[t++]=!0;for(var ke=e.y&1,Ee=e.columns-1;ke<=Ee;ke+=2)if(n[t++]=ke,n[t++]=e.y,e.dmv(),h(e.sym,n[--t])==1){n[t-1]=!1;break}},e.evalsymbol=function(){e.sym=n[--t],e.worst=9999999;for(var ke=o([o(["x",0]),o(["x",1]),o(["y",0]),o(["y",1])]),Ee=0,De=ke.length;Ee<De;Ee++){W(h(ke,Ee)),e.fl=n[--t],e.dir=n[--t],e.sum=0,e.first=-1,e.last=-1;for(var xe=ce(e.dir,"x")?e.columns:e.rows,Ne=0,je=xe-1;Ne<=je;Ne+=1){e[e.dir]=Ne;var Se=e.sym,ze=e[e.dir],Pe=ce(e.dir,"x")?e.rows:e.columns,Be=(Pe-1)*e.fl;if(ce(e.dir,"y")){var at=Be;Be=ze,ze=at}n[t++]=Se,n[t++]=ze,n[t++]=Be,e.dmv();var Ze=n[--t];h(n[--t],Ze)==1&&(e.first==-1&&(e.first=e[e.dir]),e.last=e[e.dir],e.sum=e.sum+1)}var ft=ce(e.dir,"x")?e.rows:e.columns,Ve=R(e.sum+e.last-e.first)*ft;n[t++]=Ve,Ve<e.worst?e.worst=n[--t]:t--}if(e.pen=0,e.rows%2==1||e.rows<=12){e.sum=0,e.p=0;for(var $e=1,Me=e.columns-2;$e<=Me;$e+=1)if(n[t++]=$e,e.clearcol(),n[--t]){e.sum=e.sum+1,n[t++]="p",e.sum==1?n[t++]=e.rows:n[t++]=e.p*e.rows;var it=n[--t];e[n[--t]]=it}else e.sum=0,e.pen=e.pen+e.p,e.p=0;e.pen=e.pen+e.p}if(e.rows%2==0||e.columns<=12){e.sum=0,e.p=0;for(var st=1,mt=e.rows-2;st<=mt;st+=1)if(n[t++]=st,e.clearrow(),n[--t]){e.sum=e.sum+1,n[t++]="p",e.sum==1?n[t++]=e.columns:n[t++]=e.p*e.columns;var Tt=n[--t];e[n[--t]]=Tt}else e.sum=0,e.pen=e.pen+e.p,e.p=0;e.pen=e.pen+e.p}n[t++]=1/0;for(var Ot=0,Et=(e.columns+4)*2;Ot<Et;Ot++)n[t++]=0;for(var Dt=0,wt=e.columns,en=e.sym.length-1;wt<0?Dt>=en:Dt<=en;Dt+=wt)n[t++]=0,n[t++]=0,W(O(e.sym,Dt,e.columns)),n[t++]=0,n[t++]=0;for(var gt=0,un=(e.columns+4)*2;gt<un;gt++)n[t++]=0;e.symp=o(),e.columns=e.columns+4,e.rows=e.rows+4,e.sum=0;for(var Vt=2,fn=e.rows-3;Vt<=fn;Vt+=1){e.y=Vt;for(var $n=(e.y&1)+2,ei=e.columns-3;$n<=ei;$n+=2){e.x=$n;for(var Dn=0;Dn<1;Dn++){n[t++]=e.symp,n[t++]=e.x-1,n[t++]=e.y-1,e.dmv();var ai=n[--t];if(h(n[--t],ai)==1)break;n[t++]=e.symp,n[t++]=e.x+1,n[t++]=e.y-1,e.dmv();var zn=n[--t];if(h(n[--t],zn)==1)break;n[t++]=e.symp,n[t++]=e.x-1,n[t++]=e.y+1,e.dmv();var mi=n[--t];if(h(n[--t],mi)==1)break;n[t++]=e.symp,n[t++]=e.x+1,n[t++]=e.y+1,e.dmv();var Fn=n[--t];if(h(n[--t],Fn)==1)break;n[t++]=e.symp,n[t++]=e.x,n[t++]=e.y,e.dmv();var Hn=n[--t];if(h(n[--t],Hn)==0){e.sum=e.sum+1;break}n[t++]=e.symp,n[t++]=e.x-2,n[t++]=e.y,e.dmv();var _n=n[--t];if(h(n[--t],_n)==1)break;n[t++]=e.symp,n[t++]=e.x,n[t++]=e.y-2,e.dmv();var vn=n[--t];if(h(n[--t],vn)==1)break;n[t++]=e.symp,n[t++]=e.x+2,n[t++]=e.y,e.dmv();var kn=n[--t];if(h(n[--t],kn)==1)break;n[t++]=e.symp,n[t++]=e.x,n[t++]=e.y+2,e.dmv();var Ai=n[--t];if(h(n[--t],Ai)==1)break;e.sum=e.sum+1}}}e.columns=e.columns-4,e.rows=e.rows-4,e.worst==0?n[t++]=-99999:n[t++]=R(e.worst-e.sum*e.sum-e.pen)},n[t++]=1/0,n[t++]=1;for(var _e=0;_e<112;_e++){var pe=n[t-1];n[t++]=pe*3%113}e.rsalog=o(),e.step=~~(e.nw/112)+1,e.offset=function(){var ke=n[--t];n[t++]=R(ke*e.step+e.start)},e.bestscore=-99999999,n[t++]="masks",e.mask!=-1?n[t++]=o([e.mask]):e.fast?n[t++]=o([3,2,1,0]):n[t++]=o([0,1,2,3]);var Oe=n[--t];e[n[--t]]=Oe,e.litmasks=o(4),Ie(e.masks,function(){e.mask=n[--t],n[t++]=1/0;var ke=e.cws;n[t++]=e.mask,n[t++]=h(o([0,3,7,17]),e.mask),n[t++]=0;for(var Ee=0,De=ke.length;Ee<De;Ee++){var xe=n[--t],Ne=n[--t];n[t++]=R(h(ke,Ee)+xe)%113,n[t++]=Ne,n[t++]=R(xe+Ne)}t-=2;for(var je=0,Se=e.nc;je<Se;je++)n[t++]=0;e.rscws=o();for(var ze=0,Pe=e.step-1;ze<=Pe;ze+=1){e.start=ze,e.ND=~~((e.nd+1-e.start+e.step-1)/e.step),e.NW=~~((e.nw+1-e.start+e.step-1)/e.step),e.NC=e.NW-e.ND,n[t++]=1/0,n[t++]=1;for(var Be=0,at=e.NC;Be<at;Be++)n[t++]=0;e.coeffs=o();for(var Ze=1,ft=e.NC;Ze<=ft;Ze+=1){e.i=Ze;for(var Ve=e.NC;Ve>=1;Ve-=1)e.j=Ve,C(e.coeffs,e.j,R(h(e.coeffs,e.j)+113-h(e.rsalog,e.i)*h(e.coeffs,e.j-1)%113)%113)}for(var $e=0,Me=e.ND-1;$e<=Me;$e+=1){n[t++]="t",n[t++]=e.rscws,n[t++]=$e,e.offset();var it=n[--t],st=h(n[--t],it);n[t++]=st,n[t++]=e.rscws,n[t++]=e.ND,e.offset();var mt=n[--t],Tt=h(n[--t],mt),Ot=n[--t];e[n[--t]]=R(Ot+Tt)%113;for(var Et=0,Dt=e.NC-2;Et<=Dt;Et+=1){e.j=Et,n[t++]=e.rscws,n[t++]=e.ND+e.j,e.offset(),n[t++]=e.rscws,n[t++]=e.ND+e.j+1,e.offset();var wt=n[--t],en=h(n[--t],wt),gt=n[--t];C(n[--t],gt,R(en+113-e.t*h(e.coeffs,e.j+1)%113)%113)}n[t++]=e.rscws,n[t++]=e.ND+e.NC-1,e.offset();var un=n[--t];C(n[--t],un,(113-e.t*h(e.coeffs,e.NC)%113)%113)}for(var Vt=e.ND,fn=e.NW-1;Vt<=fn;Vt+=1){n[t++]=Vt,n[t++]=e.rscws,n[t++]=Vt,e.offset(),n[t++]=113,n[t++]=e.rscws,oa(5,-1),e.offset();var $n=n[--t],ei=h(n[--t],$n),Dn=n[--t],ai=n[--t];C(n[--t],ai,R(Dn-ei)%113)}}e.bits=fe(e.ndots),H(e.bits,0,h(o(["00","01","10","11"]),e.mask));for(var zn=1,mi=e.nw;zn<=mi;zn+=1)e.i=zn,H(e.bits,(e.i-1)*9+2,h(e.encs,h(e.rscws,e.i)));e.rembits>0&&H(e.bits,e.nw*9+2,O("11111111111111111",0,e.rembits));var Fn=e.outline;e.pixs=Jh(o(Fn.length),Fn),e.posx=0,n[t++]="posy",e.rows%2==0?n[t++]=0:n[t++]=e.rows-1;var Hn=n[--t];e[n[--t]]=Hn;for(var _n=O(e.bits,0,e.bits.length-6),vn=0,kn=_n.length;vn<kn;vn++){for(n[t++]=h(_n,vn);;){n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.dmv();var Ai=n[--t];if(h(n[--t],Ai)==-1)break;e.rows%2==0?(e.posy=e.posy+1,e.posy==e.rows&&(e.posy=0,e.posx=e.posx+1)):(e.posx=e.posx+1,e.posx==e.columns&&(e.posx=0,e.posy=e.posy-1))}n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.dmv();var Ei=n[t-3],Ji=n[t-1];C(n[t-2],Ji,Ei-48),t-=3}for(var nn=0;nn<=5;nn+=1){e.i=nn,n[t++]=e.pixs,W(h(e.sixedges,e.i)),e.dmv();var yn=n[--t];C(n[--t],yn,h(e.bits,e.bits.length-6+e.i)-48)}n[t++]="score",n[t++]=e.pixs,e.evalsymbol();var qn=n[--t];if(e[n[--t]]=qn,e.score>e.bestscore&&(e.bestsym=e.pixs,e.bestscore=e.score,e.fast&&e.bestscore>~~(e.rows*e.columns/2)))return!0;var Tn=e.pixs;e.litmask=Jh(o(Tn.length),Tn);for(var Gn=0;Gn<=5;Gn+=1){e.i=Gn,n[t++]=e.litmask,W(h(e.sixedges,e.i)),e.dmv();var gi=n[--t];C(n[--t],gi,1)}if(C(e.litmasks,e.mask,e.litmask),e.fast){n[t++]="score",n[t++]=e.litmask,e.evalsymbol();var Vn=n[--t];if(e[n[--t]]=Vn,_c(e.score,e.bestscore)&&(e.bestsym=e.litmask,e.bestscore=e.score,e.bestscore>~~(e.rows*e.columns/2)))return!0}}),e.pixs=e.bestsym,!e.fast&&e.bestscore<=~~(e.rows*e.columns/2)&&(e.bestscore=-99999999,Ie(e.masks,function(){e.litmask=h(e.litmasks,n[--t]),n[t++]="score",n[t++]=e.litmask,e.evalsymbol();var ke=n[--t];e[n[--t]]=ke,e.score>e.bestscore&&(e.bestsym=e.litmask,e.bestscore=e.score)}),e.pixs=e.bestsym);var de=new Map([["ren","renmatrix"],["dotty",!0],["pixs",e.pixs],["pixx",e.columns],["pixy",e.rows],["height",e.rows*2/72],["width",e.columns*2/72],["borderleft",3],["borderright",3],["bordertop",3],["borderbottom",3],["opt",e.options]]);n[t++]=de,e.dontdraw||Lt(),e=r}function _T(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.eclevel="EC2",e.parse=!1,e.parsefnc=!1,e.start=257,e.link1=0,e.raw=!1,e.rev=2,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=e.rev;i!=1&&i!=2&&(n[t++]="bwipp.ultracodeInvalidRevision#27328",n[t++]="Valid revisions are 1 and 2",Z());var a=e.eclevel.length==3;if(n[t++]=a,a){t--;var s=ce(O(e.eclevel,0,2),"EC");if(n[t++]=s,s){t--;var l=h(e.eclevel,2)-48,c=e.rev==2?1:0;n[t++]=l>=c&&l<=5}}if(n[--t]||(n[t++]="bwipp.ultracodeInvalidErrorCorrectionLevel#27337",n[t++]="Valid error correction levels are EC1 to EC5, and EC0 for legacy revision 1",Z()),e.raw){for(e.dcws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ye(O(e.barcode,e.i+1,3)),C(e.dcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.dcws=O(e.dcws,0,e.j)}else{e.fn1=-1,e.fn3=-2;var d=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=d,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var f=n[--t];e[n[--t]]=f,e.msglen=e.msg.length,e.scr=o([]),e.scp=o([]),n[t++]=1/0,W(e.scr),W(e.scp),Ie(e.msg,function(){var Be=n[t-1];Be==e.fn1&&(n[t-1]=268);var at=n[t-1];at==e.fn3&&(n[t-1]=269)}),e.dcws=o()}var m=h(e.options,"debugcws")!==void 0;if(m&&(n[t++]="bwipp.debugcws#27381",n[t++]=e.dcws,Z()),e.mcc=e.dcws.length+3,e.eclval=h(e.eclevel,2)-48,e.eclval!=0){if(n[t++]="qcc",n[t++]=h(o([0,1,2,4,6,8]),e.eclval),n[t++]=~~(e.mcc/25),e.mcc%25!=0){var g=n[--t];n[t++]=g+1}var v=n[--t],y=n[--t];e[n[--t]]=y*v+5}else e.qcc=3;e.acc=e.qcc-3+78*e.link1,e.tcc=e.mcc+e.qcc,e.metrics=o([o([2,7,37,5]),o([3,36,84,13]),o([4,85,161,22]),o([5,142,282,29])]);for(var A=e.metrics,w=0,k=A.length;w<k&&(e.m=h(A,w),e.rows=h(e.m,0),e.minc=h(e.m,1),e.maxc=h(e.m,2),e.mcol=h(e.m,3),e.okay=!0,(e.tcc<e.minc||e.tcc>e.maxc)&&(e.okay=!1),!e.okay);w++);e.okay||(n[t++]="bwipp.ultracodeNoValidSymbol#27417",n[t++]="Maximum length exceeded or invalid content",Z());for(var E=e.mcol;E<=61;E+=1){if(e.columns=E,n[t++]=e.columns,e.columns>=15){var I=n[--t];n[t++]=I-1}if(e.columns>=31){var T=n[--t];n[t++]=T-1}if(e.columns>=47){var N=n[--t];n[t++]=N-1}var j=R(n[--t]*e.rows-3-e.tcc);if(n[t++]=j,j>=0){e.pads=n[--t];break}t--}e.dcc=R(e.columns-e.mcol),n[t++]=1/0,n[t++]=e.start,n[t++]=e.mcc,n[t++]=e.acc,W(e.dcws);for(var B=0,U=e.qcc;B<U;B++)n[t++]=0;n[t++]=0,e.rsseq=o(),n[t++]=1/0,n[t++]=1;for(var F=0;F<282;F++){var P=n[t-1];n[t++]=P*3%283}e.rsalog=o(),e.rslog=o(283);for(var z=1;z<=282;z+=1)C(e.rslog,h(e.rsalog,z),z);e.rsprod=function(){var Be=n[t-1],at=n[t-2];if(Be!=0&&at!=0){var Ze=h(e.rslog,n[--t]),ft=h(e.rsalog,R(Ze+h(e.rslog,n[--t]))%282);n[t++]=ft}else t-=2,n[t++]=0},e.n=e.mcc,e.k=e.qcc,n[t++]=1/0,n[t++]=1;for(var V=0,L=e.k;V<L;V++)n[t++]=0;e.coeffs=o();for(var Q=1,q=e.k;Q<=q;Q+=1){e.i=Q,C(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var ee=e.i-1;ee>=1;ee-=1){e.j=ee,n[t++]=e.coeffs,n[t++]=e.j,n[t++]=h(e.coeffs,e.j-1),n[t++]=h(e.coeffs,e.j),n[t++]=h(e.rsalog,e.i),e.rsprod();var X=n[--t],ae=n[--t],K=n[--t];C(n[--t],K,R(ae+X)%283)}n[t++]=e.coeffs,n[t++]=0,n[t++]=h(e.coeffs,0),n[t++]=h(e.rsalog,e.i),e.rsprod();var ie=n[--t],ne=n[--t];C(n[--t],ne,ie)}e.coeffs=O(e.coeffs,0,e.coeffs.length-1);for(var J=e.coeffs.length-1;J>=0;J-=2){var te=e.coeffs;C(te,J,283-h(te,J))}for(var $=0,oe=e.n-1;$<=oe;$+=1){e.t=R(h(e.rsseq,$)+h(e.rsseq,e.n))%283;for(var we=0,be=e.k-1;we<=be;we+=1)e.j=we,C(e.rsseq,e.n+e.j,R(h(e.rsseq,e.n+e.j+1)+(283-e.t*h(e.coeffs,e.k-e.j-1)%283))%283)}for(var Te=e.n,ye=e.n+e.k;Te<=ye;Te+=1)C(e.rsseq,Te,(283-h(e.rsseq,Te))%283);e.ecws=O(e.rsseq,e.n,e.k);var tt=h(e.options,"debugecc")!==void 0;tt&&(n[t++]="bwipp.debugecc#27487",n[t++]=e.ecws,Z()),e.tiles=o([13135,13136,13153,13156,13163,13165,13513,13515,13516,13531,13535,13536,13561,13563,13565,13613,13615,13616,13631,13635,13636,13651,13653,13656,15135,15136,15153,15163,15165,15313,15315,15316,15351,15353,15356,15361,15363,15365,15613,15615,15616,15631,15635,15636,15651,15653,15656,16135,16136,16153,16156,16165,16313,16315,16316,16351,16353,16356,16361,16363,16365,16513,16515,16516,16531,16535,16536,16561,16563,16565,31315,31316,31351,31356,31361,31365,31513,31515,31516,31531,31535,31536,31561,31563,31565,31613,31615,31631,31635,31636,31651,31653,31656,35131,35135,35136,35151,35153,35156,35161,35163,35165,35315,35316,35351,35356,35361,35365,35613,35615,35616,35631,35635,35636,35651,35653,35656,36131,36135,36136,36151,36153,36156,36163,36165,36315,36316,36351,36356,36361,36365,36513,36515,36516,36531,36535,36536,36561,36563,36565,51313,51315,51316,51351,51353,51356,51361,51363,51365,51513,51516,51531,51536,51561,51563,51613,51615,51616,51631,51635,51636,51651,51653,51656,53131,53135,53136,53151,53153,53156,53161,53163,53165,53513,53516,53531,53536,53561,53563,53613,53615,53616,53631,53635,53636,53651,53653,53656,56131,56135,56136,56151,56153,56156,56161,56163,56165,56313,56315,56316,56351,56353,56356,56361,56363,56365,56513,56516,56531,56536,56561,56563,61313,61315,61316,61351,61353,61356,61361,61363,61365,61513,61515,61516,61531,61535,61536,61561,61563,61565,61615,61631,61635,61651,61653,63131,63135,63136,63151,63153,63156,63161,63163,63165,63513,63515,63516,63531,63535,63536,63561,63563,63565,63613,63615,63631,63635,63651,63653,65131,65135,65136,65151,65153,65156,65161,65163,65165,65313,65315,65316,65351,65353,65356,65361,65363,65365,65613,65615,65631,65635,65651,65653,56565,51515]),e.dccurev1=o([51363,51563,51653,53153,53163,53513,53563,53613,53653,56153,56163,56313,56353,56363,56513,56563,51316,51356,51536,51616,53156,53516,53536,53616,53636,53656,56136,56156,56316,56356,56516,56536]),e.dcclrev1=o([61351,61361,61531,61561,61631,61651,63131,63151,63161,63531,63561,63631,65131,65161,65351,65631,31351,31361,31531,31561,31631,31651,35131,35151,35161,35361,35631,35651,36131,36151,36351,36531]),e.dccurev2=o([15316,16316,13516,16516,13616,15616,13136,15136,16136,13536,16536,13636,13156,16156,15356,13656,15313,16313,13513,16513,13613,15613,13153,15153,16153,16353,13653,15653,13163,15163,15363,13563]),e.dcclrev2=o([36315,36515,35615,35135,36135,31535,36535,31635,35635,35165,36165,31365,35365,36365,31565,36565,61315,65315,63515,61615,65135,61535,63535,61635,63635,65635,63165,65165,61365,65365,61565,63565]),n[t++]="dccu",e.rev==1?n[t++]=e.dccurev1:n[t++]=e.dccurev2;var Qe=n[--t];e[n[--t]]=Qe,n[t++]="dccl",e.rev==1?n[t++]=e.dcclrev1:n[t++]=e.dcclrev2;var Ge=n[--t];e[n[--t]]=Ge,e.rows=e.rows*6+1,e.columns=e.columns+6,n[t++]=1/0;for(var Xe=0,Je=e.rows*e.columns;Xe<Je;Xe++)n[t++]=-1;e.pixs=o(),e.qmv=function(){var Be=n[--t],at=n[--t];n[t++]=R(at+Be*e.columns)};for(var dt=0,vt=e.columns-1;dt<=vt;dt+=1){e.i=dt;for(var _t=0,xt=e.rows-1;_t<=xt;_t+=6)if(e.j=_t,e.i>=5){n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.j,e.qmv();var bt=n[--t];C(n[--t],bt,e.i%2*9)}n[t++]=e.pixs,n[t++]=e.i,n[t++]=0,e.qmv();var kt=n[--t];C(n[--t],kt,9),n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.rows-1,e.qmv();var Pt=n[--t];C(n[--t],Pt,9)}for(var Rt=1,Wt=e.rows-2;Rt<=Wt;Rt+=1){e.i=Rt;for(var zt=3,Ct=e.columns-1;zt<=Ct;zt+=16){e.j=zt,n[t++]=e.pixs,n[t++]=e.j,n[t++]=e.i,e.qmv();var Yt=n[--t];C(n[--t],Yt,(1-e.i%2)*9)}n[t++]=e.pixs,n[t++]=0,n[t++]=e.i,e.qmv();var jt=n[--t];C(n[--t],jt,9),n[t++]=e.pixs,n[t++]=1,n[t++]=e.i,e.qmv();var an=n[--t];C(n[--t],an,(1-e.i%2)*9),n[t++]=e.pixs,n[t++]=2,n[t++]=e.i,e.qmv();var rn=n[--t];C(n[--t],rn,0),n[t++]=e.pixs,n[t++]=3,n[t++]=e.i,e.qmv();var Kt=n[--t];C(n[--t],Kt,9),n[t++]=e.pixs,n[t++]=4,n[t++]=e.i,e.qmv();var Jt=n[--t];C(n[--t],Jt,0),n[t++]=e.pixs,n[t++]=e.columns-1,n[t++]=e.i,e.qmv();var Zt=n[--t];C(n[--t],Zt,9)}e.i=~~(e.rows/2)-5,n[t++]=1/0;for(var Qt=Nn(fe(5),h(e.dccu,e.dcc),10),mn=0,cn=Qt.length;mn<cn;mn++)n[t++]=h(Qt,mn)-48;var dn=Nn(fe(5),h(e.dccl,e.dcc),10);n[t++]=0;for(var Ht=0,Bt=dn.length;Ht<Bt;Ht++)n[t++]=h(dn,Ht)-48;for(var Y=o(),le=0,se=Y.length;le<se;le++){n[t++]=h(Y,le),n[t++]=e.pixs,n[t++]=2,n[t++]=e.i,e.qmv();var ge=n[t-3],ve=n[t-1];C(n[t-2],ve,ge),t-=3,e.i=e.i+1}n[t++]=1/0,n[t++]=e.start,n[t++]=e.mcc,W(e.ecws),n[t++]=e.tcc,n[t++]=283,n[t++]=e.acc,W(e.dcws);for(var _e=0,pe=e.pads;_e<pe;_e++)n[t++]=284;n[t++]=e.qcc,e.tileseq=o(),e.x=5,e.y=1;for(var Oe=e.tileseq,de=0,ke=Oe.length;de<ke;de++){for(var Ee=Nn(fe(5),h(e.tiles,h(Oe,de)),10),De=0,xe=Ee.length;De<xe;De++){n[t++]=h(Ee,De),n[t++]=e.pixs,n[t++]=e.x,n[t++]=e.y,e.qmv();var Ne=n[t-3],je=n[t-1];C(n[t-2],je,Ne-48),t-=3,e.y=e.y+1}if(e.y!=e.rows-1)e.y=e.y+1;else{e.x=e.x+1,e.y=1,n[t++]=e.pixs,n[t++]=e.x,n[t++]=e.y,e.qmv();var Se=n[--t];h(n[--t],Se)!=-1&&(e.x=e.x+1)}}var ze=new Map([[0,"FFFFFF"],[9,"000000"],[1,"00FFFF"],[3,"FF00FF"],[5,"FFFF00"],[6,"00FF00"]]);e.colormap=ze;var Pe=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.columns],["pixy",e.rows],["height",e.rows/72*2],["width",e.columns/72*2],["colormap",e.colormap],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);n[t++]=Pe,e.dontdraw||Lt(),e=r}function IT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=-1,e.slave=!1,e.colors=16,e.eclevel=6,e.raw=!1,e.parse=!1,e.parsefnc=!1,e.mask=-1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.databpm=~~yc(ro(e.colors)/ro(2));var i=e.colors;n[t++]="metabpm",n[t++]=i,i>8&&(n[t-1]=8);var a=n[--t];e[n[--t]]=~~yc(ro(a)/ro(2)),e.fn1=-1;var s=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1]]);e.fncvals=s,n[t++]="msg",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var l=n[--t];e[n[--t]]=l,e.msglen=e.msg.length,e.addtobits=function(){var Nt=n[--t];H(e.bits,e.j,Nt),e.j=Nt.length+e.j},e.tofixedbits=function(){var Nt=zi(fe(13),"0000000000000");n[t++]=Nt,n[t++]=Nt,oa(4,-1);var $t=Nn(fe(13),n[--t],2),Yn=n[--t],Kn=n[--t],Jn=n[--t];H(Yn,R(Jn-$t.length),$t),n[t++]=O(Kn,0,Jn)};var c=e.msglen<=15?4:17;e.bits=fe(7+c+e.msglen*8+12),e.j=0,n[t++]=31,n[t++]=5,e.tofixedbits(),e.addtobits(),n[t++]="00",e.addtobits(),e.msglen<=15?(n[t++]=e.msglen,n[t++]=4,e.tofixedbits(),e.addtobits()):(n[t++]="0000",e.addtobits(),n[t++]=e.msglen-16,n[t++]=13,e.tofixedbits(),e.addtobits());for(var d=0,f=e.msglen-1;d<=f;d+=1)n[t++]=h(e.msg,d),n[t++]=8,e.tofixedbits(),e.addtobits();if(n[t++]=28,n[t++]=5,e.tofixedbits(),e.addtobits(),n[t++]=31,n[t++]=5,e.tofixedbits(),e.addtobits(),n[t++]="11",e.addtobits(),e.diffside=21,e.sameshape=!1,e.sameecc=!1,e.hasslaves=!1,e.metrics=function(){e.mc=n[--t],e.mr=n[--t];var Nt=e.mc,$t=e.mr,Yn=e.mc,Kn=e.mr,Jn=e.colors,Si=64;if(64>Jn){var Wn=Jn;Jn=Si,Si=Wn}var $i=e.slave?7:17;if(n[t++]=Nt*$t,n[t++]=((~~((Yn-25)/16)+2)*(~~((Kn-25)/16)+2)-4)*7,n[t++]=Si*2,n[t++]=$i*4,e.slave){if(n[t++]=3,!e.sameshape){var Ni=n[--t];n[t++]=Ni+5}if(e.hasslaves){var Ti=n[--t];n[t++]=Ti+3}if(!e.sameecc){var ci=e.mr,Mi=e.mc;if(oo(ci,Mi)){var Wn=Mi;Mi=ci,ci=Wn}var Ar=n[--t];n[t++]=R(Ar+h(o([10,12,14,14,16,16,16,16]),~~((ci-21)/16)))}var gr=~~li(n[--t]*2/e.metabpm);e.nummetabits=gr*e.metabpm,n[t++]=gr}else{var Ii=ce(e.mr,e.mc)?0:1;e.metass=Ii;var fi=e.mr,Fi=e.mc;if(oo(fi,Fi)){var Wn=Fi;Fi=fi,fi=Wn}e.metavf=h(o([0,1,2,2,3,3,3,3]),~~((fi-21)/16)),n[t++]="metavlen",e.metass==0?n[t++]=o([2,2,3,4]):n[t++]=o([4,6,8,10]);var Gi=h(n[--t],e.metavf);if(e[n[--t]]=Gi,e.metaelen=e.metavf*2+10,n[t++]=R(7+e.metavlen+e.metaelen),e.hasslaves){var mr=n[--t];n[t++]=mr+4}var Vi=~~li(n[--t]*2/e.metabpm);e.nummetabits=Vi*e.metabpm+6,n[t++]=Vi+6}var ga=n[--t];e.nummetamodules=ga;var Sa=n[--t],ns=n[--t],Pa=n[--t];e.numdatamodules=R(n[--t]-(Pa+(ns+(Sa+ga)))),e.numdatabits=e.numdatamodules*e.databpm},e.coderate=h(o([.67,.63,.57,.55,.5,.43,.34,.25,.2,.17,.14]),e.eclevel),e.grosslen=~~li(e.bits.length/e.coderate),e.snapsize=function(){var Nt=~~li(n[--t])-18;n[t++]=Nt,Nt<0&&(n[t-1]=0);var $t=n[--t];n[t++]=~~($t/4)*4+21},e.rows==-1&&e.columns==-1){n[t++]="size",n[t++]=L3(e.grosslen),e.snapsize();var m=n[--t];for(e[n[--t]]=m;n[t++]=e.size,n[t++]=e.size,e.metrics(),!(e.grosslen<=e.numdatabits);)e.size=e.size+4;e.rows=e.size,e.columns=e.size}else{if(e.columns==-1&&e.rows!=-1){n[t++]="columns",n[t++]=e.grosslen/e.rows,e.snapsize();var g=n[--t];for(e[n[--t]]=g;n[t++]=e.rows,n[t++]=e.columns,e.metrics(),!(e.grosslen<=e.numdatabits);)e.columns=e.columns+4}if(e.rows==-1&&e.columns!=-1){n[t++]="rows",n[t++]=e.grosslen/e.columns,e.snapsize();var v=n[--t];for(e[n[--t]]=v;n[t++]=e.rows,n[t++]=e.columns,e.metrics(),!(e.grosslen<=e.numdatabits);)e.rows=e.rows+4}e.rows!=-1&&e.columns!=-1&&(n[t++]=e.rows,n[t++]=e.columns,e.metrics())}e.C=e.numdatabits,e.cols=e.columns,(e.rows>145||e.cols>145)&&(n[t++]="bwipp.jabcodeNoValidSymbol#27844",n[t++]="Maximum length exceeded or invalid content",Z()),e.min=e.C;for(var y=3;y<=8;y+=1){e.i=y;for(var A=e.i+1;A<=9;A+=1)e.j=A,e.dist=~~(e.C/e.j)*e.j-~~(e.C/e.j)*e.i-e.bits.length,e.dist<e.min&&e.dist>=0&&(e.datawc=e.i,e.datawr=e.j,e.min=e.dist)}e.tmpbits=fe(~~(e.C/e.datawr)*e.datawr-~~(e.C/e.datawr)*e.datawc),H(e.tmpbits,0,e.bits);for(var w=e.bits.length,k=e.tmpbits.length-1;w<=k;w+=1){var E=h(e.tmpbits,w-1);if(n[t++]=w,n[t++]=E,E%2==0){var I=n[--t];n[t++]=I+1}else{var T=n[--t];n[t++]=T-1}n[t++]=e.tmpbits;var N=n[t-2],j=n[t-3];C(n[t-1],j,N),t-=3}e.bits=e.tmpbits,e.m0=22610,e.m1=-3027,e.m2=19605,e.m3=32557,e.lcg64_temper=function(){e.p00=e.m0*e.s0,e.p01=e.m0*e.s1,e.p02=e.m0*e.s2,e.p03=e.m0*e.s3,e.p10=e.m1*e.s0,e.p11=e.m1*e.s1,e.p12=e.m1*e.s2,e.p13=e.m1*e.s3,e.p20=e.m2*e.s0,e.p21=e.m2*e.s1,e.p22=e.m2*e.s2,e.p23=e.m2*e.s3,e.p30=e.m3*e.s0,e.p31=e.m3*e.s1,e.p32=e.m3*e.s2,e.p33=e.m3*e.s3,e.s3=e.p33%65536+1,e.s2=e.p32%65536+~~(e.p33/65536)+e.p23%65536,e.s1=e.p31%65536+~~(e.p32/65536)+(e.p22%65536+~~(e.p23/65536))+e.p13%65536,e.s0=e.p30%65536+~~(e.p31/65536)+(e.p21%65536+~~(e.p22/65536))+(e.p12%65536+~~(e.p13/65536))+e.p03%65536,e.s3=e.s3+65536,e.s2=e.s2+65535,e.s1=e.s1+65535,e.s0=e.s0+65535,e.s2=~~(e.s3/65536)+e.s2,e.s3=e.s3%65536,e.s1=~~(e.s2/65536)+e.s1,e.s2=e.s2%65536,e.s0=~~(e.s1/65536)+e.s0,e.s1=e.s1%65536,e.s0=e.s0%65536;var Nt=((e.s0-32768)*65536+e.s1^2147483648)&4294967295,$t=Nt^Nt>>>11,Yn=$t^$t<<7&-1658038656,Kn=(Yn^Yn<<15&-272236544)&4294967295;n[t++]=Kn^Kn>>>18},e.createMatrixA=function(){n[t++]="nb_pcb",e.wr<4?n[t++]=~~(e.Pg_sub_block/2):n[t++]=~~(e.Pg_sub_block/e.wr)*e.wc;var Nt=n[--t];e[n[--t]]=Nt,e.offset=~~li(e.Pg_sub_block/32),e.effwidth=e.offset*32,e.matrixA=o(e.offset*e.nb_pcb);for(var $t=0,Yn=e.offset*e.nb_pcb-1;$t<=Yn;$t+=1)C(e.matrixA,$t,0);e.permutation=o(e.Pg_sub_block);for(var Kn=0,Jn=e.Pg_sub_block-1;Kn<=Jn;Kn+=1)C(e.permutation,Kn,Kn);for(var Si=0,Wn=~~(e.Pg_sub_block/e.wr)-1;Si<=Wn;Si+=1){e.i=Si;for(var $i=0,Ii=e.wr-1;$i<=Ii;$i+=1){e.j=$i;var fi=e.matrixA,Fi=e.i,Gi=e.effwidth,mr=e.wr,Vi=e.j,Ni=31-R(e.i*(e.effwidth+e.wr)+e.j)%32;C(fi,~~(R(Fi*(Gi+mr)+Vi)/32),h(fi,~~(R(Fi*(Gi+mr)+Vi)/32))|(Ni<0?1>>>-Ni:1<<Ni))}}e.s0=0,e.s1=0,e.s2=11,e.s3=64569;for(var Ti=1,ci=e.wc-1;Ti<=ci;Ti+=1){e.i=Ti,e.off_index=~~(e.Pg_sub_block/e.wr)*e.i;for(var Mi=0,Ar=e.Pg_sub_block-1;Mi<=Ar;Mi+=1){e.j=Mi,e.lcg64_temper();var gr=n[t-1];if(gr<0){var ga=n[--t];n[t++]=(ga^2147483648)+2147483648}e.pos=~~(n[--t]/4294967296*(e.Pg_sub_block-e.j));for(var Sa=0,ns=~~(e.Pg_sub_block/e.wr)-1;Sa<=ns;Sa+=1){e.k=Sa;var Pa=e.matrixA,Un=e.off_index,ni=e.k,hi=e.offset,Wi=e.j,Ri=h(e.matrixA,~~(h(e.permutation,e.pos)/32)+e.k*e.offset),er=-(31-h(e.permutation,e.pos)%32),Yi=31-e.j%32;C(Pa,(Un+ni)*hi+~~(Wi/32),h(Pa,(Un+ni)*hi+~~(Wi/32))|(Yi<0?((er<0?Ri>>>-er:Ri<<er)&1)>>>-Yi:((er<0?Ri>>>-er:Ri<<er)&1)<<Yi))}var Oi=e.permutation,Or=e.Pg_sub_block,Ya=e.j;C(Oi,Or-1-Ya,h(e.permutation,e.pos)),C(e.permutation,e.pos,h(Oi,Or-1-Ya))}}},e.createMetadataMatrixA=function(){e.nb_pcb=~~(e.Pg_sub_block/2),e.offset=~~li(e.Pg_sub_block/32),e.matrixA=o(e.offset*e.nb_pcb);for(var Nt=0,$t=e.offset*e.nb_pcb-1;Nt<=$t;Nt+=1)C(e.matrixA,Nt,0);e.permutation=o(e.Pg_sub_block);for(var Yn=0,Kn=e.Pg_sub_block-1;Yn<=Kn;Yn+=1)C(e.permutation,Yn,Yn);e.s0=0,e.s1=0,e.s2=0,e.s3=38545,e.nb_once=~~(~~(e.nb_pcb/e.wc*e.Pg_sub_block+3)/e.nb_pcb);for(var Jn=0,Si=e.nb_pcb-1;Jn<=Si;Jn+=1){e.i=Jn;for(var Wn=0,$i=e.nb_once-1;Wn<=$i;Wn+=1){e.j=Wn,e.lcg64_temper();var Ii=n[t-1];if(Ii<0){var fi=n[--t];n[t++]=(fi^2147483648)+2147483648}e.pos=~~(n[--t]/4294967296*(e.Pg_sub_block-e.j));var Fi=e.matrixA,Gi=e.i,mr=e.offset,Vi=h(e.permutation,e.pos),Ni=31-h(e.permutation,e.pos)%32;C(Fi,Gi*mr+~~(Vi/32),h(Fi,Gi*mr+~~(Vi/32))|(Ni<0?1>>>-Ni:1<<Ni));var Ti=e.permutation,ci=e.Pg_sub_block,Mi=e.j;C(Ti,ci-1-Mi,h(e.permutation,e.pos)),C(e.permutation,e.pos,h(Ti,ci-1-Mi))}}},e.GaussJordan=function(){n[t++]="nb_pcb",e.wr<4?n[t++]=~~(e.Pg_sub_block/2):n[t++]=~~(e.Pg_sub_block/e.wr)*e.wc;var Nt=n[--t];e[n[--t]]=Nt,e.offset=~~li(e.Pg_sub_block/32);var $t=e.matrixA;e.matrixH=Jh(o($t.length),$t),n[t++]=1/0;for(var Yn=0,Kn=e.Pg_sub_block;Yn<Kn;Yn++)n[t++]=0;e.column_arrangement=o(),n[t++]=1/0;for(var Jn=0,Si=e.Pg_sub_block;Jn<Si;Jn++)n[t++]=!1;e.processed_column=o(),n[t++]=1/0;for(var Wn=0,$i=e.nb_pcb;Wn<$i;Wn++)n[t++]=0;e.zero_lines_nb=o(),n[t++]=1/0;for(var Ii=0,fi=e.Pg_sub_block*2;Ii<fi;Ii++)n[t++]=0;e.swap_col=o(),e.zero_lines=0,e.loop0=0;for(var Fi=0,Gi=e.nb_pcb-1;Fi<=Gi;Fi+=1){e.i=Fi,e.pivot_column=e.Pg_sub_block+1;for(var mr=0,Vi=e.Pg_sub_block-1;mr<=Vi;mr+=1){e.j=mr;var Ni=h(e.matrixH,~~((e.offset*32*e.i+e.j)/32)),Ti=-(31-(e.offset*32*e.i+e.j)%32);if(((Ti<0?Ni>>>-Ti:Ni<<Ti)&1)==1){e.pivot_column=e.j;break}}if(e.pivot_column<e.Pg_sub_block){C(e.processed_column,e.pivot_column,!0),C(e.column_arrangement,e.pivot_column,e.i),e.pivot_column>=e.nb_pcb&&(C(e.swap_col,e.loop0*2,e.pivot_column),e.loop0=e.loop0+1),e.off_index=~~(e.pivot_column/32),e.off_index1=e.pivot_column%32;for(var ci=0,Mi=e.nb_pcb-1;ci<=Mi;ci+=1)if(e.j=ci,e.i!=e.j){var Ar=h(e.matrixH,e.off_index+e.j*e.offset),gr=-(31-e.off_index1);if(((gr<0?Ar>>>-gr:Ar<<gr)&1)==1)for(var ga=0,Sa=e.offset-1;ga<=Sa;ga+=1){e.k=ga;var ns=e.matrixH,Pa=e.offset,Un=e.j,ni=e.k;C(ns,Pa*Un+ni,Ha(h(ns,Pa*Un+ni),h(e.matrixH,e.offset*e.i+e.k)))}}}else C(e.zero_lines_nb,e.zero_lines,e.i),e.zero_lines=e.zero_lines+1}e.matrix_rank=e.nb_pcb-e.zero_lines,e.loop2=0;for(var hi=e.matrix_rank,Wi=e.nb_pcb-1;hi<=Wi;hi+=1)if(e.i=hi,h(e.column_arrangement,e.i)>0){for(var Ri=0,er=e.nb_pcb-1;Ri<=er;Ri+=1)if(e.j=Ri,!h(e.processed_column,e.j)){C(e.column_arrangement,e.j,h(e.column_arrangement,e.i)),C(e.column_arrangement,e.i,0),C(e.processed_column,e.j,!0),C(e.processed_column,e.i,!1),C(e.swap_col,e.loop0*2,e.i),C(e.swap_col,e.loop0*2+1,e.j),C(e.column_arrangement,e.i,e.j),e.loop0=e.loop0+1,e.loop2=e.loop2+1;break}}e.loop1=0;for(var Yi=0,Oi=e.nb_pcb-1;Yi<=Oi;Yi+=1)e.kl=Yi,!h(e.processed_column,e.kl)&&e.loop1<e.loop0-e.loop2&&(C(e.column_arrangement,e.kl,h(e.column_arrangement,h(e.swap_col,e.loop1*2))),C(e.processed_column,e.kl,!0),C(e.swap_col,e.loop1*2+1,e.kl),e.loop1=e.loop1+1);e.loop1=0;for(var Or=0,Ya=e.nb_pcb-1;Or<=Ya;Or+=1)e.kl=Or,h(e.processed_column,e.kl)||(C(e.column_arrangement,e.kl,h(e.zero_lines_nb,e.loop1)),e.loop1=e.loop1+1);for(var bs=0,Ts=e.nb_pcb-1;bs<=Ts;bs+=1){e.i=bs;for(var Xs=0,Ms=e.offset-1;Xs<=Ms;Xs+=1)e.j=Xs,C(e.matrixA,e.i*e.offset+e.j,h(e.matrixH,R(h(e.column_arrangement,e.i)*e.offset+e.j)))}e.tmp=0;for(var Rs=0,ys=e.loop0-1;Rs<=ys;Rs+=1){e.i=Rs;for(var Os=0,Ds=e.nb_pcb-1;Os<=Ds;Os+=1){e.j=Os;var ol=h(e.matrixA,~~(h(e.swap_col,e.i*2)/32)+e.j*e.offset),Eo=-(31-h(e.swap_col,e.i*2)%32);e.tmp=(-((Eo<0?ol>>>-Eo:ol<<Eo)&1)^e.tmp)&1^e.tmp;var Ks=e.matrixA,co=h(e.swap_col,e.i*2),lt=e.j,Ft=e.offset,jn=h(e.matrixA,~~(h(e.swap_col,e.i*2+1)/32)+e.j*e.offset),si=-(31-h(e.swap_col,e.i*2+1)%32),dr=31-h(e.swap_col,e.i*2)%32;C(Ks,~~(co/32)+lt*Ft,h(Ks,~~(co/32)+lt*Ft)^(-((si<0?jn>>>-si:jn<<si)&1)^h(e.matrixA,~~(h(e.swap_col,e.i*2)/32)+e.j*e.offset))&(dr<0?1>>>-dr:1<<dr));var ca=e.matrixA,va=h(e.swap_col,e.i*2+1),Fa=e.j,ws=e.offset,As=31-h(e.swap_col,e.i*2+1)%32;C(ca,~~(va/32)+Fa*ws,h(ca,~~(va/32)+Fa*ws)^(-(e.tmp&1)^h(e.matrixA,~~(h(e.swap_col,e.i*2+1)/32)+e.j*e.offset))&(As<0?1>>>-As:1<<As))}}},e.createGeneratorMatrix=function(){e.pn=e.Pg_sub_block-e.matrix_rank,e.offset=~~li(e.pn/32),e.effwidth=e.offset*32,e.offset_cap=~~li(e.Pg_sub_block/32),e.G=o(e.offset*e.Pg_sub_block);for(var Nt=0,$t=e.offset*e.Pg_sub_block-1;Nt<=$t;Nt+=1)C(e.G,Nt,0);for(var Yn=0,Kn=e.pn-1;Yn<=Kn;Yn+=1){e.i=Yn;var Jn=e.G,Si=e.Pg_sub_block,Wn=e.pn,$i=e.i,Ii=e.offset,fi=e.i,Fi=31-e.i%32;C(Jn,(Si-Wn+$i)*Ii+~~(fi/32),h(Jn,(Si-Wn+$i)*Ii+~~(fi/32))|(Fi<0?1>>>-Fi:1<<Fi))}e.matrix_index=e.Pg_sub_block-e.pn,e.loop0=0;for(var Gi=0,mr=(e.Pg_sub_block-e.pn)*e.effwidth-1;Gi<=mr;Gi+=1)if(e.i=Gi,e.matrix_index>=e.Pg_sub_block&&(e.loop0=e.loop0+1,e.matrix_index=e.Pg_sub_block-e.pn),e.i%e.effwidth<e.pn){var Vi=e.G,Ni=e.i,Ti=h(e.matrixA,~~(e.matrix_index/32)+e.offset_cap*e.loop0),ci=-(31-e.matrix_index%32),Mi=31-e.i%32;C(Vi,~~(Ni/32),h(Vi,~~(Ni/32))^(-((ci<0?Ti>>>-ci:Ti<<ci)&1)^h(e.G,~~(e.i/32)))&(Mi<0?1>>>-Mi:1<<Mi)),e.matrix_index=e.matrix_index+1}},e.ldpc=function(){e.wr=n[--t],e.wc=n[--t],n[t++]=1/0;var Nt=n[--t],$t=n[--t];if(n[t++]=Nt,Ie($t,function(){var ga=n[--t];n[t++]=ga-48}),e.data=o(),e.Pn=e.data.length,e.wr!=-1){if(e.Pg=~~(li(li(e.Pn*e.wr/R(e.wr-e.wc))/e.wr)*e.wr),e.nb_sub_blocks=~~(e.Pg/2700)+1,e.Pg_sub_block=~~(~~(e.Pg/e.nb_sub_blocks)/e.wr)*e.wr,e.Pn_sub_block=~~(e.Pg_sub_block*R(e.wr-e.wc)/e.wr),e.nb_sub_blocks=~~(e.Pg/e.Pg_sub_block),n[t++]="encoding_iterations",n[t++]=~~(e.Pg/e.Pg_sub_block),e.Pn_sub_block*e.nb_sub_blocks<e.Pn){var Yn=n[--t];n[t++]=Yn-1}var Kn=n[--t];e[n[--t]]=Kn,e.createMatrixA()}else e.Pg=e.Pn*2,e.nb_sub_blocks=1,e.Pg_sub_block=e.Pg,e.Pn_sub_block=e.Pn,e.encoding_iterations=1,e.createMetadataMatrixA();e.GaussJordan(),e.createGeneratorMatrix(),e.ecc_encoded_data=o(e.Pg),e.offset=~~li((e.Pg_sub_block-e.matrix_rank)/32);for(var Jn=0,Si=e.encoding_iterations-1;Jn<=Si;Jn+=1){e.iter=Jn;for(var Wn=0,$i=e.Pg_sub_block-1;Wn<=$i;Wn+=1){e.i=Wn,e.temp=0,e.loop0=0,e.offset_index=e.offset*e.i;for(var Ii=e.iter*e.Pn_sub_block,fi=(e.iter+1)*e.Pn_sub_block-1;Ii<=fi;Ii+=1){var Fi=h(e.G,e.offset_index+~~(e.loop0/32)),Gi=-(31-e.loop0%32);e.temp=h(e.data,Ii)&((Gi<0?Fi>>>-Gi:Fi<<Gi)&1)^e.temp,e.loop0=e.loop0+1}C(e.ecc_encoded_data,e.i+e.iter*e.Pg_sub_block,e.temp)}}if(e.encoding_iterations!=e.nb_sub_blocks){e.start=e.encoding_iterations*e.Pn_sub_block,e.last_index=e.encoding_iterations*e.Pg_sub_block,e.Pg_sub_block=e.Pg-e.encoding_iterations*e.Pg_sub_block,e.Pn_sub_block=~~(e.Pg_sub_block*R(e.wr-e.wc)/e.wr),e.createMatrixA(),e.GaussJordan(),e.createGeneratorMatrix(),e.offset=~~li((e.Pg_sub_block-e.matrix_rank)/32);for(var mr=0,Vi=e.Pg_sub_block-1;mr<=Vi;mr+=1){e.i=mr,e.temp=0,e.loop0=0,e.offset_index=e.offset*e.i;for(var Ni=e.start,Ti=e.Pn-1;Ni<=Ti;Ni+=1){var ci=h(e.G,e.offset_index+~~(e.loop0/32)),Mi=-(31-e.loop0%32);e.temp=h(e.data,Ni)&((Mi<0?ci>>>-Mi:ci<<Mi)&1)^e.temp,e.loop0=e.loop0+1}C(e.ecc_encoded_data,e.i+e.last_index,e.temp)}}e.out=fe(e.Pg);for(var Ar=0,gr=e.Pg-1;Ar<=gr;Ar+=1)C(e.out,Ar,h(e.ecc_encoded_data,Ar)+48);n[t++]=e.out},n[t++]="bits",n[t++]=e.bits,n[t++]=e.datawc,n[t++]=e.datawr,e.ldpc();var B=n[--t];e[n[--t]]=B,e.s0=0,e.s1=0,e.s2=3,e.s3=30151;for(var U=e.bits.length-1;U>=1;U-=1){e.l=U,e.lcg64_temper();var F=n[t-1];if(F<0){var P=n[--t];n[t++]=(P^2147483648)+2147483648}e.r=~~(n[--t]/4294967296*(e.l+1)),C(e.bits,e.l,h(e.bits,e.r)),C(e.bits,e.r,h(e.bits,e.l))}e.tmpbits=fe(e.C),H(e.tmpbits,0,e.bits),e.j=e.bits.length;for(var z=0,V=~~((R(e.C-e.j)+1)/2);z<V;z++)C(e.tmpbits,e.j,48),e.j+1<e.C&&C(e.tmpbits,e.j+1,49),e.j=e.j+2;if(e.bits=e.tmpbits,e.colors==4)e.bi=0,e.gi=1,e.mi=2,e.yi=3,e.ki=4,e.wi=5,n[t++]=1/0,n[t++]=e.bi,n[t++]="0000FF",n[t++]=e.gi,n[t++]="00FF00",n[t++]=e.mi,n[t++]="FF00FF",n[t++]=e.yi,n[t++]="FFFF00",n[t++]=e.ki,n[t++]="000000",n[t++]=e.wi,n[t++]="FFFFFF",e.palette=rt(),e.metacolorindex=o([e.bi,e.gi,e.mi,e.yi]),e.palettelayout=o([e.bi,e.gi,e.mi,e.yi]);else{var L=new Map([[8,o([2,2,2])],[16,o([4,2,2])],[32,o([4,4,2])],[64,o([4,4,4])],[128,o([8,4,4])],[256,o([8,8,4])]]);e.rgbres=h(L,e.colors),n[t++]="rvals",n[t++]=h(e.rgbres,0),n[t++]=1/0;var Q=n[--t],q=n[--t]-1;n[t++]=Q,n[t++]=q;for(var ee=0,X=q;ee<=X;ee+=1){var ae=n[--t];n[t++]=~~yc(ee*(255/ae)),n[t++]=ae}t--;var K=o();e[n[--t]]=K,n[t++]="gvals",n[t++]=h(e.rgbres,1),n[t++]=1/0;var ie=n[--t],ne=n[--t]-1;n[t++]=ie,n[t++]=ne;for(var J=0,te=ne;J<=te;J+=1){var $=n[--t];n[t++]=~~yc(J*(255/$)),n[t++]=$}t--;var oe=o();e[n[--t]]=oe,n[t++]="bvals",n[t++]=h(e.rgbres,2),n[t++]=1/0;var we=n[--t],be=n[--t]-1;n[t++]=we,n[t++]=be;for(var Te=0,ye=be;Te<=ye;Te+=1){var tt=n[--t];n[t++]=~~yc(Te*(255/tt)),n[t++]=tt}t--;var Qe=o();e[n[--t]]=Qe,e.colors,e.palette=new Map;var Ge=e.colors,Xe=64;if(64>Ge){var Je=Ge;Ge=Xe,Xe=Je}e.palettelayout=o(Xe),e.i=0,e.j=8,Ie(e.rvals,function(){e.r=n[--t],Ie(e.gvals,function(){e.g=n[--t],Ie(e.bvals,function(){e.b=n[--t];var Nt=zi(fe(6),"000000"),$t=Nn(fe(6),e.r<<16|e.g<<8|e.b,16);H(Nt,6-$t.length,$t),n[t++]=Nt,n[t++]=!1,ce(Nt,"000000")&&(e.ki=e.i,n[t-1]=!0);var Yn=n[t-2];ce(Yn,"0000FF")&&(e.bi=e.i,n[t-1]=!0);var Kn=n[t-2];ce(Kn,"00FF00")&&(e.gi=e.i,n[t-1]=!0);var Jn=n[t-2];ce(Jn,"00FFFF")&&(e.ci=e.i,n[t-1]=!0);var Si=n[t-2];ce(Si,"FF0000")&&(e.ri=e.i,n[t-1]=!0);var Wn=n[t-2];ce(Wn,"FF00FF")&&(e.mi=e.i,n[t-1]=!0);var $i=n[t-2];ce($i,"FFFF00")&&(e.yi=e.i,n[t-1]=!0);var Ii=n[t-2];ce(Ii,"FFFFFF")&&(e.wi=e.i,n[t-1]=!0),n[--t]||(e.colors<=64||e.colors==128&&(e.r==0||e.r==73||e.r==182||e.r==255)||e.colors==256&&(e.r==0||e.r==73||e.r==182||e.r==255)&&(e.g==0||e.g==73||e.g==182||e.g==255))&&(C(e.palettelayout,e.j,e.i),e.j=e.j+1),C(e.palette,e.i,n[--t]),e.i=e.i+1})})}),H(e.palettelayout,0,o([e.ki,e.bi,e.gi,e.ci,e.ri,e.mi,e.yi,e.wi])),e.metacolorindex=o([e.ki,e.bi,e.gi,e.ci,e.ri,e.mi,e.yi,e.wi])}n[t++]=1/0;for(var dt=0,vt=e.rows*e.cols;dt<vt;dt++)n[t++]=-1;e.pixs=o(),e.jmv=function(){var Nt=n[--t],$t=n[--t];n[t++]=R($t+Nt*e.cols)},e.slave?(e.fpat=o([o([0,0,0,0,0]),o([0,2,2,0,0]),o([0,2,1,2,0]),o([0,0,2,2,0]),o([0,0,0,0,0])]),e.fmap=o([o([-1,e.ki,e.wi]),o([-1,e.ki,e.wi]),o([-1,e.ki,e.wi]),o([-1,e.ki,e.wi])])):(e.fpat=o([o([1,1,1,0,0]),o([1,2,2,0,0]),o([1,2,1,2,1]),o([0,0,2,2,1]),o([0,0,1,1,1])]),e.fmap=o([o([-1,e.bi,e.yi]),o([-1,e.yi,e.bi]),o([-1,e.gi,e.mi]),o([-1,e.mi,e.gi])]));for(var _t=0;_t<=4;_t+=1){e.y=_t;for(var xt=0;xt<=4;xt+=1){e.x=xt,e.fpb=h(h(e.fpat,e.y),e.x),n[t++]=e.pixs,n[t++]=e.x+1,n[t++]=e.y+1,e.jmv();var bt=n[--t];C(n[--t],bt,h(h(e.fmap,0),e.fpb)),n[t++]=e.pixs,n[t++]=e.x+1,n[t++]=R(e.rows-e.y)-2,e.jmv();var kt=n[--t];C(n[--t],kt,h(h(e.fmap,1),e.fpb)),n[t++]=e.pixs,n[t++]=R(e.x+e.cols)-6,n[t++]=e.y+1,e.jmv();var Pt=n[--t];C(n[--t],Pt,h(h(e.fmap,2),e.fpb)),n[t++]=e.pixs,n[t++]=R(e.x+e.cols)-6,n[t++]=R(e.rows-e.y)-2,e.jmv();var Rt=n[--t];C(n[--t],Rt,h(h(e.fmap,3),e.fpb))}}if(e.algnpat0=o([o([e.ki,e.ki,-1]),o([e.ki,e.wi,e.ki]),o([-1,e.ki,e.ki])]),e.algnpat1=o([o([-1,e.ki,e.ki]),o([e.ki,e.wi,e.ki]),o([e.ki,e.ki,-1])]),e.num=~~yc(e.cols/16)-1,e.algnrpos=o([3,17]),e.num>0){n[t++]=1/0;for(var Wt=0,zt=e.num;Wt<=zt;Wt+=1)n[t++]=~~(Wt*((e.cols-7)/e.num))+3;e.algnrpos=o()}if(e.num=~~yc(e.rows/16)-1,e.algncpos=o([3,17]),e.num>0){n[t++]=1/0;for(var Ct=0,Yt=e.num;Ct<=Yt;Ct+=1)n[t++]=~~(Ct*((e.rows-7)/e.num))+3;e.algncpos=o()}e.putalgnpat=function(){e.pp=n[--t],e.py=n[--t],e.px=n[--t];for(var Nt=0;Nt<=2;Nt+=1){e.pb=Nt;for(var $t=0;$t<=2;$t+=1){e.pa=$t,n[t++]=e.pixs,n[t++]=R(e.px+e.pa),n[t++]=R(e.py+e.pb),e.jmv();var Yn=n[--t];C(n[--t],Yn,h(h(e.pp,e.pb),e.pa))}}};for(var jt=0,an=e.algncpos.length-1;jt<=an;jt+=1){e.j=jt,e.y=h(e.algncpos,e.j);for(var rn=0,Kt=e.algnrpos.length-1;rn<=Kt;rn+=1){e.i=rn,e.x=h(e.algnrpos,e.i),n[t++]=e.pixs,n[t++]=e.x,n[t++]=e.y,e.jmv();var Jt=n[--t];h(n[--t],Jt)==-1&&(n[t++]=e.x-1,n[t++]=e.y-1,(e.i+e.j)%2==0?n[t++]=e.algnpat0:n[t++]=e.algnpat1,e.putalgnpat())}}if(e.slave){n[t++]=1/0;for(var cn=1;cn<=19;cn+=1)e.i=cn,n[t++]=o([0,e.i]),n[t++]=o([1,e.i]);for(var dn=5;dn<=12;dn+=1)e.i=dn,n[t++]=o([2,e.i]),n[t++]=o([3,e.i]);e.metadatamap=o(),n[t++]=1/0;for(var Ht=5;Ht<=12;Ht+=1){var Bt=1/0,Y=Ht;n[t++]=Bt,n[t++]=4,n[t++]=Y;var le=o();n[t++]=le}for(var se=12;se>=5;se-=1){var ge=1/0,ve=se;n[t++]=ge,n[t++]=5,n[t++]=ve;var _e=o();n[t++]=_e}for(var pe=5;pe<=12;pe+=1){var Oe=1/0,de=pe;n[t++]=Oe,n[t++]=6,n[t++]=de;var ke=o();n[t++]=ke}for(var Ee=12;Ee>=5;Ee-=1){var De=1/0,xe=Ee;n[t++]=De,n[t++]=7,n[t++]=xe;var Ne=o();n[t++]=Ne}e.palettemap1=o(),n[t++]=1/0;for(var je=e.palettemap1,Se=0,ze=je.length;Se<ze;Se++){var Pe=1/0,Be=h(je,Se);n[t++]=Pe,W(Be);var at=n[--t],Ze=n[--t];n[t++]=-Ze,n[t++]=-at;var ft=o();n[t++]=ft}e.palettemap2=o()}else{for(var Zt=o([o([6,1]),o([6,2]),o([6,3]),o([6,4]),o([6,5]),o([6,6]),o([5,6]),o([4,6]),o([3,6]),o([2,6]),o([1,6]),o([7,1]),o([7,2]),o([7,3]),o([7,4]),o([7,5]),o([7,6]),o([7,7]),o([6,7]),o([5,7]),o([4,7]),o([3,7]),o([2,7]),o([1,7]),o([8,1]),o([8,2]),o([8,3]),o([8,4]),o([8,5]),o([8,6]),o([8,7]),o([8,8]),o([7,8]),o([6,8]),o([5,8]),o([4,8]),o([3,8]),o([2,8]),o([1,8]),o([9,1]),o([9,2]),o([9,3]),o([9,4]),o([9,5])]),Qt=0,mn=Zt.length;Qt<mn;Qt++)W(h(Zt,Qt)),e.y=n[--t],e.x=n[--t],n[t++]=o([e.x,e.y]),n[t++]=o([-e.x,e.y]),n[t++]=o([-e.x,-e.y]),n[t++]=o([e.x,-e.y]);Rn(o(176)),e.metadatamap=n[--t],e.palettemap1=o([o([4,1]),o([4,2]),o([5,1]),o([5,2]),o([2,4]),o([2,5]),o([1,4]),o([1,5]),o([-2,1]),o([-2,2]),o([-1,1]),o([-1,2]),o([-4,4]),o([-4,5]),o([-5,4]),o([-5,5])]),e.palettemap2=o([o([-4,-5]),o([-4,-4]),o([-5,-5]),o([-5,-4]),o([-2,-2]),o([-2,-1]),o([-1,-2]),o([-1,-1]),o([2,-5]),o([2,-4]),o([1,-5]),o([1,-4]),o([4,-2]),o([4,-1]),o([5,-2]),o([5,-1])])}for(var Ve=e.metadatamap,$e=0,Me=Ve.length;$e<Me;$e++){var it=h(Ve,$e),st=h(it,0);if(n[t++]=it,n[t++]=st,st<0){var mt=n[--t],Tt=n[t-1];C(Tt,0,R(mt+e.cols)-1)}else t--;var Ot=n[t-1],Et=h(Ot,1);if(n[t++]=Et,Et<0){var Dt=n[--t],wt=n[t-1];C(wt,1,R(Dt+e.rows)-1)}else t--;t--}for(var en=e.palettemap1,gt=0,un=en.length;gt<un;gt++){var Vt=h(en,gt),fn=h(Vt,0);if(n[t++]=Vt,n[t++]=fn,fn<0){var $n=n[--t],ei=n[t-1];C(ei,0,R($n+e.cols)-1)}else t--;var Dn=n[t-1],ai=h(Dn,1);if(n[t++]=ai,ai<0){var zn=n[--t],mi=n[t-1];C(mi,1,R(zn+e.rows)-1)}else t--;t--}for(var Fn=e.palettemap2,Hn=0,_n=Fn.length;Hn<_n;Hn++){var vn=h(Fn,Hn),kn=h(vn,0);if(n[t++]=vn,n[t++]=kn,kn<0){var Ai=n[--t],Ei=n[t-1];C(Ei,0,R(Ai+e.cols)-1)}else t--;var Ji=n[t-1],nn=h(Ji,1);if(n[t++]=nn,nn<0){var yn=n[--t],qn=n[t-1];C(qn,1,R(yn+e.rows)-1)}else t--;t--}for(var Tn=0,Gn=e.nummetamodules-1;Tn<=Gn;Tn+=1){n[t++]=e.pixs,W(h(e.metadatamap,Tn)),e.jmv();var gi=n[--t];C(n[--t],gi,0)}if(e.slave)e.i=0;else{var Vn=e.colors,ln=16;if(16>Vn){var Je=Vn;Vn=ln,ln=Je}for(var ti=0,Qi=ln-1;ti<=Qi;ti+=1){e.i=ti;var Bi=h(e.palettelayout,e.i);n[t++]=Bi,n[t++]=e.pixs,n[t++]=Bi,W(h(e.palettemap1,e.i)),e.jmv();var Ir=n[--t],_i=n[--t];C(n[--t],Ir,_i);var Nr=n[--t];n[t++]=e.pixs,n[t++]=Nr,W(h(e.palettemap2,e.i)),e.jmv();var rr=n[--t],Zr=n[--t];C(n[--t],rr,Zr)}e.i=16}e.j=e.nummetamodules;for(var ar=e.i,sr=e.palettelayout.length-1;ar<=sr;ar+=2){e.i=ar;var Pi=h(e.palettelayout,e.i);n[t++]=Pi,n[t++]=e.pixs,n[t++]=Pi,W(h(e.metadatamap,e.j)),e.jmv();var hr=n[--t],Lr=n[--t];C(n[--t],hr,Lr);var pr=n[--t];n[t++]=e.pixs,n[t++]=pr,W(h(e.metadatamap,e.j+2)),e.jmv();var xr=n[--t],wa=n[--t];C(n[--t],xr,wa);var br=h(e.palettelayout,e.i+1);n[t++]=br,n[t++]=e.pixs,n[t++]=br,W(h(e.metadatamap,e.j+1)),e.jmv();var Ba=n[--t],yr=n[--t];C(n[--t],Ba,yr);var zr=n[--t];n[t++]=e.pixs,n[t++]=zr,W(h(e.metadatamap,e.j+3)),e.jmv();var Tr=n[--t],ea=n[--t];C(n[--t],Tr,ea),e.j=e.j+4}var Hr=o([function(){var Nt=n[--t],$t=n[--t];n[t++]=R($t+Nt)%e.colors},function(){t--;var Nt=n[--t];n[t++]=Nt%e.colors},function(){var Nt=n[--t];n[t-1]=Nt;var $t=n[--t];n[t++]=$t%e.colors},function(){var Nt=n[--t],$t=n[--t];n[t++]=(~~(Nt/3)+~~($t/2))%e.colors},function(){var Nt=n[--t],$t=n[--t];n[t++]=(~~(Nt/2)+~~($t/3))%e.colors},function(){var Nt=n[--t],$t=R(n[--t]+Nt);n[t++]=(~~($t/2)+~~($t/3))%e.colors},function(){var Nt=n[--t],$t=n[--t];n[t++]=R(Nt*($t*$t)%7+(Nt+$t*$t)*2%19)%e.colors},function(){var Nt=n[--t],$t=n[--t];n[t++]=R($t*(Nt*Nt)%5+(Nt*Nt+$t*2)%13)%e.colors}]);e.maskfuncs=Hr,e.mask!=-1&&(e.maskfuncs=o([h(e.maskfuncs,e.mask)]),e.bestmaskval=e.mask),e.masks=o(e.maskfuncs.length);for(var _a=0,qr=e.masks.length-1;_a<=qr;_a+=1){e.m=_a,e.mask=o(e.rows*e.cols);for(var Va=0,Gr=e.rows-1;Va<=Gr;Va+=1){e.j=Va;for(var la=0,Vr=e.cols-1;la<=Vr;la+=1){e.i=la,n[t++]=e.pixs,n[t++]=e.i,n[t++]=e.j,e.jmv();var wr=n[--t];if(h(n[--t],wr)==-1){if(n[t++]=e.i,n[t++]=e.j,h(e.maskfuncs,e.m)()===!0)break}else n[t++]=0;n[t++]=e.mask,n[t++]=e.i,n[t++]=e.j,e.jmv();var or=n[t-3],ds=n[t-1];C(n[t-2],ds,or),t-=3}}C(e.masks,e.m,e.mask)}for(e.posx=0,e.posy=0,e.i=0;e.posx!=e.cols;){n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.jmv();var lr=n[--t];if(h(n[--t],lr)==-1){var us=O(e.bits,e.i,e.databpm);n[t++]=0;for(var Mr=0,es=us.length;Mr<es;Mr++){var Yr=n[--t];n[t++]=R(Yr+(h(us,Mr)-48))*2}var Mn=n[--t];n[t++]=~~(Mn/2),n[t++]=e.pixs,n[t++]=e.posx,n[t++]=e.posy,e.jmv();var Hi=n[t-3],Rr=n[t-1];C(n[t-2],Rr,Hi),t-=3,e.i=e.i+e.databpm}e.posy=e.posy+1,e.posy==e.rows&&(e.posy=0,e.posx=e.posx+1)}e.evalrle=function(){e.scrle=n[--t],e.scr1=0,e.scr3=0;for(var Nt=0,$t=e.scrle.length-2;Nt<=$t;Nt+=2)if(e.j=Nt,h(e.scrle,e.j+1)!=-1){var Yn=h(e.scrle,e.j);if(n[t++]=Yn,Yn>=5?e.scr1=R(n[--t]-2+e.scr1):t--,e.j>=4&&e.j<=e.scrle.length-5){var Kn=O(e.scrle,e.j-4,10);n[t++]=Kn;for(var Jn=0,Si=Kn.length;Jn<Si;Jn++)n[t++]=h(Kn,Jn)==1;t--;for(var Wn=0;Wn<4;Wn++){var $i=n[--t];n[t-1]=$i;var Ii=n[--t],fi=n[--t];n[t++]=_d(fi,Ii)}if(n[--t]){n[t++]=1/0;var Fi=n[--t],Gi=n[--t];n[t++]=Fi,W(Gi);var mr=n[t-1],Vi=n[t-3],Ni=n[t-5],Ti=n[t-7],ci=n[t-9];if(ce(ci,Ni)&&ce(ci,mr)&&ce(Ti,Vi)){var Mi=n[--t],Ar=n[--t],gr=n[--t];e.c4=gr,e.c5=Mi,n[t++]=gr,n[t++]=Ar,(e.c4==e.bi&&e.c5==e.yi||e.c4==e.yi&&e.c5==e.bi||e.c4==e.gi&&e.c5==e.mi||e.c4==e.mi&&e.c5==e.gi)&&(e.scr3=e.scr3+100)}Qu()}else t--}}n[t++]=e.scr1,n[t++]=e.scr3},e.evalmask=function(){e.sym=n[--t],e.n1=0,e.n2=0,e.n3=0;var Nt=e.rows,$t=e.cols;if(Nt<$t){var Yn=$t;$t=Nt,Nt=Yn}e.rle=o(Nt*2+2),e.lastpairs=o(e.cols),e.thispairs=o(e.cols);for(var Kn=0,Jn=e.cols-1;Kn<=Jn;Kn+=1){e.i=Kn,n[t++]=1/0,n[t++]=0,n[t++]=-1;for(var Si=e.i,Wn=e.cols,$i=e.rows*e.cols-1;Wn<0?Si>=$i:Si<=$i;Si+=Wn){var Ii=h(e.sym,Si),fi=n[t-1];if(n[t++]=Ii,ce(fi,Ii)){t--;var Fi=n[--t],Gi=n[--t];n[t++]=Gi+1,n[t++]=Fi}else{var mr=n[--t];n[t++]=1,n[t++]=mr}}var Vi=Ur()+2;Rn(O(e.rle,0,Vi-2)),e.evalrle(),e.n3=R(n[--t]+e.n3),e.n1=R(n[--t]+e.n1),t--}for(var Ni=0,Ti=e.rows-1;Ni<=Ti;Ni+=1){e.i=Ni,e.symrow=O(e.sym,e.i*e.cols,e.cols),n[t++]=1/0;var ci=e.symrow;n[t++]=0,n[t++]=-1;for(var Mi=0,Ar=ci.length;Mi<Ar;Mi++){var gr=h(ci,Mi),ga=n[t-1];if(n[t++]=gr,ce(ga,gr)){t--;var Sa=n[--t],ns=n[--t];n[t++]=ns+1,n[t++]=Sa}else{var Pa=n[--t];n[t++]=1,n[t++]=Pa}}var Un=Ur()+2;Rn(O(e.rle,0,Un-2)),e.evalrle(),e.n3=R(n[--t]+e.n3),e.n1=R(n[--t]+e.n1),t--;var ni=e.thispairs;e.thispairs=e.lastpairs,e.lastpairs=ni;var hi=e.symrow;n[t++]=-1;for(var Wi=0,Ri=hi.length;Wi<Ri;Wi++){var er=h(hi,Wi),Yi=n[--t];if(n[t++]=er,n[t++]=Yi,qe(er,Yi)){t--;var Oi=n[--t];n[t++]=-1,n[t++]=Oi}}if(t--,Rn(e.thispairs),t--,e.i>0){n[t++]=1/0,W(e.lastpairs),W(e.thispairs),n[t++]=e.n2;for(var Or=0,Ya=e.cols;Or<Ya;Or++){var bs=n[--t],Ts=n[--t];if(n[t++]=bs,n[t++]=Ts,Ts!=-1){var Xs=n[t-1-(e.cols+1)];if(ce(n[--t],Xs)){var Ms=n[--t];n[t++]=Ms+3}}else t--}e.n2=n[--t],Qu()}}n[t++]=R(e.n1+e.n2+e.n3)},e.bestscore=999999999;for(var ta=0,Ia=e.masks.length-1;ta<=Ia;ta+=1){e.m=ta,e.masksym=o(e.rows*e.cols);for(var Ci=0,Aa=e.rows*e.cols-1;Ci<=Aa;Ci+=1)e.i=Ci,C(e.masksym,e.i,Ha(h(e.pixs,e.i),h(h(e.masks,e.m),e.i)));e.masks.length!=1?(n[t++]=e.masksym,e.evalmask(),e.score=n[--t],e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}if(e.pixs=e.bestsym,e.metamask=e.bestmaskval,e.addtometapart=function(){var Nt=n[--t];H(e.metapart,e.p,Nt),e.p=Nt.length+e.p},e.addtometabits=function(){var Nt=n[--t];H(e.metabits,e.q,Nt),e.q=Nt.length+e.q},e.metapart=fe(40),e.metabits=fe(e.nummetabits),e.p=0,e.q=0,!e.slave)n[t++]=~~yc(ro(e.colors)/ro(2))-1,n[t++]=3,e.tofixedbits(),e.addtometapart(),n[t++]=O(e.metapart,0,e.p),n[t++]=2,n[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,n[t++]=e.metass,n[t++]=1,e.tofixedbits(),e.addtometapart(),n[t++]=e.metavf,n[t++]=2,e.tofixedbits(),e.addtometapart(),n[t++]=e.metamask,n[t++]=3,e.tofixedbits(),e.addtometapart(),e.hasslaves?n[t++]="1":n[t++]="0",e.addtometapart(),n[t++]=O(e.metapart,0,e.p),n[t++]=2,n[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.metass==0?(n[t++]=R(~~((e.cols-17)/4)-h(o([0,4,8,16]),e.metavf))-1,n[t++]=e.metavlen,e.tofixedbits(),e.addtometapart()):(n[t++]=~~((e.cols-17)/4)-1,n[t++]=~~(e.metavlen/2),e.tofixedbits(),e.addtometapart(),n[t++]=~~((e.rows-17)/4)-1,n[t++]=~~(e.metavlen/2),e.tofixedbits(),e.addtometapart()),n[t++]=e.datawc-3,n[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),n[t++]=e.datawr-4,n[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),e.hasslaves&&(n[t++]=0,n[t++]=4,e.tofixedbits(),e.addtometapart()),n[t++]=O(e.metapart,0,e.p),n[t++]=2,n[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0;else{var Na=e.sameshape?0:1;n[t++]=Na,n[t++]=1,e.tofixedbits(),e.addtometapart();var na=e.sameecc?0:1;n[t++]=na,n[t++]=1,e.tofixedbits(),e.addtometapart();var $s=e.hasslaves?1:0;n[t++]=$s,n[t++]=1,e.tofixedbits(),e.addtometapart(),n[t++]=O(e.metapart,0,e.p),n[t++]=2,n[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.sameshape||(n[t++]=~~((e.diffside-17)/4)-1,n[t++]=5,e.tofixedbits(),e.addtometapart()),e.hasslaves&&(n[t++]=0,n[t++]=3,e.tofixedbits(),e.addtometapart()),n[t++]=O(e.metapart,0,e.p),n[t++]=2,n[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.sameecc||(n[t++]=e.datawc-3,n[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),n[t++]=e.datawr-4,n[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart()),n[t++]=O(e.metapart,0,e.p),n[t++]=2,n[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0}for(var Qr=e.q,Co=e.nummetabits-1;Qr<=Co;Qr+=1)C(e.metabits,Qr,48);if(e.i=0,e.j=0,!e.slave){for(var ts=O(e.metabits,e.i,6),$r=0,Ws=ts.length;$r<Ws;$r++){n[t++]=h(ts,$r),e.colors==4?n[t++]=o([e.bi,e.yi]):n[t++]=o([e.ki,e.wi]);var pa=n[--t],gs=h(pa,n[--t]-48);n[t++]=gs,n[t++]=e.pixs,W(h(e.metadatamap,e.j)),e.jmv();var Ta=n[t-3],vs=n[t-1];C(n[t-2],vs,Ta),t-=3,e.j=e.j+1}e.i=e.i+6}for(var xs=0,lo=~~(R(e.nummetabits-e.i)/e.metabpm);xs<lo;xs++){var Gt=O(e.metabits,e.i,e.metabpm);n[t++]=0;for(var qi=0,Zi=Gt.length;qi<Zi;qi++){var ia=n[--t];n[t++]=R(ia+(h(Gt,qi)-48))*2}var cr=h(e.metacolorindex,~~(n[--t]/2));n[t++]=cr,n[t++]=e.pixs,W(h(e.metadatamap,e.j)),e.jmv();var ma=n[t-3],Ma=n[t-1];C(n[t-2],Ma,ma),t-=3,e.i=R(e.i+e.metabpm),e.j=e.j+1}var Ns=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.cols],["pixy",e.rows],["colormap",e.palette],["height",e.rows*2/72],["width",e.cols*2/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);n[t++]=Ns,e.dontdraw||Lt(),e=r}function Ga(){var r=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!1,e.dontdraw=!1,e.ccversion="a",e.cccolumns=-1,e.lintype="",e.linwidth=-1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],qe(e.ccversion,"a")&&qe(e.ccversion,"b")&&qe(e.ccversion,"c")&&(n[t++]="bwipp.gs1ccBadCCversion#28834",n[t++]="ccversion must be a, b or c",Z()),e.cccolumns>30&&(n[t++]="bwipp.gs1ccColumnsTooBig#28838",n[t++]="The maximum number of composite component columns is 30",Z());var i=new Map([["ean13",4],["upca",4],["ean8",3],["upce",2],["gs1-128",4],["databaromni",4],["databarstacked",2],["databarstackedomni",2],["databartruncated",4],["databarlimited",3],["databarexpanded",4],["databarexpandedstacked",4]]);if(e.lintypecccolumns=i,e.lintype.length!=0){var a=h(e.lintypecccolumns,e.lintype)!==void 0;a||(n[t++]="bwipp.gs1ccBadLinType#28860",n[t++]="The lintype is not recognised",Z())}for(e.cccolumns==-1&&(ce(e.lintype,"gs1-128")&&ce(e.ccversion,"c")?(e.linwidth<0&&(n[t++]="bwipp.gs1ccMissingLinWidth#28868",n[t++]="linwidth must be set for a GS1-128 with a CC-C composite component",Z()),e.linwidth<68&&(n[t++]="bwipp.gs1ccMinimumLinWidth#28871",n[t++]="Minimum linwidth for a GS1-128 with a CC-C composite component is 68",Z()),e.linwidth==68?n[t++]=1:n[t++]=~~((e.linwidth-52)/17)):e.lintype.length!=0?n[t++]=h(e.lintypecccolumns,e.lintype):n[t++]=2,e.cccolumns=n[--t]),n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t],e.isupper=function(){var Mn=n[--t];n[t++]=Mn>=65&&Mn<=90},e.isnum0=function(){var Mn=n[--t];n[t++]=Mn>=48&&Mn<=57},e.isnum1=function(){var Mn=n[--t];n[t++]=Mn>=49&&Mn<=57};;){if(e.ais.length>=1&&(ce(h(e.ais,0),"10")||ce(h(e.ais,0),"11")||ce(h(e.ais,0),"17"))){n[t++]=-1,n[t++]="10";break}if(e.ais.length>=1&&ce(h(e.ais,0),"90")){if(e.v=h(e.vals,0),e.v.length>=1&&(n[t++]=h(e.v,0),e.isupper(),n[--t])){n[t++]=0,n[t++]="11";break}if(e.v.length>=2){n[t++]=h(e.v,0),e.isnum1(),n[t++]=h(e.v,1),e.isupper();var s=n[--t];if(n[--t]&&s){n[t++]=1,n[t++]="11";break}}if(e.v.length>=3){n[t++]=h(e.v,0),e.isnum1(),n[t++]=h(e.v,1),e.isnum0();var l=n[--t],c=n[--t];n[t++]=_d(c,l),n[t++]=h(e.v,2),e.isupper();var d=n[--t];if(n[--t]&&d){n[t++]=2,n[t++]="11";break}}if(e.v.length>=4){n[t++]=h(e.v,0),e.isnum1(),n[t++]=h(e.v,1),e.isnum0();var f=n[--t],m=n[--t];n[t++]=_d(m,f),n[t++]=h(e.v,2),e.isnum0();var g=n[--t],v=n[--t];n[t++]=_d(v,g),n[t++]=h(e.v,3),e.isupper();var y=n[--t];if(n[--t]&&y){n[t++]=3,n[t++]="11";break}}}n[t++]=-1,n[t++]="0";break}e.method=n[--t],e.npre=n[--t],e.tobin=function(){var Mn=fe(n[--t]);n[t++]=Mn;for(var Hi=0,Rr=Mn.length-1;Hi<=Rr;Hi+=1){var ta=n[t-1];C(ta,Hi,48)}var Ia=n[t-1];n[t++]=Ia;var Ci=n[t-3],Aa=n[t-1];n[t-3]=n[t-2],t-=2;var Na=Nn(fe(Aa.length),Ci,2);H(Aa,Aa.length-Na.length,Na)},e.fnc1=-1,e.lnumeric=-2,e.lalphanumeric=-3,e.liso646=-4,n[t++]=1/0;for(var A=65;A<=90;A+=1)n[t++]=A,n[t++]=A-65,n[t++]=5,e.tobin();for(var w=48;w<=57;w+=1)n[t++]=w,n[t++]=w+4,n[t++]=6,e.tobin();n[t++]=e.fnc1,n[t++]="11111",e.alpha=rt(),n[t++]=1/0;for(var k=0;k<=119;k+=1){var E=zi(fe(2),"00"),I=Nn(fe(2),k,11);if(H(E,2-I.length,I),n[t++]=k,n[t++]=E,h(E,0)==65){var T=n[t-1];C(T,0,94)}var N=n[t-1];if(h(N,1)==65){var j=n[t-1];C(j,1,94)}var B=n[--t],U=zi(fe(7),"0000000"),F=Nn(fe(7),n[--t]+8,2);H(U,7-F.length,F),n[t++]=B,n[t++]=U}n[t++]=e.lalphanumeric,n[t++]="0000",e.numeric=rt(),n[t++]=1/0;for(var P=48;P<=57;P+=1)n[t++]=P,n[t++]=P-43,n[t++]=5,e.tobin();n[t++]=e.fnc1,n[t++]="01111";for(var z=65;z<=90;z+=1)n[t++]=z,n[t++]=z-33,n[t++]=6,e.tobin();n[t++]=42,n[t++]="111010";for(var V=44;V<=47;V+=1)n[t++]=V,n[t++]=V+15,n[t++]=6,e.tobin();n[t++]=e.lnumeric,n[t++]="000",n[t++]=e.liso646,n[t++]="00100",e.alphanumeric=rt(),n[t++]=1/0;for(var L=48;L<=57;L+=1)n[t++]=L,n[t++]=L-43,n[t++]=5,e.tobin();n[t++]=e.fnc1,n[t++]="01111";for(var Q=65;Q<=90;Q+=1)n[t++]=Q,n[t++]=Q-1,n[t++]=7,e.tobin();for(var q=97;q<=122;q+=1)n[t++]=q,n[t++]=q-7,n[t++]=7,e.tobin();n[t++]=33,n[t++]="11101000",n[t++]=34,n[t++]="11101001";for(var ee=37;ee<=47;ee+=1)n[t++]=ee,n[t++]=ee+197,n[t++]=8,e.tobin();for(var X=58;X<=63;X+=1)n[t++]=X,n[t++]=X+187,n[t++]=8,e.tobin();if(n[t++]=95,n[t++]="11111011",n[t++]=32,n[t++]="11111100",n[t++]=e.lnumeric,n[t++]="000",n[t++]=e.lalphanumeric,n[t++]="00100",e.iso646=rt(),ce(e.method,"10")){if(ce(h(e.ais,0),"11")||ce(h(e.ais,0),"17")){var ae=h(e.vals,0),K=zi(fe(16),"0000000000000000"),ie=Nn(fe(16),Ye(O(ae,0,2))*384+((Ye(O(ae,2,2))-1)*32+Ye(O(ae,4,2))),2);H(K,16-ie.length,ie),n[t++]=K,n[t++]=1/0,n[t++]=1,n[t++]=0,oa(4,-1),Ie(n[--t],function(){var Mn=n[--t];n[t++]=Mn-48});var ne=ce(h(e.ais,0),"11")?0:1;n[t++]=ne,e.cdf=o(),e.ais=O(e.ais,1,e.ais.length-1),e.vals=O(e.vals,1,e.vals.length-1),e.fncs=O(e.fncs,1,e.fncs.length-1)}else e.cdf=o([1,0,1,1]);e.ais.length!=0?ce(h(e.ais,0),"10")?(n[t++]=1/0,Ie(h(e.vals,0)),e.gpf=o(),e.ais.length>1&&(n[t++]=1/0,W(e.gpf),n[t++]=e.fnc1,e.gpf=o()),e.ais=O(e.ais,1,e.ais.length-1),e.vals=O(e.vals,1,e.vals.length-1),e.fncs=O(e.fncs,1,e.fncs.length-1)):e.gpf=o([e.fnc1]):(n[t++]=1/0,W(e.cdf),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,e.cdf=o(),e.gpf=o([])),e.mode="numeric"}if(ce(e.method,"11")){e.cdf=o([1,1]),e.ai90=h(e.vals,0),e.npre+1!=e.ai90.length?n[t++]=O(e.ai90,e.npre+1,R(e.ai90.length-e.npre)-1):n[t++]="",e.ai90rem=n[--t],n[t++]="nalpha",n[t++]=0,Ie(e.ai90rem,function(){var Mn=n[--t];if(Mn>=65&&Mn<=90){var Hi=n[--t];n[t++]=Hi+1}});var J=n[--t];e[n[--t]]=J,n[t++]="nnums",n[t++]=0,Ie(e.ai90rem,function(){var Mn=n[--t];if(Mn>=48&&Mn<=57){var Hi=n[--t];n[t++]=Hi+1}});var te=n[--t];e[n[--t]]=te,n[t++]="mode",_c(e.nalpha,e.nnums)?n[t++]="alpha":e.nalpha==0?n[t++]="numeric":n[t++]="alphanumeric";var $=n[--t];e[n[--t]]=$,R(e.nalpha+e.nnums)!=e.ai90rem.length&&(e.mode="alphanumeric"),n[t++]=1/0,W(e.cdf),ce(e.mode,"alphanumeric")&&(n[t++]=0),ce(e.mode,"numeric")&&(n[t++]=1,n[t++]=0),ce(e.mode,"alpha")&&(n[t++]=1,n[t++]=1),e.cdf=o(),n[t++]="ais1",e.ais.length>1?n[t++]=h(e.ais,1):n[t++]=-1;var oe=n[--t];e[n[--t]]=oe,n[t++]="vals1",e.vals.length>1?n[t++]=h(e.vals,1):n[t++]=-1;var we=n[--t];e[n[--t]]=we,ce(e.ais1,"21")||ce(e.ais1,"8004")?(n[t++]=1/0,W(e.cdf),ce(e.ais1,"21")?(n[t++]=1,n[t++]=0):(n[t++]=1,n[t++]=1),e.cdf=o()):(n[t++]=1/0,W(e.cdf),n[t++]=0,e.cdf=o()),n[t++]="nval",e.npre!=0?n[t++]=Ye(O(e.ai90,0,e.npre)):n[t++]=0;var be=n[--t];if(e[n[--t]]=be,sn("BDHIJKLNPQRSTVXZ",O(e.ai90,e.npre,1)),n[--t]){var Te=n[--t];n[t-1]=Te.length;var ye=n[--t];n[t-1]=ye,e.aval=n[--t]}else t--,e.aval=-1;if(e.nval<31&&e.aval!=-1){var tt=zi(fe(5),"00000"),Qe=Nn(fe(5),e.nval,2);H(tt,5-Qe.length,Qe);var Ge=1/0,Xe=tt;n[t++]=Ge,Ie(Xe,function(){var Mn=n[--t];n[t++]=Mn-48}),e.nbits=o();var Je=zi(fe(4),"0000"),dt=Nn(fe(4),e.aval,2);H(Je,4-dt.length,dt);var vt=1/0,_t=Je;n[t++]=vt,Ie(_t,function(){var Mn=n[--t];n[t++]=Mn-48}),e.abits=o(),n[t++]=1/0,W(e.cdf),W(e.nbits),W(e.abits),e.cdf=o()}else{var xt=zi(fe(10),"0000000000"),bt=Nn(fe(10),e.nval,2);H(xt,10-bt.length,bt);var kt=1/0,Pt=xt;n[t++]=kt,Ie(Pt,function(){var Mn=n[--t];n[t++]=Mn-48}),e.nbits=o();var Rt=zi(fe(5),"00000"),Wt=Nn(fe(5),h(e.ai90,e.npre)-65,2);H(Rt,5-Wt.length,Wt);var zt=1/0,Ct=Rt;n[t++]=zt,Ie(Ct,function(){var Mn=n[--t];n[t++]=Mn-48}),e.abits=o(),n[t++]=1/0,W(e.cdf),n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,W(e.nbits),W(e.abits),e.cdf=o()}if(qe(e.mode,"alpha"))n[t++]=1/0,Ie(e.ai90rem),e.ais.length>1&&(n[t++]=e.fnc1),e.gpf=o();else{n[t++]=1/0,Ie(e.ai90rem),e.ais.length>1&&(n[t++]=e.fnc1),e.in=o(),e.out=o(e.in.length*6),e.j=0;for(var Yt=0,jt=e.in.length-1;Yt<=jt;Yt+=1){var an=h(e.alpha,h(e.in,Yt));n[t++]=an;var rn=1/0,Kt=an;n[t++]=rn,Ie(Kt,function(){var Mn=n[--t];n[t++]=Mn-48}),H(e.out,e.j,o()),e.j=n[--t].length+e.j}n[t++]=1/0,W(e.cdf),W(O(e.out,0,e.j)),e.cdf=o(),e.gpf=o([]),e.ais.length>1&&(e.mode="numeric")}e.ais=O(e.ais,1,e.ais.length-1),e.vals=O(e.vals,1,e.vals.length-1),e.fncs=O(e.fncs,1,e.fncs.length-1),e.ais.length!=0&&(ce(e.ais1,"21")||ce(e.ais1,"8004"))&&(n[t++]=1/0,W(e.gpf),Ie(e.vals1),e.gpf=o(),e.ais=O(e.ais,1,e.ais.length-1),e.vals=O(e.vals,1,e.vals.length-1),e.fncs=O(e.fncs,1,e.fncs.length-1),e.ais.length!=0&&(n[t++]=1/0,W(e.gpf),n[t++]=e.fnc1,e.gpf=o()))}ce(e.method,"0")&&(e.cdf=o([0]),e.gpf=o([]),e.mode="numeric");for(var Jt=0,Zt=e.ais.length-1;Jt<=Zt;Jt+=1){e.i=Jt,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var Qt=o(e.gpf.length+e.ai.length+e.val.length);H(Qt,0,e.gpf),n[t++]=Qt,n[t++]=Qt,n[t++]=e.gpf.length;var mn=1/0,cn=e.ai;n[t++]=mn,Ie(cn);var dn=o(),Ht=n[--t];H(n[--t],Ht,dn);var Bt=n[t-1];n[t++]=Bt,n[t++]=e.gpf.length+e.ai.length;var Y=1/0,le=e.val;n[t++]=Y,Ie(le);var se=o(),ge=n[--t];if(H(n[--t],ge,se),e.gpf=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var ve=o(e.gpf.length+1);H(ve,0,e.gpf),C(ve,e.gpf.length,e.fnc1),e.gpf=ve}}var _e=new Map([["a",o([o([167,138,118,108,88,78,59]),o([167,138,118,98,78]),o([197,167,138,108,78])])],["b",o([o([336,296,256,208,160,104,56]),o([768,648,536,416,304,208,152,112,72,32]),o([1184,1016,840,672,496,352,264,208,152,96,56])])]]);e.bitcapsmaps=_e,e.rembits=function(){if(e.used=n[--t],qe(e.ccversion,"c")){e.bitcaps=h(h(e.bitcapsmaps,e.ccversion),e.cccolumns-2),n[t++]=-1,Ie(e.bitcaps,function(){var Aa=n[t-1];if(il(Aa,e.used)){var Na=n[--t],na=n[--t];n[t++]=Na,n[t++]=na}t--});var Mn=n[t-1];if(Mn!=-1){var Hi=n[--t];n[t++]=R(Hi-e.used)}}else{var Rr=new Map([["c",-1]]);h(Rr,e.ccversion);var ta=~~li(e.used/8);for(e.m=~~(ta/6)*5+ta%6,e.m<=40&&(n[t++]=8),e.m>=41&&e.m<=160&&(n[t++]=16),e.m>=161&&e.m<=320&&(n[t++]=32),e.m>=321&&e.m<=833&&(n[t++]=64),e.m>=834&&(n[t++]=32),e.eccws=n[--t],e.m=R(e.m+e.eccws)+3,e.cccolumns>30&&(e.cccolumns=30);!(~~li(e.m/e.cccolumns)<=30||e.cccolumns>=30);)e.cccolumns=e.cccolumns+1;e.r=~~li(e.m/e.cccolumns),e.r<3&&(e.r=3);var Ia=R(e.cccolumns*e.r-e.eccws)-3;e.tgt=R(~~(Ia/5)*6+Ia%5)*8,e.used<=8304?n[t++]=R(e.tgt-e.used):n[t++]=-1}var Ci=n[t-1];Ci==-1&&(t--,ce(e.ccversion,"a")?e.ccversion="b":ce(e.ccversion,"b")&&ce(e.lintype,"gs1-128")?(e.ccversion="c",e.cccolumns=~~((e.linwidth-52)/17)):e.ccversion=-1,n[t++]=e.used,e.rembits())},e.encode=function(){var Mn=n[t-1];if(qe(Mn,"raw")){var Hi=n[--t],Rr=h(Hi,n[--t]);n[t++]=Rr}else t--;n[t++]=1/0;var ta=n[--t],Ia=n[--t];n[t++]=ta,Ie(Ia,function(){var Aa=n[--t];n[t++]=Aa-48});var Ci=o();H(e.gpfenc,e.j,Ci),e.j=Ci.length+e.j},n[t++]=1/0;for(var pe=0,Oe=e.gpf.length;pe<Oe;pe++)n[t++]=0;n[t++]=0,n[t++]=-1,e.numericruns=o(),n[t++]=1/0;for(var de=0,ke=e.gpf.length;de<ke;de++)n[t++]=0;n[t++]=0,e.alphanumericruns=o(),n[t++]=1/0;for(var Ee=0,De=e.gpf.length;Ee<De;Ee++)n[t++]=0;n[t++]=9999,e.nextiso646only=o();for(var xe=e.gpf.length-1;xe>=0;xe-=1){e.i=xe;var Ne=zi(fe(2),"00"),je=h(e.gpf,e.i);n[t++]=h(e.gpf,e.i),n[t++]=Ne,n[t++]=Ne,n[t++]=0,n[t++]=je,je==e.fnc1&&(n[t-1]=94);var Se=n[--t],ze=n[--t];if(C(n[--t],ze,Se),e.i<e.gpf.length-1){var Pe=n[t-1],Be=h(e.gpf,e.i+1);n[t++]=Pe,n[t++]=1,n[t++]=Be,Be==e.fnc1&&(n[t-1]=94);var at=n[--t],Ze=n[--t];C(n[--t],Ze,at)}var ft=h(e.numeric,n[--t])!==void 0;ft?C(e.numericruns,e.i,h(e.numericruns,e.i+2)+2):C(e.numericruns,e.i,0);var Ve=n[t-1],$e=h(e.alphanumeric,Ve)!==void 0;$e?C(e.alphanumericruns,e.i,h(e.alphanumericruns,e.i+1)+1):C(e.alphanumericruns,e.i,0);var Me=n[--t],it=h(e.iso646,Me)!==void 0,st=h(e.alphanumeric,Me)!==void 0;it&&!st?C(e.nextiso646only,e.i,0):C(e.nextiso646only,e.i,h(e.nextiso646only,e.i+1)+1)}for(e.gpfenc=o(8304),e.i=0,e.j=0;e.i!=e.gpf.length;)for(;;){if(ce(e.mode,"numeric"))if(e.i<=e.gpf.length-2){var mt=fe(2),Tt=h(e.gpf,e.i);n[t++]=mt,n[t++]=mt,n[t++]=0,n[t++]=Tt,Tt==e.fnc1&&(n[t-1]=94);var Ot=n[--t],Et=n[--t];C(n[--t],Et,Ot);var Dt=n[t-1],wt=h(e.gpf,e.i+1);n[t++]=Dt,n[t++]=1,n[t++]=wt,wt==e.fnc1&&(n[t-1]=94);var en=n[--t],gt=n[--t];C(n[--t],gt,en);var un=n[t-1],Vt=h(e.numeric,un)!==void 0;if(Vt){n[t++]=e.numeric,e.encode(),e.i=e.i+2;break}n[t-1]=e.lalphanumeric,n[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}else{var fn=h(e.gpf,e.i);if(fn<48||fn>57){n[t++]=e.lalphanumeric,n[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}n[t++]="rem",n[t++]=e.cdf.length+e.j,e.rembits();var $n=n[--t];if(e[n[--t]]=$n,e.rem>=4&&e.rem<=6){var ei=O(zi(fe(6),"000000"),0,e.rem),Dn=Nn(fe(4),h(e.gpf,e.i)-47,2);H(ei,4-Dn.length,Dn),n[t++]=ei,n[t++]="raw",e.encode(),e.i=e.i+1;break}else{var ai=fe(2);C(ai,0,h(e.gpf,e.i)),C(ai,1,94),n[t++]=ai,n[t++]=e.numeric,e.encode(),e.i=e.i+1;break}}if(ce(e.mode,"alphanumeric")){if(h(e.gpf,e.i)==e.fnc1){n[t++]=e.fnc1,n[t++]=e.alphanumeric,e.encode(),e.mode="numeric",e.i=e.i+1;break}var zn=h(e.gpf,e.i),mi=h(e.iso646,zn)!==void 0,Fn=h(e.alphanumeric,zn)!==void 0;if(mi&&!Fn){n[t++]=e.liso646,n[t++]=e.alphanumeric,e.encode(),e.mode="iso646";break}if(h(e.numericruns,e.i)>=6){n[t++]=e.lnumeric,n[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}var Hn=h(e.numericruns,e.i);if(Hn>=4&&R(Hn+e.i)==e.gpf.length){n[t++]=e.lnumeric,n[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}n[t++]=h(e.gpf,e.i),n[t++]=e.alphanumeric,e.encode(),e.i=e.i+1;break}if(ce(e.mode,"iso646")){if(h(e.gpf,e.i)==e.fnc1){n[t++]=e.fnc1,n[t++]=e.iso646,e.encode(),e.mode="numeric",e.i=e.i+1;break}if(h(e.numericruns,e.i)>=4&&h(e.nextiso646only,e.i)>=10){n[t++]=e.lnumeric,n[t++]=e.iso646,e.encode(),e.mode="numeric";break}if(h(e.alphanumericruns,e.i)>=5&&h(e.nextiso646only,e.i)>=10){n[t++]=e.lalphanumeric,n[t++]=e.iso646,e.encode(),e.mode="alphanumeric";break}n[t++]=h(e.gpf,e.i),n[t++]=e.iso646,e.encode(),e.i=e.i+1;break}}e.gpf=O(e.gpfenc,0,e.j),n[t++]="pad",n[t++]=e.cdf.length+e.gpf.length,e.rembits();var _n=o(n[--t]);if(e[n[--t]]=_n,e.pad.length>0){for(var vn=0,kn=e.pad.length-1;vn<=kn;vn+=5){e.i=vn;var Ai=e.pad,Ei=e.i,Ji=o([0,0,1,0,0]),nn=e.pad,yn=e.i,qn=5,Tn=nn.length-yn;if(nn.length-yn>5){var Gn=qn;qn=Tn,Tn=Gn}H(Ai,Ei,O(Ji,0,Tn))}ce(e.mode,"numeric")&&(n[t++]=1/0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.pad),e.pad=O(o(),0,e.pad.length)),ce(e.mode,"alpha")&&(n[t++]=1/0,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.pad),e.pad=O(o(),0,e.pad.length))}n[t++]=1/0,W(e.cdf),W(e.gpf),W(e.pad),e.bits=o(),n[t++]=1/0,n[t++]=o([0,0,0,0,0,0,1]);for(var gi=0;gi<68;gi++)n[t++]=o(7);e.pwr928=o();for(var Vn=1;Vn<=68;Vn+=1){e.j=Vn,e.v=0;for(var ln=6;ln>=1;ln-=1)e.i=ln,e.v=R(h(h(e.pwr928,e.j-1),e.i)*2+~~(e.v/928)),C(h(e.pwr928,e.j),e.i,e.v%928);C(h(e.pwr928,e.j),0,R(h(h(e.pwr928,e.j-1),0)*2+~~(e.v/928)))}if(e.ccversion=="a"){n[t++]=1/0;for(var ti=0;ti<28;ti++)n[t++]=0;for(e.cws=o(),e.b=0,e.c=0;e.b!=e.bits.length;){var Qi=e.bits,Bi=e.b,Ir=e.bits,_i=e.b,Nr=Ir.length-_i,rr=69;if(69>Ir.length-_i){var Gn=Nr;Nr=rr,rr=Gn}e.bs=O(Qi,Bi,rr),e.bsl=e.bs.length,e.cs=O(e.cws,e.c,~~(e.bsl/10)+1),e.csl=e.cs.length;for(var Zr=0,ar=e.bsl-1;Zr<=ar;Zr+=1){e.i=Zr;for(var sr=0,Pi=e.csl-1;sr<=Pi;sr+=1){e.j=sr;var hr=e.cs,Lr=e.j;C(hr,Lr,R(h(hr,Lr)+h(h(e.pwr928,e.i),e.j+7-e.csl)*h(e.bs,e.bsl-e.i-1)))}}for(var pr=e.csl-1;pr>=1;pr-=1){e.i=pr;var xr=e.cs,wa=e.i;C(xr,wa-1,R(h(xr,wa-1)+~~(h(e.cs,e.i)/928)));var br=e.cs,Ba=e.i;C(br,Ba,h(br,Ba)%928)}e.b=e.b+e.bsl,e.c=e.c+e.csl}e.cws=O(e.cws,0,e.c),e.barcode=fe(e.cws.length*4);for(var yr=0,zr=e.cws.length-1;yr<=zr;yr+=1){e.i=yr;var Tr=zi(fe(4),"^000"),ea=Nn(fe(4),h(e.cws,e.i),10);H(Tr,4-ea.length,ea),H(e.barcode,e.i*4,Tr)}delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"cca",!0),C(e.options,"columns",e.cccolumns),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,z3();var Hr=n[--t];e[n[--t]]=Hr}if(e.ccversion=="b"){e.barcode=fe(~~(e.bits.length/8));for(var _a=0,qr=e.barcode.length-1;_a<=qr;_a+=1){e.i=_a;var Va=O(e.bits,e.i*8,8);n[t++]=0;for(var Gr=0,la=Va.length;Gr<la;Gr++){var Vr=n[--t];n[t++]=R(Vr+h(Va,Gr))*2}C(e.barcode,e.i,~~(n[--t]/2))}delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"ccb",!0),C(e.options,"columns",e.cccolumns),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,z3();var wr=n[--t];e[n[--t]]=wr}if(e.ccversion=="c"){e.barcode=fe(~~(e.bits.length/8));for(var or=0,ds=e.barcode.length-1;or<=ds;or+=1){e.i=or;var lr=O(e.bits,e.i*8,8);n[t++]=0;for(var us=0,Mr=lr.length;us<Mr;us++){var es=n[--t];n[t++]=R(es+h(lr,us))*2}C(e.barcode,e.i,~~(n[--t]/2))}delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"ccc",!0),C(e.options,"columns",e.cccolumns),C(e.options,"eclevel",~~(ro(e.eccws)/ro(2))-1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Ax();var Yr=n[--t];e[n[--t]]=Yr}n[t++]=e.args,e.dontdraw||Lt(),e=r}function NT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#29501",n[t++]="A Composite Component must be provided following a pipe character",Z()),C(e.options,"lintype","ean13"),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.comp.length+18);if(H(i,0,"(01)00000000000000"),H(i,18,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,zm(),e.usematrix){e.linsym=n[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),n[t++]="linwidth",n[t++]=0,Ie(e.sbs,function(){var J=n[--t],te=n[--t];n[t++]=R(te+Ye(J))});var g=n[--t];e[n[--t]]=g,n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var v=n[--t];e[n[--t]]=v,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0;for(var y=0,A=e.ccpixx-97;y<A;y++)n[t++]=0;if(e.linpad=o(),e.diff=R(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){n[t++]=1/0;for(var w=0,k=e.diff;w<k;w++)n[t++]=0;e.ccrpad=o(),e.pixx=R(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;n[t++]=1/0;for(var E=0,I=e.ccpixx,T=e.ccpixs.length-1;I<0?E>=T:E<=T;E+=I)e.i=E,W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);for(var N=0;N<2;N++){W(e.linpad),n[t++]=0,n[t++]=1;for(var j=0;j<93;j++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var B=0;B<2;B++){W(e.linpad),n[t++]=1,n[t++]=0;for(var U=0;U<93;U++)n[t++]=0;n[t++]=0,n[t++]=1,W(e.ccrpad)}for(var F=0;F<2;F++){W(e.linpad),n[t++]=0,n[t++]=1;for(var P=0;P<93;P++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var z=71;z>=0;z-=1){e.y=z,W(e.linpad),n[t++]=0;for(var V=0,L=e.sbs.length-1;V<=L;V+=1)if(e.i=V,e.i%2==0){var Q=h(e.bbs,~~(e.i/2))*72;if(Q>e.y||R(Q+h(e.bhs,~~(e.i/2))*72)<e.y)for(var q=0,ee=Ye(h(e.sbs,e.i));q<ee;q++)n[t++]=0;else for(var X=0,ae=Ye(h(e.sbs,e.i));X<ae;X++)n[t++]=1}else for(var K=0,ie=Ye(h(e.sbs,e.i));K<ie;K++)n[t++]=0;e.diff<0&&(n[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var ne=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=ne,e.dontdraw||(he.save(),Lt(),he.restore())}else{he.save(),on();var a=he.currpos();he.rmoveto(-3,78),n[t++]=a.x,n[t++]=a.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var s=n[--t];he.moveto(n[--t]-1,s+72),n[t++]=1/0,n[t++]=1/0,n[t++]=0,n[t++]=1;for(var l=0;l<93;l++)n[t++]=0;n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0;for(var c=0;c<93;c++)n[t++]=0;n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1;for(var d=0;d<93;d++)n[t++]=0;n[t++]=1,n[t++]=0;var f=o();n[t++]="ren",n[t++]="renmatrix",n[t++]="pixs",n[t++]=f,n[t++]="pixx",n[t++]=97,n[t++]="pixy",n[t++]=3,n[t++]="height",n[t++]=6/72,n[t++]="width",n[t++]=97/72,n[t++]="opt",n[t++]=e.options;var m=rt();n[t++]=m,Lt(),he.restore()}e=r}function TT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#29664",n[t++]="A Composite Component must be provided following a pipe character",Z()),C(e.options,"lintype","ean8"),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.comp.length+18);if(H(i,0,"(01)00000000000000"),H(i,18,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,cw(),e.usematrix){e.linsym=n[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),n[t++]="linwidth",n[t++]=0,Ie(e.sbs,function(){var $=n[--t],oe=n[--t];n[t++]=R(oe+Ye($))});var v=n[--t];e[n[--t]]=v;var y=e.comp;n[t++]="compsym",n[t++]=y,n[t++]=e.options,Ga();var A=n[--t];e[n[--t]]=A,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0;for(var w=0,k=e.ccpixx-69;w<k;w++)n[t++]=0;if(e.linpad=o(),e.diff=R(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){n[t++]=1/0;for(var E=0,I=e.diff;E<I;E++)n[t++]=0;e.ccrpad=o(),e.pixx=R(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;n[t++]=1/0;for(var T=0,N=e.ccpixx,j=e.ccpixs.length-1;N<0?T>=j:T<=j;T+=N)e.i=T,W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);for(var B=0;B<2;B++){W(e.linpad),n[t++]=0,n[t++]=1;for(var U=0;U<65;U++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var F=0;F<2;F++){W(e.linpad),n[t++]=1,n[t++]=0;for(var P=0;P<65;P++)n[t++]=0;n[t++]=0,n[t++]=1,W(e.ccrpad)}for(var z=0;z<2;z++){W(e.linpad),n[t++]=0,n[t++]=1;for(var V=0;V<65;V++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var L=71;L>=0;L-=1){e.y=L,W(e.linpad),n[t++]=0;for(var Q=0,q=e.sbs.length-1;Q<=q;Q+=1)if(e.i=Q,e.i%2==0){var ee=h(e.bbs,~~(e.i/2))*72;if(ee>e.y||R(ee+h(e.bhs,~~(e.i/2))*72)<e.y)for(var X=0,ae=Ye(h(e.sbs,e.i));X<ae;X++)n[t++]=0;else for(var K=0,ie=Ye(h(e.sbs,e.i));K<ie;K++)n[t++]=1}else for(var ne=0,J=Ye(h(e.sbs,e.i));ne<J;ne++)n[t++]=0;e.diff<0&&(n[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var te=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=te,e.dontdraw||(he.save(),Lt(),he.restore())}else{he.save(),on();var a=he.currpos();n[t++]=a.x,n[t++]=a.y,n[t++]=e.comp,n[t++]=e.options,Ga();var s=n[--t];he.rmoveto(70-h(s,"pixx"),78),n[t++]=s,Lt();var l=n[--t];he.moveto(n[--t]-1,l+72),n[t++]=1/0,n[t++]=1/0,n[t++]=0,n[t++]=1;for(var c=0;c<65;c++)n[t++]=0;n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0;for(var d=0;d<65;d++)n[t++]=0;n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1;for(var f=0;f<65;f++)n[t++]=0;n[t++]=1,n[t++]=0;var m=o();n[t++]="ren",n[t++]="renmatrix",n[t++]="pixs",n[t++]=m,n[t++]="pixx",n[t++]=69,n[t++]="pixy",n[t++]=3,n[t++]="height",n[t++]=6/72,n[t++]="width",n[t++]=69/72,n[t++]="opt",n[t++]=e.options;var g=rt();n[t++]=g,Lt(),he.restore()}e=r}function MT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#29830",n[t++]="A Composite Component must be provided following a pipe character",Z()),C(e.options,"lintype","ean13"),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.comp.length+18);if(H(i,0,"(01)00000000000000"),H(i,18,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,VS(),e.usematrix){e.linsym=n[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),n[t++]="linwidth",n[t++]=0,Ie(e.sbs,function(){var J=n[--t],te=n[--t];n[t++]=R(te+Ye(J))});var g=n[--t];e[n[--t]]=g,n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var v=n[--t];e[n[--t]]=v,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0;for(var y=0,A=e.ccpixx-97;y<A;y++)n[t++]=0;if(e.linpad=o(),e.diff=R(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){n[t++]=1/0;for(var w=0,k=e.diff;w<k;w++)n[t++]=0;e.ccrpad=o(),e.pixx=R(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;n[t++]=1/0;for(var E=0,I=e.ccpixx,T=e.ccpixs.length-1;I<0?E>=T:E<=T;E+=I)e.i=E,W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);for(var N=0;N<2;N++){W(e.linpad),n[t++]=0,n[t++]=1;for(var j=0;j<93;j++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var B=0;B<2;B++){W(e.linpad),n[t++]=1,n[t++]=0;for(var U=0;U<93;U++)n[t++]=0;n[t++]=0,n[t++]=1,W(e.ccrpad)}for(var F=0;F<2;F++){W(e.linpad),n[t++]=0,n[t++]=1;for(var P=0;P<93;P++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var z=71;z>=0;z-=1){e.y=z,W(e.linpad),n[t++]=0;for(var V=0,L=e.sbs.length-1;V<=L;V+=1)if(e.i=V,e.i%2==0){var Q=h(e.bbs,~~(e.i/2))*72;if(Q>e.y||R(Q+h(e.bhs,~~(e.i/2))*72)<e.y)for(var q=0,ee=Ye(h(e.sbs,e.i));q<ee;q++)n[t++]=0;else for(var X=0,ae=Ye(h(e.sbs,e.i));X<ae;X++)n[t++]=1}else for(var K=0,ie=Ye(h(e.sbs,e.i));K<ie;K++)n[t++]=0;e.diff<0&&(n[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var ne=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=ne,e.dontdraw||(he.save(),Lt(),he.restore())}else{he.save(),on();var a=he.currpos();he.rmoveto(-3,78),n[t++]=a.x,n[t++]=a.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var s=n[--t];he.moveto(n[--t]-1,s+72),n[t++]=1/0,n[t++]=1/0,n[t++]=0,n[t++]=1;for(var l=0;l<93;l++)n[t++]=0;n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0;for(var c=0;c<93;c++)n[t++]=0;n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1;for(var d=0;d<93;d++)n[t++]=0;n[t++]=1,n[t++]=0;var f=o();n[t++]="ren",n[t++]="renmatrix",n[t++]="pixs",n[t++]=f,n[t++]="pixx",n[t++]=97,n[t++]="pixy",n[t++]=3,n[t++]="height",n[t++]=6/72,n[t++]="width",n[t++]=97/72,n[t++]="opt",n[t++]=e.options;var m=rt();n[t++]=m,Lt(),he.restore()}e=r}function RT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#29993",n[t++]="A Composite Component must be provided following a pipe character",Z()),C(e.options,"lintype","upce"),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.comp.length+18);if(H(i,0,"(01)00000000000000"),H(i,18,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,YS(),e.usematrix){e.linsym=n[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),n[t++]="linwidth",n[t++]=0,Ie(e.sbs,function(){var J=n[--t],te=n[--t];n[t++]=R(te+Ye(J))});var g=n[--t];e[n[--t]]=g,n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var v=n[--t];e[n[--t]]=v,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0;for(var y=0,A=e.ccpixx-53;y<A;y++)n[t++]=0;if(e.linpad=o(),e.diff=R(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){n[t++]=1/0;for(var w=0,k=e.diff;w<k;w++)n[t++]=0;e.ccrpad=o(),e.pixx=R(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;n[t++]=1/0;for(var E=0,I=e.ccpixx,T=e.ccpixs.length-1;I<0?E>=T:E<=T;E+=I)e.i=E,W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);for(var N=0;N<2;N++){W(e.linpad),n[t++]=0,n[t++]=1;for(var j=0;j<49;j++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var B=0;B<2;B++){W(e.linpad),n[t++]=1,n[t++]=0;for(var U=0;U<49;U++)n[t++]=0;n[t++]=0,n[t++]=1,W(e.ccrpad)}for(var F=0;F<2;F++){W(e.linpad),n[t++]=0,n[t++]=1;for(var P=0;P<49;P++)n[t++]=0;n[t++]=1,n[t++]=0,W(e.ccrpad)}for(var z=71;z>=0;z-=1){e.y=z,W(e.linpad),n[t++]=0;for(var V=0,L=e.sbs.length-1;V<=L;V+=1)if(e.i=V,e.i%2==0){var Q=h(e.bbs,~~(e.i/2))*72;if(Q>e.y||R(Q+h(e.bhs,~~(e.i/2))*72)<e.y)for(var q=0,ee=Ye(h(e.sbs,e.i));q<ee;q++)n[t++]=0;else for(var X=0,ae=Ye(h(e.sbs,e.i));X<ae;X++)n[t++]=1}else for(var K=0,ie=Ye(h(e.sbs,e.i));K<ie;K++)n[t++]=0;e.diff<0&&(n[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var ne=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=ne,e.dontdraw||(he.save(),Lt(),he.restore())}else{he.save(),on();var a=he.currpos();he.rmoveto(-3,78),n[t++]=a.x,n[t++]=a.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var s=n[--t];he.moveto(n[--t]-1,s+72),n[t++]=1/0,n[t++]=1/0,n[t++]=0,n[t++]=1;for(var l=0;l<49;l++)n[t++]=0;n[t++]=1,n[t++]=0,n[t++]=1,n[t++]=0;for(var c=0;c<49;c++)n[t++]=0;n[t++]=0,n[t++]=1,n[t++]=0,n[t++]=1;for(var d=0;d<49;d++)n[t++]=0;n[t++]=1,n[t++]=0;var f=o();n[t++]="ren",n[t++]="renmatrix",n[t++]="pixs",n[t++]=f,n[t++]="pixx",n[t++]=53,n[t++]="pixy",n[t++]=3,n[t++]="height",n[t++]=6/72,n[t++]="width",n[t++]=53/72,n[t++]="opt",n[t++]=e.options;var m=rt();n[t++]=m,Lt(),he.restore()}e=r}function OT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#30156",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databaromni"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,Gm();var a=n[--t];if(e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,n[t++]=a,e.usematrix?t--:on(),e.sepfinder=function(){e.fp=n[--t];for(var w=e.fp,k=e.fp+12;w<=k;w+=1){if(e.i=w,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var E=h(e.sep,e.i-1)==0?1:0;n[t++]=E}else n[t++]=0;C(e.sep,e.i,n[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),n[t++]=!0;for(var I=0;I<=12;I+=1){var T=n[--t];n[t++]=T&&ce(h(e.bot,R(I+e.fp)),h(e.f3,I))}n[--t]&&H(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var w=n[--t],k=n[t-1],E=k==1?0:1,I=0,T=w;I<T;I++)n[t++]=E}),Rn(o(Ur()-1)),e.bot=n[--t],t-=2,n[t++]=1/0,Ie(e.bot,function(){var w=n[--t];n[t++]=1-w}),e.sep=o(),H(e.sep,0,o([0,0,0])),H(e.sep,e.sep.length-4,o([0,0,0,0])),n[t++]=18,e.sepfinder(),n[t++]=64,e.sepfinder(),e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var d=n[--t];e[n[--t]]=d,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var w=n[--t],k=n[t-1],E=k==0?1:0,I=0,T=Ye(w);I<T;I++)n[t++]=E}),e.linpixs=o(),n[t++]=1/0,n[t++]=0,W(e.sep),e.sep=o(),e.linheight=~~e.linheight,n[t++]=1/0;for(var f=0,m=e.ccpixx,g=e.ccpixs.length-1;m<0?f>=g:f<=g;f+=m)e.i=f,W(O(e.ccpixs,e.i,e.ccpixx)),n[t++]=0;n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.sep);for(var v=0,y=e.linheight;v<y;v++)n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.linpixs);e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var A=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=A,e.dontdraw||(he.save(),Lt(),he.restore())}else{var s=he.currpos();he.rmoveto(-5,e.linheight+1),n[t++]=s.x,n[t++]=s.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var l=n[--t];he.moveto(n[--t],R(l+e.linheight));var c=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=c,Lt(),he.restore()}e=r}function DT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#30317",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databarstacked"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,$S();var a=n[--t];e.bot=O(h(a,"pixs"),0,h(a,"pixx")),e.linheight=h(a,"pixy"),n[t++]=a,e.usematrix?e.linpixs=h(n[--t],"pixs"):Lt(),e.sepfinder=function(){e.fp=n[--t];for(var T=e.fp,N=e.fp+12;T<=N;T+=1){if(e.i=T,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var j=h(e.sep,e.i-1)==0?1:0;n[t++]=j}else n[t++]=0;C(e.sep,e.i,n[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),n[t++]=!0;for(var B=0;B<=12;B+=1){var U=n[--t];n[t++]=U&&ce(h(e.bot,R(B+e.fp)),h(e.f3,B))}n[--t]&&H(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},n[t++]=1/0;for(var s=e.bot,l=0,c=s.length;l<c;l++)n[t++]=1-h(s,l);if(e.sep=o(),H(e.sep,0,o([0,0,0,0])),H(e.sep,e.sep.length-4,o([0,0,0,0])),n[t++]=18,e.sepfinder(),e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var g=n[--t];e[n[--t]]=g,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),e.linwidth=e.sep.length,n[t++]=1/0;for(var v=0,y=e.ccpixx,A=e.ccpixs.length-1;y<0?v>=A:v<=A;v+=y)e.i=v,n[t++]=0,W(O(e.ccpixs,e.i,e.ccpixx));W(e.sep),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;for(var w=0,k=e.linwidth,E=e.linpixs.length-1;k<0?w>=E:w<=E;w+=k)e.i=w,W(O(e.linpixs,e.i,e.linwidth)),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var I=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=I,e.dontdraw||(he.save(),Lt(),he.restore())}else{var d=he.currpos();he.rmoveto(1,e.linheight+1),n[t++]=d.x,n[t++]=d.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var f=n[--t];he.moveto(n[--t],R(f+e.linheight));var m=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=m,Lt(),he.restore()}e=r}function jT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#30474",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databarstackedomni"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,WS();var a=n[--t];e.bot=O(h(a,"pixs"),0,h(a,"pixx")),e.linheight=h(a,"pixy"),n[t++]=a,e.usematrix?e.linpixs=h(n[--t],"pixs"):Lt(),e.sepfinder=function(){e.fp=n[--t];for(var T=e.fp,N=e.fp+12;T<=N;T+=1){if(e.i=T,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var j=h(e.sep,e.i-1)==0?1:0;n[t++]=j}else n[t++]=0;C(e.sep,e.i,n[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),n[t++]=!0;for(var B=0;B<=12;B+=1){var U=n[--t];n[t++]=U&&ce(h(e.bot,R(B+e.fp)),h(e.f3,B))}n[--t]&&H(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},n[t++]=1/0;for(var s=e.bot,l=0,c=s.length;l<c;l++)n[t++]=1-h(s,l);if(e.sep=o(),H(e.sep,0,o([0,0,0,0])),H(e.sep,e.sep.length-4,o([0,0,0,0])),n[t++]=18,e.sepfinder(),e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var g=n[--t];e[n[--t]]=g,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),e.linwidth=e.sep.length,n[t++]=1/0;for(var v=0,y=e.ccpixx,A=e.ccpixs.length-1;y<0?v>=A:v<=A;v+=y)e.i=v,n[t++]=0,W(O(e.ccpixs,e.i,e.ccpixx));W(e.sep),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;for(var w=0,k=e.linwidth,E=e.linpixs.length-1;k<0?w>=E:w<=E;w+=k)e.i=w,W(O(e.linpixs,e.i,e.linwidth)),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var I=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=I,e.dontdraw||(he.save(),Lt(),he.restore())}else{var d=he.currpos();he.rmoveto(1,e.linheight+1),n[t++]=d.x,n[t++]=d.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var f=n[--t];he.moveto(n[--t],R(f+e.linheight));var m=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=m,Lt(),he.restore()}e=r}function BT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#30632",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databartruncated"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,XS();var a=n[--t];if(e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,n[t++]=a,e.usematrix?t--:on(),e.sepfinder=function(){e.fp=n[--t];for(var w=e.fp,k=e.fp+12;w<=k;w+=1){if(e.i=w,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var E=h(e.sep,e.i-1)==0?1:0;n[t++]=E}else n[t++]=0;C(e.sep,e.i,n[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),n[t++]=!0;for(var I=0;I<=12;I+=1){var T=n[--t];n[t++]=T&&ce(h(e.bot,R(I+e.fp)),h(e.f3,I))}n[--t]&&H(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var w=n[--t],k=n[t-1],E=k==1?0:1,I=0,T=w;I<T;I++)n[t++]=E}),Rn(o(Ur()-1)),e.bot=n[--t],t-=2,n[t++]=1/0,Ie(e.bot,function(){var w=n[--t];n[t++]=1-w}),e.sep=o(),H(e.sep,0,o([0,0,0])),H(e.sep,e.sep.length-4,o([0,0,0,0])),n[t++]=18,e.sepfinder(),n[t++]=64,e.sepfinder(),e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var d=n[--t];e[n[--t]]=d,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var w=n[--t],k=n[t-1],E=k==0?1:0,I=0,T=Ye(w);I<T;I++)n[t++]=E}),e.linpixs=o(),n[t++]=1/0,n[t++]=0,W(e.sep),e.sep=o(),e.linheight=~~e.linheight,n[t++]=1/0;for(var f=0,m=e.ccpixx,g=e.ccpixs.length-1;m<0?f>=g:f<=g;f+=m)e.i=f,W(O(e.ccpixs,e.i,e.ccpixx)),n[t++]=0;n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.sep);for(var v=0,y=e.linheight;v<y;v++)n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.linpixs);e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var A=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=A,e.dontdraw||(he.save(),Lt(),he.restore())}else{var s=he.currpos();he.rmoveto(-5,e.linheight+1),n[t++]=s.x,n[t++]=s.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var l=n[--t];he.moveto(n[--t],R(l+e.linheight));var c=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=c,Lt(),he.restore()}e=r}function PT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#30794",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databarlimited"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,KS();var a=n[--t];e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,n[t++]=a,e.usematrix?t--:on(),n[t++]=1/0,n[t++]=1,Ie(e.linsbs,function(){for(var F=n[--t],P=n[t-1],z=P==0?1:0,V=0,L=F;V<L;V++)n[t++]=z}),Rn(o(Ur()-1)),e.sep=n[--t],t-=2,H(e.sep,0,o([0,0,0]));var s=e.sep;if(H(e.sep,s.length-9,o([0,0,0,0,0,0,0,0,0])),e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var v=n[--t];if(e[n[--t]]=v,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var F=n[--t],P=n[t-1],z=P==0?1:0,V=0,L=Ye(F);V<L;V++)n[t++]=z}),e.linpixs=o(),n[t++]=1/0,n[t++]=0,W(e.sep),e.sep=o(),e.linheight=~~e.linheight,e.ccpixx==72){n[t++]=1/0;for(var y=0,A=e.ccpixx,w=e.ccpixs.length-1;A<0?y>=w:y<=w;y+=A)e.i=y,n[t++]=0,W(O(e.ccpixs,e.i,e.ccpixx)),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;W(e.sep);for(var k=0,E=e.linheight;k<E;k++)W(e.linpixs);e.pixs=o(),e.pixx=e.linpixs.length}else{n[t++]=1/0;for(var I=0,T=e.ccpixx,N=e.ccpixs.length-1;T<0?I>=N:I<=N;I+=T)e.i=I,W(O(e.ccpixs,e.i,e.ccpixx)),n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.sep);for(var j=0,B=e.linheight;j<B;j++)n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0,W(e.linpixs);e.pixs=o(),e.pixx=e.ccpixx+6}e.pixy=~~(e.pixs.length/e.pixx);var U=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=U,e.dontdraw||(he.save(),Lt(),he.restore())}else{var l=he.currpos(),c=e.comp;n[t++]=l.x,n[t++]=l.y,n[t++]=c,n[t++]=e.options,Ga();var d=n[--t];he.rmoveto(72-h(d,"pixx"),e.linheight+1),n[t++]=d,Lt();var f=n[--t];he.moveto(n[--t],R(f+e.linheight));var m=e.options,g=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",m]]);n[t++]=g,Lt(),he.restore()}e=r}function FT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#30946",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databarexpanded"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,dw();var a=n[--t];e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,n[t++]=a,e.usematrix?t--:on(),e.sepfinder=function(){e.fp=n[--t];for(var F=e.fp,P=e.fp+12;F<=P;F+=1){if(e.i=F,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var z=h(e.sep,e.i-1)==0?1:0;n[t++]=z}else n[t++]=0;C(e.sep,e.i,n[--t])}},n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var F=n[--t],P=n[t-1],z=P==1?0:1,V=0,L=F;V<L;V++)n[t++]=z}),Rn(o(Ur()-1)),e.bot=n[--t],t-=2,n[t++]=1/0,Ie(e.bot,function(){var F=n[--t];n[t++]=1-F}),e.sep=o(),H(e.sep,0,o([0,0,0])),H(e.sep,e.sep.length-4,o([0,0,0,0])),n[t++]=1/0;for(var s=18,l=e.bot.length-13;s<=l;s+=98)n[t++]=s;for(var c=69,d=e.bot.length-13;c<=d;c+=98)n[t++]=c;for(var f=o(),m=0,g=f.length;m<g;m++)n[t++]=h(f,m),e.sepfinder();if(e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var w=n[--t];e[n[--t]]=w,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0,n[t++]=0,Ie(e.linsbs,function(){for(var F=n[--t],P=n[t-1],z=P==0?1:0,V=0,L=Ye(F);V<L;V++)n[t++]=z}),e.linpixs=o(),n[t++]=1/0,n[t++]=0,W(e.sep),e.sep=o(),e.linheight=~~e.linheight,e.diff=R(e.linpixs.length-e.ccpixx),n[t++]=1/0;for(var k=0,E=e.diff-2;k<E;k++)n[t++]=0;e.ccrpad=o(),n[t++]=1/0;for(var I=0,T=e.ccpixx,N=e.ccpixs.length-1;T<0?I>=N:I<=N;I+=T)e.i=I,n[t++]=0,n[t++]=0,W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);W(e.sep);for(var j=0,B=e.linheight;j<B;j++)W(e.linpixs);e.pixs=o(),e.pixx=e.linpixs.length,e.pixy=~~(e.pixs.length/e.pixx);var U=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=U,e.dontdraw||(he.save(),Lt(),he.restore())}else{var v=he.currpos();he.rmoveto(1,e.linheight+1),n[t++]=v.x,n[t++]=v.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var y=n[--t];he.moveto(n[--t],R(y+e.linheight));var A=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=A,Lt(),he.restore()}e=r}function UT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#31106",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"lintype","databarexpandedstacked"),C(e.options,"linkage",!0),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,n[t++]=e.linear,n[t++]=e.options,uw();var a=n[--t];e.bot=O(h(a,"pixs"),0,h(a,"pixx")),e.linheight=h(a,"pixy"),n[t++]=a,e.usematrix?e.linpixs=h(n[--t],"pixs"):Lt(),e.sepfinder=function(){e.fp=n[--t];for(var L=e.fp,Q=e.fp+12;L<=Q;L+=1){if(e.i=L,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)n[t++]=1;else{var q=h(e.sep,e.i-1)==0?1:0;n[t++]=q}else n[t++]=0;C(e.sep,e.i,n[--t])}},n[t++]=1/0;for(var s=e.bot,l=0,c=s.length;l<c;l++)n[t++]=1-h(s,l);e.sep=o(),H(e.sep,0,o([0,0,0,0])),H(e.sep,e.sep.length-4,o([0,0,0,0])),n[t++]=1/0;for(var d=19,f=e.bot.length-13;d<=f;d+=98)n[t++]=d;for(var m=70,g=e.bot.length-13;m<=g;m+=98)n[t++]=m;for(var v=o(),y=0,A=v.length;y<A;y++)n[t++]=h(v,y),e.sepfinder();if(e.usematrix){n[t++]="compsym",n[t++]=e.comp,n[t++]=e.options,Ga();var T=n[--t];e[n[--t]]=T,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),e.pixx=e.sep.length,n[t++]=1/0;for(var N=0,j=~~((R(e.pixx-e.ccpixx)+1)/2);N<j;N++)n[t++]=0;e.cclpad=o(),n[t++]=1/0;for(var B=0,U=~~(R(e.pixx-e.ccpixx)/2);B<U;B++)n[t++]=0;e.ccrpad=o(),n[t++]=1/0;for(var F=0,P=e.ccpixx,z=e.ccpixs.length-1;P<0?F>=z:F<=z;F+=P)e.i=F,W(e.cclpad),W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);W(e.sep),W(e.linpixs),e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var V=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=V,e.dontdraw||(he.save(),Lt(),he.restore())}else{var w=he.currpos(),k=h(e.bot,0)==0?2:0;he.rmoveto(k,e.linheight+1),n[t++]=w.x,n[t++]=w.y,n[t++]=e.comp,n[t++]=e.options,Ga(),Lt();var E=n[--t];he.moveto(n[--t],R(E+e.linheight));var I=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=I,Lt(),he.restore()}e=r}function LT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.dontdraw&&(e.usematrix=!0),sn(e.barcode,"|"),n[--t]?(e.linear=n[--t],t--,e.comp=n[--t]):(t--,n[t++]="bwipp.missingCompositeComponent#31259",n[t++]="A Composite Component must be provided following a pipe character",Z()),e.usematrix||he.save(),C(e.options,"inkspreadv",0),C(e.options,"dontdraw",!0),C(e.options,"dontlint",!0);var i=fe(e.linear.length+e.comp.length);H(i,0,e.linear),H(i,e.linear.length,e.comp),n[t++]=i,n[t++]="ai",cs(),t-=3,C(e.options,"linkagea",!0),n[t++]=e.linear,n[t++]=1/0,Ie(e.options);var a=rt();n[t++]=a,Gy();var s=h(n[--t],"sbs");n[t++]=0,Ie(s,function(){var Q=n[--t],q=n[--t];n[t++]=R(q+Q)}),e.linwidth=n[--t],C(e.options,"lintype","gs1-128"),C(e.options,"linwidth",e.linwidth),n[t++]=e.comp,n[t++]=1/0,Ie(e.options);var l=rt();n[t++]=l,Ga(),e.compsym=n[--t],h(e.compsym,"pixx")==99?n[t++]="a":n[t++]="c",e.linktype=n[--t],C(e.compsym,"borderbottom",0),ce(e.linktype,"a")?(C(e.options,"linkagea",!0),C(e.options,"linkagec",!1)):(C(e.options,"linkagea",!1),C(e.options,"linkagec",!0));var c=e.linear;n[t++]=c,n[t++]=1/0,Ie(e.options);var d=rt();n[t++]=d,Gy();var f=n[--t];if(e.linsbs=h(f,"sbs"),e.linheight=h(h(f,"bhs"),0)*72,n[t++]=f,e.usematrix?t--:on(),n[t++]=1/0,n[t++]=1,Ie(e.linsbs,function(){for(var Q=n[--t],q=n[t-1],ee=q==0?1:0,X=0,ae=Q;X<ae;X++)n[t++]=ee}),Rn(o(Ur()-1)),e.sep=n[--t],t-=2,ce(e.linktype,"a")){if(e.s=~~((e.linwidth-2)/11),e.p=~~((e.s-9)/2),n[t++]="x",n[t++]=(e.s-e.p-1)*11+10,e.p==0){var m=n[--t];n[t++]=m+2}var g=n[--t];e[n[--t]]=g-99}else e.x=-7;if(e.usematrix){if(e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),n[t++]=1/0,Ie(e.linsbs,function(){for(var Q=n[--t],q=n[t-1],ee=q==1?0:1,X=0,ae=Q;X<ae;X++)n[t++]=ee}),e.linpixs=o(),e.x>0){n[t++]=1/0;for(var w=0,k=e.x;w<k;w++)n[t++]=0;e.cclpad=o(),e.linlpad=o(0)}else{e.cclpad=o(0),n[t++]=1/0;for(var E=0,I=-e.x;E<I;E++)n[t++]=0;e.linlpad=o()}if(e.diff=R(e.linwidth-(e.ccpixx+e.x)),e.diff>0){n[t++]=1/0;for(var T=0,N=e.diff;T<N;T++)n[t++]=0;e.ccrpad=o(),e.linrpad=o(0)}else{e.ccrpad=o(0),n[t++]=1/0;for(var j=0,B=-e.diff;j<B;j++)n[t++]=0;e.linrpad=o()}e.linheight=~~e.linheight,n[t++]=1/0;for(var U=0,F=e.ccpixx,P=e.ccpixs.length-1;F<0?U>=P:U<=P;U+=F)e.i=U,W(e.cclpad),W(O(e.ccpixs,e.i,e.ccpixx)),W(e.ccrpad);W(e.linlpad),W(e.sep),W(e.linrpad);for(var z=0,V=e.linheight;z<V;z++)W(e.linlpad),W(e.linpixs),W(e.linrpad);e.pixs=o(),e.pixx=R(e.cclpad.length+e.ccpixx+e.ccrpad.length),e.pixy=~~(e.pixs.length/e.pixx);var L=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);n[t++]=L,e.dontdraw||(he.save(),Lt(),he.restore())}else{var v=he.currpos();he.rmoveto(e.x,e.linheight+1),n[t++]=v.x,n[t++]=v.y,n[t++]=e.compsym,Lt();var y=n[--t];he.moveto(n[--t],R(y+e.linheight));var A=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);n[t++]=A,Lt(),he.restore()}e=r}function zT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.gssep=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t],e.fnc1=-1,e.dmtx=o([e.fnc1]);for(var i=0,a=e.ais.length-1;i<=a;i+=1){e.i=i,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var s=o(e.dmtx.length+e.ai.length+e.val.length);H(s,0,e.dmtx),n[t++]=s,n[t++]=s,n[t++]=e.dmtx.length;var l=1/0,c=e.ai;n[t++]=l,Ie(c);var d=o(),f=n[--t];H(n[--t],f,d);var m=n[t-1];n[t++]=m,n[t++]=e.dmtx.length+e.ai.length;var g=1/0,v=e.val;n[t++]=g,Ie(v);var y=o(),A=n[--t];if(H(n[--t],A,y),e.dmtx=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var w=o(e.dmtx.length+1);H(w,0,e.dmtx),n[t++]=w,n[t++]=w,n[t++]=e.dmtx.length,e.gssep?n[t++]=29:n[t++]=e.fnc1;var k=n[--t],E=n[--t];C(n[--t],E,k),e.dmtx=n[--t]}}for(e.barcode=fe((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var I=h(e.dmtx,e.i);n[t++]=I,I==e.fnc1?(t--,H(e.barcode,e.j,"^FNC1"),e.j=e.j+4):C(e.barcode,e.j,n[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=O(e.barcode,0,e.j),delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var T=n[--t];e[n[--t]]=T,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function HT(){var r=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,e.gssep=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t],e.fnc1=-1,e.dmtx=o([e.fnc1]);for(var i=0,a=e.ais.length-1;i<=a;i+=1){e.i=i,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var s=o(e.dmtx.length+e.ai.length+e.val.length);H(s,0,e.dmtx),n[t++]=s,n[t++]=s,n[t++]=e.dmtx.length;var l=1/0,c=e.ai;n[t++]=l,Ie(c);var d=o(),f=n[--t];H(n[--t],f,d);var m=n[t-1];n[t++]=m,n[t++]=e.dmtx.length+e.ai.length;var g=1/0,v=e.val;n[t++]=g,Ie(v);var y=o(),A=n[--t];if(H(n[--t],A,y),e.dmtx=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var w=o(e.dmtx.length+1);H(w,0,e.dmtx),n[t++]=w,n[t++]=w,n[t++]=e.dmtx.length,e.gssep?n[t++]=29:n[t++]=e.fnc1;var k=n[--t],E=n[--t];C(n[--t],E,k),e.dmtx=n[--t]}}for(e.barcode=fe((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var I=h(e.dmtx,e.i);n[t++]=I,I==e.fnc1?(t--,H(e.barcode,e.j,"^FNC1"),e.j=e.j+4):C(e.barcode,e.j,n[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=O(e.barcode,0,e.j),delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),C(e.options,"format","rectangle"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var T=n[--t];e[n[--t]]=T,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function qT(){var r=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,n[t++]=e.barcode,n[t++]="dl",cs(),t--,e.val=h(n[--t],0),e.key=h(n[--t],0),e.hri=fe(e.key.length+e.val.length+2),C(e.hri,0,40),H(e.hri,1,e.key),C(e.hri,e.key.length+1,41),H(e.hri,e.key.length+2,e.val),delete e.options.parse,C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var s=n[--t];e[n[--t]]=s,C(e.args,"opt",e.options),C(e.args,"alttext",e.hri),C(e.args,"textyoffset",-1),C(e.args,"textfont","OCR-B"),C(e.args,"textsize",5),n[t++]=e.args,e.dontdraw||Lt(),e=r}function GT(){var r=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t],e.fnc1=-1,e.qrc=o([e.fnc1]);for(var i=0,a=e.ais.length-1;i<=a;i+=1){e.i=i,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var s=o(e.qrc.length+e.ai.length+e.val.length);H(s,0,e.qrc),n[t++]=s,n[t++]=s,n[t++]=e.qrc.length;var l=1/0,c=e.ai;n[t++]=l,Ie(c);var d=o(),f=n[--t];H(n[--t],f,d);var m=n[t-1];n[t++]=m,n[t++]=e.qrc.length+e.ai.length;var g=1/0,v=e.val;n[t++]=g,Ie(v);var y=o(),A=n[--t];if(H(n[--t],A,y),e.qrc=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var w=o(e.qrc.length+1);H(w,0,e.qrc),C(w,e.qrc.length,e.fnc1),e.qrc=w}}for(e.barcode=fe((e.qrc.length+1)*5),e.i=0,e.j=0;e.i!=e.qrc.length;){var k=h(e.qrc,e.i);n[t++]=k,k==e.fnc1?(t--,H(e.barcode,e.j,"^FNC1"),e.j=e.j+4):C(e.barcode,e.j,n[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=O(e.barcode,0,e.j),delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,sf();var E=n[--t];e[n[--t]]=E,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function VT(){var r=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t];var i=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=i,n[t++]="barcode",n[t++]=e.barcode,n[t++]=e.fncvals,ja();var a=n[--t];e[n[--t]]=a,n[t++]=e.barcode,n[t++]="dl",cs(),t--,e.val=h(n[--t],0),e.key=h(n[--t],0),e.hri=fe(e.key.length+e.val.length+2),C(e.hri,0,40),H(e.hri,1,e.key),C(e.hri,e.key.length+1,41),H(e.hri,e.key.length+2,e.val),delete e.options.parse,C(e.options,"dontdraw",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,sf();var s=n[--t];e[n[--t]]=s,C(e.args,"opt",e.options),C(e.args,"alttext",e.hri),C(e.args,"textyoffset",-4),C(e.args,"textfont","OCR-B"),C(e.args,"textsize",5),n[t++]=e.args,e.dontdraw||Lt(),e=r}function YT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],n[t++]=e.barcode,n[t++]="ai",cs(),e.fncs=n[--t],e.vals=n[--t],e.ais=n[--t],e.fnc1=-1,e.dmtx=o([e.fnc1]);for(var i=0,a=e.ais.length-1;i<=a;i+=1){e.i=i,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var s=o(e.dmtx.length+e.ai.length+e.val.length);H(s,0,e.dmtx),n[t++]=s,n[t++]=s,n[t++]=e.dmtx.length;var l=1/0,c=e.ai;n[t++]=l,Ie(c);var d=o(),f=n[--t];H(n[--t],f,d);var m=n[t-1];n[t++]=m,n[t++]=e.dmtx.length+e.ai.length;var g=1/0,v=e.val;n[t++]=g,Ie(v);var y=o(),A=n[--t];if(H(n[--t],A,y),e.dmtx=n[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var w=o(e.dmtx.length+1);H(w,0,e.dmtx),C(w,e.dmtx.length,e.fnc1),e.dmtx=w}}for(e.barcode=fe((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var k=h(e.dmtx,e.i);n[t++]=k,k==e.fnc1?(t--,H(e.barcode,e.j,"^FNC1"),e.j=e.j+4):C(e.barcode,e.j,n[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=O(e.barcode,0,e.j),delete e.options.parse,C(e.options,"dontdraw",!0),C(e.options,"parsefnc",!0),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,t9();var E=n[--t];e[n[--t]]=E,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function QT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibccode39emptyData#31945",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibccode39badCharacter#31960",n[t++]="HIBC Code 39 must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibccode39badCheckDigit#31974",n[t++]="Incorrect HIBC Code 39 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),e.text=fe(e.barlen+4),C(e.text,0,42),H(e.text,1,e.barcode);var v=h(e.barcode,e.barlen+1);n[t++]=e.text,n[t++]=e.barlen+2,n[t++]=v,v==32&&(n[t-1]=95);var y=n[--t],A=n[--t];C(n[--t],A,y),C(e.text,e.barlen+3,42),C(e.options,"dontdraw",!0),C(e.options,"includecheck",!1),C(e.options,"validatecheck",!1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,qm();var w=n[--t];e[n[--t]]=w,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function $T(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibccode128emptyData#32049",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibccode128badCharacter#32064",n[t++]="HIBC Code 128 must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibccode128badCheckDigit#32078",n[t++]="Incorrect HIBC Code 128 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),e.text=fe(e.barlen+4),C(e.text,0,42),H(e.text,1,e.barcode);var v=h(e.barcode,e.barlen+1);n[t++]=e.text,n[t++]=e.barlen+2,n[t++]=v,v==32&&(n[t-1]=95);var y=n[--t],A=n[--t];C(n[--t],A,y),C(e.text,e.barlen+3,42),C(e.options,"dontdraw",!0),C(e.options,"validatecheck",!1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Hm();var w=n[--t];e[n[--t]]=w,C(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),C(e.args,"textxalign","center"),C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||on(),e=r}function WT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibcdatamatrixEmptyData#32148",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibcdatamatrixBadCharacter#32163",n[t++]="HIBC Data Matrix must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibcdatamatrixBadCheckDigit#32177",n[t++]="Incorrect HIBC Data Matrix check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=e.barlen,v=fe(g+2);H(v,1,e.barcode),e.barcode=v,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),C(e.options,"dontdraw",!0),C(e.options,"validatecheck",!1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var y=n[--t],A=n[--t];e[A]=y,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function XT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibcdatamatrixrectangularEmptyData#32239",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibcdatamatrixrectangularBadCharacter#32254",n[t++]="HIBC Data Matrix Rectangular must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibcdatamatrixrectangularBadCheckDigit#32268",n[t++]="Incorrect HIBC Data Matrix Rectangular check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=e.barlen,v=fe(g+2);H(v,1,e.barcode),e.barcode=v,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),C(e.options,"dontdraw",!0),C(e.options,"validatecheck",!1),C(e.options,"format","rectangle"),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Dc();var y=n[--t];e[n[--t]]=y,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function KT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.columns=2,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibcpdf417EmptyData#32332",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibcpdf417BadCharacter#32347",n[t++]="HIBC PDF417 must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibcpdf417BadCheckDigit#32361",n[t++]="Incorrect HIBC PDF417 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),C(e.options,"dontdraw",!0),C(e.options,"columns",e.columns);var v=e.options;C(v,"validatecheck",!1);var y=e.options;n[t++]="args",n[t++]=e.barcode,n[t++]=y,Ax();var A=n[--t];e[n[--t]]=A,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function JT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.columns=2,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibcmicropdf417EmptyData#32425",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibcmicropdf417BadCharacter#32440",n[t++]="HIBC MicroPDF417 must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibcmicropdf417BadCheckDigit#32454",n[t++]="Incorrect HIBC MicroPDF417 check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum));var v=e.options;C(v,"dontdraw",!0),C(e.options,"columns",e.columns),C(e.options,"validatecheck",!1);var y=e.options;n[t++]="args",n[t++]=e.barcode,n[t++]=y,z3();var A=n[--t];e[n[--t]]=A,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function ZT(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibcqrcodeEmptyData#32517",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibcqrcodeBadCharacter#32532",n[t++]="HIBC QR Code must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibcqrcodeBadCheckDigit#32546",n[t++]="Incorrect HIBC QR Code check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),C(e.options,"dontdraw",!0),C(e.options,"validatecheck",!1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,sf();var v=n[--t],y=n[--t];e[y]=v,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function eM(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibccodablockfEmptyData#32608",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibccodablockfBadCharacter#32623",n[t++]="HIBC Codablock F must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibccodablockfBadCheckDigit#32637",n[t++]="Incorrect HIBC Codablock F check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),C(e.options,"dontdraw",!0),C(e.options,"validatecheck",!1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,e9();var v=n[--t],y=n[--t];e[y]=v,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function tM(){var r=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,n[t++]=e,ht(),e.options=n[--t],e.barcode=n[--t],e.barcode.length==0&&(n[t++]="bwipp.hibcazteccodeEmptyData#32699",n[t++]="The data must not be empty",Z()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var i=0;i<=42;i+=1)C(e.charvals,O(e.barchars,i,1),i);for(var a=0,s=e.barcode.length-1;a<=s;a+=1){var l=h(e.charvals,O(e.barcode,a,1))!==void 0;l||(n[t++]="bwipp.hibcazteccodeBadCharacter#32714",n[t++]="HIBC Aztec Code must contain only digits, capital letters, spaces and the symbols -.$/+%",Z())}if(n[t++]="barlen",n[t++]=e.barcode.length,e.validatecheck){var c=n[--t];n[t++]=c-1}var d=n[--t];e[n[--t]]=d,e.checksum=41;for(var f=0,m=e.barlen-1;f<=m;f+=1)e.checksum=R(h(e.charvals,O(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(n[t++]="bwipp.hibcazteccodeBadCheckDigit#32728",n[t++]="Incorrect HIBC Aztec Code check digit provided",Z()),e.barcode=O(e.barcode,0,e.barlen));var g=fe(e.barlen+2);H(g,1,e.barcode),e.barcode=g,C(e.barcode,0,43),C(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),C(e.options,"dontdraw",!0),C(e.options,"validatecheck",!1),n[t++]="args",n[t++]=e.barcode,n[t++]=e.options,Sx();var v=n[--t],y=n[--t];e[y]=v,C(e.args,"opt",e.options),n[t++]=e.args,e.dontdraw||Lt(),e=r}function nM(){var r=e;e=Object.assign({},e),e.options=n[--t],e.barcode=n[--t],e.dontdraw=!1,e.shortfinder=!1,e.includetext=!1,e.includecheck=!1,e.height=1,Ie(e.options,function(){var T=n[--t];e[n[--t]]=T}),e.height=+e.height,(e.barcode.length<2||e.barcode.length>7)&&(n[t++]="bwipp.channelcodeBadLength#32803",n[t++]="Channel Code must be 2 to 7 digits",Z()),Ie(e.barcode,function(){var T=n[--t];(T<48||T>57)&&(n[t++]="bwipp.channelcodeBadCharacter#32807",n[t++]="Channel Code must contain only digits",Z())}),Ye(e.barcode)>h(o([26,292,3493,44072,576688,7742862]),e.barcode.length-2)&&(n[t++]="bwipp.channelcodeTooBig#32811",n[t++]="The Channel Code value is too big for the number of channels",Z()),e.nextb=function(){var T=n[t-1],N=R(h(e.s,T)+(h(e.b,T-1)+(h(e.b,T-2)+h(e.s,T-1))))>4?1:2;if(n[t++]=N,T<e.chan+2)for(var j=n[t-1],B=n[t-3],U=j,F=B;U<=F;U+=1){var P=n[t-2];C(e.b,P,U);var z=n[t-3],V=n[t-4];n[t++]=R(z-U)+1,n[t++]=V,n[t++]=P+1,e.nexts()}else{var L=n[t-1],Q=n[t-3];if(Zh(L,Q)){var q=n[t-2],ee=n[t-3];if(C(e.b,q,ee),e.value==e.target){n[t++]=1/0;for(var X=3;X<=10;X+=1)n[t++]=h(e.s,X),n[t++]=h(e.b,X);e.out=O(o(),0,e.chan*2)}e.value=e.value+1}}t-=4},e.nexts=function(){var T=n[t-1];if(T<e.chan+2)n[t++]=1;else{var N=n[t-2];n[t++]=N}for(var j=n[--t],B=n[t-2],U=j,F=B;U<=F;U+=1){var P=n[t-1];C(e.s,P,U);var z=n[t-2],V=n[t-3];n[t++]=R(z-U)+1,n[t++]=V,n[t++]=P,e.nextb()}t-=3},e.encode=function(){e.chan=n[--t],e.target=n[--t],e.value=0,e.out=-1,e.b=o([1,1,1,0,0,0,0,0,0,0,0]),e.s=o([0,1,1,0,0,0,0,0,0,0,0]);var T=e.chan;n[t++]=T,n[t++]=T,n[t++]=3,e.nexts(),n[t++]=e.out},e.barlen=e.barcode.length,n[t++]="finder",e.shortfinder?n[t++]=o([1,1,1,1,1]):n[t++]=o([1,1,1,1,1,1,1,1,1]);var i=n[--t];e[n[--t]]=i,n[t++]="data",n[t++]=Ye(e.barcode),n[t++]=e.barlen+1,e.encode();var a=n[--t];if(e[n[--t]]=a,e.check=o([]),e.includecheck){e.mod23=h(o([o([]),o([]),o([13,12,4,9,3,1]),o([13,2,12,3,18,16,4,1]),o([11,16,17,8,20,4,10,2,5,1]),o([1,4,16,18,3,12,2,8,9,13,6,1]),o([20,16,22,13,15,12,5,4,8,9,21,3,7,1]),o([2,6,18,8,1,3,9,4,12,13,16,2,6,18,8,1])]),e.barlen),n[t++]=0;for(var s=0,l=e.data.length-1;s<=l;s+=1){var c=n[--t];n[t++]=R(c+(h(e.data,s)-1)*h(e.mod23,s))}var d=n[--t];n[t++]=d%23,n[t++]=3,e.encode(),e.check=n[--t]}n[t++]=1/0,W(e.finder),W(e.data),W(e.check),e.sbs=o(),e.txt=o(e.barlen);for(var f=0,m=e.barlen-1;f<=m;f+=1)e.i=f,C(e.txt,e.i,o([O(e.barcode,e.i,1),0,0,"",0]));n[t++]=1/0;var g=e.sbs;n[t++]=1/0;for(var v=0,y=~~((e.sbs.length+1)/2);v<y;v++)n[t++]=e.height;var A=o();n[t++]=1/0;for(var w=0,k=~~((e.sbs.length+1)/2);w<k;w++)n[t++]=0;var E=o();n[t++]="ren",n[t++]=on,n[t++]="sbs",n[t++]=g,n[t++]="bhs",n[t++]=A,n[t++]="bbs",n[t++]=E,n[t++]="txt",n[t++]=e.txt,n[t++]="textxalign",n[t++]="center",n[t++]="opt",n[t++]=e.options;var I=rt();n[t++]=I,e.dontdraw||on(),e=r}function on(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(n[--t]);return}var r=e;if(e=Object.assign({},e),e.sbs=o([]),e.bhs=o([]),e.bbs=o([]),e.txt=o([]),e.barcolor="unset",e.includetext=!1,e.textcolor="unset",e.textxalign="unset",e.textyalign="unset",e.textfont="OCR-B",e.textdirection="forward",e.textsize=10,e.textxoffset=0,e.textyoffset=0,e.textgaps=0,e.textlinegaps=1.2,e.alttext="",e.alttextsplit="",e.alttextsubspace="",e.extratext="",e.extratextsubspace="",e.extratextsplit="",e.extratextlinegaps=1.2,e.extratextcolor="unset",e.extratextxalign="left",e.extratextyalign="above",e.extratextfont="OCR-B",e.extratextdirection="forward",e.extratextsize=10,e.extratextxoffset=0,e.extratextyoffset=0,e.extratextgaps=0,e.bordercolor="unset",e.inkspread=0,e.width=0,e.barratio=1,e.spaceratio=1,e.showborder=!1,e.showbearer=!1,e.borderleft=10,e.borderright=10,e.bordertop=1,e.borderbottom=1,e.borderwidth=.5,e.guardwhitespace=!1,e.guardleftpos=0,e.guardleftypos=0,e.guardrightpos=0,e.guardrightypos=0,e.guardwidth=7,e.guardheight=7,Ie(n[--t],function(){var _n=n[--t];e[n[--t]]=_n}),n[t++]=e.opt,delete e.opt,n[t++]=e,ht(),t--,qe(e.textxalign,"unset")){n[t++]=1/0;var i="offleft",a="left",s="center",l="right",c="offright";n[t++]=i,n[t++]=i,n[t++]=a,n[t++]=a,n[t++]=s,n[t++]=s,n[t++]=l,n[t++]=l,n[t++]=c,n[t++]=c;var d=h(rt(),e.textxalign)!==void 0;d||(n[t++]="bwipp.renmatrixBadTextxalign#33005",n[t++]="textxalign must be offleft, left, center, right or offright",Z())}if(qe(e.textyalign,"unset")){n[t++]=1/0;var f="above",m="top",g="center",v="bottom",y="below";n[t++]=f,n[t++]=f,n[t++]=m,n[t++]=m,n[t++]=g,n[t++]=g,n[t++]=v,n[t++]=v,n[t++]=y,n[t++]=y;var A=h(rt(),e.textyalign)!==void 0;A||(n[t++]="bwipp.renmatrixBadTextyalign#33011",n[t++]="textyalign must be above, top, center, bottom or below",Z())}n[t++]=1/0;var w="forward",k="backward",E="upward",I="downward";n[t++]=w,n[t++]=w,n[t++]=k,n[t++]=k,n[t++]=E,n[t++]=E,n[t++]=I,n[t++]=I;var T=h(rt(),e.textdirection)!==void 0;T||(n[t++]="bwipp.renmatrixBadTextdirection#33016",n[t++]="textdirection must be forward, backward, upward or downward",Z()),(e.textsize<=0||e.textsize>=25)&&(n[t++]="bwipp.renmatrixBadTextsize#33020",n[t++]="textsize must be greater than zero and less that 25",Z()),n[t++]=1/0;var N="offleft",j="left",B="center",U="right",F="offright";n[t++]=N,n[t++]=N,n[t++]=j,n[t++]=j,n[t++]=B,n[t++]=B,n[t++]=U,n[t++]=U,n[t++]=F,n[t++]=F;var P=h(rt(),e.extratextxalign)!==void 0;P||(n[t++]="bwipp.renmatrixBadExtratextxalign#33024",n[t++]="extratextxalign must be offleft, left, center, right or offright",Z()),n[t++]=1/0;var z="above",V="top",L="center",Q="bottom",q="below";n[t++]=z,n[t++]=z,n[t++]=V,n[t++]=V,n[t++]=L,n[t++]=L,n[t++]=Q,n[t++]=Q,n[t++]=q,n[t++]=q;var ee=h(rt(),e.extratextyalign)!==void 0;ee||(n[t++]="bwipp.renmatrixBadExtratextyalign#33028",n[t++]="extratextyalign must be above, top, center, bottom or below",Z()),n[t++]=1/0;var X="forward",ae="backward",K="upward",ie="downward";n[t++]=X,n[t++]=X,n[t++]=ae,n[t++]=ae,n[t++]=K,n[t++]=K,n[t++]=ie,n[t++]=ie;var ne=h(rt(),e.extratextdirection)!==void 0;ne||(n[t++]="bwipp.renmatrixBadExtratextdirection#33032",n[t++]="extratextdirection must be forward, backward, upward or downward",Z()),(e.extratextsize<=0||e.extratextsize>=25)&&(n[t++]="bwipp.renmatrixBadTextsize#33036",n[t++]="extratextsize must be greater than zero and less that 25",Z()),e.bars=o(~~((e.sbs.length+1)/2)),e.pixx=0,e.pixy=0;for(var J=0,te=~~((e.sbs.length+1)/2)*2-2;J<=te;J+=1)e.i=J,e.i%2==0?(e.d=R(h(e.sbs,e.i)*e.barratio-e.barratio)+1,h(e.sbs,e.i)!=0?(e.h=h(e.bhs,~~(e.i/2))*72,e.c=R(e.d/2+e.pixx),e.y=h(e.bbs,~~(e.i/2))*72,e.w=R(e.d-e.inkspread),C(e.bars,~~(e.i/2),o([e.h,e.c,e.y,e.w])),R(e.h+e.y)>e.pixy&&(e.pixy=R(e.h+e.y))):C(e.bars,~~(e.i/2),-1)):e.d=R(h(e.sbs,e.i)*e.spaceratio-e.spaceratio)+1,e.pixx=R(e.pixx+e.d);he.save();var $=he.currpos();if(he.translate($.x,$.y),e.width!=0&&he.scale(e.width*72/e.pixx,1),e.tl=o([-R(e.borderleft+e.borderwidth/2),R(e.pixy+e.bordertop+e.borderwidth/2)]),e.tr=o([R(e.pixx+e.borderright+e.borderwidth/2),R(e.pixy+e.bordertop+e.borderwidth/2)]),e.bl=o([-R(e.borderleft+e.borderwidth/2),-R(e.borderbottom+e.borderwidth/2)]),e.br=o([R(e.pixx+e.borderright+e.borderwidth/2),-R(e.borderbottom+e.borderwidth/2)]),e.showbearer){he.save(),he.newpath(),W(e.bl);var oe=n[--t];he.moveto(n[--t],oe),W(e.br);var we=n[--t];he.lineto(n[--t],we),W(e.tl);var be=n[--t];he.moveto(n[--t],be),W(e.tr);var Te=n[--t];he.lineto(n[--t],Te),qe(e.bordercolor,"unset")&&he.setcolor(e.bordercolor),he.setlinewidth(R(e.borderwidth-e.inkspread*2)),he.stroke(),he.restore()}else if(e.showborder){he.save(),he.newpath(),W(e.bl);var ye=n[--t];he.moveto(n[--t],ye);for(var tt=o([e.br,e.tr,e.tl]),Qe=0,Ge=tt.length;Qe<Ge;Qe++){W(h(tt,Qe));var Xe=n[--t];he.lineto(n[--t],Xe)}he.closepath(),qe(e.bordercolor,"unset")&&he.setcolor(e.bordercolor),he.setlinewidth(e.borderwidth),he.stroke(),he.restore()}he.save(),qe(e.barcolor,"unset")&&he.setcolor(e.barcolor);for(var Je=e.bars,dt=0,vt=Je.length;dt<vt;dt++){var _t=h(Je,dt);if(n[t++]=_t,_t!=-1){W(n[--t]),he.newpath(),he.setlinewidth(n[--t]);var xt=n[--t];he.moveto(n[--t],xt),he.rlineto(0,n[--t]),he.stroke()}else t--}he.restore();var bt=new Map([["offleft",function(){n[t++]=R(-e.tw-e.nudge)}],["below",function(){n[t++]=R(-e.th-e.nudge)}],["left",function(){n[t++]=0}],["bottom",function(){n[t++]=0}],["xcenter",function(){n[t++]=R(e.pixx-e.tw)/2}],["ycenter",function(){n[t++]=R(e.pixy-e.th)/2}],["right",function(){n[t++]=R(e.pixx-e.tw)}],["top",function(){n[t++]=R(e.pixy-e.th)}],["offright",function(){n[t++]=R(e.pixx+e.nudge)}],["above",function(){n[t++]=R(e.pixy+e.nudge)}]]),kt=new Map([["offleft",function(){n[t++]=0-e.nudge}],["below",function(){n[t++]=0-e.nudge}],["left",function(){n[t++]=e.tw}],["bottom",function(){n[t++]=e.th}],["xcenter",function(){n[t++]=R(e.pixx+e.tw)/2}],["ycenter",function(){n[t++]=R(e.pixy+e.th)/2}],["right",function(){n[t++]=e.pixx}],["top",function(){n[t++]=e.pixy}],["offright",function(){n[t++]=R(e.pixx+e.tw+e.nudge)}],["above",function(){n[t++]=R(e.pixy+e.th+e.nudge)}]]),Pt=new Map([["offleft",function(){n[t++]=0-e.nudge}],["below",function(){n[t++]=R(-e.tw-e.nudge)}],["left",function(){n[t++]=e.th}],["bottom",function(){n[t++]=0}],["xcenter",function(){n[t++]=R(e.pixx+e.th)/2}],["ycenter",function(){n[t++]=R(e.pixy-e.tw)/2}],["right",function(){n[t++]=e.pixx}],["top",function(){n[t++]=R(e.pixy-e.tw)}],["offright",function(){n[t++]=R(e.pixx+e.th+e.nudge)}],["above",function(){n[t++]=R(e.pixy+e.nudge)}]]),Rt=new Map([["offleft",function(){n[t++]=R(-e.th-e.nudge)}],["below",function(){n[t++]=0-e.nudge}],["left",function(){n[t++]=0}],["bottom",function(){n[t++]=e.tw}],["xcenter",function(){n[t++]=R(e.pixx-e.th)/2}],["ycenter",function(){n[t++]=R(e.pixy+e.tw)/2}],["right",function(){n[t++]=R(e.pixx-e.th)}],["top",function(){n[t++]=e.pixy}],["offright",function(){n[t++]=R(e.pixx+e.nudge)}],["above",function(){n[t++]=R(e.pixy+e.tw+e.nudge)}]]),Wt=new Map([["forward",bt],["backward",kt],["upward",Pt],["downward",Rt]]);if(e.positions=Wt,e.positiontext=function(){e.th=n[--t],e.tw=n[--t],e.nudge=1;var _n=h(e.positions,n[--t]);n[t++]=_n,n[t++]=_n,oa(4,-1);var vn=n[t-1];ce(vn,"center")&&(n[t-1]="xcenter");var kn=n[--t];if(h(n[--t],kn)()===!0)return!0;var Ai=n[--t],Ei=n[--t];n[t++]=Ai,n[t++]=Ei,oa(3,-1);var Ji=n[t-1];ce(Ji,"center")&&(n[t-1]="ycenter");var nn=n[--t];if(h(n[--t],nn)()===!0)return!0},e.includetext)if(qe(e.textcolor,"unset")&&he.setcolor(e.textcolor),ce(e.textxalign,"unset")&&ce(e.textyalign,"unset")&&e.alttext.length==0){e.s=0,e.fn="";for(var zt=e.txt,Ct=0,Yt=zt.length;Ct<Yt;Ct++){W(h(zt,Ct));var jt=n[t-1],an=n[t-2];if(jt!=e.s||qe(an,e.fn)){var rn=n[t-1];rn<=0&&(t-=5,n[t++]="bwipp.renlinearFontTooSmall#33178",n[t++]="The font size is too small",Z());var Kt=n[--t],Jt=n[--t];e.s=Kt,e.fn=Jt,he.selectfont(Jt,Kt)}else t-=2;var Zt=n[--t];he.moveto(n[--t],Zt),he.show(n[--t],0,0)}}else{if(e.alttext.length==0){n[t++]=1/0;for(var Qt=e.txt,mn=0,cn=Qt.length;mn<cn;mn++)Ie(h(h(Qt,mn),0));e.txt=o(),e.tstr=fe(e.txt.length);for(var dn=0,Ht=e.txt.length-1;dn<=Ht;dn+=1)C(e.tstr,dn,h(e.txt,dn))}else{e.tstr=e.alttext;for(var Bt=0,Y=e.alttext.length-1;Bt<=Y;Bt+=1){if(n[t++]=Bt,sn(e.alttextsubspace,O(e.alttext,Bt,1)),n[--t]){t--,t--;var le=n[t-2];C(e.alttext,le,32)}t-=2}}if(e.alttext.length!=0&&e.alttextsplit.length!=0){for(e.alttextsplit.length!=1&&(n[t++]="bwipp.alttextsplitBad#33206",n[t++]="The alttextsplit option must be a single character",Z()),n[t++]=1/0,n[t++]=e.tstr;sn(n[--t],e.alttextsplit),n[--t];){var se=n[--t];n[t-1]=se;var ge=n[--t],ve=n[--t];n[t++]=ge,n[t++]=ve}e.textlines=o()}else e.textlines=o([e.tstr]);if(he.selectfont(e.textfont,e.textsize),e.tstr.length==0)n[t++]=0;else{he.save(),he.newpath(),he.moveto(0,0),he.charpath("0",!1);var _e=he.pathbbox();he.restore(),n[t++]=_e.ury}e.textascent=n[--t];var pe=e.textlines;n[t++]="textwidth",n[t++]=0;for(var Oe=0,de=pe.length;Oe<de;Oe++){var ke=he.stringwidth(h(pe,Oe)),Ee=n[--t],De=ke.w;if(Ee<ke.w){var xe=De;De=Ee,Ee=xe}n[t++]=Ee}var Ne=n[--t];e[n[--t]]=R(Ne+(e.tstr.length-1)*e.textgaps);var je=e.textlines.length;if(e.textheight=R(je*e.textascent+(je-1)*e.textlinegaps),ce(e.textxalign,"unset")&&(e.textxalign="center"),ce(e.textyalign,"unset")&&(e.textyalign="below"),ce(e.textxalign,"justify"))if(qe(e.textdirection,"forward")&&qe(e.textdirection,"backward")&&(n[t++]="bwipp.textxjustify#33243",n[t++]="textxalign=justify requires forward or backward text",Z()),e.textwidth<e.pixx){e.textgaps=R(e.pixx-e.textwidth)/(e.tstr.length-1),n[t++]="textxalign",ce(e.textdirection,"forward")?n[t++]="left":n[t++]="right";var Se=n[--t];e[n[--t]]=Se}else e.textgaps=0,e.textxalign="center";if(ce(e.textyalign,"justify"))if(qe(e.textdirection,"upward")&&qe(e.textdirection,"downward")&&(n[t++]="bwipp.textyjustify#33256",n[t++]="textyalign=justify requires upward or downward text",Z()),e.textwidth<e.pixy){e.textgaps=R(e.pixy-e.textwidth)/(e.tstr.length-1),n[t++]="textyalign",ce(e.textdirection,"upward")?n[t++]="bottom":n[t++]="top";var ze=n[--t];e[n[--t]]=ze}else e.textgaps=0,e.textyalign="center";n[t++]=e.textxalign,n[t++]=e.textyalign,n[t++]=e.textdirection,n[t++]=e.textwidth,n[t++]=e.textheight,e.positiontext();var Pe=n[--t];he.moveto(n[--t],Pe),he.rmoveto(e.textxoffset,e.textyoffset),he.save();var Be=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);he.rotate(h(Be,e.textdirection));var at=he.currpos();he.translate(at.x,at.y);for(var Ze=0,ft=e.textlines.length-1;Ze<=ft;Ze+=1){e.i=Ze,he.moveto(0,0+R(e.textascent+e.textlinegaps)*e.i);var Ve=e.textlines;he.show(h(Ve,Ve.length-e.i-1),e.textgaps,0)}he.restore()}if(e.guardwhitespace&&(he.selectfont("OCR-B",e.guardheight*2),e.guardleftpos!=0&&(he.moveto(-e.guardleftpos-2,R(e.guardleftypos-e.guardheight/2-1.25)),he.show("<",0,0)),e.guardrightpos!=0&&(he.moveto(R(e.guardrightpos+e.pixx-e.guardwidth)+1,R(e.guardrightypos-e.guardheight/2-1.25)),he.show(">",0,0))),e.extratext.length!=0){for(var $e=0,Me=e.extratext.length-1;$e<=Me;$e+=1){if(n[t++]=$e,sn(e.extratextsubspace,O(e.extratext,$e,1)),n[--t]){t--,t--;var it=n[t-2];C(e.extratext,it,32)}t-=2}if(e.extratextsplit.length!=0){for(e.extratextsplit.length!=1&&(n[t++]="bwipp.extratextsplitBad#33309",n[t++]="The extratextsplit option must be a single character",Z()),n[t++]=1/0,n[t++]=e.extratext;sn(n[--t],e.extratextsplit),n[--t];){var st=n[--t];n[t-1]=st;var mt=n[--t],Tt=n[--t];n[t++]=mt,n[t++]=Tt}e.textlines=o()}else e.textlines=o([e.extratext]);qe(e.extratextcolor,"unset")&&he.setcolor(e.extratextcolor),he.selectfont(e.extratextfont,e.extratextsize),he.save(),he.newpath(),he.moveto(0,0),he.charpath("0",!1);var Ot=he.pathbbox();he.restore(),e.textascent=Ot.ury;var Et=e.textlines;n[t++]="textwidth",n[t++]=0;for(var Dt=0,wt=Et.length;Dt<wt;Dt++){var en=he.stringwidth(h(Et,Dt)),gt=n[--t],un=en.w;if(gt<en.w){var xe=un;un=gt,gt=xe}n[t++]=gt}var Vt=n[--t];e[n[--t]]=R(Vt+(e.extratext.length-1)*e.extratextgaps);var fn=e.textlines.length;if(e.textheight=R(fn*e.textascent+(fn-1)*e.extratextlinegaps),ce(e.extratextxalign,"justify"))if(qe(e.extratextdirection,"forward")&&qe(e.extratextdirection,"backward")&&(n[t++]="bwipp.extratextxjustify#33340",n[t++]="extratextxalign=justify requires forward or backward text",Z()),e.textwidth<e.pixx){e.extratextgaps=R(e.pixx-e.textwidth)/(e.extratext.length-1),n[t++]="extratextxalign",ce(e.extratextdirection,"forward")?n[t++]="left":n[t++]="right";var $n=n[--t];e[n[--t]]=$n}else e.extratextgaps=0,e.extratextxalign="center";if(ce(e.extratextyalign,"justify"))if(qe(e.extratextdirection,"upward")&&qe(e.extratextdirection,"downward")&&(n[t++]="bwipp.extratextyjustify#33353",n[t++]="extratextyalign=justify requires upward or downward text",Z()),e.textwidth<e.pixy){e.extratextgaps=R(e.pixy-e.textwidth)/(e.extratext.length-1),n[t++]="extratextyalign",ce(e.extratextdirection,"upward")?n[t++]="bottom":n[t++]="top";var ei=n[--t];e[n[--t]]=ei}else e.extratextgaps=0,e.extratextyalign="center";n[t++]=e.extratextxalign,n[t++]=e.extratextyalign,n[t++]=e.extratextdirection,n[t++]=e.textwidth,n[t++]=e.textheight,e.positiontext();var Dn=n[--t];he.moveto(n[--t],Dn),he.rmoveto(e.extratextxoffset,e.extratextyoffset),he.save();var ai=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);he.rotate(h(ai,e.extratextdirection));var zn=he.currpos();he.translate(zn.x,zn.y);for(var mi=0,Fn=e.textlines.length-1;mi<=Fn;mi+=1){e.i=mi,he.moveto(0,0+R(e.textascent+e.extratextlinegaps)*e.i);var Hn=e.textlines;he.show(h(Hn,Hn.length-e.i-1),e.extratextgaps,0)}he.restore()}he.restore(),e=r}function Lt(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(n[--t]);return}var r=e;if(e=Object.assign({},e),e.width=1,e.height=1,e.barcolor="unset",e.bordercolor="unset",e.colormap="unset",e.dotty=!1,e.inkspread=0,e.inkspreadh=null,e.inkspreadv=null,e.txt=o([]),e.includetext=!1,e.textcolor="unset",e.textxalign="unset",e.textyalign="unset",e.textfont="OCR-B",e.textdirection="forward",e.textsize=10,e.textxoffset=0,e.textyoffset=0,e.textgaps=0,e.textlinegaps=1.2,e.alttext="",e.alttextsplit="",e.alttextsubspace="",e.extratext="",e.extratextsubspace="",e.extratextsplit="",e.extratextlinegaps=1.2,e.extratextcolor="unset",e.extratextxalign="left",e.extratextyalign="above",e.extratextfont="OCR-B",e.extratextdirection="forward",e.extratextsize=10,e.extratextxoffset=0,e.extratextyoffset=0,e.extratextgaps=0,e.showborder=!1,e.borderleft=0,e.borderright=0,e.bordertop=0,e.borderbottom=0,e.borderwidth=.25,Ie(n[--t],function(){var vn=n[--t];e[n[--t]]=vn}),n[t++]=e.opt,delete e.opt,n[t++]=e,ht(),t--,e.inkspreadh==null&&(e.inkspreadh=e.inkspread),e.inkspreadv==null&&(e.inkspreadv=e.inkspread),qe(e.textxalign,"unset")){n[t++]=1/0;var i="offleft",a="left",s="center",l="right",c="offright";n[t++]=i,n[t++]=i,n[t++]=a,n[t++]=a,n[t++]=s,n[t++]=s,n[t++]=l,n[t++]=l,n[t++]=c,n[t++]=c;var d=h(rt(),e.textxalign)!==void 0;d||(n[t++]="bwipp.renmatrixBadTextxalign#33458",n[t++]="textxalign must be offleft, left, center, right or offright",Z())}if(qe(e.textyalign,"unset")){n[t++]=1/0;var f="above",m="top",g="center",v="bottom",y="below";n[t++]=f,n[t++]=f,n[t++]=m,n[t++]=m,n[t++]=g,n[t++]=g,n[t++]=v,n[t++]=v,n[t++]=y,n[t++]=y;var A=h(rt(),e.textyalign)!==void 0;A||(n[t++]="bwipp.renmatrixBadTextyalign#33464",n[t++]="textyalign must be above, top, center, bottom or below",Z())}n[t++]=1/0;var w="forward",k="backward",E="upward",I="downward";n[t++]=w,n[t++]=w,n[t++]=k,n[t++]=k,n[t++]=E,n[t++]=E,n[t++]=I,n[t++]=I;var T=h(rt(),e.textdirection)!==void 0;T||(n[t++]="bwipp.renmatrixBadTextdirection#33469",n[t++]="textdirection must be forward, backward, upward or downward",Z()),(e.textsize<=0||e.textsize>=25)&&(n[t++]="bwipp.renmatrixBadTextsize#33473",n[t++]="textsize must be greater than zero and less that 25",Z()),n[t++]=1/0;var N="offleft",j="left",B="center",U="right",F="offright";n[t++]=N,n[t++]=N,n[t++]=j,n[t++]=j,n[t++]=B,n[t++]=B,n[t++]=U,n[t++]=U,n[t++]=F,n[t++]=F;var P=h(rt(),e.extratextxalign)!==void 0;P||(n[t++]="bwipp.renmatrixBadExtratextxalign#33477",n[t++]="extratextxalign must be offleft, left, center, right or offright",Z()),n[t++]=1/0;var z="above",V="top",L="center",Q="bottom",q="below";n[t++]=z,n[t++]=z,n[t++]=V,n[t++]=V,n[t++]=L,n[t++]=L,n[t++]=Q,n[t++]=Q,n[t++]=q,n[t++]=q;var ee=h(rt(),e.extratextyalign)!==void 0;ee||(n[t++]="bwipp.renmatrixBadExtratextyalign#33481",n[t++]="extratextyalign must be above, top, center, bottom or below",Z()),n[t++]=1/0;var X="forward",ae="backward",K="upward",ie="downward";n[t++]=X,n[t++]=X,n[t++]=ae,n[t++]=ae,n[t++]=K,n[t++]=K,n[t++]=ie,n[t++]=ie;var ne=h(rt(),e.extratextdirection)!==void 0;ne||(n[t++]="bwipp.renmatrixBadExtratextdirection#33485",n[t++]="extratextdirection must be forward, backward, upward or downward",Z()),(e.extratextsize<=0||e.extratextsize>=25)&&(n[t++]="bwipp.renmatrixBadTextsize#33489",n[t++]="extratextsize must be greater than zero and less that 25",Z()),e.xyget=function(){var vn=n[--t],kn=h(e.pixs,R(n[--t]+vn*e.pixx));n[t++]=kn},e.drawlayerdots=function(){e.pixsorig=e.pixs,e.pixs=n[--t],he.newpath();for(var vn=0,kn=e.pixs.length-1;vn<=kn;vn+=1)e.x=vn%e.pixx,e.y=~~(vn/e.pixx),n[t++]=e.x,n[t++]=e.y,e.xyget(),n[--t]==1&&(he.moveto(R(e.x+.5),R(e.pixy-e.y-.5)),he.arc(R(e.x+.5),R(e.pixy-e.y-.5),R(.5-e.inkspread),0,360,1));he.fill(),e.pixs=e.pixsorig},he.save();var J=he.currpos();if(he.translate(J.x,J.y),e.inkspread=e.inkspread/2,e.inkspreadh=e.inkspreadh/2,e.inkspreadv=e.inkspreadv/2,he.scale(e.width/e.pixx*72,e.height/e.pixy*72),e.showborder?(e.tl=o([-R(e.borderleft+e.borderwidth/2),R(e.pixy+e.bordertop+e.borderwidth/2)]),e.tr=o([R(e.pixx+e.borderright+e.borderwidth/2),R(e.pixy+e.bordertop+e.borderwidth/2)]),e.bl=o([-R(e.borderleft+e.borderwidth/2),-R(e.borderbottom+e.borderwidth/2)]),e.br=o([R(e.pixx+e.borderright+e.borderwidth/2),-R(e.borderbottom+e.borderwidth/2)])):(e.tl=o([R(-e.borderleft+e.inkspread),R(e.pixy+e.bordertop-e.inkspread)]),e.tr=o([R(e.pixx+e.borderright-e.inkspread),R(e.pixy+e.bordertop-e.inkspread)]),e.bl=o([R(-e.borderleft+e.inkspread),R(-e.borderbottom+e.inkspread)]),e.br=o([R(e.pixx+e.borderright-e.inkspread),R(-e.borderbottom+e.inkspread)])),e.showborder){he.save(),he.newpath(),W(e.bl);var te=n[--t];he.moveto(n[--t],te);for(var $=o([e.br,e.tr,e.tl]),oe=0,we=$.length;oe<we;oe++){W(h($,oe));var be=n[--t];he.lineto(n[--t],be)}he.closepath(),qe(e.bordercolor,"unset")&&he.setcolor(e.bordercolor),he.setlinewidth(R(e.borderwidth-e.inkspread*2)),he.stroke(),he.restore()}if(ce(e.colormap,"unset")){var Te=new Map([[1,e.barcolor]]);e.colormap=Te}for(var ye=e.colormap,tt=ye.size,Qe=ye.keys(),Ge=0;Ge<tt;Ge++){var Xe=Qe.next().value,Je=ye.get(Xe);n[t++]=Xe,n[t++]=Je,qe(Je,"unset")?he.setcolor(n[--t]):t--,e.key=n[--t],n[t++]=1/0;for(var dt=e.pixs,vt=0,_t=dt.length;vt<_t;vt++){var xt=ce(h(dt,vt),e.key)?1:0;n[t++]=xt}var bt=o();n[t++]=bt,e.dotty?e.drawlayerdots():he.drawlayer(n[--t],e.pixx,e.pixy,e.inkspreadh,e.inkspreadv)}var kt=new Map([["offleft",function(){n[t++]=R(-e.tw-e.nudge)}],["below",function(){n[t++]=R(-e.th-e.nudge)}],["left",function(){n[t++]=0}],["bottom",function(){n[t++]=0}],["xcenter",function(){n[t++]=R(e.pixx-e.tw)/2}],["ycenter",function(){n[t++]=R(e.pixy-e.th)/2}],["right",function(){n[t++]=R(e.pixx-e.tw)}],["top",function(){n[t++]=R(e.pixy-e.th)}],["offright",function(){n[t++]=e.pixx+e.nudge}],["above",function(){n[t++]=e.pixy+e.nudge}]]),Pt=new Map([["offleft",function(){n[t++]=0-e.nudge}],["below",function(){n[t++]=0-e.nudge}],["left",function(){n[t++]=e.tw}],["bottom",function(){n[t++]=e.th}],["xcenter",function(){n[t++]=R(e.pixx+e.tw)/2}],["ycenter",function(){n[t++]=R(e.pixy+e.th)/2}],["right",function(){n[t++]=e.pixx}],["top",function(){n[t++]=e.pixy}],["offright",function(){n[t++]=R(e.pixx+e.tw+e.nudge)}],["above",function(){n[t++]=R(e.pixy+e.th+e.nudge)}]]),Rt=new Map([["offleft",function(){n[t++]=0-e.nudge}],["below",function(){n[t++]=R(-e.tw-e.nudge)}],["left",function(){n[t++]=e.th}],["bottom",function(){n[t++]=0}],["xcenter",function(){n[t++]=R(e.pixx+e.th)/2}],["ycenter",function(){n[t++]=R(e.pixy-e.tw)/2}],["right",function(){n[t++]=e.pixx}],["top",function(){n[t++]=R(e.pixy-e.tw)}],["offright",function(){n[t++]=R(e.pixx+e.th+e.nudge)}],["above",function(){n[t++]=e.pixy+e.nudge}]]),Wt=new Map([["offleft",function(){n[t++]=R(-e.th-e.nudge)}],["below",function(){n[t++]=0-e.nudge}],["left",function(){n[t++]=0}],["bottom",function(){n[t++]=e.tw}],["xcenter",function(){n[t++]=R(e.pixx-e.th)/2}],["ycenter",function(){n[t++]=R(e.pixy+e.tw)/2}],["right",function(){n[t++]=R(e.pixx-e.th)}],["top",function(){n[t++]=e.pixy}],["offright",function(){n[t++]=e.pixx+e.nudge}],["above",function(){n[t++]=R(e.pixy+e.tw+e.nudge)}]]),zt=new Map([["forward",kt],["backward",Pt],["upward",Rt],["downward",Wt]]);if(e.positions=zt,e.positiontext=function(){e.th=n[--t],e.tw=n[--t],e.nudge=1;var vn=h(e.positions,n[--t]);n[t++]=vn,n[t++]=vn,oa(4,-1);var kn=n[t-1];ce(kn,"center")&&(n[t-1]="xcenter");var Ai=n[--t];if(h(n[--t],Ai)()===!0)return!0;var Ei=n[--t],Ji=n[--t];n[t++]=Ei,n[t++]=Ji,oa(3,-1);var nn=n[t-1];ce(nn,"center")&&(n[t-1]="ycenter");var yn=n[--t];if(h(n[--t],yn)()===!0)return!0},e.includetext)if(qe(e.textcolor,"unset")&&he.setcolor(e.textcolor),ce(e.textxalign,"unset")&&ce(e.textyalign,"unset")&&e.alttext.length==0){e.s=0,e.fn="";for(var Ct=e.txt,Yt=0,jt=Ct.length;Yt<jt;Yt++){W(h(Ct,Yt));var an=n[t-1],rn=n[t-2];if(an!=e.s||qe(rn,e.fn)){var Kt=n[t-1];Kt<=0&&(t-=5,n[t++]="bwipp.renmatrixFontTooSmall#33793",n[t++]="The font size is too small",Z());var Jt=n[--t],Zt=n[--t];e.s=Jt,e.fn=Zt,he.selectfont(Zt,Jt)}else t-=2;var Qt=n[--t];he.moveto(n[--t],Qt),he.show(n[--t],0,0)}}else{if(e.alttext.length==0){n[t++]=1/0;for(var mn=e.txt,cn=0,dn=mn.length;cn<dn;cn++)Ie(h(h(mn,cn),0));e.txt=o(),e.tstr=fe(e.txt.length);for(var Ht=0,Bt=e.txt.length-1;Ht<=Bt;Ht+=1)C(e.tstr,Ht,h(e.txt,Ht))}else{e.tstr=e.alttext;for(var Y=0,le=e.alttext.length-1;Y<=le;Y+=1){if(n[t++]=Y,sn(e.alttextsubspace,O(e.alttext,Y,1)),n[--t]){t--,t--;var se=n[t-2];C(e.alttext,se,32)}t-=2}}if(e.alttext.length!=0&&e.alttextsplit.length!=0){for(e.alttextsplit.length!=1&&(n[t++]="bwipp.alttextsplitBad#33821",n[t++]="The alttextsplit option must be a single character",Z()),n[t++]=1/0,n[t++]=e.tstr;sn(n[--t],e.alttextsplit),n[--t];){var ge=n[--t];n[t-1]=ge;var ve=n[--t],_e=n[--t];n[t++]=ve,n[t++]=_e}e.textlines=o()}else e.textlines=o([e.tstr]);if(he.selectfont(e.textfont,e.textsize),e.tstr.length==0)n[t++]=0;else{he.save(),he.newpath(),he.moveto(0,0),he.charpath("0",!1);var pe=he.pathbbox();he.restore(),n[t++]=pe.ury}e.textascent=n[--t];var Oe=e.textlines;n[t++]="textwidth",n[t++]=0;for(var de=0,ke=Oe.length;de<ke;de++){var Ee=he.stringwidth(h(Oe,de)),De=n[--t],xe=Ee.w;if(De<Ee.w){var Ne=xe;xe=De,De=Ne}n[t++]=De}var je=n[--t];e[n[--t]]=R(je+(e.tstr.length-1)*e.textgaps);var Se=e.textlines.length;if(e.textheight=R(Se*e.textascent+(Se-1)*e.textlinegaps),ce(e.textxalign,"unset")&&(e.textxalign="center"),ce(e.textyalign,"unset")&&(e.textyalign="below"),ce(e.textxalign,"justify"))if(qe(e.textdirection,"forward")&&qe(e.textdirection,"backward")&&(n[t++]="bwipp.textxjustify#33858",n[t++]="textxalign=justify requires forward or backward text",Z()),e.textwidth<e.pixx){e.textgaps=R(e.pixx-e.textwidth)/(e.tstr.length-1),n[t++]="textxalign",ce(e.textdirection,"forward")?n[t++]="left":n[t++]="right";var ze=n[--t];e[n[--t]]=ze}else e.textgaps=0,e.textxalign="center";if(ce(e.textyalign,"justify"))if(qe(e.textdirection,"upward")&&qe(e.textdirection,"downward")&&(n[t++]="bwipp.textyjustify#33871",n[t++]="textyalign=justify requires upward or downward text",Z()),e.textwidth<e.pixy){e.textgaps=R(e.pixy-e.textwidth)/(e.tstr.length-1),n[t++]="textyalign",ce(e.textdirection,"upward")?n[t++]="bottom":n[t++]="top";var Pe=n[--t];e[n[--t]]=Pe}else e.textgaps=0,e.textyalign="center";n[t++]=e.textxalign,n[t++]=e.textyalign,n[t++]=e.textdirection,n[t++]=e.textwidth,n[t++]=e.textheight,e.positiontext();var Be=n[--t];he.moveto(n[--t],Be),he.rmoveto(e.textxoffset,e.textyoffset),he.save();var at=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);he.rotate(h(at,e.textdirection));var Ze=he.currpos();he.translate(Ze.x,Ze.y);for(var ft=0,Ve=e.textlines.length-1;ft<=Ve;ft+=1){e.i=ft,he.moveto(0,0+R(e.textascent+e.textlinegaps)*e.i);var $e=e.textlines;he.show(h($e,$e.length-e.i-1),e.textgaps,0)}he.restore()}if(e.extratext.length!=0){for(var Me=0,it=e.extratext.length-1;Me<=it;Me+=1){if(n[t++]=Me,sn(e.extratextsubspace,O(e.extratext,Me,1)),n[--t]){t--,t--;var st=n[t-2];C(e.extratext,st,32)}t-=2}if(e.extratextsplit.length!=0){for(e.extratextsplit.length!=1&&(n[t++]="bwipp.extratextsplitBad#33911",n[t++]="The extratextsplit option must be a single character",Z()),n[t++]=1/0,n[t++]=e.extratext;sn(n[--t],e.extratextsplit),n[--t];){var mt=n[--t];n[t-1]=mt;var Tt=n[--t],Ot=n[--t];n[t++]=Tt,n[t++]=Ot}e.textlines=o()}else e.textlines=o([e.extratext]);qe(e.extratextcolor,"unset")&&he.setcolor(e.extratextcolor),he.selectfont(e.extratextfont,e.extratextsize),he.save(),he.newpath(),he.moveto(0,0),he.charpath("0",!1);var Et=he.pathbbox();he.restore(),e.textascent=Et.ury;var Dt=e.textlines;n[t++]="textwidth",n[t++]=0;for(var wt=0,en=Dt.length;wt<en;wt++){var gt=he.stringwidth(h(Dt,wt)),un=n[--t],Vt=gt.w;if(un<gt.w){var Ne=Vt;Vt=un,un=Ne}n[t++]=un}var fn=n[--t];e[n[--t]]=R(fn+(e.extratext.length-1)*e.extratextgaps);var $n=e.textlines.length;if(e.textheight=R($n*e.textascent+($n-1)*e.extratextlinegaps),ce(e.extratextxalign,"justify"))if(qe(e.extratextdirection,"forward")&&qe(e.extratextdirection,"backward")&&(n[t++]="bwipp.extratextxjustify#33942",n[t++]="extratextxalign=justify requires forward or backward text",Z()),e.textwidth<e.pixx){e.extratextgaps=R(e.pixx-e.textwidth)/(e.extratext.length-1),n[t++]="extratextxalign",ce(e.extratextdirection,"forward")?n[t++]="left":n[t++]="right";var ei=n[--t];e[n[--t]]=ei}else e.extratextgaps=0,e.extratextxalign="center";if(ce(e.extratextyalign,"justify"))if(qe(e.extratextdirection,"upward")&&qe(e.extratextdirection,"downward")&&(n[t++]="bwipp.extratextyjustify#33955",n[t++]="extratextyalign=justify requires upward or downward text",Z()),e.textwidth<e.pixy){e.extratextgaps=R(e.pixy-e.textwidth)/(e.extratext.length-1),n[t++]="extratextyalign",ce(e.extratextdirection,"upward")?n[t++]="bottom":n[t++]="top";var Dn=n[--t];e[n[--t]]=Dn}else e.extratextgaps=0,e.extratextyalign="center";n[t++]=e.extratextxalign,n[t++]=e.extratextyalign,n[t++]=e.extratextdirection,n[t++]=e.textwidth,n[t++]=e.textheight,e.positiontext();var ai=n[--t];he.moveto(n[--t],ai),he.rmoveto(e.extratextxoffset,e.extratextyoffset),he.save();var zn=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);he.rotate(h(zn,e.extratextdirection));var mi=he.currpos();he.translate(mi.x,mi.y);for(var Fn=0,Hn=e.textlines.length-1;Fn<=Hn;Fn+=1){e.i=Fn,he.moveto(0,0+R(e.textascent+e.extratextlinegaps)*e.i);var _n=e.textlines;he.show(h(_n,_n.length-e.i-1),e.extratextgaps,0)}he.restore()}he.restore(),e=r}function iM(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(n[--t]);return}var r=e;if(e=Object.assign({},e),e.barcolor="unset",e.bordercolor="unset",e.inkspread=0,e.showborder=!1,e.borderleft=0,e.borderright=0,e.bordertop=0,e.borderbottom=0,e.borderwidth=.25,Ie(n[--t],function(){var d=n[--t];e[n[--t]]=d}),n[t++]=e.opt,delete e.opt,n[t++]=e,ht(),t--,he.save(),e.showborder?(e.tl=o([-R(e.borderleft+e.borderwidth/2),R(29+e.bordertop+e.borderwidth/2)]),e.tr=o([R(30+e.borderright+e.borderwidth/2),R(29+e.bordertop+e.borderwidth/2)]),e.bl=o([-R(e.borderleft+e.borderwidth/2),-R(e.borderbottom+e.borderwidth/2)]),e.br=o([R(30+e.borderright+e.borderwidth/2),-R(e.borderbottom+e.borderwidth/2)])):(e.tl=o([-e.borderleft+e.inkspread,29+e.bordertop-e.inkspread]),e.tr=o([30+e.borderright-e.inkspread,29+e.bordertop-e.inkspread]),e.bl=o([-e.borderleft+e.inkspread,-e.borderbottom+e.inkspread]),e.br=o([30+e.borderright-e.inkspread,-e.borderbottom+e.inkspread])),e.showborder){he.save(),he.newpath(),W(e.bl);var i=n[--t];he.moveto(n[--t],i);for(var a=o([e.br,e.tr,e.tl]),s=0,l=a.length;s<l;s++){W(h(a,s));var c=n[--t];he.lineto(n[--t],c)}he.closepath(),qe(e.bordercolor,"unset")&&he.setcolor(e.bordercolor),he.setlinewidth(R(e.borderwidth-e.inkspread*2)),he.stroke(),he.restore()}qe(e.barcolor,"unset")&&he.setcolor(e.barcolor),he.showmaxicode(e.pixs),he.restore(),e=r}function n9(r,i,a,s,l){if(typeof a!="string")throw new Error("bwipp.typeError: barcode text not a string ("+a+")");if(s=s||{},typeof s=="string"){var c=s.split(" ");s={};for(var d=0;d<c.length;d++)if(c[d]){var f=c[d].indexOf("=");f==-1?c[d][0]=="!"?s[c[d].substr(1)]=!1:s[c[d]]=!0:s[c[d].substr(0,f)]=c[d].substr(f+1)}}else if(typeof s!="object"||s.constructor!==Object)throw new Error("bwipp.typeError: options not an object");if(s.binarytext){if(/[\u0100-\uffff]/.test(a))throw new Error("bwip-js: 16-bit chars not allowed with binarytext")}else/[\u0080-\uffff]/.test(a)&&(a=unescape(encodeURIComponent(a)));var m=new Map;for(var g in s)s.hasOwnProperty(g)&&m.set(g,s[g]);return he=r,n=[a,m],t=2,e={bwipjs_rawstack:s.dontdraw||l?[]:!1},i(),e.bwipjs_rawstack?e.bwipjs_rawstack:!0}function kx(r){if(!r)throw new Error("bwipp.undefinedEncoder: bcid is not defined");switch(r.replace(/-/g,"_")){case"auspost":return nT;case"azteccode":return Sx;case"azteccodecompact":return ST;case"aztecrune":return kT;case"bc412":return XN;case"channelcode":return nM;case"codablockf":return e9;case"code11":return WN;case"code128":return Hm;case"code16k":return cT;case"code2of5":return f2;case"code32":return BN;case"code39":return qm;case"code39ext":return jN;case"code49":return dT;case"code93":return QS;case"code93ext":return FN;case"codeone":return CT;case"coop2of5":return QN;case"daft":return hT;case"databarexpanded":return dw;case"databarexpandedcomposite":return FT;case"databarexpandedstacked":return uw;case"databarexpandedstackedcomposite":return UT;case"databarlimited":return KS;case"databarlimitedcomposite":return PT;case"databaromni":return Gm;case"databaromnicomposite":return OT;case"databarstacked":return $S;case"databarstackedcomposite":return DT;case"databarstackedomni":return WS;case"databarstackedomnicomposite":return jT;case"databartruncated":return XS;case"databartruncatedcomposite":return BT;case"datalogic2of5":return $N;case"datamatrix":return Dc;case"datamatrixrectangular":return gT;case"datamatrixrectangularextension":return vT;case"dotcode":return t9;case"ean13":return zm;case"ean13composite":return NT;case"ean14":return ON;case"ean2":return Lm;case"ean5":return Um;case"ean8":return cw;case"ean8composite":return TT;case"flattermarken":return uT;case"gs1_128":return Gy;case"gs1_128composite":return LT;case"gs1_cc":return Ga;case"gs1datamatrix":return zT;case"gs1datamatrixrectangular":return HT;case"gs1dldatamatrix":return qT;case"gs1dlqrcode":return VT;case"gs1dotcode":return YT;case"gs1northamericancoupon":return HN;case"gs1qrcode":return GT;case"hanxin":return ET;case"hibcazteccode":return tM;case"hibccodablockf":return eM;case"hibccode128":return $T;case"hibccode39":return QT;case"hibcdatamatrix":return WT;case"hibcdatamatrixrectangular":return XT;case"hibcmicropdf417":return JT;case"hibcpdf417":return KT;case"hibcqrcode":return ZT;case"iata2of5":return VN;case"identcode":return LN;case"industrial2of5":return GN;case"interleaved2of5":return wx;case"isbn":return NN;case"ismn":return TN;case"issn":return MN;case"itf14":return UN;case"jabcode":return IT;case"japanpost":return rT;case"kix":return iT;case"leitcode":return zN;case"mailmark":return xT;case"mands":return RN;case"matrix2of5":return YN;case"maxicode":return AT;case"micropdf417":return z3;case"microqrcode":return yT;case"msi":return aT;case"onecode":return JN;case"pdf417":return Ax;case"pdf417compact":return mT;case"pharmacode":return qN;case"pharmacode2":return JS;case"planet":return eT;case"plessey":return sT;case"posicode":return lT;case"postnet":return ZN;case"pzn":return PN;case"qrcode":return sf;case"rationalizedCodabar":return KN;case"raw":return fT;case"rectangularmicroqrcode":return wT;case"royalmail":return tT;case"sscc18":return DN;case"swissqrcode":return bT;case"symbol":return pT;case"telepen":return ZS;case"telepennumeric":return oT;case"ultracode":return _T;case"upca":return VS;case"upcacomposite":return MT;case"upce":return YS;case"upcecomposite":return RT}throw new Error("bwipp.unknownEncoder: unknown encoder name: "+r)}var rM="2025-10-24";const aM="4.8.0 (2025-11-11)";function Oh(r){return r&&/HTMLCanvasElement|OffscreenCanvas/.test(Object.getPrototypeOf(r).constructor.name)}function sM(r,i){if(typeof i=="string"||Oh(i)){let a=r;r=i,i=a}return oM(kx(i.bcid),i,r)}function oM(r,i,a){if(typeof i=="string"){var s=document.getElementById(i)||document.querySelector(i);if(!Oh(s))throw new Error("bwipjs: `"+i+"`: not a canvas");i=a,a=Bp(s)}else if(Oh(i)){var s=i;i=a,a=Bp(s)}else if(typeof a=="string"){var s=document.getElementById(a)||document.querySelector(a);if(!Oh(s))throw new Error("bwipjs: `"+a+"`: not a canvas");a=Bp(s)}else if(Oh(a))a=Bp(a);else if(!a||typeof a!="object"||!a.init)throw new Error("bwipjs: not a canvas or drawing object");return fw(r,i,a)}function lM(r){return fw(kx(r.bcid),r,s9())}function i9(r){var i=r.scale||2,a=+r.scaleX||i,s=+r.scaleY||a;if(r.paddingleft=A(r.paddingleft,r.paddingwidth,r.padding,a),r.paddingright=A(r.paddingright,r.paddingwidth,r.padding,a),r.paddingtop=A(r.paddingtop,r.paddingheight,r.padding,s),r.paddingbottom=A(r.paddingbottom,r.paddingheight,r.padding,s),r.backgroundcolor){var l=""+r.backgroundcolor;if(/^[0-9a-fA-F]{8}$/.test(l)){var c=parseInt(l.substr(0,2),16)/255,d=parseInt(l.substr(2,2),16)/255,f=parseInt(l.substr(4,2),16)/255,m=parseInt(l.substr(6,2),16)/255,g=Math.floor((1-c)*(1-m)*255).toString(16),v=Math.floor((1-d)*(1-m)*255).toString(16),y=Math.floor((1-f)*(1-m)*255).toString(16);r.backgroundcolor=(g.length==1?"0":"")+g+(v.length==1?"0":"")+v+(y.length==1?"0":"")+y}else if(l[0]=="#"&&(l=l.substr(1)),/^[0-9a-fA-F]{6}$/.test(l))r.backgroundcolor=l;else if(/^[0-9a-fA-F]{3}$/.test(l))r.backgroundcolor=l[0]+l[0]+l[1]+l[1]+l[2]+l[2];else throw new Error("bwip-js: invalid backgroundcolor: "+r.backgroundcolor)}return r;function A(w,k,E,I){return w!=null?(w=w>>>0,w*I>>>0):k!=null?(k=k>>>0,k*I>>>0):(E=E>>>0,E*I>>>0||0)}}var cM={bcid:1,text:1,scale:1,scaleX:1,scaleY:1,rotate:1,padding:1,paddingwidth:1,paddingheight:1,paddingtop:1,paddingleft:1,paddingright:1,paddingbottom:1,backgroundcolor:1};function dM(r,i){return fw(kx(r.bcid),r,i)}function fw(r,i,a){var s=i.text;if(!s)throw new ReferenceError("bwip-js: bar code text not specified.");i9(i),a.setopts&&a.setopts(i);var l=i.scale||2,c=+i.scaleX||l,d=+i.scaleY||c;i.rotate;var f=new r9(a),m={};for(var g in i)cM[g]||(m[g]=i[g]);return m.alttext&&(m.includetext=!0),+m.height&&r!=JS&&(m.height=m.height/25.4||.5),+m.width&&(m.width=m.width/25.4||0),f.scale(c,d),n9(f,r,s,m),f.render()}function uM(r,i,a){arguments.length==1&&(a=r,r=a.bcid,i=a.text);var s=a9();s.setopts(a);for(var l=new r9(s),c=n9(l,kx(r),i,a,!0),d={pixs:1,pixx:1,pixy:1,sbs:1,bbs:1,bhs:1,width:1,height:1},f=0;f<c.length;f++){var m=c[f];if(m instanceof Map){for(var g={},v=m.keys(),y=m.size,A=0;A<y;A++){var w=v.next().value;if(d[w]){var k=m.get(w);k instanceof Array?g[w]=k.b.slice(k.o,k.o+k.length):g[w]=k}}c[f]=g}else c.splice(f--,1)}return c}var r9=(function(){var r=Math.floor,i=Math.round,a=Math.ceil,s=Math.min,l=Math.max;function c(d){if(this.constructor!==c)return new c(d);this.gstk=[],this.cmds=[],this.drawing=d,this.reset(),this.minx=this.miny=1/0,this.maxx=this.maxy=-1/0}return c.prototype.reset=function(){this.g_m0=1,this.g_m1=0,this.g_m2=0,this.g_m3=1,this.g_m4=0,this.g_m5=0,this.g_tsx=1,this.g_tsy=1,this.g_rot=0,this.g_posx=0,this.g_posy=0,this.g_penw=1,this.g_path=[],this.g_font=null,this.g_rgb=[0,0,0],this.g_clip=!1},c.prototype.save=function(){var d={};for(var f in this)f.indexOf("g_")==0&&(d[f]=m(this[f]));this.gstk.push(d);function m(g){if(g instanceof Array){for(var v=[],y=0;y<g.length;y++)v[y]=m(g[y]);return v}if(g instanceof Object){var v={};for(var A in g)v[A]=m(g[A]);return v}return g}},c.prototype.restore=function(){if(!this.gstk.length)throw new Error("grestore: stack underflow");var d=this.gstk.pop(),f=this;this.g_clip&&!d.g_clip&&this.cmds.push(function(){f.drawing.unclip()});for(var m in d)this[m]=d[m]},c.prototype.currpos=function(){return{x:(this.g_posx-this.g_m4)/this.g_tsx,y:(this.g_posy-this.g_m5)/this.g_tsy}},c.prototype.currfont=function(){return this.g_font},c.prototype.rotate=function(d){this.g_rot+=d;var f=i(Math.cos(d*Math.PI/180)),m=i(Math.sin(d*Math.PI/180)),g=this.g_m0*f+this.g_m2*m,v=this.g_m1*f+this.g_m3*m,y=this.g_m0*-m+this.g_m2*f,A=this.g_m1*-m+this.g_m3*f;this.g_m0=g,this.g_m1=v,this.g_m2=y,this.g_m3=A},c.prototype.translate=function(d,f){this.g_m4+=this.g_tsx*d,this.g_m5+=this.g_tsy*f},c.prototype.scale=function(d,f){var m=this.g_tsx,g=this.g_tsy;this.g_tsx*=d,this.g_tsy*=f;var v=this.drawing.scale(this.g_tsx,this.g_tsy);v&&v[0]&&v[1]&&(this.g_tsx=v[0],this.g_tsy=v[1]),this.g_m0*=this.g_tsx/m,this.g_m1*=this.g_tsx/m,this.g_m2*=this.g_tsy/g,this.g_m3*=this.g_tsy/g},c.prototype.setlinewidth=function(d){this.g_penw=d},c.prototype.selectfont=function(d,f){this.g_font={FontName:this.jsstring(d),FontSize:+f}},c.prototype.getfont=function(){return this.g_font.FontName},c.prototype.jsstring=function(d){return d instanceof Uint8Array?String.fromCharCode.apply(null,d):""+d},c.prototype.setcolor=function(d){if(d instanceof Uint8Array&&(d=this.jsstring(d)),!!d){if(!/^(?:#?[0-9a-fA-F]{3}(?:[0-9a-fA-F]{3})?|[0-9a-fA-F]{8})$/.test(d))throw new Error("bwip-js: invalid color: "+d);if(d[0]=="#"&&(d=d.substr(1)),d.length==3){var f=parseInt(d[0],16),m=parseInt(d[1],16),g=parseInt(d[2],16);this.g_rgb=[f<<4|f,m<<4|m,g<<4|g]}else if(d.length==6){var f=parseInt(d.substr(0,2),16),m=parseInt(d.substr(2,2),16),g=parseInt(d.substr(4,2),16);this.g_rgb=[f,m,g]}else{var v=parseInt(d.substr(0,2),16)/255,y=parseInt(d.substr(2,2),16)/255,A=parseInt(d.substr(4,2),16)/255,w=parseInt(d.substr(6,2),16)/255,f=i((1-v)*(1-w)*255),m=i((1-y)*(1-w)*255),g=i((1-A)*(1-w)*255);this.g_rgb=[f,m,g]}}},c.prototype.setrgbcolor=function(d,f,m){this.g_rgb=[d,f,m]},c.prototype.getRGB=function(){var d=this.g_rgb[0].toString(16),f=this.g_rgb[1].toString(16),m=this.g_rgb[2].toString(16);return"00".substr(d.length)+d+"00".substr(f.length)+f+"00".substr(m.length)+m},c.prototype.newpath=function(){this.g_path=[]},c.prototype.closepath=function(){var d=this.g_path,f=d.length;if(f){for(var m=f-1;m>=0&&d[m].op=="l";m--);if(m++,m<f-1){for(var g=[],v=1/0,y=1/0,A=-1/0,w=-1/0,k=m;k<f;k++){var E=d[k];g.push([E.x0,E.y0]),v>E.x0&&(v=E.x0),A<E.x0&&(A=E.x0),y>E.y0&&(y=E.y0),w<E.y0&&(w=E.y0)}var E=d[f-1],I=d[m];(E.x1!=I.x0||E.y1!=I.y0)&&(g.push([E.x1,E.y1]),v>E.x1&&(v=E.x1),A<E.x1&&(A=E.x1),y>E.y1&&(y=E.y1),w<E.y1&&(w=E.y1)),d.splice(m,f-m,{op:"p",x0:v,y0:y,x1:A,y1:w,poly:g})}else d.push({op:"c"})}},c.prototype.moveto=function(d,f){this.g_posx=this.g_m0*d+this.g_m2*f+this.g_m4,this.g_posy=this.g_m1*d+this.g_m3*f+this.g_m5},c.prototype.rmoveto=function(d,f){this.g_posx+=this.g_m0*d+this.g_m2*f+this.g_m4,this.g_posy+=this.g_m1*d+this.g_m3*f+this.g_m5},c.prototype.lineto=function(d,f){var m=i(this.g_posx),g=i(this.g_posy);this.g_posx=this.g_m0*d+this.g_m2*f+this.g_m4,this.g_posy=this.g_m1*d+this.g_m3*f+this.g_m5;var v=i(this.g_posx),y=i(this.g_posy);this.g_path.push({op:"l",x0:m,y0:g,x1:v,y1:y})},c.prototype.rlineto=function(d,f){var m=i(this.g_posx),g=i(this.g_posy);this.g_posx+=this.g_m0*d+this.g_m2*f+this.g_m4,this.g_posy+=this.g_m1*d+this.g_m3*f+this.g_m5;var v=i(this.g_posx),y=i(this.g_posy);this.g_path.push({op:"l",x0:m,y0:g,x1:v,y1:y})},c.prototype.arc=function(d,f,m,g,v,y){if(g!=v){if(g!=0&&g!=360||v!=0&&v!=360)throw new Error("arc: not a full circle ("+g+","+v+")");var A=this.g_m0*d+this.g_m2*f+this.g_m4,w=this.g_m1*d+this.g_m3*f+this.g_m5,k=m*this.g_tsx,E=m*this.g_tsy;this.g_path.push({op:"e",x0:A-k,y0:w-E,x1:A+k,y1:w+E,x:A,y:w,rx:k,ry:E,sa:g,ea:v,ccw:y})}},c.prototype.stringwidth=function(d){var f=this.g_tsx,m=this.g_tsy,g=+this.g_font.FontSize||10;d=this.toUCS2(this.jsstring(d));var v=this.drawing.measure(d,this.g_font.FontName,g*f,g*m);return{w:v.width/f,h:(v.ascent+v.descent)/m,a:v.ascent/m,d:v.descent/m}},c.prototype.charpath=function(d,f){var m=this.stringwidth(d);this.rlineto(0,m.a),this.rlineto(m.w,0),this.rlineto(0,-m.h)},c.prototype.pathbbox=function(){if(!this.g_path.length)throw new Error("pathbbox: --nocurrentpoint--");for(var d=this.g_path,f=1/0,m=1/0,g=-1/0,v=-1/0,y=0;y<d.length;y++){var A=d[y];A.op!="c"&&(A.x0<A.x1?(f>A.x0&&(f=A.x0),g<A.x1&&(g=A.x1)):(f>A.x1&&(f=A.x1),g<A.x0&&(g=A.x0)),A.y0<A.y1?(m>A.y0&&(m=A.y0),v<A.y1&&(v=A.y1)):(m>A.y1&&(m=A.y1),v<A.y0&&(v=A.y0)))}var w={llx:(f-this.g_m4)/this.g_tsx,lly:(m-this.g_m5)/this.g_tsy,urx:(g-this.g_m4)/this.g_tsx,ury:(v-this.g_m5)/this.g_tsy};return w},c.prototype.transform=function(d){for(var f=this.minx,m=this.maxy,g=0;g<d.length;g++){var v=d[g];v[0]=v[0]-f,v[1]=m-v[1]}},c.prototype.stroke=function(){var d=this.g_tsx,f=this.g_tsy,m=this.g_path,g=this.getRGB();this.g_path=[];for(var v=r(this.g_penw*d+.66),y=r(this.g_penw*f+.66),A=0;A<m.length;A++){var w=m[A];if(w.op=="l"){if(w.x0!=w.x1&&w.y0!=w.y1)throw new Error("stroke: --not-orthogonal--");var k=w.x0,E=w.y0,I=w.x1,T=w.y1,N=v/2,j=y/2;if(k>I){var B=k;k=I,I=B}if(E>T){var B=E;E=T,T=B}k==I?this.bbox(k-N,E,k+v-N-1,T):this.bbox(k,E-y+j+1,I,T+j)}else if(w.op=="p"){var U=1/0,F=1/0,P=-1/0,z=-1/0,V=w.poly;if(V.length!=4)throw new Error("stroke: --not-a-rect--");for(var A=0,L=V.length-1;A<V.length;L=A++){var Q=V[L][0],q=V[L][1],ee=V[A][0],X=V[A][1];if(ee!=Q&&X!=q)throw new Error("stroke: --not-orthogonal--");ee<U&&(U=ee),ee>P&&(P=ee),X<F&&(F=X),X>z&&(z=X)}var N=a(v/2),j=a(y/2);this.bbox(U-N,F-j,P+N,z+j)}else throw new Error("stroke: --not-a-line--")}var ae=this;this.cmds.push(function(){for(var K=a(v/2),ie=a(y/2),ne=v-K,J=y-ie,te=0;te<m.length;te++){var $=m[te];if($.op=="l"){var oe=[[$.x0,$.y0],[$.x1,$.y1]];ae.transform(oe),ae.drawing.line(oe[0][0],oe[0][1],oe[1][0],oe[1][1],$.x0==$.x1?v:y,g),ae.fill(g)}else{var oe=$.poly;ae.transform(oe);var we=s(oe[0][0],oe[2][0]),be=l(oe[0][0],oe[2][0]),Te=s(oe[0][1],oe[2][1]),ye=l(oe[0][1],oe[2][1]);ae.drawing.polygon([[we-K,Te-ie],[we-K,ye+ie+1],[be+K+1,ye+ie+1],[be+K+1,Te-ie]]),ae.drawing.polygon([[we+ne,Te+J],[be-ne+1,Te+J],[be-ne+1,ye-J+1],[we+ne,ye-J+1]]),ae.drawing.fill(g)}}})},c.prototype.fill=function(){var d=this.g_path,f=this.getRGB();this.g_path=[];for(var m=0;m<d.length;m++){var g=d[m];if(g.op=="p"){for(var v=1/0,y=1/0,A=-1/0,w=-1/0,k=g.poly,E=0;E<k.length;E++){var I=k[E][0],T=k[E][1];I<v&&(v=I),I>A&&(A=I),T<y&&(y=T),T>w&&(w=T)}this.bbox(v,y+1,A-1,w)}else if(g.op=="e")this.bbox(g.x-g.rx,g.y-g.ry,g.x+g.rx,g.y+g.ry);else throw new Error("fill: --not-a-polygon--")}var N=this;this.cmds.push(function(){for(var j=0;j<d.length;j++){var B=d[j];if(B.op=="p"){var U=B.poly;N.transform(U),N.drawing.polygon(U)}else if(B.op=="e"){var U=[[B.x,B.y]];N.transform(U),N.drawing.ellipse(U[0][0],U[0][1],B.rx,B.ry,B.ccw)}}N.drawing.fill(f)})},c.prototype.clip=function(){var d=this.g_path;this.g_path=[],this.g_clip=!0;var f=this;this.cmds.push(function(){for(var m=[],g=0;g<d.length;g++){var v=d[g];if(v.op=="p"){var y=v.poly;f.transform(y),m.push(y)}else throw new Error("clip: only polygon regions supported")}f.drawing.clip(m)})},c.prototype.drawlayer=function(d,f,m){let g=fM(d,f,m);this.newpath();for(let v=0,y=g.length;v<y;v++){let A=g[v];this.moveto(A[0][0],A[0][1]);for(let w=1,k=A.length;w<k;w++){let E=A[w];this.lineto(E[0],E[1])}this.closepath()}this.fill()},c.prototype.showmaxicode=function(d){var f=this.g_tsx,m=this.g_tsy,g=this.getRGB(),v=1.04*f*100,y=v/30|0;v-(y*30-1)>9&&y++;var A,w,k,E;k=f/2|0,E=m/2|0,A=y-k,A&1&&A--,w=(4*m|0)-E;var I=A/2-1,T=(I+1)/2|0,N=w-2-2*T;this.bbox(0,0,y*30-k,m*3*32+m*4-E);var j=this;this.cmds.push(function(){for(var B=0;B<d.length;B++){var U=d[B],P=U%30,z=U/30|0;P*=y,P+=z&1?y:y/2,P=P|0,z=33-z,z*=m*3,z+=m*2-w/2,z=z|0;var F=[[P-.5,z--]];z-=T-1,F.push([P-1-I,z--]),z-=N,F.push([P-1-I,z--]),z-=T-1,F.push([P-.5,z++]),z+=T-1,F.push([P+I,z++]),z+=N,F.push([P+I,z++]),j.transform(F),j.drawing.hexagon(F,g)}j.drawing.fill(g);var P=14*y+y/2+.01|0,z=51*m-T/2+.01|0;j.drawing.ellipse(P,z,.5774*3.5*f+.01|0,.5774*3.5*m+.01|0,!0),j.drawing.ellipse(P,z,1.3359*3.5*f+.01|0,1.3359*3.5*m+.01|0,!1),j.drawing.fill(g),j.drawing.ellipse(P,z,2.1058*3.5*f+.01|0,2.1058*3.5*m+.01|0,!0),j.drawing.ellipse(P,z,2.8644*3.5*f+.01|0,2.8644*3.5*m+.01|0,!1),j.drawing.fill(g),j.drawing.ellipse(P,z,3.6229*3.5*f+.01|0,3.6229*3.5*m+.01|0,!0),j.drawing.ellipse(P,z,4.3814*3.5*f+.01|0,4.3814*3.5*m+.01|0,!1),j.drawing.fill(g)})},c.prototype.toUCS2=function(d){return d.replace(/[\xc0-\xdf][\x80-\xbf]|[\xe0-\xff][\x80-\xbf]{2}/g,function(f){var m;return f.length==2?m=(f.charCodeAt(0)&31)<<6|f.charCodeAt(1)&63:m=(f.charCodeAt(0)&15)<<12|(f.charCodeAt(1)&63)<<6|f.charCodeAt(2)&63,String.fromCharCode(m)})},c.prototype.show=function(d,f,m){if(d.length){var g=this.g_rot,v=g==90||g==270?this.g_tsy:this.g_tsx,y=g==90||g==270?this.g_tsx:this.g_tsy,A=this.g_font.FontName||"OCR-B",w=this.g_font.FontSize||10,k=w*v,E=w*y,I=this.g_posx,T=this.g_posy,N=this.getRGB();f=v*f||0,m=y*m||0,d=this.toUCS2(this.jsstring(d));var j=this.drawing.measure(d,A,k,E),B=j.width+(d.length-1)*f;g==90?this.bbox(I-m+j.descent-1,T,I-m-j.ascent,T+B-1):g==180?this.bbox(I,T-m+j.descent-1,I-B+1,T-m-j.ascent):g==270?this.bbox(I+m-j.descent+1,T,I+m+j.ascent,T-B+1):(g=0,this.bbox(I,T+m-j.descent+1,I+B-1,T+m+j.ascent),this.g_posx+=B);var U=this;U.cmds.push(function(){var F=I-U.minx,P=U.maxy-T;U.drawing.text(F,P,d,N,{name:A,width:k,height:E,rotate:g,dx:f})})}},c.prototype.bbox=function(d,f,m,g){if(d>m){var v=d;d=m,m=v}if(f>g){var v=f;f=g,g=v}d=r(d),f=r(f),m=a(m),g=a(g),this.minx>d&&(this.minx=d),this.maxx<m&&(this.maxx=m),this.miny>f&&(this.miny=f),this.maxy<g&&(this.maxy=g)},c.prototype.render=function(){if(this.minx===1/0)return!1;this.drawing.init(this.maxx-this.minx+1,this.maxy-this.miny+1,this.g_tsx,this.g_tsy);for(var d=0,f=this.cmds.length;d<f;d++)this.cmds[d]();return this.drawing.end()},c})();function fM(r,i,a,s,l){let c=0,d=0,f=new Array(a+1),m=0;for(let A=a-1;A>=0;A--){let w=new Uint8Array(i);for(let k=0;k<i;k++)w[k]=r[m+k]?1:0;f[A]=w,m+=i}f[-1]=[],f[a]=[];let g=[];for(let A=0;A<a;A++){let w=0;for(let k=0;k<i;k++)(w&9)==0&&f[A][k]==1?g.push(v(k,A,[])):(w&5)==1&&f[A][k]==0&&g.push(y(k,A,[])),w=f[A][k]}return g;function v(A,w,k){k.push([A+c,w+d]);let E=2;for(;;){if(f[w][A]&E)return k.pop(),k;f[w][A]|=E,E==2?f[w][A+1]&1?(f[w-1][A+1]&1&&(k.push([A+1-c,w+d,"H"]),E=16),A++):(k.push([A+1-c,w+d,"H"]),E=4):E==4?f[w+1][A]&1?(f[w+1][A+1]&1&&(k.push([A+1-c,w+1-d,"V"]),E=2),w++):(k.push([A+1-c,w+1-d,"V"]),E=8):E==8?f[w][A-1]&1?(f[w+1][A-1]&1&&(k.push([A+c,w+1-d,"H"]),E=4),A--):(k.push([A+c,w+1-d,"H"]),E=16):f[w-1][A]&1?(f[w-1][A-1]&1&&(k.push([A+c,w+d,"V"]),E=8),w--):(k.push([A+c,w+d,"V"]),E=2)}}function y(A,w,k){k.push([A-c,w-d]);let E=2;for(;;){if(f[w][A]&E)return k.pop(),k;f[w][A]|=E,E==2?(f[w+1][A]&1)==0?((f[w+1][A-1]&1)==0&&(k.push([A-c,w+1+d]),E=16),w++):(k.push([A-c,w+1+d]),E=4):E==4?(f[w][A+1]&1)==0?((f[w+1][A+1]&1)==0&&(k.push([A+1+c,w+1+d]),E=2),A++):(k.push([A+1+c,w+1+d]),E=8):E==8?(f[w-1][A]&1)==0?((f[w-1][A+1]&1)==0&&(k.push([A+1+c,w-d]),E=4),w--):(k.push([A+1+c,w-d]),E=16):(f[w][A-1]&1)==0?((f[w-1][A-1]&1)==0&&(k.push([A-c,w-d]),E=8),A--):(k.push([A-c,w-d]),E=2)}}}function a9(){var r=0,i=0,a=0,s=0,l=0,c=0,d=0,f=0,m,g,v,y,A,w,k,E,I,T,N,j;return{setopts(L){m=L},scale:function(L,Q){return m.bcid=="swissqrcode"?[L,Q]:[L|0||1,Q|0||1]},measure:function(L,Q,q,ee){q=q|0,ee=ee|0;for(var X=Sl.lookup(Q),ae=0,K=0,ie=0,ne=0,J=L.length;ne<J;ne++){var te=L.charCodeAt(ne),$=Sl.getglyph(X,te,q,ee);K=Math.max(K,$.top),ie=Math.max(ie,$.height-$.top),ne==J-1?ae+=$.left+$.width:ae+=$.advance}return{width:ae,ascent:K,descent:ie}},init:function(L,Q){var q=m.paddingleft,ee=m.paddingright,X=m.paddingtop,ae=m.paddingbottom,K=m.rotate||"N";if(L+=q+ee,Q+=X+ae,+m.sizelimit&&+m.sizelimit<L*Q)throw new Error("Image size over limit");switch(K){case"R":i=-1,a=1,l=1;break;case"I":r=-1,a=1,c=-1,f=1;break;case"L":i=1,l=-1,f=1;break;default:r=c=1;break}var ie=K=="L"||K=="R";y=ie?Q:L,A=ie?L:Q,w=q,k=X,N=[],N.min=1/0,j=null,E=I=T=0;var ne=this.image(y,A);g=ne.buffer,v=ne.ispng?1:0},line:function(L,Q,q,ee,X,ae){if(L=L|0,Q=Q|0,q=q|0,ee=ee|0,X=Math.round(X)||1,ee<Q){var K=Q;Q=ee,ee=K}if(q<L){var K=L;L=q,q=K}E=parseInt(ae.substr(0,2),16),I=parseInt(ae.substr(2,2),16),T=parseInt(ae.substr(4,2),16);var ie=X/2|0;L==q?(L=L-X+ie,q=q+ie-1):(Q=Q-ie,ee=ee+X-ie-1);for(var ne=Q;ne<=ee;ne++)for(var J=L;J<=q;J++)B(J,ne,255)},polygon:function(L){for(var Q=L.length,q=Q-1,ee=0;ee<Q;q=ee++)if(L[q][0]==L[ee][0]){var X=L[q][0]|0,ae=L[q][1]|0,K=L[ee][1]|0;if(ae>K)for(var ie=K+1;ie<ae;ie++)U(X,ie);else for(var ie=ae+1;ie<K;ie++)U(X,ie)}else{var X=L[q][0]|0,ne=L[ee][0]|0,ae=L[q][1]|0;if(X<ne){var J=L[q==0?Q-1:q-1][1],te=L[ee==Q-1?0:ee+1][1];J>ae&&U(X,ae),te>ae&&U(ne,ae)}else{var J=L[ee==Q-1?0:ee+1][1],te=L[q==0?Q-1:q-1][1];J>ae&&U(ne,ae),te>ae&&U(X,ae)}}},hexagon:function(L,Q){var q=L[0][0]|0,ee=L[0][1]|0,X=L[1][1]-L[0][1]|0,ae=L[2][1]-L[1][1]-1|0,K=L[2][0]|0,ie=L[4][0]|0;E=parseInt(Q.substr(0,2),16),I=parseInt(Q.substr(2,2),16),T=parseInt(Q.substr(4,2),16),F(q,q+1,ee++);for(var ne=1;ne<X;ne++)F(q-2*ne,q+1+2*ne,ee++);for(var ne=0;ne<=ae;ne++)F(K,ie,ee++);for(var ne=X-1;ne>=1;ne--)F(q-2*ne,q+1+2*ne,ee++);F(q,q+1,ee)},ellipse:function(L,Q,q,ee,X){z(L-q|0,Q-ee|0,L+q|0,Q+ee|0)},fill:function(L){E=parseInt(L.substr(0,2),16),I=parseInt(L.substr(2,2),16),T=parseInt(L.substr(4,2),16),P(),N=[],N.min=1/0},clip:function(L){j||(j=[],j.min=1/0);var Q=N;N=j;for(var q=0,ee=L.length;q<ee;q++)this.polygon(L[q]);N=Q},unclip:function(){j=null},text:function(L,Q,q,ee,X){L=L|0,Q=Q|0,E=parseInt(ee.substr(0,2),16),I=parseInt(ee.substr(2,2),16),T=parseInt(ee.substr(4,2),16);var ae=Sl.lookup(X.name),K=X.width|0,ie=X.height|0,ne=X.dx|0,J=0,te=0,$=0,oe=0;switch(X.rotate){case 90:te=1,$=-1;break;case 180:J=-1,oe=-1;break;case 270:te=-1,$=1;break;default:J=1,oe=1;break}for(var we=0,be=0;be<q.length;be++){for(var Te=q.charCodeAt(be),ye=Sl.getglyph(ae,Te,K,ie),tt=-ye.top,Qe=ye.left,Ge=ye.width,Xe=ye.height,Je=ye.bytes,dt=ye.offset,vt=0;vt<Ge;vt++)for(var _t=0;_t<Xe;_t++){var xt=Je[dt+_t*Ge+vt];if(xt){var bt=we+Qe+vt,kt=tt+_t,Pt=J*bt+te*kt,Rt=$*bt+oe*kt;B(L+Pt,Q+Rt,xt)}}we+=ye.advance+ne}},end:function(){}};function B(L,Q,q){if(!(j&&V(L,Q))){L+=w,Q+=k;var ee=r*L+i*Q+a*(y-1)+s*(A-1),X=l*L+c*Q+d*(y-1)+f*(A-1),ae=(X*y+ee)*4+(X+1)*v,K=g[ae+3]/255,ie=q/255,ne=(1-ie)*K,J=ie+ne;g[ae+0]=(E*ie+g[ae+0]*ne)/J|0,g[ae+1]=(I*ie+g[ae+1]*ne)/J|0,g[ae+2]=(T*ie+g[ae+2]*ne)/J|0,g[ae+3]=255*J|0}}function U(L,Q){N.min>Q&&(N.min=Q),N[Q]?N[Q].push(L):N[Q]=[L]}function F(L,Q,q){for(;L<=Q;)B(L++,q,255)}function P(){for(var L=N.min,Q=N.length-1,q=L;q<=Q;q++){var ee=N[q];if(ee){ee.sort(function(J,te){return J-te});for(var X=!1,ae=0,K=0,ie=ee.length;K<ie;K++){var ne=ee[K];X?F(ae,ne-1,q):ae=ne,X=!X}}}}function z(L,Q,q,ee,X){L=L|0,Q=Q|0,q=q|0,ee=ee|0;var ae=Math.abs(q-L),K=Math.abs(ee-Q),ie=K&1,ne=4*(1-ae)*K*K,J=4*(ie+1)*ae*ae,te=ne+J+ie*ae*ae,$,oe=[],we=[];oe.min=we.min=1/0,L>q&&(L=q,q+=ae),Q>ee&&(Q=ee),Q+=(K+1)/2|0,ee=Q-ie,ae*=8*ae,ie=8*K*K;do tt(we,q,Q),ye(oe,L,Q),ye(oe,L,ee),tt(we,q,ee),$=2*te,$>=ne&&(L++,q--,ne+=ie,te+=ne),$<=J&&(Q++,ee--,J+=ae,te+=J);while(L<=q);for(;Q-ee<K;)tt(we,q+1,Q),ye(oe,L-1,Q++),ye(oe,L-1,ee),tt(we,q+1,ee--);for(var be=oe.min,Te=oe.length-1;be<=Te;be++)U(oe[be],be);for(var be=we.min,Te=we.length-1;be<=Te;be++)U(we[be]+1,be);function ye(Qe,Ge,Xe){Qe.min>Xe&&(Qe.min=Xe);var Je=Qe[Xe];(Je==null||Je>Ge)&&(Qe[Xe]=Ge)}function tt(Qe,Ge,Xe){Qe.min>Xe&&(Qe.min=Xe);var Je=Qe[Xe];(Je==null||Je<Ge)&&(Qe[Xe]=Ge)}}function V(L,Q){var q=j[Q];if(!q)return!0;q.sorted||(q.sort(function(ie,ne){return ie-ne}),q.sorted=!0);for(var ee=!1,X=0,ae=q.length;X<ae;X++){var K=q[X];if(K>L)return!ee;if(K==L)return ee;ee=!ee}return!0}}function Bp(r,i){Oh(i)&&(r=i);var a,s=r.getContext("2d",{willReadFrequently:!0}),l=a9();l.image=f,l.end=m;var c,d=l.setopts;return l.setopts=function(g){c=g,d&&d.call(l,g)},l;function f(g,v){return r.width=g,r.height=v,s.setTransform(1,0,0,1,0,0),/^[0-9a-fA-F]{6}$/.test(""+c.backgroundcolor)?(s.fillStyle="#"+c.backgroundcolor,s.fillRect(0,0,g,v)):s.clearRect(0,0,g,v),a=s.getImageData(0,0,g,v),{buffer:a.data,ispng:!1}}function m(){return s.putImageData(a,0,0),r}}function s9(){var r=0,i=0,a=0,s=0,l=0,c=0,d=0,f=0,m,g="",v,y="",A=[],w={},k,E,I=.55228475-45e-5,T,N,j,B;return{setopts(F){m=F},scale(F,P){k=F,E=P},measure(F,P,z,V){z=z|0,V=V|0;for(var L=Sl.lookup(P),Q=0,q=0,ee=0,X=0,ae=F.length;X<ae;X++){var K=F.charCodeAt(X),ie=Sl.getglyph(L,K,z,V);ie&&(q=Math.max(q,ie.top),ee=Math.max(ee,ie.height-ie.top),X==ae-1?Q+=ie.left+ie.width:Q+=ie.advance)}return{width:Q,ascent:q,descent:ee}},init(F,P){var z=m.paddingleft,V=m.paddingright,L=m.paddingtop,Q=m.paddingbottom,q=m.rotate||"N";switch(F+=z+V,P+=L+Q,q){case"R":i=-1,a=1,l=1;break;case"I":r=-1,a=1,c=-1,f=1;break;case"L":i=1,l=-1,f=1;break;default:r=c=1;break}var ee=q=="L"||q=="R";T=ee?P:F,N=ee?F:P,j=z,B=L},line(F,P,z,V,L,Q){if(F=F|0,P=P|0,z=z|0,V=V|0,L=Math.round(L)||1,L&1){if(F==z){let ee=k&1?-.5:.5;F+=ee,z+=ee}if(P==V){let ee=E&1?-.5:.5;P+=ee,V+=ee}}F==z?P++:P==V&&F++;var q=""+L+"#"+Q;w[q]||(w[q]='<path stroke="#'+Q+'" stroke-width="'+L+'" d="'),w[q]+="M"+U(F,P)+"L"+U(z,V)},polygon(F){v||(v='<path d="'),v+="M"+U(F[0][0],F[0][1]);for(var P=1,z=F.length;P<z;P++){var V=F[P];v+="L"+U(V[0],V[1])}v+="Z"},hexagon(F,P){this.polygon(F)},ellipse(F,P,z,V,L){v||(v='<path d="');var Q=z*I,q=V*I;v+="M"+U(F-z,P)+"C"+U(F-z,P-q)+" "+U(F-Q,P-V)+" "+U(F,P-V)+"C"+U(F+Q,P-V)+" "+U(F+z,P-q)+" "+U(F+z,P)+"C"+U(F+z,P+q)+" "+U(F+Q,P+V)+" "+U(F,P+V)+"C"+U(F-Q,P+V)+" "+U(F-z,P+q)+" "+U(F-z,P)+"Z"},fill(F){v&&(g+=v+'" fill="#'+F+'" fill-rule="evenodd"'+(y?' clip-path="url(#'+y+')"':"")+` />
`,v=null)},clip:function(F){var P='<clipPath id="clip'+A.length+'"><path d="';for(let Q=0;Q<F.length;Q++){let q=F[Q];P+="M"+U(q[0][0],q[0][1]);for(var z=1,V=q.length;z<V;z++){var L=q[z];P+="L"+U(L[0],L[1])}P+="Z"}P+='" clip-rule="nonzero" /></clipPath>',y="clip"+A.length,A.push(P)},unclip:function(){y=""},text(F,P,z,V,L){F=F|0,P=P|0;for(var Q=F,q=P,ee=Sl.lookup(L.name),X=L.width|0,ae=L.height|0,K=L.dx|0,ie="",ne=0;ne<z.length;ne++){var J=z.charCodeAt(ne),te=Sl.getpaths(ee,J,X,ae);if(te){if(te.length){for(var $=0,oe=te.length;$<oe;$++){let we=te[$];we.type=="M"||we.type=="L"?ie+=we.type+U(we.x+F,P-we.y):we.type=="Q"?ie+=we.type+U(we.cx+F,P-we.cy)+" "+U(we.x+F,P-we.y):we.type=="C"&&(ie+=we.type+U(we.cx1+F,P-we.cy1)+" "+U(we.cx2+F,P-we.cy2)+" "+U(we.x+F,P-we.y))}ie+="Z"}F+=Sl.getglyph(ee,J,X,ae).advance+K}}ie&&(L.rotate?g+='<path d="'+ie+'" fill="#'+V+'" transform="rotate(-'+L.rotate+" "+U(Q,q)+`)" />
`:g+='<path d="'+ie+'" fill="#'+V+`" />
`)},end(){var F="";for(var P in w)F+=w[P]+`" />
`;var z=m.backgroundcolor;return'<svg viewBox="0 0 '+T+" "+N+`" xmlns="http://www.w3.org/2000/svg">
`+(A.length?"<defs>"+A.join("")+"</defs>":"")+(/^[0-9A-Fa-f]{6}$/.test(""+z)?'<rect width="100%" height="100%" fill="#'+z+`" />
`:"")+F+g+`</svg>
`}};function U(F,P){F+=j,P+=B;var z=r*F+i*P+a*(T-1)+s*(N-1),V=l*F+c*P+d*(T-1)+f*(N-1);return""+((z|0)==z?z:z.toFixed(2))+" "+((V|0)==V?V:V.toFixed(2))}}var Sl=(function(){var r=[],i={},a={},s={},l=0;return s.next=s,s.prev=s,{lookup:d,monochrome:f,getglyph:m,getpaths:g,loadFont:c};function c(v){var y=100,A=100,w=null;if(arguments.length==2)w=arguments[1];else if(arguments.length==3)y=A=+arguments[1]||100,w=arguments[2];else if(arguments.length==4)A=+arguments[1]||100,y=+arguments[2]||100,w=arguments[3];else throw new Error("bwipjs: loadFont: invalid number of arguments");var k=Qv.InitFont(pM(w));k.bwipjs_name=v,k.bwipjs_multx=y,k.bwipjs_multy=A;var E=r.push(k)-1;return i[v.toUpperCase()]=E,E}function d(v){var y=i[v.toUpperCase()];return y===void 0?1:y}function f(v){if(v)throw new Error("bwipjs: monochrome fonts not implemented")}function m(v,y,A,w){v=v|0,y=y|0,A=+A,w=+w,(!A||A<8)&&(A=8),(!w||w<8)&&(w=A),(v<0||v>=r.length)&&(v=1),(!y||y<32)&&(y=32);var k=""+v+"c"+y+"w"+A+"h"+w,I=a[k];if(I){I.prev.next=I.next,I.next.prev=I.prev;var N=s;return N.next.prev=I,I.next=N.next,I.prev=N,N.next=I,I}var E=r[v],I=Qv.GetGlyph(E,y,A*E.bwipjs_multx/100,w*E.bwipjs_multy/100)||Qv.GetGlyph(E,0,A*E.bwipjs_multx/100,w*E.bwipjs_multy/100);if(I.bytes=I.pixels,I.cachekey=k,I.offset=0,l>250){var N=s,T=N.prev;T.prev.next=N,N.prev=T.prev,T.next=T.prev=null,delete a[T.cachekey]}else l++;a[k]=I;var N=s;return N.next.prev=I,I.next=N.next,I.prev=N,N.next=I,I}function g(v,y,A,w){v=v|0,y=y|0,A=+A,w=+w,(!A||A<8)&&(A=8),(!w||w<8)&&(w=A),(v<0||v>=r.length)&&(v=1),(!y||y<32)&&(y=32);var k=r[v];return Qv.GetPaths(k,y,A*k.bwipjs_multx/100,w*k.bwipjs_multy/100)}})();function hM(){return Sl.loadFont.apply(Sl,Array.prototype.slice.call(arguments))}var Qv=(function(){var r=1,i=2,a=3,s=4,l=0,c=3,d=1,f=10,m=Math.floor,g=Math.ceil,v=Math.sqrt,y=Math.abs;function A(Y){for(var le=[],se=0;se<Y;se++)le.push({});return le}function w(Y){return Y[Y.cursor++]||0}function k(Y){return Y[Y.cursor]}function E(Y,le){Y.cursor=le>Y.length||le<0?Y.length:le}function I(Y,le){E(Y,Y.cursor+le)}function T(Y,le){for(var se=0,ge=0;ge<le;ge++)se=se<<8|w(Y);return se}function N(){return{length:0}}function j(Y,le,se){if(le<0||se<0||le>Y.length||se>Y.length-le)return N();var ge=Y.subarray(le,le+se);return ge.cursor=0,ge}function B(Y){var le=Y.cursor,se=T(Y,2);if(se){var ge=w(Y);I(Y,ge*se),I(Y,T(Y,ge)-1)}return j(Y,le,Y.cursor-le)}function U(Y){var le=w(Y);return le>=32&&le<=246?le-139:le>=247&&le<=250?(le-247)*256+w(Y)+108:le>=251&&le<=254?-(le-251)*256-w(Y)-108:le==28?T(Y,2):le==29?T(Y,4):0}function F(Y){var le=k(Y);if(le==30)for(I(Y,1);Y.cursor<Y.length;){var se=w(Y);if((se&15)==15||se>>4==15)break}else U(Y)}function P(Y,le){for(E(Y,0);Y.cursor<Y.length;){for(var se=Y.cursor,ge,ve;k(Y)>=28;)F(Y);if(ge=Y.cursor,ve=w(Y),ve==12&&(ve=w(Y)|256),ve==le)return j(Y,se,ge-se)}return j(Y,0,0)}function z(Y,le,se,ge){for(var ve=P(Y,le),_e=0;_e<se&&ve.cursor<ve.length;_e++)ge[_e]=U(ve)}function V(Y,le,se){var ge=P(Y,le);return ge.cursor<ge.length&&(se=U(ge)),se}function L(Y){return E(Y,0),T(Y,2)}function Q(Y,le){var se,ge,ve,_e;return E(Y,0),se=T(Y,2),ge=w(Y),I(Y,le*ge),ve=T(Y,ge),_e=T(Y,ge),j(Y,2+(se+1)*ge+ve,_e-ve)}function q(Y){return Y&32768?(4294901760|Y)>>0:Y}function ee(Y,le){return Y[le]*256+Y[le+1]}function X(Y,le){var se=Y[le]*256+Y[le+1];return se&32768?(4294901760|se)>>0:se}function ae(Y,le){return(Y[le]<<24)+(Y[le+1]<<16)+(Y[le+2]<<8)+Y[le+3]}function K(Y,le,se){for(var ge=ee(Y,le+4),ve=le+12,_e=0;_e<ge;++_e){var pe=ve+16*_e;if(Y[pe]==se[0]&&Y[pe+1]==se[1]&&Y[pe+2]==se[2]&&Y[pe+3]==se[3])return ae(Y,pe+8)}return 0}function ie(Y,le){var se=[0,0];if(z(le,18,2,se),!se[1]||!se[0])return N();var ge=j(Y,se[1],se[0]),ve=V(ge,19,0);return ve?(E(Y,se[1]+ve),B(Y)):N()}function ne(Y,le,se){var ge,ve,_e,pe;if(Y.data=le,Y.fontstart=se,Y.cff=N(),ge=K(le,se,[99,109,97,112]),Y.loca=K(le,se,[108,111,99,97]),Y.head=K(le,se,[104,101,97,100]),Y.glyf=K(le,se,[103,108,121,102]),Y.hhea=K(le,se,[104,104,101,97]),Y.hmtx=K(le,se,[104,109,116,120]),Y.kern=K(le,se,[107,101,114,110]),!ge||!Y.head||!Y.hhea||!Y.hmtx)return 0;if(Y.glyf){if(!Y.loca)return 0}else{var Oe,de,ke,Ee,De=2,xe=0,Ne=0,je=0;if(Ee=K(le,se,[67,70,70,32]),!Ee||(Y.fontdicts=N(),Y.fdselect=N(),Y.cff=le.subarray(Ee),Y.cff.cursor=0,Oe=Y.cff,I(Oe,2),E(Oe,w(Oe)),B(Oe),ke=B(Oe),de=Q(ke,0),B(Oe),Y.gsubrs=B(Oe),xe=V(de,17,xe),De=V(de,262,De),Ne=V(de,292,Ne),je=V(de,293,je),Y.subrs=ie(Oe,de),De!=2)||xe==0)return 0;if(Ne){if(!je)return 0;E(Oe,Ne),Y.fontdicts=B(Oe),Y.fdselect=j(Oe,je,Oe.length-je)}E(Oe,xe),Y.charstrings=B(Oe)}for(ve=K(le,se,[109,97,120,112]),ve?Y.numGlyphs=ee(le,ve+4):Y.numGlyphs=65535,pe=ee(le,ge+2),Y.index_map=0,_e=0;_e<pe;++_e){var Se=ge+4+8*_e;switch(ee(le,Se)){case c:switch(ee(le,Se+2)){case d:case f:Y.index_map=ge+ae(le,Se+4);break}break;case l:Y.index_map=ge+ae(le,Se+4);break}}return Y.index_map==0?0:(Y.indexToLocFormat=ee(le,Y.head+50),1)}function J(Y,le){var se=Y.data,ge=Y.index_map,ve=ee(se,ge+0);if(ve==0){var _e=ee(se,ge+2);return le<_e-6?se[ge+6+le]:0}else if(ve==6){var pe=ee(se,ge+6),Oe=ee(se,ge+8);return le>=pe&&le<pe+Oe?ee(se,ge+10+(le-pe)*2):0}else{if(ve==2)return 0;if(ve==4){var de=ee(se,ge+6)>>1,ke=ee(se,ge+8)>>1,Ee=ee(se,ge+10),De=ee(se,ge+12)>>1,xe=ge+14,Ne=xe;if(le>65535)return 0;for(le>=ee(se,Ne+De*2)&&(Ne+=De*2),Ne-=2;Ee;){ke>>=1;var je=ee(se,Ne+ke*2);le>je&&(Ne+=ke*2),--Ee}Ne+=2;var Se,ze,Pe=Ne-xe>>>1;return ze=ee(se,ge+14+de*2+2+2*Pe),le<ze?0:(Se=ee(se,ge+14+de*6+2+2*Pe),Se==0?le+X(se,ge+14+de*4+2+2*Pe):ee(se,Se+(le-ze)*2+ge+14+de*6+2+2*Pe))}else if(ve==12||ve==13){for(var Be=ae(se,ge+12),at=0,Ze=Be;at<Ze;){var ft=at+(Ze-at>>1),Ve=ae(se,ge+16+ft*12),$e=ae(se,ge+16+ft*12+4);if(le<Ve)Ze=ft;else if(le>$e)at=ft+1;else{var Me=ae(se,ge+16+ft*12+8);return ve==12?Me+le-Ve:Me}}return 0}}return 0}function te(Y,le,se,ge,ve,_e){Y.type=le,Y.x=se,Y.y=ge,Y.cx=ve,Y.cy=_e}function $(Y,le){var se,ge;return le>=Y.numGlyphs||Y.indexToLocFormat>=2?-1:(Y.indexToLocFormat==0?(se=Y.glyf+ee(Y.data,Y.loca+le*2)*2,ge=Y.glyf+ee(Y.data,Y.loca+le*2+2)*2):(se=Y.glyf+ae(Y.data,Y.loca+le*4),ge=Y.glyf+ae(Y.data,Y.loca+le*4+4)),se==ge?-1:se)}function oe(Y,le,se){if(Y.cff.length)bt(Y,le,se);else{var ge=$(Y,le);if(ge<0)return 0;se.x0=X(Y.data,ge+2),se.y0=X(Y.data,ge+4),se.x1=X(Y.data,ge+6),se.y1=X(Y.data,ge+8)}return 1}function we(Y,le,se,ge,ve,_e,pe,Oe,de,ke){return ge?(se&&te(Y[le++],a,de+pe>>1,ke+Oe>>1,de,ke),te(Y[le++],a,ve,_e,pe,Oe)):se?te(Y[le++],a,ve,_e,de,ke):te(Y[le++],i,ve,_e,0,0),le}function be(Y,le){var se=Y.data,ge=$(Y,le);if(ge<0)return null;var ve=[],_e=X(se,ge);if(_e>0){var pe=0,Oe,de,ke=0,Ee,De,xe,Ne=0,je,Se=0,ze,Pe,Be,at,Ze,ft,Ve,$e,Me=ge+10,it=ee(se,ge+10+_e*2),st=se.subarray(ge+10+_e*2+2+it),mt=0;for(De=1+ee(se,Me+_e*2-2),Ee=De+2*_e,ve=A(Ee),xe=0,Oe=0,je=Ee-De,de=0;de<De;++de)Oe==0?(pe=st[mt++],pe&8&&(Oe=st[mt++])):--Oe,ve[je+de].type=pe;for(ze=0,de=0;de<De;++de){if(pe=ve[je+de].type,pe&2){var Tt=st[mt++];ze+=pe&16?Tt:-Tt}else pe&16||(ze=ze+q(st[mt]*256+st[mt+1]),mt+=2);ve[je+de].x=ze}for(Pe=0,de=0;de<De;++de){if(pe=ve[je+de].type,pe&4){var Ot=st[mt++];Pe+=pe&32?Ot:-Ot}else pe&32||(Pe=Pe+q(st[mt]*256+st[mt+1]),mt+=2);ve[je+de].y=Pe}var Et=0;for(Ze=ft=Be=at=Ve=$e=0,de=0;de<De;++de)pe=ve[je+de].type,ze=ve[je+de].x,Pe=ve[je+de].y,xe==de?(de!=0&&(Et=we(ve,Et,Ne,Se,Ze,ft,Ve,$e,Be,at)),Se=!(pe&1),Se?(Ve=ze,$e=Pe,ve[je+de+1].type&1?(Ze=ve[je+de+1].x,ft=ve[je+de+1].y,++de):(Ze=ze+ve[je+de+1].x>>1,ft=Pe+ve[je+de+1].y>>1)):(Ze=ze,ft=Pe),te(ve[Et++],r,Ze,ft,0,0),Ne=0,xe=1+ee(se,Me+ke*2),++ke):pe&1?(Ne?te(ve[Et++],a,ze,Pe,Be,at):te(ve[Et++],i,ze,Pe,0,0),Ne=0):(Ne&&te(ve[Et++],a,Be+ze>>1,at+Pe>>1,Be,at),Be=ze,at=Pe,Ne=1);ve.length=we(ve,Et,Ne,Se,Ze,ft,Ve,$e,Be,at)}else if(_e==-1)for(var Dt=1,wt=ge+10;Dt;){var pe,en,gt=[1,0,0,1,0,0];pe=X(se,wt),wt+=2,en=X(se,wt),wt+=2,pe&2&&(pe&1?(gt[4]=X(se,wt),wt+=2,gt[5]=X(se,wt),wt+=2):(gt[4]=w(se),wt+=1,gt[5]=w(se),wt+=1)),pe&8?(gt[0]=gt[3]=X(se,wt)/16384,wt+=2,gt[1]=gt[2]=0):pe&64?(gt[0]=X(se,wt)/16384,wt+=2,gt[1]=gt[2]=0,gt[3]=X(se,wt)/16384,wt+=2):pe&128&&(gt[0]=X(se,wt)/16384,wt+=2,gt[1]=X(se,wt)/16384,wt+=2,gt[2]=X(se,wt)/16384,wt+=2,gt[3]=X(se,wt)/16384,wt+=2);var Ee=v(gt[0]*gt[0]+gt[1]*gt[1]),De=v(gt[2]*gt[2]+gt[3]*gt[3]),un=kt(Y,en);if(un.length>0){for(var de=0,Vt=un.length;de<Vt;++de){var fn=un[de],ze,Pe;ze=fn.x,Pe=fn.y,fn.x=m(Ee*(gt[0]*ze+gt[2]*Pe+gt[4])),fn.y=m(De*(gt[1]*ze+gt[3]*Pe+gt[5])),ze=fn.cx,Pe=fn.cy,fn.cx=m(Ee*(gt[0]*ze+gt[2]*Pe+gt[4])),fn.cy=m(De*(gt[1]*ze+gt[3]*Pe+gt[5]))}ve=ve.concat(un)}Dt=pe&32}return ve}function Te(Y,le,se){(le>Y.max_x||!Y.started)&&(Y.max_x=le),(se>Y.max_y||!Y.started)&&(Y.max_y=se),(le<Y.min_x||!Y.started)&&(Y.min_x=le),(se<Y.min_y||!Y.started)&&(Y.min_y=se),Y.started=1}function ye(Y,le,se,ge,ve,_e,pe,Oe){Te(Y,se,ge),le==s&&(Te(Y,ve,_e),Te(Y,pe,Oe));var de={};te(de,le,se,ge,ve,_e),de.cx1=pe,de.cy1=Oe,Y.vertices.push(de)}function tt(Y){(Y.first_x!=Y.x||Y.first_y!=Y.y)&&ye(Y,i,Y.first_x,Y.first_y,0,0,0,0)}function Qe(Y,le,se){tt(Y),Y.first_x=Y.x=Y.x+le,Y.first_y=Y.y=Y.y+se,ye(Y,r,Y.x,Y.y,0,0,0,0)}function Ge(Y,le,se){Y.x+=le,Y.y+=se,ye(Y,i,Y.x,Y.y,0,0,0,0)}function Xe(Y,le,se,ge,ve,_e,pe){var Oe=Y.x+le,de=Y.y+se,ke=Oe+ge,Ee=de+ve;Y.x=ke+_e,Y.y=Ee+pe,ye(Y,s,Y.x,Y.y,Oe,de,ke,Ee)}function Je(Y,le){var se=L(Y),ge=107;return se>=33900?ge=32768:se>=1240&&(ge=1131),le+=ge,le<0||le>=se?N():Q(Y,le)}function dt(Y,le){var se=Y.fdselect,ge,ve,_e,pe,Oe,de=-1,ke;if(E(se,0),Oe=w(se),Oe==0)I(se,le),de=w(se);else if(Oe==3)for(ge=T(se,2),ve=T(se,2),ke=0;ke<ge;ke++){if(pe=w(se),_e=T(se,2),le>=ve&&le<_e){de=pe;break}ve=_e}return ie(Y.cff,Q(Y.fontdicts,de))}function vt(Y,le,se){var ge=1,ve=0,_e=0,pe=0,Oe,de,ke,Ee=0,De,xe=[],Ne=[],je=Y.subrs,Se,ze;for(Se=Q(Y.charstrings,le);Se.cursor<Se.length;){switch(de=0,De=1,ke=w(Se),ke){case 19:case 20:ge&&(ve+=pe/2|0),ge=0,I(Se,(ve+7)/8|0);break;case 1:case 3:case 18:case 23:ve+=pe/2|0;break;case 21:if(ge=0,pe<2)return 0;Qe(se,xe[pe-2],xe[pe-1]);break;case 4:if(ge=0,pe<1)return 0;Qe(se,0,xe[pe-1]);break;case 22:if(ge=0,pe<1)return 0;Qe(se,xe[pe-1],0);break;case 5:if(pe<2)return 0;for(;de+1<pe;de+=2)Ge(se,xe[de],xe[de+1]);break;case 7:if(pe<1)return 0;for(;!(de>=pe||(Ge(se,0,xe[de]),de++,de>=pe));)Ge(se,xe[de],0),de++;break;case 6:if(pe<1)return 0;for(;!(de>=pe||(Ge(se,xe[de],0),de++,de>=pe));)Ge(se,0,xe[de]),de++;break;case 31:if(pe<4)return 0;for(;!(de+3>=pe||(Xe(se,xe[de],0,xe[de+1],xe[de+2],pe-de==5?xe[de+4]:0,xe[de+3]),de+=4,de+3>=pe));)Xe(se,0,xe[de],xe[de+1],xe[de+2],xe[de+3],pe-de==5?xe[de+4]:0),de+=4;break;case 30:if(pe<4)return 0;for(;!(de+3>=pe||(Xe(se,0,xe[de],xe[de+1],xe[de+2],xe[de+3],pe-de==5?xe[de+4]:0),de+=4,de+3>=pe));)Xe(se,xe[de],0,xe[de+1],xe[de+2],pe-de==5?xe[de+4]:0,xe[de+3]),de+=4;break;case 8:if(pe<6)return 0;for(;de+5<pe;de+=6)Xe(se,xe[de],xe[de+1],xe[de+2],xe[de+3],xe[de+4],xe[de+5]);break;case 24:if(pe<8)return 0;for(;de+5<pe-2;de+=6)Xe(se,xe[de],xe[de+1],xe[de+2],xe[de+3],xe[de+4],xe[de+5]);if(de+1>=pe)return 0;Ge(se,xe[de],xe[de+1]);break;case 25:if(pe<8)return 0;for(;de+1<pe-6;de+=2)Ge(se,xe[de],xe[de+1]);if(de+5>=pe)return 0;Xe(se,xe[de],xe[de+1],xe[de+2],xe[de+3],xe[de+4],xe[de+5]);break;case 26:case 27:if(pe<4)return 0;for(ze=0,pe&1&&(ze=xe[de],de++);de+3<pe;de+=4)ke==27?Xe(se,xe[de],ze,xe[de+1],xe[de+2],xe[de+3],0):Xe(se,ze,xe[de],xe[de+1],xe[de+2],0,xe[de+3]),ze=0;break;case 10:Ee||(Y.fdselect.length&&(je=dt(Y,le)),Ee=1);case 29:if(pe<1||(Oe=xe[--pe]|0,_e>=10)||(Ne[_e++]=Se,Se=Je(ke==10?je:Y.gsubrs,Oe),Se.length==0))return 0;Se.cursor=0,De=0;break;case 11:if(_e<=0)return 0;Se=Ne[--_e],De=0;break;case 14:return tt(se),1;case 12:var Pe,Be,at,Ze,ft,Ve,$e,Me,it,st,mt,Tt,Ot,Et,Dt=w(Se);switch(Dt){case 34:if(pe<7)return 0;Pe=xe[0],Be=xe[1],Me=xe[2],at=xe[3],Ze=xe[4],ft=xe[5],Ve=xe[6],Xe(se,Pe,0,Be,Me,at,0),Xe(se,Ze,0,ft,-Me,Ve,0);break;case 35:if(pe<13)return 0;Pe=xe[0],$e=xe[1],Be=xe[2],Me=xe[3],at=xe[4],it=xe[5],Ze=xe[6],st=xe[7],ft=xe[8],mt=xe[9],Ve=xe[10],Tt=xe[11],Xe(se,Pe,$e,Be,Me,at,it),Xe(se,Ze,st,ft,mt,Ve,Tt);break;case 36:if(pe<9)return 0;Pe=xe[0],$e=xe[1],Be=xe[2],Me=xe[3],at=xe[4],Ze=xe[5],ft=xe[6],mt=xe[7],Ve=xe[8],Xe(se,Pe,$e,Be,Me,at,0),Xe(se,Ze,0,ft,mt,Ve,-($e+Me+mt));break;case 37:if(pe<11)return 0;Pe=xe[0],$e=xe[1],Be=xe[2],Me=xe[3],at=xe[4],it=xe[5],Ze=xe[6],st=xe[7],ft=xe[8],mt=xe[9],Ve=Tt=xe[10],Ot=Pe+Be+at+Ze+ft,Et=$e+Me+it+st+mt,y(Ot)>y(Et)?Tt=-Et:Ve=-Ot,Xe(se,Pe,$e,Be,Me,at,it),Xe(se,Ze,st,ft,mt,Ve,Tt);break;default:return 0}break;default:if(ke!=255&&ke!=28&&(ke<32||ke>254)||(ke==255?ze=(T(Se,4)|0)/65536:(I(Se,-1),ze=(U(Se)<<16|0)>>16),pe>=48))return 0;xe[pe++]=ze,De=0;break}De&&(pe=0)}return 0}function _t(){return{started:0,first_x:0,first_y:0,x:0,y:0,min_x:0,max_x:0,min_y:0,max_y:0,vertices:[]}}function xt(Y,le){var se=_t();return vt(Y,le,se)?se.vertices:null}function bt(Y,le,se){var ge=_t(),ve=vt(Y,le,ge);return se.x0=ve?ge.min_x:0,se.y0=ve?ge.min_y:0,se.x1=ve?ge.max_x:0,se.y1=ve?ge.max_y:0,ve&&ge.vertices?ge.vertices.length:0}function kt(Y,le){return Y.cff.length?xt(Y,le):be(Y,le)}function Pt(Y,le){var se=ee(Y.data,Y.hhea+34);return le<se?{advanceWidth:X(Y.data,Y.hmtx+4*le),leftSideBearing:X(Y.data,Y.hmtx+4*le+2)}:{advanceWidth:X(Y.data,Y.hmtx+4*(se-1)),leftSideBearing:X(Y.data,Y.hmtx+4*se+2*(le-se))}}function Rt(Y){return{ascent:X(Y.data,Y.hhea+4),descent:X(Y.data,Y.hhea+6),linegap:X(Y.data,Y.hhea+8)}}function Wt(Y,le,se,ge,ve,_e){var pe={};return oe(Y,le,pe)?{x0:m(pe.x0*se+ve),y0:m(-pe.y1*ge+_e),x1:g(pe.x1*se+ve),y1:g(-pe.y0*ge+_e)}:{x0:0,y0:0,x1:0,y1:0}}function zt(Y,le,se){var ge=(Y.x1-Y.x0)/(Y.y1-Y.y0);return{fdx:ge,fdy:ge!=0?1/ge:0,fx:Y.x0+ge*(se-Y.y0)-(le|0),direction:Y.invert?1:-1,sy:Y.y0,ey:Y.y1,next:0}}function Ct(Y,le,se,ge,ve,_e,pe){le=le|0,ve!=pe&&(ve>se.ey||pe<se.sy||(ve<se.sy&&(ge+=(_e-ge)*(se.sy-ve)/(pe-ve),ve=se.sy),pe>se.ey&&(_e+=(_e-ge)*(se.ey-pe)/(pe-ve),pe=se.ey),ge<=le&&_e<=le?Y[le]+=se.direction*(pe-ve):ge>=le+1&&_e>=le+1||(Y[le]+=se.direction*(pe-ve)*(1-(ge-le+(_e-le))/2))))}function Yt(Y,le,se,ge,ve){for(var _e=ve+1;ge;){if(ge.fdx==0){var pe=ge.fx;pe<se&&(pe>=0?(Ct(Y,pe,ge,pe,ve,pe,_e),Ct(le,pe+1,ge,pe,ve,pe,_e)):Ct(le,0,ge,pe,ve,pe,_e))}else{var pe=ge.fx,Oe=ge.fdx,de=pe+Oe,ke,Ee,De,xe,Ne=ge.fdy;if(ge.sy>ve?(ke=pe+Oe*(ge.sy-ve),De=ge.sy):(ke=pe,De=ve),ge.ey<_e?(Ee=pe+Oe*(ge.ey-ve),xe=ge.ey):(Ee=de,xe=_e),ke>=0&&Ee>=0&&ke<se&&Ee<se)if((ke|0)==(Ee|0)){var je=xe-De,Se=ke|0;Y[Se]+=ge.direction*(1-(ke-Se+(Ee-Se))/2)*je,le[Se+1]+=ge.direction*je}else{var ze,Se,Pe,Be,at,Ze,ft,Ve;for(ke>Ee&&(De=_e-(De-ve),xe=_e-(xe-ve),ze=De,De=xe,xe=ze,ze=Ee,Ee=ke,ke=ze,Oe=-Oe,Ne=-Ne,ze=pe,pe=de,de=ze),Pe=ke|0,Be=Ee|0,at=(Pe+1-pe)*Ne+ve,ft=ge.direction,Ve=ft*(at-De),Y[Pe]+=Ve*(1-(ke-Pe+(Pe+1-Pe))/2),Ze=ft*Ne,Se=Pe+1;Se<Be;++Se)Y[Se]+=Ve+Ze/2,Ve+=Ze;at+=Ne*(Be-(Pe+1)),Y[Be]+=Ve+ft*(1-(Be-Be+(Ee-Be))/2)*(xe-at),le[Be+1]+=ft*(xe-De)}else for(var Se=0;Se<se;++Se){var $e=ve,Pe=Se,Be=Se+1,Me=de,it=_e,st=(Se-pe)/Oe+ve,mt=(Se+1-pe)/Oe+ve;pe<Pe&&Me>Be?(Ct(Y,Se,ge,pe,$e,Pe,st),Ct(Y,Se,ge,Pe,st,Be,mt),Ct(Y,Se,ge,Be,mt,Me,it)):Me<Pe&&pe>Be?(Ct(Y,Se,ge,pe,$e,Be,mt),Ct(Y,Se,ge,Be,mt,Pe,st),Ct(Y,Se,ge,Pe,st,Me,it)):pe<Pe&&Me>Pe||Me<Pe&&pe>Pe?(Ct(Y,Se,ge,pe,$e,Pe,st),Ct(Y,Se,ge,Pe,st,Me,it)):pe<Be&&Me>Be||Me<Be&&pe>Be?(Ct(Y,Se,ge,pe,$e,Be,mt),Ct(Y,Se,ge,Be,mt,Me,it)):Ct(Y,Se,ge,pe,$e,Me,it)}}ge=ge.next}}function jt(Y,le,se,ge,ve,_e){ve|=0,_e|=0;var pe=null,Oe,de=_e,ke=0,Ee,De=new Float32Array(Y.w*2+1),xe=De.subarray(Y.w),Ne=0;for(le[se].y0=_e+Y.h+1;ke<Y.h;){var je=de+0,Se=de+1,ze=pe;if(De.fill)De.fill(0);else for(var Pe=0,Be=De.length;Pe<Be;Pe++)De[Pe]=0;for(;ze;)Oe=ze,ze=Oe.next,Oe.ey<=je&&(Oe.direction=0);for(;le[Ne].y0<=Se;)le[Ne].y0!=le[Ne].y1&&(Oe=zt(le[Ne],ve,je),Oe.next=pe,pe=Oe),++Ne;pe&&Yt(De,xe,Y.w,pe,je);for(var Ee=0,at=0;Ee<Y.w;++Ee){var Ze,ft;at+=xe[Ee],Ze=De[Ee]+at,Ze=y(Ze)*255+.5,ft=Ze>>>0,ft>255&&(ft=255),Y.pixels[ke*Y.stride+Ee]=ft}for(ze=pe;ze;)Oe=ze,Oe.fx+=Oe.fdx,ze=Oe.next;++de,++ke}}function an(Y,le){for(var se=1;se<le;++se){for(var ge=Y[se],ve=se;ve>0&&ge.y0<Y[ve-1].y0;)Y[ve]=Y[ve-1],--ve;se!=ve&&(Y[ve]=ge)}}function rn(Y,le,se){for(;se>12;){var ge,ve,_e,pe,Oe,de=se>>1,ke=Y[le].y0<Y[le+de].y0,Ee=Y[le+de].y0<Y[le+se-1].y0;for(ke!=Ee&&(ve=Y[le].y0<Y[le+se-11].y0,Oe=ve==Ee?0:se-1,ge=Y[le+Oe],Y[le+Oe]=Y[le+de],Y[le+de]=ge),ge=Y[le],Y[le]=Y[le+de],Y[le+de]=ge,_e=1,pe=se-1;;){for(;Y[le+_e].y0<Y[le].y0;++_e);for(;Y[le].y0<Y[le+pe].y0;--pe);if(_e>=pe)break;ge=Y[le+_e],Y[le+_e]=Y[le+pe],Y[le+pe]=ge,++_e,--pe}pe<se-_e?(rn(Y,le,pe),le+=_e,se-=_e):(rn(Y,le+_e,se-_e),se=pe)}}function Kt(Y,le){rn(Y,0,le),an(Y,le)}function Jt(Y,le,se,ge,ve,_e,pe,Oe,de,ke){var Ee=-ve,De,xe,Ne,je,Se,ze,Pe=1;for(xe=0,Ne=0;Ne<se.length;++Ne)xe+=se[Ne];for(De=A(xe+1),xe=0,ze=0,Ne=0;Ne<se.length;++Ne){var Be=ze;for(ze+=se[Ne],je=se[Ne]-1,Se=0;Se<se[Ne];je=Se++){var at=Se,Ze=je;le[Be+je].y!=le[Be+Se].y&&(De[xe].invert=0,le[Be+je].y>le[Be+Se].y&&(De[xe].invert=1,at=je,Ze=Se),De[xe].x0=le[Be+at].x*ge+_e,De[xe].y0=(le[Be+at].y*Ee+pe)*Pe,De[xe].x1=le[Be+Ze].x*ge+_e,De[xe].y1=(le[Be+Ze].y*Ee+pe)*Pe,++xe)}}Kt(De,xe),jt(Y,De,xe,Pe,Oe,de)}function Zt(Y,le,se,ge,ve,_e,pe,Oe,de){var ke=(le+2*ge+_e)/4,Ee=(se+2*ve+pe)/4,De=(le+_e)/2-ke,xe=(se+pe)/2-Ee;return de>16||(De*De+xe*xe>Oe?(Zt(Y,le,se,(le+ge)/2,(se+ve)/2,ke,Ee,Oe,de+1),Zt(Y,ke,Ee,(ge+_e)/2,(ve+pe)/2,_e,pe,Oe,de+1)):Y.push({x:_e,y:pe})),1}function Qt(Y,le,se,ge,ve,_e,pe,Oe,de,ke,Ee){var De=ge-le,xe=ve-se,Ne=_e-ge,je=pe-ve,Se=Oe-_e,ze=de-pe,Pe=Oe-le,Be=de-se,at=v(De*De+xe*xe)+v(Ne*Ne+je*je)+v(Se*Se+ze*ze),Ze=v(Pe*Pe+Be*Be),ft=at*at-Ze*Ze;if(!(Ee>16))if(ft>ke){var Ve=(le+ge)/2,$e=(se+ve)/2,Me=(ge+_e)/2,it=(ve+pe)/2,st=(_e+Oe)/2,mt=(pe+de)/2,Tt=(Ve+Me)/2,Ot=($e+it)/2,Et=(Me+st)/2,Dt=(it+mt)/2,wt=(Tt+Et)/2,en=(Ot+Dt)/2;Qt(Y,le,se,Ve,$e,Tt,Ot,wt,en,ke,Ee+1),Qt(Y,wt,en,Et,Dt,st,mt,Oe,de,ke,Ee+1)}else Y.push({x:Oe,y:de})}function mn(Y,le,se){for(var ge=[],ve=le*le,_e=-1,pe=0,Oe=0,de=0,ke=0,Ee=Y.length;ke<Ee;++ke)switch(Y[ke].type){case r:_e>=0&&(se[_e]=ge.length-pe),++_e,pe=ge.length,Oe=Y[ke].x,de=Y[ke].y,ge.push({x:Oe,y:de});break;case i:Oe=Y[ke].x,de=Y[ke].y,ge.push({x:Oe,y:de});break;case a:Zt(ge,Oe,de,Y[ke].cx,Y[ke].cy,Y[ke].x,Y[ke].y,ve,0),Oe=Y[ke].x,de=Y[ke].y;break;case s:Qt(ge,Oe,de,Y[ke].cx,Y[ke].cy,Y[ke].cx1,Y[ke].cy1,Y[ke].x,Y[ke].y,ve,0),Oe=Y[ke].x,de=Y[ke].y;break}return se[_e]=ge.length-pe,ge}function cn(Y,le,se,ge,ve,_e,pe,Oe,de,ke){Oe|=0,de|=0;var Ee=ge>ve?ve:ge,De=[],xe=mn(se,le/Ee,De);xe&&Jt(Y,xe,De,ge,ve,_e,pe,Oe,de)}function dn(Y){var le={};if(!ne(le,Y,0))return null;var se=Rt(le);return le.ascent=se.ascent,le.descent=se.descent,le.linegap=se.linegap,le}function Ht(Y,le,se,ge){ge=ge||se;var ve=se/Y.ascent,_e=ge/Y.ascent,pe=J(Y,le);if(!pe&&le)return null;var Oe=kt(Y,pe),de=Wt(Y,pe,ve,_e,0,0),ke=de.x1-de.x0,Ee=de.y1-de.y0,De=null;if(ke&&Ee){var xe={pixels:De=new Uint8Array(ke*Ee),w:ke,h:Ee,stride:ke};cn(xe,.35,Oe,ve,_e,0,0,de.x0,de.y0)}var Ne=Pt(Y,pe);return{glyph:pe,pixels:De,width:ke,height:Ee,top:-de.y0,left:de.x0,advance:m(Ne.advanceWidth*ve)}}function Bt(Y,le,se,ge){ge=ge||se;var ve=se/Y.ascent,_e=ge/Y.ascent,pe=J(Y,le);if(!pe&&le)return null;var Oe=kt(Y,pe),de=Pt(Y,pe),ke=0,Ee=0,De=[];if(Oe)for(var xe=0,Ne=Oe.length;xe<Ne;xe++){var je=Oe[xe],Se;if(je.type==r)Se={type:"M",x:je.x*ve,y:je.y*_e};else if(je.type==i)Se={type:"L",x:je.x*ve,y:je.y*_e};else if(je.type==a)Se={type:"Q",x:je.x*ve,y:je.y*_e,cx:je.cx*ve,cy:je.cy*_e};else if(je.type==s)Se={type:"C",x:je.x*ve,y:je.y*_e,cx1:je.cx*ve,cy1:je.cy*_e,cx2:je.cx1*ve,cy2:je.cy1*_e};else continue;Se.y>ke&&(ke=Se.y),Se.y<Ee&&(Ee=Se.y),De.push(Se)}return De.advance=de.advanceWidth*ve,De.ascent=ke,De.descent=Ee,De}return{InitFont:dn,GetGlyph:Ht,GetPaths:Bt}})();function pM(r){if(typeof r=="string"){for(var i=/[^A-Za-z0-9+\/=\s]/.test(r),a=i?r:atob(r),s=a.length,l=new Uint8Array(s),c=0;c<s;c++)l[c]=a.charCodeAt(c);return l}else{if(r instanceof Uint8Array)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r)}throw new ReferenceError("data must be a binary or base64 encoded string or Uint8Array")}Sl.loadFont("OCR-A",100,100,"AAEAAAAPAIAAAwBwRkZUTXxHoksAADPIAAAAHEdERUYAmQAGAAAyIAAAACBHUE9TuP+4/gAAM5gAAAAwR1NVQuq3l/0AADJAAAABWE9TLzKDm4kvAAABeAAAAGBjbWFwO6GiGgAAArgAAAFaZ2FzcP//AAMAADIYAAAACGdseWYfHUemAAAE8AAAKUBoZWFkFeCL3QAAAPwAAAA2aGhlYQcqAgQAAAE0AAAAJGhtdHgagBVHAAAB2AAAAOBsb2NhH+IWRAAABBQAAADabWF4cACxAF0AAAFYAAAAIG5hbWUIp3NfAAAuMAAAAoJwb3N0oJoboAAAMLQAAAFkAAEAAAACAAAhYPsHXw889QALA+gAAAAA2gMjvQAAAADaAyO9AD7/LAJ8BFIAAAAIAAIAAAAAAAAAAQAABFL/LABaAtMAAAAAAnwAAQAAAAAAAAAAAAAAAAAAAAQAAQAAAGwAWgADAAAAAAACAAAAAQABAAAAQAAAAAAAAAACAtMBkAAFAAACigK8AAAAjAKKArwAAAHgADEBAgAAAgAFCQAAAAAAAAAAACMAACoAAAAAAAAAAABQZkVkAEAAICWgAyD/OABaBFIA1AAAAAEAAAAAAjgDDAAAACAAAQLTAAAAAAAAAtMAAALTAAAA9gBJAEkASQBJAEkA3QDdAKwASQBJAKwASQDdAEkASQBJAEkASQBhAEkASQBJAEkASQDdAKwASQBJAEkASQBJAEYASQBJAEkASQBJAEkASQBJAHoASQBJAEkASQBJAEkASQBJAEkASQBJAEkASQBJAEkASABJAEkASQBIAEkAegBJAEkASQBJAEkAYQBJAEkAegB6AEkAegBBAEkASQBJAEkASQBJAEkASQBJAD4ASQBJAEkASQEPAEkASQBxAHEAcQE3AFcA7QBxAQMA1ABxAAAAAwAAAAMAAAAcAAEAAAAAAFQAAwABAAAAHAAEADgAAAAKAAgAAgACAH4kQiUCJaD//wAAACAkQCUCJaD////j3CLbY9rGAAEAAAAAAAAAAAAAAAABBgAAAQAAAAAAAAABAgAAAAIAAAAAAAAAAAAAAAAAAAABAAADBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAFIApgDoAS4BigGqAdYCAgJKAnQCkAKsAsYC5AMIAzIDYAOcA8gD+gQmBFIEggSuBNwFDAU0BVwFhAXEBhIGPgZwBqgG5AcKBy4HageWB8QH7gggCDoIZgiICMoI8glMCYIJwAnmChAKNAp0Cq4K1gr6CyYLRAtwC5QLrgvODBYMdAysDRANag2eDhYOSA6EDsYO+A8iD2YPmA/yEFgQvBDqETQRbhGgEcwSDhJEEnoSqBLiEwITPBNyE5ITthPeE+wT+hQUFEYUaBSIFKAAAAACAPYAAAGNAwwADwAfAAA3NTQ2OwEyFh0BFAYrASImETQ2OwEyFh0BAxQGIyImJ/YeFTEVHh4VMRUeHhUxFB8ZHhQVHAIzKhUdHRUqFR4eArwUHhwTA/6BFR0dFQAAAAABAEkBqAI7AwwAEwAAEychFQYHBiMiJjUnIwcOASMiJidKAQHyJgsMKBQgKHIqAxwSExwDAsJKSrkvMhoS09YRGBgRAAIASQB/AjsDDAA9AEEAABM0NjsBNSMiJjQ2OwE1NDYyFh0BMzU0NjIWHQEzMhYUBisBFTMyFhUUBisBFRQGIiY9ASMVFAYiJj0BIyImNzM1I0kdFTExFR0dFTEdKh5hHiodMRUeHhUxMRUeHhUxHSoeYR4qHTEVHchhYQFcFB5vHiodeBQeHhR4eBQeHhR4HSoebx4UFR53FR4eFXd3FR4eFXceR28AAAEASQAAAjsDDAAxAAA2NDYzITUhIiY9ATQ2OwE1NDYzMhYdATMyFhQGIyEVITIWHQEUBisBFRQGIyImPQEjIkkdFQFb/qUVHR0VlB4VFB6UFR4eFf6lAVsVHh4VlB4UFR6UFccqHkQeFaoVHXgUHh4UeB0qHkQeFaoVHXcVHh4VdwAAAAMASQAAAjsDDAAPAB8ALwAANzQ3ATYzMhYVFAcBBiMiJhE1NDY7ATIWHQEUBisBIiYBNTQ2OwEyFh0BFAYrASImSQoBjQ4aFR4L/nMOGhUdHRVjFR4eFWMVHQEpHhVjFR4eFWMVHocUCwH+Ex0VEg3+AhMdAhNVFB4eFFUVHh79w1QVHh4VVBUeHgAAAwBJAAACOwK3AC4ANgBBAAA3NTQ/AScmPQE0NjsBMhYdARQPARc3NjMyFhUUDgIHFxYVFAYjIi8BBwYrASImNxQWOwE3JwcRFzc1NCYrASIGFUkRXGANWT5gPlkRfWszDxIVHhAPIQI0Dh4VFw43Sg8RYj5ZZR4UTzhrTlVvHhRgFB6XRRgPT2YPFEU+WVk+RRkOa3IsDB4VDRoOGAI4EBIVHhA7PwxZPhUdMHJCASpbXi4UHh0VAAEA3QFUAaYDDAARAAATETQ2OwEyFhcUBg8BDgEjIibdHhVjFRwCMhoZBRoSFR4BhgFUFB4dFQawVVURFR0AAAABAN0AAAHZAwwAGwAAEzU0PwE2MzIWFRQPAQYdARQfARYVFAYjIi8BJt0rdRAYFR8MdRYWdQodFRgQdSsBJsBFOJYTHhQOEpUdIsAiHZUPEBUeE5Y4AAAAAQCsAAABpgMMABsAADc0PwE2PQE0LwEmNTQ2MzIfARYdARQPAQYjIiasCnUWFnUKHRUYEHUrK3UQGBUdMxAPlR0iwCIdlQ8RFB4TljhFwEU4lhMeAAAAAAEASQBVAjsCtwAzAAA3ND8BJyY1NDYzMh8BNTQ2MzIWHQE3NjMyFhUUDwEXFhUUBiMiLwEVFAYjIiY9AQcGIyImSRGZmREdFRMOcx4VFB5zDRQVHhKZmRIeFRQNcx4UFR5zDhMVHdwYD4ODDxgVHQxikRUdHRWRYgwdFRcQg4MQFxUdDGKRFR0dFZFiDB0AAAEASQCNAjsCfwAdAAASNDY7ATU0NjMyFh0BMzIWFAYrARUUBiMiJj0BIyJJHRWUHhUUHpQVHh4VlB4UFR6UFQFxKh6UFB4eFJQeKh2UFR4eFZQAAAEArAAAAdcBZAAQAAASNDY7ATIWHQEUBiImPQEjIqwdFccVHR0qHpQVARwqHh4V/hUeHhXMAAAAAQBJASkCOwG5AA8AABM1NDYzITIWHQEUBiMhIiZJHRUBjRUeHhX+cxUdAVwqFR4eFSoVHh4AAAABAN0AfwGmATkADwAANzU0NjsBMhYdARQGKwEiJt0eFWMVHh4VYxUeslUVHR0VVRUeHgAAAQBJAAACOwMMAA8AADc0NwE2MzIWFRQHAQYjIiZJBgGNDx0VHgf+cw8dFR0zDQwCpxkeFAwO/VkZHgAAAgBJAAACOwMMAA8AEwAANxE0NjMhMhYVERQGIyEiJjchESFJPCkBKCg9PSj+2Ck8ZQEo/thlAkIpPDwp/b4pPDwpAkIAAAAAAQBJAAACOwMMABwAADc0NjsBESMiJjU0NjsBETM1NDYyFh0BFAYjISImSR0VlJQVHR0V+WIdKh4eFf5zFR0zFB4CQh4VFB79WcwVHh4V/hUeHgAAAQBJAAACOwMMAB4AADMRNDYzITUhIiY1NDYzITIWHQEUBiMhFSEyFhUUBiNJPCkBKP6lFR0dFQFbKD08Kf7YAVoVHh4VAVQpO+8eFRQePCnvKDzvHhQVHgAAAAABAEkAAAI7AwwAKgAANzQ2MyE1NCYrASImNDY7ATI2PQEhIiY1NDYzITIWHQEUBxYdARQGIyEiJkkdFQFbHxTFFR0dFcUVHv6lFR0dFQFbKD0oKD0o/qUVHTMUHrwUHx0qHh4UvB4VFB48Kbw6Kys6vCk8HgAAAAABAGEAAAIiAwwAHQAAExE0NjIWFREzETQ2MzIWFREyFhQGIxUUBiMiJj0BYR4qHcUeFRQeFR0dFR4UFR4A/wHbFB4eFP6KASEVHR0V/t8eKh3MFR4eFcwAAQBJAAACOwMMACIAADc0NjMyHwEzNSERITIWFRQGKwEVMzIWHQEUBisBIi4CJyZJHRUMCFrt/tYBXBUeHhX3xSg9PSjjFCkaLAkeXRUdBCbvAbgeFBUe7j0o7yk8CgsVBA0AAAIASQAAAjsDDAAXABsAADcRNDY7ATIWFRQGIxEhMhYdARQGIyEiJjchNSFJHRUyFR0dFQFbFR4eFf5zFR1kASn+1zMCpxQeHhQVHv69HhX+FR4eR5oAAAABAEkAAAI7AwwAGwAAEzU0NjMhERQPARUUBiMiJj0BND8BNSEOASMiJkkdFQHAErUeFBUeErX+1wMcExUdAq8rFB7+zxcQmucVHh4V/hcQmrUSGB0AAAAAAwBJAAACOwMMABcAGwAfAAA3NTQ2MxE0NjsBMhYVETIWHQEUBiMhIiY3ITUhNzM1I0k7KRwVxxUcKD09KP7XKTtkASn+12RhYWXvKTwBIRUdHRX+3z0o7yk8PCnvZe4AAgBJAAACOwMMABcAGwAAExE0NjMhMhYVERQGKwEiJjU0NjMRISImNyE1IUkdFQGNFR4eFTIVHR0V/qUVHWQBKf7XAdsA/xQeHhT9WRUeHhUUHgFDHkeaAAIA3QB/AaYCjQAPAB8AADc1NDY7ATIWHQEUBisBIiYRNTQ2OwEyFh0BFAYrASIm3R4VYxUeHhVjFR4eFWMVHh4VYxUeslUVHR0VVRUeHgFoVRUeHhVVFR0dAAAAAgCsAAAB1wK3ABAAIAAAEjQ2OwEyFh0BFAYiJj0BIyIDNTQ2OwEyFh0BFAYrASImrB0VxxUdHSoelBUdHRVkFB4eFGQVHQEcKh4eFf4VHh4VzAExVRUdHRVVFR4eAAAAAQBJAFUCOwK3ABYAABM1NDclNjMyFhUUBw0BFhUUBiMiJyUmSRgBjQsPFR4Z/pkBZxkeFQ8L/nMYAXArHQ/pBx0VHBDT0xAcFR0H6Q8AAAACAEkA/wI7AjgACwAXAAASNDYzITIWFAYjISImNDYzITIWFAYjISJJHRUBjRUeHhX+cxUdHRUBjRUeHhX+cxUBHCoeHiod8SoeHiodAAAAAAEASQBVAjsCtwAWAAA3NDctASY1NDYzMhcFFh0BFAcFBiMiJkkYAWj+mBgdFQ8LAY0ZFP5uCw8VHYcdD9PTDx0VHQfpEBwqHQzsBx0AAAAAAgBJAAACOwMMAB4AKAAAEzQ3ATYyHwEWHQEUBwUVFAYiJj0BNDclNScFBiMiJhM0NjIWFRQGIiZJEQEqDyQPYxIS/ugeKh0RARkx/vcPEhUdYx0qHh4qHQHbGA4A/wwMVQ8XVRcQ7z4VHR0VVRkO7yYq4wwe/m0UHh4UFR4eAAACAEkAAAI7AwwALQA4AAA3NTQ2OwEyFhURFBYyNjURNCYrASIGBwYjIiY1NDc2OwEyFhURFAYjIicGIyImNxQWMjY9ASMiBhVJWD1kFB4dKB0uH48ZLQwOHxUdNjdEj0lpWT05Kiw4PVhlHCgdMRQclrc+WB4V/uYUHR0UAcQgLSMXGx4VJDEyakj+PD1ZJydYPhQdHRToHRQAAAACAEYAAAI8AwwAFQAYAAA3Ez4BMhYXExQGIyImLwEjBw4BIyImNzMDRssFGiIcBMofFREaBSffJwUbERUfqqNSMwK1EBQUEP1LFR4UEIaGEBQe8QEWAAAAAwBJAAACOwMMAA4AGAAiAAAzESEyFh0BFAcWHQEUBiMnMzI2PQE0JisBNTMyNj0BNCYrAUkBKFJ4RkZ4UsPDKTw8KcPDKTw8KcMDDHhSJVk+PlklUnhlPSglKTxlPCglKD0AAAEASQAAAjsDDAAlAAATND8BPgE7ATIWFRQGKwEiDwEGFB8BFjsBMhYVFAYrASImJyYnJkkYZRBLLboVHh4Vuh8NZw0NZw0fuhUeHhW6LEkSShwYAYY1MswkLx4UFR4cyxw8HMscHhQVHjAkjT4zAAACAEkAAAI7AwwAGwAoAAA3NDY7AREjIiY1NDY7ATIWHwEWFA8BDgErASImNzMyPwE2NTQvASYrAUkdFTExFR0dFbosSRJmGRllEEstuhUdyCQfDWcODmcNHyQzFB4CQh4VFB4wJMs0ZjTMJC8eRxzLIhgeHMscAAABAEkAAAI7AwwAGQAAMxEhMhYVFAYjIRUzMhYUBisBFSEyFhUUBiNJAb8VHh4V/qaUFB4eFJQBWhUeHhUDDB4UFR7uHiod7x4UFR4AAQBJAAACOwMMABYAADcRITIWFRQGIyEVMzIWFAYrAREUBiImSQG/FR4eFf6m9xUdHRX3HiodMwLZHhQVHpodKh7+ixUeHgAAAQBJAAACOwMMACoAADcRND8BNjsBMhYVFAYrASIPAQYVERQWOwEyNj0BIyImNDY7ARUUBisBIiZJKogtS5UVHh4VlRkPiBUeFMMUH2MVHR0VyFo+wz9YmAEPRTawOh4UFR4Urhwi/vEVHh4VZx0qHsw+WlkAAAAAAQBJAAACOwMMABsAADcRNDYyFhURIRE0NjIWFREUBiImNREhERQGIiZJHSoeASgdKh4eKh3+2B4qHTMCpxQeHhT+3wEhFB4eFP1ZFR4eFQEh/t8VHh4AAAEASQAAAjsDDAAfAAA3NDY7AREjIiY1NDYzITIWFRQGKwERMzIWFRQGIyEiJkkdFZSUFR0dFQGNFR4eFZSUFR4eFf5zFR0zFB4CQh4VFB4eFBUe/b4eFBUeHgAAAQB6AAACCQMMABsAADc1NDYyFh0BFBY7ATI2NRE0NjIWFREUBisBIiZ6HiodHhVfFR4dKh5aPl8+WpeaFR4eFZoVHR4UAkMUHh4U/b0+WVkAAAAAAQBJAAACOwMMAB4AADcRNDYyFh0BATYzMhYVFAcJARYVFAYjIicBFRQGIiZJHSoeATkPEhUeEv6gAWASHhUSD/7HHiodMwKnFB4eFOYBDAweFBgP/tP+0w8XFR4MAQzlFR4eAAEASQAAAjsDDAAOAAAzETQ2MhYVESEyFhUUBiNJHSoeAVoVHh4VAtoUHh4U/YseFBUeAAABAEkAAAI7AwwAGwAANxEzFzczERQGIiY1EQcVFAYjIiY9AScRFAYiJkl+e3p/HiodYh4UFR5hHiodMwLZr6/9JxUeHhUCTowaFR4eFRqK/bQVHh4AAAAAAQBJAAACOwMMABEAADcRMwERNDYyFhURIwERFAYiJkmFAQgdKh6G/vkeKh0zAtn9pgIoFB4eFP0mAlj92xUeHgAAAAACAEkAAAI7AwwAFgApAAATND8BPgEzMhYfARYUDwEOASMiJi8BJjcGFB8BFjMyPwE2NTQvASYjIgdJGGsQPyYnPxBrGRlrED8nJj8QaxhyDQ1sCBIUCGsODmwIExEJAYY1MtcfKSkf1zRmNNcfKSkf1y5zHDwc1hEQ1yIYHhzVEhIAAAACAEkAAAI7AwwADwAZAAA3ESEyFh0BFAYrARUUBiImEzMyNj0BNCYrAUkBWj5aWj71HiodZfUUHx8U9TMC2Vk+tD5a9hUeHgFwHhW0FB4AAAIASQAAAjsDDAAhAEAAADcRND8BNjMyFhURFA4FBxczMhYVFAYrAScHBiMiJjcUOwE3JyY1NDYzMh4DFz4ENRE0JisBBwYVSUbhIC8ySggUDiMOLAUYQRUeHhWGJUsiLTJIZRUIbCUDHhUNFA8IDAIEHw4UCQ0KB+giewEaXj2+Hkky/uYXKSUZIg0kBD0eFBUeXkAeSTIWXF4HCxUeCxoRJAQEGQ0aHBEBGgkMwx4wAAAAAAIASQAAAjsDDAAZACMAADcRITIWHQEUBisBExYVFAYjIicDIxEUBiImEzMyNj0BNCYrAUkBWj5aWz06ywceFR0P6UUeKh1l9RQfHxT1MwLZWj40Plr+pA4LFR4ZAY/+ixUeHgHvHxQ0FR4AAAEASQAAAjsDDAAsAAA3NDYyFhUUFjsBMjUBJj0BNDY7ATIWFRQGIiY1NCYrASIdAgEWFQ4BKwEiJkkdKh4UDvkN/ooXQy75N1EeKh0VDvkMAXQZAkEv+TdQhxUeHhUOFA0B4iAmAy1CUDcVHh4VDRUKAwT+Ih4oL0NQAAABAEkAAAI7AwwAGAAAEzUhFRQGIiY9ASMRFAYjIiY1ESMVFAYiJkkB8h4qHWIeFBUeYR4qHQKFh4cVHh4VIv2MFR4eFQJ0IhUeHgAAAQBJAAACOwMMABsAADcRNDYyFhURFBY7ATI2NRE0NjIWFREUBisBIiZJHSoeHhTDFB8dKh5aPsM+WZcCQxQeHhT9vRUdHhQCQxQeHhT9vT5ZWQAAAQBJAAACOwMMABUAABM1NDYyFh0BGwE1NDYyFh0BAwYjIidJHSoelJQdKh7KDSIjDQIltRQeHhSh/oYBeqEUHh4UtP36ICAAAQBJAAACOwMMACsAADcRNDYyFhURFzM+ATcRNDYzMhYVER4BFzM3ETQ2MhYVEQcGKwEiJwYrASInSR0qHhwpAhQGHhUUHgYUAikdHSoeOQ8dYiASFR5hHg96AmAUHh4U/bswAyYKAUMVHR0V/r0KJgMwAkUUHh4U/aBhGSMjGQABAEkAAAI7AwwAIwAANzQ3EwMmNTQ2MzIXGwE2MzIWFRQHAxMWFRQGIyInCwEGIyImSQa4uAYdFR0Pm5oPHRUeB7i4Bx4VHQ+amw8dFR0zDQwBOgE6DA4UHhn++AEIGR4UDA7+xv7GDgsVHhkBCP74GR4AAAEASQAAAjsDDAAZAAATNTQ2MhYdARc3NTQ2MhYdAQcRFAYjIiY1EUkdKh6Ukx4qHsceFBUeAnNnFB4eFES+vkQUHh4UZ/7+vhUeHhUBQgAAAQBIAAACOwMMABMAADcBISImNTQ2MyEVASEyFhUUBiMhSAFo/ssVHR0VAcD+mAE1FR4eFf5BQAJnHhUUHkD9mR4UFR4AAAAAAgBJAAACOwMMABcAGwAANxE0NjMhMhYVFAYrAREzMhYVFAYjISImNzMRI0kdFQGNFR4eFcbGFR4eFf5zFR1kMDAzAqcUHh4UFR79vh4UFR4eRwJCAAAAAAEASQAAAjsDDAAPAAATNDYzMhcBFhUUBiMiJwEmSR0VHQ8BjQceFR0P/nMGAtoUHhn9WQ4LFR4ZAqcMAAIASQAAAjsDDAAXABsAADc0NjsBESMiJjU0NjMhMhYVERQGIyEiJiUzESNJHRXGxhUdHRUBjRUeHhX+cxUdAV0wMDMUHgJCHhUUHh4U/VkVHh5HAkIAAAABAEgAfwI7AmIAFAAANxM2MzIXExYVFAYjIi8BBwYjIiY1SM0NIB4OyAUeFRsOnZ4OGxUdvgGJGxv+gAwJFR4V7OwVHhUAAAABAEn/mwI7AAAADQAAFzQ2MyEyFhUUBiMhIiZJHRUBjRUeHhX+cxUdMhQeHhQVHh4AAAAAAQB6AagCCQMMABAAABM0NjsBMhcTFhUUBiMiJwEmeh4VYxoOywYeFRAQ/tYSAtoUHhP++gsNFR4MAP8PAAAAAAIASQAAAjsCOAAmADQAADc1NDY7ATIXNC4FKwEiJjQ2OwEyFhcTFAYjIiY1BwYrASImNxQWOwE3NTQmKwEiBhVJWD3BGBQBAQMGCxEMuhUdHRW6PVcCDR8VFB1KCg+VPVhlHBSHax8SwRMdljg+WAcHIQ8cDRAGHSoeVTz+ixUdHhQrB1g+FB0/LBIdHRQAAAIASQAAAjsDDAApAEMAADcRNDYyFh0BNjsBMh4FFxYdARQOBA8BBisBIi4BJxUUBiImNxQfARY7ATI+ATc2PQE0LgEnJisBIg8BBhVJHSoeRENLDRgYDhgHGwE1BA4HGgURESk4Sx02HRceKh1lEVYMFEsOFh4CEg0fARUUSxQMVhEzAqcUHh4U4kADCwUTBRcBLkTOEBsaDxoGDw4kFhcVDxUeHsIXDkoMDB4BDhfODhQaARMMSgsaAAAAAQBJAAACOwI4ACYAADc1NDc+AzsBMhYUBisBIg8BBh0BFB8BFjsBMhYVFAYrASIvASZJNAszITof0xUeHhXTFAxWERFWDBTTFR4eFdM5KVY04HhFLQkxGxkeKh0MSgsaeBcPSQweFBUeJEotAAAAAAIASQAAAjsDDAAtAEgAADc1NDY3Njc2OwEyHgQXNTQ2MhYVERQGIiY9AQ4CKwEiLgcnJjcUHgIXFjsBMj8BNj0BNC8BJisBIg4BBwYVSSonBQMpOEsQHhMeCB8CHSoeHiodFx02HksLExMOEQoRBhMCNGUMDRgEDxFLEg5WEhJWDBRLDhcaBBK1zjA7IAQCJAcHFAYcAecUHh4U/VkVHh4VEBYXFgIGBQoGDgURAitHDBYMEwMMDEoNGHgVEEoMDRoDEBYAAAAAAgBJAAACOwI4ADQAQQAANzU0PgE3NjsBMh4GHwEWHQEUBiMhFRQeAhcWMyEyFhUUBiMhIi4HJyY3ITU0JisBIg4BBwYVSSAaHyk4fQoTFAwUBxQECws1HhX+pgwNGAQPEQEFFR4eFf77CxMTDhEKEQYTAjRlASg8Gn0OFh4CEbXOIzwYGiQCBgQMBBECCgouRHwVHh8MFgwTAwweFBUeAgYFCgYOBRECK8tKGjYMHgEOFwAAAQBhAAACIQMMACQAABI0NjsBNTQ2OwEyFhUUBisBIgYdATMyFhQGKwERFAYiJjURIyJhHRUxaEp5FR0dFXkgLWMUHh4UYx0qHjEVAfAqHiJKaB4UFR4tICIeKh3+YBUeHhUBoAAAAAACAEn/LAI7AjgAQgBZAAA3NTQ+CDc2OwEyHgQXNTQ2MhYVERQOBA8BBisBIiY0NjsBMj4BNzY9AQ4CKwEiLgMvASY3FBY7ATI/ATY9ATQvASYrASIOAQcGFUkDAwsEEAQVAxcBKThLEB4THggfAh0qHgQOBxoFEREpONMVHh4V0w4XHAMSFx42HUsPHxIeBxARNGQ7G0sUDFYSElYMFEsPFxgGEuCjCxYQFAoTBhIDEwEkBwcUBhwBEhUeHhX93BAbGg8aBg8OJB0qHg4aAw4XjRUYFwcGFQUPDi1FGzYMSg4XThUQSgwOGAQSFAAAAAABAEkAAAI6AwwAIAAANxE0NjIWHQE3NjsBMhYXExQGIyImNQMuASsBBxEUBiImSR0qHmAmKzk9VwIMHRUUHg0CGxRHox4qHTMCpxQeHhT3PRhVPP6MFR4dFAFzExxp/skVHh4AAgB6AAACCQM2ABoAKgAANzQ2OwERIyImNDY7ATIWFREzMhYVFAYjISImEzU0NjsBMhYdARQGKwEiJnoeFWNjFR4eFZUUHmIVHh4V/tcVHmMeFTIUHh4UMhUeMxQeAW4dKh4eFf5gHhQVHh4CvCoVHR0VKhUeHgAAAgB6/ywCCQM2AB8ALwAAFzQ2MzIeAjsBMjY1ESMiJjQ2OwEyFhURFAYrASImJxM1NDY7ATIWHQEUBisBIiZ6HhUUGAkZFWIUH5UVHh4VxhUeWT5iOFYI+B4VMRUeHhUxFR5NFR4bHxsdFAIRHSoeHhX9vT5YSjUDLyoVHR0VKhUeHgAAAQBJAAACOwMMAB8AADcRNDYyFhURJTYzMhYVFA8BFxYVFAYjIiclBxUUBiImSR0qHgEIDhIVHhLL/RIdFRMP/vcwHiodMwKnFB4eFP5x4QweFRcPrtgPFxUeDOMqkhUeHgAAAAEAegAAAgkDDAAbAAA3NDY7AREjIiY1NDY7ATIWFREzMhYVFAYjISImeh4VYmIVHh4VlRQeYhUeHhX+1xUeMxQeAkIeFRQeHhT9ix4UFR4eAAAAAAEAQQAAAkICOAAuAAA3ETQ2MzIWFzYzMhc3NjMyFhcTFAYjIiYnAyYrAQcRFAYjIiY1ETQrAQcRFAYiJkEdFRAbBSktPSQWISovSAEPHRUUHgEOAg8GRB4UFR4WCEseKh0zAdIVHhQPIzASG0Iv/m8VHh0UAY8TOv6aFR4eFQGKFkH+oRUeHgABAEkAAAI6AjgAIAAANxE0NjIWHQE3NjsBMhYXExQGIyImNQMuASsBBxEUBiImSR0qHmAmKzk9VwIMHRUUHg0CGxRHox4qHTMB0hUeHhUiPRhVPP6MFR4dFAFzExxp/skVHh4AAgBJAAACOwI4ACYAQAAANzU0PgE3NjsBMh4FFxYdARQOBA8BBisBIi4EJyY3FB4CFxY7ATI+ATc2PQE0JisBIg4BBwYVSSAaHyk4fQ0YGA4YBxsBNQQOBxoFEREpOH0QHRQbCxsENGUMDRgEDxF9DhYeAhI8Gn0OFh4CEbXOIzwYGiQDCwUTBRcBLkTOEBsaDxoGDw4kBwcSCBgDK0cMFgwTAwwMHgEOF84aNgweAQ4XAAAAAgBJ/ywCOwJNACwASgAAFxE0NjIWHQE+CDsBMh4BFx4EHQEUDwEGKwEiLgEnFRQGIiYTFB4CFx4CFxY7ATI/ATY9ATQvASYrASIPAQYVSR0qHgITBhIKEg8TFQsVHTcbGQIwDB0KNVYpORUfNyAVHiodZQoKFQMHGBQJDhUVFAxXERFXDBQVFQ5aDqICvRQeHhQbAhQFEQYNBQcCGBUXAikPJiYXoUQuSiQYHBfYFR0dAZIMFQsSAwcZFAgODEoNGKEYDUsMDlsLFwAAAgBJ/ywCOwI4AC0ASAAANzU0Njc2NzY7ATIeBBc1NDYyFhURFAYiJj0BDgIrASIuBycmNxQeAhcWOwEyPwE2PQE0LwEmKwEiDgEHBhVJKicFAyk4SxAeEx4IHwIdKh4eKh0XHTYeSwsTEw4RChEGEwI0ZQwNGAQPEUsSDlYSElYMFEsOFxoEErXOMDsgBAIkBwcUBhwBEhUeHhX9WRUdHRXlFhcWAgYFCgYOBRECK0cMFgwTAwwMSg0YeBUQSgwNGgMQFgAAAAABAEkAAAI7AjgAHwAANxE0NjIWHQE3NjsBMhYdARQGIiY9ATQmKwEHERQGIiZJHSoedwsSYz1ZHiodHRRRph4qHTMB0hUeHhU7ZghZPRwVHR0VHBQdj/7vFR4eAAEASQAAAjoCOAA0AAA3NDYzMhYXHgE7ATI2NTQnJS4BNTQ3NjsBMhcWFRQGIyImKwEiBhUUFwUeAR0BDgErASInJkkcFRImCQIUBMsYGx3+6yIqJSY11kswCh4VEi0T1g0PEAEWJjUBWj+9ST4TXRUdHQMBCSAWIg14D0MnMyQmPw0RFR4rEgsSBngRTS4CP1k1EAABAEkAAAI7AuIAKgAAEjQ2OwE1NDYyFh0BMzIWFAYrAREUFjsBMj4CMzIWHQEOASsBIiY1ESMiSR0VMR0qHsUVHR0VxRwUZBQZCRkUFR4KVTdkPVgxFQHwKh53FR4eFXceKh3+wxQdGx8bHhUINEtZPQE9AAEASQAAAjsCOAAgAAATNDYzMhYVEx4BOwE3ETQ2MhYVERQGIiY9AQcGKwEiJidJHRUUHg0CGxRHpB0qHh4qHWEmKzk8WAICBRUeHRT+jRQbaAE4FR4eFf4uFR4eFSM+GFU7AAABAEkAAAI7AjgAGgAAEzU0NjIWHQEbATU0NjIWHQEUBwMGKwEiJwMmSR0qHpOVHSoeBacNIT8hDacEAbBVFR4eFUr+rQFTShUeHhVVCgr+gh4eAX4IAAAAAQA+AAACRQI4ACsAABM0NjMyFhcTFzc1NDYzMhYdARc3Ez4BMhYdAQMHDgErASIvAQcGKwEiJi8BPh4VFB0BCiBCHhUUHkIgCgEdKB8LMwUbETEdDzc4Dx0xERsFNAIEFR8dFP7dbHJyFB4eFHJybAEjFB0eFAL+yqoQFBlfXxkUELYAAQBJAAACOwI4ACMAADc0PwEnJjU0NjMyHwE3NjMyFhUUDwEXFhUUBiMiLwEHBiMiJkkKraEMHhUXEJWUEBcVHgyhrQseFRgPn6APGBUdMxMN0MIPERUeE7OzEx4VEQ/C0A4SFR4SwcESHgAAAQBJ/ywCOwI4ACMAABY0NjsBNyMiJwMmPQE0NjIWHQETMxM1NDYyFh0BFAcBBisBIkkdFWdDFSIMlQQdKh6DIIQeKh4F/vwNIogVtyoemR8BUwgMVRUeHhVK/tQBLEoVHh4VVQoK/a4eAAAAAQBJAAACOwI4ABwAADc1NDcBISImNDYzITIWHQEUBwEhMhYVFAYjISImSQ8BYP7bFR0dFQF1FR4Q/qEBPBUeHhX+cxUdMyoXDQFSHSoeHhUqFRD+rx4UFR4eAAABAEkAAAI7AwwAKgAAEjQ2OwEyNj0BNDY7ATIWFRQGKwEVFAcWHQEzMhYVFAYrASImPQE0JisBIkkdFWEWHT0olBUeHhWUJyeUFR4eFZQoPR4VYRUBcSoeHRW8KTweFBUevDksLDm8HhQVHjwpvBQfAAAAAAIBDwAAAXQDDAAIABEAACURMxEUBiMiJhkBNDYzMhYVEQEPZR4UFR4eFRQeMwEh/t8VHh4BmwEhFB4eFP7fAAABAEkAAAI7AwwAKgAANzQ2OwE1NDcmPQEjIiY1NDY7ATIWHQEUFjsBMhYUBisBIgYdARQGKwEiJkkdFZQnJ5QVHR0VlCk8HRViFR4eFWIVHTwplBUdMxQevDksLDm8HhUUHjwpvBQeHiodHxS8KTweAAAAAAEASQGqAjsDCwAmAAATNTQ2MzIWHQEUFjI2PQE0NjIWHQEUBiMiJyY9ATQmIgYdARQGIiZJXTw6WB0oHR0qHlw9PCssHSgcHiodAgVvQVZYPzQUHx8UbxUeHhVvQVUrLj00FB4eFG8VHR0AAAEAcQAAAmMDDAATAAAzETQ2MhYdATMRIREUBiImPQEjEXEdKh5hASweKh1iATEVHh4VzAKn/s8VHh4VzP1ZAAABAHEAAAJjAwwAFQAANxEhETQ2MhYVERQGIiY1ESERFAYiJnEBjR0qHh4qHf7YHiodMwGGASEUHh4U/VkVHh4VASH+3xUeHgABAHEAAAJjAwwAGAAAExE0NjIWFREhETQ2MhYVESMRFAYjIiY1EXEdKh4BKB0qHsceFBUeAVQBhhQeHhT+3wEhFB4eFP56/t8VHh4VASEAAAEBN/+bAZwEUgADAAAFETMRATdlZQS3+0kAAAABAFf/5wJ8AyUAAwAAFxEhEVcCJRkDPvzCAAAAAQDtAAAB5gD6AA8AADc1NDY7ATIWHQEUBisBIibtHRWVFR0dFZUVHTOUFR4eFZQVHh4AAAEAcQAAAmMDDAAeAAATNDcBNjIfARYdARQHBRUUBiImPQE0NyU1JwUGIyImcREBKg8kD2MSEv7oHiodEQEZMf73DxIVHQHbGA4A/wwMVQ8XVRcQ7+cVHh4V/hkO7yYq4wweAAABAQMBqAHRAwwAEwAAATQ2OwEyFhUUBhUDFAYiJjU0NjUBAyAVYxQiATMfKCEBAtoUHhoSAQQB/wAUHhoSAQQBAAAAAAEA1AAAAf8BZAAUAAATNTQ2OwEyFh0BFAYrASImPQEjIibUHRXHFR0dFTIVHWMVHQEHKhUeHhX+FR4eFaEeAAABAHEBVAJjAbkACwAAEjQ2MyEyFhQGIyEicR0VAY0VHh4V/nMVAXEqHh4qHQAAAAAAAA4ArgABAAAAAAAAAFYArgABAAAAAAABAAQBDwABAAAAAAACAAcBJAABAAAAAAADACEBcAABAAAAAAAEAAUBngABAAAAAAAFAAoBugABAAAAAAAGAAQBzwADAAEECQAAAKwAAAADAAEECQABAAgBBQADAAEECQACAA4BFAADAAEECQADAEIBLAADAAEECQAEAAoBkgADAAEECQAFABQBpAADAAEECQAGAAgBxQBNAGEAdAB0AGgAZQB3ACAAUwBrAGEAbABhACAAKAAyADAAMQAxAC0AMQAyACkAOwAgAGIAYQBzAGUAZAAgAG8AbgAgAGMAbwBkAGUAIABiAHkAIABSAGkAYwBoAGEAcgBkACAAQgAuACAAVwBhAGwAZQBzACAAKAAxADkAOAA4AC0AOAA5ACkAIABhAG4AZAAgAFQAbwByACAATABpAGwAbABxAHYAaQBzAHQAAE1hdHRoZXcgU2thbGEgKDIwMTEtMTIpOyBiYXNlZCBvbiBjb2RlIGJ5IFJpY2hhcmQgQi4gV2FsZXMgKDE5ODgtODkpIGFuZCBUb3IgTGlsbHF2aXN0AABPAEMAUgBBAABPQ1JBAABSAGUAZwB1AGwAYQByAABSZWd1bGFyAABGAG8AbgB0AEYAbwByAGcAZQAgADIALgAwACAAOgAgAE8AQwBSACAAQQAgADoAIAAyADcALQA5AC0AMgAwADEAMgAARm9udEZvcmdlIDIuMCA6IE9DUiBBIDogMjctOS0yMDEyAABPAEMAUgAgAEEAAE9DUiBBAABWAGUAcgBzAGkAbwBuACAAMgAgAABWZXJzaW9uIDIgAABPAEMAUgBBAABPQ1JBAAAAAAIAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAbAAAAAEAAgADAAQABQAGAAcACAAJALcACwAMAA0ADgAPABAAEQASABMAFAAVABYAFwAYABkAGgAbABwAHQAeAB8AIAAhACIAIwAkACUAJgAnACgAKQAqACsALAAtAC4ALwAwADEAMgAzADQANQA2ADcAOAA5ADoAOwA8AD0APgA/AEAAQQBCALYARABFAEYARwBIAEkASgBLAEwATQBOAE8AUABRAFIAUwBUAFUAVgBXAFgAWQBaAFsAXABdAF4AXwBgAGEBAgEDAQQBBQEGAQcBCAEJAQoBCwd1bmkyNDQwB3VuaTI0NDEHdW5pMjQ0MghTRjExMDAwMAtibGFja3NxdWFyZQpwZXJpb2QuYWx0DHF1ZXN0aW9uLmFsdA9xdW90ZXNpbmdsZS5hbHQJY29tbWEuYWx0Cmh5cGhlbi5hbHQAAAAB//8AAgABAAAADgAAABgAAAAAAAIAAQADAGsAAQAEAAAAAgAAAAEAAAAKAEQAogACREZMVAAObGF0bgAkAAQAAAAA//8ABgAAAAEAAgADAAQABQAEAAAAAP//AAYAAAABAAIAAwAEAAUABmFhbHQAJnNzMDEALHNzMDIAMnNzMDMAOHNzMDQAPnNzMDUARAAAAAEAAAAeAAEAAQAcAAEAAgAaAAEAAwAYAAEABAAWAAEABQAAAQAAAAEBAAABAgAAAQMAAAEEAAYADgAWAB4AJgAuADYAAwAAAAEAMAABAAAAAQBkAAEAAAABAGgAAQAAAAEAbAABAAAAAQBwAAEAAAABAHQAAQAuAAUAEAAWABwAIgAoAAIACgBpAAIADwBqAAIAEABrAAIAEQBnAAIAIgBoAAEABQAKAA8AEAARACIAAQAGAFYAAQABABEAAQAGAEYAAQABACIAAQAGAF8AAQABAAoAAQAGAFsAAQABAA8AAQAGAFsAAQABABAAAQAAAAoALAAuAAJERkxUAA5sYXRuABgABAAAAAD//wAAAAQAAAAA//8AAAAAAAAAAAABAAAAAMw9os8AAAAA1gbbzAAAAADaAyOv");Sl.loadFont("OCR-B",96,100,"AAEAAAAPAIAAAwBwRkZUTXxHn14AADmUAAAAHEdERUYAkwAEAAA4IAAAACBHUE9TuP+4/gAAOWQAAAAwR1NVQnZYZVQAADhAAAABJE9TLzJa+GPlAAABeAAAAGBjbWFwzJGg2QAAA2QAAAFCZ2FzcP//AAMAADgYAAAACGdseWbm+CwyAAAFeAAALwRoZWFkFgqHXQAAAPwAAAA2aGhlYQeFAeAAAAE0AAAAJGhtdHgIFCYVAAAB2AAAAYpsb2NhZAZYlAAABKgAAADObWF4cACtAGkAAAFYAAAAIG5hbWWukZg3AAA0fAAAAnlwb3N0tfQXywAANvgAAAEdAAEAAAACAADO4NltXw889QALA+gAAAAA2gMiKgAAAADaAyIqAA7/GQLWAwsAAAAIAAIAAAAAAAAAAQAABFL+sABaAtMAAP/9AtYAAQAAAAAAAAAAAAAAAAAAAF8AAQAAAGYAZgAFAAAAAAACAAAAAQABAAAAQAAAAAAAAAACAsMBkAAFAAACigK8AAAAjAKKArwAAAHgADEBAgAAAgAFCQAAAAAAAAAAAK8AAABoAAAAAAAAAABQZkVkAEAAIAB+AyD/OABaBFIBUAAAAAEAAAAAAiAC+QAAACAAAQLTAAAAAAAAAtMAAALTAAAC0wD1AtMAdALTAEQCvwA/Ar8APwLTAEQC0wDnAtMA0wLTAIgC0wBEAtMARALTAHIC0wBEAtMAxALTAIACvwA/AskAXgK/AFACvwA/Ar8APwK/AFkCvwA/Ar8APwK/AD8CvwA/AtMA1gLTAG8C0wBBAtMARALTAEEC0wBgAtMARAK/AEUCvwA/Ar8AbwK/AHICvwBtAr8AoAK/AEcCvwBbAr8AeAK/AFACvwBNAr8AWwK/AD8CvwBNAr8AQgK/AFsCvwBBAr8AZwK/AGECvwA/Ar8ATQK/AD4CvwA/Ar8AUwK/AFYCvwBbAtMApQLTAIAC0wBVAtMARALTAEQC0wC2Ar8ATQK/AEoCvwB1Ar8APwK/AE0CvwBhAr8AQgK/AGoCyQCDAskAZwK/AHsCyQDLAr8APwK/AE0CvwA/Ar8ASgK/AD8CvwCaAr8AZwK/AE0CvwBNAr8AQgK/AEECvwBhAr8APwK/AGEC0wBEAQwARABSAnICBgG2AA4AAAAAAAMAAAADAAAAHAABAAAAAAA8AAMAAQAAABwABAAgAAAABAAEAAEAAAB+//8AAAAg////4wABAAAAAAAAAQYAAAEAAAAAAAAAAQIAAAACAAAAAAAAAAAAAAAAAAAAAQAAAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALABiAMYBUAG6AkICYgKMArQC8gMaAzoDVgNwA5QEEgQ2BIgE2AUSBVYFngXSBjQGegaoBtwHDAcyB1oHxAhUCIQI2glACXgJrAnaCjQKYgqYCswLAgskC2QLlgvuDB4MgAzODUQNbA2eDcgOEg5ODoAOsg7WDvoPHA9ED2APgg/eECoQaBCyEPgRLBGUEdISAhJOEoASqBLyEygTVhOiE+gUIhSYFN4VGBVGFYYVvBXyFiAWbBaEFs4XDhcmF0QXaheCAAAAAgD1/7wBfQL9AA8AGwAAFzU0NjsBMhYdARQGKwEiJhMRNDYyFhURFAYiJvUbEi4SGxsSLhIbFxskGxomGhcuEhsbEi4SGxsBcgGHExobEv55EhsaAAAAAAIAdAHHAgkC/QASACMAABM1NDY7ATIXFhUwFQ8BDgEjIiYlNTQ2OwEyFxYdAQcOASMiJnQbEh0SDg4BHQIZEhEcASQbEhcRDg4ZBBYREhsB9NwSGw0MDwEC5BAXGxLcExoNDBAE5RAUGwAAAAIARP/4Ai4DAABEAEgAADc0NjsBNyMiJjQ2OwE3PgEzMhcWFQczNzYzMhYdAQcXHgEVFAYrAQczMhYUBisBBw4BIyImPQE3IwcOASMiJyY1NycuATczNyNEGhMVJicSGxoTOygDGRASDQ4liCgNHxIbIwUQFxsSFCUlExobEjopAxoPEhskhykDGRASDQ4mBRIXnoglh/4TGqcaJhqxDhUODhCosSMaEwqcAQMZERIbpxskG7YOFRsSCqK2DxQODRGsAQIaPqcAAwA///sCHwL9AEcAWABfAAA3JjU0NjMyFxYXFhczNScuAScuAjU0NzY/ATU0NjIWHQEXFhcxFhUUBiMiJyYvARUXFhcWFx4BFRQHBg8BFRQGIiY9ASMmJxMGFRQXFhcWFxYXHgIfATUTNzY1NC8BQQIbEhYVFwwYLQUEIS4cGyIWNjZSBBoiGgRpOAkbEhcOITUGBCwcHR8fHjc3UwQaIhoFlSi8YwMECAgFBgwMChwCB1YGZWQHoAUMExodIQYNBNwBChEPDyQ2IkwqKwoBCRMaGxIJAQ5SDA4SGhMsCwHFAQ4MDBYVPytNMDENAQYSGxoTBw1kAcoORQsKCggHBQUGBgUKAQKq/iABFEo8JAIAAAAABQA///gCHwMAAA0AHAAoADcARwAAJSIVFBcWHwEzMjc2NTQHJjU0NzYzMhcWFAcGIyIDIhUUFzsBMjc2NTQHJjU0NzYzMhcWFAcGIyICJjU0NwE2MzIWFRQHAQYjAaIhBQUOAQgRCQl6HyAfNzogICAgOjiuIxgBChEJB3wgISA6Nx8fHx83OycbBgGMDRQSGwb+exAYtTIPDxABAhAPEjKVKDg5KyspKXIqKQKuMikIEA8SMpUoODkrKykqcikp/hQbEw0JAq0MGxIMCv1dFwAAAAADAET/9wIuAwAAQgBOAFwAADc0PwEnJjU0NzYzMhcWFRQHDgEHDgIPARc3NjU0NjIWFRQPARcWFx4BFxYVFAYjIicmJyYnJicmJyYvAQcGKwEuATcUFzMyPwEnBwYHBhMUHwE3Njc2NTQnJiMiRF8EA0Q1NVhKNTQJChQYFxY+BASXBBUcJBs3AgICBwcHAwMbEgYFBgQDBAUCAQUGAQMEPlEGYnVafwYwKAShBRwPEBwwAwRMHiAcGyJozXJUAwRdVVQwMCgmRBsaGyMXGBMuAwPSCDRFExscEnxTAwIFCAgKCQgIEhsCAgEBBQUCAQcIAgICJwFyYnkCFwLhBB0bGwFXOEQEAzYlJx0eDgwAAAEA5wGIAY0C/QASAAATNDY7AR4BFTAVBwMGKwEiJyYn5xsSURAXARUIJCISDQ0BAtATGgIZDwEB/twlCwoRAAABANP/+AHpAwAAGQAAEzU2NzYzMhYVFAcGBwYHFRQXFhUUBiMiJybTA80LDhIbFE4sLQGoFBsSDgvQAXMG8I8IGhMXDjNKS20FvmsOGBMaB4wAAAABAIj/+AGfAwAAGAAANzQ3NjU0LwEmJyY1NDYzMhcWFRQHBiMiJogUqakBBwYGGxIOC9HRCw4SGyUYDm7AwnMBAgwMChIbCJDv7I4HGwAAAAEARACeAi4ChQAqAAATNDc2Mxc1NDYyFh0BNzE2MzIWFRQPARcWFRQGIyIvAQcGIyImNTQ/AScmRA4OEZsbJBuNBggSGyB6UAUaExQMV3AMFBMaCV6MHwG+Eg8OM54TGhsSni4DGxIgCymICwwTGguWlgsbEg0Ofy4MAAABAEQAagIuAo0AGwAAEjQ2OwE1NDYyFh0BMzIWFAYrARUUBiImPQEjIkQbEpsaJhqbEhsbEpsbJBubEgFpJhq3ExobErcbJBu4EhsaE7gAAAEAcv9NAeYAygASAAAXNDcTNjsBMhYdARQHAwYrASImcgWyDBVvEhsN/gwUHBMahgwKAS4MGhMfEwz++w0aAAABAEQBQQIuAbcADwAAEzU0NjMhMhYdARQGIyEiJkQaEwGQExoaE/5wExoBbhwTGhsSHBIbGgAAAAEAxP/7Aa0AtgAPAAA3NTQ2OwEyFh0BFAYrASImxBsSjxIbGxKPEhsoYRIbGhNhExobAAABAID/+AHyAwAAEwAANzQ3MwE+ATMyFhUUByMBDgEjIiaAAwEBGAQYDRIbAwH+6AQYDRIbJQoHAq4MEBsSCgf9UgwQGgAAAAACAD//+AIfAv8AJQBUAAAFIyYnLgEnJicmNTQ2Nz4BNz4CMzIeARceARceARUUDgUDFRQWFxYXHgE7ATI2Nz4BNz4BPQE0JicmJyYnJicmJyYnLgEjIg4CBw4BBw4BATMEOywsNA8QBQUDBgYVEhIySC4tSDITEhUGBgMEDRQmMEbFBQkIEBA4KBUcLA0OEgQFAwEBAQMDBQUICAsMDg8nGBknHhcICAoCAgMIARMSOy8vMC9AOVEvMEEhICYYGCYgIUIvL1I4KEFMOTYkFgGwUi1AJSUXGB8XFhUxHyA0Hy4fJRwdEBEXFw4ODw8ICQoLFB0SESkXFi8AAAABAF7/+wGMAv0AFQAAEiY1ND8BNjsBMhYVERQGIiY1EQcGI3gaDbcNECASGxskG4kNEQIJGxIVCp0LGxL9WBIbGhMCYXULAAABAFAABgILAwAANwAAEiY1NDc2MzIXFhUUBw4BBw4BBw4BBwYHBgcVITIWFAYjISImPQE0NzY3Njc2NzY1NCcmIyIHBiNrGxNbcVs9Pg0NISAgISMmIhgYCwsCASgTGhsS/qoSGwoRLy9EXhkcJSM0Wj4LDwJyGxEZDTw6OV0lIiMsGxsYFxkaGhkgHysFGyQbGxIVTiI8LzAuPyQkKDUhICwIAAEAP//4AhYC/AA3AAA3JjU0NjMyFxYzMjc2NzU0JyYnJiMiJjU0PwEhIiY0NjMhMhYdARQPARcWFxYdAQYHBiMiJyYnJlQVGxIGC0BGTDQ1BCAeLCs1ERoJuP7nEhsaEwFhEhsOoQhVNjUFUE5wHBwcIyMeEBgTGwQdJidKCjMkIw8OGxMSCswbJhobEiQQDrECFjs7WRBtQEADAwcIAAABAD//+wIfAv0AKAAANiY9ATQ3Ez4BMzIWFRQHAzM1NDYyFxYdATMyFhQGKwEVFAcGIiY9ASNaGwXVBBYMEhoFyMMaIg0OOhMaGxI6Dg0iGvWpGhMrCAsBzwsPGxIKCf5GeRIbDg0SeRskG4ESDQ4bEoEAAAIAWf/4AfcC/AAqAC0AABYmNDYzMjc2NTQnJiMiByMiJj0BEz4BMyEyFhQGKwEHMzIXFhUUBwYHBiMSIjN0GxsSyjsSIi1xHyAEEhsOAhkSARwTGhsS8ggTf01OFxgkYL4YAQEIGicacSIfSSU1AxkSAwD/EhgbJBydQUB+NS4vIVoBrQAAAAACAD//+AIfAv0AHwAvAAA3Jic1NDc2Nz4BNzYzMhYVFAcGDwE3NjMyFxYVFAcGIgMGFRQXFjMyNzY1NCcmIyKFQwNFHCgnNjILFBEaC3E1BwsdHm1BQkRE0AYoKilDQikrJyZJRzlBawx9ci80NT85DRsSEQ6ATQoCBkRFdGlCQgFkK0xEKCcoKENOKisAAAABAD//+wIfAvwAHwAAEiY0NjMhMhYVFAcGBwYHBhUUBiImNTQ3Njc2NzY/ASFaGxoTAYYTGjsSNDQWQRoiGkwXNDURGAkC/q8CoRsmGhsSTFkcQUIpeMETGxoU2o0pRUYaKBQHAAAAAAMAP//3Ah8DAAAVACQAQgAAEwYVFBYXHgEXOwE2NzY3PgE1NCcmIhMGFRQXFjsBMjc2NTQvAQMmNTQ/AScmNTQ3NjMyFxYVFAcGDwEXFhUUBgcjIuEmEhUUGxwCAhwODhQUEiYlUimXLSpAFDUmJ5ICrUWOBgZsQD9PTkBAHB0zBgaOdFIqZwKSFCYZJhAPEA4NCAgPECcZJhQU/s9PXjgfHyMjMF9OAv67Olx5YgQEQmtJLzAwMEg7KSghBARieU96BwACAD//+wIfAwAADwAtAAATBhUUFxYzMjc2NTQnJiMiAyY1NDc2MzIXFhUUBwYHBgcGIyImNDc2PwEHBiMixSwqKER3FQoqKUM/bURIRmJlRUYVFSZTeA0PERoOX0QFChogagJ1MENBKShJIShLLC3+tENlaEtLRkZyRzk5QpFvDBomDltuCgIEAAAAAAIA1v/7AZwCEAAPAB8AADc1NDY7ATIWHQEUBisBIiYRNTQ2OwEyFh0BFAYrASIm1hsSbBIbGxJsEhsbEmwSGxoTbBMaKFATGhsSUBIbGgF+UBMaGxJQEhsaAAAAAgBv/1IBswIQABIAIgAAFzQ/ATM2OwEyFhUUBwMGKwEiJhM1NDY7ATIWHQEUBisBIiZvA3wBCR9vEhsBzA4RKxIbexsSbBIbGhNsExqBDAf9GRsSDgP+9Q0aAidQExobElASGxoAAAABAEEARQIuArMAHQAAEy4BJyYnLgE1NDcBMDE2MzIWFRQHDQEWFRQGIyInTwEGAQECAQIOAZkLDhIbDf6hAV8NGxIOCwFcAQUBAgMECAcREAEPCBsSFwnq6g4SEhsIAAACAEQA3QIuAhsACwAXAAA2NDYzITIWFAYjISImNDYzITIWFAYjISJEGxIBkBIbGhP+cBMaGhMBkBMaGxL+cBL3JhobJBv+JhobJBsAAQBBAEUCLgKzABcAAAkBBiMiJjU0Ny0BJjU0NjMyFzAxARYVFAIg/mcLDhIbDQFf/qENGxIOCwGZDgFc/vEIGxISDurqCRcSGwj+8RAREgACAGD/vAH1AwEAOQBLAAATNTQ2NzYzMhcWHQEOAQcGBwYHBhUUBwYiJjU0NzY3Njc2NzY3NjU0JyMiJyYrAgYdARQHBiMiJyYTNTQ2OwEyFh0BFAcGKwEiJyZgPi8vNlA6OQEsHwcUFgkJDg0kGwoKCwwUFQgSEBFTAQUICgQDAW4NDRMSDQ2UGxIuEhsODRIuEg0OAjQMPFsVFTAwWAIxZCMIExQOCwsUDw8dFRoYFw4OFBUKEyIiG0IVAQIOUgkUDw4ODv3MMRUdHRUxFA8PDw8AAAIARP/yAi4DBABKAGUAADc1NDcyHwE3NjMyFxYVERY7ATY3Njc+AT0BNCYnLgEnJicmKwEGBw4BIyInJj0BNjc2NzMyFhcWFx4BHQEUBwYHBiMiLwEHBisBJjcUFxYXHgEXMzI3Njc9AiYnJiMiBwYHDgEVRIgvJwUCDhkSDQ4CHAETDQwEBQMDBQUXEBEbGyMJggsCGRETDQ0MPT9eCTpZGxsREQ0KCiMmNzYdAwQrPQiMWgEBBQQYEwYcEQ8NDRcXHBALCgMEAtIB7wIdAwUYDw8T/vk2AQwNFhUmHZgqPyYlNBcYDAwGVxIYDg8VB1ItLgMqIyM1NXBGfFsxMCInJgQDKAXWGw8QFBUVAREQHQGMARoTFAwMFhQiGAAAAAIARf/1AhoC9gAZABwAABYmPQETPgE7ATIWFxMUBwYjIiYvASMHDgEjEwMzYBufBBgOQg0XA6MODhIPGQMtyywDGQ+9T54LHRUOAp4OFREM/U0TDw8VD8PDDxUCov6qAAMAPwAGAh8C/QAhACsAOQAANiY1ETQ3NjsBMhcWFxYXHgEVFA8BFx4BHQEUBgcGBwYrARMVNzI9ASYnJiMDFRcyPQEmJyYnJicmI1obDQ0TpyQVFR4dFiwyOgQEIicnJCUvLz6nLXqyASspQZaWiAMODRgYGRkkBh0VApIWDw4BAgcIDRxiOVo4BAQeWDACMlkfHwsLAVr1AXwBPh0cATrVAWMLIRUWCwoDBAABAG//8gHwAwsARQAAEyYnNTQ2NzY3Njc2NzMyFxYXFRQHBiMiJyYnJicwMSYrAQYRFR4BFxYXFhceATMyNzY3PgEzMhcWHQEGBwYjIicmJyYnJnYGAQ0QERkYJyQvBTsuLQ0NDRITCQsICQsVHQWBAQQFBAoJDg4tHBwTFgQDGRASDQ0KLS09MiUoGBkREQD/NT8OQGw0MyUkFhYCJiY9ChQPDw0NFRYKEgf+6RIlOiMkGhoXFxoPDxoSFw8PFAo8JiYVFSQkMzMAAAACAHIABgIFAv4AFAAhAAA3JjURNDc2MzIXFhcWFRQHBgcGIyITJxE3Njc2NTQnJicmgA4NDRNmQ0M1RUhGayJLEkUGBmU5OyEgMysVDxUCkxQPDyssTmiFi19eFwcCkQH91AELQUB1UkFAKyQAAAAAAQBtAAYCEwL7ACIAADYmNRE0NzYzITIXFhQGIyEVMzIXFhQHBisBFSEyFxYUBiMhiBsNDRMBTBMNDRsS/uHvEg0ODQ0T7wEfEw0NGxL+tAYdFQKRFQ8ODg8qHdQPDykPDvUODyodAAABAKD/9QICAvoAHgAANyY1ETQ3NjMhMhcWFAYrARUzMhcWFAcGKwERFAcGIq4ODQ0TAQgTDQ0bEtuuEg0ODg0Srg4NJAQPFQKgFA8PDg8qHdQPDygPD/7KFQ8PAAEAR//xAg4DCAA+AAA3Jj0BNDc2NzYzMhcWFxYVFAYjIicmIyIHBgcGFRQXHgEzMj8BNSMiJyY0NjsBMhYVERQHDgEHDgEHBiMiJyZeFxcXLEZeExNYNwsbEhQOK0M+Kh8PEBwSTDUuMgNyEgwNGhGfEhsHCBIREhEQLC5sQivEV2MDYVNUME8DEEgOExQdETYxJD4+SWlYODoUAckODykdHRX+6Q4LDA4ICAYFDk0wAAAAAAEAW//1AgIDBAAdAAAWJjURNDc2MhYVETMRNDc2MhYVERQGIiY1ESMRFAZ2Gw4NJBvzDg0kGxskG/MbCx0VAqoVDw8dFv7lARsVDw8dFv1WFR0dFQEt/tMVHQAAAQB4AAYB5gL6ACMAADcmNDc2OwERIyInJjQ3NjsBMhcWFAcGKwERMzIXFhQHBiMhIoYODQ0TYEwSDQ4NDRPsEw0NDg0STGATDQ0ODRL+7BIVDykPDgIsDw8oDw8PDygPD/3UDg8pDw8AAAAAAQBQ//ABpQMHACMAADYmNTQzMhcWHQEGFRQXFjMyNzY1ETQ2MhYVERQXFBUUBiMiJ4Y2MBMMDQIcGiAeFRcbJBsBZ0EpJyBXN04ODxUKDAQpGhoYGS0CJBUdHRX95wMFBAJMchcAAAABAE3/9QIfAwcAHwAANyY1ETQ2MhYVEQE2MhYUBwMBFhUUBwYjIicBERQHBiJbDhskGwEUDiQbDvwBEw4ODRITDf7VDg0kBA8VAq0VHR0U/ucBOw8dKRD+3P6+ERIVDw8OAVv+yRQPDwAAAAABAFsACwIfAwcAEwAANyY1ETQ2MhYVESEyFxYUBwYjISJpDhskGwE9Ew0NDg0S/pYSGg8UApkUHR0U/ZkPDygPDwAAAAEAP//1Ah8DBAAoAAAWJjURNDY7ATIXFhcbAT4BOwEyFxYVERQGIiY1EQMGBwYjIiYnAxEUBlobGxJNDgwLBE1NAxgOTRINDhskG2wGCwoPDhcEbRsLHRUCqhYdCgsO/uUBGw4VDw8V/VYVHR0UAmv+cxAKChQPAY79lRQdAAAAAQBN//UCEQMIAB8AADcmNRE0NjsBMhYXExE0NjIWFREUBwYrASInAxEUBwYiWw4bEiUMFwXwGyQbDg0SJhwM7w4NJAQPFQKtFR0PDf3JAiMUHR0V/VMVDw8bAjf93xQPDwAAAAIAQv/yAhwDBwAeADkAADYmPQE0PgE3Njc2MzIXFhceAR0BFAYHBgcGIyInJicSBh0BFBYXFhcWMjc2Nz4BNTQmJyYnJiIHBgdkIhEmHRsoJy81LS4eHiEhHR4uLTY1LS4eLBESEREdHkgeHREREhERER0eSh8dEKuLRwM2bWcnJxcYIiE4OItJA0eLOjkjIyMjOQGdYSwELmItLx4fHx4vLWMtMWQtLR0dHh4vAAAAAgBb//UCHwL8ABUAHwAANyY1ETQ3NjsBMhcWFRQHBisBERQGIhMVMzI3NTQnJiNpDg0NE6hoQ0QmPYx7GyQ/e5AFKSdFBA8VAqEVDw85OWxRNVj+6BYdAqP1dAdEGxsAAgBB//UCHwMIACMAQwAANyY9ATQ3Njc2OwEyFxYXHgEVFA8BFxYVFAYjIi8BBwYjIicmEgYdARAzMj8BJyY1NDc2MzIfATc2NTQnJicmIyIHBgdfHh4ZMzFBCDYrKxsbHTACQwocEhYKOAQ1Oz03OTIMhSAeBGAKDQwRFwpRAxQPDyEiLiUbGw3DUYMDgk1BLy8fHzU1gUeMZAJfDxEUHg5SBC4uLwGzTS0D/tgZA4sPEBQPDw52CkFLRjs8KSkWFSUAAAIAZ//1AggC+AAkADEAABYmNRE0NzY7ARYXFhcWFxYHBgcGDwETFhUUBwYjIicDIxEUBwYTFTcyNzY3NjU0JyYjghsNDROfKiMkHx4REQEBICFCBYoFDg0SFgueWw4NG242GhoKCiUiOAsdFQKeFg8OAQoLFRUnJjRfOjobAv77ChEUDw8NAT7+6BUPDwKk9QIaGRwcLDAWFgAAAAEAYf/wAf0DBwBRAAA3Jic1NDYzMhYXFhcWMzI3NjU0JyYnLgEnLgInJicmJyYnJjU0NzY3MzIXFhcWFRQHBiInJicmJyYjIgcGFRQXFhcWFx4BFx4CFRQGBwYjIqU6ChsSERoCBiEfKTAlJAcHDg0WEw45IhoaDxAQDwgHPDxPBkcyNBECDQ0mCwwJCgobMC0jJBUTJBAjIyceHSEXZksSEkkiMk0IFB0YEi0YGCAcOxgUEw4OEQoIHxUQERARFxcdHCNSNTYCJydDCAQUDw4NDhUYChoZGSotGBgUCxITFxcWLUQpVXQOAwAAAQA///UCHwL4ABgAABMmNDc2MyEyFxYUBwYrAREUBwYiJjURIyJNDg0NEwGGEw0NDg0SmA0NIhqYEgKiDyoPDg8PKQ8P/ZQUDw8dFQJsAAABAE3/8gIRAwgAIAAANyY1ETQ2MhYVERQXFjMyNzY1ETQ2MhYVERQHBgcGIicmZRgbJBsyHzc+JCYbJBsYGCw1ojUscDY9AfMVHR0V/g1RJhcmJkEB8xUdHRX+Dj02NiAoKCAAAQA+//UCIAMGABgAADcDNDc2MzIWFxsBPgEzMhcWFQMOASsBIibjpQ4OEg8ZA5iXBhcPEg4OpwMYDkIOGhkCvBQODxUO/YACgA8UDw8T/UQPFRYAAQA///QCHwMFAC8AADcmAzU0NjIXFhcSHwE3NjsBMhcWHwE3NhM0NjMyFh0BAgMOAQcjIi8BBwYrASInJn4xDhskDQ0BCxgDPwsdEQ4LDAQ+AxkKHBIRHA4yAxkQBTQNPj8KIBsRDAwb9AHFAhQbDg8U/r+4GfUhCgsO6xjBATEUHR0TAv5G/wAOFgEw6/giCwsAAAEAU//1AgsDBgAlAAAWJj0BNDcTAyY1NDYzMhcbATYzMhcWFRQHAxMWFRQGIyInCwEGI24bBaCaBRsSFAyJgRMVEg0OBZqgBRsSFQ2NhxIWCx0VAQ8KAUYBMgwOFh0N/u0BBRsPDxUODP7O/roKDxUdDQEj/ukaAAEAVv/0AggC+QAeAAATJjU0NjMyFxsBMz4BMzIXFhUUBxUDERQGIiY1EQMwWwUbEhkPhIQBAxgMEg0OBakaIhqpArAIDxUdG/7rARULEA8PFA8IAf6l/tEUHR0UAS8BWwAAAAABAFsABgICAv4AHgAANyY1NDcBIyInJjQ3NjMhMhcWFRQHASEyFxYUBiMhImkOBQEL4BINDg0NEwEoEg0OBf73AQMTDQ0bEv6zEhUPFA4KAkkPDykPDw8QFA0K/bcPDyodAAAAAQCl//gCHQMAABUAADcRNDYzITIWFAYrAREzMhYUBiMhIialGxIBHhIbGhPx8RIbGxL+4hIbJQKuEhsbJBv9rBskGxsAAAAAAQCA//gB8gMAABQAABM0NjMyFhcBMDMWFRQGIyInATAjJoAbEgwZBAEYAQMbEh4L/ugBAwLTExoQDP1SBwoSGxwCrgcAAAAAAQBV//gBzQMAABUAADY0NjsBESMiJjQ2MyEyFhURFAYjISJVGxLx8RMaGxIBHhIbGxL+4hITJBsCVBskGxsS/VISGwABAEQBdAIuAvsAGAAAEzU0NxM2NzIXEzAxFhUUBiMiLwEHBiMiJkQHzg8QGAnNCBsSEw2pqAwTEhsBoQoOCwErCgEM/swLDhIbDbKyDRoAAAEARP8ZAi7/kAAPAAAXNDYzITIWHQEUBiMhIiY1RBsSAZASGxsS/nASG50TGhsSHRIbGhMAAAAAAQC2AgcBuQMAABIAAAEnJjU0PwE2MzIfAhYUBwYjIgFvqRALDw0XDgoDnwsLDRURAhGODRUQDRIQCQKmDh4NDwAAAAACAE3/7wH6AiAADQA/AAAlIhUUFxYXMzI/ATUjJgcmNTQ3Njc2NzY3PgE7AScmJyYjIgcGIyImNTQ3NjMyFxYVERQGIiY9AQcGIyIjJiMmAVixHRodCFZGAQUr7zQNDBkaHR0pKUQyBgEGGRo5PC4MEBMaEU9TWzU8GyQbCERPAgYFBD/3YCEVFQJ6ATAC1C9FKh8fExMMDQYGBAY/GRonCRoTFg06MjpY/sUSHBoTEwc9AQUAAAAAAgBK//ACHwMFAB4AMgAAFiY1ETQ2MhYdATc2MzIXHgEXFRQHBiMiJyYvARUUBjcVFhcWMzI3Nj0BJicmIyIHBg8BZRsbJBsIQkoYIE9fATo5aBEIRDsIGxsUKysxJSFAAiUlNxsdQCUBDRsTArcSGxoT+QY2CBV/XweBVVMBBzAGDhMa0gExJSUXLYgJQDIzDh9NAQAAAAABAHX/7gHwAhoAKgAANyY1NDc2MzIXFhcWFxUUBiMiJyYjIgcGFRQzMjc2Nz4BMzIWHQEGBwYjIuVwNTVjExQwIyMLGRMfDAw+JRg9bBIPMQsDGRASGg4yNDwwBz7NeElHAwYbGyoLExokIw0fgsoEDCsOFRsSCzckJQAAAgA///ECEwMFAB4AMQAANyY1NDc2NzYzMh8BNTQ2MhYVERQGIiYvAQcGIyInJhMGFRQXFjMyNzY3PQImJyYjImwtLy5RHBhKRggbJBsbJBoBAQc/TxocVUA/IiI9HB5MGRUpKTAoVEpvZkVEFwg1BvgSGxoT/UkUGhoRCgYxBhQBnCxuTzs8DiBQAYUBLyMjAAAAAAIATf/xAhECIAAkAC0AADcmNTQ3NjczMhcWFRQGIyEXFhcWMzI3Njc2MzIWFRQHBiMiJyYTByEnJicmIyJ2KT49ZgZoOjsbEv7EAQclJEMREh4UDBITGy0tPzMmTA8CAQQBCxwcPGNgSmhzTUwCR0dzEhwGSyssAwQVDRoTKxQVDRoBOgcGPBwdAAAAAQBh//MB/QMCACMAABImNDY7ATU0MzIWFAYjIgcGBwYdATMyFhQGKwETFAYiJjUDI3saGxJxzhIbGxIsICAJBHwSGxsSfAYaIhoFcQG7GyQbDt8bJBsPECINNw4bJBv+ZhIcGxMBmgACAEL/QgIGAhsANABJAAA3JjU0NzYzMhcWHwE3PgEzMhYVERUWHQEUBwYjIicmJyMmNTQ2MzIXFhcWMzI3Nj0BBwYjIhMGFRQXFjMyNjc2NzY/AT0BJicjIns5OjlmDwg/MgcBARsREhsBOzxhTjAwFQEDGxIUEBEKFkVbGAoIPlJfCCAfHjocMRISDAsPAStVDUJbR2t4S0sBBikGChEYGxP+UQEJDBdeNzcTEzEHCxMaFRgFCjgXLDsHNwF8L09CLC0UFBMQEBkCVgF3BgAAAQBq//MB9AMFACkAABYmNRE0NjIWHQE3NjMyFxYXFh0BFAYiJjURNCc0Jy4CIyIHBg8BERQGhRsbJBsIOUo4KioPChskGwEEBBAdFTEgHxoBGw0aFAK3ExobEvUHMSMjNyVb/RIcHBIBCxsRERUXGRMhHzMB/tQSHAAAAAIAg//zAZQDBQAQACAAABImNDY7ATIWFREUBiImNREjNiY9ATQ2OwEyFh0BFAYrAZ4bGhO0ExobJBuHeBsbEi0SGxsSLQGoGyQbGhP+SxMaGxIBiNUaEy4TGhoTLhMaAAIAZ/9JAZQDBAAPADQAAAAmPQE0NjsBMhYdARQGKwEDIj0BNDc2MzIXFjMyNzY3NjURIyImNDY7ATIWFREUBwYHBgcGASgbGxItEhsbEi10Xw4PFQQQEAoICD0UCmUSGxoTkhMaERMdHSciAnwaEy4TGhoTLhMa/M0uCREKCwECAQQtFkkBdBskGxsS/lJVJCUbGgYFAAAAAQB7//MCBQMFACEAABYmNRE0NjIWFREzNzM2MzIWFRQPARcWFRQGIyIvASMVFAaWGxskGwq7AQ0REhsOqssMGxIVC9kKGw0aFAK3ExobEv6Asg4cEhQNpOUOERIcDfTUEhsAAAEAy//5AfADBQAYAAA3JjUTNDYzMhYVAxQXFhcWMzIWFAYjIicm9CkGGhMSGwcQES8PQBIbGxJTMC48N28B9RMbGxP+Cj8iJAcCGyQbDQ4AAQA///MCHwIbADIAABYmNRE0NjMyHwE3NjMyHwE3NjMyFhURFAYiJjURJiMiBwYVERQGIiY1ESYjIgcGFREUBlobGxIXDgMEIig4JAMEKTQ2RxskGwIhHxUUGiIaAiAgFRQbDRsTAckTGxUEAxktBQUtTzX+ihIcGxMBbzEvLif+5BIcGxMBbzEwLib+5BIcAAAAAAEATf/zAhECGwAjAAAWJjURNDYyFh0BNzYzMhcWHQEUBiImNRE0JyYjIgcGBxURFAZoGxskGwhDWGUxMRskGxcXPzsoKBgbDRwSAckSGxoSFAc9Q0N3/RIcGxMA/08oKiopOwH+7xIcAAAAAAIAP//wAh8CIAAPABsAADcmNTQ3NjMyFxYVFAcGIyIDBhQXFjI3NjQnJiKAQUFAb2xCQkJBbW4BJycmkiYnJyeQPk96e09PT1B6eU9PAaA2pjU1NTWmNjYAAAAAAgBK/0gCHwIbABUAMwAANxcWMzI3NjU0JyYjIgciIzEGBwYHFQImNRE0NjIWHQE3NjMyFxYXFhUUBwYrASYvARUUBqQBPlQPFWohIUQDBAMDLyUlFUAaGyQbCD5LGSFWLS09PGkRRjoIGssBgAUdlVQ2NwEDJCMvAf4BGxICdRMbGhMLBzQIFkZHb3dNTQQxB7cTGgAAAAACAD//SAITAhsAHAAvAAA3JjU0NzYzMh8BNTQ2MhYVERQGIiY9AQcGIyInJhMGFRQXFjMyNzY3PQImJyYjIm0uryEZSz4IGyQbGiYaCD5OHBtTPT8jIzwZIEIjFygpMSNQRmvmLAg0BwsSGxsT/YsTGhsStgc0BxMBoCiBSzY4DR1VAX0BMiQlAAAAAAEAmv/zAg4CGwAnAAAWJjURNDYzMhYdATc2MzIWFxQGIiYnNCcjIicmIgcGKwEGBwYdARQGtRsbEhMaCDdPPE8BGyQaASMBAgQFBwcGAwE3ICIbDRwSAckSGxkTCwc0TTgTGxoSIggBAgIBCTg3QOUTGwAAAQBn//AB/QIgAFEAADcmNTQ2MzIXFhcWMzI3NjU0JyYnJicuAicuAScmJyYnJjU0NzY7ARYXFhcWFRQGIyImJyYnIyIHBgcGFRQXFhceARcWFxYXFhcWFRQHBgcjImwFGxITEhUJITIwIyYPDgwKFgs5GhkaGRISCQgHBzg4Uh02LC0MAhsSEBkDCEAZGxMUEhQ+Dx8gIhwdDxAREQcHOjxYCYVFCA8TGhUYBBESEyYTDg0EBQYDDwgJCQ8ODg8OFhUZTiUmAxsbLwkDEhsTDiIEAwIODxswEgQHCAsKCQwLEREWFx1SJygCAAABAE3/8wHjAqYAMQAAEiY0NjsBNzQ2MhYVBzMyFhQGKwEHFBUWFx4COwEyNzYzMhYVFAcGIyInJicmPQE3I2gbGxJSARkkGAKWEhsbEpcDAQMEDRsUAhAcGw0SGyMlNCofLxQUA1ABshslG2wUGRsSbBwkHO0aDQwTExENCgobEiAQEQwTLi9MDOsAAAEATf/wAhECGAAoAAA3Jj0BNDYzMhYdARQXFhczMjc2NzERNDYyFhURFAYiJj0BBwYrASYnJlcKGxESHBUVQwU7KCYVGyQbGyQbCEFYBEgwMYEmS/gSHBwS6lwrLQIsKz8BChMbHBL+NxIcGhMSBzsBJyYAAQBC//MCHAIYAB0AABMmNTQ2MzIXEzMTMDU+ATMyFhUUBzEDDgErASImJ0UDGxIfC5EKkQMZDhIbA54DGQ1GDhcEAdsGCRMbH/5eAaIBDBIcEgkG/jYMEhENAAABAEH/8wIeAhgAKAAANwM0NzYzMhYXEzc+ATsBMh8BEz4BMzIXFh0BAw4BKwEiLwEHBisBIiZ4Nw4OEhEZAiorAxcPLCAKKikDGRESDg44AhkRMCAJMTELHTERGhsBzxMNDhcR/qSWDRMglgFcEBgNDRAE/jEQGB+wryAYAAAAAAEAYf/zAf0CGAAjAAAWJjU0PwEnJjU0NjMyHwE3NjMyFhUUDwEXFhUUBiMiLwEHBiN8GwiMgQcbEhcJdXUNExIbB4KMCRsSGAmAgQwUDRwSDg3OxgwOExsMtbUMHBIODMbODg0SHAy/vwwAAAEAP/9JAh8CGAAjAAAWJjU0NjsBMj8BAyY1NDYzMhcbATYzMhYVFAcBMDEGBwYjIidTFBsSEBYHa78GGxITDaicDhQSGwX+zQ0dHSMNDrEZEBMaEMsBVAkNExsM/tcBKQwbEw0K/bccEhMDAAEAYQAEAgUCBwAcAAA2Jj0BNDcBIyImNDYzITIWHQEUBxUBITIWFAYjIXsaDAEU6hIbGhMBKhMaDf7zAQQSGxoT/rYEGxIjDw4BPBomGhoTKBEMAf7KGyQbAAAAAQBE//gCLgMAADQAABI0NjMyNzY9ATQ3Njc2MzIWFAYrASIHBgcGFRQPARcWFRQXFhcWMzIWFAYjIicmNTQnJiMiRBsSVhcRJiE0NmESGxoTIjUdHxEUMQUEMgcIGhd4EhsbEpAtVRYYUBMBaCYbGxQ9CmM1Lg0OGyQbBgYYGkl7JQMFMWE3Hh8RDhskGxsznzsXGAAAAAABAQz/ZAFmAwAACwAABRE0NjIWFREUBiImAQwbJBsaJhpvA0ITGhsS/L4SGxoAAAABAET/+AIuAwAAMwAANjQ2OwEyNzY3NjU0PwEnJjU0JyYnJiMiJjQ2MzIXFhcWFRQXFjsBMhYUBiMiBhUUBwYjIkQbEiE9HyIOCjIEBTENDScVYRMaGxJhNjQhJRIXUgQSGxsSUC9UK5ISEiYaCQkgGUhhMQUDJXs1HyELBxomGg4NLjNlRhUbHCQaLzufMxsAAAAAAQBSAhwCIALNACsAABM1Njc2MzIzFjMWFxYzMjc+ATMyFhUUBxUOASMiIyYjJicmIyIHMQ4BIyImUgonJzACBQQDLj4rICAIAxoPEhsCCkwwAgUEAy4+KiAgCQMZEBIbAlUKMB8fAQUvIicPFRsSAwUBMD8BBDAhJg8VGwAAAAABAnIB9QLWAq8ACwAAATU0NjIWHQEUBiImAnIeKB4eKB4CJ1YVHR4UVhQeHQAAAAABAgYB9QKgAq8ADwAAATQ2MzIfARYVFAYjIi8BJgIGHhQbCTwIHhQTET0HAn0VHQ5fDQ4UHg9eCwAAAAACAbYCVALWAwIACwAXAAABNTQ2MhYdARQGIiY3NTQ2MhYdARQGIiYBth4oHh0qHbweKB4dKh0ChkoVHR4UShQeHRVKFB4eFEoUHh4AAQAO/4cAcgK1AAsAABcRNDYyFhURFAYiJg4eKB4dKh1HAsoUHh4U/TYUHh4AAAAAAAAOAK4AAQAAAAAAAABDAIgAAQAAAAAAAQAEANYAAQAAAAAAAgAHAOsAAQAAAAAAAwApAUcAAQAAAAAABAANAY0AAQAAAAAABQAKAbEAAQAAAAAABgAEAcYAAwABBAkAAACGAAAAAwABBAkAAQAIAMwAAwABBAkAAgAOANsAAwABBAkAAwBSAPMAAwABBAkABAAaAXEAAwABBAkABQAUAZsAAwABBAkABgAIAbwATQBhAHQAdABoAGUAdwAgAFMAawBhAGwAYQAgACgAMgAwADEAMQApADsAIABiAGEAcwBlAGQAIABvAG4AIABjAG8AZABlACAAYgB5ACAATgBvAHIAYgBlAHIAdAAgAFMAYwBoAHcAYQByAHoAIAAoADEAOQA4ADYALAAgADIAMAAxADEAKQAATWF0dGhldyBTa2FsYSAoMjAxMSk7IGJhc2VkIG9uIGNvZGUgYnkgTm9yYmVydCBTY2h3YXJ6ICgxOTg2LCAyMDExKQAATwBDAFIAQgAAT0NSQgAAUgBlAGcAdQBsAGEAcgAAUmVndWxhcgAARgBvAG4AdABGAG8AcgBnAGUAIAAyAC4AMAAgADoAIABPAEMAUgAgAEIAIABSAGUAZwB1AGwAYQByACAAOgAgADIANwAtADkALQAyADAAMQAyAABGb250Rm9yZ2UgMi4wIDogT0NSIEIgUmVndWxhciA6IDI3LTktMjAxMgAATwBDAFIAIABCACAAUgBlAGcAdQBsAGEAcgAAT0NSIEIgUmVndWxhcgAAVgBlAHIAcwBpAG8AbgAgADIAIAAAVmVyc2lvbiAyIAAATwBDAFIAQgAAT0NSQgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAAAAQACAAMABAAFAAYABwAIAAkAtwALAAwADQAOAA8AEAARABIAEwAUABUAFgAXABgAGQAaABsAHAAdAB4AHwAgACEAIgAjACQAJQAmACcAKAApACoAKwAsAC0ALgAvADAAMQAyADMANAA1ADYANwA4ADkAOgA7ADwAPQA+AD8AQABBAEIAtgBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAWwBcAF0AXgBfAGAAYQECAQMBBAEFD3F1b3Rlc2luZ2xlLmFsdAlncmF2ZS5hbHQMcXVvdGVkYmwuYWx0B2Jhci5hbHQAAAAAAAAB//8AAgABAAAADgAAABgAAAAAAAIAAQABAGUAAQAEAAAAAgAAAAEAAAAKAEAAjgACREZMVAAObGF0bgAiAAQAAAAA//8ABQAAAAEAAgADAAQABAAAAAD//wAFAAAAAQACAAMABAAFYWFsdAAgc3MwMQAmc3MwMgAsc3MwMwAyc3MwNAA4AAAAAQAAABgAAQABABYAAQACABQAAQADABIAAQAEAAABAAAAAQEAAAECAAABAwAFAAwAFAAcACQALAADAAAAAQAoAAEAAAABAFIAAQAAAAEAVgABAAAAAQBaAAEAAAABAF4AAQAmAAQADgAUABoAIAACAAUAZAACAAoAYgACAEMAYwACAF8AZQABAAQABQAKAEMAXwABAAYAIAABAAEAQwABAAYAXwABAAEABQABAAYAWAABAAEACgABAAYABgABAAEAXwABAAAACgAsAC4AAkRGTFQADmxhdG4AGAAEAAAAAP//AAAABAAAAAD//wAAAAAAAAAAAAEAAAAAzD2izwAAAADWBtqRAAAAANoDIf0=");const hw={toCanvas:sM,toSVG:lM,render:dM,raw:uM,drawingCanvas:Bp,drawingSVG:s9,fixupOptions:i9,loadFont:hM,FontLib:Sl,BWIPJS_VERSION:aM,BWIPP_VERSION:rM};function jb({text:r,onClick:i,variant:a="primary",className:s="",isMobile:l=!1}){const c=()=>{switch(a){case"secondary":return"bg-themewhite2 text-themeblue3 hover:bg-themeblue1/20 rounded-full";case"primary":return"bg-themeblue3 text-themewhite2 hover:bg-themeblue3/80 rounded-full";case"special":return"bg-themeblue3 text-white hover:bg-themeblue3/80 rounded-full";case"dispo-specific":return s;case"mobile":return s;default:return"bg-themeblue3 text-themewhite2 hover:bg-themeblue3/80"}};return x.jsx("button",{className:`${l?"":"h-7 p-4"} w-max flex items-center justify-center text-[9pt] font-normal transition-colors duration-200 ${c()} ${a!=="dispo-specific"?s:""}`,onClick:i,children:x.jsx("span",{children:r})})}function mM(r,i,a){return Math.max(i,Math.min(r,a))}const Lo={toVector(r,i){return r===void 0&&(r=i),Array.isArray(r)?r:[r,r]},add(r,i){return[r[0]+i[0],r[1]+i[1]]},sub(r,i){return[r[0]-i[0],r[1]-i[1]]},addTo(r,i){r[0]+=i[0],r[1]+=i[1]},subTo(r,i){r[0]-=i[0],r[1]-=i[1]}};function r6(r,i,a){return i===0||Math.abs(i)===1/0?Math.pow(r,a*5):r*i*a/(i+a*r)}function a6(r,i,a,s=.15){return s===0?mM(r,i,a):r<i?-r6(i-r,a-i,s)+i:r>a?+r6(r-a,a-i,s)+a:r}function gM(r,[i,a],[s,l]){const[[c,d],[f,m]]=r;return[a6(i,c,d,s),a6(a,f,m,l)]}function vM(r,i){if(typeof r!="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,i);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function xM(r){var i=vM(r,"string");return typeof i=="symbol"?i:String(i)}function bl(r,i,a){return i=xM(i),i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}function s6(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),a.push.apply(a,s)}return a}function Za(r){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?s6(Object(a),!0).forEach(function(s){bl(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):s6(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const o9={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function o6(r){return r?r[0].toUpperCase()+r.slice(1):""}const bM=["enter","leave"];function yM(r=!1,i){return r&&!bM.includes(i)}function wM(r,i="",a=!1){const s=o9[r],l=s&&s[i]||i;return"on"+o6(r)+o6(l)+(yM(a,l)?"Capture":"")}const AM=["gotpointercapture","lostpointercapture"];function SM(r){let i=r.substring(2).toLowerCase();const a=!!~i.indexOf("passive");a&&(i=i.replace("passive",""));const s=AM.includes(i)?"capturecapture":"capture",l=!!~i.indexOf(s);return l&&(i=i.replace("capture","")),{device:i,capture:l,passive:a}}function kM(r,i=""){const a=o9[r],s=a&&a[i]||i;return r+s}function Cx(r){return"touches"in r}function l9(r){return Cx(r)?"touch":"pointerType"in r?r.pointerType:"mouse"}function CM(r){return Array.from(r.touches).filter(i=>{var a,s;return i.target===r.currentTarget||((a=r.currentTarget)===null||a===void 0||(s=a.contains)===null||s===void 0?void 0:s.call(a,i.target))})}function EM(r){return r.type==="touchend"||r.type==="touchcancel"?r.changedTouches:r.targetTouches}function c9(r){return Cx(r)?EM(r)[0]:r}function _M(r){return CM(r).map(i=>i.identifier)}function Bb(r){const i=c9(r);return Cx(r)?i.identifier:i.pointerId}function l6(r){const i=c9(r);return[i.clientX,i.clientY]}function IM(r){const i={};if("buttons"in r&&(i.buttons=r.buttons),"shiftKey"in r){const{shiftKey:a,altKey:s,metaKey:l,ctrlKey:c}=r;Object.assign(i,{shiftKey:a,altKey:s,metaKey:l,ctrlKey:c})}return i}function H3(r,...i){return typeof r=="function"?r(...i):r}function NM(){}function TM(...r){return r.length===0?NM:r.length===1?r[0]:function(){let i;for(const a of r)i=a.apply(this,arguments)||i;return i}}function c6(r,i){return Object.assign({},i,r||{})}const MM=32;class RM{constructor(i,a,s){this.ctrl=i,this.args=a,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(i){this.ctrl.state[this.key]=i}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:i,shared:a,ingKey:s,args:l}=this;a[s]=i._active=i.active=i._blocked=i._force=!1,i._step=[!1,!1],i.intentional=!1,i._movement=[0,0],i._distance=[0,0],i._direction=[0,0],i._delta=[0,0],i._bounds=[[-1/0,1/0],[-1/0,1/0]],i.args=l,i.axis=void 0,i.memo=void 0,i.elapsedTime=i.timeDelta=0,i.direction=[0,0],i.distance=[0,0],i.overflow=[0,0],i._movementBound=[!1,!1],i.velocity=[0,0],i.movement=[0,0],i.delta=[0,0],i.timeStamp=0}start(i){const a=this.state,s=this.config;a._active||(this.reset(),this.computeInitial(),a._active=!0,a.target=i.target,a.currentTarget=i.currentTarget,a.lastOffset=s.from?H3(s.from,a):a.offset,a.offset=a.lastOffset,a.startTime=a.timeStamp=i.timeStamp)}computeValues(i){const a=this.state;a._values=i,a.values=this.config.transform(i)}computeInitial(){const i=this.state;i._initial=i._values,i.initial=i.values}compute(i){const{state:a,config:s,shared:l}=this;a.args=this.args;let c=0;if(i&&(a.event=i,s.preventDefault&&i.cancelable&&a.event.preventDefault(),a.type=i.type,l.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,l.locked=!!document.pointerLockElement,Object.assign(l,IM(i)),l.down=l.pressed=l.buttons%2===1||l.touches>0,c=i.timeStamp-a.timeStamp,a.timeStamp=i.timeStamp,a.elapsedTime=a.timeStamp-a.startTime),a._active){const F=a._delta.map(Math.abs);Lo.addTo(a._distance,F)}this.axisIntent&&this.axisIntent(i);const[d,f]=a._movement,[m,g]=s.threshold,{_step:v,values:y}=a;if(s.hasCustomTransform?(v[0]===!1&&(v[0]=Math.abs(d)>=m&&y[0]),v[1]===!1&&(v[1]=Math.abs(f)>=g&&y[1])):(v[0]===!1&&(v[0]=Math.abs(d)>=m&&Math.sign(d)*m),v[1]===!1&&(v[1]=Math.abs(f)>=g&&Math.sign(f)*g)),a.intentional=v[0]!==!1||v[1]!==!1,!a.intentional)return;const A=[0,0];if(s.hasCustomTransform){const[F,P]=y;A[0]=v[0]!==!1?F-v[0]:0,A[1]=v[1]!==!1?P-v[1]:0}else A[0]=v[0]!==!1?d-v[0]:0,A[1]=v[1]!==!1?f-v[1]:0;this.restrictToAxis&&!a._blocked&&this.restrictToAxis(A);const w=a.offset,k=a._active&&!a._blocked||a.active;k&&(a.first=a._active&&!a.active,a.last=!a._active&&a.active,a.active=l[this.ingKey]=a._active,i&&(a.first&&("bounds"in s&&(a._bounds=H3(s.bounds,a)),this.setup&&this.setup()),a.movement=A,this.computeOffset()));const[E,I]=a.offset,[[T,N],[j,B]]=a._bounds;a.overflow=[E<T?-1:E>N?1:0,I<j?-1:I>B?1:0],a._movementBound[0]=a.overflow[0]?a._movementBound[0]===!1?a._movement[0]:a._movementBound[0]:!1,a._movementBound[1]=a.overflow[1]?a._movementBound[1]===!1?a._movement[1]:a._movementBound[1]:!1;const U=a._active?s.rubberband||[0,0]:[0,0];if(a.offset=gM(a._bounds,a.offset,U),a.delta=Lo.sub(a.offset,w),this.computeMovement(),k&&(!a.last||c>MM)){a.delta=Lo.sub(a.offset,w);const F=a.delta.map(Math.abs);Lo.addTo(a.distance,F),a.direction=a.delta.map(Math.sign),a._direction=a._delta.map(Math.sign),!a.first&&c>0&&(a.velocity=[F[0]/c,F[1]/c],a.timeDelta=c)}}emit(){const i=this.state,a=this.shared,s=this.config;if(i._active||this.clean(),(i._blocked||!i.intentional)&&!i._force&&!s.triggerAllEvents)return;const l=this.handler(Za(Za(Za({},a),i),{},{[this.aliasKey]:i.values}));l!==void 0&&(i.memo=l)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function OM([r,i],a){const s=Math.abs(r),l=Math.abs(i);if(s>l&&s>a)return"x";if(l>s&&l>a)return"y"}class DM extends RM{constructor(...i){super(...i),bl(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Lo.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Lo.sub(this.state.offset,this.state.lastOffset)}axisIntent(i){const a=this.state,s=this.config;if(!a.axis&&i){const l=typeof s.axisThreshold=="object"?s.axisThreshold[l9(i)]:s.axisThreshold;a.axis=OM(a._movement,l)}a._blocked=(s.lockDirection||!!s.axis)&&!a.axis||!!s.axis&&s.axis!==a.axis}restrictToAxis(i){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":i[1]=0;break;case"y":i[0]=0;break}}}const jM=r=>r,d6=.15,d9={enabled(r=!0){return r},eventOptions(r,i,a){return Za(Za({},a.shared.eventOptions),r)},preventDefault(r=!1){return r},triggerAllEvents(r=!1){return r},rubberband(r=0){switch(r){case!0:return[d6,d6];case!1:return[0,0];default:return Lo.toVector(r)}},from(r){if(typeof r=="function")return r;if(r!=null)return Lo.toVector(r)},transform(r,i,a){const s=r||a.shared.transform;return this.hasCustomTransform=!!s,s||jM},threshold(r){return Lo.toVector(r,0)}},BM=0,Vm=Za(Za({},d9),{},{axis(r,i,{axis:a}){if(this.lockDirection=a==="lock",!this.lockDirection)return a},axisThreshold(r=BM){return r},bounds(r={}){if(typeof r=="function")return c=>Vm.bounds(r(c));if("current"in r)return()=>r.current;if(typeof HTMLElement=="function"&&r instanceof HTMLElement)return r;const{left:i=-1/0,right:a=1/0,top:s=-1/0,bottom:l=1/0}=r;return[[i,a],[s,l]]}}),u6={ArrowRight:(r,i=1)=>[r*i,0],ArrowLeft:(r,i=1)=>[-1*r*i,0],ArrowUp:(r,i=1)=>[0,-1*r*i],ArrowDown:(r,i=1)=>[0,r*i]};class PM extends DM{constructor(...i){super(...i),bl(this,"ingKey","dragging")}reset(){super.reset();const i=this.state;i._pointerId=void 0,i._pointerActive=!1,i._keyboardActive=!1,i._preventScroll=!1,i._delayed=!1,i.swipe=[0,0],i.tap=!1,i.canceled=!1,i.cancel=this.cancel.bind(this)}setup(){const i=this.state;if(i._bounds instanceof HTMLElement){const a=i._bounds.getBoundingClientRect(),s=i.currentTarget.getBoundingClientRect(),l={left:a.left-s.left+i.offset[0],right:a.right-s.right+i.offset[0],top:a.top-s.top+i.offset[1],bottom:a.bottom-s.bottom+i.offset[1]};i._bounds=Vm.bounds(l)}}cancel(){const i=this.state;i.canceled||(i.canceled=!0,i._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(i){const a=this.config,s=this.state;if(i.buttons!=null&&(Array.isArray(a.pointerButtons)?!a.pointerButtons.includes(i.buttons):a.pointerButtons!==-1&&a.pointerButtons!==i.buttons))return;const l=this.ctrl.setEventIds(i);a.pointerCapture&&i.target.setPointerCapture(i.pointerId),!(l&&l.size>1&&s._pointerActive)&&(this.start(i),this.setupPointer(i),s._pointerId=Bb(i),s._pointerActive=!0,this.computeValues(l6(i)),this.computeInitial(),a.preventScrollAxis&&l9(i)!=="mouse"?(s._active=!1,this.setupScrollPrevention(i)):a.delay>0?(this.setupDelayTrigger(i),a.triggerAllEvents&&(this.compute(i),this.emit())):this.startPointerDrag(i))}startPointerDrag(i){const a=this.state;a._active=!0,a._preventScroll=!0,a._delayed=!1,this.compute(i),this.emit()}pointerMove(i){const a=this.state,s=this.config;if(!a._pointerActive)return;const l=Bb(i);if(a._pointerId!==void 0&&l!==a._pointerId)return;const c=l6(i);if(document.pointerLockElement===i.target?a._delta=[i.movementX,i.movementY]:(a._delta=Lo.sub(c,a._values),this.computeValues(c)),Lo.addTo(a._movement,a._delta),this.compute(i),a._delayed&&a.intentional){this.timeoutStore.remove("dragDelay"),a.active=!1,this.startPointerDrag(i);return}if(s.preventScrollAxis&&!a._preventScroll)if(a.axis)if(a.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){a._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(i);return}else return;this.emit()}pointerUp(i){this.ctrl.setEventIds(i);try{this.config.pointerCapture&&i.target.hasPointerCapture(i.pointerId)&&i.target.releasePointerCapture(i.pointerId)}catch{}const a=this.state,s=this.config;if(!a._active||!a._pointerActive)return;const l=Bb(i);if(a._pointerId!==void 0&&l!==a._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(i);const[c,d]=a._distance;if(a.tap=c<=s.tapsThreshold&&d<=s.tapsThreshold,a.tap&&s.filterTaps)a._force=!0;else{const[f,m]=a._delta,[g,v]=a._movement,[y,A]=s.swipe.velocity,[w,k]=s.swipe.distance,E=s.swipe.duration;if(a.elapsedTime<E){const I=Math.abs(f/a.timeDelta),T=Math.abs(m/a.timeDelta);I>y&&Math.abs(g)>w&&(a.swipe[0]=Math.sign(f)),T>A&&Math.abs(v)>k&&(a.swipe[1]=Math.sign(m))}}this.emit()}pointerClick(i){!this.state.tap&&i.detail>0&&(i.preventDefault(),i.stopPropagation())}setupPointer(i){const a=this.config,s=a.device;a.pointerLock&&i.currentTarget.requestPointerLock(),a.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(i){this.state._preventScroll&&i.cancelable&&i.preventDefault()}setupScrollPrevention(i){this.state._preventScroll=!1,FM(i);const a=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",a),this.eventStore.add(this.sharedConfig.window,"touch","cancel",a),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,i)}setupDelayTrigger(i){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(i)},this.config.delay)}keyDown(i){const a=u6[i.key];if(a){const s=this.state,l=i.shiftKey?10:i.altKey?.1:1;this.start(i),s._delta=a(this.config.keyboardDisplacement,l),s._keyboardActive=!0,Lo.addTo(s._movement,s._delta),this.compute(i),this.emit()}}keyUp(i){i.key in u6&&(this.state._keyboardActive=!1,this.setActive(),this.compute(i),this.emit())}bind(i){const a=this.config.device;i(a,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(i(a,"change",this.pointerMove.bind(this)),i(a,"end",this.pointerUp.bind(this)),i(a,"cancel",this.pointerUp.bind(this)),i("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(i("key","down",this.keyDown.bind(this)),i("key","up",this.keyUp.bind(this))),this.config.filterTaps&&i("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function FM(r){"persist"in r&&typeof r.persist=="function"&&r.persist()}const Ym=typeof window<"u"&&window.document&&window.document.createElement;function u9(){return Ym&&"ontouchstart"in window}function UM(){return u9()||Ym&&window.navigator.maxTouchPoints>1}function LM(){return Ym&&"onpointerdown"in window}function zM(){return Ym&&"exitPointerLock"in window.document}function HM(){try{return"constructor"in GestureEvent}catch{return!1}}const n1={isBrowser:Ym,gesture:HM(),touch:u9(),touchscreen:UM(),pointer:LM(),pointerLock:zM()},qM=250,GM=180,VM=.5,YM=50,QM=250,$M=10,f6={mouse:0,touch:0,pen:8},WM=Za(Za({},Vm),{},{device(r,i,{pointer:{touch:a=!1,lock:s=!1,mouse:l=!1}={}}){return this.pointerLock=s&&n1.pointerLock,n1.touch&&a?"touch":this.pointerLock?"mouse":n1.pointer&&!l?"pointer":n1.touch?"touch":"mouse"},preventScrollAxis(r,i,{preventScroll:a}){if(this.preventScrollDelay=typeof a=="number"?a:a||a===void 0&&r?qM:void 0,!(!n1.touchscreen||a===!1))return r||(a!==void 0?"y":void 0)},pointerCapture(r,i,{pointer:{capture:a=!0,buttons:s=1,keys:l=!0}={}}){return this.pointerButtons=s,this.keys=l,!this.pointerLock&&this.device==="pointer"&&a},threshold(r,i,{filterTaps:a=!1,tapsThreshold:s=3,axis:l=void 0}){const c=Lo.toVector(r,a?s:l?1:0);return this.filterTaps=a,this.tapsThreshold=s,c},swipe({velocity:r=VM,distance:i=YM,duration:a=QM}={}){return{velocity:this.transform(Lo.toVector(r)),distance:this.transform(Lo.toVector(i)),duration:a}},delay(r=0){switch(r){case!0:return GM;case!1:return 0;default:return r}},axisThreshold(r){return r?Za(Za({},f6),r):f6},keyboardDisplacement(r=$M){return r}});Za(Za({},d9),{},{device(r,i,{shared:a,pointer:{touch:s=!1}={}}){if(a.target&&!n1.touch&&n1.gesture)return"gesture";if(n1.touch&&s)return"touch";if(n1.touchscreen){if(n1.pointer)return"pointer";if(n1.touch)return"touch"}},bounds(r,i,{scaleBounds:a={},angleBounds:s={}}){const l=d=>{const f=c6(H3(a,d),{min:-1/0,max:1/0});return[f.min,f.max]},c=d=>{const f=c6(H3(s,d),{min:-1/0,max:1/0});return[f.min,f.max]};return typeof a!="function"&&typeof s!="function"?[l(),c()]:d=>[l(d),c(d)]},threshold(r,i,a){return this.lockDirection=a.axis==="lock",Lo.toVector(r,this.lockDirection?[.1,3]:0)},modifierKey(r){return r===void 0?"ctrlKey":r},pinchOnWheel(r=!0){return r}});Za(Za({},Vm),{},{mouseOnly:(r=!0)=>r});Za(Za({},Vm),{},{mouseOnly:(r=!0)=>r});const f9=new Map,Vy=new Map;function XM(r){f9.set(r.key,r.engine),Vy.set(r.key,r.resolver)}const KM={key:"drag",engine:PM,resolver:WM};function JM(r,i){if(r==null)return{};var a={},s=Object.keys(r),l,c;for(c=0;c<s.length;c++)l=s[c],!(i.indexOf(l)>=0)&&(a[l]=r[l]);return a}function ZM(r,i){if(r==null)return{};var a=JM(r,i),s,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(l=0;l<c.length;l++)s=c[l],!(i.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(a[s]=r[s])}return a}const eR={target(r){if(r)return()=>"current"in r?r.current:r},enabled(r=!0){return r},window(r=n1.isBrowser?window:void 0){return r},eventOptions({passive:r=!0,capture:i=!1}={}){return{passive:r,capture:i}},transform(r){return r}},tR=["target","eventOptions","window","enabled","transform"];function C3(r={},i){const a={};for(const[s,l]of Object.entries(i))switch(typeof l){case"function":a[s]=l.call(a,r[s],s,r);break;case"object":a[s]=C3(r[s],l);break;case"boolean":l&&(a[s]=r[s]);break}return a}function nR(r,i,a={}){const s=r,{target:l,eventOptions:c,window:d,enabled:f,transform:m}=s,g=ZM(s,tR);if(a.shared=C3({target:l,eventOptions:c,window:d,enabled:f,transform:m},eR),i){const v=Vy.get(i);a[i]=C3(Za({shared:a.shared},g),v)}else for(const v in g){const y=Vy.get(v);y&&(a[v]=C3(Za({shared:a.shared},g[v]),y))}return a}class h9{constructor(i,a){bl(this,"_listeners",new Set),this._ctrl=i,this._gestureKey=a}add(i,a,s,l,c){const d=this._listeners,f=kM(a,s),m=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=Za(Za({},m),c);i.addEventListener(f,l,g);const v=()=>{i.removeEventListener(f,l,g),d.delete(v)};return d.add(v),v}clean(){this._listeners.forEach(i=>i()),this._listeners.clear()}}class iR{constructor(){bl(this,"_timeouts",new Map)}add(i,a,s=140,...l){this.remove(i),this._timeouts.set(i,window.setTimeout(a,s,...l))}remove(i){const a=this._timeouts.get(i);a&&window.clearTimeout(a)}clean(){this._timeouts.forEach(i=>{window.clearTimeout(i)}),this._timeouts.clear()}}class rR{constructor(i){bl(this,"gestures",new Set),bl(this,"_targetEventStore",new h9(this)),bl(this,"gestureEventStores",{}),bl(this,"gestureTimeoutStores",{}),bl(this,"handlers",{}),bl(this,"config",{}),bl(this,"pointerIds",new Set),bl(this,"touchIds",new Set),bl(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),aR(this,i)}setEventIds(i){if(Cx(i))return this.touchIds=new Set(_M(i)),this.touchIds;if("pointerId"in i)return i.type==="pointerup"||i.type==="pointercancel"?this.pointerIds.delete(i.pointerId):i.type==="pointerdown"&&this.pointerIds.add(i.pointerId),this.pointerIds}applyHandlers(i,a){this.handlers=i,this.nativeHandlers=a}applyConfig(i,a){this.config=nR(i,a,this.config)}clean(){this._targetEventStore.clean();for(const i of this.gestures)this.gestureEventStores[i].clean(),this.gestureTimeoutStores[i].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...i){const a=this.config.shared,s={};let l;if(!(a.target&&(l=a.target(),!l))){if(a.enabled){for(const d of this.gestures){const f=this.config[d],m=h6(s,f.eventOptions,!!l);if(f.enabled){const g=f9.get(d);new g(this,i,d).bind(m)}}const c=h6(s,a.eventOptions,!!l);for(const d in this.nativeHandlers)c(d,"",f=>this.nativeHandlers[d](Za(Za({},this.state.shared),{},{event:f,args:i})),void 0,!0)}for(const c in s)s[c]=TM(...s[c]);if(!l)return s;for(const c in s){const{device:d,capture:f,passive:m}=SM(c);this._targetEventStore.add(l,d,"",s[c],{capture:f,passive:m})}}}}function ph(r,i){r.gestures.add(i),r.gestureEventStores[i]=new h9(r,i),r.gestureTimeoutStores[i]=new iR}function aR(r,i){i.drag&&ph(r,"drag"),i.wheel&&ph(r,"wheel"),i.scroll&&ph(r,"scroll"),i.move&&ph(r,"move"),i.pinch&&ph(r,"pinch"),i.hover&&ph(r,"hover")}const h6=(r,i,a)=>(s,l,c,d={},f=!1)=>{var m,g;const v=(m=d.capture)!==null&&m!==void 0?m:i.capture,y=(g=d.passive)!==null&&g!==void 0?g:i.passive;let A=f?s:wM(s,l,v);a&&y&&(A+="Passive"),r[A]=r[A]||[],r[A].push(c)};function sR(r,i={},a,s){const l=Bu.useMemo(()=>new rR(r),[]);if(l.applyHandlers(r,s),l.applyConfig(i,a),Bu.useEffect(l.effect.bind(l)),Bu.useEffect(()=>l.clean.bind(l),[]),i.target===void 0)return l.bind.bind(l)}function Ex(r,i){return XM(KM),sR({drag:r},i||{},"drag")}const al={DIRECTION_LOCK:8,FLING_VELOCITY:.3,DRAWER_FLING_VELOCITY:.5,SWIPE_BACK_THRESHOLD:80,EDGE_RESISTANCE:.25,MIN_DRAG_FOR_VELOCITY:50,PAGE_NAV_FRACTION:.2,EDGE_ZONE:40,PAGE_SWIPE_THRESHOLD:40},$v={snap:{tension:300,friction:30},fling:{tension:200,friction:25},page:{tension:280,friction:26}};function oR(r,i,a){return Math.min(a,Math.max(i,r))}const yu={SCROLL_AFTER_STAGGER:550,DISPOSITION_SCROLL_DELAY:600,INITIAL_SCROLL_DELAY:300,SCROLL_RETRY:50},Cp={TRANSITION:300,OPEN_DELAY:10,CLOSE_UNMOUNT_DELAY:50},Li={FEEDBACK_DURATION:2500,COPY_FEEDBACK:2e3,DELETE_CONFIRM_TIMEOUT:5e3,SLIDE_ANIMATION:300,AUTOFOCUS_DELAY:100,SAVE_ERROR_DURATION:3e3,AFTER_SAVE_DELAY:800,OFFLINE_TOAST_DURATION:3e3};function p6({title:r,showBack:i=!1,onBack:a,badge:s,onClose:l,isMobile:c}){return x.jsxs("div",{className:"shrink-0",children:[c&&x.jsx("div",{className:"flex justify-center pt-3 pb-2","data-drag-zone":!0,style:{touchAction:"none"},children:x.jsx("div",{className:"w-14 h-1.5 rounded-full bg-tertiary/30"})}),x.jsx("div",{className:"px-6 border-b border-tertiary/10 py-3 md:py-4","data-drag-zone":!0,style:{touchAction:"none"},children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2 min-w-0 transition-all duration-200",children:[x.jsx("div",{className:"shrink-0 overflow-hidden transition-all duration-200",style:{width:i&&a?40:0,opacity:i&&a?1:0},children:x.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-themewhite2 active:scale-95 transition-all","aria-label":"Go back",children:x.jsx(Nc,{size:24,className:"text-tertiary"})})}),x.jsx("h2",{className:"text-[11pt] font-normal text-primary md:text-2xl truncate",children:r}),s&&x.jsx("span",{className:"text-xs text-tertiary/60 bg-tertiary/10 px-2 py-0.5 rounded-full shrink-0",children:s})]}),x.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-themewhite2 md:hover:bg-themewhite active:scale-95 transition-all shrink-0","aria-label":"Close",children:x.jsx(ms,{size:24,className:"text-tertiary"})})]})})]})}function of({isVisible:r,onClose:i,children:a,fullHeight:s="90dvh",disableDrag:l=!1,backdropOpacity:c=.95,desktopPosition:d="right",mobileOnly:f=!1,mobileClassName:m="",zIndex:g="z-60",header:v}){const[y,A]=D.useState(0),[w,k]=D.useState(!1),[E,I]=D.useState(!1),[T,N]=D.useState(!1),j=D.useRef(0),B=D.useRef(0),U=D.useRef(null),F=D.useRef(0);D.useEffect(()=>(r?(I(!0),A(0),document.body.style.overflow="hidden",setTimeout(()=>{A(100)},Cp.OPEN_DELAY),F.current=window.setTimeout(()=>{N(!0)},Cp.OPEN_DELAY)):(A(0),N(!1),U.current=setTimeout(()=>{I(!1),document.body.style.overflow=""},Cp.TRANSITION)),()=>{B.current&&cancelAnimationFrame(B.current),U.current&&clearTimeout(U.current),P.current&&clearTimeout(P.current),F.current&&clearTimeout(F.current)}),[r]);const P=D.useRef(0),z=D.useCallback(ie=>{B.current&&cancelAnimationFrame(B.current);const ne=y,J=performance.now(),te=Cp.TRANSITION,$=oe=>{const we=oe-J,be=Math.min(we/te,1),Te=1-Math.pow(1-be,3),ye=ne+(ie-ne)*Te;A(ye),be<1?B.current=requestAnimationFrame($):(B.current=0,ie===0&&(P.current=window.setTimeout(()=>{i(),I(!1),P.current=0},Cp.CLOSE_UNMOUNT_DELAY)))};B.current=requestAnimationFrame($)},[y,i]),V=Ex(({active:ie,first:ne,movement:[,J],velocity:[,te],direction:[,$],event:oe,cancel:we})=>{if(ne){if(!oe?.target?.closest("[data-drag-zone]")){we();return}j.current=y}if(ie){k(!0);const be=oR(j.current-J*.8,20,100);A(be)}else k(!1),te>al.DRAWER_FLING_VELOCITY&&$>0||y<40?z(0):z(100)},{enabled:!l,axis:"y",filterTaps:!0,pointer:{touch:!0}}),L=D.useCallback(()=>{z(0)},[z]),Q=D.useCallback(()=>{i()},[i]),q={translateY:100-y,opacity:Math.min(1,y/60+.2),height:s,borderRadius:"1.25rem 1.25rem 0 0",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.1)"},ee=d==="left"?"left-0":"right-0",X=d==="left"?"w-[45%]":"w-[55%]",ae=typeof a=="function"?a(L):a,K=typeof a=="function"?a(Q):a;return!E&&!r?null:x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:f?"":"md:hidden",children:[x.jsx("div",{className:`fixed inset-0 ${g} bg-black ${w?"":"transition-opacity duration-300 ease-out"}`,style:{opacity:y/100*c,pointerEvents:y>0?"auto":"none"},onClick:L}),x.jsx("div",{className:`fixed left-0 right-0 ${g} bg-themewhite3 ${w?"":"transition-all duration-300 ease-out"} ${m} ${v?"flex flex-col":""}`,style:{height:q.height,maxHeight:q.height,width:"100%",bottom:0,transform:`translateY(${q.translateY}%)`,opacity:q.opacity,borderRadius:q.borderRadius,willChange:w?"transform":"auto",boxShadow:q.boxShadow,overflow:"hidden",visibility:E?"visible":"hidden"},...v?{}:V(),children:v?x.jsxs(x.Fragment,{children:[x.jsx("div",{...V(),children:x.jsx(p6,{title:v.title,showBack:v.showBack,onBack:v.onBack,badge:v.badge,onClose:L,isMobile:!0})}),x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:ae})]}):ae})]}),!f&&x.jsxs("div",{className:"hidden md:block",children:[x.jsx("div",{className:`fixed inset-0 ${g} bg-black transition-opacity duration-250 ease-out ${T?"opacity-20 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:Q}),x.jsxs("div",{className:`absolute ${ee} top-0 bottom-0 ${X} ${g}
                            flex flex-col rounded-md border border-tertiary/20
                            shadow-lg shadow-black/8 backdrop-blur-xl bg-themewhite3/95
                            transform-gpu overflow-hidden text-primary/80 text-sm`,style:{transition:"opacity 250ms cubic-bezier(0.25, 0.1, 0.25, 1), transform 300ms cubic-bezier(0.32, 0.72, 0, 1)",opacity:T?1:0,transform:T?"scale(1)":"scale(0.95)",transformOrigin:d==="left"?"top left":"top right",pointerEvents:T?"auto":"none"},onClick:ie=>ie.stopPropagation(),children:[v&&x.jsx(p6,{title:v.title,showBack:v.showBack,onBack:v.onBack,badge:v.badge,onClose:Q,isMobile:!1}),v?x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:K}):K]})]})]})}const Uu=({onClick:r,status:i,variant:a,title:s})=>{const l=i==="done"?"text-green-600":i==="busy"?"text-purple-600":"text-tertiary hover:text-primary hover:bg-themewhite3";return x.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),r()},className:`p-1.5 transition-colors rounded-full ${l}`,title:s,children:i==="busy"?x.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):i==="done"?x.jsx(So,{className:"w-4 h-4"}):a==="copy"?x.jsx(IE,{className:"w-4 h-4"}):a==="share"?x.jsx(Q4,{className:"w-4 h-4"}):x.jsx(BE,{className:"w-4 h-4"})})},lR=({children:r,slideDirection:i})=>{const a={"":"",left:"animate-slide-in-left",right:"animate-slide-in-right"};return x.jsx("div",{className:`h-full w-full ${a[i]}`,children:r})},Pb=({checked:r,onChange:i,label:a,onDescription:s,offDescription:l,icon:c,colors:d})=>x.jsxs("div",{onClick:i,className:`flex items-center gap-3 px-4 py-3.5 rounded-xl border transition-all cursor-pointer
            ${r?d.symptomClass:"border-tertiary/15 bg-themewhite2"}`,role:"checkbox","aria-checked":r,tabIndex:0,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),i())},children:[x.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shrink-0 ${r?`${d.sliderClass}/15`:"bg-tertiary/10"}`,children:x.jsx("span",{className:r?d.symptomCheck:"text-tertiary/50",children:c})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${r?"text-primary":"text-tertiary"}`,children:a}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:r?s:l})]}),x.jsx("div",{className:`w-10 h-6 rounded-full relative transition-colors ${r?d.sliderClass:"bg-tertiary/25"}`,children:x.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full bg-white shadow-sm transition-transform ${r?"translate-x-4":"translate-x-0.5"}`})})]});const cR=4,m6=0,g6=1,dR=2;function h2(r){let i=r.length;for(;--i>=0;)r[i]=0}const uR=0,p9=1,fR=2,hR=3,pR=258,pw=29,Qm=256,pm=Qm+1+pw,qh=30,mw=19,m9=2*pm+1,Lu=15,Fb=16,mR=7,gw=256,g9=16,v9=17,x9=18,Yy=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),E3=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gR=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),b9=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vR=512,kc=new Array((pm+2)*2);h2(kc);const Kp=new Array(qh*2);h2(Kp);const mm=new Array(vR);h2(mm);const gm=new Array(pR-hR+1);h2(gm);const vw=new Array(pw);h2(vw);const q3=new Array(qh);h2(q3);function Ub(r,i,a,s,l){this.static_tree=r,this.extra_bits=i,this.extra_base=a,this.elems=s,this.max_length=l,this.has_stree=r&&r.length}let y9,w9,A9;function Lb(r,i){this.dyn_tree=r,this.max_code=0,this.stat_desc=i}const S9=r=>r<256?mm[r]:mm[256+(r>>>7)],vm=(r,i)=>{r.pending_buf[r.pending++]=i&255,r.pending_buf[r.pending++]=i>>>8&255},Cl=(r,i,a)=>{r.bi_valid>Fb-a?(r.bi_buf|=i<<r.bi_valid&65535,vm(r,r.bi_buf),r.bi_buf=i>>Fb-r.bi_valid,r.bi_valid+=a-Fb):(r.bi_buf|=i<<r.bi_valid&65535,r.bi_valid+=a)},ec=(r,i,a)=>{Cl(r,a[i*2],a[i*2+1])},k9=(r,i)=>{let a=0;do a|=r&1,r>>>=1,a<<=1;while(--i>0);return a>>>1},xR=r=>{r.bi_valid===16?(vm(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},bR=(r,i)=>{const a=i.dyn_tree,s=i.max_code,l=i.stat_desc.static_tree,c=i.stat_desc.has_stree,d=i.stat_desc.extra_bits,f=i.stat_desc.extra_base,m=i.stat_desc.max_length;let g,v,y,A,w,k,E=0;for(A=0;A<=Lu;A++)r.bl_count[A]=0;for(a[r.heap[r.heap_max]*2+1]=0,g=r.heap_max+1;g<m9;g++)v=r.heap[g],A=a[a[v*2+1]*2+1]+1,A>m&&(A=m,E++),a[v*2+1]=A,!(v>s)&&(r.bl_count[A]++,w=0,v>=f&&(w=d[v-f]),k=a[v*2],r.opt_len+=k*(A+w),c&&(r.static_len+=k*(l[v*2+1]+w)));if(E!==0){do{for(A=m-1;r.bl_count[A]===0;)A--;r.bl_count[A]--,r.bl_count[A+1]+=2,r.bl_count[m]--,E-=2}while(E>0);for(A=m;A!==0;A--)for(v=r.bl_count[A];v!==0;)y=r.heap[--g],!(y>s)&&(a[y*2+1]!==A&&(r.opt_len+=(A-a[y*2+1])*a[y*2],a[y*2+1]=A),v--)}},C9=(r,i,a)=>{const s=new Array(Lu+1);let l=0,c,d;for(c=1;c<=Lu;c++)l=l+a[c-1]<<1,s[c]=l;for(d=0;d<=i;d++){let f=r[d*2+1];f!==0&&(r[d*2]=k9(s[f]++,f))}},yR=()=>{let r,i,a,s,l;const c=new Array(Lu+1);for(a=0,s=0;s<pw-1;s++)for(vw[s]=a,r=0;r<1<<Yy[s];r++)gm[a++]=s;for(gm[a-1]=s,l=0,s=0;s<16;s++)for(q3[s]=l,r=0;r<1<<E3[s];r++)mm[l++]=s;for(l>>=7;s<qh;s++)for(q3[s]=l<<7,r=0;r<1<<E3[s]-7;r++)mm[256+l++]=s;for(i=0;i<=Lu;i++)c[i]=0;for(r=0;r<=143;)kc[r*2+1]=8,r++,c[8]++;for(;r<=255;)kc[r*2+1]=9,r++,c[9]++;for(;r<=279;)kc[r*2+1]=7,r++,c[7]++;for(;r<=287;)kc[r*2+1]=8,r++,c[8]++;for(C9(kc,pm+1,c),r=0;r<qh;r++)Kp[r*2+1]=5,Kp[r*2]=k9(r,5);y9=new Ub(kc,Yy,Qm+1,pm,Lu),w9=new Ub(Kp,E3,0,qh,Lu),A9=new Ub(new Array(0),gR,0,mw,mR)},E9=r=>{let i;for(i=0;i<pm;i++)r.dyn_ltree[i*2]=0;for(i=0;i<qh;i++)r.dyn_dtree[i*2]=0;for(i=0;i<mw;i++)r.bl_tree[i*2]=0;r.dyn_ltree[gw*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},_9=r=>{r.bi_valid>8?vm(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},v6=(r,i,a,s)=>{const l=i*2,c=a*2;return r[l]<r[c]||r[l]===r[c]&&s[i]<=s[a]},zb=(r,i,a)=>{const s=r.heap[a];let l=a<<1;for(;l<=r.heap_len&&(l<r.heap_len&&v6(i,r.heap[l+1],r.heap[l],r.depth)&&l++,!v6(i,s,r.heap[l],r.depth));)r.heap[a]=r.heap[l],a=l,l<<=1;r.heap[a]=s},x6=(r,i,a)=>{let s,l,c=0,d,f;if(r.sym_next!==0)do s=r.pending_buf[r.sym_buf+c++]&255,s+=(r.pending_buf[r.sym_buf+c++]&255)<<8,l=r.pending_buf[r.sym_buf+c++],s===0?ec(r,l,i):(d=gm[l],ec(r,d+Qm+1,i),f=Yy[d],f!==0&&(l-=vw[d],Cl(r,l,f)),s--,d=S9(s),ec(r,d,a),f=E3[d],f!==0&&(s-=q3[d],Cl(r,s,f)));while(c<r.sym_next);ec(r,gw,i)},Qy=(r,i)=>{const a=i.dyn_tree,s=i.stat_desc.static_tree,l=i.stat_desc.has_stree,c=i.stat_desc.elems;let d,f,m=-1,g;for(r.heap_len=0,r.heap_max=m9,d=0;d<c;d++)a[d*2]!==0?(r.heap[++r.heap_len]=m=d,r.depth[d]=0):a[d*2+1]=0;for(;r.heap_len<2;)g=r.heap[++r.heap_len]=m<2?++m:0,a[g*2]=1,r.depth[g]=0,r.opt_len--,l&&(r.static_len-=s[g*2+1]);for(i.max_code=m,d=r.heap_len>>1;d>=1;d--)zb(r,a,d);g=c;do d=r.heap[1],r.heap[1]=r.heap[r.heap_len--],zb(r,a,1),f=r.heap[1],r.heap[--r.heap_max]=d,r.heap[--r.heap_max]=f,a[g*2]=a[d*2]+a[f*2],r.depth[g]=(r.depth[d]>=r.depth[f]?r.depth[d]:r.depth[f])+1,a[d*2+1]=a[f*2+1]=g,r.heap[1]=g++,zb(r,a,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],bR(r,i),C9(a,m,r.bl_count)},b6=(r,i,a)=>{let s,l=-1,c,d=i[1],f=0,m=7,g=4;for(d===0&&(m=138,g=3),i[(a+1)*2+1]=65535,s=0;s<=a;s++)c=d,d=i[(s+1)*2+1],!(++f<m&&c===d)&&(f<g?r.bl_tree[c*2]+=f:c!==0?(c!==l&&r.bl_tree[c*2]++,r.bl_tree[g9*2]++):f<=10?r.bl_tree[v9*2]++:r.bl_tree[x9*2]++,f=0,l=c,d===0?(m=138,g=3):c===d?(m=6,g=3):(m=7,g=4))},y6=(r,i,a)=>{let s,l=-1,c,d=i[1],f=0,m=7,g=4;for(d===0&&(m=138,g=3),s=0;s<=a;s++)if(c=d,d=i[(s+1)*2+1],!(++f<m&&c===d)){if(f<g)do ec(r,c,r.bl_tree);while(--f!==0);else c!==0?(c!==l&&(ec(r,c,r.bl_tree),f--),ec(r,g9,r.bl_tree),Cl(r,f-3,2)):f<=10?(ec(r,v9,r.bl_tree),Cl(r,f-3,3)):(ec(r,x9,r.bl_tree),Cl(r,f-11,7));f=0,l=c,d===0?(m=138,g=3):c===d?(m=6,g=3):(m=7,g=4)}},wR=r=>{let i;for(b6(r,r.dyn_ltree,r.l_desc.max_code),b6(r,r.dyn_dtree,r.d_desc.max_code),Qy(r,r.bl_desc),i=mw-1;i>=3&&r.bl_tree[b9[i]*2+1]===0;i--);return r.opt_len+=3*(i+1)+5+5+4,i},AR=(r,i,a,s)=>{let l;for(Cl(r,i-257,5),Cl(r,a-1,5),Cl(r,s-4,4),l=0;l<s;l++)Cl(r,r.bl_tree[b9[l]*2+1],3);y6(r,r.dyn_ltree,i-1),y6(r,r.dyn_dtree,a-1)},SR=r=>{let i=4093624447,a;for(a=0;a<=31;a++,i>>>=1)if(i&1&&r.dyn_ltree[a*2]!==0)return m6;if(r.dyn_ltree[18]!==0||r.dyn_ltree[20]!==0||r.dyn_ltree[26]!==0)return g6;for(a=32;a<Qm;a++)if(r.dyn_ltree[a*2]!==0)return g6;return m6};let w6=!1;const kR=r=>{w6||(yR(),w6=!0),r.l_desc=new Lb(r.dyn_ltree,y9),r.d_desc=new Lb(r.dyn_dtree,w9),r.bl_desc=new Lb(r.bl_tree,A9),r.bi_buf=0,r.bi_valid=0,E9(r)},I9=(r,i,a,s)=>{Cl(r,(uR<<1)+(s?1:0),3),_9(r),vm(r,a),vm(r,~a),a&&r.pending_buf.set(r.window.subarray(i,i+a),r.pending),r.pending+=a},CR=r=>{Cl(r,p9<<1,3),ec(r,gw,kc),xR(r)},ER=(r,i,a,s)=>{let l,c,d=0;r.level>0?(r.strm.data_type===dR&&(r.strm.data_type=SR(r)),Qy(r,r.l_desc),Qy(r,r.d_desc),d=wR(r),l=r.opt_len+3+7>>>3,c=r.static_len+3+7>>>3,c<=l&&(l=c)):l=c=a+5,a+4<=l&&i!==-1?I9(r,i,a,s):r.strategy===cR||c===l?(Cl(r,(p9<<1)+(s?1:0),3),x6(r,kc,Kp)):(Cl(r,(fR<<1)+(s?1:0),3),AR(r,r.l_desc.max_code+1,r.d_desc.max_code+1,d+1),x6(r,r.dyn_ltree,r.dyn_dtree)),E9(r),s&&_9(r)},_R=(r,i,a)=>(r.pending_buf[r.sym_buf+r.sym_next++]=i,r.pending_buf[r.sym_buf+r.sym_next++]=i>>8,r.pending_buf[r.sym_buf+r.sym_next++]=a,i===0?r.dyn_ltree[a*2]++:(r.matches++,i--,r.dyn_ltree[(gm[a]+Qm+1)*2]++,r.dyn_dtree[S9(i)*2]++),r.sym_next===r.sym_end);var IR=kR,NR=I9,TR=ER,MR=_R,RR=CR,OR={_tr_init:IR,_tr_stored_block:NR,_tr_flush_block:TR,_tr_tally:MR,_tr_align:RR};const DR=(r,i,a,s)=>{let l=r&65535|0,c=r>>>16&65535|0,d=0;for(;a!==0;){d=a>2e3?2e3:a,a-=d;do l=l+i[s++]|0,c=c+l|0;while(--d);l%=65521,c%=65521}return l|c<<16|0};var xm=DR;const jR=()=>{let r,i=[];for(var a=0;a<256;a++){r=a;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;i[a]=r}return i},BR=new Uint32Array(jR()),PR=(r,i,a,s)=>{const l=BR,c=s+a;r^=-1;for(let d=s;d<c;d++)r=r>>>8^l[(r^i[d])&255];return r^-1};var io=PR,Zu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_x={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:FR,_tr_stored_block:$y,_tr_flush_block:UR,_tr_tally:Id,_tr_align:LR}=OR,{Z_NO_FLUSH:Nd,Z_PARTIAL_FLUSH:zR,Z_FULL_FLUSH:HR,Z_FINISH:r1,Z_BLOCK:A6,Z_OK:wo,Z_STREAM_END:S6,Z_STREAM_ERROR:nc,Z_DATA_ERROR:qR,Z_BUF_ERROR:Hb,Z_DEFAULT_COMPRESSION:GR,Z_FILTERED:VR,Z_HUFFMAN_ONLY:Wv,Z_RLE:YR,Z_FIXED:QR,Z_DEFAULT_STRATEGY:$R,Z_UNKNOWN:WR,Z_DEFLATED:Ix}=_x,XR=9,KR=15,JR=8,ZR=29,eO=256,Wy=eO+1+ZR,tO=30,nO=19,iO=2*Wy+1,rO=15,ir=3,kd=258,ic=kd+ir+1,aO=32,e2=42,xw=57,Xy=69,Ky=73,Jy=91,Zy=103,zu=113,Pp=666,sl=1,p2=2,ef=3,m2=4,sO=3,Hu=(r,i)=>(r.msg=Zu[i],i),k6=r=>r*2-(r>4?9:0),bd=r=>{let i=r.length;for(;--i>=0;)r[i]=0},oO=r=>{let i,a,s,l=r.w_size;i=r.hash_size,s=i;do a=r.head[--s],r.head[s]=a>=l?a-l:0;while(--i);i=l,s=i;do a=r.prev[--s],r.prev[s]=a>=l?a-l:0;while(--i)};let lO=(r,i,a)=>(i<<r.hash_shift^a)&r.hash_mask,Td=lO;const jl=r=>{const i=r.state;let a=i.pending;a>r.avail_out&&(a=r.avail_out),a!==0&&(r.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+a),r.next_out),r.next_out+=a,i.pending_out+=a,r.total_out+=a,r.avail_out-=a,i.pending-=a,i.pending===0&&(i.pending_out=0))},Fl=(r,i)=>{UR(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,i),r.block_start=r.strstart,jl(r.strm)},Br=(r,i)=>{r.pending_buf[r.pending++]=i},Ep=(r,i)=>{r.pending_buf[r.pending++]=i>>>8&255,r.pending_buf[r.pending++]=i&255},e4=(r,i,a,s)=>{let l=r.avail_in;return l>s&&(l=s),l===0?0:(r.avail_in-=l,i.set(r.input.subarray(r.next_in,r.next_in+l),a),r.state.wrap===1?r.adler=xm(r.adler,i,l,a):r.state.wrap===2&&(r.adler=io(r.adler,i,l,a)),r.next_in+=l,r.total_in+=l,l)},N9=(r,i)=>{let a=r.max_chain_length,s=r.strstart,l,c,d=r.prev_length,f=r.nice_match;const m=r.strstart>r.w_size-ic?r.strstart-(r.w_size-ic):0,g=r.window,v=r.w_mask,y=r.prev,A=r.strstart+kd;let w=g[s+d-1],k=g[s+d];r.prev_length>=r.good_match&&(a>>=2),f>r.lookahead&&(f=r.lookahead);do if(l=i,!(g[l+d]!==k||g[l+d-1]!==w||g[l]!==g[s]||g[++l]!==g[s+1])){s+=2,l++;do;while(g[++s]===g[++l]&&g[++s]===g[++l]&&g[++s]===g[++l]&&g[++s]===g[++l]&&g[++s]===g[++l]&&g[++s]===g[++l]&&g[++s]===g[++l]&&g[++s]===g[++l]&&s<A);if(c=kd-(A-s),s=A-kd,c>d){if(r.match_start=i,d=c,c>=f)break;w=g[s+d-1],k=g[s+d]}}while((i=y[i&v])>m&&--a!==0);return d<=r.lookahead?d:r.lookahead},t2=r=>{const i=r.w_size;let a,s,l;do{if(s=r.window_size-r.lookahead-r.strstart,r.strstart>=i+(i-ic)&&(r.window.set(r.window.subarray(i,i+i-s),0),r.match_start-=i,r.strstart-=i,r.block_start-=i,r.insert>r.strstart&&(r.insert=r.strstart),oO(r),s+=i),r.strm.avail_in===0)break;if(a=e4(r.strm,r.window,r.strstart+r.lookahead,s),r.lookahead+=a,r.lookahead+r.insert>=ir)for(l=r.strstart-r.insert,r.ins_h=r.window[l],r.ins_h=Td(r,r.ins_h,r.window[l+1]);r.insert&&(r.ins_h=Td(r,r.ins_h,r.window[l+ir-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++,r.insert--,!(r.lookahead+r.insert<ir)););}while(r.lookahead<ic&&r.strm.avail_in!==0)},T9=(r,i)=>{let a=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,s,l,c,d=0,f=r.strm.avail_in;do{if(s=65535,c=r.bi_valid+42>>3,r.strm.avail_out<c||(c=r.strm.avail_out-c,l=r.strstart-r.block_start,s>l+r.strm.avail_in&&(s=l+r.strm.avail_in),s>c&&(s=c),s<a&&(s===0&&i!==r1||i===Nd||s!==l+r.strm.avail_in)))break;d=i===r1&&s===l+r.strm.avail_in?1:0,$y(r,0,0,d),r.pending_buf[r.pending-4]=s,r.pending_buf[r.pending-3]=s>>8,r.pending_buf[r.pending-2]=~s,r.pending_buf[r.pending-1]=~s>>8,jl(r.strm),l&&(l>s&&(l=s),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+l),r.strm.next_out),r.strm.next_out+=l,r.strm.avail_out-=l,r.strm.total_out+=l,r.block_start+=l,s-=l),s&&(e4(r.strm,r.strm.output,r.strm.next_out,s),r.strm.next_out+=s,r.strm.avail_out-=s,r.strm.total_out+=s)}while(d===0);return f-=r.strm.avail_in,f&&(f>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=f&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-f,r.strm.next_in),r.strstart),r.strstart+=f,r.insert+=f>r.w_size-r.insert?r.w_size-r.insert:f),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),d?m2:i!==Nd&&i!==r1&&r.strm.avail_in===0&&r.strstart===r.block_start?p2:(c=r.window_size-r.strstart,r.strm.avail_in>c&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,c+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),c>r.strm.avail_in&&(c=r.strm.avail_in),c&&(e4(r.strm,r.window,r.strstart,c),r.strstart+=c,r.insert+=c>r.w_size-r.insert?r.w_size-r.insert:c),r.high_water<r.strstart&&(r.high_water=r.strstart),c=r.bi_valid+42>>3,c=r.pending_buf_size-c>65535?65535:r.pending_buf_size-c,a=c>r.w_size?r.w_size:c,l=r.strstart-r.block_start,(l>=a||(l||i===r1)&&i!==Nd&&r.strm.avail_in===0&&l<=c)&&(s=l>c?c:l,d=i===r1&&r.strm.avail_in===0&&s===l?1:0,$y(r,r.block_start,s,d),r.block_start+=s,jl(r.strm)),d?ef:sl)},qb=(r,i)=>{let a,s;for(;;){if(r.lookahead<ic){if(t2(r),r.lookahead<ic&&i===Nd)return sl;if(r.lookahead===0)break}if(a=0,r.lookahead>=ir&&(r.ins_h=Td(r,r.ins_h,r.window[r.strstart+ir-1]),a=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),a!==0&&r.strstart-a<=r.w_size-ic&&(r.match_length=N9(r,a)),r.match_length>=ir)if(s=Id(r,r.strstart-r.match_start,r.match_length-ir),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=ir){r.match_length--;do r.strstart++,r.ins_h=Td(r,r.ins_h,r.window[r.strstart+ir-1]),a=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=Td(r,r.ins_h,r.window[r.strstart+1]);else s=Id(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(s&&(Fl(r,!1),r.strm.avail_out===0))return sl}return r.insert=r.strstart<ir-1?r.strstart:ir-1,i===r1?(Fl(r,!0),r.strm.avail_out===0?ef:m2):r.sym_next&&(Fl(r,!1),r.strm.avail_out===0)?sl:p2},mh=(r,i)=>{let a,s,l;for(;;){if(r.lookahead<ic){if(t2(r),r.lookahead<ic&&i===Nd)return sl;if(r.lookahead===0)break}if(a=0,r.lookahead>=ir&&(r.ins_h=Td(r,r.ins_h,r.window[r.strstart+ir-1]),a=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=ir-1,a!==0&&r.prev_length<r.max_lazy_match&&r.strstart-a<=r.w_size-ic&&(r.match_length=N9(r,a),r.match_length<=5&&(r.strategy===VR||r.match_length===ir&&r.strstart-r.match_start>4096)&&(r.match_length=ir-1)),r.prev_length>=ir&&r.match_length<=r.prev_length){l=r.strstart+r.lookahead-ir,s=Id(r,r.strstart-1-r.prev_match,r.prev_length-ir),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=l&&(r.ins_h=Td(r,r.ins_h,r.window[r.strstart+ir-1]),a=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=ir-1,r.strstart++,s&&(Fl(r,!1),r.strm.avail_out===0))return sl}else if(r.match_available){if(s=Id(r,0,r.window[r.strstart-1]),s&&Fl(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return sl}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(s=Id(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<ir-1?r.strstart:ir-1,i===r1?(Fl(r,!0),r.strm.avail_out===0?ef:m2):r.sym_next&&(Fl(r,!1),r.strm.avail_out===0)?sl:p2},cO=(r,i)=>{let a,s,l,c;const d=r.window;for(;;){if(r.lookahead<=kd){if(t2(r),r.lookahead<=kd&&i===Nd)return sl;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=ir&&r.strstart>0&&(l=r.strstart-1,s=d[l],s===d[++l]&&s===d[++l]&&s===d[++l])){c=r.strstart+kd;do;while(s===d[++l]&&s===d[++l]&&s===d[++l]&&s===d[++l]&&s===d[++l]&&s===d[++l]&&s===d[++l]&&s===d[++l]&&l<c);r.match_length=kd-(c-l),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=ir?(a=Id(r,1,r.match_length-ir),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(a=Id(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),a&&(Fl(r,!1),r.strm.avail_out===0))return sl}return r.insert=0,i===r1?(Fl(r,!0),r.strm.avail_out===0?ef:m2):r.sym_next&&(Fl(r,!1),r.strm.avail_out===0)?sl:p2},dO=(r,i)=>{let a;for(;;){if(r.lookahead===0&&(t2(r),r.lookahead===0)){if(i===Nd)return sl;break}if(r.match_length=0,a=Id(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,a&&(Fl(r,!1),r.strm.avail_out===0))return sl}return r.insert=0,i===r1?(Fl(r,!0),r.strm.avail_out===0?ef:m2):r.sym_next&&(Fl(r,!1),r.strm.avail_out===0)?sl:p2};function Q1(r,i,a,s,l){this.good_length=r,this.max_lazy=i,this.nice_length=a,this.max_chain=s,this.func=l}const Fp=[new Q1(0,0,0,0,T9),new Q1(4,4,8,4,qb),new Q1(4,5,16,8,qb),new Q1(4,6,32,32,qb),new Q1(4,4,16,16,mh),new Q1(8,16,32,32,mh),new Q1(8,16,128,128,mh),new Q1(8,32,128,256,mh),new Q1(32,128,258,1024,mh),new Q1(32,258,258,4096,mh)],uO=r=>{r.window_size=2*r.w_size,bd(r.head),r.max_lazy_match=Fp[r.level].max_lazy,r.good_match=Fp[r.level].good_length,r.nice_match=Fp[r.level].nice_length,r.max_chain_length=Fp[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=ir-1,r.match_available=0,r.ins_h=0};function fO(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ix,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(iO*2),this.dyn_dtree=new Uint16Array((2*tO+1)*2),this.bl_tree=new Uint16Array((2*nO+1)*2),bd(this.dyn_ltree),bd(this.dyn_dtree),bd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(rO+1),this.heap=new Uint16Array(2*Wy+1),bd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Wy+1),bd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $m=r=>{if(!r)return 1;const i=r.state;return!i||i.strm!==r||i.status!==e2&&i.status!==xw&&i.status!==Xy&&i.status!==Ky&&i.status!==Jy&&i.status!==Zy&&i.status!==zu&&i.status!==Pp?1:0},M9=r=>{if($m(r))return Hu(r,nc);r.total_in=r.total_out=0,r.data_type=WR;const i=r.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?xw:i.wrap?e2:zu,r.adler=i.wrap===2?0:1,i.last_flush=-2,FR(i),wo},R9=r=>{const i=M9(r);return i===wo&&uO(r.state),i},hO=(r,i)=>$m(r)||r.state.wrap!==2?nc:(r.state.gzhead=i,wo),O9=(r,i,a,s,l,c)=>{if(!r)return nc;let d=1;if(i===GR&&(i=6),s<0?(d=0,s=-s):s>15&&(d=2,s-=16),l<1||l>XR||a!==Ix||s<8||s>15||i<0||i>9||c<0||c>QR||s===8&&d!==1)return Hu(r,nc);s===8&&(s=9);const f=new fO;return r.state=f,f.strm=r,f.status=e2,f.wrap=d,f.gzhead=null,f.w_bits=s,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=l+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+ir-1)/ir),f.window=new Uint8Array(f.w_size*2),f.head=new Uint16Array(f.hash_size),f.prev=new Uint16Array(f.w_size),f.lit_bufsize=1<<l+6,f.pending_buf_size=f.lit_bufsize*4,f.pending_buf=new Uint8Array(f.pending_buf_size),f.sym_buf=f.lit_bufsize,f.sym_end=(f.lit_bufsize-1)*3,f.level=i,f.strategy=c,f.method=a,R9(r)},pO=(r,i)=>O9(r,i,Ix,KR,JR,$R),mO=(r,i)=>{if($m(r)||i>A6||i<0)return r?Hu(r,nc):nc;const a=r.state;if(!r.output||r.avail_in!==0&&!r.input||a.status===Pp&&i!==r1)return Hu(r,r.avail_out===0?Hb:nc);const s=a.last_flush;if(a.last_flush=i,a.pending!==0){if(jl(r),r.avail_out===0)return a.last_flush=-1,wo}else if(r.avail_in===0&&k6(i)<=k6(s)&&i!==r1)return Hu(r,Hb);if(a.status===Pp&&r.avail_in!==0)return Hu(r,Hb);if(a.status===e2&&a.wrap===0&&(a.status=zu),a.status===e2){let l=Ix+(a.w_bits-8<<4)<<8,c=-1;if(a.strategy>=Wv||a.level<2?c=0:a.level<6?c=1:a.level===6?c=2:c=3,l|=c<<6,a.strstart!==0&&(l|=aO),l+=31-l%31,Ep(a,l),a.strstart!==0&&(Ep(a,r.adler>>>16),Ep(a,r.adler&65535)),r.adler=1,a.status=zu,jl(r),a.pending!==0)return a.last_flush=-1,wo}if(a.status===xw){if(r.adler=0,Br(a,31),Br(a,139),Br(a,8),a.gzhead)Br(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),Br(a,a.gzhead.time&255),Br(a,a.gzhead.time>>8&255),Br(a,a.gzhead.time>>16&255),Br(a,a.gzhead.time>>24&255),Br(a,a.level===9?2:a.strategy>=Wv||a.level<2?4:0),Br(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(Br(a,a.gzhead.extra.length&255),Br(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(r.adler=io(r.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=Xy;else if(Br(a,0),Br(a,0),Br(a,0),Br(a,0),Br(a,0),Br(a,a.level===9?2:a.strategy>=Wv||a.level<2?4:0),Br(a,sO),a.status=zu,jl(r),a.pending!==0)return a.last_flush=-1,wo}if(a.status===Xy){if(a.gzhead.extra){let l=a.pending,c=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+c>a.pending_buf_size;){let f=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+f),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>l&&(r.adler=io(r.adler,a.pending_buf,a.pending-l,l)),a.gzindex+=f,jl(r),a.pending!==0)return a.last_flush=-1,wo;l=0,c-=f}let d=new Uint8Array(a.gzhead.extra);a.pending_buf.set(d.subarray(a.gzindex,a.gzindex+c),a.pending),a.pending+=c,a.gzhead.hcrc&&a.pending>l&&(r.adler=io(r.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=Ky}if(a.status===Ky){if(a.gzhead.name){let l=a.pending,c;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(r.adler=io(r.adler,a.pending_buf,a.pending-l,l)),jl(r),a.pending!==0)return a.last_flush=-1,wo;l=0}a.gzindex<a.gzhead.name.length?c=a.gzhead.name.charCodeAt(a.gzindex++)&255:c=0,Br(a,c)}while(c!==0);a.gzhead.hcrc&&a.pending>l&&(r.adler=io(r.adler,a.pending_buf,a.pending-l,l)),a.gzindex=0}a.status=Jy}if(a.status===Jy){if(a.gzhead.comment){let l=a.pending,c;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>l&&(r.adler=io(r.adler,a.pending_buf,a.pending-l,l)),jl(r),a.pending!==0)return a.last_flush=-1,wo;l=0}a.gzindex<a.gzhead.comment.length?c=a.gzhead.comment.charCodeAt(a.gzindex++)&255:c=0,Br(a,c)}while(c!==0);a.gzhead.hcrc&&a.pending>l&&(r.adler=io(r.adler,a.pending_buf,a.pending-l,l))}a.status=Zy}if(a.status===Zy){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(jl(r),a.pending!==0))return a.last_flush=-1,wo;Br(a,r.adler&255),Br(a,r.adler>>8&255),r.adler=0}if(a.status=zu,jl(r),a.pending!==0)return a.last_flush=-1,wo}if(r.avail_in!==0||a.lookahead!==0||i!==Nd&&a.status!==Pp){let l=a.level===0?T9(a,i):a.strategy===Wv?dO(a,i):a.strategy===YR?cO(a,i):Fp[a.level].func(a,i);if((l===ef||l===m2)&&(a.status=Pp),l===sl||l===ef)return r.avail_out===0&&(a.last_flush=-1),wo;if(l===p2&&(i===zR?LR(a):i!==A6&&($y(a,0,0,!1),i===HR&&(bd(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),jl(r),r.avail_out===0))return a.last_flush=-1,wo}return i!==r1?wo:a.wrap<=0?S6:(a.wrap===2?(Br(a,r.adler&255),Br(a,r.adler>>8&255),Br(a,r.adler>>16&255),Br(a,r.adler>>24&255),Br(a,r.total_in&255),Br(a,r.total_in>>8&255),Br(a,r.total_in>>16&255),Br(a,r.total_in>>24&255)):(Ep(a,r.adler>>>16),Ep(a,r.adler&65535)),jl(r),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?wo:S6)},gO=r=>{if($m(r))return nc;const i=r.state.status;return r.state=null,i===zu?Hu(r,qR):wo},vO=(r,i)=>{let a=i.length;if($m(r))return nc;const s=r.state,l=s.wrap;if(l===2||l===1&&s.status!==e2||s.lookahead)return nc;if(l===1&&(r.adler=xm(r.adler,i,a,0)),s.wrap=0,a>=s.w_size){l===0&&(bd(s.head),s.strstart=0,s.block_start=0,s.insert=0);let m=new Uint8Array(s.w_size);m.set(i.subarray(a-s.w_size,a),0),i=m,a=s.w_size}const c=r.avail_in,d=r.next_in,f=r.input;for(r.avail_in=a,r.next_in=0,r.input=i,t2(s);s.lookahead>=ir;){let m=s.strstart,g=s.lookahead-(ir-1);do s.ins_h=Td(s,s.ins_h,s.window[m+ir-1]),s.prev[m&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=m,m++;while(--g);s.strstart=m,s.lookahead=ir-1,t2(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=ir-1,s.match_available=0,r.next_in=d,r.input=f,r.avail_in=c,s.wrap=l,wo};var xO=pO,bO=O9,yO=R9,wO=M9,AO=hO,SO=mO,kO=gO,CO=vO,EO="pako deflate (from Nodeca project)",Jp={deflateInit:xO,deflateInit2:bO,deflateReset:yO,deflateResetKeep:wO,deflateSetHeader:AO,deflate:SO,deflateEnd:kO,deflateSetDictionary:CO,deflateInfo:EO};const _O=(r,i)=>Object.prototype.hasOwnProperty.call(r,i);var IO=function(r){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const a=i.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const s in a)_O(a,s)&&(r[s]=a[s])}}return r},NO=r=>{let i=0;for(let s=0,l=r.length;s<l;s++)i+=r[s].length;const a=new Uint8Array(i);for(let s=0,l=0,c=r.length;s<c;s++){let d=r[s];a.set(d,l),l+=d.length}return a},Nx={assign:IO,flattenChunks:NO};let D9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{D9=!1}const bm=new Uint8Array(256);for(let r=0;r<256;r++)bm[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;bm[254]=bm[254]=1;var TO=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let i,a,s,l,c,d=r.length,f=0;for(l=0;l<d;l++)a=r.charCodeAt(l),(a&64512)===55296&&l+1<d&&(s=r.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),f+=a<128?1:a<2048?2:a<65536?3:4;for(i=new Uint8Array(f),c=0,l=0;c<f;l++)a=r.charCodeAt(l),(a&64512)===55296&&l+1<d&&(s=r.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),a<128?i[c++]=a:a<2048?(i[c++]=192|a>>>6,i[c++]=128|a&63):a<65536?(i[c++]=224|a>>>12,i[c++]=128|a>>>6&63,i[c++]=128|a&63):(i[c++]=240|a>>>18,i[c++]=128|a>>>12&63,i[c++]=128|a>>>6&63,i[c++]=128|a&63);return i};const MO=(r,i)=>{if(i<65534&&r.subarray&&D9)return String.fromCharCode.apply(null,r.length===i?r:r.subarray(0,i));let a="";for(let s=0;s<i;s++)a+=String.fromCharCode(r[s]);return a};var RO=(r,i)=>{const a=i||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,i));let s,l;const c=new Array(a*2);for(l=0,s=0;s<a;){let d=r[s++];if(d<128){c[l++]=d;continue}let f=bm[d];if(f>4){c[l++]=65533,s+=f-1;continue}for(d&=f===2?31:f===3?15:7;f>1&&s<a;)d=d<<6|r[s++]&63,f--;if(f>1){c[l++]=65533;continue}d<65536?c[l++]=d:(d-=65536,c[l++]=55296|d>>10&1023,c[l++]=56320|d&1023)}return MO(c,l)},OO=(r,i)=>{i=i||r.length,i>r.length&&(i=r.length);let a=i-1;for(;a>=0&&(r[a]&192)===128;)a--;return a<0||a===0?i:a+bm[r[a]]>i?a:i},ym={string2buf:TO,buf2string:RO,utf8border:OO};function DO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var j9=DO;const B9=Object.prototype.toString,{Z_NO_FLUSH:jO,Z_SYNC_FLUSH:BO,Z_FULL_FLUSH:PO,Z_FINISH:FO,Z_OK:G3,Z_STREAM_END:UO,Z_DEFAULT_COMPRESSION:LO,Z_DEFAULT_STRATEGY:zO,Z_DEFLATED:HO}=_x;function Tx(r){this.options=Nx.assign({level:LO,method:HO,chunkSize:16384,windowBits:15,memLevel:8,strategy:zO},r||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j9,this.strm.avail_out=0;let a=Jp.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(a!==G3)throw new Error(Zu[a]);if(i.header&&Jp.deflateSetHeader(this.strm,i.header),i.dictionary){let s;if(typeof i.dictionary=="string"?s=ym.string2buf(i.dictionary):B9.call(i.dictionary)==="[object ArrayBuffer]"?s=new Uint8Array(i.dictionary):s=i.dictionary,a=Jp.deflateSetDictionary(this.strm,s),a!==G3)throw new Error(Zu[a]);this._dict_set=!0}}Tx.prototype.push=function(r,i){const a=this.strm,s=this.options.chunkSize;let l,c;if(this.ended)return!1;for(i===~~i?c=i:c=i===!0?FO:jO,typeof r=="string"?a.input=ym.string2buf(r):B9.call(r)==="[object ArrayBuffer]"?a.input=new Uint8Array(r):a.input=r,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(c===BO||c===PO)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(l=Jp.deflate(a,c),l===UO)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),l=Jp.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===G3;if(a.avail_out===0){this.onData(a.output);continue}if(c>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0};Tx.prototype.onData=function(r){this.chunks.push(r)};Tx.prototype.onEnd=function(r){r===G3&&(this.result=Nx.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function qO(r,i){const a=new Tx(i);if(a.push(r,!0),a.err)throw a.msg||Zu[a.err];return a.result}function GO(r,i){return i=i||{},i.raw=!0,qO(r,i)}var VO=GO,YO={deflateRaw:VO};const Xv=16209,QO=16191;var $O=function(i,a){let s,l,c,d,f,m,g,v,y,A,w,k,E,I,T,N,j,B,U,F,P,z,V,L;const Q=i.state;s=i.next_in,V=i.input,l=s+(i.avail_in-5),c=i.next_out,L=i.output,d=c-(a-i.avail_out),f=c+(i.avail_out-257),m=Q.dmax,g=Q.wsize,v=Q.whave,y=Q.wnext,A=Q.window,w=Q.hold,k=Q.bits,E=Q.lencode,I=Q.distcode,T=(1<<Q.lenbits)-1,N=(1<<Q.distbits)-1;e:do{k<15&&(w+=V[s++]<<k,k+=8,w+=V[s++]<<k,k+=8),j=E[w&T];t:for(;;){if(B=j>>>24,w>>>=B,k-=B,B=j>>>16&255,B===0)L[c++]=j&65535;else if(B&16){U=j&65535,B&=15,B&&(k<B&&(w+=V[s++]<<k,k+=8),U+=w&(1<<B)-1,w>>>=B,k-=B),k<15&&(w+=V[s++]<<k,k+=8,w+=V[s++]<<k,k+=8),j=I[w&N];n:for(;;){if(B=j>>>24,w>>>=B,k-=B,B=j>>>16&255,B&16){if(F=j&65535,B&=15,k<B&&(w+=V[s++]<<k,k+=8,k<B&&(w+=V[s++]<<k,k+=8)),F+=w&(1<<B)-1,F>m){i.msg="invalid distance too far back",Q.mode=Xv;break e}if(w>>>=B,k-=B,B=c-d,F>B){if(B=F-B,B>v&&Q.sane){i.msg="invalid distance too far back",Q.mode=Xv;break e}if(P=0,z=A,y===0){if(P+=g-B,B<U){U-=B;do L[c++]=A[P++];while(--B);P=c-F,z=L}}else if(y<B){if(P+=g+y-B,B-=y,B<U){U-=B;do L[c++]=A[P++];while(--B);if(P=0,y<U){B=y,U-=B;do L[c++]=A[P++];while(--B);P=c-F,z=L}}}else if(P+=y-B,B<U){U-=B;do L[c++]=A[P++];while(--B);P=c-F,z=L}for(;U>2;)L[c++]=z[P++],L[c++]=z[P++],L[c++]=z[P++],U-=3;U&&(L[c++]=z[P++],U>1&&(L[c++]=z[P++]))}else{P=c-F;do L[c++]=L[P++],L[c++]=L[P++],L[c++]=L[P++],U-=3;while(U>2);U&&(L[c++]=L[P++],U>1&&(L[c++]=L[P++]))}}else if((B&64)===0){j=I[(j&65535)+(w&(1<<B)-1)];continue n}else{i.msg="invalid distance code",Q.mode=Xv;break e}break}}else if((B&64)===0){j=E[(j&65535)+(w&(1<<B)-1)];continue t}else if(B&32){Q.mode=QO;break e}else{i.msg="invalid literal/length code",Q.mode=Xv;break e}break}}while(s<l&&c<f);U=k>>3,s-=U,k-=U<<3,w&=(1<<k)-1,i.next_in=s,i.next_out=c,i.avail_in=s<l?5+(l-s):5-(s-l),i.avail_out=c<f?257+(f-c):257-(c-f),Q.hold=w,Q.bits=k};const gh=15,C6=852,E6=592,_6=0,Gb=1,I6=2,WO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),XO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),KO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),JO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ZO=(r,i,a,s,l,c,d,f)=>{const m=f.bits;let g=0,v=0,y=0,A=0,w=0,k=0,E=0,I=0,T=0,N=0,j,B,U,F,P,z=null,V;const L=new Uint16Array(gh+1),Q=new Uint16Array(gh+1);let q=null,ee,X,ae;for(g=0;g<=gh;g++)L[g]=0;for(v=0;v<s;v++)L[i[a+v]]++;for(w=m,A=gh;A>=1&&L[A]===0;A--);if(w>A&&(w=A),A===0)return l[c++]=1<<24|64<<16|0,l[c++]=1<<24|64<<16|0,f.bits=1,0;for(y=1;y<A&&L[y]===0;y++);for(w<y&&(w=y),I=1,g=1;g<=gh;g++)if(I<<=1,I-=L[g],I<0)return-1;if(I>0&&(r===_6||A!==1))return-1;for(Q[1]=0,g=1;g<gh;g++)Q[g+1]=Q[g]+L[g];for(v=0;v<s;v++)i[a+v]!==0&&(d[Q[i[a+v]]++]=v);if(r===_6?(z=q=d,V=20):r===Gb?(z=WO,q=XO,V=257):(z=KO,q=JO,V=0),N=0,v=0,g=y,P=c,k=w,E=0,U=-1,T=1<<w,F=T-1,r===Gb&&T>C6||r===I6&&T>E6)return 1;for(;;){ee=g-E,d[v]+1<V?(X=0,ae=d[v]):d[v]>=V?(X=q[d[v]-V],ae=z[d[v]-V]):(X=96,ae=0),j=1<<g-E,B=1<<k,y=B;do B-=j,l[P+(N>>E)+B]=ee<<24|X<<16|ae|0;while(B!==0);for(j=1<<g-1;N&j;)j>>=1;if(j!==0?(N&=j-1,N+=j):N=0,v++,--L[g]===0){if(g===A)break;g=i[a+d[v]]}if(g>w&&(N&F)!==U){for(E===0&&(E=w),P+=y,k=g-E,I=1<<k;k+E<A&&(I-=L[k+E],!(I<=0));)k++,I<<=1;if(T+=1<<k,r===Gb&&T>C6||r===I6&&T>E6)return 1;U=N&F,l[U]=w<<24|k<<16|P-c|0}}return N!==0&&(l[P+N]=g-E<<24|64<<16|0),f.bits=w,0};var Zp=ZO;const eD=0,P9=1,F9=2,{Z_FINISH:N6,Z_BLOCK:tD,Z_TREES:Kv,Z_OK:tf,Z_STREAM_END:nD,Z_NEED_DICT:iD,Z_STREAM_ERROR:d1,Z_DATA_ERROR:U9,Z_MEM_ERROR:L9,Z_BUF_ERROR:rD,Z_DEFLATED:T6}=_x,Mx=16180,M6=16181,R6=16182,O6=16183,D6=16184,j6=16185,B6=16186,P6=16187,F6=16188,U6=16189,V3=16190,bc=16191,Vb=16192,L6=16193,Yb=16194,z6=16195,H6=16196,q6=16197,G6=16198,Jv=16199,Zv=16200,V6=16201,Y6=16202,Q6=16203,$6=16204,W6=16205,Qb=16206,X6=16207,K6=16208,za=16209,z9=16210,H9=16211,aD=852,sD=592,oD=15,lD=oD,J6=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function cD(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const lf=r=>{if(!r)return 1;const i=r.state;return!i||i.strm!==r||i.mode<Mx||i.mode>H9?1:0},q9=r=>{if(lf(r))return d1;const i=r.state;return r.total_in=r.total_out=i.total=0,r.msg="",i.wrap&&(r.adler=i.wrap&1),i.mode=Mx,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(aD),i.distcode=i.distdyn=new Int32Array(sD),i.sane=1,i.back=-1,tf},G9=r=>{if(lf(r))return d1;const i=r.state;return i.wsize=0,i.whave=0,i.wnext=0,q9(r)},V9=(r,i)=>{let a;if(lf(r))return d1;const s=r.state;return i<0?(a=0,i=-i):(a=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?d1:(s.window!==null&&s.wbits!==i&&(s.window=null),s.wrap=a,s.wbits=i,G9(r))},Y9=(r,i)=>{if(!r)return d1;const a=new cD;r.state=a,a.strm=r,a.window=null,a.mode=Mx;const s=V9(r,i);return s!==tf&&(r.state=null),s},dD=r=>Y9(r,lD);let Z6=!0,$b,Wb;const uD=r=>{if(Z6){$b=new Int32Array(512),Wb=new Int32Array(32);let i=0;for(;i<144;)r.lens[i++]=8;for(;i<256;)r.lens[i++]=9;for(;i<280;)r.lens[i++]=7;for(;i<288;)r.lens[i++]=8;for(Zp(P9,r.lens,0,288,$b,0,r.work,{bits:9}),i=0;i<32;)r.lens[i++]=5;Zp(F9,r.lens,0,32,Wb,0,r.work,{bits:5}),Z6=!1}r.lencode=$b,r.lenbits=9,r.distcode=Wb,r.distbits=5},Q9=(r,i,a,s)=>{let l;const c=r.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),s>=c.wsize?(c.window.set(i.subarray(a-c.wsize,a),0),c.wnext=0,c.whave=c.wsize):(l=c.wsize-c.wnext,l>s&&(l=s),c.window.set(i.subarray(a-s,a-s+l),c.wnext),s-=l,s?(c.window.set(i.subarray(a-s,a),0),c.wnext=s,c.whave=c.wsize):(c.wnext+=l,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=l))),0},fD=(r,i)=>{let a,s,l,c,d,f,m,g,v,y,A,w,k,E,I=0,T,N,j,B,U,F,P,z;const V=new Uint8Array(4);let L,Q;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(lf(r)||!r.output||!r.input&&r.avail_in!==0)return d1;a=r.state,a.mode===bc&&(a.mode=Vb),d=r.next_out,l=r.output,m=r.avail_out,c=r.next_in,s=r.input,f=r.avail_in,g=a.hold,v=a.bits,y=f,A=m,z=tf;e:for(;;)switch(a.mode){case Mx:if(a.wrap===0){a.mode=Vb;break}for(;v<16;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(a.wrap&2&&g===35615){a.wbits===0&&(a.wbits=15),a.check=0,V[0]=g&255,V[1]=g>>>8&255,a.check=io(a.check,V,2,0),g=0,v=0,a.mode=M6;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((g&255)<<8)+(g>>8))%31){r.msg="incorrect header check",a.mode=za;break}if((g&15)!==T6){r.msg="unknown compression method",a.mode=za;break}if(g>>>=4,v-=4,P=(g&15)+8,a.wbits===0&&(a.wbits=P),P>15||P>a.wbits){r.msg="invalid window size",a.mode=za;break}a.dmax=1<<a.wbits,a.flags=0,r.adler=a.check=1,a.mode=g&512?U6:bc,g=0,v=0;break;case M6:for(;v<16;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(a.flags=g,(a.flags&255)!==T6){r.msg="unknown compression method",a.mode=za;break}if(a.flags&57344){r.msg="unknown header flags set",a.mode=za;break}a.head&&(a.head.text=g>>8&1),a.flags&512&&a.wrap&4&&(V[0]=g&255,V[1]=g>>>8&255,a.check=io(a.check,V,2,0)),g=0,v=0,a.mode=R6;case R6:for(;v<32;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}a.head&&(a.head.time=g),a.flags&512&&a.wrap&4&&(V[0]=g&255,V[1]=g>>>8&255,V[2]=g>>>16&255,V[3]=g>>>24&255,a.check=io(a.check,V,4,0)),g=0,v=0,a.mode=O6;case O6:for(;v<16;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}a.head&&(a.head.xflags=g&255,a.head.os=g>>8),a.flags&512&&a.wrap&4&&(V[0]=g&255,V[1]=g>>>8&255,a.check=io(a.check,V,2,0)),g=0,v=0,a.mode=D6;case D6:if(a.flags&1024){for(;v<16;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}a.length=g,a.head&&(a.head.extra_len=g),a.flags&512&&a.wrap&4&&(V[0]=g&255,V[1]=g>>>8&255,a.check=io(a.check,V,2,0)),g=0,v=0}else a.head&&(a.head.extra=null);a.mode=j6;case j6:if(a.flags&1024&&(w=a.length,w>f&&(w=f),w&&(a.head&&(P=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(s.subarray(c,c+w),P)),a.flags&512&&a.wrap&4&&(a.check=io(a.check,s,w,c)),f-=w,c+=w,a.length-=w),a.length))break e;a.length=0,a.mode=B6;case B6:if(a.flags&2048){if(f===0)break e;w=0;do P=s[c+w++],a.head&&P&&a.length<65536&&(a.head.name+=String.fromCharCode(P));while(P&&w<f);if(a.flags&512&&a.wrap&4&&(a.check=io(a.check,s,w,c)),f-=w,c+=w,P)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=P6;case P6:if(a.flags&4096){if(f===0)break e;w=0;do P=s[c+w++],a.head&&P&&a.length<65536&&(a.head.comment+=String.fromCharCode(P));while(P&&w<f);if(a.flags&512&&a.wrap&4&&(a.check=io(a.check,s,w,c)),f-=w,c+=w,P)break e}else a.head&&(a.head.comment=null);a.mode=F6;case F6:if(a.flags&512){for(;v<16;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(a.wrap&4&&g!==(a.check&65535)){r.msg="header crc mismatch",a.mode=za;break}g=0,v=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),r.adler=a.check=0,a.mode=bc;break;case U6:for(;v<32;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}r.adler=a.check=J6(g),g=0,v=0,a.mode=V3;case V3:if(a.havedict===0)return r.next_out=d,r.avail_out=m,r.next_in=c,r.avail_in=f,a.hold=g,a.bits=v,iD;r.adler=a.check=1,a.mode=bc;case bc:if(i===tD||i===Kv)break e;case Vb:if(a.last){g>>>=v&7,v-=v&7,a.mode=Qb;break}for(;v<3;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}switch(a.last=g&1,g>>>=1,v-=1,g&3){case 0:a.mode=L6;break;case 1:if(uD(a),a.mode=Jv,i===Kv){g>>>=2,v-=2;break e}break;case 2:a.mode=H6;break;case 3:r.msg="invalid block type",a.mode=za}g>>>=2,v-=2;break;case L6:for(g>>>=v&7,v-=v&7;v<32;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if((g&65535)!==(g>>>16^65535)){r.msg="invalid stored block lengths",a.mode=za;break}if(a.length=g&65535,g=0,v=0,a.mode=Yb,i===Kv)break e;case Yb:a.mode=z6;case z6:if(w=a.length,w){if(w>f&&(w=f),w>m&&(w=m),w===0)break e;l.set(s.subarray(c,c+w),d),f-=w,c+=w,m-=w,d+=w,a.length-=w;break}a.mode=bc;break;case H6:for(;v<14;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(a.nlen=(g&31)+257,g>>>=5,v-=5,a.ndist=(g&31)+1,g>>>=5,v-=5,a.ncode=(g&15)+4,g>>>=4,v-=4,a.nlen>286||a.ndist>30){r.msg="too many length or distance symbols",a.mode=za;break}a.have=0,a.mode=q6;case q6:for(;a.have<a.ncode;){for(;v<3;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}a.lens[q[a.have++]]=g&7,g>>>=3,v-=3}for(;a.have<19;)a.lens[q[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,L={bits:a.lenbits},z=Zp(eD,a.lens,0,19,a.lencode,0,a.work,L),a.lenbits=L.bits,z){r.msg="invalid code lengths set",a.mode=za;break}a.have=0,a.mode=G6;case G6:for(;a.have<a.nlen+a.ndist;){for(;I=a.lencode[g&(1<<a.lenbits)-1],T=I>>>24,N=I>>>16&255,j=I&65535,!(T<=v);){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(j<16)g>>>=T,v-=T,a.lens[a.have++]=j;else{if(j===16){for(Q=T+2;v<Q;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(g>>>=T,v-=T,a.have===0){r.msg="invalid bit length repeat",a.mode=za;break}P=a.lens[a.have-1],w=3+(g&3),g>>>=2,v-=2}else if(j===17){for(Q=T+3;v<Q;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}g>>>=T,v-=T,P=0,w=3+(g&7),g>>>=3,v-=3}else{for(Q=T+7;v<Q;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}g>>>=T,v-=T,P=0,w=11+(g&127),g>>>=7,v-=7}if(a.have+w>a.nlen+a.ndist){r.msg="invalid bit length repeat",a.mode=za;break}for(;w--;)a.lens[a.have++]=P}}if(a.mode===za)break;if(a.lens[256]===0){r.msg="invalid code -- missing end-of-block",a.mode=za;break}if(a.lenbits=9,L={bits:a.lenbits},z=Zp(P9,a.lens,0,a.nlen,a.lencode,0,a.work,L),a.lenbits=L.bits,z){r.msg="invalid literal/lengths set",a.mode=za;break}if(a.distbits=6,a.distcode=a.distdyn,L={bits:a.distbits},z=Zp(F9,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,L),a.distbits=L.bits,z){r.msg="invalid distances set",a.mode=za;break}if(a.mode=Jv,i===Kv)break e;case Jv:a.mode=Zv;case Zv:if(f>=6&&m>=258){r.next_out=d,r.avail_out=m,r.next_in=c,r.avail_in=f,a.hold=g,a.bits=v,$O(r,A),d=r.next_out,l=r.output,m=r.avail_out,c=r.next_in,s=r.input,f=r.avail_in,g=a.hold,v=a.bits,a.mode===bc&&(a.back=-1);break}for(a.back=0;I=a.lencode[g&(1<<a.lenbits)-1],T=I>>>24,N=I>>>16&255,j=I&65535,!(T<=v);){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(N&&(N&240)===0){for(B=T,U=N,F=j;I=a.lencode[F+((g&(1<<B+U)-1)>>B)],T=I>>>24,N=I>>>16&255,j=I&65535,!(B+T<=v);){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}g>>>=B,v-=B,a.back+=B}if(g>>>=T,v-=T,a.back+=T,a.length=j,N===0){a.mode=W6;break}if(N&32){a.back=-1,a.mode=bc;break}if(N&64){r.msg="invalid literal/length code",a.mode=za;break}a.extra=N&15,a.mode=V6;case V6:if(a.extra){for(Q=a.extra;v<Q;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}a.length+=g&(1<<a.extra)-1,g>>>=a.extra,v-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=Y6;case Y6:for(;I=a.distcode[g&(1<<a.distbits)-1],T=I>>>24,N=I>>>16&255,j=I&65535,!(T<=v);){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if((N&240)===0){for(B=T,U=N,F=j;I=a.distcode[F+((g&(1<<B+U)-1)>>B)],T=I>>>24,N=I>>>16&255,j=I&65535,!(B+T<=v);){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}g>>>=B,v-=B,a.back+=B}if(g>>>=T,v-=T,a.back+=T,N&64){r.msg="invalid distance code",a.mode=za;break}a.offset=j,a.extra=N&15,a.mode=Q6;case Q6:if(a.extra){for(Q=a.extra;v<Q;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}a.offset+=g&(1<<a.extra)-1,g>>>=a.extra,v-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){r.msg="invalid distance too far back",a.mode=za;break}a.mode=$6;case $6:if(m===0)break e;if(w=A-m,a.offset>w){if(w=a.offset-w,w>a.whave&&a.sane){r.msg="invalid distance too far back",a.mode=za;break}w>a.wnext?(w-=a.wnext,k=a.wsize-w):k=a.wnext-w,w>a.length&&(w=a.length),E=a.window}else E=l,k=d-a.offset,w=a.length;w>m&&(w=m),m-=w,a.length-=w;do l[d++]=E[k++];while(--w);a.length===0&&(a.mode=Zv);break;case W6:if(m===0)break e;l[d++]=a.length,m--,a.mode=Zv;break;case Qb:if(a.wrap){for(;v<32;){if(f===0)break e;f--,g|=s[c++]<<v,v+=8}if(A-=m,r.total_out+=A,a.total+=A,a.wrap&4&&A&&(r.adler=a.check=a.flags?io(a.check,l,A,d-A):xm(a.check,l,A,d-A)),A=m,a.wrap&4&&(a.flags?g:J6(g))!==a.check){r.msg="incorrect data check",a.mode=za;break}g=0,v=0}a.mode=X6;case X6:if(a.wrap&&a.flags){for(;v<32;){if(f===0)break e;f--,g+=s[c++]<<v,v+=8}if(a.wrap&4&&g!==(a.total&4294967295)){r.msg="incorrect length check",a.mode=za;break}g=0,v=0}a.mode=K6;case K6:z=nD;break e;case za:z=U9;break e;case z9:return L9;case H9:default:return d1}return r.next_out=d,r.avail_out=m,r.next_in=c,r.avail_in=f,a.hold=g,a.bits=v,(a.wsize||A!==r.avail_out&&a.mode<za&&(a.mode<Qb||i!==N6))&&Q9(r,r.output,r.next_out,A-r.avail_out),y-=r.avail_in,A-=r.avail_out,r.total_in+=y,r.total_out+=A,a.total+=A,a.wrap&4&&A&&(r.adler=a.check=a.flags?io(a.check,l,A,r.next_out-A):xm(a.check,l,A,r.next_out-A)),r.data_type=a.bits+(a.last?64:0)+(a.mode===bc?128:0)+(a.mode===Jv||a.mode===Yb?256:0),(y===0&&A===0||i===N6)&&z===tf&&(z=rD),z},hD=r=>{if(lf(r))return d1;let i=r.state;return i.window&&(i.window=null),r.state=null,tf},pD=(r,i)=>{if(lf(r))return d1;const a=r.state;return(a.wrap&2)===0?d1:(a.head=i,i.done=!1,tf)},mD=(r,i)=>{const a=i.length;let s,l,c;return lf(r)||(s=r.state,s.wrap!==0&&s.mode!==V3)?d1:s.mode===V3&&(l=1,l=xm(l,i,a,0),l!==s.check)?U9:(c=Q9(r,i,a,a),c?(s.mode=z9,L9):(s.havedict=1,tf))};var gD=G9,vD=V9,xD=q9,bD=dD,yD=Y9,wD=fD,AD=hD,SD=pD,kD=mD,CD="pako inflate (from Nodeca project)",Cc={inflateReset:gD,inflateReset2:vD,inflateResetKeep:xD,inflateInit:bD,inflateInit2:yD,inflate:wD,inflateEnd:AD,inflateGetHeader:SD,inflateSetDictionary:kD,inflateInfo:CD};function ED(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var _D=ED;const $9=Object.prototype.toString,{Z_NO_FLUSH:ID,Z_FINISH:ND,Z_OK:wm,Z_STREAM_END:Xb,Z_NEED_DICT:Kb,Z_STREAM_ERROR:TD,Z_DATA_ERROR:e8,Z_MEM_ERROR:MD}=_x;function Rx(r){this.options=Nx.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(r&&r.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j9,this.strm.avail_out=0;let a=Cc.inflateInit2(this.strm,i.windowBits);if(a!==wm)throw new Error(Zu[a]);if(this.header=new _D,Cc.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=ym.string2buf(i.dictionary):$9.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(a=Cc.inflateSetDictionary(this.strm,i.dictionary),a!==wm)))throw new Error(Zu[a])}Rx.prototype.push=function(r,i){const a=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let c,d,f;if(this.ended)return!1;for(i===~~i?d=i:d=i===!0?ND:ID,$9.call(r)==="[object ArrayBuffer]"?a.input=new Uint8Array(r):a.input=r,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),c=Cc.inflate(a,d),c===Kb&&l&&(c=Cc.inflateSetDictionary(a,l),c===wm?c=Cc.inflate(a,d):c===e8&&(c=Kb));a.avail_in>0&&c===Xb&&a.state.wrap>0&&r[a.next_in]!==0;)Cc.inflateReset(a),c=Cc.inflate(a,d);switch(c){case TD:case e8:case Kb:case MD:return this.onEnd(c),this.ended=!0,!1}if(f=a.avail_out,a.next_out&&(a.avail_out===0||c===Xb))if(this.options.to==="string"){let m=ym.utf8border(a.output,a.next_out),g=a.next_out-m,v=ym.buf2string(a.output,m);a.next_out=g,a.avail_out=s-g,g&&a.output.set(a.output.subarray(m,m+g),0),this.onData(v)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(c===wm&&f===0)){if(c===Xb)return c=Cc.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Rx.prototype.onData=function(r){this.chunks.push(r)};Rx.prototype.onEnd=function(r){r===wm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Nx.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function RD(r,i){const a=new Rx(i);if(a.push(r),a.err)throw a.msg||Zu[a.err];return a.result}function OD(r,i){return i=i||{},i.raw=!0,RD(r,i)}var DD=OD,jD={inflateRaw:DD};const{deflateRaw:BD}=YO,{inflateRaw:PD}=jD;var FD=BD,UD=PD;const LD=ya("ErrorHandler");function o1(r,i){LD.warn(`[${r}]`,i instanceof Error?i.message:i)}function zD(r){let i="";for(let a=0;a<r.length;a++)i+=String.fromCharCode(r[a]);return btoa(i)}function HD(r){const i=atob(r),a=new Uint8Array(i.length);for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return a}function Mu(r){try{const i=FD(new TextEncoder().encode(r)),a="!"+zD(i),s=btoa(encodeURIComponent(r));return a.length<s.length?a:s}catch(i){return o1("textCodec.compress",i),btoa(encodeURIComponent(r))}}function Y3(r){if(r.startsWith("!"))try{const i=UD(HD(r.substring(1)));return new TextDecoder().decode(i)}catch(i){o1("textCodec.inflate",i)}try{return decodeURIComponent(atob(r))}catch(i){o1("textCodec.decompressLegacy",i);try{return atob(r)}catch(a){return o1("textCodec.atob",a),decodeURIComponent(r)}}}function t8(r){const i=[];for(let a=0;a<32;a++)r>>a&1&&i.push(a);return i}const O1=[{key:"hr",label:"Heart Rate",shortLabel:"HR",unit:"bpm",placeholder:"60-100"},{key:"rr",label:"Respirations",shortLabel:"RR",unit:"/min",placeholder:"12-20"},{key:"bpSys",label:"BP (Systolic)",shortLabel:"BPs",unit:"mmHg",placeholder:"120"},{key:"bpDia",label:"BP (Diastolic)",shortLabel:"BPd",unit:"mmHg",placeholder:"80"},{key:"temp",label:"Temperature",shortLabel:"Temp",unit:"F",placeholder:"98.6"},{key:"ht",label:"Height",shortLabel:"Ht",unit:"in",placeholder:"68"},{key:"wt",label:"Weight",shortLabel:"Wt",unit:"lbs",placeholder:"170"}];function W9(r){return r==="B-1"}const qD={A:{category:"A",label:"HEENT",items:[{key:"ears",label:"Ears",normalText:"TMs intact bilaterally, pearly gray. Canals clear. No erythema or effusion.",abnormalOptions:[{key:"tmErythema",label:"TM erythema"},{key:"tmBulging",label:"TM bulging"},{key:"tmPerforation",label:"TM perforation"},{key:"canalEdema",label:"Canal edema"},{key:"cerumenImpaction",label:"Cerumen impaction"},{key:"effusion",label:"Effusion"}]},{key:"nose",label:"Nose",normalText:"Nares patent bilaterally. Septum midline. Mucosa pink and moist. No discharge.",abnormalOptions:[{key:"septalDeviation",label:"Septal deviation"},{key:"mucosalErythema",label:"Mucosal erythema"},{key:"purulentDischarge",label:"Purulent discharge"},{key:"epistaxis",label:"Epistaxis"},{key:"turbinateHypertrophy",label:"Turbinate hypertrophy"}]},{key:"throat",label:"Throat",normalText:"Pharynx non-erythematous. Tonsils non-enlarged. Uvula midline.",abnormalOptions:[{key:"pharyngealErythema",label:"Pharyngeal erythema"},{key:"tonsillarHypertrophy",label:"Tonsillar hypertrophy"},{key:"exudate",label:"Exudate"},{key:"uvularDeviation",label:"Uvular deviation"},{key:"peritonsillarSwelling",label:"Peritonsillar swelling"}]},{key:"oralCavity",label:"Oral Cavity",normalText:"Oral mucosa pink and moist. Dentition intact. No lesions.",abnormalOptions:[{key:"oralLesion",label:"Oral lesion/ulcer"},{key:"poorDentition",label:"Poor dentition"},{key:"gingivalErythema",label:"Gingival erythema"},{key:"thrush",label:"Thrush"},{key:"dryMucous",label:"Dry mucous membranes"}]},{key:"neck",label:"Neck",normalText:"Neck supple. Trachea midline. No lymphadenopathy. Thyroid non-enlarged.",abnormalOptions:[{key:"lymphadenopathy",label:"Lymphadenopathy"},{key:"limitedROM",label:"Limited ROM"},{key:"thyromegaly",label:"Thyromegaly"},{key:"meningismus",label:"Meningismus"},{key:"jvd",label:"JVD"},{key:"trachealDeviation",label:"Tracheal deviation"}]},{key:"cv",label:"CV",normalText:"RRR. No murmurs, gallops, or rubs. Peripheral pulses 2+ bilaterally.",abnormalOptions:[{key:"murmur",label:"Murmur"},{key:"gallop",label:"Gallop (S3/S4)"},{key:"irregularRhythm",label:"Irregular rhythm"},{key:"tachycardia",label:"Tachycardia"},{key:"bradycardia",label:"Bradycardia"},{key:"diminishedPulses",label:"Diminished pulses"}]},{key:"pulm",label:"PULM",normalText:"Clear to auscultation bilaterally. No wheezes, rales, or rhonchi. Unlabored respirations.",abnormalOptions:[{key:"wheezing",label:"Wheezing"},{key:"ralesCrackles",label:"Rales/crackles"},{key:"rhonchi",label:"Rhonchi"},{key:"diminishedBS",label:"Diminished breath sounds"},{key:"stridor",label:"Stridor"},{key:"tachypnea",label:"Tachypnea"}]}]},B:{category:"B",label:"Musculoskeletal",items:[{key:"inspection",label:"Inspection",normalText:"No swelling, erythema, ecchymosis, or deformity.",abnormalOptions:[{key:"swelling",label:"Swelling"},{key:"erythema",label:"Erythema"},{key:"ecchymosis",label:"Ecchymosis"},{key:"deformity",label:"Deformity"},{key:"atrophy",label:"Atrophy"},{key:"asymmetry",label:"Asymmetry"}]},{key:"palpation",label:"Palpation",normalText:"Non-tender. No crepitus or masses.",abnormalOptions:[{key:"pointTenderness",label:"Point tenderness"},{key:"crepitus",label:"Crepitus"},{key:"massSwelling",label:"Mass/swelling"},{key:"warmth",label:"Warmth"},{key:"muscleSpasm",label:"Muscle spasm"}]},{key:"rom",label:"Range of Motion",normalText:"Full active and passive ROM without pain.",abnormalOptions:[{key:"decreasedActive",label:"Decreased active ROM"},{key:"decreasedPassive",label:"Decreased passive ROM"},{key:"painWithROM",label:"Pain with ROM"},{key:"mechanicalBlock",label:"Mechanical block"}]},{key:"strength",label:"Strength",normalText:"5/5 strength. No weakness.",abnormalOptions:[{key:"decreasedStrength",label:"Decreased strength"},{key:"giveWay",label:"Give-way weakness"},{key:"painLimited",label:"Pain-limited"},{key:"gripWeakness",label:"Grip weakness"}]},{key:"specialTests",label:"Special Tests",normalText:"No positive provocative tests.",abnormalOptions:[{key:"positiveSpecial",label:"Positive special test (specify)"},{key:"instability",label:"Instability"},{key:"laxity",label:"Laxity"}]}]},C:{category:"C",label:"Gastrointestinal",items:[{key:"inspection",label:"Inspection",normalText:"Abdomen flat, no distension. No visible masses, scars, or hernias.",abnormalOptions:[{key:"distension",label:"Distension"},{key:"visibleMass",label:"Visible mass"},{key:"surgicalScars",label:"Surgical scars"},{key:"hernia",label:"Hernia"},{key:"ecchymosis",label:"Ecchymosis"}]},{key:"auscultation",label:"Auscultation",normalText:"Bowel sounds present in all four quadrants. No bruits.",abnormalOptions:[{key:"hyperactiveBS",label:"Hyperactive BS"},{key:"hypoactiveBS",label:"Hypoactive BS"},{key:"absentBS",label:"Absent BS"},{key:"bruit",label:"Bruit"}]},{key:"palpation",label:"Palpation",normalText:"Soft, non-tender. No masses, guarding, or organomegaly.",abnormalOptions:[{key:"tenderness",label:"Tenderness (specify quadrant)"},{key:"guarding",label:"Guarding"},{key:"rebound",label:"Rebound"},{key:"mass",label:"Mass"},{key:"hepatomegaly",label:"Hepatomegaly"},{key:"splenomegaly",label:"Splenomegaly"},{key:"rigidity",label:"Rigidity"}]},{key:"percussion",label:"Percussion",normalText:"Tympanic throughout. No CVA tenderness.",abnormalOptions:[{key:"dullness",label:"Dullness"},{key:"shiftingDullness",label:"Shifting dullness"},{key:"cvaTenderness",label:"CVA tenderness"},{key:"tympanyOverMass",label:"Tympany over mass"}]},{key:"rectal",label:"Rectal",normalText:"Deferred  not indicated.",abnormalOptions:[{key:"hemorrhoids",label:"Hemorrhoids"},{key:"fissure",label:"Fissure"},{key:"mass",label:"Mass"},{key:"occultBlood",label:"Occult blood positive"},{key:"tenderness",label:"Tenderness"},{key:"rectalTone",label:"Rectal tone abnormal"}]}]},D:{category:"D",label:"Cardiorespiratory",items:[{key:"heartSounds",label:"Heart Sounds",normalText:"RRR. S1/S2 normal. No murmurs, gallops, or rubs.",abnormalOptions:[{key:"murmur",label:"Murmur (specify)"},{key:"gallop",label:"Gallop (S3/S4)"},{key:"rub",label:"Rub"},{key:"irregularRhythm",label:"Irregular rhythm"},{key:"tachycardia",label:"Tachycardia"},{key:"bradycardia",label:"Bradycardia"}]},{key:"lungSounds",label:"Lung Sounds",normalText:"Clear to auscultation bilaterally. No wheezes, rales, or rhonchi.",abnormalOptions:[{key:"wheezing",label:"Wheezing"},{key:"ralesCrackles",label:"Rales/crackles"},{key:"rhonchi",label:"Rhonchi"},{key:"diminishedBS",label:"Diminished breath sounds"},{key:"stridor",label:"Stridor"},{key:"pleuralRub",label:"Pleural rub"}]},{key:"respEffort",label:"Respiratory Effort",normalText:"Unlabored. No accessory muscle use. Speaking full sentences.",abnormalOptions:[{key:"tachypnea",label:"Tachypnea"},{key:"accessoryMuscle",label:"Accessory muscle use"},{key:"tripoding",label:"Tripoding"},{key:"nasalFlaring",label:"Nasal flaring"},{key:"retractions",label:"Retractions"},{key:"speaksFragments",label:"Speaks in fragments"}]},{key:"chestWall",label:"Chest Wall",normalText:"Symmetric rise and fall. Non-tender. No crepitus.",abnormalOptions:[{key:"asymmetricExpansion",label:"Asymmetric expansion"},{key:"tenderness",label:"Tenderness"},{key:"crepitus",label:"Crepitus"},{key:"chestWallDeformity",label:"Chest wall deformity"},{key:"surgicalEmphysema",label:"Surgical emphysema"}]},{key:"peripheralPulses",label:"Peripheral Pulses",normalText:"Pulses 2+ and equal bilaterally. Capillary refill < 3 sec. No edema.",abnormalOptions:[{key:"diminishedPulses",label:"Diminished pulses"},{key:"absentPulses",label:"Absent pulses"},{key:"delayedCapRefill",label:"Delayed cap refill"},{key:"peripheralEdema",label:"Peripheral edema"},{key:"coolExtremities",label:"Cool extremities"},{key:"cyanosis",label:"Cyanosis"}]}]},E:{category:"E",label:"Genitourinary",items:[{key:"abdomen",label:"Abdomen",normalText:"Soft, non-tender. No suprapubic tenderness.",abnormalOptions:[{key:"suprapubicTenderness",label:"Suprapubic tenderness"},{key:"distension",label:"Distension"},{key:"mass",label:"Mass"},{key:"guarding",label:"Guarding"}]},{key:"cva",label:"Costovertebral Angle",normalText:"No CVA tenderness bilaterally.",abnormalOptions:[{key:"cvaTendernessL",label:"CVA tenderness (L)"},{key:"cvaTendernessR",label:"CVA tenderness (R)"},{key:"cvaTendernessBL",label:"CVA tenderness (BL)"}]},{key:"extGenitalia",label:"External Genitalia",normalText:"Normal appearance. No lesions, discharge, or swelling.",abnormalOptions:[{key:"lesionUlcer",label:"Lesion/ulcer"},{key:"discharge",label:"Discharge"},{key:"swelling",label:"Swelling"},{key:"erythema",label:"Erythema"},{key:"hernia",label:"Hernia"}]},{key:"inguinal",label:"Inguinal Region",normalText:"No inguinal lymphadenopathy or hernia.",abnormalOptions:[{key:"lymphadenopathy",label:"Lymphadenopathy"},{key:"inguinalHernia",label:"Inguinal hernia"},{key:"tenderness",label:"Tenderness"}]}]},F:{category:"F",label:"Neuropsychiatric",items:[{key:"mentalStatus",label:"Mental Status",normalText:"Alert and oriented x4. Mood and affect appropriate. Judgment and insight intact.",abnormalOptions:[{key:"disoriented",label:"Disoriented (specify)"},{key:"flatAffect",label:"Flat affect"},{key:"labileAffect",label:"Labile affect"},{key:"depressedMood",label:"Depressed mood"},{key:"anxious",label:"Anxious"},{key:"poorInsight",label:"Poor insight"},{key:"poorJudgment",label:"Poor judgment"},{key:"siHi",label:"SI/HI (specify)"}]},{key:"cranialNerves",label:"Cranial Nerves",normalText:"CN II-XII grossly intact.",abnormalOptions:[{key:"cnDeficit",label:"CN deficit (specify)"},{key:"facialAsymmetry",label:"Facial asymmetry"},{key:"visualFieldDeficit",label:"Visual field deficit"},{key:"hearingDeficit",label:"Hearing deficit"},{key:"tongueDeviation",label:"Tongue deviation"}]},{key:"motor",label:"Motor",normalText:"5/5 strength in all extremities. Normal tone and bulk.",abnormalOptions:[{key:"focalWeakness",label:"Focal weakness (specify)"},{key:"increasedTone",label:"Increased tone"},{key:"decreasedTone",label:"Decreased tone"},{key:"atrophy",label:"Atrophy"},{key:"fasciculations",label:"Fasciculations"},{key:"tremor",label:"Tremor"}]},{key:"sensory",label:"Sensory",normalText:"Intact to light touch in all dermatomes.",abnormalOptions:[{key:"decreasedSensation",label:"Decreased sensation (specify)"},{key:"numbness",label:"Numbness"},{key:"paresthesias",label:"Paresthesias"},{key:"dermatomalLoss",label:"Dermatomal loss"}]},{key:"reflexes",label:"Reflexes",normalText:"2+ and symmetric throughout. Babinski downgoing bilaterally.",abnormalOptions:[{key:"hyperreflexia",label:"Hyperreflexia"},{key:"hyporeflexia",label:"Hyporeflexia"},{key:"areflexia",label:"Areflexia"},{key:"asymmetricReflexes",label:"Asymmetric reflexes"},{key:"babinskiUpgoing",label:"Babinski upgoing"},{key:"clonus",label:"Clonus"}]},{key:"coordination",label:"Coordination",normalText:"Finger-to-nose intact. Gait steady. Romberg negative.",abnormalOptions:[{key:"dysmetria",label:"Dysmetria"},{key:"intentionTremor",label:"Intention tremor"},{key:"ataxicGait",label:"Ataxic gait"},{key:"rombergPositive",label:"Romberg positive"},{key:"dysdiadochokinesia",label:"Dysdiadochokinesia"},{key:"unsteadyGait",label:"Unsteady gait"}]}]},G:{category:"G",label:"Constitutional",items:[{key:"generalAppearance",label:"General Appearance",normalText:"Alert, oriented, no acute distress. Well-developed, well-nourished.",abnormalOptions:[{key:"appearsIll",label:"Appears ill"},{key:"acuteDistress",label:"Acute distress"},{key:"diaphoretic",label:"Diaphoretic"},{key:"pallor",label:"Pallor"},{key:"cachexia",label:"Cachexia"},{key:"lethargic",label:"Lethargic"},{key:"alteredMentalStatus",label:"Altered mental status"}]},{key:"skinColorTemp",label:"Skin Color/Temperature",normalText:"Warm, dry, appropriate color. No cyanosis or pallor.",abnormalOptions:[{key:"diaphoretic",label:"Diaphoretic"},{key:"coolClammy",label:"Cool/clammy"},{key:"flushed",label:"Flushed"},{key:"cyanosis",label:"Cyanosis"},{key:"pallor",label:"Pallor"},{key:"jaundice",label:"Jaundice"},{key:"mottled",label:"Mottled"}]}]},H:{category:"H",label:"Eye",items:[{key:"visualAcuity",label:"Visual Acuity",normalText:"Visual acuity intact bilaterally.",abnormalOptions:[{key:"decreasedAcuityL",label:"Decreased acuity (L)"},{key:"decreasedAcuityR",label:"Decreased acuity (R)"},{key:"decreasedAcuityBL",label:"Decreased acuity (BL)"},{key:"unableToAssess",label:"Unable to assess"}]},{key:"pupils",label:"Pupils",normalText:"PERRLA. No afferent pupillary defect.",abnormalOptions:[{key:"anisocoria",label:"Anisocoria"},{key:"fixedPupil",label:"Fixed pupil"},{key:"dilatedPupil",label:"Dilated pupil"},{key:"constrictedPupil",label:"Constricted pupil"},{key:"apdPresent",label:"APD present"}]},{key:"eom",label:"Extraocular Movements",normalText:"EOMI. No nystagmus or diplopia.",abnormalOptions:[{key:"restrictedEOM",label:"Restricted EOM (specify)"},{key:"nystagmus",label:"Nystagmus"},{key:"diplopia",label:"Diplopia"},{key:"strabismus",label:"Strabismus"}]},{key:"conjunctivaSclera",label:"Conjunctiva/Sclera",normalText:"Conjunctivae clear. Sclerae white. No injection or discharge.",abnormalOptions:[{key:"conjunctivalInjection",label:"Conjunctival injection"},{key:"subconjunctivalHemorrhage",label:"Subconjunctival hemorrhage"},{key:"discharge",label:"Discharge"},{key:"chemosis",label:"Chemosis"},{key:"icterus",label:"Icterus"},{key:"pterygium",label:"Pterygium"}]},{key:"fundoscopy",label:"Fundoscopy",normalText:"Discs sharp. No hemorrhages or exudates.",abnormalOptions:[{key:"discEdema",label:"Disc edema"},{key:"hemorrhage",label:"Hemorrhage"},{key:"exudate",label:"Exudate"},{key:"avNicking",label:"AV nicking"},{key:"unableToVisualize",label:"Unable to visualize"}]},{key:"eyelids",label:"Eyelids",normalText:"Lids normal. No edema, ptosis, or lesion.",abnormalOptions:[{key:"lidEdema",label:"Lid edema"},{key:"ptosis",label:"Ptosis"},{key:"chalazion",label:"Chalazion"},{key:"hordeolum",label:"Hordeolum"},{key:"laceration",label:"Laceration"},{key:"entropion",label:"Entropion"},{key:"ectropion",label:"Ectropion"}]}]},I:{category:"I",label:"Gynecological",items:[{key:"breast",label:"Breast",normalText:"Symmetric. No masses, tenderness, or discharge. No axillary lymphadenopathy.",abnormalOptions:[{key:"mass",label:"Mass"},{key:"tenderness",label:"Tenderness"},{key:"discharge",label:"Discharge"},{key:"skinChanges",label:"Skin changes"},{key:"axillaryLAD",label:"Axillary lymphadenopathy"}]},{key:"extGenitalia",label:"External Genitalia",normalText:"Normal appearance. No lesions, erythema, or discharge.",abnormalOptions:[{key:"lesionUlcer",label:"Lesion/ulcer"},{key:"erythema",label:"Erythema"},{key:"edema",label:"Edema"},{key:"discharge",label:"Discharge"},{key:"mass",label:"Mass"}]},{key:"vaginalCervical",label:"Vaginal/Cervical",normalText:"Cervix appears normal. No cervical motion tenderness. No abnormal discharge.",abnormalOptions:[{key:"cervicalMotionTenderness",label:"Cervical motion tenderness"},{key:"abnormalDischarge",label:"Abnormal discharge"},{key:"cervicalLesion",label:"Cervical lesion"},{key:"friableCervix",label:"Friable cervix"},{key:"bleeding",label:"Bleeding"}]},{key:"uterusAdnexa",label:"Uterus/Adnexa",normalText:"Non-tender. Normal size. No adnexal masses.",abnormalOptions:[{key:"uterineTenderness",label:"Uterine tenderness"},{key:"enlargedUterus",label:"Enlarged uterus"},{key:"adnexalMass",label:"Adnexal mass"},{key:"adnexalTenderness",label:"Adnexal tenderness"}]}]},J:{category:"J",label:"Dermatological",items:[{key:"locationDistribution",label:"Location/Distribution",normalText:"Localized. Well-demarcated.",abnormalOptions:[{key:"diffuse",label:"Diffuse/widespread"},{key:"bilateral",label:"Bilateral"},{key:"dermatomal",label:"Dermatomal"},{key:"sunExposed",label:"Sun-exposed areas"},{key:"intertriginous",label:"Intertriginous"}]},{key:"morphology",label:"Morphology",abnormalOptions:[{key:"macule",label:"Macule"},{key:"papule",label:"Papule"},{key:"vesicle",label:"Vesicle"},{key:"pustule",label:"Pustule"},{key:"plaque",label:"Plaque"},{key:"nodule",label:"Nodule"},{key:"wheal",label:"Wheal"},{key:"erosion",label:"Erosion"},{key:"ulcer",label:"Ulcer"},{key:"bulla",label:"Bulla"}]},{key:"color",label:"Color",abnormalOptions:[{key:"erythematous",label:"Erythematous"},{key:"hyperpigmented",label:"Hyperpigmented"},{key:"hypopigmented",label:"Hypopigmented"},{key:"violaceous",label:"Violaceous"},{key:"blanching",label:"Blanching"},{key:"nonBlanching",label:"Non-blanching"}]},{key:"sizeShape",label:"Size/Shape",abnormalOptions:[{key:"lessThan1cm",label:"< 1 cm"},{key:"oneToFiveCm",label:"1-5 cm"},{key:"greaterThan5cm",label:"> 5 cm"},{key:"roundOval",label:"Round/oval"},{key:"irregular",label:"Irregular"},{key:"linear",label:"Linear"},{key:"annular",label:"Annular"}]},{key:"textureSurface",label:"Texture/Surface",normalText:"Smooth surface. No scaling.",abnormalOptions:[{key:"scaling",label:"Scaling"},{key:"crusting",label:"Crusting"},{key:"weeping",label:"Weeping"},{key:"lichenified",label:"Lichenified"},{key:"verrucous",label:"Verrucous"},{key:"indurated",label:"Indurated"},{key:"fluctuant",label:"Fluctuant"}]}]},K:{category:"K",label:"Environmental",items:[{key:"skinAssessment",label:"Skin Assessment",normalText:"Skin intact. No frostbite, burns, or erythema.",abnormalOptions:[{key:"erythema",label:"Erythema"},{key:"blistering",label:"Blistering"},{key:"eschar",label:"Eschar"},{key:"frostnip",label:"Frostnip"},{key:"frostbite",label:"Frostbite (specify degree)"},{key:"burn",label:"Burn (specify degree)"},{key:"maceration",label:"Maceration"}]},{key:"circulation",label:"Circulation",normalText:"Pulses palpable. Capillary refill < 3 sec. No edema.",abnormalOptions:[{key:"diminishedPulses",label:"Diminished pulses"},{key:"delayedCapRefill",label:"Delayed cap refill"},{key:"edema",label:"Edema"},{key:"coolExtremities",label:"Cool extremities"},{key:"cyanosis",label:"Cyanosis"}]},{key:"sensation",label:"Sensation",normalText:"Intact to light touch. No numbness or tingling.",abnormalOptions:[{key:"decreasedSensation",label:"Decreased sensation"},{key:"numbness",label:"Numbness"},{key:"tingling",label:"Tingling"},{key:"hyperesthesia",label:"Hyperesthesia"}]},{key:"temperature",label:"Temperature",normalText:"Afebrile. Skin warm to touch.",abnormalOptions:[{key:"hypothermic",label:"Hypothermic"},{key:"hyperthermic",label:"Hyperthermic"},{key:"coolSkin",label:"Cool skin"},{key:"hotFlushed",label:"Hot/flushed skin"}]},{key:"mentalStatus",label:"Mental Status",normalText:"Alert and oriented x4. GCS 15.",abnormalOptions:[{key:"confused",label:"Confused"},{key:"lethargic",label:"Lethargic"},{key:"combative",label:"Combative"},{key:"gcsLow",label:"GCS < 15 (specify)"},{key:"alteredMentalStatus",label:"Altered mental status"}]}]},L:{category:"L",label:"Miscellaneous",items:[{key:"generalAppearance",label:"General Appearance",normalText:"Alert, oriented, no acute distress.",abnormalOptions:[{key:"appearsIll",label:"Appears ill"},{key:"acuteDistress",label:"Acute distress"},{key:"lethargic",label:"Lethargic"},{key:"diaphoretic",label:"Diaphoretic"}]},{key:"oralDental",label:"Oral/Dental",normalText:"Oral mucosa intact. Dentition in fair condition.",abnormalOptions:[{key:"dentalCaries",label:"Dental caries"},{key:"abscess",label:"Abscess"},{key:"oralLesion",label:"Oral lesion"},{key:"gingivalBleeding",label:"Gingival bleeding"},{key:"looseTooth",label:"Loose/fractured tooth"},{key:"trismus",label:"Trismus"}]},{key:"lymphNodes",label:"Lymph Nodes",normalText:"No cervical, axillary, or inguinal lymphadenopathy.",abnormalOptions:[{key:"cervicalLAD",label:"Cervical LAD"},{key:"axillaryLAD",label:"Axillary LAD"},{key:"inguinalLAD",label:"Inguinal LAD"},{key:"generalizedLAD",label:"Generalized LAD"},{key:"tenderLAD",label:"Tender LAD"},{key:"mattedNodes",label:"Matted nodes"}]}]},M:{category:"M",label:"Misc Return",items:[{key:"generalAppearance",label:"General Appearance",normalText:"Alert, oriented, no acute distress.",abnormalOptions:[{key:"appearsIll",label:"Appears ill"},{key:"worsened",label:"Worsened from prior"},{key:"noChange",label:"No change from prior"}]},{key:"relevantSystem",label:"Relevant System",normalText:"See system-specific findings above.",abnormalOptions:[{key:"worsened",label:"Worsened"},{key:"unchanged",label:"Unchanged"},{key:"partiallyImproved",label:"Partially improved"},{key:"newFinding",label:"New finding (specify)"}]},{key:"comparisonToPrevious",label:"Comparison to Previous",normalText:"Improved from prior visit.",abnormalOptions:[{key:"worsened",label:"Worsened"},{key:"unchanged",label:"Unchanged"},{key:"partiallyImproved",label:"Partially improved"},{key:"newComplaint",label:"New complaint"}]}]}},GD={generalAppearance:{key:"gf_appearance",label:"General Appearance",normalText:"Alert, oriented, no acute distress. Well-developed, well-nourished.",abnormalOptions:[{key:"ill",label:"Appears ill"},{key:"distress",label:"Acute distress"},{key:"diaphoretic",label:"Diaphoretic"},{key:"pallor",label:"Pallor"},{key:"lethargic",label:"Lethargic"}]},skin:{key:"gf_skin",label:"Skin",normalText:"Warm, dry, intact. No rashes, lesions, or petechiae.",abnormalOptions:[{key:"diaphoretic",label:"Diaphoretic"},{key:"rash",label:"Rash (specify)"},{key:"pallor",label:"Pallor"},{key:"cyanosis",label:"Cyanosis"},{key:"jaundice",label:"Jaundice"},{key:"coolClammy",label:"Cool/clammy"}]},neuroBaseline:{key:"gf_neuro",label:"Neuro",normalText:"Alert and oriented x4. GCS 15.",abnormalOptions:[{key:"disoriented",label:"Disoriented (specify)"},{key:"confused",label:"Confused"},{key:"lethargic",label:"Lethargic"},{key:"gcsLow",label:"GCS < 15 (specify)"},{key:"focalDeficit",label:"Focal deficit (specify)"}]},psychiatric:{key:"gf_psych",label:"Psych",normalText:"Appropriate mood and affect. No SI/HI.",abnormalOptions:[{key:"depressed",label:"Depressed mood"},{key:"anxious",label:"Anxious"},{key:"flatAffect",label:"Flat affect"},{key:"agitated",label:"Agitated"},{key:"siHi",label:"SI/HI (specify)"}]},cardiovascular:{key:"gf_cardio",label:"Cardiovascular",normalText:"RRR. No murmurs. Peripheral pulses 2+ bilaterally. No edema.",abnormalOptions:[{key:"irregular",label:"Irregular rhythm"},{key:"murmur",label:"Murmur"},{key:"tachycardia",label:"Tachycardia"},{key:"edema",label:"Peripheral edema"},{key:"diminishedPulses",label:"Diminished pulses"}]},respiratory:{key:"gf_resp",label:"Respiratory",normalText:"Unlabored. Lungs CTA bilaterally. No wheezes, rales, or rhonchi.",abnormalOptions:[{key:"tachypnea",label:"Tachypnea"},{key:"wheezing",label:"Wheezing"},{key:"rales",label:"Rales/crackles"},{key:"diminished",label:"Diminished breath sounds"},{key:"accessory",label:"Accessory muscle use"}]},lymphatic:{key:"gf_lymph",label:"Lymphatic",normalText:"No cervical, axillary, or inguinal lymphadenopathy.",abnormalOptions:[{key:"cervicalLAD",label:"Cervical LAD"},{key:"axillaryLAD",label:"Axillary LAD"},{key:"inguinalLAD",label:"Inguinal LAD"},{key:"tenderLAD",label:"Tender LAD"}]},abdominal:{key:"gf_abd",label:"Abdomen",normalText:"Soft, non-tender, non-distended. Bowel sounds present.",abnormalOptions:[{key:"tenderness",label:"Tenderness (specify)"},{key:"distension",label:"Distension"},{key:"guarding",label:"Guarding"},{key:"rebound",label:"Rebound"}]}},VD={A:["generalAppearance","skin","neuroBaseline","lymphatic"],B:["generalAppearance","skin","neuroBaseline"],C:["generalAppearance","skin","neuroBaseline","cardiovascular"],D:["generalAppearance","skin","neuroBaseline"],E:["generalAppearance","skin","neuroBaseline","abdominal"],F:["generalAppearance","skin","psychiatric"],G:["generalAppearance","skin","neuroBaseline","cardiovascular","respiratory"],H:["generalAppearance","neuroBaseline"],I:["generalAppearance","skin","neuroBaseline","abdominal"],J:["generalAppearance","neuroBaseline","lymphatic"],K:["generalAppearance","neuroBaseline","cardiovascular"],L:["generalAppearance","skin","neuroBaseline"],M:["generalAppearance","neuroBaseline"]};function YD(r){return(VD[r]||[]).map(a=>GD[a]).filter(Boolean)}const QD=[{key:"sw_gen",label:"GEN",normalText:"Alert, oriented, no acute distress. Well-developed, well-nourished.",abnormalOptions:[{key:"ill",label:"Appears ill"},{key:"distress",label:"Acute distress"},{key:"diaphoretic",label:"Diaphoretic"},{key:"pallor",label:"Pallor"},{key:"lethargic",label:"Lethargic"}]},{key:"sw_head",label:"HEAD",normalText:"Normocephalic, atraumatic.",abnormalOptions:[{key:"trauma",label:"Trauma/laceration"},{key:"tenderness",label:"Scalp tenderness"},{key:"deformity",label:"Deformity"},{key:"swelling",label:"Swelling"}]},{key:"sw_derm",label:"DERM",normalText:"Warm, dry, intact. No rashes, lesions, or petechiae.",abnormalOptions:[{key:"rash",label:"Rash (specify)"},{key:"lesion",label:"Lesion"},{key:"pallor",label:"Pallor"},{key:"cyanosis",label:"Cyanosis"},{key:"jaundice",label:"Jaundice"},{key:"diaphoretic",label:"Diaphoretic"}]},{key:"sw_neuro",label:"NEURO",normalText:"Alert and oriented x4. GCS 15. No focal deficits.",abnormalOptions:[{key:"disoriented",label:"Disoriented (specify)"},{key:"confused",label:"Confused"},{key:"lethargic",label:"Lethargic"},{key:"gcsLow",label:"GCS < 15 (specify)"},{key:"focalDeficit",label:"Focal deficit (specify)"}]},{key:"sw_psych",label:"PSYCH",normalText:"Appropriate mood and affect. No SI/HI.",abnormalOptions:[{key:"depressed",label:"Depressed mood"},{key:"anxious",label:"Anxious"},{key:"flatAffect",label:"Flat affect"},{key:"agitated",label:"Agitated"},{key:"siHi",label:"SI/HI (specify)"}]}],jd=2;function bw(r){return QD}const $D={"B-1":"Back","B-2":"Neck","B-3":"Shoulder","B-4":"Elbow","B-5":"Wrist","B-6":"Hand","B-7":"Hip","B-8":"Knee","B-9":"Ankle","B-10":"Foot","B-11":"Extremity"};function X9(r){const i=r.match(/^([A-M])-/);return i?i[1]:null}function K9(r){const i=$D[r];return i?{code:r,label:i}:null}function yw(r){return qD[r]}const Md=0,Up=1,Lp=2;function e3(r,i){if(!r||r==="(no details)"||!i?.length)return{chipBitmask:0,freeText:r==="(no details)"?"":r};const a=r.split(";").map(c=>c.trim()).filter(Boolean);let s=0;const l=[];for(const c of a){const d=i.findIndex(f=>f.label===c);d>=0?s|=1<<d:l.push(c)}return{chipBitmask:s,freeText:l.join("; ")}}function WD(r,i,a){const s=[];if(a)for(let l=0;l<a.length;l++)r>>l&1&&s.push(a[l].label);return i&&s.push(i),s.join("; ")||"(no details)"}function J9(r,i){const a=r.split("~");if(a.length<5)return null;const s=a[0].split(","),l=s[0],c=s[1]||"R",d=s.slice(2),f=yw(l),m=i.includes("-")?i:i.replace(/([A-M])(\d+)/,"$1-$2"),g=l==="B"?K9(m):null,v={};O1.forEach((E,I)=>{v[E.key]=d[I]||""});const y=parseInt(a[1]||"0",36),A=parseInt(a[2]||"0",36),w={};if(a[3])for(const E of a[3].split(",").filter(Boolean)){const I=E.split("."),T=I[0],N=parseInt(I[1]||"0",36);let j="";I.length>2&&(j=Y3(I.slice(2).join("."))),w[T]={chipBitmask:N,freeText:j}}let k="";return a[4]&&(k=Y3(a[4])),{categoryLetter:l,laterality:c,vitals:v,gsBits:y,isBits:A,abnMap:w,additional:k,categoryDef:f,bodyPart:g}}function Gh(r,i){return r>>i*2&3}function t4(r,i){for(let a=0;a<i;a++)if(Gh(r,a)!==Md)return!0;return!1}function Z9(r){if(!O1.some(s=>r[s.key]?.trim()))return[];const a=["Vital Signs:"];for(const s of O1){if(s.key==="bpSys"){const c=r.bpSys?.trim(),d=r.bpDia?.trim();(c||d)&&a.push(`  BP: ${c||"--"}/${d||"--"} mmHg`);continue}if(s.key==="bpDia")continue;const l=r[s.key]?.trim();l&&a.push(`  ${s.shortLabel}: ${l} ${s.unit}`)}return a}function em(r,i,a,s,l,c,d=!0){const f=r.toUpperCase();if(a===Up)return!d&&i?`${f}: ${i}`:i?`${f}: Normal - ${i}`:`${f}: Normal`;if(a===Lp){const m=l[s],g=WD(m?.chipBitmask||0,m?.freeText||"",c);return d?`${f}: Abnormal - ${g}`:`${f}: ${g}`}return null}function XD(r,i){const a=i.includes("-")?i:i.replace(/([A-M])(\d+)/,"$1-$2"),s=X9(a);if(!s)return Mu(r);const l=yw(s),c=bw(),d={},f=new Array(c.length).fill(Md),m=[],g=new Array(l.items.length).fill(Md),v=[];let y="R",A="";const w=r.split(`
`);let k=!1,E=!1,I=!1;for(const F of w){const P=F.trim();if(!P)continue;if(P.startsWith("Additional Findings:")){E=!0,k=!1,A=P.replace("Additional Findings:","").trim();continue}if(E){A+=`
`+P;continue}if(P==="Vital Signs:"||P==="Vital Signs"){k=!0;continue}if(k){const L=P.match(/^BP:\s*(.+?)\/(.+?)\s*mmHg/);if(L){L[1].trim()!=="--"&&(d.bpSys=L[1].trim()),L[2].trim()!=="--"&&(d.bpDia=L[2].trim());continue}const Q=P.match(/^(\w+):\s*(.+)/);if(Q){const q=O1.find(ee=>ee.shortLabel===Q[1]);if(q){let ee=Q[2].trim();ee.endsWith(q.unit)&&(ee=ee.slice(0,-q.unit.length).trim()),d[q.key]=ee;continue}}if(P)k=!1;else continue}if(P==="General:"||P.startsWith(`${l.label}:`))continue;if(P.startsWith("MSK")){const L=P.match(/\((Left|Right|Bilateral)\)/i);L&&(y=L[1][0].toUpperCase());continue}const z=P.toUpperCase();let V=!1;for(let L=0;L<c.length;L++){const Q=c[L];if(z.startsWith(`${Q.label.toUpperCase()}:`)){const q=P.slice(Q.label.length+1).trim();if(q.startsWith("Normal"))f[L]=Up;else if(q.startsWith("Abnormal")){f[L]=Lp;const ee=q.replace(/^Abnormal\s*-?\s*/,"").trim(),{chipBitmask:X,freeText:ae}=e3(ee,Q.abnormalOptions);m.push({idx:L,chipBitmask:X,freeText:ae})}else if(Q.normalText&&q===Q.normalText)f[L]=Up;else if(q){f[L]=Lp;const{chipBitmask:ee,freeText:X}=e3(q,Q.abnormalOptions);m.push({idx:L,chipBitmask:ee,freeText:X})}V=!0;break}}if(!V){for(let L=0;L<l.items.length;L++){const Q=l.items[L];if(z.startsWith(`${Q.label.toUpperCase()}:`)){const q=P.slice(Q.label.length+1).trim();if(q.startsWith("Normal"))g[L]=Up;else if(q.startsWith("Abnormal")){g[L]=Lp;const ee=q.replace(/^Abnormal\s*-?\s*/,"").trim(),{chipBitmask:X,freeText:ae}=e3(ee,Q.abnormalOptions);v.push({idx:L,chipBitmask:X,freeText:ae})}else if(Q.normalText&&q===Q.normalText)g[L]=Up;else if(q){g[L]=Lp;const{chipBitmask:ee,freeText:X}=e3(q,Q.abnormalOptions);v.push({idx:L,chipBitmask:ee,freeText:X})}V=!0;break}}V||(I=!0)}}if(I)return Mu(r);const T=O1.map(F=>d[F.key]||"").join(",");let N=0;for(let F=0;F<f.length;F++)N|=f[F]<<F*2;let j=0;for(let F=0;F<g.length;F++)j|=g[F]<<F*2;const B=[];for(const F of m){let P=`g${F.idx}.${F.chipBitmask.toString(36)}`;F.freeText&&(P+=`.${Mu(F.freeText)}`),B.push(P)}for(const F of v){let P=`i${F.idx}.${F.chipBitmask.toString(36)}`;F.freeText&&(P+=`.${Mu(F.freeText)}`),B.push(P)}const U=A.trim()?Mu(A.trim()):"";return`3:${s},${y},${T}~${N.toString(36)}~${j.toString(36)}~${B.join(",")}~${U}`}function KD(r,i){const a=J9(r,i);if(!a)return"";const{categoryLetter:s,laterality:l,vitals:c,gsBits:d,isBits:f,abnMap:m,additional:g,categoryDef:v,bodyPart:y}=a,A=YD(s),w=Z9(c);if(t4(d,A.length)){w.length>0&&w.push(""),w.push("General:");for(let k=0;k<A.length;k++){const E=Gh(d,k);if(E===Md)continue;const I=A[k],T=em(I.label,I.normalText,E,`g${k}`,m,I.abnormalOptions);T&&w.push(T)}}if(t4(f,v.items.length)){if(w.length>0&&w.push(""),v.category==="B"&&y){const k=l==="B"?"Bilateral":l==="L"?"Left":"Right";w.push(`MSK - ${y.label} (${k})`)}for(let k=0;k<v.items.length;k++){const E=Gh(f,k);if(E===Md)continue;const I=v.items[k],T=em(I.label,I.normalText||"",E,`i${k}`,m,I.abnormalOptions);T&&w.push(T)}}return g.trim()&&(w.length>0&&w.push(""),w.push(`Additional Findings: ${g.trim()}`)),w.join(`
`)}function JD(r,i){const a=J9(r,i);if(!a)return"";const{categoryLetter:s,laterality:l,vitals:c,gsBits:d,isBits:f,abnMap:m,additional:g,categoryDef:v,bodyPart:y}=a,A=bw(),w=Z9(c),k=[];for(let E=0;E<jd;E++){const I=Gh(d,E);if(I===Md)continue;const T=A[E],N=em(T.label,T.normalText,I,`g${E}`,m,T.abnormalOptions,!1);N&&k.push(N)}if(v.category==="B"&&y&&t4(f,v.items.length)){const E=l==="B"?"Bilateral":l==="L"?"Left":"Right";k.push(`MSK - ${y.label} (${E})`)}for(let E=0;E<v.items.length;E++){const I=Gh(f,E);if(I===Md)continue;const T=v.items[E],N=em(T.label,T.normalText||"",I,`i${E}`,m,T.abnormalOptions,!1);N&&k.push(N)}for(let E=jd;E<A.length;E++){const I=Gh(d,E);if(I===Md)continue;const T=A[E],N=em(T.label,T.normalText,I,`g${E}`,m,T.abnormalOptions,!1);N&&k.push(N)}return k.length>0&&(w.length>0&&w.push(""),w.push(...k)),g.trim()&&(w.length>0&&w.push(""),w.push(`Additional Findings: ${g.trim()}`)),w.join(`
`)}function ZD(r,i){if(r.startsWith("3:"))return JD(r.substring(2),i);const a=r.startsWith("2:")?r.substring(2):r;return KD(a,i)}const Ke=[{icon:"Tylenol",text:"Acetaminophen",indication:"Pain or Fever",contra:"Hypersensitivity to acetaminophen or any component of the formulation; Hepatic impairment or liver disease",moi:"Analgesic effect believed to be related to serotonergic inhibitory pathways in the CNS; Antipyresis from inhibition of the hypothalamic heat-regulating center",adult:"325mg PO: Take 2 tabs every 6 hr daily as needed for fever or pain (Maximum 2.6g in 24hrs); 235-650mg PO: Every 4-6 hr or 1000mg 3-4 times daily (Maximum 4g in 24hrs)",peds:"15mg/kg/dose: Every 4-6 hr as needed (Maximum 2.6g in 24 hrs)",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Avoid use in patient suffering alcohol toxicity, known alcohol abuse, or renal impairment; Nausea, vomiting; G6PD deficiency",aviation:[{icon:"Class 1",text:"when used infrequently or in low dosage"}]},{icon:"Acetasol HC",text:"Acetic Acid/Hydrocortisone",indication:"Otitis Externa",contra:"Hypersensitivity to acetic acid, propylene glycol, hydrocortisone or any components of the formulation; Perforated tympanic membrane; HSV or varicella infection; Local reaction/ irritation develops",moi:"Acetic acid has bacteriostatic and fungistatic properties; Hydrocortisone has anti-inflammatory, anti-pruritic, and vasoconstrictive properties; Hydrocortisone induces phospholipase A2 inhibitory proteins and inhibits the release of arachidonic acid decreasing the mediators of inflammation",adult:"ADTMC PREFERRED: AA2%, HC1% Otic: 5 drops in affected ear(s) every 6 hours; >3 years old: 3-5 drops in affected ear every 4-6 hrs while cotton wick inserted (24 hrs); 5 drops in affected ear every 6-8 hrs daily after 24 hours",peds:"None. >3 years old use adult dosing",preg:[{icon:"Class C",text:"Potential for Harm"}],adverse:"Stinging of ear, burning sensation; Local irritation",aviation:[{icon:"None",text:""}]},{icon:"Aspirin, Bayer",text:"Aspirin",indication:"Acute Coronary Syndrome; Unstable Angina; Non-ST Segment Elevated Myocardial Infarction",contra:"Hypersensitivity to salicylates, other NSAIDs, or any component of the formulation; Asthma, Rhinitis; History of stomach ulcer, bleeding problem, black or bloody stools; Children recovering from chickenpox or flu-like symptoms due to risk of Reye syndrome",moi:"Blocks cyclooxygenase (COX 1 and 2) enzymes, resulting in reduced formation of prostaglandin precursors; Blocks formation of prostaglandin derivative, thromboxane A2, resulting in inhibited platelet aggregation; Antipyretic, analgesic, and anti-inflammatory properties",adult:"81mg PO: Chew 4 nonenteric coated baby aspirin in a single dose (4 x 81mg)",peds:"N/A",preg:[{icon:"Class D",text:"Unsafe"}],adverse:"Not for use on trauma patients in the combat environment; Risk of bleeding: Avoid use in patients with known or suspected, Bleeding disorders, GI Bleed, GI Ulcers, patients taking Coumadin, or within 24hrs of taking Alteplase (tPA) for suspected stroke",aviation:[{icon:"None",text:""}]},{icon:"Differin Cream, 0.1% Gel is OTC",text:"Adapalene",indication:"Acne",contra:"Hypersensitivity to adapalene or any component of the formulation; Not approved for children under 12 years old; Avoid contact with mucous membranes (eyes, nose, mouth, vaginal, and anal mucosa); Avoid contact with broken, eczematous, or sunburned skin",moi:"Modulates cellular differentiation, keratinization, and the inflammatory process",adult:"0.1% Topical: Apply a thin film once daily at bedtime (nickel size amount for entire face); 0.1-0.3% Topical: Apply a thin film once daily at bedtime",peds:"N/A",preg:[{icon:"Class C",text:"Potential Harm"}],adverse:"Dry skin, redness, burning or stinging of the skin, skin peeling; Skin itching; Increased susceptibility to sunburn",aviation:[{icon:"None",text:""}]},{icon:"Proventil, Ventolin",text:"Albuterol",indication:"Bronchospasm",contra:"Hypersensitivity to albuterol or any component of the formulation; Symptomatic tachycardia",moi:"Beta2 Agonist (Bronchodilator); Synthetic sympathomimetic that relaxes bronchial smooth muscle, causing bronchodilation, with little cardiac impact",adult:"90 mcg/puff inhaler: 2 puffs every 6 hours as needed; 5.0mg Nebulizer: Every 6 hours as needed; 90mcg/puff inhaler: 4 puffs every 20min for up to 4hr then every 2hr as needed; 2.5-5.0mg Nebulizer: Every 20 min for 3 doses; then 2.5-10mg every 1-4 hrs as needed OR 10-15mg/hour continuous",peds:"90 mcg/puff inhaler: 4 puffs every 20 min for 3 doses; then every 1-4 hr as needed; 2.5-5.0mg Nebulizer: Every 4-8 hours as needed; 90mcg/puff inhaler: 4 puffs every 20min for 3 doses then every 1-4 hr as needed; 2.5-5.0mg Nebulizer: Every 20 min for 3 doses; then 0.15-0.3mg/kg every 1-4 hrs as needed (Maximum: 10mg) OR 0.5mg/kg/hour continuous",preg:[{icon:"Class C",text:"Uncertain safety"}],adverse:"Risk of abortion during 1st or 2nd trimester; Headache, Dizziness, Flushing, Diaphoresis, Tremor, Weakness, Angina, A-Fib, Arrhythmia, Chest pain, Palpitations, Dyspnea, Bronchospasm in asthmatics",aviation:[{icon:"None",text:""}]},{icon:"Domeboro's Solution, Boro-packs, Pedi-Boro",text:"Aluminum Acetate",indication:"Contact Dermatitis; Skin Irritation",contra:"Hypersensitivity to aluminum acetate or any component of the formulation",moi:"Astringent properties to relieve itching",adult:"1 packet topical: 1 packet/ 16 ounces water. Soak area or apply compress for 30 minutes. Repeat every 8 hours as needed. (1 Boro-Pack = 0.16%); 1 soak topical: Soak area every 8 hours as needed. Apply compress for 15-30 min as needed for itching. 1-3 packets/16 ounces water (depending on brand)",peds:"1-3 pkts topical: 1 packet/ 16 ounces water. Soak area every 8 hours as needed. Compress x 15-30 minutes as needed for itching (1 Boro-Pack = 0.13%)",preg:[{icon:"Unknown",text:""}],adverse:"Irritation or Rash; Avoid contact with eyes, mucous membranes",aviation:[{icon:"None",text:""}]},{icon:"Zithromax",text:"Azithromycin",indication:"Cervicitis empiric therapy; Urethritis empiric therapy; Chlamydia trachomatis; Gonococcal infection",contra:"Hypersensitivity to azithromycin, erythromycin, other macrolide antibiotics or any component of the formulation; QT interval prolongation or history of arrhythmias; Liver Disease or Severe Renal Impairment",moi:"Macrolide Antibiotic; Inhibits RNA-dependent protein synthesis in susceptible organisms",adult:"1g PO: Give one dose and observe while it is being taken (Give with Ceftriaxone)",peds:"1g PO: if > 45.5kg 1g as single dose",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Diarrhea, nausea/ vomiting, GI upset",aviation:[{icon:"None",text:""}]},{icon:"Baciguent",text:"Bacitracin",indication:"Skin infection; Cut, abrasion; Blister; Burn",contra:"Hypersensitivity to bacitracin or any component of the formulation",moi:"Inhibits bacterial cell wall synthesis by preventing the transfer of mucopeptides into the growing bacterial cell wall; Maintains a moist environment allowing for skin growth and repair",adult:"500 units/g Topical: Apply ointment 2-3 times per day to protect skin and help it heal; 500 units/g Topical: Apply 1-3 times per day",peds:"500 units/g Topical: Apply 1-3 times per day",preg:[{icon:"Considered Safe",text:""}],adverse:"Limit use to 1 week. If condition remains after 1 week, Soldier should be seen by a provider",aviation:[{icon:"None",text:""}]},{icon:"Cepacol Lozenge",text:"Benzocaine",indication:"Sore Throat; Mouth Irritation",contra:"Hypersensitivity to benzocaine, para-aminobenzoic acid (PABA), or any component of the formulation; Children <5 years old, asthma, G6PD Deficiency due to risk of methemoglobinemia",moi:"Blocks the initiation and conduction of nerve impulses; Decreases the neuronal membrane's sodium ion permeability",adult:"1 lozenge PO: Allow 1 lozenge to dissolve slowly in mouth every 2 hours as needed; 1 Lozenge PO: Every 2 hours as needed for sore throat",peds:">5 years old: Refer to Adult Dosing",preg:[{icon:"Presumed Safe",text:""}],adverse:"Methemoglobinemia: blue lips/ nails, dizziness, headache, lethargy, shortness of breath",aviation:[{icon:"Acceptable",text:"provided the lozenge contains no prohibited medication. Benzocaine (or similar analgesic) containing throat spray or lozenge is acceptable. Long term use (more than 3 days) must be approved by the local flight surgeon"}]},{icon:"Acne-Clear, Acne Treatment",text:"Benzoyl Peroxide",indication:"Acne",contra:"Hypersensitivity to benzoyl peroxide or any other component of the formulation; Development of hives, itching, or signs of allergic reaction after use; Development of severe skin irritation after use",moi:"Release of free radical oxygen which oxidizes bacterial proteins; Decreases number of anaerobic bacteria and irritating free fatty acids",adult:"10% cream, gel topical: Apply to the affected area once a day in the morning for acne; 2-10% Topical: Start daily and titrate up to 2-3/day as needed",peds:"N/A",preg:[{icon:"Class C",text:"Potential Risk"}],adverse:"Skin irritation, dry skin, skin peeling; Bleach hair, colored fabric; Combination with Dapsone may cause skin/ hair to turn a yellow/orange/tan color",aviation:[{icon:"None",text:""}]},{icon:"Dulcolax",text:"Bisacodyl",indication:"Constipation",contra:"Hypersensitivity to bisacodyl or any of its components; Signs of intestinal obstruction or bowel perforation: nausea, vomiting, pain, distension, abdominal rigidity",moi:"Stimulated peristalsis by irritating the smooth muscles of the intestines and increases fluid accumulation in the intestines",adult:"5mg PO: Take 1-2 tabs daily (Maximum: 1 week use); 5mg PO: Take 1-3 tabs daily",peds:"6-11 years old: 5mg daily",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Abdominal cramps, Abdominal pain, nausea, vomiting, headache; Do Not take within 1 hour of antacids, milk, or dairy products; Swallow the tab whole",aviation:[{icon:"None",text:""}]},{icon:"Maalox, Pepto-Bismol",text:"Bismuth Subsalicylate",indication:"Diarrhea; Indigestion",contra:"Hypersensitivity to salicylates or taking other salicylates; History of stomach ulcer, bleeding problem, black or bloody stools; Children recovering from chickenpox or flu-like symptoms due to risk of Reye syndrome",moi:"Salicylate has an antisecretory action; Bismuth has an antimicrobial activity against bacterial and viral gastrointestinal pathogens",adult:"262mg/15mL PO: Take 30mL every hour as needed for up to 2 days (Maximum: 8 doses/24 hours); 524mg PO: Take 1 dose every 30 minutes as needed (Maximum: 4,200mg or 8 doses)",peds:"N/A",preg:[{icon:"Unsafe",text:""}],adverse:"Anxiety, confusion, tinnitus; Shake well prior to use (liquid), chew tablets well before swallowing (chewable tablets); Can turn stools or tongue black",aviation:[{icon:"Antacid (Maalox): Class 3",text:"When used occasionally or infrequently. Chronic use is Class 3"},{icon:"Pepto Bismol: Acceptable",text:"If used for minor diarrhea conditions and free of side effects for 24 hours"}]},{icon:"Caladryl, Calagesic",text:"Calamine/Zinc Oxide",indication:"Contact Dermatitis; Insect Bite",contra:"Hypersensitivity to Calamine, zinc oxide, or any of its components; Children less than 2 unless prescribed by a provider",moi:"Astringent and skin protectant properties to relieve itching",adult:"Dab Topical: Clean and dry area. Cover affected area and let dry. Repeat every 6 hours as needed for itching; Dab Topical: Apply as often as needed for itching",peds:"Dab Topical: Apply to the affected area every 6 hours as needed for itching",preg:[{icon:"Presumed Safe",text:""}],adverse:"Hives, Irritation, Allergic Reaction; Shake well before use; Avoid contact with eyes, mucous membranes, burns, or open wounds",aviation:[{icon:"None",text:""}]},{icon:"Rocephin",text:"Ceftriaxone",indication:"Cervicitis empiric therapy; Urethritis empiric therapy; Chlamydia trachomatis; Gonococcal infection",contra:"Hypersensitivity to ceftriaxone, penicillin, or beta-lactam antibiotics; Do NOT use with neonates due to risk of hyperbilirubinemia; Do NOT use with calcium-containing solutions due to causing calcium-ceftriaxone precipitates",moi:"3rd Generation Cephalosporin; Inhibits bacterial cell wall synthesis; Bacteria eventually lyse due to cell wall autolytic enzyme activity without concomitant synthesis activity",adult:"250mg IM: Inject into a large muscle mass (gluteus) one time (Dilute with sterile water or 1% lidocaine); 250-500mg IM: One time injection (-250mg for initial therapy -500mg if failed initial therapy)",peds:"50mg/kg IM/IV: Disseminated infection <45kg Daily for 7 days (Max dose: 1,000mg); 1,000mg IM/IV: Disseminated, >45kg 1,000mg daily for 7 days",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Induration or warm sensation at injection site; Rash or Diarrhea; Pancreatitis, Hemolytic anemia, Elevated INR",aviation:[{icon:"None",text:""}]},{icon:"Benadryl",text:"Diphenhydramine",indication:"Allergies; Hives; Motion Sickness; Anaphylactic Reaction",contra:"Hypersensitivity to diphenhydramine or any component of the formulation; Acute Asthma; Use on Neonates, premature infants, Nursing mothers",moi:"Competes with histamine for H1-receptor sites within the gastrointestinal tract, blood vessels, and respiratory tract; Produces anticholinergic and sedative effects",adult:"25mg PO: Take 1 tablet every 8 hrs or at bedtime; 50mg IV: ASAP after epinephrine auto-injector 50mg IV over 10minutes (Maximum: 300mg in 24hrs)",peds:"1.25 mg/kg PO/IM: 2-5y/o 6.25mg every 6 hrs; 1.25 mg/kg PO/IM: 6-12 y/o 12.5-25mg every 6 hrs; 1.25 mg/kg IV: ASAP after 0.15mg IM epinephrine (Maximum: 50mg dose)",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Normally causes sedation, but may cause paradoxical excitation; May have increased sedative effects when used with other sedatives or alcohol; May cause hypotension (use with caution in patient with cardiovascular disease); Dry mouth and may increase risk of heat injury",aviation:[{icon:"None",text:""}]},{icon:"Colace",text:"Docusate Sodium",indication:"Constipation; Hemorrhoids; Anal Fissure",contra:"Hypersensitivity to docusate sodium or any component of the formulation; Children under the age of 2",moi:"Reduces surface tension of stool resulting in increased absorption of water and fat into stool",adult:"100mg PO: Take 1 capsule twice a day (Maximum: 7 days of use); 50-360mg PO: 50-360mg daily or in divided doses",peds:"50-150mg PO: Once daily or in divided doses",preg:[{icon:"Not Preferred",text:""}],adverse:"Ensure adequate fluid intake",aviation:[{icon:"None",text:""}]},{icon:"Aoxa, Vibramycine",text:"Doxycycline",indication:"Acne; Malaria chemoprophylaxis; Cellulitis",contra:"Hypersensitivity to doxycycline, other tetracyclines, or any component of the formulation",moi:"Tetracycline Antibiotic; Inhibits protein synthesis of ribosomal subunits of susceptible bacteria",adult:"100mg PO (Acne): 100mg daily (used with topical agents); 100mg PO (Malaria chemoprophylaxis): 100mg daily, start 2 days before leaving; 100mg PO (Bite): 100mg Every 12 hrs x 3-5 days; 100mg PO (Cellulitis): 100mg Every 12 hrs x 7-14 days; 100mg PO (Lyme): 100mg Every 12 hrs x 10-28 days",peds:"< 45kg, 2-4mg/kg/day PO: 2-4mg/kg/day in 1-2 divided doses (maximum: 200mg/day); >45kg, 100mg PO: Refer to adult dosing",preg:[{icon:"Class D",text:"Unsafe"}],adverse:"Take medication with food or 8oz water and sit-up for 30minutes after taking (prevent esophagitis); Photosensitivity with increased risk of sunburn; Diarrhea, Severe skin reactions, Liver toxicity, Intracranial hypertension (blurry vision, headache, double vision)",aviation:[{icon:"None",text:""}]},{icon:"EpiPen",text:"Epinephrine",indication:"Anaphylactic Reaction",contra:"Uncontrolled hypertension is a relative contraindication in more mild reactions",moi:"Sympathomimetic, stimulates both alpha and beta adrenergic receptors, causing relaxation of the bronchial tree, cardiac stimulation (increasing myocardial oxygen consumption), and dilation of skeletal muscle blood vessels",adult:"1 EpiPen IM: Inject 1 epi pen into thigh and may repeat in 10 min if not improved; follow with diphenhydramine 50 mg IV and transport to emergency care; 0.3-0.5mg IM/IV: Every 5-15 min until improvement; follow with diphenhydramine 50 mg IV",peds:"0.01mg/kg IM: 0.01 mg/ kg of 1 mg/ mL dose follow with diphenhydramine 1.25 mg/ kg IV and transport to emergency care (Maximum single dose: 0.3 mg)",preg:[{icon:"Class C",text:"Unknown Safety"}],adverse:"Chest Pain, Tachycardia, Arrhythmias, Palpitations, Sudden death; Anxiety, Cerebral Hemorrhage, Headache",aviation:[{icon:"None",text:""}]},{icon:"Diflucan",text:"Fluconazole",indication:"Vaginal Yeast Infection",contra:"Hypersensitivity to fluconazole or any component of the formulation; QTc Prolongation, Heart Arrhythmia",moi:"Antifungal; Interferes with fungal cytochrome P450 activity inhibiting cell membrane formation",adult:"150mg PO: Take 1 tab by mouth one time; 150mg PO (Severe): 150 mg every 72 hrs for 2-3 doses; 150mg PO (Recurrent): 150 mg daily x 10-14 days, then 150 mg weekly x 6 months",peds:"N/A",preg:[{icon:"Unsafe",text:""}],adverse:"Dizziness or Seizures; Hepatotoxicity",aviation:[{icon:"None",text:""}]},{icon:"GlucaGen/ Glucagon Emergency Kit",text:"Glucagon",indication:"Esophageal Food Impaction; Hypoglycemia",contra:"Hypersensitivity to glucagon or any component of the formulation; Insulinoma; Pheochromocytoma",moi:"Raises blood glucose levels by stimulating increased production of cyclic AMP; Promotes hepatic gluconeogenesis",adult:"1mg IV: Inject 1 mg IV with 10 cc Normal Saline flush (For Hypoglycemia, follow with Dextrose IV and may repeat once in 20 minutes); 1mg IM/IV: Every 20 minutes as needed (Hypoglycemia, give IV dextrose ASAP)",peds:"(<20kg) 0.5mg IV/IM: Every 20 min as needed (Adult dosing if over 20 kg)",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Should NOT be used as 1st line treatment for Hypoglycemia, AMS, or Food Bolus Impaction; Hypoglycemia patients should receive dextrose. If IV access cannot be established or if dextrose is not available, glucagon may be used as alternate until dextrose can be given; Thiamine should precede use in patient with suspected alcoholism or malnutrition",aviation:[{icon:"None",text:""}]},{icon:"Mucinex Childrens, Robitussin, Tussin",text:"Guaifenesin",indication:"Cough",contra:"Hypersensitivity to guaifenesin or any component of the formulation; Do Not use extended release tablets in children under 12 years old; Chronic cough productive for phlegm",moi:"Increase the hydration of the respiratory tract, thus decreasing viscosity of respiratory mucous; Inhibits the cough reflex sensitivity in subjects with upper respiratory tract infections",adult:"100mg / 5ml PO: 1 tablespoon (15mL) every 6 hours as needed for excess mucous (Max: 8 tablespoons/24 hours); 600mg PO: 1-2 tabs every 12 hours as needed for excess mucous (Max: 2400 mg/24 hours)",peds:"2-3 y/o: 50-100mg PO: 50mg every 4 hr as needed; 4-5 y/o: 100mg every 4 hrs as needed (Maximum: 600mg / 24hrs)",preg:[{icon:"Presumed Safe",text:""}],adverse:"Dizziness, drowsiness",aviation:[{icon:"Must just be guaifenesin",text:"Many OTC cough syrups contain sedating antihistamines or Dextromethorphan (DM) and are prohibited for aviation duty"}]},{icon:"Westcort Cream",text:"Hydrocortisone",indication:"Irritant Dermatitis; Contact Dermatitis; Skin Inflammation/ Irritation",contra:"Hypersensitivity to hydrocortisone or any component of its formulation; OTC hydrocortisone is not labeled for use in children under 2 years old; Diffuse areas larger than patient's hands, occlusive dressing, heating source can result in increased doses; Adrenal suppression can progress to adrenal crisis",moi:"Anti-inflammatory, anti-pruritic, and vasoconstrictive properties; Induces phospholipase A2 inhibitory proteins and inhibits the release of arachidonic acid decreasing the mediators of inflammation",adult:"1% Topical: Apply a thin film twice a day as needed for itching or inflammation (Max: 2 weeks); 1% Topical: Apply a thin film 2-3 time per day as needed for itching or inflammation",peds:">2 years old: 1% Topical. Apply a thin film twice a day as needed for itching or inflammation",preg:[{icon:"Class C",text:"Potential for Harm"}],adverse:"Skin atrophy, atrophic striae, hypopigmentation, burning sensation; Secondary skin infection",aviation:[{icon:"N/A",text:""}]},{icon:"Analpram- HC",text:"Hydrocortisone/Pramoxine",indication:"Hemorrhoid; Anal Itching",contra:"Hypersensitivity to hydrocortisone, pramoxine, or any component of the formulation; Caution when used in patients with heart disease or diabetes; Not approved for use in children <12 years old; Adrenal suppression can progress to adrenal crisis",moi:"Hydrocortisone has anti-inflammatory, anti-pruritic, and vasoconstrictive properties; Pramoxine is an anesthetic that interferes with pain signals sent from the nerves to the brain",adult:"1 dab Topical: Apply to clean, dry area 4 times/ day (Maximum: 1 week)",peds:"N/A",preg:[{icon:"Class C",text:"Potential for Harm (Hydrocortisone)"}],adverse:"Skin atrophy, atrophic striae, hypopigmentation, burning sensation; Secondary skin infection",aviation:[{icon:"N/A",text:""}]},{icon:"Motrin, Advil",text:"Ibuprofen",indication:"Pain; Osteoarthritis; Rheumatoid Arthritis; Antipyretic",contra:"Hypersensitivity to ibuprofen or any component of the formulation; History of asthma, urticarial, or allergic-type reaction to aspirin or other NSAIDs; Aspirin triad (bronchial asthma, aspirin intolerance, rhinitis); Use in the setting of coronary artery bypass graft (CABG) surgery or gastrointestinal bleeding",moi:"Reversibly inhibits cyclooxygenase-1 and 2 (COX-1 and 2) enzymes, which results in decreased formation of prostaglandin precursors; Has antipyretic, analgesic, and anti-inflammatory properties",adult:"200mg PO: Take 2 tabs every 6 hours as needed for pain (Maximum: 1600 mg/ day); 200-800mg PO: Every 6 hours as needed (Maximum: 3200 mg/day)",peds:"10mg/kg/dose: Every 6 - 8 hrs as needed (Maximum single dose: 400 mg)",preg:[{icon:"Class C",text:"Avoid 1st, 3rd Trimester"}],adverse:"Dizziness, headache, and tinnitus; Skin rash, itching; Epigastric pain, heartburn, and nausea",aviation:[{icon:"N/A",text:""}]},{icon:"Toradol",text:"Ketorolac",indication:"Moderate Pain",contra:"Hypersensitivity to ketorolac, aspirin, other NSAIDs or any component of the formulation; History of CABG, cardiovascular disease, gastrointestinal bleeding, cerebrovascular bleeding, or bleeding risk; History of asthma, urticarial, or allergic-type reaction to aspirin or other NSAIDs; Aspirin triad (bronchial asthma, aspirin intolerance, rhinitis); Renal disease or volume depletion, receiving other NSAIDs or aspirin; During labor and delivery",moi:"Inhibits cyclooxygenase-1 and 2 (COX-1 and 2) enzymes; Has antipyretic, analgesic, and anti-inflammatory properties",adult:"30mg IM: Inject one dose at presentation if needed for moderate pain; 30mg IM/IV: 30-60mg IM or 30mg IV every 6 hours as needed (Maximum: 120mg /day, 5 days total)",peds:"N/A",preg:[{icon:"Class C",text:"Unsafe"}],adverse:"Headache; Gastrointestinal pain, heartburn, nausea; Drowsiness, dizziness, blurred vision",aviation:[{icon:"N/A",text:""}]},{icon:"Viscous Lidocaine 2%",text:"Lidocaine",indication:"Severe Sore Throat; Mouth Sores",contra:"Hypersensitivity to lidocaine to any component of the formulation; Do not use for teething in children. Seizures and death reported in children when not administered by strict adherence to dosing recommendations",moi:"Blocks the conduction of nerve impulses by decreasing the neuronal membrane's permeability to sodium ions, resulting in inhibition of depolarization and blockage of conduction",adult:"15mL PO: Swish and spit every 6 hours as needed for pain (Maximum: 4 doses/24hrs)",peds:"<1.2mL PO: Every 3 hours with cotton applicator (Maximum: 4 doses/ 12 hours); 4.5mg/kg: PO Every 3 hours swish and spit as needed. Do not swallow. (Maximum: 300mg/ dose, 4 doses/ 12 hours)",preg:[{icon:"Class B",text:"Limited Risk"}],adverse:"Severely traumatized mucosa increases the risk of rapid systemic absorption; May impair swallowing and increase aspiration risk. Avoid food for 60min after use; Tongue/ buccal biting after use",aviation:[{icon:"None",text:""}]},{icon:"Imodium",text:"Loperamide",indication:"Diarrhea",contra:"Hypersensitivity to loperamide or any component of the formulation; Doses higher than recommended can cause heart arrhythmia (Torsades de Pointes) and death; Children under 2 years of age; Dysentery, abdominal pain, ulcerative colitis, bacterial enterocolitis, antibiotic associated diarrhea",moi:"Anti-diarrheal; Inhibits peristalsis of intestinal muscles resulting in prolonged stool transit time and increased stool viscosity",adult:"2mg PO: Take 2 tabs and then 1 tab after each loose stool as needed (Maximum: 8 mg/ 4 tabs)",peds:"2-5 yrs (13-20 kg): 1 mg three times per day; 6-8 yrs (20-30 kg): 2 mg twice a day; 8-12 yrs (>30 kg): 2 mg three times per day",preg:[{icon:"Class C",text:"Potential Harm"}],adverse:"Constipation, abdominal cramps, nausea; Dizziness, drowsiness",aviation:[{icon:"None",text:""}]},{icon:"Claritin",text:"Loratadine",indication:"Seasonal Allergies; Hives",contra:"Hypersensitivity to loratadine or any component of the formulation",moi:"Competes with histamine for H1-receptor sites within the gastrointestinal tract, blood vessels, and respiratory tract; Second Generation, Less sedating than First Generation (diphenhydramine)",adult:"10mg PO: Take 1 tab daily for allergies",peds:"2-5 y/o: 5 mg PO once daily for allergies; 6+ y/o: use adult dosing",preg:[{icon:"Presumed Safe",text:""}],adverse:"Headache; Sedation and may have increased sedative effects when used with other sedatives or alcohol; In breast fed infant, monitor for drowsiness, irritability, agitation; May increase risk of heat injury",aviation:[{icon:"Short term use authorized",text:"aircrew member must report use of this medication to the FS/APA as soon as possible"}]},{icon:"BenGay, Icy Hot",text:"Menthol",indication:"Pain, Muscle Soreness",contra:"Hypersensitivity to aspirin, NSAIDS, menthol or any component of the formulation; Signs or symptoms of pain, swelling, blistering after application",moi:"Analgesic and anti-inflammatory properties",adult:"Balm Topical: Apply every 6-8 hours as needed for muscle soreness; 1.5% menthol patch: Every 6-8 hrs as needed for pain (Do not leave in place for over 8 hrs); 3% Menthol Patch: Every 8-12 hours as needed for pain (Maximum: 2 uses/ day x 3 days)",peds:"None",preg:[{icon:"Do Not use",text:"in last 3 months of pregnancy"}],adverse:"Do not apply to wounds, rashes, damaged skin, mucous membranes, or right after bathing; Do not use a heating pad after application; Can cause chemical burns at application site",aviation:[{icon:"None",text:""}]},{icon:"Flagyl",text:"Metronidazole",indication:"Bacterial Vaginosis",contra:"Do Not use alcohol when taking or within 3 days of taking. Can cause disulfiram-like reaction (flushing, tachycardia, nausea, vomiting); Do not take during 1st Trimester of pregnancy; History of seizures",moi:"Cytotoxic to anaerobic bacteria; Disrupts DNA structure resulting in DNA strand breakage and inhibition of protein synthesis with resulting cell death in susceptible organisms",adult:"250mg PO: Take 2 tabs twice a day for 7 days; 250-1000mg PO: Different conditions: 250-1000 mg 2-4 times/ day",peds:"30-50mg/kg PO: Divided over 3 doses (Maximum: 2,250 mg/ day)",preg:[{icon:"Class B",text:"Not in 1st Trimester"}],adverse:"GI: nausea, vomiting, diarrhea, constipation, stomach cramps, anorexia; Neuropathic: neuropathy, confusion, dizziness, metallic taste, headache",aviation:[{icon:"None",text:""}]},{icon:"Aleve, Naprosyn",text:"Naproxen",indication:"Pain Osteoarthritis; Gout; Primary Dysmenorrhea",contra:"Hypersensitivity to naproxen or any component of the formulation; History of asthma, uricarial, or allergic-type reaction to aspirin or other NSAIDs; Aspirin triad (bronchial asthma, aspirin intolerance, rhinitis); Use in the setting of coronary artery bypass graft (CABG) surgery, kidney disease, or gastrointestinal bleeding",moi:"Reversibly inhibits cyclooxygenase-1 and 2 (COX-1 and 2) enzymes, which results in decreased formation of prostaglandin precursors; Has antipyretic, analgesic, and anti-inflammatory properties",adult:"ADTMC Preferred: 250mg PO: Take 1 tab every 12 hrs as needed for pain (Maximum: 500 mg/ day); 250-500mg PO: Every 12 hours as needed (Maximum: 1000 mg/ day)",peds:"Every 12 hours as needed (Maximum: 10 mg/ kg/ day)",preg:[{icon:"Avoid",text:"1st, 3rd Trimester"}],adverse:"Dizziness, drowsiness, headache, and tinnitus; Skin rash, itching; Epigastric pain, heartburn, nausea, constipation",aviation:[{icon:"None",text:""}]},{icon:"Macrobid",text:"Nitrofurantoin",indication:"Urinary Tract Infection",contra:"Hypersensitivity to Nitrofurantoin or any component of the formulation; Pregnancy close to term/ delivery and neonates due to risk of hemolytic anemia; Renal impairment (anuria, oliguria), history of cholestatic jaundice or hepatic dysfunction from previous use",moi:"Antibiotic; Alter bacterial ribosomal proteins inhibiting protein synthesis, aerobic energy metabolism, and cell wall synthesis",adult:"ADTMC PREFERRED: 100mg PO: Take 1 capsule twice a day for 5 days; Nitrofurantoin monohydrate: 100 mg every 12 hrs x 5 days; Nitrofurantoin macrocrystals: 50-100 mg every 6hrs x 7 days; UTI prophylaxis: 50-100 mg daily at Bedtime",peds:"6-7mg/kg/day PO: Nitrofurantoin macrocrystals: Divide in 4 doses (every 6 hrs) x 7 days (max: 400 mg /day)",preg:[{icon:"Class B",text:"Not at Term"}],adverse:"Liver failure, Peripheral neuropathy, Pulmonary toxicity",aviation:[{icon:"None",text:""}]},{icon:"Afrin",text:"Oxymetazoline",indication:"Nasal Congestion; Nosebleed",contra:"Hypersensitivity to oxymetazoline or any component of its formulation; Child 5 years old or younger- ingestion can cause coma, bradycardia, respiratory depression, sedation",moi:"Stimulates alpha-adrenergic receptors causing vasoconstriction",adult:"0.05% Nasal Spray: 2 sprays in affected side twice a day for 3 days (Max: 2 doses/ 24 hours)",peds:"None. > 6 refer to adult dosing",preg:[{icon:"Unknown",text:"Chronic Use Unsafe"}],adverse:"Rebound nasal congestion from use >3 days; Nasal irritation, burning",aviation:[{icon:"Restricted",text:"to no more than 3 days. Use of oxymetazoline for longer than the above time must be validated and approved by a flight surgeon"}]},{icon:"Nix",text:"Permethrin",indication:"Head Lice; Pubic Lice",contra:"Hypersensitivity to any pyrethrin or pyrethroid, or any component of the formulation; Do Not come in contact with mucosal surfaces (eyes, inside nose, mouth, ear, or vagina); Ragweed allergy- consult provider because can cause difficulty breathing",moi:"Antiparasitic Agent; Inhibits sodium membrane channels in parasites resulting in paralysis and death",adult:"1% Topical: Head Lice, leave on 10 min then rinse. Remove nits with comb. Repeat in 7 days; Pubic Lice- 1%, leave on 10 min then rinse",peds:"None. > 2 months old adult dosing",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Skin irritation; Localized numbness, tingling",aviation:[{icon:"None",text:""}]},{icon:"Elimite",text:"Permethrin",indication:"Scabies",contra:"Hypersensitivity to any pyrethrin or pyrethroid, or any component of the formulation; Do Not come in contact with mucosal surfaces (eyes, inside nose, mouth, ear, or vagina); Ragweed allergy- consult provider because can cause difficulty breathing",moi:"Antiparasitic Agent; Inhibits sodium membrane channels in parasites resulting in paralysis and death",adult:"Scabies- 5%, apply 30 g from head to soles, leave on 8-14 hrs then rinse. May repeat in 14 days",peds:"None. >2 months old, adult dosing",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Skin irritation; Localized numbness, tingling",aviation:[{icon:"None",text:""}]},{icon:"Pyridium",text:"Phenazopyridine",indication:"Dysuria",contra:"Hypersensitivity to phenazopyridine or any component of the formulation; Discontinue if skin or sclera develop a yellow color; Kidney Disease/ Renal Impairment; G6PD deficiency",moi:"An azo dye that is excreted in the urine and has analgesic effect on urinary tract mucosa; Unknown mechanism",adult:"100mg PO: Take 2 tabs every 8 hours after meals as needed for pain with urination; Use with an antibiotic (Maximum: 600 mg per day for 2 days)",peds:"None",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Headache, Dizziness; Stomach Cramps; Discolor urine, fabric or clothing, contacts (if touching after touching tablets)",aviation:[{icon:"None",text:""}]},{icon:"Miralax",text:"Polyethylene Glycol",indication:"Constipation; Hemorrhoids; Anal Fissure",contra:"Hypersensitivity to polyethylene glycol or any component of the formulation; Suspected bowel obstruction (symptoms of nausea, vomiting, abdominal pain or distension); Renal impairment/ kidney disease due to risk of electrolyte imbalance",moi:"Osmotic agent causes water retention in the stool increasing stool frequency and decreasing stool consistency",adult:"17grams PO: 17 g (1 heaping tablespoon) in 4-8 ounces of beverage daily (Maximum: 2 weeks)",peds:"0.2-1gram/kg: Daily dose titrated to effect (Max: 17 g/ day)",preg:[{icon:"Unknown",text:""}],adverse:"Nausea, diarrhea, gas, stomach cramping, stomach bloating",aviation:[{icon:"None",text:""}]},{icon:"Betadine",text:"Povidone-Iodine",indication:"Antiseptic",contra:"Hypersensitivity to iodine, shellfish, or any component of the formulation; Use with caution in patients with renal impairment or thyroid disorders; Do not use with deep puncture wounds or serious burns",moi:"Broad spectrum germicidal agent effective against bacteria, viruses, fungi, protozoa, and spores",adult:"Topical: Apply to affected area as needed to clean the skin/ as needed for antiseptic",peds:"N/A",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Irritation, itching, rash",aviation:[{icon:"N/A",text:""}]},{icon:"Systane Balance",text:"Artificial Tears",indication:"Dry Eyes",contra:"Hypersensitivity to any components of the formulation",moi:"Demulcents have protection and lubrication properties",adult:"1-2 drops ophthalmic: Apply 1-2 drops in affected eye every hour as needed",peds:"1-2 drops ophthalmic: Apply 1-2 drops in affected eye",preg:[{icon:"Safe",text:""}],adverse:"Mild stinging of eye, eyelid crusting, or blurred vision; Remove contact lenses prior to use; Do not touch tip of applicator to any surface to avoid contamination",aviation:[{icon:"Saline or other lubricating solution only",text:"Visine or other vasoconstrictor agents are prohibited for aviation duty"}]},{icon:"Sudafed",text:"Pseudoephedrine",indication:"Nasal Congestion",contra:"Hypersensitivity to pseudoephedrine or any component of its formulation; Children <4 years old; Administering with or within 2 weeks of taking a MAO Inhibitor; Hypertension, Ischemic heart disease, Diabetes, Seizure disorder",moi:"Stimulates alpha-adrenergic receptors causing vasoconstriction",adult:"30mg PO: Take 2 tab every 6 hours as needed for congestion; 30mg PO: Take 60 mg every 4-6 hrs as needed for congestion; 120mg PO: Take 120 mg extended release every 12 hrs as needed for congestion",peds:"4-5 years old 15mg PO: 15 mg every 4-6 hrs as needed for congestion; 6-11 years old: 30mg PO every 4-6 hours as needed for congestion",preg:[{icon:"Unsafe",text:""}],adverse:"Palpitations, hypertension, tachycardia; Insomnia, feeling jittery; Urinary retention; Increased risk of heat injury",aviation:[{icon:"When used for mild nasal congestion",text:"in the presence of normal ventilation of the sinuses and middle ears (normal valsalva). Must notify supervising provider that patient is on flight status when requesting prescription"}]},{icon:"Zantac",text:"Ranitidine",indication:"Heartburn; Gastroesophageal Reflux Disease (GERD); Erosive Esophagitis",contra:"Hypersensitivity to ranitidine or any component of the formulation",moi:"Competes with histamine for H2-receptor sites within the gastrointestinal tract; Inhibits gastric acid secretion and gastric volume",adult:"ADTMC PREFERRED: 150mg PO: Take 1 tab twice a day as needed for heartburn; 150mg PO: Take 1 tab 1-4 times daily as needed for GERD or erosive esophagitis",peds:"75mg-150mg PO 30 min before eating (Max 2 times/day. Max 14 days); 5-10 mg/kg/day PO: Divided into 2 doses 12 hrs apart (Maximum: 300mg/day)",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Vitamin B12 deficiency when used for over 2 years",aviation:[{icon:"None",text:""}]},{icon:"Lamisil",text:"Terbinafine",indication:"Athlete's Foot (Tinea pedis); Jock Itch (Tinea cruris); Body Fungal Infection (Tinea corporis)",contra:"Local irritation develops; If dosage form contains benzyl alcohol, can cause a fatal toxicity in neonates",moi:"Synthetic allylamine derivative inhibits squalene epoxidase, a key enzyme in the sterol biosynthesis in fungi; Results in fungal cell death",adult:"1% Topical: Apply to affected area x 1 week Twice a day (Tinea pedis); 1% Topical: Apply to affected area x 1 week Daily (Tinea cruris, corporis); 1% Topical: Apply to affected area Twice a day x 2 weeks (sides and soles of feet)",peds:"N/A",preg:[{icon:"Safe",text:""}],adverse:"Contact dermatitis, burning sensation, irritation; Not intended for use on nails, scalp, or mucosa",aviation:[{icon:"None",text:""}]},{icon:"Septra, Bactrim",text:"Trimethoprim/Sulfamethoxazole",indication:"Urinary Tract Infection; REVIEW LOCAL ANTIBIOGRAM FOR POTENTIAL RESISTANCE",contra:"Hypersensitivity to Trimethoprim sulfamethoxazole, sulfonamides antibiotics, G6PD deficiency, or any component of the formulation; Pregnancy during 1st Trimester or after 32 weeks, infant <2 months; Do Not use in patient with megaloblastic anemia from folate deficiency or Hyperkalemia",moi:"Antibiotic against aerobic gram positive and gram negative; Inhibits bacterial folic acid synthesis and growth",adult:"160mg/800mg PO: Take 1 double strength (DS) tab (160mg/800mg) twice a day for 3 days",peds:"6-12mg TMP/kg/day PO/IV: Divided over 2 doses (every 12 hours) (Maximum: 160mg TMP/dose)",preg:[{icon:"Class D",text:"not in 1st trimester"}],adverse:"Nausea/ Vomiting; Rash/ Itching; Take with 8 oz of water",aviation:[{icon:"None",text:""}]},{icon:"Valtrex",text:"Valacyclovir",indication:"Cold sores (Herpes labialis); Herpes simplex virus (HSV); Shingles (Herpes zoster); Treatment should start within 72hours of symptoms",contra:"Hypersensitivity to valcyclovir, acyclovir, or any component of the formulation",moi:"Converts to Acyclovir, Inhibits DHA synthesis and viral replication",adult:"2grams PO: Take 2 grams twice 12 hours apart; Cold Sores: 2g PO twice every 12 hours; HSV (initial): 1g twice a day x 10 days; HSV (recurrent): 1g daily x 5 days",peds:"Varicella > 2 y/o: 20mg/kg PO three times per day x 5 days (Maximum: 1 g/dose)",preg:[{icon:"Class B",text:"Presumed Safe"}],adverse:"Headache, confusion, agitation; Nausea, abdominal pain",aviation:[{icon:"None",text:""}]}],ww=[{value:0,label:"Not at all"},{value:1,label:"Several days"},{value:2,label:"More than half the days"},{value:3,label:"Nearly every day"}],e7={id:"PHQ9",title:"PHQ-9 Depression Screener",instruction:"Over the last 2 weeks, how often have you been bothered by the following problems?",questions:[{text:"Little interest or pleasure in doing things"},{text:"Feeling down, depressed or hopeless"},{text:"Trouble falling asleep, staying asleep, or sleeping too much"},{text:"Feeling tired or having little energy"},{text:"Poor appetite or overeating"},{text:"Feeling bad about yourself - or that you're a failure or have let yourself or your family down"},{text:"Trouble concentrating on things, such as reading the newspaper or watching television"},{text:"Moving or speaking so slowly that other people could have noticed. Or, the opposite - being so fidgety or restless that you have been moving around a lot more than usual"},{text:"Thoughts that you would be better off dead or of hurting yourself in some way"}],scaleOptions:ww,interpretations:[{minScore:0,maxScore:4,label:"Minimal Depression"},{minScore:5,maxScore:9,label:"Mild Depression"},{minScore:10,maxScore:14,label:"Moderate Depression"},{minScore:15,maxScore:19,label:"Moderately Severe Depression"},{minScore:20,maxScore:27,label:"Severe Depression"}],threshold:10},t7={id:"PHQ2",title:"Depression Screening (PHQ-2)",instruction:"Over the last 2 weeks, how often have you been bothered by the following problems?",questions:[{text:"Little interest or pleasure in doing things"},{text:"Feeling down, depressed or hopeless"}],scaleOptions:ww,interpretations:[{minScore:0,maxScore:2,label:"Negative Screen"},{minScore:3,maxScore:6,label:"Positive Screen"}],threshold:3,conditionalExtension:{screener:e7,threshold:3,carryOverQuestions:2}},n7={id:"GAD7",title:"GAD-7 Anxiety Screener",instruction:"Over the last two weeks, how often have you been bothered by the following problems?",questions:[{text:"Feeling nervous, anxious, or on edge"},{text:"Not being able to stop or control worrying"},{text:"Worrying too much about different things"},{text:"Trouble relaxing"},{text:"Being so restless that it is hard to sit still"},{text:"Becoming easily annoyed or irritable"},{text:"Feeling afraid, as if something awful might happen"}],scaleOptions:ww,interpretations:[{minScore:0,maxScore:4,label:"Minimal Anxiety"},{minScore:5,maxScore:9,label:"Mild Anxiety"},{minScore:10,maxScore:14,label:"Moderate Anxiety"},{minScore:15,maxScore:21,label:"Severe Anxiety"}],threshold:10,followUp:{text:"If you checked any problems, how difficult have they made it for you to do your work, take care of things at home, or get along with other people?",options:["Not difficult at all","Somewhat difficult","Very difficult","Extremely difficult"]}};function vh(r){return Array.from({length:r+1},(i,a)=>({value:a,label:String(a)}))}const wu=[{value:0,label:"No"},{value:1,label:"Yes"}],ej=[{value:0,label:"No"},{value:1,label:"Yes"},{value:2,label:"Unknown"}],fd=[{value:0,label:"Normal"},{value:1,label:"Abnormal"}],hd=[{value:0,label:"Normal"},{value:1,label:"Abnormal"},{value:2,label:"Not Tested"}],tj=[{name:"A",words:["Jacket","Pepper","Arrow","Cotton","Movie"],digits:{trial1:["4-9-3","3-8-1-4","6-2-9-7-1","7-1-8-4-6-3"],trial2:["6-2-9","3-2-7-9","1-5-2-8-5","5-3-9-1-4-8"]}},{name:"B",words:["Dollar","Mirror","Honey","Saddle","Anchor"],digits:{trial1:["5-2-6","1-7-9-5","4-8-5-2-7","8-3-1-9-6-4"],trial2:["4-1-5","4-9-6-8","6-1-8-4-3","7-2-7-8-5-6"]}},{name:"C",words:["Finger","Blanket","Penny","Lemon","Insect"],digits:{trial1:["1-4-2","6-8-3-1","4-9-1-5-3","3-7-6-5-1-9"],trial2:["6-5-8","3-4-8-1","6-8-2-5-1","9-2-6-5-1-4"]}},{name:"D",words:["Baby","Perfume","Monkey","Sunset","Iron"],digits:{trial1:["7-8-2","4-1-8-3","1-7-9-2-6","2-6-4-8-1-7"],trial2:["9-2-6","9-7-2-3","4-1-7-5-2","8-4-1-9-3-5"]}},{name:"E",words:["Candle","Sugar","Paper","Sandwich","Wagon"],digits:{trial1:["3-8-2","2-7-9-3","4-1-8-6-9","6-9-7-3-8-2"],trial2:["5-1-8","2-1-6-9","9-4-1-7-5","4-2-7-9-3-8"]}},{name:"F",words:["Elbow","Carpet","Apple","Saddle","Bubble"],digits:{trial1:["2-7-1","1-6-8-3","2-4-7-5-8","5-8-6-2-4-9"],trial2:["4-7-9","3-9-2-4","8-3-9-6-4","3-1-7-8-2-6"]}}],i7={id:"MACE2",title:"MACE 2  Military Acute Concussion Evaluation",instruction:"Use MACE 2 as close to time of injury as possible. Evaluate for red flags in patients with GCS 13-15.",questions:[{text:"Defer MACE 2 if any red flags are present. Immediately consult higher level of care and consider urgent evacuation according to TCCC.",type:"info",sectionHeader:"Red Flags"},{text:"Red flags present:",type:"check",options:["Deteriorating level of consciousness","Double vision","Increased restlessness, combative or agitated behavior","Repeat vomiting","Positive structural brain injury detection device result","Seizures","Weakness or tingling in arms or legs","Severe or worsening headache"]},{text:"Observable signs at time of injury:",type:"check",sectionHeader:"Concussion Screening",options:["Lying motionless on the ground","Slow to get up after a direct or indirect blow to the head","Disorientation, confusion, or inability to respond appropriately","Blank or vacant look","Balance difficulties, stumbling, or slow labored movements","Facial injury after head trauma"]},{text:"Type of event (check all that apply):",type:"check",options:["Blunt object","Sports injury","Gunshot wound","Fall","Assault","Explosion/blast","Motor vehicle crash","Fragment","Other"]},{text:"(1D) Was there a blow or jolt to the head?",scaleOptions:wu,scored:!1},{text:"(2A) Alteration of consciousness (AOC)?",scaleOptions:wu,scored:!1},{text:"(2B) Loss of consciousness (LOC)?",scaleOptions:wu,scored:!1},{text:"(2C) Post-traumatic amnesia (PTA)?",scaleOptions:wu,scored:!1},{text:"(2D) AOC, LOC, or PTA witnessed?",scaleOptions:wu,scored:!1},{text:"Symptoms (check all that apply):",type:"check",sectionHeader:"Symptoms",options:["Headache","Dizziness","Memory problems","Balance problems","Nausea/vomiting","Difficulty concentrating","Irritability","Visual disturbances","Ringing in the ears","Other"]},{text:"During the past 12 months, diagnosed with a concussion (not counting this event)?",scaleOptions:ej,scored:!1,sectionHeader:"History"},{text:"History of diagnosed/treated headache disorder or migraine?",scaleOptions:wu,scored:!1},{text:"History of depression, anxiety, or other behavioral health concerns?",scaleOptions:wu,scored:!1},{text:"Orientation  Score one point for each correct response (month, date, day of week, year, time within 1 hour)",scaleOptions:vh(5),sectionHeader:"Cognitive Exam"},{text:"Read the word list to the service member for each trial. Score one point for each word recalled.",type:"info",dynamicContent:"wordList"},{text:"Immediate Memory  Trial 1 (words recalled)",scaleOptions:vh(5)},{text:"Immediate Memory  Trial 2 (words recalled)",scaleOptions:vh(5)},{text:"Immediate Memory  Trial 3 (words recalled)",scaleOptions:vh(5)},{text:"Speech Fluency  Speech should be fluid and effortless, no pauses or unnatural breaks. Stuttering or struggling to speak is abnormal.",scaleOptions:fd,scored:!1,sectionHeader:"Neurological Exam"},{text:"Word Finding  Difficulty coming up with names of objects or grasping to find words is abnormal.",scaleOptions:fd,scored:!1},{text:"Grip Strength  Should be strong and equal bilaterally. Unequal or weak grip strength is abnormal.",scaleOptions:fd,scored:!1},{text:"Pronator Drift  Stand with eyes closed, arms extended forward, palms up. Assess 5-10 seconds. Any arm or palm drift is abnormal.",scaleOptions:fd,scored:!1},{text:"Single Leg Stance  Stand on one leg, arms across chest, eyes closed. Time 15 seconds each leg. Loss of balance before 8 seconds is abnormal.",scaleOptions:fd,scored:!1},{text:"Tandem Gait  Six heel-to-toe steps, arms at side. Stumbling or shifting feet is abnormal.",scaleOptions:fd,scored:!1},{text:"Pupil Response  Pupils should be round, equal, and briskly constrict to light. Unequal size, dilation, or delay is abnormal.",scaleOptions:fd,scored:!1},{text:"Eye Tracking  Both eyes should smoothly track side-to-side and up-down. Unequal, irregular, or delayed tracking is abnormal.",scaleOptions:fd,scored:!1},{text:"Use the same list chosen for Immediate Memory. Read digit strings and have the service member repeat them backward.",type:"info",sectionHeader:"Concentration",dynamicContent:"digitStrings"},{text:"Concentration  Reverse Digits (total correct)",scaleOptions:vh(4)},{text:"Concentration  Months in Reverse Order (Dec through Jan)",scaleOptions:[{value:0,label:"Incorrect"},{value:1,label:"Correct"}]},{text:"Ask the service member to recall the word list from Immediate Memory. Do NOT repeat the words.",type:"info",sectionHeader:"Delayed Recall",dynamicContent:"recallWords"},{text:"Delayed Recall (words recalled)",scaleOptions:vh(5)},{text:"Vestibular/Ocular-Motor Screening (VOMS). WARNING: Contraindicated with unstable cervical spine. Consider deferring if patient is overtly symptomatic or trained provider unavailable. VOMS should be completed before return to duty.",type:"info",sectionHeader:"VOMS"},{text:"Baseline Symptoms  Record headache, dizziness, nausea, and fogginess (HDNF) on 0-10 scale prior to screening.",scaleOptions:hd,scored:!1},{text:"Smooth Pursuits  Focus on fingertip target moving horizontally then vertically. Perform twice each direction.",scaleOptions:hd,scored:!1},{text:"Saccades  Horizontal  Eyes move quickly between two points 30 left and right. Perform 10 times.",scaleOptions:hd,scored:!1},{text:"Saccades  Vertical  Eyes move quickly between two points 30 up and down. Perform 10 times.",scaleOptions:hd,scored:!1},{text:"Convergence  Focus on target at arm's length, slowly bring toward nose. Stop at double vision or eye deviation. Measure 3 times. 5cm is abnormal.",scaleOptions:hd,scored:!1},{text:"VOR  Horizontal  Head rotates horizontally focusing on target, 20 each side at 180 bpm. Perform 10 times.",scaleOptions:hd,scored:!1},{text:"VOR  Vertical  Head moves vertically focusing on target, 20 up and down at 180 bpm. Perform 10 times.",scaleOptions:hd,scored:!1},{text:"Visual Motion Sensitivity (VMS)  Stand in busy area, rotate head/eyes/trunk as unit 80 right and left at 50 bpm. Perform 5 times.",scaleOptions:hd,scored:!1}],scaleOptions:[],interpretations:[{minScore:0,maxScore:25,label:"Abnormal (Positive Screen)"},{minScore:26,maxScore:30,label:"Normal (Negative Screen)"}],threshold:25,invertThreshold:!0,gate:{requiredIndex:4,anyOfIndices:[5,6,7,8],positiveMessage:"POSITIVE CONCUSSION SCREEN  Continue MACE 2. Complete evaluation before prescribing rest.",negativeMessage:"NEGATIVE CONCUSSION SCREEN  Stop MACE 2. Initiate 24-hour rest period.",gatedFromIndex:10},wordLists:tj};function Ox(r){return r.scored!==void 0?r.scored:!(r.type==="check"||r.type==="info")}function r7(r,i){const a=r.gate;if(!a)return!0;const s=i[a.requiredIndex]===1,l=a.anyOfIndices.some(c=>i[c]===1);return s&&l}function Aw(r){return r.questions.reduce((i,a)=>{if(!Ox(a))return i;const s=a.scaleOptions??r.scaleOptions;return s.length===0?i:i+Math.max(...s.map(l=>l.value))},0)}function a7(r,i){return r.questions.reduce((a,s,l)=>Ox(s)?a+(i[l]??0):a,0)}const nj={GAD7:n7,PHQ2:t7,PHQ9:e7,MACE2:i7},me=[{type:"CAT I",text:"Provider Now"},{type:"CAT II",text:"AEM Now"},{type:"CAT III",text:"Treatment Protocol and RTD"},{type:"CAT IV",text:"Referral"},{type:"OTHER",text:""}],s7=[{id:"A-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Shortness of Breath"},{text:"Stridor"},{text:"Deviated Uvula"},{text:"Drooling/ Trouble Swallowing"},{text:"Stiff Neck"}],answerOptions:[]},{text:"Are red flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["peritonsillar abscess","upper airway obstruction"],text:'If the Soldier presents with any of the red flags, immediately disposition the Soldier as "Provider Now." One-sided severe sore throat with fever, trouble swallowing as shown by drooling, uvula displacement, hoarseness (hot potato voice), trismus (lock jaw), and enlarged, tender tonsils are signs of a deep neck space infection like a peritonsillar abscess. Shortness of breath and stridor are signs of upper airway obstruction due to severe pharyngeal inflammation.'}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Symptoms > 10 days"},{text:"Immunosuppression"},{text:"Inhaled steroid"},{text:"Fever > 48 hours"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"Symptoms greater than 10 days, immunosuppression, inhaled steroid medications are related to diseases that are unlikely to go away without treatment. Hoarseness longer than 2 weeks requires a full laryngeal exam."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"How many of the following apply?",type:"count",questionOptions:[{text:"Fever > 100.4 F (refer to supervising medical provider"},{text:"No Cough"},{text:"Tonsillar Exudate"},{text:"Swollen anterior cervical nodes"}],answerOptions:[{text:"3+ Centor",decisionMaking:[],disposition:[],next:[4,5],selectAll:!0},{text:"0-2 CENTOR",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["viral infection"],text:"Other protocols. Sore throat and hoarseness that are associated with a virus should be treated with minor-care. The other symptoms should be treated according to their associated protocols. See COVID-19 L-13.",assocMcp:{type:"mcp",text:"Salt water gargles and drink warm fluids for inflammation. Return if not improving in 3 days or immediately if worsening symptoms or Red Flags",medFind:[{...Ke[8]},{...Ke[0]},{...Ke[23]}]}},{type:"mcp",ddx:["sore throat"],text:"A sore throat is often due to a viral infection. Minor-care consist of pain control, measures to decrease inflammation, getting plenty of rest and drinking plenty of fluids (water). Return for signs of the infection getting worse or progressing."},{type:"mcp",ddx:["hoarseness"],text:"Hoarseness is often due to a virus or irritant. Minor-care consists of resting the vocal cords and avoidance of irritants (cigarette smoking, yelling, heartburn, post-nasal drip). This is a good opportunity to discuss the negative effects of tobacco use and encourage the Soldier to quit using tobacco, if applicable."}],next:null,selectAll:!1}]},{text:"Collect the following labs",type:"action",questionOptions:[{text:"Rapid Strep + Culture Test (barracks, positive close contact, immunosuppressed contact, h/o ARF)"}],answerOptions:[]},{text:"What is the test result?",type:"choice",questionOptions:[],answerOptions:[{text:"Positive",decisionMaking:[{type:"dmp",ddx:["Streptococcal Infection"],text:"4 questions that look at the chance of having a Group A Streptococcal (GAS) infection. If 3 of the questions are positive, there is 32% chance of having GAS and a rapid antigen test (RADT) should be performed. The RADT is effective for ruling out GAS in adults but some Soldiers with GAS are missed. Culture test is performed when the RADT is negative and Soldiers or their contacts are at higher risk for complications from a GAS infection. Culture generally takes 24-48 hours for the results to return.",ancillaryFind:[{type:"lab",modifier:"rapid strep"}]}],disposition:[me[1]],next:null,selectAll:!0},{text:"Negative",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["viral infection"],text:"Other protocols. Sore throat and hoarseness that are associated with a virus should be treated with minor-care. The other symptoms should be treated according to their associated protocols. See COVID-19 L-13.",assocMcp:{type:"mcp",text:"Salt water gargles and drink warm fluids for inflammation. Return if not improving in 3 days or immediately if worsening symptoms or Red Flags",medFind:[{...Ke[8]},{...Ke[0]},{...Ke[23]}]}},{type:"mcp",ddx:["sore throat"],text:"A sore throat is often due to a viral infection. Minor-care consist of pain control, measures to decrease inflammation, getting plenty of rest and drinking plenty of fluids (water). Return for signs of the infection getting worse or progressing."},{type:"mcp",ddx:["hoarseness"],text:"Hoarseness is often due to a virus or irritant. Minor-care consists of resting the vocal cords and avoidance of irritants (cigarette smoking, yelling, heartburn, post-nasal drip). This is a good opportunity to discuss the negative effects of tobacco use and encourage the Soldier to quit using tobacco, if applicable."}],next:null,selectAll:!1}]}]},{id:"A-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Stiff Neck AND Fever"},{text:"Posterior ear pain and/or mastoid erythema"}],answerOptions:[]},{text:"Are red flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["meningitis","mastoiditis"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. A stiff neck and fever are signs of meningitis, and all Soldiers with signs of meningitis should be seen by a privileged provider as soon as possible. Mastoid symptoms can be a sign of mastoiditis."}],next:null,selectAll:!0},{text:"No",disposition:[],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Severe Ear pain"},{text:"Ear drainage"},{text:"Fever"}],answerOptions:[{text:"Yes",disposition:[],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:[3,4],selectAll:!0},{text:"No",disposition:[],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:5,selectAll:!1}]},{text:"Perform an otoscope exam (both ears). Look for the following:",type:"action",questionOptions:[{text:"TM: redness, opacification, bulging, immobility, rupture"},{text:"Ear Canal (EC) redness, swollen, tenderness"}],answerOptions:[]},{text:"Are there TM symptoms, or concern for Mod-Severe Otitis Externa?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["otitis media","moderate to severe otitis externa"],text:"Signs of infection. All Soldiers with otitis media or moderate to severe otitis externa should be evaluated by a privileged provider to be considered for antibiotics."}],next:null,selectAll:!0},{text:"No",disposition:[],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:5,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Vertigo"},{text:"Going on for > 7 days"},{text:"Decreased hearing"},{text:"Foreign body in ear"},{text:"Visual trauma to ear"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"DP2. Vertigo requires an internal ear evaluation. Longer timeline and decreased hearing can be signs of a complication from an ear infection or alternate cause requiring a qualified provider evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:[6,7],selectAll:!1}]},{text:"Check for TMJ inflammation",type:"action",questionOptions:[],answerOptions:[]},{text:"Is there TMJ Inflammation?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[2]],decisionMaking:[{type:"dmp",text:"Mild otitis externa, temporal-mandibular joint (TMJ) dysfunction, and ear pain with normal exam should be treated with minor-care."},{type:"dmp",ddx:["Mild Otitis Externa"],text:"Soak wick of a cotton ball wick with OTC ear drops. Place in the ear for 24 hours while using the drops. Remove the cotton wick and continue drops for 1 week (3 days after the symptoms have resolved). Keep the ear canal dry. Use OTC ibuprofen as needed for pain. Return to clinic if not resolved in 1 week or worsening symptoms to include pain or fever.",assocMcp:{type:"mcp",text:"Soak wick of a cotton ball with ear drops. pleace in the ear for 24 hours while using the drops. Remove the cotton wick and continue drops for 1 week (3 days after the symptoms have resolved). Keep the ear canal dry. Return if not improving in 3 days, worsening symptoms, dizziness, loss of hearing, stiff neck",specLim:["Avoidance of situations requiring utilization of ear plugs","No swimming"],ancillaryFind:[{type:"med",modifier:"hydrocortisone ear drops"}],medFind:[Ke[0],Ke[23]]}},{type:"dmp",ddx:["TMJ"],text:"another common cause of pain around the ear. Evaluation includes seeing if the pain increases with opening and closing the jaw while placing the finger on the anterior inside of the ear to feel the joint. Ensure pain is not related to the heart. Use OTC ibuprofen for inflammation and pain. Refer to dental if history of teeth grinding. Instruct on avoidance of triggers (excessive chewing, chewing gum). Home therapy is jaw isometric exercises: jaw is open 1 inch and jaw is pushed 1) down against a loosely fisted hand and 2) forward against a hand for 5 seconds each, each set is repeated 5 times per session with 3 sessions per day. Return if not improving within three days.",assocMcp:{type:"mcp",text:"Refer to dental if history of teeth grinding, ibuprofen as needed for pain, instruct on avoidance of triggers and home jaw exercises. Return if not improving in 3 days, worsening symptoms, dizziness, loss of hearing, stiff neck.",medFind:[Ke[23]],ancillaryFind:[{type:"refer",modifier:"Dental if history of teeth grinding"}]}},{type:"lim",ddx:["Eustachian Tube Dysfunction"],text:"No scuba diving"}],next:null,selectAll:!1},{text:"No",disposition:[{...me[4],modifier:"Screen Cold Sx. Sore Throat if Present"}],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:null,selectAll:!1}]}]},{id:"A-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Vital Signs"},{text:"Shortness of Breath"},{text:"Stiff Neck"},{text:"Altered Mental Status"},{text:"Coughing up blood clots or frank blood"}],answerOptions:[]},{text:"Are red flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["respiratory compromise","meningitis","sepsis","bleeding within lungs"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Shortness of breath and abnormal pulse oxygenation suggest respiratory compromise. The soldier should be immediately started on oxygen pending further evaluation. Fever with a stiff neck suggests meningitis. Quick Sequential (sepsis-related) Organ Failure Assessment (qSOFA) is comprised of a respiratory rate greater than 21, systolic blood pressure less than 101, and Glasgow coma scale less than 15. Coughing up blood clots or quarter sized amounts of blood can be a sign of bleeding within the lungs."},{type:"dmp",ddx:["sinusitis"],text:"Soldier with an ongoing productive cough may be contagious and needs to be evaluated for quarters. Viral symptoms that are improving and then get worse or onset of severe pain over the cheekbones/back upper teeth (sinuses) can be a sign of a sinus problem requiring prescription medications."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Productive cough"},{text:"Symptoms > 7 days"},{text:"Severe sinus or dental pain"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"place mask"}],decisionMaking:[{type:"dmp",ddx:["pneumonia","sinusitis"],text:"Soldier with an ongoing productive cough may be contagious and needs to be evaluated for quarters. Viral symptoms that are improving and then get worse or onset of severe pain over the cheekbones/back upper teeth (sinuses) can be a sign of a sinus problem requiring prescription medications."}],next:null,selectAll:!0},{text:"No",disposition:[],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Symptoms > 7 days"},{text:"Rebound symptoms"},{text:"Purulent discharge"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"place mask"}],decisionMaking:[{type:"dmp",ddx:["retained foreign body","infectious process"],text:"Purulent material is thick, yellow/greenish, foul smelling nasal discharge. Purulent discharge can be a sign of an infection or a retained foreign body in the nose."},{type:"dmp",ddx:["infectious process"],text:"If symptoms have been going on for over seven days, evaluate for a bacterial infection."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["upper respiratory infection"],text:"Most upper respiratory tract infection symptoms which include sore throat and ear pain are caused by a virus or allergies and do not require antibiotics. Minor-care is focused on improving the symptoms that the Soldier is having while the issue resolves on its own.",assocMcp:{text:"Counsel the Soldier to drink plenty of fluids, get plenty of rest, and to cover their mouth when coughing and wash their hands to prevent spread. Stop or limit smoking. Ibuprofen for pain, Acetaminophen for elevated temperature, decongestant for nasal congestion, guaifenesin for mucous, or antihistamine for allergies. Return if it does not improve in 7 days, worsening symptoms, develop sinus pain, lightheaded, neck pain, or fever.",medFind:[{...Ke[23]},{...Ke[0]},{...Ke[32]},{...Ke[20]}],specLim:["Consider quarters/ contagious precautions while febrile"]}}],next:null,selectAll:!1}]}]},{id:"A-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Altered Mental Status"},{text:"Focal Neurological Symptom or Sign"},{text:"Dizziness"}],answerOptions:[]},{text:"Are red flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Altered mental status is a sign of a more serious underlying problem. Ear trauma can also result in a concussion that needs to be evaluated further. Focal neurological symptom/sign require further evaluation."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Ringing > 24 hours"},{text:"Ringing without MOI"},{text:"Dizziness"},{text:"Visual Trauma"},{text:"Decreased hearing"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["inner ear pathology"],text:"Ringing greater than 24 hours or related to an event requires further evaluation. Vertigo or room-spinning dizziness can be a symptom of inner ear problems and is often associated with nausea. Distinguish vertigo from light-headedness which is screened separately."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Loud noise exposure or trauma within 24 hours"},{text:"Ear drainage"},{text:"Ear pain"}],answerOptions:[{text:"Yes",disposition:[],next:[4,5],selectAll:!0},{text:"No",disposition:[],next:6,selectAll:!1}]},{text:"Perform an otoscope exam (both ears).",type:"action",questionOptions:[],answerOptions:[]},{text:"Are any of the following present?",type:"choice",questionOptions:[{text:"TM opacification"},{text:"immobility"},{text:"rupture"},{text:"Ear canal foreign body"},{text:"wax buildup"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Ear irrigation if wax and TM intact"}],decisionMaking:[{type:"dmp",ddx:["TM rupture","inner ear pathology","foreign body","excessive wax"],text:"Trauma and blast injuries can result in Tympanic Membrane or inner ear problems. Foreign body or excessive wax within the ear canal can result in reversible hearing loss. If excessive wax is present, discuss removal with supervisor.",ancillaryFind:[{type:"protocol",modifier:"Ear irrigation"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:5,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Ear pain"},{text:"Cold symptoms"}],answerOptions:[{text:"Yes",disposition:[{...me[3],text:"Rescreen as Ear Pain, Cold Symptoms"}],decisionMaking:[{type:"dmp",text:"If the ringing noise is an associated symptom of a cold or flu, it should be screened by the protocol that addresses that primary complaint."},{type:"dmp",ddx:["loud noise exposure"],text:"Ringing in the ears, if without loss of balance, is not uncommon especially following recent exposure to loud noises from situations such as weapons firing or riding in mechanized vehicles or aircraft. Generally, the ringing in the ears associated with such noises subsides within 24 hours, but may persist in persons who have long histories of exposure."},{type:"dmp",ddx:["tinnitus"],text:"Further examination is indicated in the absence of exposure to excessive noise or for symptoms lasting longer than 24 hours."},{type:"dmp",ddx:["hearing loss","otosclerosis"],text:"Ringing in the ears, if without loss of balance, can be associated with certain medications such as aspirin, nonsteroidal anti-inflammatory agents, some diuretics, etc. It is also important to check for hearing on the follow-up visit."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["loud noise exposure"],text:"Tinnitus due to recent noise exposure should show improvement over the next 24 hours. Stress the importance of utilizing correct fitting hearing protection. Instruct the Soldier to return for medical assistance if ringing does not improve or if dizziness, ear pain, or hearing loss develops. Temporary sensation of hearing loss can be due to colds or ear infections. Soldiers with upper respiratory infection symptoms should be screened according to those protocols.",assocMcp:{text:"Ringing sound after exposure to excessive noise exposure should resolve within 24 hours. Return to clinic if the ringing does not resolve after 24 hours. Return if associated with dizziness (spinning sensation) or worsening symptoms",medFind:[],specLim:["Avoid loud noise exposure x 48 hours"]}}],next:null,selectAll:!1}]}]},{id:"A-5",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Airway Compromise"},{text:"Orthostatic Hypotension"},{text:"Bleeding from Gums"},{text:"Inability to Move Eye"}],answerOptions:[]},{text:"Stop the bleeding using the following methods:",type:"action",questionOptions:[{text:"Tilt head forwards"},{text:"Blow nose gently"},{text:"Give 2 sprays of Oxymetazoline (Afrin)"},{text:"Pinch nose for five minutes with index finger and thumb"}],answerOptions:[]},{text:"Is the bleeding Controlled?",type:"initial",questionOptions:[],answerOptions:[{text:"No",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["volume depletion","mucosal trauma","posterior nosebleed"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Orthostatic hypotension is a sign of volume depletion and can represent a significant amount of blood loss. Nosebleeds normally result from the rupture of small blood vessels inside the nose related to mucosal trauma (nose picking) or irritation (dry climate, blowing nose). 90% occur in the front of septum in the nose and can be controlled by applying external pressure. If the bleeding does not stop, then the nosebleed likely is coming from the back of the nose and needs to be controlled by a privileged provider."}],next:null,selectAll:!0},{text:"Yes",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Cut or deformity"},{text:"Patient is on anticoagulants"},{text:"Patient is using intra-nasal medication"},{text:"Patient has high blood pressure ( > 140/80)"},{text:"Purulent discharge present"},{text:"Recurrent bleed w/o cold"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["nasal trauma"],text:"Soldiers who have had trauma to the nose with an associated nosebleed require further screening."},{type:"dmp",ddx:["nasal trauma"],text:"A misaligned broken nose can affect the upper airway and increase the risk of future sinus infections. Other injuries can be associated with the force that caused the trauma and nosebleed."},{type:"dmp",ddx:["coagulopathy"],text:"Nosebleed while on anticoagulants can make it more difficult to stop a nosebleed and be a sign that the anticoagulation level is too high."},{type:"dmp",ddx:["retained foreign body","infection"],text:"Purulent discharge can be related to a retained foreign body or a concurrent infection that requires additional treatment."},{type:"dmp",ddx:["coagulopathy"],text:"Recurrent nosebleeds not associated with a cold can be a sign of a bleeding disorder."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:4,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Current cold or cold symptoms"},{text:"Runny nose"},{text:"Allergy symptoms"}],answerOptions:[{text:"Yes",disposition:[{...me[3],text:"Rescreen as Cold symptoms"}],decisionMaking:[{type:"dmp",ddx:["viral infection","nose picking","allergies"],text:"Cold symptoms often result in nosebleeds from recurrent blowing of the nose, rubbing the nose with a tissue after blowing it, picking the nose from congestion, and prominent blood vessels from allergies or inflammation."},{type:"dmp",text:"Soldiers with symptoms of runny nose, congestion, or allergies should be screened with the cold symptoms protocol."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["nosebleed"],text:"MCP Nosebleed. Once the bleeding is controlled, tell the Soldier to avoid vigorous blowing of the nose. If the room air is dry a humidifier or vaporizer often helps. Instruct the Soldier to return for medical assistance if the bleeding recurs and is not able to be controlled with tilting the head forward and applying external pressure with the thumb and index finger for 5 minutes or if the amount of blood lost at one time is enough to soak a wash cloth (ask the Soldier to bring in his wash cloth). Saline nasal spray can be used to prevent future nosebleeds if the air is dry after the initial nosebleed has resolved. Decongestant (Oxymetazoline) can be used to constrict the blood vessels.",assocMcp:{text:"Do not blow the nose vigorously or wipe the middle of the nose, as it can cause a nosebleed. Medications: nasal saline for prevention if the air is dry, oxymetazoline if recurrent with nasal sx. Humidifier can also be used if the air is dry. Return if unable to get a recurrent nosebleed to stop, notice bleeding from other sites, feeling lightheaded or tired, losing a significant amount of blood, or recurrent without common cold sx.",medFind:[{...Ke[32]}],specLim:[]}}],next:null,selectAll:!1}]}]},{id:"B-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Fever"},{text:"Saddle Anesthesia"},{text:"Urinary Retention/Incontinence"},{text:"Fecal Incontinence"},{text:"Motor Deficits"},{text:"Trauma with Vertebral Tenderness or Neuropathy"},{text:"Dysuria/Frequency"},{text:"Chest/Abdominal Pain"}],answerOptions:[]},{text:"Are red flags present or is there significant MOI?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."},{type:"dmp",text:"A focused history and physical exam is essential to localizing a Soldiers complaint of back pain and identifying its source. The HPI should include an OPQRST evaluation of the complaint and the ROS should specifically address red flag symptoms as well as questions related but not limited to infection, trauma, cardiopulmonary, gastrointestinal, and genitourinary, or gynecological complaints."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Are there radicular symptoms below the knee",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if available"}],decisionMaking:[{type:"dmp",ddx:["acute back pain","nerve impingement"],text:"Back pain associated with pain, numbness, or tingling running down into the legs may represent central or peripheral nerve impingement and requires further evaluation. Refer to a physical therapist if direct referral is available locally.",ancillaryFind:[{type:"refer",modifier:"physical therapy if available"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["strain","sprain","obesity"],text:"LBP is extremely common in Soldiers. The best treatment is conservative measures including a home exercise program for mobilization and strengthening, ice and heat as needed for inflammation, and pain control with analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Follow established local protocols for home exercise that focus on stretching the lower back and hamstrings multiple times per day, strengthening the core muscles daily, and pain control as needed. Often obesity is a factor in low back pain and Soldiers should be encouraged to lose weight. Instruct the Soldier to seek medical assistance if pain becomes severe enough to prevent performance of normal duties/activities, worsening of other symptoms, symptoms last longer than one week. If direct access to physical therapy (physical therapy sick call) is available, consider direct referral to physical therapy in accordance with local policy.",assocMcp:{type:"mcp",text:"Provide home exercise program, activity modification as appropriate. Intermittent ice or heat IAW local protocol for inflammation. Medication: analgesic balm for mild pain, Ibuprofen (1st line) and Ketorolac (2nd line) for moderate pain as needed. Refer to PT if direct access is available. Follow-up: Immediate follow-up for a DP1 or DP2 symptoms. Routine follow-up is recommended for any symptoms that do not improve or worsen",medFind:[{...Ke[28]},{...Ke[23]},{...Ke[24]}],ancillaryFind:[{type:"refer",modifier:"physical therapy if direct access available"}],specLim:["No repetitive bending or lifting but may lift/ carry up to 40lbs.","Perform stretching, core strengthening home regiment during PT.","No ruck marching, running, or jumping but may walk, bike, or swim for cardio"]}}],next:null,selectAll:!1}]}]},{id:"B-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Bony step off/midline tenderness to palpation"},{text:"Inability to flex neck"},{text:"Fever"},{text:"Recent HEENT or dental infection"}],answerOptions:[]},{text:"Red flags or significant MOI?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["vertebral fracture"],text:"Bony step off and midline tenderness can be signs of a vertebral fracture."},{type:"dmp",ddx:["meningitis","vertebral fracture"],text:"Inability to flex the neck can be a sign of meningitis or fracture. "},{type:"dmp",ddx:["infection"],text:"Recent head, eyes, ears, nose, and throat (HEENT) or dental infection can have progressed to a more serious infection."},{type:"dmp",text:"Action 1. In the setting of trauma, immobilize the head and neck and support ABCs as required, then transfer care to a privileged provider"}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Are any of the following present?",type:"choice",questionOptions:[{text:"Radiating pain"},{text:"Numbness"},{text:"Tingling"},{text:"Weakness"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if available"}],decisionMaking:[{type:"dmp",ddx:["nerve impingement"],text:"Neck pain associated with pain, numbness, or tingling running down into the shoulder or arms may represent central or peripheral nerve impingement and requires further evaluation. Refer to physical therapy if direct referral is available locally.",ancillaryFind:[{type:"refer",modifier:"phyisical therapy if available"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["sprain","strain"],text:"MCP. Neck pain is extremely common in Soldiers. The best treatment is conservative measures including a home exercise program for mobilization and strengthening, ice and heat as needed for inflammation, and pain as needed. A temporary profile may be required. Instruct the Soldier to work the neck through its range of motion at least twice each day to preserve mobility. This should ideally be done after a 20-minute application of ice. The range of motion exercise should not be vigorous enough to cause pain. Follow established local protocols for home exercise. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Instruct the Soldier to seek medical assistance if pain becomes severe enough to prevent performance of normal duties/activities, worsening of other symptoms, symptoms last longer than one week. If direct access to physical therapy (physical therapy sick call) is available,",assocMcp:{text:"Provide home exercise program. Activity modification as appropriate. Intermittent ice or heat as needed for inflammation. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain as needed. Refer to PT if direct access is available. Follow-up: Immediate follow-up for a DP1 or DP2 symptoms.  Routine follow-up is recommended for any symptoms that do not improve or worsen",medFind:[{...Ke[28]},{...Ke[23]},{...Ke[24]}],ancillaryFind:[{type:"refer",modifier:"physical therapy if available"}],specLim:["No rucking or jumping.","Consider limiting Kevlar use.","Restrict driving if limited ROM.","Perform stretching, core strengthening home regiment during PT"]}}],next:null,selectAll:!1}]}]},{id:"B-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Distal Pulses Abnormal"},{text:"Distal Sensation Abnormal"},{text:"Deformity"},{text:"Cardiac Symptoms"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"The shoulder is red/warm"},{text:"Abdominal symptoms"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Immobilize the injured extremity before transport or referral"}],decisionMaking:[{type:"dmp",ddx:["dislocation","fracture","myocardial infarction"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Abnormal distal pulse or sensation in the setting of trauma is a medical emergency require immediate evaluation. Deformity can be a dislocated shoulder or fracture. Myocardial infarction can be associated with shoulder pain."},{type:"dmp",ddx:["myocardial infarction","infection","extrinsic cause"],text:"The red flags indicate a medical emergency. Immobilize the affected extremity prior to transport if associated with trauma. Immediately refer shoulder pain associated with cardiac symptoms (sweating, shortness of breath, chest or jaw pain/ pressure). A red, warm, swollen joint or pain with fever can be a sign of an infected joint requiring immediate surgical evaluation. Abdominal symptoms suggest an extrinsic cause requiring evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Symptoms > 3 weeks"},{text:"Neurologic symptoms"},{text:"Limited motion"},{text:"Laceration"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if available",modifier:"Sling the injured extremity for comfort before transport or referral"}],decisionMaking:[{type:"dmp",ddx:["nerve impingement","fracture"],text:"Neurologic symptoms (numbness, weakness) suggest nerve impingement. Limited motion suggests a more significant injury that should be placed in a sling and require further evaluation. Laceration may require closure.",ancillaryFind:[{type:"refer",modifier:"physical therapy if available"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["sprain","strain"],text:'The best treatment is conservative measures including a home exercise program for mobilization and strengthening and analgesics as needed. A temporary profile may be required. Instruct the Soldier to work the injured shoulder through its range of motion (but not vigorous enough to cause pain) at least twice each day to preserve mobility after a 20-minute application of ice. Follow established local protocols for home exercise. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Instruct the Soldier to seek medical assistance if pain becomes severe enough to prevent performance of normal duties/activities, worsening of other symptoms, symptoms last longer than one week.", "Refer to PT if direct access to physical therapy (physical therapy sick call) is available, in accordance with local policy.',assocMcp:{text:'Provide home exercise program. Activity modification as appropriate", "Intermittent ice or heat for inflammation", "Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain as needed", "Refer to PT if direct access is available", "Follow-up: Immediate follow-up for a DP1 or DP2 symptoms. Routine follow-up is recommended for any symptoms that do not improve or worsen.',medFind:[{...Ke[28]},{...Ke[23]},{...Ke[24]}],ancillaryFind:[{type:"refer",modifier:"physical therapy if available"}],specLim:["May lift, push, pull up to 5 lbs.","No overhead lifting or repetitive activities.","Perform stretching, core strengthening home regiment during PT"]}}],next:null,selectAll:!1}]}]},{id:"B-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Distal Pulses Abnormal"},{text:"Distal Sensation Abnormal"},{text:"Deformity"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"The elbow is red/warm"},{text:"Diffuse Pain"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Abnormal distal pulse or sensation in the setting of trauma is a medical emergency requiring immediate evaluation."},{type:"dmp",ddx:["fracture","dislocation","infection","systemic cause"],text:"Immobilize the affected extremity prior to transport if associated with trauma. A red, warm, swollen joint or pain with fever can be a sign of an infected joint requiring immediate surgical evaluation. Diffuse pain that involves multiple joints or muscles may represent a systemic cause and requires further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Limited ROM"},{text:"Neck, Shoulder Sx"},{text:"Sx > 2 weeks"},{text:"Ulnar Hand Sx"},{text:"Swelling"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if available"}],decisionMaking:[{type:"dmp",ddx:["joint pathology","nerve impingement"],text:"Limited ROM and swelling may represent an issue within the joint requiring further evaluation. Neck and shoulder issues may refer pain to the elbow. Ulnar nerve pain may be referred to the ulnar side of the forearm, hand, pinky, and ring finger area."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["sprain","strain"],text:"The best treatment is conservative measures including a home exercise program for mobilization and strengthening and analgesics as needed. A temporary profile may be required. Instruct the Soldier to work the injured elbow through its range of motion at least twice each day to preserve mobility. This should ideally be done after a 20-minute application of ice. The range of motion exercise should not be vigorous enough to cause pain. Follow established local protocols for home exercise. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Instruct the Soldier to seek medical assistance if pain becomes severe enough to prevent performance of normal duties/activities, worsening of other symptoms, symptoms last longer than one week. If direct access to physical therapy (physical therapy sick call) is available, consider direct referral to physical therapy in accordance with local policy.",assocMcp:{text:"Provide home exercise program. Activity modification as appropriate. Intermittent ice or heat for inflammation. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain as needed. Refer to PT if direct access is available. Follow-up: Immediate follow-up for a DP1 or DP2 symptoms. Routine follow-up is recommended for any symptoms that do not improve or worsen.",medFind:[{...Ke[28]},{...Ke[23]},{...Ke[24]}],ancillaryFind:[{type:"refer",modifier:"phyisical therapy if available"}],specLim:["May lift, push, pull up to 5 lbs.","No repetitive bending of elbow or turning/ bending of wrist.","Perform stretching, core strengthening home regiment during PT"]}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"B-5",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Distal Pulses Abnormal"},{text:"Distal Sensation Abnormal"},{text:"Deformity"},{text:"Open Fracture"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags Present"},{text:"Red/warm"},{text:"Trauma/ FOOSH"},{text:"No MOI"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"immobilize the injured extremity before transport or referral"}],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Abnormal distal pulse or sensation in the setting of trauma is a medical emergency requiring immediate evaluation."},{type:"dmp",ddx:["fracture","dislocation","septic joint","rheumatoid arthritis","lyme disease"],text:"In the setting of trauma, the red flags are an indicator of a medical emergency. Immobilize the affected extremity prior to transport. A red, warm, swollen joint or pain with fever can be a sign of an infected joint requiring immediate surgical evaluation. Trauma and pain without recent trauma or overuse injury may represent a systemic problem to include rheumatoid arthritis or Lyme disease.",ancillaryFind:[{type:"protocol",modifier:"immobilize affected extremity prior to transport"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Index, thumb sx"},{text:"Clicking/popping"},{text:"Mobile mass over tendon"},{text:"Laceration"},{text:"Inability to do job"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT/OT if available"}],decisionMaking:[{type:"dmp",ddx:["carpal tunnel syndrome","tendon instability","ganglion"],text:"Index finger or thumb numbness, pain, or weakness are symptoms of carpal tunnel syndrome. Clicking or popping with pain can be a sign of tendon instability. Ganglion is a mobile mass over a tendon that can be referred for drainage and treatment.",ancillaryFind:[{type:"refer",modifier:"PT/OT if available"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["sprain","overuse","strain"],text:"the best treatment is conservative measures including a home exercise program for mobilization and strengthening and analgesics as needed. Instruct the Soldier to work the injured wrist through its range of motion (but not vigorous enough to cause pain) at least twice each day to preserve mobility after a 20-minute application of ice. Follow established local protocols for home exercise. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Instruct the Soldier to seek medical assistance if pain becomes severe enough to prevent performance of normal duties/activities, worsening of other symptoms, symptoms last longer than one week. If direct access to physical therapy (physical therapy sick call) / occupational therapy is available, consider direct referral to physical therapy / occupational therapy in accordance with local policy.",assocMcp:{type:"mcp",text:"provide home exercise program, activity modification as appropriate. Intermittent ice or heat for inflammation. medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain as needed. Refer to PT/OT if direct access is available. Follow-up immediate follow-up for DP1 or DP2 symptoms. Routine follow-up is recommended for any symptoms that do not improve or worsen.",medFind:[Ke[23],Ke[24],Ke[28]],ancillaryFind:[{type:"refer",modifier:"PT/OT if direct access available"}],specLim:["may lift, push, pull up to 5 lbs.","may wrap or wear a brace for comfort","no repetitive bending of wrist","perform stretching, core strengthening, home regiment during PT/OT"]}}],next:null,selectAll:!1}]}]},{id:"B-6",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Capillary Refill"},{text:"Abnormal Distal Sensation"},{text:"Palmar Infection"},{text:"Deformity"},{text:"Significant Burn"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Crush Injury"},{text:"History of Punching"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Abnormal distal pulse or sensation in the setting of trauma is a medical emergency requiring immediate evaluation. Significant burns of the hands are considered high risk and should be evaluated for referral to a burn center."},{type:"dmp",text:"The red flags are an indication of a medical emergency. In the setting of trauma, immobilize the affected extremity prior to transport. Crush injuries and history of punching something are common causes of fractures requiring further evaluation."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Finger catching/locking"},{text:"Laceration"},{text:"Ulcers"},{text:"Abscess"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if appropriate"}],decisionMaking:[{type:"dmp",ddx:["trigger finger","herptic whitlow","laceration","abscess"],text:"Finger catching or locking during flexion may represent trigger finger. Ulcers can represent herpetic whitlow (herpes infection). Lacerations and abscesses require further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["Paronychia"],text:"Instruct the Soldier to soak the finger in warm water for 10-15 minutes three times per day and apply topical antibiotic cream after each soak. Ibuprofen (1st line) or acetaminophen (2nd line) can be provided as needed for pain. Ketorolac (3rd line) can be used once on presentation if needed for moderate pain. Return if worsening, increasing redness, abscess formation, not improving in two days. ",assocMcp:{text:"10-15min warm soaks 3 times per day and topical antibiotic cream after each soak. Ibuprofen (1st line) or acetaminophen (2nd line) as needed for pain. Ketorolac (3rd line) can be used once on presentation for moderate pain. Return if worsening, spreading redness, abscess formation, not improving in 2 days.",medFind:[{...Ke[23]},{...Ke[0]},{...Ke[24]}],specLim:["Keep area clean and dry"]}},{type:"dmp",ddx:["Sprain"],text:"Anatomically splint the finger to the adjacent finger with tape. Instruct the Soldier on activity modification as appropriate. Instruct the Soldier on the intermittent use of ice for swelling, ibuprofen (1st line) or acetaminophen (2nd line) as needed for pain. Ketorolac (3rd line) can be used once on presentation if needed for moderate pain. Return to clinic if the symptoms are getting worse, pain becomes severe enough to prevent performance of normal duties/activities, or improvement is not seen within one week.",assocMcp:{text:"Activity modification as appropriate, Intermittent ice for swelling, ibuprofen (1st line) or acetaminophen (2nd line) as needed for pain. Splint to adjacent finger. Return if worsening or not improving.",medFind:[{...Ke[23]},{...Ke[0]},{...Ke[24]}],specLim:["May Lift, push, pull up to 5 lbs.","May tape or brace comfort.","No contact sports"]}}],next:null,selectAll:!1}]}]},{id:"B-7",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal PMS"},{text:"Deformity"},{text:"High Energy Trauma"},{text:"Suspect Stress Fracture (increased with weight bearing or during exercise, endurance training, change in exercise routine)"},{text:"Severe Pain"}],answerOptions:[]},{text:"Red Flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[0],text:"Provider Now, BSI Policy",modifier:"mmobilize the hip or femur as indicated if associated with trauma. Stress injury: crutches (toe touch)"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Abnormal distal pulse or sensation in the setting of trauma is a medical emergency requiring immediate evaluation."},{type:"dmp",ddx:["hip fracture","stress injury"],text:"Significant force of trauma to include car accident can cause a hip fracture. Immobilize the affected extremity prior to transport. Pain with weight bearing or starts after a certain point during exercise can be a sign of a stress injury. Increase in exercise, long endurance training, or recent modification to training can be risk factors of a stress injury. Place the Soldier on crutches with toe touch weight bearing until a bone stress injury is ruled out.",ancillaryFind:[{type:"protocol",modifier:"crutches, toe touch weight bearing"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Paresthesia"},{text:"Not worse with direct pressure, hip flexion"},{text:"Limited ROM"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if available"}],decisionMaking:[{type:"dmp",ddx:["nerve entrapment","abdominal pathology","testicular pathology","inguinal hernia"],text:"Lateral hip pain with paresthesia is the classic presentation for lateral femoral cutaneous nerve entrapment. Abdominal pathology, testicular pathology, inguinal hernia may present with anterior hip pain that is not worse with palpation, flexion, or weight bearing."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["strain","sprain"],text:"The best treatment is conservative measures including a home exercise program for mobilization and strengthening and analgesics as needed. Instruct the Soldier to work the injured wrist through its range of motion (but not vigorous enough to cause pain) at least twice each day to preserve mobility after a 20-minute application of ice. Follow established local protocols for home exercise. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Instruct the Soldier to seek medical assistance if pain becomes severe enough to prevent performance of normal duties/activities, pain with weight bearing or exercise develops, worsening of symptoms, symptoms last longer than 3 days. If direct access to physical therapy (physical therapy sick call) is available, consider direct referral to physical therapy in accordance with local policy.",assocMcp:{type:"mcp",text:"Provide home exercise program. Activity modification as appropriate. Intermittent ice or heat for inflammation. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain as needed. Refer to PT if direct access is available",medFind:[],ancillaryFind:[{type:"refer",modifier:"physical therapy sick call if available"}],specLim:["No running, jumping but may walk up to  mile at own pace/ distance and stand up to 20min","May Lift, carry, push, pull up to 25 lbs","No repetitive lifting from floor","Perform stretching, core strengthening home regiment during PT"]}}],next:null,selectAll:!1}]}]},{id:"B-8",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal PMS"},{text:"Deformity"},{text:"High Energy Trauma"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags present"},{text:"Red/ warm"},{text:"Immediate swelling after trauma"},{text:"No MOI"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Immobilize the injured extremity before transport"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."},{type:"dmp",ddx:["fracture","infection","hemarthrosis","inflammatory condition"],text:"In the setting of trauma, deformity with loss of peripheral pulses or sensation is an indication of a medical emergency. High energy trauma to include car accident, skiing injury, or fall from a height should be assumed to have a serious injury until ruled out. Immobilize the affected extremity prior to transport. Red, warm joint could represent inflammation or infection. Swelling immediately after a traumatic event can be a sign of bleeding into the knee joint. Closer the pain and swelling are related to the traumatic event, the more likely there is a significant injury. Lack of an identifiable cause or relation to activity suggests an inflammatory cause that requires further evaluation."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Swelling"},{text:"Decreased ROM"},{text:"Previous knee injury"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[{...me[1],text:"AEM Now, PT if available"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"B-9",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Distal Pulse"},{text:"Abnormal Sensation"},{text:"Deformity"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags present"},{text:"Calf squeeze"},{text:"Unrelated to overuse or injury"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"immobilize the injured extremity before transport"}],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."},{type:"dmp",ddx:["fracture","dislocation","achilles tendon rupture"],text:"In the setting of trauma, deformity with loss of peripheral pulses or sensation is an indication of a medical emergency. Immobilize the affected extremity prior to transport. If posterior ankle pain, have the Soldier lie on his or her stomach and squeeze the calf. The test is positive if the foot does not plantar flex with squeezing the calf indicative of a possible Achilles tendon rupture. Pain unrelated to overuse or injury could be an inflammatory process requiring further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Ottowa test"},{text:"Squeeze Test"},{text:"Medial injury"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["fracture","contusion"],text:"Ottawa rules are a way of screening for the likelihood of a fracture associated with an ankle sprain. Inability to bear weight after and take four steps, tenderness over the posterior tip of the medial or lateral malleolus, or tenderness at the proximal metatarsal are signs of a potential fracture. Squeeze test evaluates for syndesmotic sprain by compressing the fibula against the tibia at the mid-calf.",ancillaryFind:[{type:"protocol",modifier:"Ottawa ankle rules"},{type:"rad",modifier:"x-ray"}]}],disposition:[{...me[1],text:"AEM Now, PT if available",modifier:"x-ray, crutches, and PT education"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["strain","sprain","contusion"],text:"the best treatment is conservative measures including a home exercise program for mobilization and strengthening and analgesics as needed. Instruct the Soldier to work the injured ankle through its range of motion at least three times each day to increase mobility. This should ideally be done after a 20-minute application of ice. The range of motion exercise should not be vigorous enough to cause pain. Follow established local protocols for home exercise. Medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain. Instruct the Soldier to seek medical assistance if pain becomes severe enough as to prevent performance of normal duties/activities, worsening, not improving within one week. If direct access to physical therapy (Physical Therapy sick call) is available, consider direct referral to physical therapy in accordance with local policy.",assocMcp:{type:"mcp",text:"provide home exercise program and wrap the ankle and activity modification as appropriate. intermittent ice or heat for inflammation. elevate for swelling. medication: analgesic balm for mild pain, ibuprofen (1st line) and ketorolac (2nd line) for moderate pain as needed. Refer to PT if direct access is available. Follow-up: immediate follow-up for DP1 or DP2 symptoms. Return to clinic if worsening or not improving within 1 week.",medFind:[Ke[28],Ke[23],Ke[24]],ancillaryFind:[{type:"refer",modifier:"PT if direct access available"}],specLim:["no running, jumping, rucking but may walk up to 1/4 mile at own pace/distance and stand up to 20min","may lift, carry up to 25 lbs.","limit walking over uneven terrain","perform stretching, strengthening home regiment during PT","may wear brace or wrap"]}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"B-10",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Distal Pulse"},{text:"Abnormal Sensation"},{text:"Deformity"},{text:"Suspect Stress Fracture (increased with weight bearing or during exercise, endurance training, change in exercise routine)"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags present"},{text:"Constant pain"},{text:"Unrelated to overuse or injury"}],answerOptions:[{text:"Yes",disposition:[{...me[0],text:"Provider Now. Bone Stress Injury (BSI) policy",modifier:"immobilize the injured extremity before transport"}],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."},{type:"dmp",ddx:[],text:"In the setting of trauma, deformity with loss of peripheral pulses or sensation is an indication of a medical emergency. Immobilize the affected extremity prior to transport. Constant pain can be a sign of a more serious injury. Unrelated to overuse or injury can be a sign of inflammation requiring further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Numbness"},{text:"Red and warm"},{text:"Abscess"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"AEM Now, PT if appropriate"}],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:null,selectAll:!1}]}]},{id:"B-11",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Distal Pulse"},{text:"Abnormal Sensation"},{text:"Deformity"},{text:"Cola Colored Urine"},{text:"Inability to Urinate"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags present"},{text:"Severe pain"},{text:"Suspect stress fracture"},{text:"Swelling, erythema"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[{...me[0],text:"Provider Now",modifier:"BSI Policy"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Abnormal joint function, limited range of motion or loss of strength"},{text:"Laceration"},{text:"Pain > 1 week"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[{...me[1],text:"AEM Now, PT if available",modifier:"[ACT2 PLACEHOLDER]"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"C-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Vomiting Blood or Coffee Grinds, Melena"},{text:"Neurologic Symptoms"},{text:"Chest Pain"},{text:"Abdominal Pain followed by Nausea"},{text:"Abdominal Distension"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["intestinal bleed","increased intracranial pressure","myocardial infarction"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Vomiting blood/coffee grinds and melena can be signs of an intestinal bleed. Neurologic symptoms can be a sign of increased intracranial pressure. Myocardial infarction can present with nausea."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Chemotherapy"},{text:"BMI < 18"},{text:"Diabetes"},{text:"Recent head trauma w/in 72 hrs"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["diabetes","bulimia","gastroparesis"],text:"These represent the possibility of more significant underlying medical conditions. A common side effect of chemotherapy treatment is nausea and vomiting that is sometimes difficult to control. BMI less than 18 can be a sign of an eating disorder like bulimia or another significant medical condition. Uncontrolled diabetes and gastroparesis due to diabetes can also present with nausea and vomiting."}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Greater than 72 hrs"},{text:"Signs of fluid depletion, orthostatic hypotension"},{text:"Unable to maintain oral intake"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"  Pregnancy Screen/Test"}],decisionMaking:[{type:"dmp",ddx:["fluid depletion","pregnancy"],text:"These are symptoms that are related to volume depletion. Fluid depletion is a risk of significant nausea and vomiting. If a Soldier is not able to maintain fluid intake due to his or her nausea and vomiting, then short term hospitalization has to be considered until the nausea and vomiting can be controlled. Nausea and vomiting, especially in the mornings, is a common symptom in pregnancy. If a Soldier has a positive pregnancy test or symptoms of nausea during pregnancy, she will require a longer-term plan than the minor-care protocol can accommodate.",ancillaryFind:[{type:"lab",modifier:"pregnancy test"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:[4,5],selectAll:!1}]},{text:" Pregnancy Screen/Test",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Headache (migraine)"},{text:"Heartburn"},{text:"Dizziness"},{text:"Pregnancy"},{text:"Other symptoms"}],answerOptions:[{text:"Yes",disposition:[{...me[3],text:"Screen heartburn, headache, dizziness, pregnancy, or other symptoms if present"}],decisionMaking:[{type:"dmp",ddx:["vertigo","migraines","heartburn","pregnancy"],text:"There are many other symptoms that can be associated with nausea and vomiting to include dizziness (vertigo), headaches (migraines) and heartburn. Reflux and regurgitation (return of gastric contents to hypopharynx with little effort) can be seen with heartburn and do not require treatment unless symptomatic.",ancillaryFind:[{type:"lab",modifier:"pregnancy test "}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["nausea","vomiting","viral illness"],text:"Handwashing is important to prevent spread of disease. Due to contagion risk, activity modification is important for food handlers and multiple cases or when DFAC food is suspected must be reported to the supervising NCO due to the potential of an outbreak. Diet control is very important in treating nausea and vomiting. Ice chips should be used initially. Once vomiting is controlled, advance to clear liquids (broth, fruit juice, sports drink and caffeine free soda). Start with small sips and slowly advance. Once the Soldier has been able to tolerate liquids for 24 hours, advance to a BRAT (bread, rice, apple sauce, toast) diet of simple carbohydrates. The Soldier with severe or persistent vomiting that is unable to tolerate liquids will require IV fluids. Advise the Soldier to return for medical assistance if the symptoms last more than two days, if blood appears in his vomit or in his stools, or if he becomes dizzy and/or faints upon standing. Vomiting that is severe enough to prevent the Soldier from keeping clear liquids down for 24 hours, severe abdominal pain, or worsening symptoms are also causes for a prompt return visit.",assocMcp:{type:"mcp",text:"Hand washing protocol. Special food handler precautions. Notify supervising NCO if DFAC food is suspected or multiple cases identified. Initiate a clear liquid diet with broth, sports drinks, clear non-caffeine soft drinks, fruit juice. ice chips to maintain calories and hydration. When vomiting controlled, start BRAT diet of simple carbohydrates. Return to clinic if not improved in 48 hours or any of the red flags or other symptoms develop.",specLim:["No food handling, if work in a DFAC, until symptoms have resolved x 48 hours"]}}],next:null,selectAll:!1}]}]},{id:"C-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Vomiting Blood or Coffee Grinds, Melena"},{text:"Severe abdominal pain"},{text:"Significant weight loss"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["intestinal bleed"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Nausea/ vomiting blood or coffee grinds and melena can be signs of an intestinal bleeding. Melena is a tar like stool with a very pungent odor resulting from the digestion of blood."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Recent hospital stay"},{text:"Recent antibiotics"},{text:"Bloody diarrhea"},{text:"H/O inflammatory bowel disease"},{text:"Severe abdominal pain"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["clostridium difficile infection","invasive infection","inflammatory bowel disease","ischemic colitis"],text:"Recent hospitalization and antibiotic use are risk factors for a clostridium difficile infection. Clostridium difficile infections often present with a strong odor and bloody diarrhea and can result in life threatening infections. Bloody diarrhea that is not just on the toilet paper from repetitive irritation or from a gastrointestinal bleed is likely the result of an invasive infection. Visibly bloody diarrhea could also be from inflammatory bowel disease or ischemic colitis. Severe abdominal pain as Soldier appearing in discomfort/distress including moaning, crying, bending over, trouble moving or pain rating of 8+/10."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"> 6 unformed stools in 24 hours"},{text:"Hypovolemia"},{text:"Dizziness"},{text:"3+ days"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"Severe or persistent symptoms may require the use of empiric antibiotics."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["diarrhea"],text:"Start a clear liquid diet (broth, fruit juice, sports drink, caffeine free soda) for 24 hours. Advance to a BRAT (banana, rice, apple sauce, toast) diet of simple carbohydrates next. Watch for signs of dehydration. Pepto-Bismol (1st line) may be given to the Soldier for the symptomatic control of diarrhea. Discuss with the supervising provider if antibiotics are required when considering to use Imodium (2nd line). Frequent hand washing should be used after using the bathroom and before eating. Food workers must not handle food till after symptoms have resolved. Advise the Soldier to return for medical assistance if the symptoms last more than one week, if symptoms worsen, or if he becomes dizzy and/or faints upon standing.",assocMcp:{type:"mcp",text:'Medication: bismuth subsalicylate (1st line) as needed, discuss with provider before giving Imodium (2nd line)", "Initiate a clear liquid diet with broth, sports drinks, cler non-caffeine soft drinks, fruit juice, ice chips to maintain calories and hydration. When diarrhea controlled, start BRAT diet of simple carbohydrates.',medFind:[Ke[11],Ke[26]],specLim:['No food handling, if work in a DFAC, until symptoms have resolved x 48 hours", "Must have access to a restroom within 2 minutes']}}],next:null,selectAll:!1}]}]},{id:"C-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Vitals"},{text:"Abdominal rigidity/rebound (bump chair)"},{text:"Severe pain"},{text:"Fever with jaundice and RUQ pain"},{text:"Confirmed Pregnancy"},{text:"Alcoholism"},{text:"Immunocompromised"},{text:"RLQ Pain"}],answerOptions:[]},{text:" Pregnancy Screen/ Test",type:"action",questionOptions:[],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Unstable vitals represent a significant health risk. Abdominal rigidity and rebound or significant Soldier discomfort with bumping the Soldiers stretcher/chair are signs of peritonitis and can represent a surgical abdomen. Level of pain may represent the significance of the underlying disease."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Melena"},{text:"Coffee grind emesis"},{text:"Periumbilical pain"},{text:"Abdominal trauma w/in 72 hours"},{text:"40+ years old"},{text:"Chest pain and nausea"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"Suspected melena and coffee grind emesis should be tested and referred to a privileged provider if positive"}],next:null,selectAll:!0},{text:"No",disposition:[],next:4,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Loss of appetite"},{text:"Followed by nausea"},{text:"Present for 1+ weeks"},{text:"Testicular symptoms"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["appendicitis","pancreatitis","pregnancy","abdominal trauma"],text:"Periumbilical pain that moves to the right lower quadrant (RLQ) is a sign of appendicitis. Pancreatitis and appendicitis are often associated with a loss of appetite. Women of childbearing age should have their pregnancy status verified. Abdominal pain in the setting of pregnancy or recent abdominal trauma can signify an underlying issue. Chronic abdominal pain requires further evaluation by a qualified provider. New-onset benign, functional illness in a Soldier 50 plus years old is unlikely and should be evaluated further."}],next:null,selectAll:!0},{text:"No",disposition:[],next:5,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Nausea/vomiting"},{text:"Diarrhea"},{text:"Female pelvic pain"},{text:"Constipation x 3 days"},{text:"Urinary symptoms"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["appendicitis","pancreatitis","pregnancy","abdominal trauma"],text:"Periumbilical pain that moves to the right lower quadrant (RLQ) is a sign of appendicitis. Pancreatitis and appendicitis are often associated with a loss of appetite. Women of childbearing age should have their pregnancy status verified. Abdominal pain in the setting of pregnancy or recent abdominal trauma can signify an underlying issue. Chronic abdominal pain requires further evaluation by a qualified provider. New-onset benign, functional illness in a Soldier 50 plus years old is unlikely and should be evaluated further."}],disposition:[{...me[3],text:"Screen nausea, diarrhea, pelvic pain, constipation, heartburn, urinary Sx, or other symptoms"}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["gas","constipation","stress","viral illness"],text:"After significant underlying diseases have been ruled out, many causes of abdominal pain are not identified in the acute setting. Gas pain, constipation, stress are some of the potential other causes of the pain. The pain usually resolves on its own. Initial treatment includes hydration and a well-balanced, high fiber diet to help with any potential issues with constipation. A food diary looks for potential triggers. Follow-up if symptoms worsen, red flags, new symptoms, or no improvement in three days.",assocMcp:{type:"mcp",text:"Initiate hydration with 8 glasses of water per day and a well-balanced, high fiber diet. Maintain a food diary to see if the symptoms are related to a particular food. Follow-up in 3 days if the symptoms have not resolved or earlier if symptoms worsen, new symptoms develop, or red flags become present",specLim:["No running, jumping, riding in vehicle over uneven terrain","Aerobic activity at own pace/ distance","abdominal training at own intensity/ rep"]}}],next:null,selectAll:!1}]}]},{id:"C-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Toilette FULL of Blood"},{text:"Vomiting Blood or Coffee Grinds"},{text:"Melena"},{text:"Lightheaded"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Hemocult positive, Unable to obtain stool sample"}],decisionMaking:[{type:"dmp",ddx:["instestinal bleed"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of hemodynamically significant stomach/ intestinal bleeding."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"weight loss"},{text:"Night sweats"},{text:"Family H/O early GI cancer"},{text:"Change in stool"},{text:"Mucous with stool"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["hypotension","intestinal bleed","hemorrhoid","anal fissure"],text:"Feeling lightheaded and orthostatic hypotension can be signs of significant blood loss. Hemoccult stool test can identify blood in the stool. Blood only on the outside of the stool or toilet paper is more likely to be from a hemorrhoid or anal fissure. If a stool sample cannot be obtained except by a rectal exam, then refer as Provider Now for the rectal exam. If a hemoccult stool test is not available, then Soldiers with blood on the outside of the stool or on the toilet paper only should be considered as negative. Blood mixed in with the stool should be treated as positive. If you are unsure, consider it positive.",ancillaryFind:[{type:"lab",modifier:"hemoccult stool"}]}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"H/O anal sex"},{text:"Low back problems"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["cancer","inflammatory bowel disease","invasive gastroenteritis"],text:"These are symptoms of more concerning disease processes to include cancer with a family history of colon cancer before 45 years old, inflammatory bowel disease, and invasive gastroenteritis."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["hemorrhoids","anal fissure"],text:'Hemorrhoids are enlarged veins around the rectum that protrude; get rubbed; and/or become painful from inflammation related to a small clot forming within the vein. Hemorrhoids are not dangerous but can be extremely uncomfortable. A Soldier who has a history of hemorrhoids or anal fissure and then develops similar symptoms likely has a recurrence. Soldier should be instructed on avoiding constipation since it is a common cause of hemorrhoids and anal fissures. Most people with itching (and no other symptoms) do not have a serious disease.", "MCP for hemorrhoids and anal fissures. To decrease the amount of irritation, the stool needs to be soft. Advise the Soldier to ensure adequate intake of fluids (8 glasses a day), eat foods high in fiber like bran cereal and fresh fruits and vegetables, and spend less than five minutes on the toilet at a time. Increase fiber slowly as too much fiber at once may cause stomach cramping and gas. Tell the Soldier that the area should be kept clean by washing with warm water and blotting (rather than wiping) dry. Sitting in warm water can improve healing. Polyethylene glycol (1st line) or docusate sodium (2nd line) can be used to help keep the stool soft. Hydrocortisone and pramoxine cream (3rd line) can be used if needed for inflammation and pain. Instruct the Soldier in its use and to return for evaluation if the symptoms worsen, new symptoms develop, or symptoms last longer than one week or recurs.',assocMcp:{type:"mcp",text:"",medFind:[Ke[36],Ke[15],Ke[22]]}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"C-5",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Diarrhea at night"},{text:"Iron deficiency anemia"},{text:"Vomiting"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Weight change"},{text:"Fatigue"},{text:"Temperature sensitivity"},{text:"Depression"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["hypothyroidism"],text:"These are symptoms of hypothyroidism. Soldiers that screen positive for possible hypothyroidism should be referred for further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Rectal bleeding?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[3],text:"Screen rectal bleeding or other symptoms if present"}],decisionMaking:[{type:"dmp",ddx:["internal bleed"],text:"Rectal bleeding can be a sign of significant internal bleeding that requires further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["constipation"],text:"The most important step in treating constipation is to alter the diet so that it contains plenty of fiber. Fiber is that part of food which is not absorbed into the body but instead remains in the intestines and absorbs water to form the bulk of the bowel movements. Without proper bulk, the large and small intestines cannot work properly, and this causes constipation. Fiber is present in bran cereal, whole wheat bread, fresh fruits, and vegetables. Ensure that the Soldier is taking adequate water (8 glasses a day). Laxatives can be used on a one-time basis but should not be used repeatedly because the body can become dependent on them. After the bisacodyl, use polyethylene glycol for two weeks (1st line) or docusate sodium for one week (2nd line) to prevent recurrence. Not everyone has a bowel movement every day. Bowel movements may occur as often as three times a day or once every three days and still be normal. Discomfort and a change in pattern are more reliable guides to a diagnosis of constipation. Instruct the Soldier to return for medical assistance if abdominal pain develops, if the interval between movements is three days or longer, or if blood appears in his or her stool.",assocMcp:{type:"mcp",text:"Counsel the Soldier to drink 8 glasses of water per day and eat foods that are high in fiber. Medication: bisacodyl for acute constipation followed by a polyethylene glycol for 2 weeks (1st line) or docusate sodium for 1 week (2nd line). Return to clinic for blood in stool, abdominal pain, or not having a BM for 3 days",medFind:[Ke[36],Ke[15]]}}],next:null,selectAll:!1}]}]},{id:"C-6",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Airway compromise"},{text:"Coughing, choking when swallowing"}],answerOptions:[]},{text:"Do any of the following apply",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Sudden onset during eating"},{text:"Inability to swallow (drooling)"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Include glucagon if unable to transport within 24 hours of onset"}],decisionMaking:[{type:"dmp",ddx:["airway compromise"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Airway compromise is an emergency. Coughing, choking, or nasal regurgitation when initiating a swallow is a sign of decreased ability to maintain the airway. The Soldier is at risk for aspiration."},{type:"dmp",ddx:["acute food obstruction"],text:"Most common cause of dysphagia in an adult is an acute food obstruction. It is often due to swallowing a piece of meat that has not been fully chewed. Food obstruction will present with a feeling of something stuck in the throat and decreased or inability to swallow. The obstruction must be removed promptly. Complete obstruction should undergo an emergent endoscopy. A partial obstruction should undergo endoscopy within 24 hours. The esophagus can start to ulcerate and the risk of esophageal perforation increases after 24 hours. If endoscopic evaluation/ treatment is not available within 24 hours, see the treatment protocol below.",assocMcp:{type:"mcp",text:"Do not administer meat tenderizers to Soldiers with an esophageal food impaction. It could cause serious esophageal injury. Glucagon can be administered to relax the esophagus as an initial attempt for the Soldier to spontaneously pass the food bolus when a referral for an endoscopic evaluation/ treatment is not available. Treatment must be prescribed by a supervising privileged provider.",medFind:[Ke[19]],ancillaryFind:[{type:"refer",modifier:"endoscopy"}]}}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Started before a sore throat?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"Other causes of dysphagia not related to a sore throat should be evaluated by the AEM."}],next:null,selectAll:!0},{text:"No",disposition:[{...me[3],text:"Screen sore throat or other symptoms if present"}],decisionMaking:[{type:"dmp",text:"Dysphagia frequently accompanies a severe sore throat. However, MAKE CERTAIN that dysphagia did not precede the sore throat. Causes of dysphagia not associated with a sore throat may require a more extensive evaluation."}],next:3,selectAll:!1}]}]},{id:"C-7",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Vomiting Blood or Coffee Grinds"},{text:"Melena"},{text:"Angina"},{text:"SOB"},{text:"Radiation to Back"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Oxygen, EKG, chewable aspirin"}],decisionMaking:[{type:"dmp",ddx:["myocardial infarction","bleeding ulcer","dissecting aortic aneurysm"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems. Angina (substernal chest pressure, worse with exercise), shortness of breath, tachycardia, lightheaded, sweating, shoulder or jaw pain can be signs and symptoms of a myocardial infarction. Obtain an EKG and give aspirin (if no signs of bleeding). Do not wait to provide oxygen, give aspirin, and start IV before notifying the supervising privileged provider. Vomiting blood or coffee grinds and melena are signs of a bleeding ulcer. Tearing pain that radiates to the back is a sign of a dissecting aortic aneurysm.",ancillaryFind:[{type:"med",modifier:"aspirin"},{type:"protocol",modifier:"ekg"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Tachycardia"},{text:"Sweating"},{text:"Shoulder/Jaw Pain"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Oxygen, EKG, chewable aspirin"}],decisionMaking:[{type:"dmp",ddx:["myocardial infarction","bleeding ulcer","dissecting aortic aneurysm"],text:"Oxygen, EKG, and chewable aspirin. Angina (substernal chest pressure, worse with exercise), shortness of breath, tachycardia, lightheaded, sweating, shoulder or jaw pain can be signs and symptoms of a myocardial infarction. Obtain an EKG and give aspirin (if no signs of bleeding). Do not wait to provide oxygen, give aspirin, and start IV before notifying the supervising privileged provider. Vomiting blood or coffee grinds and melena are signs of a bleeding ulcer. Tearing pain that radiates to the back is a sign of a dissecting aortic aneurysm.",ancillaryFind:[{type:"med",modifier:"aspirin"},{type:"protocol",modifier:"ekg"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"> 2 weeks"},{text:"History of ulcer"},{text:"Unexplained wt loss"},{text:"Anorexia, vomiting"},{text:"Dysphagia"},{text:"Odynophagia"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["gastritis","ulcer","cancer","pancreatitis","esophagitis","GERD"],text:"These are symptoms that suggest a more chronic condition than just heartburn. History of an ulcer suggests gastritis or another ulcer. Unexplained weight loss is a sign of cancer. Anorexia and vomiting are signs of pancreatitis. Dysphagia and odynophagia are signs of esophagitis and chronic gastroesophageal reflux disease."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[],next:4,selectAll:!1}]},{text:"Classic symptoms of heartburn?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[2]}],decisionMaking:[{type:"dmp",ddx:["GERD"],text:'It occurs due to the passage of gastric contents into the esophagus. It is a normal physiologic process that can result in brief episodes of heartburn. Overeating, tobacco, alcohol, overweight, stress, certain foods can act as triggers to increase the frequency of heartburn.", "Instruct Soldier on lifestyle modifications: weight loss if overweight, smoking cessation if indicated, and elevation of head of bed, avoidance of chocolate/caffeine/spicy foods/ alcohol/other foods that exacerbate symptoms. Ranitidine (histamine 2 receptor antagonist) as needed for symptoms. Ranitidine reaches peak of action about 2.5 hours after taking and lasts around 8 hours. Return if symptoms are not controlled with minor-care measures, new symptoms arise, or Soldier is having to take the over the counter medication more than once per week.',assocMcp:{type:"mcp",text:"*NOTE: updated clinical practice - Ranitidine is no longer used* Medication: Ranitidine as needed (up to 2 doses in 24 hours) Lifestyle modification: weight loss if indicated, smoking cessation if indicated, elevation of head of bed, avoidance of foods that make it worse. Return to clinic if any of the red flags or other symptoms develop, not improved with Minor Care Protocol, or taking ranitidine more than once per week on average.",medFind:[Ke[40]]}}],next:null,selectAll:!0},{text:"No",disposition:[{...me[3],text:"Screen other symptoms if present"}],decisionMaking:[{type:"dmp",text:"Soldier without the previous concerning symptoms and classic heartburn symptoms can be treated with over the counter medications and lifestyle changes. If other symptoms are present, he or she should be screened for those symptoms."}],next:null,selectAll:!1}]}]},{id:"D-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Cyanosis"},{text:"Ancillary muscles"},{text:"SpO2<90%"},{text:"SIRS Criteria"},{text:"Airway Swelling"},{text:"Hives"},{text:"Altered Mental Status (AMS)"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Oxygen, EKG, IV"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Start the Soldier on oxygen with non-rebreather mask at 10 Liters/ minute, start an IV and IVF at TKO and obtain EKG if available. They can be signs of significant underlying medical problems.",ancillaryFind:[{type:"med",modifier:"aspirin"},{type:"protocol",modifier:"EKG"},{type:"protocol",modifier:"IV and IVF at TKO"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"EKG",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Irregular pulse"},{text:"Sweating"},{text:"Chest, shoulder, jaw pain or pressure"},{text:"H/O or FH of heart problems"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Oxygen, EKG, Aspirin 325mg"}],decisionMaking:[{type:"dmp",ddx:["myocardial infarction","pulmonary embolism","arrhythmia"],text:"Tachycardia, sweating, pain or pressure in the chest, shoulder, or jaw can be symptoms of a myocardial infarction. Chest pain and tachycardia can also be signs of a pulmonary embolism. Irregular pulse identifies an arrhythmia. Do not wait to provide oxygen, give aspirin, and start IV before notifying the supervising privileged provider.",ancillaryFind:[{type:"med",modifier:"aspirin"},{type:"protocol",modifier:"EKG"},{type:"protocol",modifier:"Oxygen"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Elevated temperature"},{text:"Productive cough"},{text:"Symptoms > 10 days"},{text:"H/O asthma wheeze"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["pneumonia","viral illness","asthma"],text:"Screens for other medical conditions requiring further evaluation. Productive cough and elevated temperature are signs of pneumonia. Symptoms lasting longer than 10 days may not be viral. History of asthma or wheezing screens for an asthma exacerbation."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[],next:4,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Cold like symptoms"},{text:"Allergy symptoms"},{text:"H/O panic attacks"}],answerOptions:[{text:"Yes",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["cold"],text:"Counsel the Soldier to drink plenty of fluids and rest, cover their mouth when they cough and wash hands to prevent spread. Ibuprofen for pain, acetaminophen for elevated temperature, decongestant for nasal congestion, guaifenesin for mucous, or antihistamine for allergies. Return to clinic if not improving within one week, worsening symptoms, fever, new sinus pain, lightheadedness, or pain in the neck.",assocMcp:{type:"mcp",text:"Cold or allergy symptoms: A-3 Minor Care Protocol",medFind:[Ke[23],Ke[0],Ke[32],Ke[20],Ke[27]]}},{type:"dmp",ddx:["panic attack"],text:"Check EKG. If EKG is normal, initiate observed deep breathing exercises. Place a pulse oximeter on the Soldiers finger. Have the Soldier lay back at a 45 degree angle with legs uncrossed and initiate diaphragmatic breathing exercises with deep, slow inhalation over 4 seconds and exhalation over another 4 second count. If the SpO2 starts to drop, disposition the Soldier as Provider Now. Refer Soldier to Behavioral Health after initial panic attack decreases in intensity.",assocMcp:{type:"mcp",ancillaryFind:[{type:"refer",modifier:"Behavioral Health"},{type:"protocol",modifier:"EKG"}]}}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",text:"Identifies conditions that are self-limited or can be treated with a minor-care protocol."}],disposition:[me[1]],next:null,selectAll:!1}]}]},{id:"D-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Irregular Pulse"},{text:"H/O or FH of Heart Problems"},{text:"Shoulder, jaw pain or pressure"}],answerOptions:[]},{text:"EKG",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Abnormal vitals"},{text:"Abnormal EKG"},{text:"40+ years old"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["myocardial infarction","pulmonary embolism","arrhythmia"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. Start them on oxygen with a nasal cannula at four-six liters/ minute, start an IV and IVF at TKO, give a chewable aspirin. These can be signs of significant underlying medical problems., ",ancillaryFind:[{type:"protocol",modifier:"EKG"},{type:"med",modifier:"Aspirin"},{type:"protocol",modifier:"O2 nasal cannula 4-6 liters/min"},{type:"protocol",modifier:"IV / IVF TKO"}]},{type:"dmp",ddx:["myocardial infarction","pulmonary embolism","arrhythmia"],text:"Obtain an EKG if available. Tachycardia, sweating, pain, and pressure in the chest, shoulder, or jaw can be symptoms of a myocardial infarction. Note that diabetics and women can present atypically. Chest pain and tachycardia can also be signs of a pulmonary embolism or arrhythmia. Do not wait to provide oxygen, give aspirin, and start IV before notifying the supervising privileged provider.",ancillaryFind:[{type:"rad",modifier:"EKG"},{type:"med",modifier:"Aspirin"},{type:"med",modifier:"O2 nasal cannula 4-6 liters/min"},{type:"med",modifier:"IV / IVF TKO"}]}],disposition:[{...me[0],modifier:"Oxygen, EKG, Aspirin 325mg"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Productive cough >7 days"},{text:"Elevated temperature"},{text:"Symptoms > 10 days"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["pneumonia","rib fracture"],text:"Elevated temperature and productive cough screens for pneumonia. Recent chest trauma screens for multiple etiologies to include a rib fracture.",ancillaryFind:[{type:"rad",modifier:"chest x-ray"}]}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[],next:4,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Cold like symptoms"},{text:"Reproducible chest pain"},{text:"Heartburn"},{text:"H/O panic attacks"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["cold"],text:"See Protocol A-3. Must discuss with supervising privileged provider before Soldier leaves screening area.",assocMcp:{text:"Counsel the Soldier to drink plenty of fluids, get plenty of rest, and to cover their mouth when coughing and wash their hands to prevent spread. Stop or limit smoking. Ibuprofen for pain, Acetaminophen for elevated temperature, decongestant for nasal congestion, guaifenesin for mucous, or antihistamine for allergies. Return if it does not improve in 7 days, worsening symptoms, develop sinus pain, lightheaded, neck pain, or fever.",medFind:[{...Ke[23]},{...Ke[0]},{...Ke[32]},{...Ke[20]}],specLim:["Consider quarters/ contagious precautions while febrile","Aerobic training at own pace/distance x 3 days","Limit exposure to temperatures below <50 degrees F"]}},{type:"dmp",ddx:["panic attack"],text:"(chest tightness, palpitations, anxious, lightheaded): Check EKG. If EKG is normal, initiate observed deep breathing exercises. Place a pulse oximeter on the Soldiers finger. Have the Soldier lay back at a 45 degree angle with legs uncrossed and initiate diaphragmatic breathing exercises with deep, slow inhalation over 4 seconds and exhalation over another 4 second count. If the SpO2 starts to drop, disposition the Soldier as Provider Now. Refer Soldier to behavioral health after initial panic attack decreases in intensity. Must discuss with supervising privileged provider before Soldier leaves screening area",assocMcp:{type:"mcp",text:"Check EKG. Monitor pulse oximeter. Supervised deep breathing exercises. Referral to provider now if oxygenation decreases or symptoms do not resolve. Refer to behavioral health after dyspnea symptoms have resolved",ancillaryFind:[{type:"refer",modifier:"behavioral health"}],specLim:["Limit exposure to temperatures below <50 degrees F"]}},{type:"dmp",ddx:["costochondritis","Tietze Syndrome"],text:"Pain must be reproducible and directly correspond to a supporting history. Medications: ibuprofen as needed for muscle complaints. Return to clinic if pain increases, lasts longer than three days, shortness of breath/ dizziness/ or new symptoms develop. Must discuss with supervising privileged provider before Soldier leaves screening area.",assocMcp:{type:"mcp",text:"ibuprofen or acetaminophen for pain, analgesic balm for muscle/tendons. Temporary profile x 3 days if needed. Return to the clinic if pain increases, not improved in four days, shortness of breath/dizziness/or new symptoms develop.",ancillaryFind:[],specLim:["May lift, push up to 25 lbs"]}},{type:"dmp",ddx:["GERD","heartburn"],text:'Must discuss with supervising privileged provider before Soldier leaves screening area. This occurs due to the passage of gastric contents into the esophagus. It is a normal physiologic process that can result in brief episodes of heartburn. Overeating, tobacco, alcohol, overweight, stress, certain foods can act as triggers to increase the frequency of heartburn.", "Instruct Soldier on lifestyle modifications: weight loss if overweight, smoking cessation if indicated, and elevation of head of bed, avoidance of chocolate/caffeine/spicy foods/ alcohol/other foods that exacerbate symptoms. Ranitidine (histamine 2 receptor antagonist) as needed for symptoms. Ranitidine reaches peak of action about 2.5 hours after taking and lasts around 8 hours. Return if symptoms are not controlled with minor-care measures, new symptoms arise, or Soldier is having to take the over the counter medication more than once per week.',assocMcp:{type:"mcp",text:"*NOTE: updated clinical practice - Ranitidine is no longer used* Medication: Ranitidine as needed (up to 2 doses in 24 hours) Lifestyle modification: weight loss if indicated, smoking cessation if indicated, elevation of head of bed, avoidance of foods that make it worse. Return to clinic if any of the red flags or other symptoms develop, not improved with Minor Care Protocol, or taking ranitidine more than once per week on average.",medFind:[Ke[40]]}}],disposition:[me[2]],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",text:" Conditions that are not identified should be referred to the AEM for further evaluation."}],disposition:[me[1]],next:null,selectAll:!1}]}]},{id:"E-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Systemic Inflammatory Response Syndrome"},{text:"Flank Pain"},{text:"Severe Abdominal Pain"},{text:"Gross Hematuria or Passing Blood Clots"}],answerOptions:[]},{text:"  Pregnancy Test",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Fever T>100.4"},{text:"H/O diabetes"},{text:"Nausea and vomiting"},{text:"Vaginal symptoms"},{text:"Vulvar ulcer"},{text:"Pain with intercourse"},{text:"Cola colored urine"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems. "},{type:"dmp",ddx:["urinary tract infection","kidney infection","systemic infection","diabetes"],text:"Urinary tract infections can get worse if not promptly treated. Urinary tract infection can progress to a kidney infection and then a systemic infection through the blood. Uncontrolled diabetes can present with increased urination and nausea with vomiting. Complaints requiring an invasive exam are referred to the supervising privileged provider.",ancillaryFind:[{type:"lab",modifier:"urinalysis, urine culture if available"},{type:"lab",modifier:"pregnancy test"}]}],disposition:[{...me[0],modifier:"UA, urine culture if available"}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Male"},{text:"H/O kidney stones"},{text:"Pregnant"},{text:"Recent urinary catheter"},{text:"Red urine, not menstrual cycle related"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["kidney stone","recurrent urinary tract infection","atypical bacterial infection","STD","hematuria"],text:"Urinary complaints in a male are more likely to be something other than a urinary tract infection. Recurrent urinary tract infections (UTIs), recent urinary catheterization, and immunocompromised are more likely to have an atypical bacterial infection.",ancillaryFind:[{type:"lab",modifier:"urinalysis, urine culture"}]}],disposition:[{...me[1],modifier:"UA, urine culture if available"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["cystitis (urinary tract infection)"],text:"UA and urine culture should be completed if resources are available. A Soldier with symptoms consistent with a UTI can be empirically treated without a urinalysis after ruling out any history that would increase the Soldiers risk and determining any allergies to medications. Instruct the Soldier about the importance of increasing fluid intake to flush out the bacteria. OTC medication: phenazopyridine as needed for pain. Instruct the Soldier that it will likely dye his or her urine orange. It may also stain contact lenses from transferring the dye from the fingers to the contacts, if worn. Antibiotics: Trimethoprim/ Sulfamethoxazole is the first line agent. Nitrofurantoin is the second line agent if the Soldier is allergic to sulfa drugs or there is local resistance to the first line agent. Return to clinic if symptoms are not improving within 24 hours, development of new symptoms, or worsening symptoms despite treatment.",assocMcp:{type:"mcp",text:"drink 8+ glasses of water/day. Phenazopyridine as needed. Counsel on it changing urine orange and potential to dye contacts. First line agent: trimethoprim/sulfamethoxazole. if the MTF antibiotic resistance is greater than 20% or patient has sulfa allergy, use second line agent. Second line agent: nitrofurantoin, if the patient reports an allergy to nitrofurantoin. refer to AEM. Return to clinic if symptoms not improving within 24 hours, development of new symptoms, worsening symptoms ",medFind:[Ke[35],Ke[42],Ke[31]]}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"E-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Pain with testes supported"},{text:"Suspect Stress Fracture (increased with weight bearing or during exercise, endurance training, change in exercise routine)"},{text:"Severe Pain"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Nausea and vomiting"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Stress fracture: crutches with toe touching weight bearing"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["testicular torsion","hernia","stress fracture"],text:"Severe pain at rest with the testes supported can be a sign of testicular torsion or a hernia. Immediate referral is needed for further evaluation and potential treatment. Pain with standing or increasing during exercise can be a sign of a stress fracture of the hip. Change in activity or endurance training are risk factors for a stress fracture. Suspected stress fractures should be toe touch weight bearing and get immediate evaluation. Nausea and vomiting could represent severe pain or be a sign of a hernia.",ancillaryFind:[{type:"protocol",modifier:"crutches. toe touching weight bearing"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Hematuria?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["Sexually transmitted Infection","hip injury"],text:"Pain that has lasted for over 2 weeks is less likely to be an acute muscle strain and could represent an injury to the hip joint requiring further evaluation. Urologic symptoms, like hematuria, require further evaluation.",ancillaryFind:[{type:"lab",modifier:"UA, urine culture"},{type:"lab",modifier:"STD screen"}]}],disposition:[{...me[1],modifier:"STD Screen and UA"}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["epididymitis"],text:"Pain is often improved with testicular support. Instruct the Soldier on the importance of wearing supportive underwear (briefs, jock strap), application of ice to decrease the swelling. Medication: ibuprofen, acetaminophen, topical muscle balm, ice and heat as needed for pain, inflammation, and swelling or ketorolac for moderate pain.",assocMcp:{type:"mcp",text:"Intermittent ice and testicular support if improved with support Activity modification as appropriate Medication: Ibuprofen (1st line) and ketorolac (2nd line) as needed for moderate pain Provide screening, treatment, and counseling if present with urologic symptoms. RTC if worsening pain, new symptoms arise, or not improved within 1 week",medFind:[Ke[23],Ke[24]],specLim:["Walk at own pace/distance","No running, jumping, riding in military vehicle over uneven terrain","May stand for up to 15min"]}},{type:"dmp",ddx:["muscle/tendon strain"],text:"Pain is often worse with activity. Instruct the Soldier on the home exercise program in accordance with local protocol. Medication: ibuprofen, acetaminophen, topical muscle balm, ice and heat as needed for pain, inflammation, and swelling or ketorolac for moderate pain. Activity modification. Return to clinic if symptoms are not improving within 48 hours, development of new symptoms, or worsening symptoms",assocMcp:{type:"mcp",text:"Provide home exercise program, intermittent ice or heat IAW local protocol if worse with activity",medFind:[Ke[23],Ke[0],Ke[28]]}},{type:"dmp",ddx:["gonorrhea","chlamydia"],text:"Request an order for a urinalysis and gonorrhea/chlamydia urine screen. If urethral discharge is present, 2+ white blood cells (WBCs) on urinalysis, leukocyte esterase positive on urinalysis, or recent known STI exposure, treat for potential gonorrhea/chlamydia infection with ceftriaxone and azithromycin. Instruct the Soldier that the condition is contagious and to abstain from intercourse for 1 week after treatment. Notify the supervising privileged provider so that he or she can track. Refer to community health. Return to clinic if symptoms are not improving within 48 hours, development of new symptoms, or worsening symptoms.",assocMcp:{type:"mcp",text:"Provide screening. if urethral discharge is present, or recent known STI exposure, treat for potential Gonorrheal/Chlamydia infection with ceftriaxone and azithromycin. Instruct the Soldier that the condition is contagious and to abstain from intercourse for 1 week after treatment. Notify provider, Refer to community health. RTC if symptoms are not improving within 48 hours, development of new symptoms or worsening symptoms",ancillaryFind:[{type:"refer",modifier:"community health"},{type:"lab",modifier:"urinalysis"},{type:"lab",modifier:"Gonorrhea"},{type:"lab",modifier:"Chlamydia"}],medFind:[Ke[13],Ke[6]]}}],next:null,selectAll:!1}]}]},{id:"E-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Female Pelvic Pain with Intercourse"},{text:"Pregnant"},{text:"Orthostatic, Fever"}],answerOptions:[]},{text:"Draw the following labs",type:"action",questionOptions:[{text:"  Pregnancy Test"},{text:"STD Screen"},{text:"Urinalysis"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Worsening despite treatment"},{text:"Severe illness"},{text:"Vaginal symptoms"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["Testicular Torsion","Hernia","Stress Fracture","Hip Injury","STD"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["Ectopic Pregnancy","Syphilis","Gonorrhea","Chlamydia","Pelvic Inflammatory Disease","Sepsis"],text:"All Soldiers will be screened with a pregnancy test (if female), UA, and STI screen. STI screen will consist of a RPR, gonorrhea/chlamydia urine screen, and HIV screen. Pelvic pain with intercourse may be pelvic inflammatory disease. Orthostatic symptoms, fever, and signs of a severe illness can represent a more significant problem. Signs of a severe illness includes abnormal vital signs, appearing pale, sweaty, lethargic, or visually in pain. Failure of initial treatment may be a drug resistant organism. Females with vaginal symptoms to include discharge will be referred to a privileged provider for a pelvic examination.",ancillaryFind:[{type:"lab",modifier:"pregnancy test"},{type:"lab",modifier:"gonorrhea/chlamydia urine screen"},{type:"lab",modifier:"HIV screen"},{type:"lab",modifier:"Urinalysis"}]}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Skin lesion"},{text:"Rash"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["syphilis","HSV","genital warts","chancroid","molluscum contagiosum"],text:"Skin lesions/rash may represent a chancre (syphilis), HSV ulcers, genital warts (HPV), chancroid, or molluscum contagiosum. Further evaluation is necessary to determine the necessary treatment modality (freezing, medication, or referral)"}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["gonorrhea","chlamydia"],text:"Request an order for a urinalysis and gonorrhea/chlamydia urine screen. If urethral discharge is present, 2+ WBC on urinalysis, leukocyte esterase positive on urinalysis, or recent known STI exposure, treat for potential gonorrhea/chlamydia infection with ceftriaxone and azithromycin. Instruct the Soldier to abstain from intercourse for one week after treatment due to contagious risk and counsel on safe sex practices and risks of high risk sexual behavior. Notify the supervising privileged provider so that he or she can track. Refer to community health. Return to clinic if symptoms are not improving within 48 hours, development of new symptoms, or worsening symptoms.",assocMcp:{type:"mcp",text:"*NOTE: updated empiric treatment for GC/CT involves ceftriaxone with doxycycline in place of azithromycin* Counsel on avoidance of sexual contact till diagnosis has been confirmed/ruled-out, safe sex practices, and risks of high risk sexual behavior. STD Screen. Provide treatment with ceftriaxone and arithromycin if positive or symptomatic. Notify provider. Refer to community health. RTC if worsening symptoms, new symptoms arise, or not improving within 2 days ",ancillaryFind:[{type:"lab",modifier:"gonorrhea/chlamydia urine screen"},{type:"lab",modifier:"HIV screen"},{type:"lab",modifier:"Urinalysis"},{type:"refer",modifier:"Community Health"}],medFind:[Ke[13],Ke[6],Ke[16]]}}],next:null,selectAll:!1}]}]},{id:"E-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Inability to void x 12 hours"},{text:"Fever"},{text:"Cola Colored Urine"},{text:"Blood or Clots in Urine"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Worsening despite treatment"},{text:"Severe illness"},{text:"Vaginal symptoms"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["urinary obstruction","benign prostatic hypertrophy","UTI","STI"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems. Inability to void can represent an obstruction of the ureter. Do to the risks to the kidneys, it is a medical emergency."}],disposition:[{...me[0],modifier:"Urinalysis,  Pregnancy Test"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:[2,3],selectAll:!1}]},{text:"Draw the following labs if applicable",type:"action",questionOptions:[{text:"Urinalysis"},{text:" Pregnancy Test"}],answerOptions:[]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Pregnant"},{text:"Male > 40 yrs old"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["benign prostatic hyperplasia"],text:"A mans prostate can become enlarged later in life resulting in urinary symptoms of post-void urine dribbling, a weak stream, or difficulty initiating a urinary stream that requires further evaluation and treatment by a qualified provider."},{type:"dmp",ddx:["pregnancy"],text:"See algorithm I-2: Refer Soldiers with a positive pregnancy test to the AEM. The Soldier will need to receive initial pregnancy counseling that includes medications and foods to avoid, importance of a daily prenatal vitamin, avoidance of alcohol, pregnancy profile, and referral to obstetrics-gynecology clinic. These services are also sometimes provided by the clinic nurse depending on local protocol"}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["gonorrhea","chlamydia"],text:"For Urethral Discharge See Protocol E-3. Check a first morning void urinalysis and gonorrhea/chlamydia urine screen. If indicated, treat for potential gonorrhea/chlamydia infection with ceftriaxone and azithromycin. Instruct the Soldier to abstain from sex due to the contagious risk. Notify the supervising privileged provider. Refer to community health. RTC if symptoms have not improved in 1 week, symptoms worsen, or new symptoms develop.",assocMcp:{type:"mcp",text:"*NOTE: updated empiric treatment for GC/CT involves ceftriaxone with doxycycline in place of azithromycin* Counsel on avoidance of sexual contact till diagnosis has been confirmed/ruled-out, safe sex practices, and risks of high risk sexual behavior. STD Screen. Provide treatment with ceftriaxone and arithromycin if positive or symptomatic. Notify provider. Refer to community health. RTC if worsening symptoms, new symptoms arise, or not improving within 2 days ",ancillaryFind:[{type:"lab",modifier:"gonorrhea/chlamydia urine screen"},{type:"lab",modifier:"HIV screen"},{type:"lab",modifier:"Urinalysis"},{type:"refer",modifier:"Community Health"}],medFind:[Ke[13],Ke[6],Ke[16]]}},{type:"dmp",ddx:["UTI"],text:"UTI : See Protocol E-1. OTC medication: phenazopyridine as needed for pain. Antibiotics: trimethoprim/sulfamethoxazole is the first line agent. Nitrofurantoin is the second line agent. Return to clinic in 24 hours if symptoms are not improving, worsening symptoms, or developing new symptoms.",assocMcp:{type:"mcp",text:"drink 8+ glasses of water/day. Phenazopyridine as needed. Counsel on it changing urine orange and potential to dye contacts. First line agent: trimethoprim/sulfamethoxazole. if the MTF antibiotic resistance is greater than 20% or patient has sulfa allergy, use second line agent. Second line agent: nitrofurantoin, if the patient reports an allergy to nitrofurantoin. refer to AEM. Return to clinic if symptoms not improving within 24 hours, development of new symptoms, worsening symptoms ",medFind:[Ke[35],Ke[42],Ke[31]]}},{type:"dmp",ddx:["urinary incontinence","stress incontinence"],text:"If leaking urine during episodes of increased intra-abdominal pressure (sneezing, coughing, laughing, jumping), it is stress incontinence. Instruct the Soldier on performing Kegel exercises at home. Contact the clinic if not improving and would like a referral. Return for worsening or development of new symptoms.",assocMcp:{type:"mcp",text:"if leaking urine when coughing, sneeing, jumping, counsel patient on home exercises. RTC if worsening symptoms, new symptoms arise, or not improved within stated timeframe"}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"F-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Vital Signs"},{text:"Irregular Pulse"},{text:"Witnessed or H/O Seizure"},{text:"Severe Headache"},{text:"Heat Injury"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Suspect drugs/alcohol"},{text:"Altered mental status"},{text:"Unstable gait"},{text:"Diabetic"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["Orthostatic Hypotension","Intracranial Bleed","Seizure","hypo/hyperglycemia"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems. Take orthostatic blood pressure. Severe headache associated with trauma can represent an intracranial bleed. Heat injuries can be life-threatening and require prompt action. Soldier acting abnormal or intoxicated, with abnormal pupils, an unsteady gait, loss of coordination, slurred speech, or appearing unkempt should be referred for further evaluation. Hypo/hyperglycemia can also result in altered mental status and progress to a coma.",ancillaryFind:[{type:"protocol",modifier:"if hypotensive: start IVG"},{type:"protocol",modifier:"if irregular pulse: EKG"},{type:"protocol",modifier:"if heat exposure: cool"}]}],disposition:[{...me[0],modifier:"Hypotensive - start IVF. Irregular pulse - EKG. Heat exposure - Cool"}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Vertigo"},{text:"Appears anxious"},{text:"Prevent normal duties"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["anxiety","vertigo"],text:"Anxiety with hyperventilation can result in dizziness. Soldiers with vertigo will require further evaluation and medications for treatment."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["reflex syncope"],text:"Common reflex syncope situations include prolonged standing in formation, seeing/ giving blood, or especially stressful situation. Have the Soldier lay down in a comfortable position and elevate the legs, if possible. Continue to monitor the Soldier for 30 minutes after the symptoms have resolved. Reassure the Soldier that it is a common and benign condition. Instruct the Soldier to increase water and salt intake, watch for the prodromal signs (lightheaded, flushing/ feeling of warmth, sweating, tunnel vision/ changes in vision progressing to blindness, nausea, appearing pale), and actions to take when the symptoms start. Laying down with the legs raised or sitting when not able to lay down, clenching the fist, or leg pumping (crossing and flexing legs) or some ways that can help relieve symptoms.",assocMcp:{type:"mcp",text:"Reflex syncope situation/symptoms before incident, have the patient lay down wth legs uncrossed and elevated until symptoms resolve. Observe the patient for 30 minutes after symptoms resolved to make sure that the symptoms do not return. Counsel the patient to increase electrolyte intake. Counsel the patient on situations that increase risk of reoccurrence, symptoms to watch for, and early interventions to take. RTC if worsening symptoms, new symptoms arise, or recurrence of incident.",specLim:["No driving x 72 hours"]}}],next:null,selectAll:!1}]}]},{id:"F-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Sudden Onset, Severe"},{text:"Focal Neurologic Signs"},{text:"Blown pupil"},{text:"Severe Hypertension"},{text:"Fever"},{text:"Vision Change/Loss"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Hypertension > 220/110"},{text:"Abnormal pupils"},{text:"sudden worst headache"},{text:"fever"},{text:"inability to touch chin to chest"},{text:"altered mental status"}],answerOptions:[{text:"Yes",disposition:[{...me[0]}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["hypertensive emergency","hypertensive urgency","increased intracranial pressure","intracranial hemorrhage","meningitis"],text:"Severe hypertension is a blood pressure over 220 systolic or 110 diastolic. When a Soldier has severe hypertension, have them lay down in a quiet, dark room until able to transport them to a higher level of care. A blown pupil can be a sign of increased intracranial pressure. Sudden worst headache of the Soldiers life and focal neurological sign can be a sign of an intracranial hemorrhage. Fever and inability to touch the chin the chest are signs of meningitis. Altered mental status can be a sign of a more significant problem. If there is some question as to whether or not the Soldier is confused, ask him simple questions such as his name, day of the week, the year, where he is now, or who is the President of the United States?"}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"nausea"},{text:"high blood pressure"},{text:"Failing initial treatment"},{text:"change from usual headache"},{text:"pregnant"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["migraine","increased intracranial pressure","hypertension","secondary headache","pre-eclampsia"],text:"Nausea is a common symptom with a migraine headache but can also be a sign of increased intracranial pressure. Nausea requires a further evaluation to determine the most likely cause. Uncontrolled high blood pressure can result in a headache and requires additional treatment. Headaches that have failed initial treatment need to be evaluated for secondary causes and a different medication regiment. A change from a Soldiers usual headache can represent a more significant underlying medical problem or new cause of the headache. Pregnancy limits the medications that can be used, and headache in pregnancy could represent pre-eclampsia if over 20 weeks pregnant.",ancillaryFind:[{type:"lab",modifier:" Pregnancy Test"}]}],next:null,selectAll:!0},{text:"No",disposition:[{...me[2]}],decisionMaking:[{type:"mcp",ddx:["migraine headache","tension headache","caffeine withdrawal"],text:"Provide the Soldier with ibuprofen, naproxen, or ketorolac as needed for his or her headache. Return to clinic if confusion, vision problems, nausea, or fever develop, if the pain is so severe that performance of normal duties is impossible, or the headache lasts over 24 hours. May provide physical activity modification for one day, if necessary.",medFind:[Ke[23],Ke[30],Ke[24]],specLim:["May wear Sunglasses Indoors","Limit loud noises","Walk at own pace/distance","No running, rucking, jumping"]}],next:null,selectAll:!1}]}]},{id:"F-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Sudden Onset, Severe"},{text:"Focal Neurologic Signs"},{text:"Blown pupil"},{text:"Severe Hypertension"},{text:"Fever"},{text:"Vision Change/Loss"}],answerOptions:[]},{text:"Draw the following labs",type:"action",questionOptions:[{text:"Finger stick glucose"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"red flags"},{text:"back pain"},{text:"severe headache"},{text:"blood glucose < 70"},{text:"Diabetes / insulin"},{text:"tick exposure"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Glucose < 70 provide sugar/food if available"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems"},{type:"dmp",ddx:["neuropathy","herniated disc","intracranial lesion","hypoglycemia"],text:"Localized issue is more likely to have a serious cause then generalized symptoms. Back pain can represent a herniated disc causing nerve compression. Severe headache can represent an intracranial lesion. Insulin use, or history of diabetes can present with symptomatic hypoglycemia. In hypoglycemic Soldiers, sugar or food should be provided if available."}],next:null,selectAll:!0},{text:"No",disposition:[],next:[3,4],selectAll:!1}]},{text:"Draw the following lab if applicable",type:"action",questionOptions:[{text:" Pregnancy Test"}],answerOptions:[]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Fever"},{text:"prevents normal activities"},{text:"first occurrence of symptoms"},{text:"pregnant"},{text:"depressed"},{text:"35+ years old"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["viral illess","depression","pregnancy-related pathology"],text:"Fatigue from an infectious illness can be described as weakness. First occurrence of symptoms or being 35 years old or older may indicate a higher risk for a more serious condition. Depression can also present as weakness.",ancillaryFind:[{type:"lab",modifier:" Pregnancy Test"}]}],next:null,selectAll:!0},{text:"No",disposition:[{...me[2]}],decisionMaking:[{type:"dmp",ddx:["hyperventilation"],text:"Provide reassurance to the patient. Have the Soldier practice relaxed breathing. If symptoms do not resolve within 10 minutes, refer to AEM. If symptoms resolve, refer to behavioral health if available.",assocMcp:{type:"mcp",text:"respiratory rate greater than 14 per minute. Provide reassurance to the patient. Have the Soldier practice relaxed breathing. If symptoms do not resolve within 10 minutes, refer to AEM. If symptoms resolve, refer to behavioral health if available.",ancillaryFind:[{type:"refer",modifier:"behavioral health"}]}},{type:"dmp",ddx:["viral syndrome"],text:"Viral syndrome can present as fatigue described as weakness. It is a global feeling often associated with other symptoms and muscle aches. Treat in accordance with related protocol.",assocMcp:{type:"mcp",text:"Viral Syndrome: ibuprofen as needed for fatigue/body aches. Drink plenty of water. Get plenty of sleep.",medFind:[Ke[23]],specLim:["PT training at own pace/ rep/ distance x 3 days"]}},{type:"dmp",ddx:["Insomnia","fatigue","stress","other sleep issue"],text:"Sleep issues can present as fatigue described as weakness. It can be a manifestation of depression or stress among other things. Provide education on sleep hygiene, consider providing diphenhydramine or melatonin nightly for three nights, consider activity modification, discuss stress management, and offer a routine referral to behavioral health asset for counseling and treatment",assocMcp:{type:"mcp",text:"provide sleep hygiene education, recommend self-reflection to find a way to relieve stress, and offer a routine referral to a routine behavioral health asset, if available. Return to clinic if not improving, new symptoms arise, or symptoms are worsening",medFind:[Ke[14]],ancillaryFind:[{type:"refer",modifier:"behavioral health"}],specLim:["Allow for 8 hours of uninterrupted sleep in 24 hour period"]}}],next:null,selectAll:!1}]}]},{id:"F-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Vital Signs"},{text:"Altered Mental Status"},{text:"Focal Neurological Deficit"},{text:"Recent Trauma"}],answerOptions:[]},{text:"Finger Stick Glucose",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Unable to touch chin to chest"},{text:"Hypoglycemia"},{text:"H/O Alcoholism"},{text:"H/O narcotics"},{text:"H/O seizures"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Glucose < 70 - provide glucose. SpO2 <90 - start oxygen. H/O alcohol - give thiamine. H/O narcotics - give naloxone"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["shock","hypoglycemia","intracranial pathology","alcohol use","drug use","seizure"],text:"Abnormal vital signs may represent a more significant condition to include shock. Soldiers with an altered mental status should have their finger stick blood sugar checked. Hypoglycemia can cause an altered mental status. Focal neurological deficits and a recent trauma suggest intracranial pathology. Alcohol, narcotics, and other drugs can cause confusion through intoxication or withdrawal. Seizures can cause confusion even if the rhythmic jerking movements are not presenting in the Soldier.",ancillaryFind:[{type:"lab",modifier:"finger stick glucose"},{type:"lab",modifier:"blood alcohol level"},{type:"med",modifier:"H/O alcohol - thiamine"},{type:"med",modifier:"H/O narcotics - naloxone"},{type:"med",modifier:"Glucose < 70 - glucose"},{type:"protocol",modifier:"SpO2 < 90 - oxygen"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:[3,4],selectAll:!1}]},{text:"draw the following labs",type:"action",questionOptions:[{text:"blood alcohol"},{text:"urine drug screen (UDS)"}],answerOptions:[]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Sudden onset"},{text:"Heat exposure"},{text:"Positive urine drug screen"},{text:"Positive blood alcohol"},{text:"Medication changes"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"Check rectal temp if heat exposure concern"}],decisionMaking:[{type:"dmp",ddx:["heat injury","heat exhaustion","heat stroke","substance exposure","substance withdrawal"],text:"Sudden onset of symptoms is more concerning. Heat exhaustion, heat injury, and heat stroke can be associated with drowsiness or confusion. If a heat exposure is of concern, then a rectal temperature must be checked. Alternative methods of checking the temperature can be inaccurate. Alcohol, drug, or medication exposure or withdrawal can cause drowsiness. Some medications that can cause drowsiness include antihistamines, sleep medications, muscle relaxants, analgesics, and psychiatric medications.",ancillaryFind:[{type:"protocol",modifier:"rectal temp"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",text:"If drowsiness or confusion is not from a condition below, refer to AEM."},{type:"dmp",ddx:["viral syndrome"],text:"Viral syndrome can present as fatigue described as drowsiness. It is a global feeling often associated with other symptoms and muscle aches. Treat with ibuprofen as needed for fatigue/body aches. Treat other symptoms in accordance with the corresponding minor-care protocol.",assocMcp:{type:"mcp",text:"ibuprofen as needed for fatiguerbody aches. Drink plenty of water. Get plenty of sleep. Screen other symptoms as needed. Return to clinic if not improving, new symptoms arise, or symptoms are worsening",medFind:[Ke[23]]}},{type:"dmp",ddx:["sleep problems"],text:"Sleep issues can present as fatigue described as weakness. It can be a manifestation of depression or stress among other things. Provide education on sleep hygiene, consider providing diphenhydramine or melatonin nightly for three nights, consider activity modification, discuss stress management, and offer a routine referral to behavioral health asset for counseling and treatment.",assocMcp:{type:"mcp",text:"provide sleep hygiene education, consider providing melatonin or activity modification, recommend self-reflection to find a way to relieve stress. and offer a routine referral to a behavioral health asset. if available. Return to clinic if not improving. new symptoms arise, or symptoms are worsening.",medFind:[Ke[14]],ancillaryFind:[{type:"refer",modifier:"behavioral health"},{type:"med",modifier:"melatonin"}],specLim:["Allow for 8 Hours of uninterrupted sleep in any given 24 hour period"]}}],next:null,selectAll:!1}]}]},{id:"F-5",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Homicidal Intent or Attempt"},{text:"Suicide Intent or Attempt"},{text:"Self-injury"},{text:"Altered Mental Status"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Positive suicide screening"},{text:"Abnormal vital signs"},{text:"Severe emotional distress"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"inform leadership. Do not leave Soldier alone. Remove means of self-harm"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as provider now. These can be signs of significant underlying medical or serious behavioral health problems."},{type:"dmp",ddx:["suicidal ideation","homicidal ideation","depression","anxiety"],text:"Ask the following questions: In the past month, have you wished you were dead or wished you could go to sleep and not wake up? Have you had any thoughts about killing yourself? If YES to the second question, ask: Have you thought of how you might do this? Have you started to work out or have worked out the details of how to kill yourself? Do you have any intention of acting on these thoughts of killing yourself? Remain calm. Express concern and do not be dismissive. Do not be judgmental or argumentative. If YES to questions about suicidality, do not leave the Soldier alone. Remove means of self-harm. Do not leave the Soldier waiting alone for a long time in a busy waiting room, as this may increase the Soldiers distress. Be aware that abnormal vital signs and/or anxiety or depression symptoms may represent an underlying medical issue"}],next:null,selectAll:!0},{text:"No",disposition:[],next:[2,3,4],selectAll:!1}]},{text:"Complete GAD-7 Anxiety Screening",type:"action",screenerConfig:n7,questionOptions:[],answerOptions:[]},{text:"Complete Depression Screening (PHQ-2)",type:"action",screenerConfig:t7,questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Positive depression screening"},{text:"Difficulty adjusting to injury or pain"},{text:"Escorted due to safety concerns"},{text:"Positive blood alcohol"},{text:"Other indications of depression/anxiety"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"Obtain list of all medications and amount taken. Ask if currently receiving BH services"}],decisionMaking:[{type:"dmp",ddx:["depression","anxiety","emotional distress","suicidal gesture"],text:"Ask the following questions for a depression screen: Over the past 2 weeks, have you often been bothered by feeling down, depressed, or hopeless? Over the past 2 weeks, have you often been bothered by having littler interest or pleasure in doing things? In addition to other situational, mental health, or medical causes, emotional distress may accompany injury and/or chronic pain and may merit a referral to behavioral health services. Ask Soldier how he or she is coping with the injury and/or pain. Other indicators of emotional distress may include disheveled appearance or poor hygiene, reported change in work performance, and risk-taking behavior. Obtain a list of all medications and the amounts taken to provide to the AEM. Taking significantly more of a medication than the prescribed amount may represent a suicidal gesture and should be inquired about if reported. If the Soldier was accompanied to the screening area by an escort, it may be due to high risk behavior or safety concerns. Inquire as to reason for escort, asking escort if necessary."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["mild mood symptoms"],text:"Soldiers that are experiencing mood symptoms that are mild in nature and not associated with other symptoms or impairment should be offered assistance. As always, remain calm, express concern for the Soldier, and do not be judgmental or argumentative. Educate the Soldier on the many resources that are available in your area, to include: Behavioral Health, Chaplaincy, Army Community Services, Chain of Command, Military and Family Life Consultants, Military OneSource, and Army Wellness Center. Offer to walk the Soldier to the resource that they prefer. Do not allow the Soldier to leave the screening area until they have been cleared by the supervising medic.",specLim:["Escort to Behavioral Health or Emergency Room if indicated"]}],next:null,selectAll:!1}]}]},{id:"F-6",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Deteriorating Level of Consciousness"},{text:"Double Vision"},{text:"Increased Restlessness, combative or agitated behavior"},{text:"Repeat vomiting"},{text:"Positive result from structural brain injury detection device (if available)"},{text:"Seizure"},{text:"Weakness or tingling in arms or legs"},{text:"Severe or worsening headache"},{text:"Abnormal Neuro Exam"},{text:"Battle sign, Raccoon eyes"},{text:"Suspected skull fracture"},{text:"Anticoagulant use"}],answerOptions:[]},{text:"MACE 2 Exam",type:"action",questionOptions:[],answerOptions:[],screenerConfig:i7},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Amnesia 30+ min before event"},{text:"Neurological deficit"},{text:"High impact head injury"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"If the Soldier presents with any red flag, immediately disposition the Soldier as Provider Now as these can be signs of medical emergencies."},{type:"dmp",ddx:["concussion"],text:"All Soldiers with a possible mTBI should be screened using the Military Acute Concussion Evaluation, version 2 (MACE 2) exam and results should be documented on the Soldiers medical record. The MACE 2 assesses for red flags and the five predominate concussion sub-types (vestibular, oculomotor, headache/migraine, anxiety/mood, and cognitive). Presence of the following observable signs are suggestive of a concussion and prompt thorough evaluation: (1) lying motionless on the ground, (2) slow to get up after a direct or indirect blow to the head, (3) disorientation, confusion or inability to respond appropriately to questions, (4) blank or vacant look, (5) balance difficulties, stumbling, or slow labored movements, and (6) facial injury after head trauma. A positive initial screening on the MACE 2 indicates a concussive injury and often presents as alteration of consciousness (seeing stars, dazed, confused), loss of consciousness, or amnesia (trouble remembering the event). Positive screening with the following are recommended for a CT scan of the head: deteriorating level of consciousness, double vision, increased restlessness, combative or agitated behavior, severe or worsening headache, mental status (GCS<15), suspected skull fracture, sign of basilar skull fracture (hemotympanum, raccoon eyes, Battle sign, oto-/rhinorrhea), 2+ episodes of vomiting, amnesia for 30+ minutes before incident, neurologic deficit, seizure, severe incident (hit by motor vehicle, ejection from vehicle, fall >3 feet/ >5 stairs), or on an anticoagulant. The MACE 2 encompasses the following key areas: (1) concussion screening, (2) history questions (related to anxiety, migraine, and cervicogenic assessment), and (3) neurological, cognitive, and vestibular/oculomotor assessments. The neurological assessment includes speech fluency, word finding, single leg stance, tandem gait, pronator strength and eye tracking. The cognitive section includes scored evaluations of orientation and immediate and delayed recall. The vestibular/ocular-motor screening (VOMS) is a symptom-provoking exam that is necessary to detect patients at risk for delayed recovery due to oculomotor and vestibular deficits. Symptoms assessed are headache, dizziness, nausea, and fogginess.",ancillaryFind:[{type:"protocol",modifier:"MACE 2 exam"}]}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"MACE < 26"},{text:"Nausea, dizziness"},{text:"Headache"},{text:"Memory, concentration problem"},{text:"Balance/ visual problem"},{text:"Ringing in the ears"},{text:"Altered or loss of consciousness"},{text:"H/O TBIs"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["concussion","mTBI"],text:"A MACE 2 cognitive score less than or equal to 25, any abnormality on the neurological exam, any abnormality on the VOMS exam, presence of one or more symptoms, observed loss or alteration of consciousness, or a history of TBIs require additional evaluation and treatment"}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["mTBI"],text:"MACE 2 screening that does not identify a concussion (screens negative) can be managed with reviewing the Acute Concussion Educational Brochure with Soldier, a mandatory 24 hour rest period followed by a re-evaluation after the 24 hour rest period prior to the Soldier returning to duty. Re-evaluation should include exertional testing if the Soldier is still asymptomatic. Exertional testing increases the cardiac output (blood pressure and heart rate) which can worsen symptoms by increasing swelling if present. Return to the clinic if symptoms worsen or new symptoms develop. More information is available at https://dvbic.dcoe.mil. Concussion treatment is guided by the results of the symptom cluster assessment generated by the MACE 2. A MACE 2 screening that identifies a concussion (screens positive) should prompt a minimum of 24-hour rest, with follow-up every 24 to 48 hours up to seven days. Additionally, concussions should be managed by initiation of the concussion management tool (CMT) and progressive return to activity (PRA) by a medical provider or other trained medical staff member. Results from the MACE 2 align to specific treatment protocols embedded within the CMT. Rapidly addressing vestibular and oculomotor deficits identified by the MACE 2 and daily evaluation of progress with the PRA will lead to faster recovery.",assocMcp:{type:"mcp",text:"All positive MACE 2 screens should be referred to the AEM or Provider for further evaluation. Negative MACE 2: 24 hour rest period, review Acute Concussion Educational Brochure with patient. and counsel Soldier to return after 24 hour rest for re-evaluation If no symptoms. perform exertional testing. Return to Clinic if worsening symptoms, new symptoms. More information is available at https://dvbic.dcoe.mil. See MACE 2 card, CMT, and PRA resources",specLim:["Use the Concussion Management Tool (CMT) and associated Progressive Return to Activity (PRA) for specific management. A minimum of 24 hour rest, defined as:","1. Rest with extremely limited cognitive activity","2. Limit physical activities to those of daily living and extremely light leisure activity","3. Avoid working, exercising, playing video games, studying, or driving","4. Avoid any potentially concussive events","5. Avoid caffeine and alcohol","Reassess using the MACE 2 after 24 hours rest"]}}],next:null,selectAll:!1}]}]},{id:"G-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Suicide Ideation"},{text:"Homicide Ideation"},{text:"Shortness of Breath"},{text:"Stiff Neck"},{text:"Melena"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Depression"},{text:"Loss of libido"},{text:"Weight change"},{text:"Menorrhagia, Anemia > 3 weeks"},{text:"Snoring"},{text:"UPSTF"},{text:"Screen/PHA out of date"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of medical emergencies."},{type:"dmp",ddx:["depression","adrenal or pituitary issue","hypo/hyperthyroidism","anemia","sleep apnea"],text:"While fatigue is often not caused by a specific disease, it may be a presenting symptom of a potentially serious condition. Depression may only present as fatigue. Decreased libido could be a sign of an adrenal/pituitary issue. Weight change could represent hypo/hyperthyroidism. Menorrhagia often results in anemia. Snoring can be a sign of sleep apnea. USPSTF Screening/PHA is to look at age appropriate cancer and cardiovascular screening. Infections, inflammation, liver/kidney disease, and medication/drug use can also cause fatigue."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Cold, Sore throat Sx"},{text:"Rectal bleeding"},{text:"Other symptoms"}],answerOptions:[{text:"Yes",disposition:[{type:"OTHER",text:"Screen bleeding, cold, sore throat, other symptoms if present"}],decisionMaking:[{type:"dmp",text:"If the Soldier has other specific complaints or symptoms, the Soldier should be evaluated for that complaint. Otherwise, the minor-care protocol is appropriate."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["fatigue"],text:"Advise the Soldier that vitamins are rarely helpful, that pep pills do not work (the rebound usually makes the problem worse), and that tranquilizers generally intensify fatigue. Taking a vacation, if possible, or undertaking new activities are often helpful. Helpful Actions Include: Identifying potential sources of the fatigue such as work stress, marital discord, lack of rest or sleep (either quantity or quality of sleep), or a poor/not well balanced diet. Provide information on proper sleep hygiene and refer to sleep hygiene course if locally available. If not a suicidal risk (which would require immediate referral) suggest various available options for counseling, including behavioral health, Army community services, and the chaplain. Work on the problem rather than on the symptom. Seek medical assistance if symptoms worsen, other symptoms develop, fatigue makes normal activities difficult, difficulty staying awake while driving, or not improved within one week."},{type:"dmp",ddx:["sleep problem"],text:"Sleep issues can present as fatigue described as weakness. It can be a manifestation of depression or stress among other things. Provide education on sleep hygiene, consider providing diphenhydramine or melatonin nightly for three nights, consider activity modification, discuss stress management, and offer a routine referral to behavioral health asset for counseling and treatment.",assocMcp:{type:"mcp",text:"",medFind:[Ke[14]],ancillaryFind:[{type:"med",modifier:"melatonin"},{type:"refer",modifier:"behavioral health"}],specLim:["Allow for 8 hours of uninterrupted sleep with a 24 hour period"]}}],next:null,selectAll:!1}]}]},{id:"G-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Heat Injury"},{text:"Stiff Neck"},{text:"Light sensitivity"},{text:"Pregnant"},{text:"Seizure"},{text:"Lightheaded"}],answerOptions:[]},{text:"Red flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of medical emergencies."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Abnormal Vitals"},{text:"HIV positive"},{text:"Immunosuppression"},{text:"Overseas travel within 6 months"},{text:"Tick, mosquito bite"},{text:"Malaria area"},{text:"Animal exposure"},{text:"IV drug use"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["HIV","bacterial infection","zoonotic infection","malaria","endocarditis"],text:"If the Soldiers temperature is greater than 100.4F, has symptoms for more than 48 hours, HIV infection, or immunosuppression, then there is a greater risk of the fever being caused by a bacterial infection. Overseas travel, tick or mosquito bite, animal exposure, and malaria endemic area, increase the risk of a zoonotic or malaria infection. IV drug use increases the risk of endocarditis."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Cold, Sore throat Sx"},{text:"Ear pain"},{text:"Diarrhea"},{text:"Pain with urination"},{text:"Other symptoms"}],answerOptions:[{text:"Yes",disposition:[{type:"OTHER",text:"Screen other symptoms algorithm"}],decisionMaking:[{type:"dmp",text:"Before assuming the Soldier has isolated fever/chills, be sure to ask him/her specifically about other symptoms such as upper respiratory infection symptoms, cough, sore throat, ear pain, diarrhea, dysuria, rash, and muscle aches. If no associated symptoms can be identified, over half of Soldiers fever will resolve on its own without an underlying issue being identified."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",text:"Instruct the Soldier to stay well hydrated and get plenty of rest. He or she should drink fluids to keep their urine mostly clear and obtain at least eight hours of rest per day. Take acetaminophen as needed for temperature above 98.4F (No more than eight tablets within 24 hours. No other medications with acetaminophen in them. No alcohol.) Soldier is contagious while he or she has an elevated temperature. He or she should avoid contact with healthy Soldiers as much as possible. If in training, refer to local SOP. Soldier may need to be placed in quarters. Return for medical assistance if symptoms do not improve with acetaminophen, other symptoms develop, or a fever develops (T > 100.4).",assocMcp:{type:"mcp",text:"OTC Medication: acetaminophen as needed for elevated temperature (No other medications with acetaminophen. No alcohol.), ibuprofen as needed for malaise. Stay hydrated by drinking fluids to keep your urine mostly clear. Get plenty of rest. Return if red flags, new symptoms. lasts longer than 48 hours, or fever not controlled with acetaminophen",medFind:[Ke[0],Ke[23]],specLim:["For a Fever: Consider Quarters x 24-48 hours (must discuss with supervising privileged provider)"]}}],next:null,selectAll:!1}]}]},{id:"H-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Fixed, Abnormal Pupil"},{text:"Visual Acuity Change"},{text:"Observed Foreign Body"},{text:"Penetration, Rupture"},{text:"Chemical Exposure"},{text:"Fluid Level over Iris, Pupil"}],answerOptions:[]},{text:"Eye exam / Fluorescein. *Do not perform fluorescein exam if there is concern for an open globe or ruptured eye*",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Fluorescein uptake"},{text:"Immunosuppression"},{text:"Recent eye surgery"},{text:"Associated head trauma"},{text:"Double vision"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of medical emergencies."},{type:"dmp",ddx:[],text:"Perform an eye exam with visual acuity. Do not perform a fluorescein exam if concerned for an open globe. Cover the eye with an unpadded protective fox shield or cup and discuss with the supervising privileged provider if a potential foreign body. A privileged provider order is required to irrigate the eye except when immediate irrigation is required for a chemical exposure. A white or red layered fluid level over the iris is a sign of a hypopyon or hyphema, respectively, requiring emergent referral. Contact lens, recent eye surgery, and fluorescein uptake increase potential of a serious condition.",ancillaryFind:[{type:"protocol",modifier:"visual acuity"},{type:"protocol",modifier:"fluorescein exam"}]}],disposition:[{...me[0],modifier:"chemical - irrigation. foreign body - fox shield. head trauma - stabilize neck. other - cover eye"}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Thick, yellow or green discharge"},{text:"Painful"},{text:"Light sensitivity"},{text:"Inability to keep eye open"},{text:"Trauma"},{text:"History foreign body getting better"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["bacterial conjunctivitis","foreign body","inflammatory process"],text:"Thick, yellow or green discharge that continues throughout the day suggests bacterial conjunctivitis. Eye pain, light sensitivity, inability to open or keep the eye open, and foreign body sensation suggests a corneal or intraocular inflammatory process. Fast moving metal or glass slivers from an explosion or welding can penetrate the eye with symptoms that rapidly disappear. A history of a foreign body that is now getting better should be screened as a foreign body."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"mcp",ddx:["hordeolum (stye)"],text:"warm compress x 16 min, 4x day followed by massaging area."},{type:"dmp",ddx:["blepharitis"],text:"blepharitis (crusting of the eye in the morning with or without red, swollen eyelids): treatment is washing of the eyelashes daily with washcloth using warm water and non-tearing baby shampoo, warm compresses, lid massage. Instruct to avoid lotions, creams, make-up to the affected area. RTC if worsening or not improving within one week.",assocMcp:{type:"mcp",text:"warm compress (like stye), avoidance of make-up, and washing with warm water and tear free shampoo."}},{type:"dmp",ddx:["dry eyes"],text:"(tearing, blurry vision that clears with blinking, and a gritty sensation): treatment is artificial tears prn.",assocMcp:{type:"mcp",text:"artificial tears lubricating drops as needed"}},{type:"dmp",ddx:["viral conjunctivitis","allergic conjunctivitis"],text:"(crusting, watery discharge with burning (viral) or itching (allergic)): viral is highly contagious. Treatment is with warm or cool compresses and topical antihistamine/decongestant drops.",assocMcp:{type:"mcp",text:"warm or cool compresses, topical antihistamine/decongestant drops, and contagion precautions"}},{type:"dmp",ddx:["subconjunctival hemorrhage"],text:"further evaluation is necessary when associated with trauma, is recurrent, or Soldier is on an anticoagulant",assocMcp:{type:"mcp",text:"subconjunctival hemorrhage is a demarcated area of blood (outside of the iris) with normal vision, no discharge, light sensitivity, or foreign body sensation. Typically resolves in 1-2 weeks"}}],next:null,selectAll:!1}]}]},{id:"H-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Open Globe"},{text:"High Risk Laceration"},{text:"Decreased Visual Acuity"},{text:"Double Vision"}],answerOptions:[]},{text:"Eye exam visual",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Fixed pupil"},{text:"Mod-severe pain"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"fox shield/protectove cover. head trauma - stabilize neck"}],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of medical emergencies."},{type:"dmp",ddx:["open globe fracture","laceration","orbital compartment syndrome"],text:"Assess for life-threatening injuries (head, neck, and airway) before performing an eye exam with visual acuity. Access for signs of an open globe. Laceration of full thickness of eyelid, with orbital fat prolapse, through lid margin, involving lateral/medial/tear duct/or muscles, or associate with avulsion or malalignment requires referral. Decreased visual acuity and double vision along with pain, fixed pupil, and swelling around the eye are signs of a potential internal eye injury. Orbital compartment syndrome can develop which is a medical emergency requiring immediate treatment."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Significant redness, swelling"},{text:"Rash > 1 week"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["cellulitis","dermatitis"],text:"Significant redness and swelling can be signs of cellulitis. Cellulitis is a relatively common complication of a stye. It requires further evaluation and treatment with oral antibiotics. Dermatitis and some systemic diseases can also present with an eyelid rash requiring further evaluation and treatment."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["stye (hordeolum)"],text:"presents with redness, tenderness, and swelling of the eyelid. Initial treatment should be a warm compress placed on the area for 15 minutes four times per day with massage of the area after the warm compress. Return to clinic if becomes significantly painful, redness and swelling spreads, or not improving within one week.",assocMcp:{type:"mcp",text:"warm compress x 14min, 4x/day followed by massing area. RTC to clinic if the condition is worsening, new symptoms develop, or it is not improving within 1 week"}},{type:"dmp",ddx:["chalazion"],text:"presents with painless swelling of the eyelid. It is treated the same way as a stye and usually resolves within a couple of weeks.",assocMcp:{type:"mcp",text:"warm compress x 14min, 4x/day followed by massing area. RTC to clinic if the condition is worsening, new symptoms develop, or it is not improving within 1 week"}},{type:"dmp",ddx:["blepharitis"],text:"presents with bilateral crusting of the eye in the morning and may be associated with red, swollen eyelids, and dry eyes that improve with blinking. Treatment is washing of the eyelashes daily with washcloth using warm water and non-tearing baby shampoo, warm compresses, lid massage. Instruct to avoid lotions, creams, make-up to the affected area. RTC if worsening or not improving within one week.",assocMcp:{type:"mcp",text:"warm compress (like stye), avoidance of make-up, and washing with warm water and tear free shampoo. RTC to clinic if the condition is worsening, new symptoms develop, or it is not improving within 1 week"}},{type:"dmp",ddx:["contact dermatitis"],text:"skin reaction from an irritant. In a female, make-up is the most common cause. Evaluate for any new exposures, other areas involved. Instruct to avoid the most likely contact/cause and any lotions, creams, or soaps with perfumes, hair dyes, new shampoos, and eye make-up. Use hydrocortisone cream with precautions to avoid getting it in the eye.",assocMcp:{type:"mcp",text:"avoidance of the exposure and hydrocortisone ointment 1% twice a day for 1 week",medFind:[Ke[21]]}}],next:null,selectAll:!1}]}]},{id:"H-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Trauma"},{text:"Recent Surgery"},{text:"Chemical Exposure"},{text:"Fluid Level over Iris, Pupil"},{text:"Neurologic Deficits"}],answerOptions:[]},{text:"Eye exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Observed foreign body"},{text:"Partial visual field affected"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of medical emergencies."},{type:"dmp",ddx:["retinal detachment","foreign body","hypopyon","hyphema"],text:"Perform an eye exam with visual acuity. Decreased visual acuity following trauma may indicate a serious injury that requires immediate treatment. Retinal detachment is often preceded by flashes of light, new floaters, and black spots, these symptoms should prompt an ASAP dilated retinal exam by an eye care provider. A foreign body seen on exam should not be removed. Cover the eye with a protective fox shield or cup and discuss with the supervising privileged provider. A privileged provider order is necessary prior to irrigation of a foreign body except when immediate irrigation is required for a chemical exposure. A white or red layered fluid level over the iris is a sign of a hypopyon or hyphema, respectively, and requires emergent referral. If the decreased vision involves a distinct part of the visual field which includes a black spot that moves with your eye, the cause may be serious.",ancillaryFind:[{type:"protocol",modifier:"visual acuity"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"contact wearer"},{text:"Onset within 7 days"},{text:"Painful"},{text:"Red"},{text:"Headache"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["keratitis","corneal abrasion","migraine"],text:"Wearing contacts increases the risk of keratitis and corneal abrasion. Fluorescein exam is the next step to evaluate for these causes. Visual acuity of contact wearer should be performed with and without glasses to evaluate for a change in vision not related to the contacts. Acute onset and pain are signs of a more concerning cause than the need for glasses. Migraine can be associated with temporary decreased vision or seeing spots prior to a headache (an aura).",ancillaryFind:[{type:"protocol",modifier:"visual acuity"},{type:"protocol",modifier:"fluorescein exam"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["decreased visual acuity","retinal detachment"],text:"visual acuity worse than 20/40 requires a referral to optometry for evaluation for glasses. Worsening of the vision is gradual and often occurs in both eyes. Noticing the issue may occur with a specific activity like trying to read a sign, seeing a target at the range, or Soldier may present requesting an evaluation or been screened during a yearly readiness screening. (Note: protective mask inserts are not usually provided to personnel with uncorrected vision of 20/40 or better). Floaters are clumps of material in the gel-like substance in the back of your eye. They are common, usually benign and move around in your field of vision. They are not fixed to a particular location in the field of view or significantly obstruct the field of view. However, new floaters may be a sign of retinal detachment.",assocMcp:{type:"mcp",text:"decreased visual acuity worse than 20/40: gradual onset refer to optometry for evaluation for glasses. floaters are common and usually benign. However, new floaters may be a sign of retinal detachment and warrant immediate referral to supervising medical provider. Return to clinic if the condition is worsening or new symptoms develop",ancillaryFind:[{type:"refer",modifier:"optometry if VA < 20/40 gradual onset"}]}}],next:null,selectAll:!1}]}]},{id:"H-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Trauma"},{text:"Neurologic Deficits"}],answerOptions:[]},{text:"Visual Acuity",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Red Eye"},{text:"Associated pain"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"head trauma - stabilize neck"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of medical emergencies."},{type:"dmp",ddx:["head/brain injury"],text:"Assess for potential life-threatening injuries (head, neck, and airway) before accessing for vision issues. If the double vision is related to a recent trauma to the head, neck, or back, then it may represent a serious injury to the brain. Neurologic deficits (trouble walking, talking) can indicate a serious problem requiring immediate evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Appears intoxicated"},{text:"With 1 eye shut"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"Cover one of the patients eyes and then the other, assessing whether the double vision persists or not. If double vision continues despite having one eye shut or if double vision is a new issue, the Soldier will need to be referred to an eye care provider (ophthalmologist or optometrist)."}],next:null,selectAll:!0},{text:"No",disposition:[{...me[3],modifier:"optometry"}],decisionMaking:[{type:"dmp",ddx:["diplopia"],text:"long-standing history of double vision or double vision caused by new eyeglasses may well indicate a need for evaluation of the eyeglass prescription. The Soldier should be given an appointment at the optometry clinic. Soldier should not drive a vehicle, fire a weapon, or perform other duties requiring depth perception",assocMcp:{type:"mcp",text:"Long-standing history or started with new eyeglasses, refer to optometry and patch the eye for symptomatic relief. No driving a vehicle, firing a weapon, or other duties requiring depth perception until the Soldier has been evaluated by an optometrist. Return to clinic if symptoms worsen or new symptoms develop.",ancillaryFind:[{type:"refer",modifier:"optometrist"}],specLim:["no driving","no firing weapon","no duties requiring depth perception"]}}],next:null,selectAll:!1}]}]},{id:"I-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Skin Changes"},{text:"Mass"},{text:"Bloody Nipple Discharge"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"T> 100.4"},{text:"Red, swollen breast"},{text:"Focal breast pain but no other symptoms"},{text:"Family H/O early breast cancer"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be an indication of significant underlying medical problems."},{type:"dmp",ddx:["mastitis","abscess","cancer"],text:"Skin changes, mass, or bloody nipple discharge are concerning symptoms that require further evaluation and imaging. Red, swollen breast can represent mastitis or an abscess that requires further evaluation and treatment."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Male with H/O testosterone supplement"},{text:"Female breastfeeding"},{text:"Repeat visit"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["gynecomastia","infection","mastalgia"],text:"Testosterone supplementation in exercise supplements can result in enlargement of breast tissue under the nipple. Enlarged breast tissue can be painful, especially when wearing body armor, further evaluation and counseling are warranted. Nursing mothers often have problems with cracked or infected nipples or have difficulty when the child is weaned, but further examination is required to rule out more concerning issues. Pain without other concerns that is not related to breastfeeding weaning, exercise, or cyclical pain with menstrual cycle requires further evaluation and may require imaging."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["breast pain","large breasts"],text:"women with a large amount of breast tissue can have discomfort associated with stretching of Coopers ligaments. It can be associated with shoulder, back, or neck pain and made worse with exercise. Educate the Soldier on the importance of supportive undergarments, ice compress/heat compress for inflammation, acetaminophen as needed for mild pain, and ibuprofen (1st line) or ketorolac (2nd line) as needed for moderate pain.",assocMcp:{type:"mcp",text:"educate the patient on importance of physical support (well-fitting bra). Ice/heat (1st line) or acetaminophen (2nd line) as needed for mild pain. Ibuprofen (1st line) or ketorolac (2nd line) as needed for moderate pain",medFind:[Ke[0],Ke[23],Ke[24]]}},{type:"dmp",ddx:["chest extramammary/musculoskeletal pain"],text:"related to the chest wall and not the breast tissue. Ice/heat compresses as needed for inflammation. Medication: mentyl salicylate (1st line) or acetaminophen (2nd line) as needed for mild pain, and ibuprofen (1st line) or ketorolac (2nd line) as needed for moderate pain. Activity modifications should be considered as appropriate. RTC if no improving within 3 days, worsening symptoms, or development of new symptoms",assocMcp:{type:"mcp",text:"ice/hear for inflammation, menthyl salicylate (1st line) or acetaminophen (2nd line) as needed for mild pain, ibuprofen (1st line) or ketorolac (2nd line) as needed for moderate pain. Activity modifications as needed. RTC if no improving within 3 days, worsening symptoms, or development of new symptoms",medFind:[Ke[28],Ke[0],Ke[23],Ke[24]],specLim:["no running, jumping, rucking","walk at own pace/distance","may lift, carry, push up to 25 lbs."]}},{type:"dmp",ddx:["diffuse breast pain"],text:"diffuse breast pain is unlikely to be related to cancer. Provide reassurance. If the Soldier is concerned about the possibility of breast cancer after reassurance, refer to provider for consideration of an imaging study to provide reassurance. Treat discomfort with ice/heat (1st line) or acetaminophen (2nd line) as needed for mild pain and ibuprofen (1st line) or ketorolac (2nd line) as needed for moderate pain.",assocMcp:{type:"mcp",text:"ice/heat for inflammation, menthyl salicylate (1st line) or acetaminophen (2nd line) as needed for mild pain, ibuprofen (1st line) or ketorolac (2nd line) as needed for moderate pain. Provide reassurance. Refer to provider if Soldier is concerned about risk of breast cancer after reassurance. RTC if no improving within 3 days, worsening symptoms, or development of new symptoms",medFind:[Ke[28],Ke[0],Ke[23],Ke[24]]}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"I-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Positive hCG AND"},{text:"Pelvic Pain"},{text:"H/O Ectopic Pregnancy"},{text:"Vaginal Bleeding"}],answerOptions:[]},{text:"Draw the following labs",type:"action",questionOptions:[{text:"hCG"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. They can be signs of significant underlying medical problems."},{type:"dmp",ddx:["ectopic pregnancy","miscarriage"],text:"Check a urine hCG. If the urine hCG is negative, confirm negative with a serum hCG. Positive hCG with pelvic pain or history of a prior ectopic pregnancy increases the possibility of an ectopic pregnancy. Vaginal bleeding suggests a possible miscarriage or complication of pregnancy.",ancillaryFind:[{type:"lab",modifier:"urine hCG"},{type:"lab",modifier:"serum hCG"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Positive HCG without other symptoms?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["pregnancy"],text:"Refer Soldiers with a positive pregnancy test to the AEM. The Soldier will need to receive initial pregnancy counseling that includes medications and foods to avoid, importance of a daily prenatal vitamin, avoidance of alcohol, pregnancy profile, and referral to obstetrics-gynecology clinic. These services are also sometimes provided by the clinic nurse depending on local protocol.",ancillaryFind:[{type:"protocol",modifier:"initial pregnancy counseling"},{type:"refer",modifier:"OB/GYN"},{type:"med",modifier:"prenatal vitamin / Folate"},{type:"lab",modifier:"TSH"},{type:"lab",modifier:"HIV"},{type:"lab",modifier:"TSH"},{type:"lab",modifier:"TSH"},{type:"lab",modifier:"TSH"},{type:"rad",modifier:"1TM US"}],specLim:["pregnancy profile"]}],next:null,selectAll:!1},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["taking contraception","increased exercise / stress"],text:"there are multiple causes of a late cycle that are unrelated to pregnancy to include birth control medications, increasing exercise regimen, and stress. Average menstrual cycle is 28 days but can range from 24 to 38 days. Instruct the Soldier to avoid alcohol and NSAID medications (to include Ibuprofen, naproxen, or ketorolac). Return to the clinic in one week if she still has not had a cycle.",assocMcp:{type:"mcp",text:"Counsel the Soldier to avoid alcohol and NSAID medications. Return to clinic in 1 week if she still has not had a cycle."}}],next:null,selectAll:!1}]}]},{id:"I-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Sexual Assault"},{text:"Trauma"},{text:"Severe Pain"},{text:"Pregnant"}],answerOptions:[]},{text:"Draw the following lab",type:"action",questionOptions:[{text:"urine hCG"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Non-midline pelvic pain"},{text:"Pain with intercourse"},{text:"Post menopause"},{text:"Bleeding > 10 days not on birth control"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["sexual assault","miscarriage","pelvic inflammatory disease","malignancy"],text:"If due to Sexual Assault, immediately notify the supervising privileged provider. Do not leave the victim alone. Ask if she would prefer a female medic/privileged provider if one is available. If bleeding is over one week late or the previous bleeding was spotting, it could represent a pregnancy. Bleeding during pregnancy (positive hCG) can represent a miscarriage or complication of pregnancy and needs to be seen ASAP. Non-midline pelvic pain and pain with intercourse are signs of pelvic inflammatory disease. Bleeding after menopause (vaginal bleeding in a 45 y/o or older woman who had no menstrual cycles for 12 months) needs to be evaluated for possible malignancy. Heavy vaginal bleeding (vaginal bleeding enough to soak through one (1) or more tampons or sanitary pads per hour) requires immediate referral to supervising medical provider.",ancillaryFind:[{type:"protocol",modifier:"notify provider immediately for sexual assault. Do not leave patient alone"},{type:"lab",modifier:"urine hCG"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:[3,4],selectAll:!1}]},{text:"Obtain the following information",type:"action",questionOptions:[{text:"Menses History: Length, Severity (clots, #pads), Medications"}],answerOptions:[]},{text:"Positive hCG without other symptoms?",type:"choice",questionOptions:[{text:"New problem"},{text:"Failed previous self-care"},{text:"Menstrual pain onset after 25 y/o"},{text:"Progression of symptoms"},{text:"Menses < 21 or > 35 days"},{text:"Spotting >1 pad/2hrs"},{text:"Prevents normal duties"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["adenomyosis","endometriosis","fibroids","taking contraception"],text:"Most common problems are irregular and painful periods. Menstrual pain starting after age 25, progressive worsening of symptoms, and poor relief with Ibuprofen are symptoms of a secondary cause to include adenomyosis, endometriosis, or fibroids. Spotting (light vaginal bleeding that occurs outside of a womans usual menstrual cycle) on Depo-Provera, Nexplanon, or intrauterine device (IUD) is not uncommon but should be examined further. Menses lasting for over five days, more often than every 21 days or less often than 35 days, or bleeding in between menses is considered abnormal. Soaking a pad or tampon more often than every hour or interferes with daily activities is considered heavy."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["dysmenorrhea"],text:"bothersome menstrual cramping (dysmenorrhea) usually lasts about 24 hours. It may be relieved by naproxen or ibuprofen for five to seven days. Ketorolac can be used on presentation for moderate pain. Seldom is discomfort such that the Soldier is unable to perform normal activities. Give the Soldier symptomatic medication and instructions for use. Instruct the Soldier to return if the symptoms are worsening, new symptoms develop, or the minor-care protocol is not controlling the symptoms such that the problem is preventing performance of normal duties. A privileged provider can evaluate further and may prescribe additional medications to help decrease the symptoms during future menstrual cycles.",assocMcp:{type:"mcp",text:"provide NSAID like naproxen or ibuprofen as needed for pain to be taken with food for up to 7 days. Ketorolac as a 1 x dose for moderate pain. A warm compress may also be placed over the abdomen to help with the discomfort. RTC if symptoms are worsening, new symptoms developing, or symptoms are not controlled with the MCP",medFind:[Ke[23],Ke[30]],specLim:["aerobic exercise at own pace/distance x 3 days","must have access to restroom every hour"]}}],next:null,selectAll:!1}]}]},{id:"I-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Fever"},{text:"Pregnant"},{text:"Non-midline Pelvic Pain"},{text:"Pain with Intercourse"}],answerOptions:[]},{text:"Draw the following labs",type:"action",questionOptions:[{text:"urine hCG"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Recurrent vaginitis"},{text:"Presence of IUD"},{text:"Vaginal discharge"},{text:"Genital lesion, ulcer"},{text:"Vaginal lump, mass"},{text:"Pelvic pain during exercise"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["pelvic inflammatory disease","vaginal infection","recurrent infection"],text:"Fever, non-midline pelvic pain, and pain with intercourse are symptoms of pelvic inflammatory disease, which is a serious infection requiring further evaluation. Vaginal infections and certain medications have a higher risk during pregnancy. Recurrent infections or infections that failed initial therapy require treatment regimens and closer observation. Vaginal discharge, lesion, or ulcer requires an invasive physical exam with laboratory evaluation. If facilities for a speculum physical exam and/or microscopic evaluation are not available and evacuation is not feasible, then treat according to history in minor-care protocol section.",ancillaryFind:[{type:"protocol",modifier:"speculum exam *credentialed provider only*"},{type:"lab",modifier:"microscopic laboratory evaluation"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Moderate vaginal pain"},{text:"Presentation different from the treatment protocol descriptions"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["vaginitis"],text:"Vaginitis may have an atypical presentation. In these situations, a more detailed evaluation is required."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",text:"When facilities for a speculum exam and/or microscopic evaluation are not available and evacuation is unfeasible, the Soldier may be treated according to the history below."},{type:"dmp",ddx:["yeast infection (candidiasis)"],text:"presents with a scant amount of thick, white (cottage cheese like) discharge that is usually odorless and may be associated with vulvar itching, soreness, and dysuria. Symptoms are often worse the week before a menstrual cycle. Vaginal pH is typically normal (pH of 4-4.5). Treat with fluconazole",assocMcp:{type:"mcp",text:"treat with fluconazole. RTC if symptoms are worsening, new symptoms developing, or MCP does not resolve the symptoms"}},{type:"dmp",ddx:["bacterial vaginosis"],text:"presents with a thin, greyish discharge, vaginal pH greater than 4.5, and a fishy smell (prominent when 10% potassium chloride is added to a slide of vaginal discharge) without signs of inflammation. Symptoms are often pronounced during menstrual cycle or after intercourse. Treat with metronidazole for seven days. Instruct the Soldier to return if the symptoms are worsening, new symptoms develop, or the minor-care protocol does not resolve the symptoms",assocMcp:{type:"mcp",text:"treat with metronidazole for 7 days. RTC if symptoms are worsening, new symptoms developing, or MCP does not resolve the symptoms",medFind:[Ke[29]]}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"I-5",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Draw the following lab",type:"action",questionOptions:[{text:"urine hCG"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Pregnant"},{text:"Abnormal previous pap"},{text:"Total hysterectomy"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"If the Soldiers menstrual cycle is late, check a pregnancy test. If the Soldier is pregnant, refer to the AEM. Look in lab results for previous pap smears. If there has been an abnormal pap lab result, look for the clinical note that details the plan of care. If a plan of care is not found or last pap smear sample was inappropriate, refer to supervising medical provider. Determine if the plan was followed and discuss with the AEM to determine care."}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"1st pap over 21 y/o"},{text:"21-29 y/o pap/3 yrs"},{text:"30+ y/o pap/3 yrs or pap and HPV/5 yrs if tests are negative"},{text:"Additional screening: HPV vaccine and G/C screening"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:"Confirm the current USPSTF standards. Initial Pap smear should be performed starting at 21 years old. From ages 21-29 years old, Pap smear should be performed every three years. From age 30 and older, Pap smear can be performed every three years or Pap smear and HPV testing every five years if both tests are negative. HPV vaccine is recommended up to age 26. G/C screening is recommended yearly for women less than 26 y/o."}],disposition:[{...me[4],text:"Schedule Appointment"}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:"Confirm the current USPSTF standards. Initial Pap smear should be performed starting at 21 years old. From ages 21-29 years old, Pap smear should be performed every three years. From age 30 and older, Pap smear can be performed every three years or Pap smear and HPV testing every five years if both tests are negative. HPV vaccine is recommended up to age 26. G/C screening is recommended yearly for women less than 26 y/o."}],disposition:[{...me[4],text:"Schedule Appointment"}],next:null,selectAll:!1}]}]},{id:"I-6",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Draw the following lab",type:"action",questionOptions:[{text:"urine hCG"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Pregnant"},{text:"Medication side-effects"},{text:"H/O recent unprotected sex"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["pregnant","side effects of current contraceptive"],text:"Determine date of last menstrual cycle. Check a pregnancy test if the Soldiers menstrual cycle is late. Determine history of previous contraceptive use. If the Soldier is having side-effects from her current birth control or has had recent unprotected sex, refer for further evaluation.",ancillaryFind:[{type:"lab",modifier:"urine hCG"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Discuss effectiveness of each type of contraceptive"},{text:"Discuss contraceptive preferences"},{text:"Discuss additional benefits"}],answerOptions:[{text:"Yes",disposition:[{...me[4],text:"Schedule appointment or referral"}],decisionMaking:[{type:"dmp",ddx:[],text:"Long acting contraceptives are the most effective (surgical/permanent, IUD, implantable). Injectable, oral, patch, vaginal ring effectiveness is partially based on consistent, correct use. Condoms and behavioral modification are least effective. Choose the most effective method that the Soldier will be able to use successfully. If male, discuss the permanent nature of the vasectomy procedure (*Refer to L-5, Requests a Vasectomy), discuss with AEM, and follow local protocol for referral. Discuss potential side effects of hormonal contraceptives. Estrogen-progesterone decrease menstrual symptoms, acne, and hirsutism. Progesterone and IUDs decrease menstrual symptoms. Longer term contraception to include injectable types have a risk of irregular bleeding, spotting. Discuss Soldier preferences and history with AEM. Check hCG if requesting medroxprogesterone acetate intramuscular injection. Schedule appointment with supervising privileged provider for a more thorough discussion of contraceptive options and discussion of potential side effects. Schedule accordingly: routine appointment (injectable, oral, patch, ring) or procedural appointment or referral based on supervising privileged provider preferences (implantable, IUD).",ancillaryFind:[{type:"protocol",modifier:"discuss contraceptive options"}]}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"Schedule appointment or referral"}],decisionMaking:[{type:"dmp",ddx:[],text:""}],next:null,selectAll:!1}]}]},{id:"J-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Airway Compromise/Swelling"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:[],text:""}],disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"New medication"},{text:"Fever"},{text:"Painful (not a sunburn)"},{text:"Failed previous treatment or worsening"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["drug eruption"],text:"Skin rash associated with a medication, fever, or is painful (but not due to a sunburn) has the potential to be very serious. Further evaluation is indicated when it has failed previous treatment or is worsening. Certain anatomical locations present with a higher risk of complications to include the face, genitals area, or inhibiting a joint function."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Change in color"},{text:"Oozing blood or fluid"},{text:"Present > 4 weeks"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"Change in a lesion or oozing of fluids require further evaluation. Skin lesions that have been present for over four weeks may represent a symptom of a systemic condition."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",text:"If the Soldier is already on a treatment for this issue, has not finished the current treatment, and the issues is not getting worse, then instruct the Soldier to continue with the current treatment for the full course. Some skin issues can take two to three weeks or potentially longer for them to work. Confirm with your supervising NCO or supervising privileged provider before returning the Soldier to work. If you recognize the skin lesion, then screen according to the identified skin condition. If you do not recognize the skin lesion, refer the Soldier to the AEM for further evaluation.",assocMcp:{type:"mcp",text:"Continue the current skin treatment regimen if it has not been completed/followed for the necessary amount of time (usually 2-3 weeks). Screen according to pertinent algorithm if you can identify the skin contision. Refer to AEM for further evaluation if you cannot identify the skin condition "}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"J-2",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Check hCG",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Requesting birth control"},{text:"Positive hCG"},{text:"Draining lesion"},{text:"Acute onset"},{text:"Requiring limitations in protective equipment"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"Birth control and a positive hCG requires additional counseling that should be provided by the supervising privileged provider. Hyperandrogenism requires additional evaluation. Draining lesions requires more aggressive therapy. Acute onset of acne symptoms for the first time after age 18 requires further evaluation"}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Acne interferes with wearing equipment"},{text:"Moderate to severe inflammatory acne"},{text:"Scarring or hyperpigmentation"},{text:"Failed initial treatment"},{text:"Appears very self conscious"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"Moderate to severe acne or acne on the back or interferes with wearing equipment requires evaluation for oral medications and temporary profile. Scarring and hyperpigmentation requires more aggressive therapy to avoid further permanent scarring. There can be psychological effects from acne. It is important to identify Soldiers that are very self-conscious and escalating the treatment regimen to quickly control the acne."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",text:"Moderate to severe acne or acne on the back or interferes with wearing equipment requires evaluation for oral medications and temporary profile. Scarring and hyperpigmentation requires more aggressive therapy to avoid further permanent scarring. There can be psychological effects from acne. It is important to identify Soldiers that are very self-conscious and escalating the treatment regimen to quickly control the acne."}],next:null,selectAll:!1}]}]},{id:"J-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Facial Cellulitis"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Abscess requiring drainage on face or neck"},{text:"Signs of scarring"},{text:"Requiring limitations on protective equipment"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["facial cellulitis","abscess"],text:"Facial cellulitis or a draining abscess are signs of a skin infection and not pseudofolliculitis barbae. These conditions require further evaluation and treatment. Cellulitis of the face can have life threatening complications."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Failed conservative therapy"},{text:"Requesting profile"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"After failure of conservative therapy and lifestyle modifications, a permanent profile may need to be considered. Refer to the AEM for counseling prior to initiating the next step in therapy"}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["acne","pseudofolliculitis barbae"],text:"shaving routine modifications are the first line in treatment. The following adjustments can help reduce the penetration of the inter-follicular skin by the hair shaft. Instruct the Soldier to wash the face in a circular motion with soap and warm water once a day to free any embedded hairs. Use a warm compress or warm water on the face before shaving and apply generous amounts of shaving cream for five minutes before shaving to soften the hair. Use a single blade razor, shave in the direction of hair growth, and avoid stretching the skin during shaving to reduce the production of very short hairs. Medication can be used in conjunction with the shaving routine modifications. A topical retinoid at night with or without the combination of a low potency topical steroid. Bumps associated with pseudofolliculitis barbae can remain for a few months after treatment has been started. Instruct the Soldier to return if the symptoms are worsening, new symptoms develop, or the minor-care protocol does not appear to be helping after a few weeks.",assocMcp:{type:"mcp",text:"Counsel the Soldier on shaving routine modification to include washing the face in a circular motion, warm compress and leaving shaving cream on for 5 min prior to shaving, and using a single blade razor. Topical retinoid with or without a low potency steroid can be used once a day at night as an adjunct. RTC if symptoms are worsening, new symptoms developing, or symptoms are not controlled with the MCP",ancillaryFind:[{type:"med",modifier:"tretinoin / topical retinoid"}],medFind:[Ke[21]]}}],next:null,selectAll:!1}]}]},{id:"J-4",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Scaling with Visible Inflammation"},{text:"Abnormal Sensation"},{text:"Painful Erosions"}],answerOptions:[]},{text:"Red Flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."},{type:"dmp",ddx:["seborrheic dermatitis"],text:"Visible inflammation with patchy, orange to salmon-colored or grayish plaques covered with yellowish, greasy scales, concretions of scale around hair shafts, lesions consisting of fissures, oozing, and crusting, are all signs of a more severe form of scalp seborrheic dermatitis."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"2nd complaint"},{text:"Medicated shampoo not (stopped) working"},{text:"Developed new/worsening symptoms"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["dandruff"],text:"Dandruff can be a chronic relapsing condition even in its mild form. All Antifungal shampoos are not the same and Soldiers may have different responses to them. OTC treatment may take some trial and error to find the shampoo that is right for the Soldier. Inflammation, lesions with oozing and crusting are signs that the symptoms are getting worse and the Soldier needs to be evaluated inside of a clinic setting."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["mild dandruff"],text:"there are some risk factors that make a Soldier more susceptible. Some risk factors include if the Soldier is male, Soldier has excessively oily skin and hair and/or if the Soldier suffers from certain diseases (ex. Parkinsons disease, HIV). antifungal shampoo used daily (two to three times per week minimal) for several weeks and remission is achieved. Manage stress levels, spend time (a few minutes) outdoors in the sun (DO NOT sunbathe). Instruct the Soldier to seek medical assistance if mild dandruff is still present and not improving after three to four weeks of antifungal shampoo use, symptoms worsen, or new symptoms begin.",assocMcp:{type:"mcp",text:"Antifungal shampoo used daily (minimum of 2-3 x per week) or several weeks and remission is achieved. Manage stress levels. Spend time (a few minutes) outdoors in the sun (DO NOT sunbathe). RTC if mild dandruff is still present after 3-4 weeks of antifungal shampoo use, symptoms worsen, or new symptoms begin.",ancillaryFind:[{type:"med",modifier:"selenium sulfide 2.5% shampoo"}]}}],next:null,selectAll:!1}]}]},{id:"J-5",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"no red flags"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"New medication"},{text:"Lack hair follicles"},{text:"Smooth, circular hair loss"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:["medication induced hair loss","scarring","alopecia areata"],text:"Examples of medications that can result in hair loss are propranolol, ketoconazole, isotretinoin, colchicine, and cholesterol medications. If hair follicles are not present on exam, then scarring hair loss is more likely requiring a referral to dermatology. Alopecia areata is described as smooth, circular discrete hair loss that occurs over a couple of weeks. Refer to a privileged provider for consideration of intra-lesion steroid injections."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Tinea capitis"},{text:"Papules, pustules"},{text:"Erythema"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["tinea capitis"],text:"Tinea capitis is a fungal infection of the scalp that presents with itching, scaling, and hair loss. It is common in kids but can occur in adults. Treatment is with an oral antifungal. Papules, pustules, and erythema are signs of inflammation which require further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["traction alopecia"],text:"hair loss associated with traction being applied to hair for an extended period of time from tight hair styles often over the frontal and temporal areas. It is associated with traction folliculitis which includes erythema, papules, and sterile pustules. Instruct Soldier to avoid tight hair styles, chemical straighteners, and heating the hair follicle (curling iron, straight iron) till it has resolved. Refer to AEM if signs of inflammation are present to evaluate for treatment with a high potency topical steroid or intra-lesion steroid inject.",assocMcp:{type:"mcp",text:"counsel Soldier to avoid tight hair styles, chemical relaxants, and applying heat to hear until resolved. Refer to AEM for further evaluation if signs of inflammation are present. RTC if symptoms worsen or new symptoms begin"}},{type:"dmp",ddx:["male/female pattern hair loss"],text:"male pattern hair loss often occurs after age 30 with hair loss over the frontal, temporal, and top of the head. On examination hair follicles with a decreased caliber will be seen. Female pattern hair loss occurs over the front and top of the head. It most often occurs after menopause. Instruct the Soldier on the diagnosis",assocMcp:{type:"mcp",text:"discuss the suspected diagnosis with the AEM and then provide counseling to the patient. RTC if symptoms worsen or new symptoms begin"}},{type:"dmp",text:"Refer to AEM if does not meet either of the above patterns. Return to clinic if symptoms worsen or new symptoms develop."}],next:null,selectAll:!1}]}]},{id:"J-6",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Diabetic Soldiers"},{text:"Significant erosions/ulcerations or malodor in affected area"},{text:"Soldiers w/weakened immune systems"}],answerOptions:[]},{text:"Red Flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."},{type:"dmp",ddx:["athlete's foot","secondary bacterial infection"],text:"Peeling, cracking, redness, blisters, and breakdown of the skin with itching and burning are characteristics of both dry skin and athletes foot. If untreated, the fungal infection can lead to a severe secondary bacterial infection."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Rash with no improvement or response to medication"},{text:"Blisters and ulcers"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"Some fungal infections are unresponsive to topical medications and a systemic antifungal treatment is required. Ulcers increase the risk of a secondary bacterial infection."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["interdigital tinea pedis","hyperkeratotic tinea pedis","vesiculobullous tinea pedis"],text:"this type of fungal infection requires keratin for growth, which restricts the infection to the superficial skin, hair, and nails. Interdigital tinea pedis, hyperkeratotic (moccasin-type) tinea pedis and vesiculobullous (inflammatory) tinea pedis are the three major categories of tinea pedis infections. topical antifungal therapy can used to cure a fungal infection which has no secondary infection. Antifungal cream is applied twice a day for four to eight weeks. Instruct the Soldier to return to the clinic if the fungal infection does not respond to OTC medications, symptoms worsen, new symptoms develop. Prevention measures: athlete's foot can be spread through direct and indirect contact: direct, skin-to-skin contact, as may occur when an uninfected person touches the infected area of somebody with athlete's foot or indirect contact, in which the fungi can infect people via contaminated surfaces, clothing, socks, shoes, bed sheets, and towels. Instruct Soldier to keep his or her feet clean and dry, change socks regularly, wear well ventilated shoes and provide feet protection in public places. Use antifungal powder daily, alternate shoes and do not share shoes.",assocMcp:{type:"mcp",text:"Antifungal lotion, ointment, powder, or spray-allied twice a day for 4-8 weeks. RTC if the fungal infection does not respond to medications, symptoms worsen, new symptoms develop. Prevention: instruct patient to keep their feet dry, change socks regularly, wear well ventilated shoes and provide feet protection in public places. Use antifungal powder daily, alternate shoes and do not share shoes.",medFind:[Ke[41]]}}],next:null,selectAll:!1}]}]},{id:"J-7",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Diabetes"},{text:"Immunodeficiency"}],answerOptions:[]},{text:"Red Flags present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Perform potassium hydroxide (KOH) examination"}],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Itchy, red rash in the groin area"},{text:"No improvement in 2 weeks"},{text:"Reoccurring infection"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:""}],decisionMaking:[{type:"dmp",ddx:["diabetes","fungal infection","bacterial infection"],text:"Diabetes can affect every part of the body, including the skin. Soldiers with diabetes are more susceptible to skin conditions such as bacterial infections and fungal infections. Although common infections can be self-treated, the Soldier should see a privileged provider to rule out other more serious diabetic related skin conditions."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Itchy, red ring-shaped rash in the groin area?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:"Some infections and rashes do not respond well to OTC medications and infections may not get better or may reoccur within a few weeks. These Soldiers need to be evaluated to rule out more serious skin conditions. A normal infection may respond better to a prescription strength antifungal."}],disposition:[me[1]],next:null,selectAll:!1},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",text:"Note: In the absence of any of the preceding conditions, minor-care is appropriate."},{type:"dmp",ddx:["tinea cruris"],text:"far more common in men than women. Predisposing factors include copious sweating, obesity, diabetes, and immunodeficiency. OTC medication: topical antifungal medication twice a day for two weeks. Instruct Soldier to keep groin area clean and dry and return to clinic if symptoms worsen, new symptoms develop, symptoms not improving within two weeks, or if the infection returns within a few weeks after using OTC Medications.",assocMcp:{type:"mcp",text:"topical antifungal medications twice a day for 2 weeks. Instruct patient to keep groin area clean and dry and RTC if symptoms worsen, new symptoms develop, symptoms not improving within 2 weeks, or if the infection returns within a few weeks after using medications. Preventive - hygiene",medFind:[Ke[41]],ancillaryFind:[{type:"med",modifier:"clotrimazole 1% cream"}]}}],next:null,selectAll:!1}]}]},{id:"J-8",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"no red flags"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Failed treatment"},{text:"Widespread"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"perform potassium hydroxide (KOH) examination"}],decisionMaking:[{type:"dmp",ddx:["tinea versicolor"],text:"Tinea versicolor that has failed initial therapy or is widespread may require systemic treatment. Presence of scale in the area and a positive KOH test confirms treatment failure requiring systemic treatment. Refer to the supervising privileged provider for counseling and evaluation for treatment."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Recurrent"},{text:"Unidentified"},{text:"Atypical presentation"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["tinea versicolor"],text:"Tinea versicolor often reoccurs. When this occurs, additional counseling to the Soldier is required to help prevent further occurrences. Refer to the AEM for additional counseling and preventative measures. If it is an atypical presentation that you do not recognize, refer to the AEM for further evaluation and treatment"}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["tinea versicolor"],text:"treat with topical terbinafine twice a day for one week. Selenium sulfide 2.5% shampoo lathered over the affected area and left for 10 minutes once a week is also effective. Instruct the Soldier that hypo/hyperpigmentation of the area may remain for months after effective treatment. If the presentation is not classic for tinea versicolor, screen according to the appropriate protocol and discuss with the AEM. Return to the clinic for worsening symptoms, new symptoms, or presence of scale in the lesions after treatment.",assocMcp:{type:"mcp",text:"Topical antifungal medications twice a day for 1 week. Instruct patient that the hypo/hyper pigmented areas can remain for months after effective treatment. If the presentation is atypical, screen according to the identified lesion. If not able to identify the lesion, refer to the AEM for further evaluation and treatment. RTC for worsening symptoms, new symptoms, or presence of scale in the lesions after treatment.",ancillaryFind:[{type:"med",modifier:"selenium sulfide 2.5% shampoo"}],medFind:[Ke[41]]}}],next:null,selectAll:!1}]}]},{id:"J-9",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Location over Tailbone"},{text:"SIRS Criteria"},{text:"Worsening on Antibiotics"},{text:"Palm of Hand"},{text:"Over Joint"},{text:"Black Eschar"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"red flags"},{text:"Fever"},{text:"Rapid progression"},{text:"Cellulitis"},{text:"Indwelling medical device"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"prepare informed consent, timeout, I&D set-up if provider requests"}],decisionMaking:[{type:"dmp",ddx:["abscess","epidermal cyst","septic joint","hidradenitis suppurativa"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",text:"Pilonidal abscesses (over the tail bone) can be much larger than they appear and should be referred to a privileged provider for evaluation. Systemic inflammatory response syndrome (SIRS) criteria, fever, black eschar, rapid progression over hours, and worsening on oral antibiotics are signs of a more significant infection that may require hospitalization. Hand infection, infection over a joint, indwelling medical device, and associated cellulitis increases the risks of serious complications."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Fluctuant mass"},{text:"Multiple abscesses"},{text:"Drained abscess > 5cm diameter"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"prepare informed consent, timeout, I&D set-up if provider requests"}],decisionMaking:[{type:"dmp",ddx:["abscess","carbuncle","Staphylococcal "],text:"An abscess should be drained to allow it to heal, and an abscess with a diameter of greater than five cm will need to be packed. Military population is at risk for community transmission of staphylococcus aureus and should be evaluated for the addition of antibiotic therapy."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["abscess","furuncle","carbuncle"],text:"prior to abscess formation, the skin normally becomes indurated from the inflammation. The skin appears to be warm, red, and tender with a hard area where the inflammation is present. Treatment is minor care. An abscess may form within a couple of days requiring further treatment. Apply a moist, warm compress over the area for 20 minutes every four hours. It will increase blood flow to the area allowing the Soldiers immune system to fight the infection. Instruct the Soldier to return to the clinic after the abscess forms for drainage. Return sooner if symptoms worsen (fevers, chills, increased pain or redness, red streaks, increased swelling, or re-accumulation of pus if it has already drained).",assocMcp:{type:"mcp",text:"Apply a warm moist compress over the abscess for 20 minutes every four hours. RTC for worsening symptoms (fever/chills, re-accumulation of pus, increased pain/redness, red streaks, or increased swelling), new symptoms, if not improving within 3 days."}}],next:null,selectAll:!1}]}]},{id:"J-10",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Eye Pain"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flag"},{text:"Burns"},{text:"Eczema"},{text:"Severe pain"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:["keratitis","HSV-1"],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",text:"HSV-1 infection can occur at any mucosal or skin site. Although rare, eye infection with HSV causes keratitis. Eczema and burns result in breaks in the skin's natural protective barrier increasing the risk of spreading the HSV infection to these areas."}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],decisionMaking:[{type:"dmp",ddx:["viral infection","cold sore","bacterial infection"],text:"Elevated temperature, sore throat, sores on the hand, and moderate to severe pain increase the chance of an alternative viral infection or initial infection requiring further evaluation and possible systemic antiviral therapy. Pustules and yellow, honeycomb crusting suggest a bacterial infection requiring further evaluation."}],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Sore throat"},{text:"Hand sore"},{text:"Pustule, yellow crusting"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["fever blister (cold sore)"],text:"instruct Soldier on contagious nature of HSV-1, cold sores. When symptomatic or cold sores are present, the Soldier is very contagious, and the virus is spread through direct contact. Instruct the Soldier to avoid sharing drinks or kissing anyone until after it has resolved. Provide docosanol (Abreva) topical ointment to be applied to the cold sore five times a day or two doses of valacyclovir 2g 12 hours apart. Return to clinic if symptoms are worsening, new symptoms develop, or it is not improved within 10 days.",assocMcp:{type:"mcp",text:"Counsel the Soldier on the contagious nature of the virus and to avoid sharing a drink or kissing anyone till it has resolved. Provide doconasol topical ointment (1st line) to be applied 5 x per day till cold sore is healed or valacyclovir (2nd line). RTC if symptoms worsen, new symptoms develop, or it is not improved within 10 days",ancillaryFind:[{type:"med",modifier:"doconasol topical ointment"}],medFind:[Ke[43]]}}],next:null,selectAll:!0},{text:"No",disposition:[],next:null,selectAll:!1}]}]},{id:"J-11",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"SIRS criteria"},{text:"Animal Bite, Scratch"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"red flags"},{text:"fever"},{text:"red streaks"},{text:"oozing fluid"},{text:"tetanus risk"},{text:"high risk wound"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["SIRS","bacterial infection","tetanus risk"],text:"Systemic Inflammatory Response Syndrome (SIRS) criteria includes two of the following: heart rate over 90 bpm, respiratory rate over 20, Temp >100.4 or <96.8o F, or WBC >12,000 cells. SIRS criteria with a source of infection is sepsis and requires prompt treatment. Fever, red streaks, and oozing wounds indicate an infection that requires further evaluation and treatment. Puncture wounds, avulsions, from crushing or burns, and wounds contaminated with dirt, saliva, or feces require tetanus immunization if not given within last five years. Clean wounds require tetanus immunization if not given within last 10 years. High risk wounds increase the risk of complications. Bite wounds have a risk of infection. Lacerations over a joint, on the face, or on the hand or foot have a higher risk of complication from the laceration."}],disposition:[me[0]],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Erythema > 1 inch"},{text:"increased warmth"},{text:"increased tenderness"},{text:"laceration"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["infection"],text:"Erythema, warmth, and increased tenderness are signs of inflammation or an early infection that requires further evaluation. A laceration needs to be evaluated to determine if it needs to be closed."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",text:"Gently wash the affected area with soap and water. If there is a laceration, irrigate inside the laceration using a syringe with jets of sterile saline. While washing and irrigating the wound, ensure that all foreign material has been removed from the wound."},{type:"dmp",ddx:["abrasion"],text:"cover the abrasion with an antibacterial ointment. Provide the ointment for the Soldier to apply to the abrasion twice a day. Cover the abrasion with a protective, non-stick sterile dressing and have the Soldier change the dressing daily or when saturated with fluid. Keep the area clean and dry.",assocMcp:{type:"mcp",text:"Wash the area with soap and water. Ensure the area is thoroughly irrigated and all foreign material has been removed. Cover the area with an antibiotic ointment and sterile dressing. Provide materials for wound care. Counsel the Soldier on how to take care of the wound. RTC for increasing redness, bad smell, thick discharge, increasing tenderness, or other concerns.",medFind:[Ke[7]]}},{type:"dmp",ddx:["laceration"],text:"if the edges of the wound can be brought together easily, bleeding is controlled, and there are no signs of infection, minor-care is appropriate. Steri-strips may be applied to keep the skin edges together. If it is a laceration, return to clinic in 24-48 hours for re-evaluation. Otherwise, return to clinic for increasing redness, bad smell, thick discharge, increasing tenderness, or other concerns to include the edges becoming separated.",assocMcp:{type:"mcp",text:"Wash the area with soap and water. Ensure the area is thoroughly irrigated and all foreign material has been removed. Cover the area with an antibiotic ointment and sterile dressing. Provide materials for wound care. Counsel the Soldier on how to take care of the wound. RTC for increasing redness, bad smell, thick discharge, increasing tenderness, or other concerns.",ancillaryFind:[{type:"protocol",modifier:"steri-strips"}],medFind:[Ke[7]]}}],next:null,selectAll:!1}]}]},{id:"J-12",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Fever"},{text:"Pus/redness/swelling"}],answerOptions:[]},{text:"Red Flags?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["infection"],text:"Fever, pus, or redness and swelling at the suture location can be a sign of a secondary infection. Refer the patient to the supervising privileged provider for further evaluation and treatment."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Incomplete closure?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["incomplete closure"],text:"Incomplete closure should be referred to the AEM to determine the next step in wound care."}],next:null,selectAll:!0},{text:"No",disposition:[{...me[2],modifier:"remove sutures. ensure the same number of sutures are removed that were placed"}],decisionMaking:[{type:"dmp",ddx:[],text:"varies depending on the site of the laceration/site of repair. Suture should be removed when: The wound has healed (within 5 to 10 days). The suture line is clean. No purulent drainage, redness, or swelling is present. Document the appearance of the wound (sutured laceration) and number and type of sutures removed. Provide bacitracin if wound edges are still healing. Counsel the patient on wearing sunscreen and sensitivity of the scar to the sun with resulting hyperpigmentation for the first year.",assocMcp:{type:"mcp",text:"bacitracin for the scar. protect the scar from the sun. Wear sunscreen for three months to protect from discoloration. Source: up-to-date",medFind:[Ke[7]]}}],next:null,selectAll:!1}]}]},{id:"J-13",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Airway Swelling"},{text:"Wheezing"},{text:"Anaphylaxis"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Blistering"},{text:"Oral involvement"},{text:"Petechiae"},{text:"Fever"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems. NOTE: If a medication is causing the symptoms, the Soldier may need to be evaluated by a provider to find an alternative medication as needed."},{type:"dmp",ddx:["allergic reaction","anaphylaxis","vasculitis"],text:"An allergic reaction can include swelling within the airway, wheezing and breathing problems, to anaphylaxis. Immediate stabilization and treatment is required. Blistering over the body and oral involvement are signs of a more serious drug reaction. Petechial rash and fever are signs of vasculitis (palpable purpura)."}],disposition:[{...me[0],modifier:"action placeholder"}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"No new medication within 2 weeks"},{text:"Itchy rash with other symptoms"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["medication induced rash"],text:"If the Soldier has not started a medication within the last two weeks, then the rash may not be from a medication. Further evaluation by the AEM is required. Itchy rash (likely hives) with other symptoms needs to be seen by the AEM for evaluation of a more serious reaction."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["hives (urticaria)"],text:"caused by the release of histamine from mast cells often related to an allergic reaction and present with circumscribed, raised, red rash with central pallor that moves around. Treatment is avoidance of the irritating substance, if it can be identified. Diphenhydramine at bedtime can help with the symptoms and allow the Soldier to sleep. Provide up to a three day course of the medication.",assocMcp:{type:"mcp",text:"Hives are common. Counsel to avoid offending agent. Discuss with AEM and notiy prescribing provider. Provide benadryl three times a day for 3 days. RTC for worsening symptoms, development of new symptoms, or other concerns",medFind:[Ke[14]],specLim:["avoidance of offending agent","use latex free gloves or moisturizing soap"]}},{type:"dmp",ddx:["irritant contact dermatitis"],text:"presents with burning, redness, and may progress to fissures of the skin. Treatment is with avoidance of the irritating substance. Skin lotion to help the skin retain moisture and heal. Hydrocortisone ointment PRN inflammation",assocMcp:{type:"mcp",text:"should be treated with avoidance and skin moisturizing lotiion or cetaphil body wash with the addition of hydrocortisone ointment three times a day if needed for 1-2 weeks. RTC for worsening symptoms, development of new symptoms, or other concerns",medFind:[Ke[21]],ancillaryFind:[{type:"med",modifier:"moisturizing lotion"},{type:"med",modifier:"cetaphil body wash"}],specLim:["avoidance of offending agent","use latex free gloves or moisturizing soap"]}},{type:"dmp",ddx:["allergic contact dermatitis"],text:"presents with red, itchy well demarcated area with vesicles, bumps, or scaly skin. Treatment is with avoidance of the irritating substance. Hydrocortisone cream or burrows solution compresses can help with the irritation and itching. RTC for worsening symptoms, development of new symptoms, or other concerns",assocMcp:{type:"mcp",text:"Hives are common. Counsel to avoid offending agent. Discuss with AEM and notiy prescribing provider. Provide benadryl three times a day for 3 days",medFind:[Ke[21],Ke[5]],specLim:["avoidance of offending agent","use latex free gloves or moisturizing soap"]}},{type:"mcp",ddx:["medication-induced"],text:"if a medication is causing the symptoms, the Soldier may need to be evaluated by a provider to find an alternative medication as needed."}],next:null,selectAll:!1}]}]},{id:"J-14",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Trouble Breathing"},{text:"AMS, Drowsy"},{text:"High Risk Location"},{text:"Circumferential Burn"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags present"},{text:"Deep 2nd and 3rd degree"},{text:"> 10% of body"},{text:"Trauma"},{text:"Severe pain"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"provide emergency resuscitation before transport"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["smoke inhalation","compromised airway"],text:"A Soldier with any potential for airway involvement or smoke inhalation causing symptoms should be immediately transported to the nearest qualified or privileged provider. High risk locations for burns include the head, neck, hand, feet, female breast, genitalia, perineum, major joints, and circumferential burns and should be evaluated for referral to a burn center. Partial thickness burns >10% of body surface area, chemical burns, full thickness burns, electrical burns, and burns with associated trauma have a higher risk and should also be evaluated for a burn center. Deep partial thickness (second degree) is painful to pressure only, appear waxy or wet, and do not blanch with pressure. They typically heal within two months."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Second degree burn"},{text:"Secondary infection"},{text:"Sunburn >25% of body"},{text:"Exhaustion"},{text:"Unable to perform duties"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["limited partial thickness burns","secondary infection","heat injury"],text:"Limited partial thickness (second degree) burns present with red, painful skin that may weep and blisters within 24 hours. These burns typically heal within three weeks but require additional management due to risk of secondary infection. Secondary infection (warmth, thick discharge, smell, increasing redness) is a potential complication that should be referred to the AEM. Sunburn of greater than 25% of the Soldiers body surface area or symptoms of exhaustion should be evaluated for a heat injury."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:[],text:"superficial burns only include the epidermal layer of skin. They are red and painful but do not blister. The pain and redness typically resolves within three days, and they heal without scarring. Apply cold packs to the affected area as needed for comfort. Leave the area uncovered. Provide acetaminophen or ibuprofen as needed for pain. For sunburn, instruct the Soldier on the importance of using sunscreen, reapplying it every hour, and risks of cancer with repetitive sun damage to the skin. May recommend OTC aloe vera for additional pain relief. Return to clinic for worsening symptoms, new symptoms, or if not improving within three days",assocMcp:{type:"mcp",text:"Apply cool compresses. Provide ibuprofen or acetaminophen as needed for pain. Keep the area clean and uncovered. May recommend aloe vera for additional pain relief. RTC for worsening symptoms, new symptoms, if not improving within 3 days.",ancillaryFind:[{type:"protocol",modifier:"cool compress"},{type:"med",modifier:"aloe vera"}],medFind:[Ke[23],Ke[0]]}}],next:null,selectAll:!1}]}]},{id:"J-15",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Fever/malaise"},{text:"Epidermal sloughing"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Flu like symptoms"},{text:"Painful erythematous macules"},{text:"Trauma"},{text:"Exposure to new medications"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:[],text:"Serious skin conditions can present with blisters. Fever, malaise, and epidermal sloughing are signs of a more serious medical condition."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Large open blister"},{text:"Erythema or other signs of infection"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["infection"],text:"Large open and infected blisters can become serious health hazards and should be referred to the AEM for further evaluation and treatment."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["unruptured blister on foot"],text:"wash area with antibacterial soap. Cover a large area of surrounding undamaged skin and the treated blister with a protective dressing of moleskin with a hole in the middle cut out for the blister. An adhesive solution such as tincture of benzoin or a surgical adhesive to the skin around the blister to improve the adhesion of the moleskin. Have the Soldier return to the clinic after the blister ruptures",assocMcp:{type:"mcp",text:"Wash area with povidone-iodine and apply an antibacterial ointment to the blister only. Cover a large area of surrounding undamaged skin and the treated blister with a protective dressing of moleskin between treatments. An adhesive solution such as tincture of benzoin or a surgical adhesive may be applied to the skin around the blister to improve the adheasion of the moleskin. Wear two pairs of socks when wearing combat boots (a thin pair of nonabsorbent, non-cotton socks under the boot socks) and to check for proper fit of boots.",ancillaryFind:[{type:"protocol",modifier:"povidone-idone wash"}],medFind:[Ke[7]]}},{type:"dmp",ddx:["rupture blister on foot"],text:"clean the skin with povidone-iodine. Remove the dead skin with sterile scissors. If sterile instruments are not available or personnel have not been taught to perform the procedure, skip this step. Wash area with povidone-iodine and apply an antibacterial ointment to the blister only. Cover a large area of surrounding undamaged skin and the treated blister with a protective dressing of moleskin between treatments. An adhesive solution such as tincture of benzoin may be applied to the skin around the blister to improve the adhesion of the moleskin. Reevaluate the Soldier every 24 hours.",assocMcp:{type:"mcp",text:"Wash area with povidone-iodine and apply an antibacterial ointment to the blister only. Cover a large area of surrounding undamaged skin and the treated blister with a protective dressing of moleskin between treatments. An adhesive solution such as tincture of benzoin or a surgical adhesive may be applied to the skin around the blister to improve the adheasion of the moleskin. Wear two pairs of socks when wearing combat boots (a thin pair of nonabsorbent, non-cotton socks under the boot socks) and to check for proper fit of boots.",ancillaryFind:[{type:"protocol",modifier:"povidone-idone wash"}],medFind:[Ke[7]]}},{type:"dmp",text:"Instruct the Soldier to wear two pairs of socks when wearing combat boots (a thin pair of nonabsorbent, non-cotton socks under the boot socks) and to check for proper fit of boots. Instruct the Soldier to return for further evaluation if: the protective dressing begins to come off, develops blisters that make wearing shoes or boots difficult, significant pain, or signs of infection develop.",assocMcp:{type:"mcp",text:"Instruct the patient to return for further evaluation if: the protective dressing begins to come off. He/She develops blisters that make wearing shoes or boots impossible. He/She is disabled by pain. He/She has signs of infection. The patient should be reevaluated every 24 hours."}}],next:null,selectAll:!1}]}]},{id:"J-16",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Foot Exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags"},{text:"Diabetes mellitus"},{text:"Decreased peripheral sensation to light touch"},{text:"Lesion freely bleeds with paring"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",text:"Diabetes mellitus or a decreased peripheral sensation increases the risk to the Soldier with a peripheral wound; so, evaluation and treatment of a corn should be referred to a privileged provider."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Plantar wart"},{text:"Interfere with normal duty"},{text:"Bunion"},{text:"Mallet or hammer toe"},{text:"Decreased toe motion"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["plantar warts","bunions"],text:"Plantar warts require additional treatment. Warts disrupt the normal skin markings, so skin lines are not evident and have several dark specks within middle of the wart. One treatment option is using liquid nitrogen to freeze the wart in the clinic. An order from a privileged provider is required prior to treating with liquid nitrogen. Bunions are located on the medial side of the base of the first metacarpal with the big toe deviated inward. Bunions may need to be referred to podiatry.",ancillaryFind:[{type:"protocol",modifier:"cryotherapy with liquid nitrogen (provider order required)"},{type:"refer",modifier:"consider referral to podiatry for bunions"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["corns"],text:"soak the Soldiers foot in warm water for 20 minutes. Paring down a callous/corn: the performing medic must have training in the procedure and have the training documented. After the risks and benefits of the procedure have been explained to the Soldier, Soldier has signed the consent form, and a final timeout has been performed, pare down the callous or corn with a scalpel blade. Reduce the hard skin until the lesion is flexible, or the Soldier can stand/bear weight without discomfort. Do not remove skin to the point of bleeding. Instruct the Soldier on weekly self-debridement. Minor-care can be given using a pumice stone. Refer to AEM if special insole is needed to be constructed for the Soldiers shoe. Instruct the Soldier to return if the symptoms are worsening, new symptoms develop, or the minor-care protocol does not resolve the symptoms.",assocMcp:{type:"mcp",text:"as above. RTC if symptoms are worsening, new symptoms developing, or symptoms are not controlled with the MCP"}}],next:null,selectAll:!1}]}]},{id:"J-17",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Perform a Skin Exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Bleeding"},{text:"Sensitive area"},{text:"> 10 warts"},{text:"Upcoming mission limiting treatment"},{text:"Signs of infection or inflammation"},{text:"Treatment > 12 weeks"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"Bleeding may indicate that the lesion is something other than a wart and requires further evaluation. Higher risk locations include the face, breast, perineum, anus, and genital regions. Greater than 10 lesions will require multiple repeat visits and other treatment options can be considered. If treatment would limit or prevent the Soldier from conducting an upcoming mission/task, refer to the supervising privileged provider to determine the best timing of treatment. If signs of an infection or inflammation are present around the wart, refer to the supervising privileged provider for treatment."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"> 3 warts"},{text:"Treatment > 4 weeks"},{text:"Medic not trained on procedure"},{text:"Complication from prior treatment"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["3+ warts"],text:"More than three warts will likely require a follow-up visit. AEM should see the Soldier if he or she returns for complications of the wart treatment or a repeat treatment."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:[],text:"discuss the Soldier and your treatment plan with the AEM and obtain the supervising privileged provider approval prior to starting treatment. Medic must be trained and have had his or her procedure competency validated prior to performing a procedure. All procedures will be directly supervised. Discuss the treatment options and their risks, benefits, and alternative that warts will often go away without treatment after several years with the Soldier. After the consent has been obtained and procedure approved by the supervising privileged provider, perform a final timeout. Clean the wart and surrounding skin. Pare down the callous over the wart but not to the point of bleeding or pain. Then apply the treatment option that the Soldier chose. Treatment options include salicylic acid, cryotherapy, or a combination of both. Cryotherapy includes two freeze thaw cycles that cover the wart and two mm around the wart that takes 30-60 seconds to thaw. Instruct the Soldier that a blister, loss of skin pigmentation to the area, and pain may develop over the site. Salicylic acid may be applied to the wart after freezing and covered with a bandage or without freezing and covered with tape. Soldier can reapply salicylic acid and replace the tape or bandage every two days. Soldier should return in two weeks for re-evaluation and retreatment if needed. It is common for warts to require ongoing treatment for up to 12 weeks. Return earlier if new symptoms or complications from the treatment develop.",assocMcp:{type:"mcp",text:"Obtain approval for treatment from AEM. Counsel the Soldier on options, risks, and course of treatment. Salicylic acid is reapplied daily if using a bandage or every 2 days if using tape. RTC if new symptoms develop or in 2 weeks for next treatment.",ancillaryFind:[{type:"protocol",modifier:" Consent and final Timeout. Clean area and pare down built-up skin."},{type:"protocol",modifier:"Cryotherapy - 2 freeze thaw cycles, freezes the wart and 2mm around it with a 30-60 seconds to thaw and/or salicylic acid."}]}}],next:null,selectAll:!1}]}]},{id:"J-18",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Red Streaks up Foot"},{text:"Gangrene"},{text:"Black Eschar"}],answerOptions:[]},{text:"Skin Exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red flags present"},{text:"Cellulitis"},{text:"Immunocompromised"},{text:"Diabetic"},{text:"Severe infection"},{text:"Recurrent ingrown nail"},{text:"Severe pain, limping"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["cellulitis","diabetes","severe infection","ingrown nail"],text:"Severe lesions are characterized with signs of spreading infection to include red streaks, cellulitis, or ingrown toenails along both nail folds. Red flags, cellulitis, diabetes, and immunocompromised may indicate or increase the risk of a more severe infection requiring antibiotics. Recurrent ingrown toenails need to be evaluated by the supervising privileged provider to determine if permanent nail ablation is required."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Moderate infection"},{text:"Limitations to duty"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["ingrown nail","cellulitis"],text:"Moderate lesions are characterized with substantial erythema and pus. Toenail removal (partial or complete) requires an order for the procedure by a privileged provider. Task must be trained, validated, and documented with the competency assessment file for a medic to be able to perform it. After toenail removal (partial or complete), have the Soldier return in three days to evaluate for healing and for spicule reformation with nail regrowth."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["ingrown nail"],text:"mild lesions can be treated with conservative measures. Signs include minimal to moderate discomfort, some redness, and no discharge or pus. Educate the Soldier on not cutting the toenail below the lateral fold, allowing the toenail to grow out past the lateral fold before trimming, and importance of well-fitting shoes. Poorly fitting shoes can predispose the Soldier to ingrown toenails. Soak the affected foot in warm, soapy water for 15 minutes three times per day. While the foot is soaking, push the nail fold away from the nail. After soaking and drying the area, place a piece of cotton or dental floss under the lateral edge of the nail to separate it from the nail fold. Hydrocortisone cream 1% can also be applied to the inflamed area after each soaking to further decrease inflammation. Consider duty limitation for up to three days as needed. Return to clinic in one week if still having symptoms or sooner if symptoms are worsening to include spreading or increasing redness, formation of pus or discharge, or increasing discomfort.",assocMcp:{type:"mcp",text:"Educate the Soldier on proper trimming of toenail, allowing toenail to grouw out, and proper fitting shoes. Soak foot in warm, soapy water for 15 minutes 3x/day. Place cotton piece or dental floss under lateral nail to separate from nail fold. Apply hydrocortisone cream 1% to dry inflamed area after soaks. Consider duty limitations for up to 3 days as needed. RTC if symptoms are worsening or symptoms are not improved after 1 week.",medFind:[Ke[21]],specLim:["No running, rucking, or jumping","Walk at own pace/distance"]}}],next:null,selectAll:!1}]}]},{id:"K-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Altered mental status"},{text:"Abnormal vital signs"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Patient appears confused, delirious, or unresponsive"},{text:"Dry skin"},{text:"Temperature > 103F"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Ice sheets/douse the patient with water. Start an IV as ordered by doctor or PA. Monitor rectal body temperature. Transport to emergency treatment area."}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["heat stroke",""],text:"A yes response to any of the questions may indicate heatstroke with a breakdown of the bodys heat regulating mechanism. Heatstroke is characterized by high body temperature (>103F), altered mental status (i.e., confusion, delirium, syncope and/or coma) and, in most cases, an absence of sweating. This condition has a high mortality rate and is a MEDICAL EMERGENCY. Lowering the body temperature is the most important treatment. Placing icepacks/ice sheets in the groin, arm pits and behind the neck, along with ice sheets under and on top the Soldier allows for rapid cooling. An alternative is dousing the Soldier with water and gently fanning to allow for evaporative cooling. Start an intravenous infusion. Monitor the Soldiers body (rectal) temperature. Transport to an emergency treatment location if available.",ancillaryFind:[{type:"protocol",modifier:"rectal temperature"},{type:"protocol",modifier:"obtain IV access"},{type:"protocol",modifier:"active cooling protocol"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Is the patient sweating profusely; do they complain of headache, weakness, dizziness, and/or nausea"},{text:"Is the patient complaining of painful cramps of the extremities and/or abdominal muscles and is their body temperature normal"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["heat exhaustion"],text:"A yes response to questions may indicate heat exhaustion which occurs as a result of an excessive loss of water and salt from the body. The syndrome is characterized by profuse perspiration, pallor, and perhaps low blood pressure. The mortality rate from this disorder, if treated, is extremely low. Moving the Soldier to a cool area for rest and the administration of fluids (orally or intravenous infusion, depending on severity of symptoms) will result in prompt recovery. Untreated heat exhaustion may progress to heatstroke."}],next:null,selectAll:!0},{text:"No",decisionMaking:[{type:"dmp",ddx:["mild heat injury"],text:"COOL: place the Soldier in a cool or shaded place. HYDRATE: give the Soldier at least one liter of cool water to drink in the first 30 minutes and then at least one liter of water per hour the next two hours. Advise the Soldier to decrease their activity for the next 24 hours. REASSESS: if the Soldiers symptoms do not begin to resolve themselves within 30 minutes, if they get worse, or if the Soldiers temperature exceeds 100.3 F, refer the Soldier to the supervising privileged provider.",assocMcp:{type:"mcp",text:"COOL: place the Soldier in a cool or shaded place. HYDRATE: Give the Soldier at least one liter of cool water to drink in the first 30 minutes and then at least one liter of water per hour the next 2 hours. Advise the Soldier to decrease his activity for the next 24 hours. REASSESS: If the Soldier's symptoms do not begin to resolve themselves within 30 minutes, if they get worse, or if the Soldier's temperature exceeds 101F"}}],disposition:[me[2]],next:null,selectAll:!1}]}]},{id:"K-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"T<96 degrees F"},{text:"Altered Mental Status"},{text:"Abnormal Vital Signs"},{text:"Frostbite"},{text:"Trauma"}],answerOptions:[]},{text:"Rectal Temp",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Neurologic Symptoms"},{text:"Infection"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"support ABCs. IVs. transport horizontal on stretcher. start warming."}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["hypothermia","head injury","frostbite"],text:"Mild hypothermia presents with body temperature 90-95oF, normal mental status, tachycardia, tachypnea, and shivering. Moderate hypothermia presents with body temperature 82-90 F, lethargy, bradycardia with arrhythmias, and hypoventilation without shivering. Severe hypothermia presents with body temperature <82 F, coma, asystole, and apnea so that the Soldier may appear dead but resuscitation is still possible. Note any discrepancy between the extent of an abnormal vital sign and the degree of hypothermia may represent an underlying alternate cause for the vital sign abnormality like a head injury for confusion or hypovolemia for tachycardia. Frostbite may appear white or grayish-yellow and be hard or waxy to the touch. Support the Soldiers airway, breathing, circulation, start two large bore IVs with warmed fluids, remove wet clothes, use body heat, blankets, and space/hypothermia blanket to rewarm, and transport horizontally.",ancillaryFind:[{type:"protocol",modifier:"obtain IV access"},{type:"protocol",modifier:"active warming protocols"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"H/O psych meds or narcotics"},{text:"H/O alcohol abuse"},{text:"Severe Pain"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["opioid use","behavioral health medication use","alcohol use"],text:"Symptoms of hypothermia with a normal temperature suggests an alternative diagnosis. Opioids, behavioral health medications, and alcohol can include medications for anxiety, depression, antipsychotics can impair thermoregulation. Severe pain associated with a nonfreezing cold injury requires further evaluation and management"}],next:null,selectAll:!0},{text:"No",disposition:[],next:4,selectAll:!1}]},{text:"Immersion Foot?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{type:"OTHER",text:"Screen Immersion Foot K-3"}],decisionMaking:[{type:"dmp",ddx:["immersion foot","non-freezing cold injury"],text:"See protocol K-3 for immersion foot. Immersion foot usually results when the skin is exposed to wet, cold foot gear or from immersion at temperatures from 32 F to 59 F for over two to three days (nonfreezing cold injury (NFCI) or immersion foot) and presents with a white, wrinkled, numb, painless extremity."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["cold without criteria for hypothermia"],text:"move Soldier to warm area. Remove wet clothing. Rewarm through utilizing body heat and space/hypothermia blanket. Do not place numb area by heat source (risk of burns).",assocMcp:{type:"mcp",text:"move to warm area, remove wet clothes, and rewarm through body heat and space/hypothermia blanket. Monitor closely and elevate care if not improving within 30 minutes."}}],next:null,selectAll:!1}]}]},{id:"K-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Gangrene/Necrosis"},{text:"Hemorrhagic Blisters"},{text:"Hypothermia"},{text:"Frostbite"},{text:"Trauma"}],answerOptions:[]},{text:"Extremity Exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Severe pain"},{text:"Signs of infection"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"remove wet clothes. rewarm the soldier if hypothermic"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["frostbite","hypothermia","gangrene","infection"],text:"Frostbite, hypothermia, and signs of gangrene represent a serious medical condition that requires prompt treatment. Severe pain or signs of an infection (fever, red streaks, or swollen glands) require further evaluation by a privileged provider. Hypothermia should be rewarmed once the Soldier is under shelter and able to stay warm. Do not rub the extremity. Do not rewarm the extremity in NFCI unless frostbite is also present. During the exam, it is important to look for other injuries, especially in the setting of trauma.",specLim:["limit exposure to cold environments"]}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Unable to perform duties"},{text:"Symptom > 1 week"},{text:"Pain not controlled"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"Symptoms lasting longer than one week will need a more in-depth evaluation. If the Soldier is unable to perform duties, a profile for one week may initially be required."}],disposition:[me[1]],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["immersion foot"],text:"rewarm the extremity gradually with bed rest, elevation of the extremity, and air drying at room temperature. Rapid warming can increase pain, swelling, and risk of further injury in the extremity. Limit activities with affected extremity and keep elevated for three days. Soldier may have a slapping, flat footed gait upon starting to walk that should improve within a week. Rehydrate with warm IV fluids and provide tetanus prophylaxis if required (discuss with AEM prior to giving). Ibuprofen, amitriptyline (requires a privileged provider prescription) as needed for pain. A fan to cool the affected extremity can also help with the pain. Refer to AEM if pain is not controlled. Return to clinic if new symptoms develop, condition worsens, signs of infection.",assocMcp:{type:"mcp",text:"Rest, elevate, and air dry affected extremity at room temperature. Limit activities for 3 days. Rehydrate with warm IVF, tetanus prophylaxis (AEM approval required). Ketorolac for moderate pain. Ibuprofen as needed for minor pain. Amitriptyline at night as needed for pain (provider prescription required). RTC if symptoms are worsening, signs of infection, new symptoms developing, or symptoms are not controlled with the MCP not improving after 1 week.",medFind:[Ke[23],Ke[24]],ancillaryFind:[{type:"protocol",modifier:"obtain IV access"},{type:"protocol",modifier:"tetanus prophylaxis"},{type:"med",modifier:"Amitriptyline"}],specLim:["limit activities for 3 days","elevate affected extremity x 3 days"]}}],next:null,selectAll:!1}]}]},{id:"K-4",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Diffuse symptoms"},{text:"Not exposed to dry wind"},{text:"Signs of infection"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["windburn","infection","cold weather injury"],text:"Since exposure to dry wind causes chapping, involvement of areas other than the hands and face or not being exposed to dry wind makes this diagnosis unlikely, and the Soldier should be referred for further evaluation. Presence of inflammation other than simple skin redness warms of the possibility of infection and requires evaluation for possible antibiotics. Numbness can be a sign of a cold injury."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["chapped skin"],text:"cover the exposed area so that it is no longer exposed to the drying wind. Apply moisturizing lotion (oil-based cream or ointment). Apply petroleum jelly or lip balm to the lips. Moisturizing cream can also protect from further wind effects",assocMcp:{type:"mcp",text:"Cover affected skin area. Apply moisturizing lotion to affected area. Apply petroleum jelly or lip balm to the lips, if needed. RTC if symptoms are worsening, signs of infection, or new symptoms develop."}}],next:null,selectAll:!1}]}]},{id:"K-5",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"White or greyish-yellow color"},{text:"Hard, or waxy to touch"},{text:"Blisters, cyanosis after rewarming"},{text:"Hypothermia"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"pad or splint affected area. Move Soldier to a warm area. Remove wet clothing. Rewarm using body head and space/hypothermia blanket. Do not rub area, place area near fire/heating element, or rewarm area if chance of refreezing. Tetanus prophylaxis"}],decisionMaking:[{type:"dmp",ddx:["frostbite"],text:"Presentation includes complaints of a cold, numb, and clumsy affected area. Area may appear white or grayish-yellow and be hard or waxy to the touch. Blisters or cyanosis will be present after rewarming.",assocMcp:{type:"mcp",text:"pad or splint the affected area. Avoid walking/standing on frostbitten feet. If walking required for evacuation, do not rewarm prior to walking. Move Soldier to warm area. Remove wet clothing. Do not rewarm frostbitten area if there is a possibility of the area refreezing. Rewarm with placing area in warm water or body heat and space/hypothermia blanket. Do not place frostbitten area by heat source (risk of burns with sensory loss) or rub the frostbitten area.",ancillaryFind:[{type:"protocol",modifier:"passive warming protocol"}]}}],next:null,selectAll:!0},{text:"No",disposition:[{...me[2],modifier:"pad or splint affected area. Move Soldier to a warm area. Remove wet clothing. Rewarm using body head and space/hypothermia blanket. Do not rub area, place area near fire/heating element, or rewarm area if chance of refreezing. Tetanus prophylaxis"}],decisionMaking:[{type:"dmp",ddx:["immersion foot"],text:"If not hypothermia or frostbite, screen for trench foot (protocol K-3)."}],next:null,selectAll:!1}]}]},{id:"K-6",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Secondary infection"},{text:"No nits or lice seen"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["secondary infection","contact dermatitis","scabies"],text:"Secondary infection is common due associated itching. If nits and lice are not seen, then further evaluation is needed for a different diagnosis (contact dermatitis or scabies)."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["pediculosis"],text:"wash clothes, sleeping linens, sleeping bag in hot water (above 149F) or have them dry cleaned. If unable to wash or dry clean, place in a sealed bag for two weeks.",assocMcp:{type:"mcp",text:"launder clothes and bed linens in hot water."}},{type:"dmp",ddx:["pediculosis (body)"],text:"lice live on the seams of the clothing. Permethrin 5% application can also be used in addition to laundering the clothes",assocMcp:{type:"mcp",text:"apply permethrin 5% cream to body.",ancillaryFind:[{type:"med",modifier:"permethrin 5% topical cream"}]}},{type:"dmp",ddx:["pediculosis (head)"],text:"wash the area without using conditioner and towel dry. Apply permethrin cream to saturate the affected area. Leave on for 10 minutes. Rinse with warm (not hot) water. Use a close toothed comb to remove nits (eggs from base of hair follicles). Repeat in one week if nits or lice are still present.",assocMcp:{type:"mcp",text:"wash hair without conditioner and towel dry. Apply permethrin 1% cream. leave on for 10 minutes. Rinse with warm waer. Remove nits and dead lice with thin toothed comb",medFind:[Ke[33]]}},{type:"dmp",ddx:["pediculosis (pubic)"],text:"screen for other STIs. Treat recent sexual contacts at the same time. Skin should be cool and dry. Apply permethrin cream to all affected areas (groin, buttock, thighs, trunk, and axillae) for 10 minutes and then rinse off in warm water. Remove nits with tweezers or thin toothed comb. Follow-up in 10 days. If unable to follow-up, retreat with permethrin cream in 10 days due to 40% of Soldiers not having cleared the infection with one treatment.",assocMcp:{type:"mcp",text:"screen for other STDs. Treat sexual partners at same time. Apply permethrin 1% cream to cool, dry areas (groin, buttock, upper thighs, trunk, axillae) for 10 minutes. Rinse with warm water. Follow-up in 10 days for repeat evaluation",medFind:[Ke[33]],ancillaryFind:[{type:"lab",modifier:"RPR / syphilis screen"},{type:"lab",modifier:"HIV"},{type:"lab",modifier:"GC/CT NAAT"},{type:"lab",modifier:"Urinalysis"},{type:"protocol",modifier:"contact tracing"}]}}],next:null,selectAll:!1}]}]},{id:"K-7",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Swelling of Lips or Tongue"},{text:"Trouble Breathing"},{text:"Abnormal Vital Signs"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Wheezing, SOB"},{text:"Hives, H/O allergy"},{text:"Poisonous insects"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"Epi pen if indicated"}],decisionMaking:[{type:"dmp",text:"Wheezing, shortness of breath: immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["anaphylaxis"],text:"Red flags, hives, or history of severe reaction from similar insect bite (bee sting allergy), have Soldier inject epinephrine pen if indicated (signs of respiratory or circulatory compromise) and refer to a privileged provider immediately. Reported poisonous insect bite (brown recluse, black widow, etc.) should also be immediately referred.",medFind:[Ke[17]]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"No signs of bite"},{text:"Blister, ulcer, pain"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"If no signs of an insect bite can be seen, a blister or ulcer is present, or there is moderate to severe pain, refer to the AEM for further evaluation because it may be something other than an insect bite."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["insect bite"],text:"remove any stinger, head of tick, or other biting apparatus left at the bite site. Clean with povidone-iodine (betadine) solution. Apply calamine lotion or hydrocortisone 1% cream four times per day as needed for itching. Apply cold compress or ice pack as needed for swelling. Return to clinic if symptoms worsen, new symptoms develop, or symptoms are not improving within 48 hours",assocMcp:{type:"mcp",text:"remove any stinger, head of tick, or other biting apparatus. Clean site with povidone-iodine solution. Apply calamine lotion or hydrocortisone 1% cream every 6 hours as needed for itching. Apply an ice pack as needed for swelling. RTC if symptoms worsen, new symptoms develop, or symptoms are not improving within 48 hours",medFind:[Ke[37],Ke[12],Ke[21]]}}],next:null,selectAll:!1}]}]},{id:"L-1",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Known Infection"},{text:"High Risk Contact"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"High risk exposure"},{text:"Exposure with HIV"},{text:"In a lab"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"wound care. Document exposure"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["HIV exposure","hepatitis B exposure","hepatitis C exposure"],text:"Known or high risk contacts for HIV should be offered prophylaxis medications to decrease the risk of infection if they had non-intact skin, mucous membrane, blood, or at risk body fluid exposures. Prophylaxis medications should be started within two hours of initial exposure but no later than 72 hours. With hepatitis B, immunoglobulin should be provided within 24 hours of exposure but no later than one week. With hepatitis C, post exposure management is with early detection and treatment of an infection",ancillaryFind:[{type:"med",modifier:"HIV post-exposure prophylaxis within 2-72 hours of exposure"},{type:"lab",modifier:"HIV"},{type:"lab",modifier:"HEP B panel"},{type:"lab",modifier:"HEP C panel"},{type:"med",modifier:"Hepatitis B immunoglobulin within 24 hours - 1 week of exposure"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:">7 days from exposure"},{text:"No risk exposure"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["HIV exposure","hepatitis B exposure","hepatitis C exposure"],text:"Feces, nasal secretions, saliva, gastric secretions, sputum, sweat, tears, and urine are not considered to be infectious without blood being present within them. Intact skin is a successful barrier to potentially infectious fluid. Note that cuts, abrasions, dermatitis are not considered intact skin. These exposures should be referred to the AEM for counseling and referral to a privileged provider if needed. Exposures that are over seven days old are no longer within the window for prophylaxis treatment. They should be referred to the AEM for counseling and required laboratory testing.",ancillaryFind:[{type:"lab",modifier:"HIV"},{type:"lab",modifier:"HEP B panel"},{type:"lab",modifier:"HEP C panel"},{type:"protocol",modifier:"infectious disease counseling"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["HIV exposure","hepatitis B exposure","hepatitis C exposure"],text:"for Soldiers who are exposed to blood or body fluids through a wound or mucous membrane, wash the area with soap and water or flush the mucous membranes with saline or water. Clean any wounds with an alcohol-based hand hygiene agent. Alcohol helps kills the HIV virus. Document the exposure with: source person and Soldier risk factors, serologic tests (HIV, hepatitis B, hepatitis C), type of exposure to include instrument (hollow bore needle, scalpel if indicated), time of incident, body fluid involved, body location of exposure to include depth of wound, and contact time with contaminated fluid. If the source person is known to be infected, it is important to determine the persons most recent viral load and previous treatment to include drug resistance.",assocMcp:{type:"mcp",text:"Ensure the following information is documented in the healthcare record before the patient leaves: HCP - the following information should be obtained from the injured HCP and verified from their medical/occupational health record. Dates of HepB immunizations, post-immunization titer, if known, previous testing (if available) for HBV and HCV, Tetanus immunization status, current medications, current or underlying medical conditions that might influence use of/response to vaccination. EXPOSURE - the following information regardint the exposure should be obtained: the date and time of the exposure, nature of the exposure (i.e., non-intact skin, mucosal, percutaneous, human bite), type of fluid (i.e., blood, blood contaminated fluid, or other contaminated fluid), body location of the exposure and contact time with the contaminated fluid, for percutaneous injuries a description of the injury (e.g., depth of wound, solid versus hollow needle, sharp use in source patient) ",ancillaryFind:[{type:"lab",modifier:"HIV"},{type:"lab",modifier:"HEP B panel"},{type:"lab",modifier:"HEP C panel"},{type:"protocol",modifier:"infectious disease counseling"}]}}],next:null,selectAll:!1}]}]},{id:"L-2",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Exposed Pulp"},{text:"Avulsed Tooth"},{text:"Severe Pain"},{text:"Trauma"},{text:"Chest Pain, SOB"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Loose tooth"},{text:"Abscess/ infection"},{text:"Gingivitis, periodontitis"}],answerOptions:[{text:"Yes",disposition:[{...me[0],text:"Dentist or Provider Now"}],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["exposed pulp","oral infection"],text:"Exposed pulp (feathery material in middle of tooth) knocked out tooth with tooth present, severe pain, signs of oral infection (redness, gum bleeding, and swelling) should be referred to the Dentist. Trauma with associated jaw pain, sinus problems with tooth pain, heart symptoms with jaw pain (SOB, sweating, lightheaded, chest pain/pressure), signs of face infection, or if the dentist is not available should be referred to the supervising privileged provider",ancillaryFind:[{type:"refer",modifier:"dental"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Broken tooth"},{text:"Issue not below"},{text:"Jaw pain not from trauma"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"Dentist or AEM Now"}],decisionMaking:[{type:"dmp",ddx:["broken tooth without exposued pulp","TMJ dysfunction","infection"],text:"AEM can provide temporary pain medications and treatment for a broken tooth (pulp is not showing). Jaw pain not from trauma can be further evaluated by the AEM for temporomandibular joint dysfunction or infection."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["furry tongue","leukoplakia"],text:"benign condition often due to antibiotic use, tobacco use or poor oral hygiene. Treatment is to brush the area with toothpaste and a soft toothbrush three times per day. White patches on the oral mucosa (leukoplakia) is a benign condition often due to smokeless tobacco use or mechanical irritation (braces, chewing). Instruct on importance of surveillance during dental visits, because there is a risk that it could progress to cancer over the next 10 years. If an area is indurated, refer to a dentist now to be evaluated to determine if a biopsy is necessary.",assocMcp:{type:"mcp",text:"Furry tongue - brush the tongue with toothpaste and a soft toothbrush 3 times per day. White plaque (leukoplakia): counsel the Soldier on importance of surveillance during yearly dental exams. If an indurated area is present, Soldier should be referred to a dentist",ancillaryFind:[{type:"refer",modifier:"dental if induration present"}]}},{type:"dmp",ddx:["halitosis"],text:"mostly commonly from poor oral hygiene and caused by bacteria on material between the teeth and on the back third of the tongue. It can also be related to eating certain types of food/beverages, smoking, low saliva flow states (sleeping, dry mouth), or infection/inflammation (tonsils, sinuses, bronchitis). After obtaining a history, refer to provider or dentist if indicated. Otherwise, instruct on the likely cause and importance of proper oral hygiene with brushing three times per day and flossing daily. Return to clinic if symptoms are not improving within one week or additional symptoms develop.",assocMcp:{type:"mcp",text:"screen for causes of bad breath. Refer to provider or dentist if indicated. Otherwise, counsel on likely cause and importance of good oral hygiene. RTC if not improving within 1 week or new symptoms develop."}}],next:null,selectAll:!1}]}]},{id:"L-3",options:[{text:"Red Flags",type:"rf",questionOptions:[{text:"Diffuse"},{text:"Bloody Diarrhea"}],answerOptions:[]},{text:"Perform an oral Exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Red Flags"},{text:"Painless"},{text:"Also located in groin"},{text:"H/O bloody diarrhea"},{text:"Diffuse rash"},{text:">2 weeks"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems."},{type:"dmp",ddx:["stevens-Johnson syndrome","erythema multiforme","lupus","behcet's syndrome","crohn's disease"],text:"Diffuse lesions can be a sign of an inflammatory disorder (Stevens-Johnson syndrome, erythema multiforme). Painless lesion can be a sign of lupus. Lesions within the mouth and groin can represent Behcets syndrome. Mouth sores can be a sign of Crohns Disease requiring further evaluation by the supervising privileged provider. Lesions that have been present for over two weeks need further evaluation to rule out other causes."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Cluster of ulcers"},{text:">5mm ulcer"}],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:["HSV","HZV"],text:"Herpes simplex and herpes zoster can both presents as a cluster of ulcers. When it is within the mouth, refer the Soldier to the AEM for further evaluation. Large oral ulcers could be from other causes or require additional treatment."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["aphthous ulcer (canker sore)"],text:"most common oral ulcer. They present as small, painful, shallow, round, or oval oral ulcers with a grayish base. Apply  inch of triamcinolone oral paste to the ulcer at bedtime. It should resolve 10-14 days. Refer to the supervising privileged provider if there is a history of severe stomach pain or bloody diarrhea. Instruct the Soldier to return to the clinic for further evaluation if new symptoms develop, symptoms worsen, or the symptoms are not controlled with the current regimen or resolved within two weeks.",assocMcp:{type:"mcp",text:"apply 1/4 inch of triamcinolone acetate oral paste to the ulcer at bedtime. It should resolve in 10-14 days. RTC if symptoms are worsening, new symptoms developing, or symptoms are not controlled with the MCP or resolved within 2 weeks.",ancillaryFind:[{type:"med",modifier:"triamcinolone acetate oral paste"}]}},{type:"dmp",ddx:["hand, foot, and mouth disease"],text:"common in children. It presents with oval pale papules with a red rim on the palms and soles of the feet with an aphthous ulcer. Elevated temperature, feeling tired, and a sore throat often start before the lesions appear. Treatment is supportive. Provide acetaminophen as needed for elevated temperature and ibuprofen as needed for malaise. Lozenges, salt water gargles (1/4 teaspoon of salt in 1 cup of warm water) and drinking warm fluids may also help with the sore throat. Instruct the Soldier to return to the clinic for further evaluation if new symptoms develop, symptoms worsen, or the symptoms are not controlled with the current regimen or resolved within two weeks.",assocMcp:{type:"mcp",text:"lesions on the palms and soles of the feet. provide ketorolac, acetaminophen every 6 hours as needed for fever, ibuprofen every 6 hours as needed for malaise, and lozenges or lidocaine gargle as needed for sore throat. RTC if symptoms are worsening, new symptoms developing, or symptoms are not controlled with the MCP or resolved within 2 weeks.",medFind:[Ke[24],Ke[0],Ke[23],Ke[8],Ke[25]]}}],next:null,selectAll:!1}]}]},{id:"L-4",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Narcotic, Psych med"},{text:"Sleeping med"},{text:"Birth control"},{text:"Chronic medication"}],answerOptions:[{text:"Yes",disposition:[{type:"OTHER",text:"Place secure message or T-Con for Provider"}],decisionMaking:[{type:"dmp",ddx:["repeat prescription"],text:"Narcotics, psychiatric medications, sleeping medicines, birth control, and chronic medications should be referred to a privileged provider as a secure message or telephone consult. The privileged provider will need to determine if the underlying condition is still being adequately treated and when the next follow-up appointment is needed."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Acute condition that failed initial treatment"},{text:"Prescription"}],answerOptions:[{text:"Yes",disposition:[{...me[1],text:"Refer to AEM"}],decisionMaking:[{type:"dmp",ddx:["repeat prescription"],text:"Acute conditions that have failed initial treatment should be referred to the supervising privileged provider for further evaluation. Acute medication can be re-provided if the Soldier lost his or her medication. Prior to re-providing the medication, review the Soldiers medical record to determine how much longer he or she is supposed to be on the medication."}],next:null,selectAll:!0},{text:"No",disposition:[{type:"OTHER",text:"Provide Acute OTC Medication"}],decisionMaking:[{type:"dmp",ddx:["repeat prescription"],text:"Acute conditions that have failed initial treatment should be referred to the supervising privileged provider for further evaluation. Acute medication can be re-provided if the Soldier lost his or her medication. Prior to re-providing the medication, review the Soldiers medical record to determine how much longer he or she is supposed to be on the medication."}],next:null,selectAll:!1}]}]},{id:"L-5",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Provide Counseling",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Not stable relationship"},{text:"No children"},{text:"Under 30 years old"},{text:"PCM Performs"}],answerOptions:[{text:"Yes",disposition:[{type:"OTHER",text:"Schedule appointment with PCM"}],decisionMaking:[{type:"dmp",ddx:["requesting vasectomy"],text:"Vasectomy is for permanent birth control. If the Soldier is not in a stable relationship with acceptance of the other person, doesnt already have kids, or is under 30 years old, then refer to the privileged provider for counseling prior to referring the Soldier for a vasectomy. If the privileged provider performs vasectomies, the privileged provider will need to counsel the Soldier before the procedure."}],next:null,selectAll:!0},{text:"No",disposition:[{type:"OTHER",text:"Message Provider or Local Policy"}],decisionMaking:[{type:"dmp",ddx:["requesting vasectomy"],text:"Process to schedule a vasectomy varies by location. Message the privileged provider (Secure Messaging, T-con, etc.) to request a referral for the procedure or follow local process if different."}],next:null,selectAll:!1}]}]},{id:"L-6",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Provide Counseling",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Rabies"},{text:"Not required"},{text:"Requested early"},{text:"Contraindication for immunization"},{text:"Medic not trained"}],answerOptions:[{text:"Yes",disposition:[{type:"CAT I",text:"Provider Now (Rabies) or AEM Now"}],decisionMaking:[{type:"dmp",ddx:["requires rabies ppx","routine immunization"],text:"Rabies immunoglobulin needs to be referred to the supervising privileged provider. Routine immunizations are normally provided only at scheduled times. If the immunization is requested early, is not on the required immunization series, is contraindication, or you are not trained to provide, then refer the Soldier to the AEM. Contraindications include history of a severe reaction to a vaccine, eggs or egg protein, neomycin, or streptomycin. Being immunocompromised, around an immunocompromised person, or pregnant are contraindications that require further evaluation."}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["routine immunization"],text:"If the clinic does not have the immunization requested, refer the Soldier to the appropriate location (readiness clinic, immunizations, etc.). If the clinic does have the immunization and you are trained to provide it, obtain approval from your AEM. After obtaining approval, counsel the Soldier on the immunization, confirm that there are no contraindications, and provide the vaccine according to the package insert. After providing the vaccine, document the vaccination information in the appropriate databases or follow the local policy to have the information documented. Observe Soldier for 15 minutes post-immunization prior to discharge. Have the Soldier return to clinic if symptoms develop after the vaccination to include a rash, local redness or infection, or fever.",assocMcp:{type:"mcp",text:"If you don't have the immunization, refer to the appropriate location (readiness clinic, immunization, etc.). Obtain approval from the AEM. Counsel the patient on the vaccine. Confirm no contraindications. Provide the vaccine according to the packaged insert. Document the vaccination information in the required databases or follow local policy to have it documented. RTC if symptoms develop after the vaccine to include redness or infection at vaccine site, rash, anaphylaxis, seizure, or any other serious symptoms.",ancillaryFind:[{type:"protocol",modifier:"give immunization"}]}}],next:null,selectAll:!1}]}]},{id:"L-7",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Lymph node exam",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Multiple body areas"},{text:"Unexplained weight loss"},{text:"Supraclavicular"},{text:"Posterior Cervical"},{text:"Not mobile"},{text:"Not soft"},{text:"No recent infection"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If the Soldier presents with any of the red flags, immediately disposition the Soldier as Provider Now. These can be signs of significant underlying medical problems"},{type:"dmp",ddx:["systemic illness","fibrosis"],text:"Unexplained weight loss and enlarged nodes in multiple body areas may represent a systemic illness. Supraclavicular and posterior cervical may represent a more concerning illness. Non-mobile and hard or rubbery nodes may represent nodal fibrosis. Lack a recent infection (within two weeks) or inflammation in the area of the lymph node to cause the lymph node to enlarge requires further evaluation by the supervising privileged provider."}],next:null,selectAll:!0},{text:"No",disposition:[{type:"OTHER",text:"Screen for infection Sx"}],decisionMaking:[{type:"dmp",ddx:["infection"],text:"Lymph nodes that are associated with a localized infection or inflammation may be screened according to patient presentation of potential infectious exposure/history, chills, sweats, fatigue, and/or intermittent fever (although, persistent fevers and/or any associated abnormal vital signs will require evaluation by supervising privileged provider)."}],next:null,selectAll:!1}]}]},{id:"L-8",options:[{text:"Check blood pressure",type:"action",questionOptions:[],answerOptions:[]},{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Greater than 150/90"},{text:"Lower than 90 systolic"},{text:"Difference > 15 mmHg between arms"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"lay in dark, quiet room if BP elevated"}],decisionMaking:[{type:"dmp",ddx:["hypertension","hypertensive urgency","aortic aneurysm"],text:"If the blood pressure is greater than 150/90 (either one or both of the two numbers are elevated), recheck the blood pressure after five minutes. If it is still greater than 150/90 or the systolic blood pressure is lower than 90 refer the Soldier to a privileged provider for evaluation. Blood pressure over 180/120 is considered severe (hypertensive urgency) and requires prompt treatment. Severe hypertension can cause permanent end organ damage. Have the Soldier lay down in a dark, quiet room while waiting for transport or to be seen by the privileged provider. A difference of greater than 15mmHg between arms suggests an arterial issue."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Last day of 5 day blood pressure check"},{text:"Orthostatic Hypotension"}],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"start IVF if orthostatic"}],decisionMaking:[{type:"dmp",ddx:["orthostatic hypotension","last day of BP check"],text:"On the last day of the blood pressure check, refer the Soldier to the AEM to evaluate the recorded blood pressures. Orthostatic hypotension is usually associated with feeling lightheaded upon standing and systolic blood pressure drops by 20, diastolic blood pressure drops by 10, or heart rate increases by 20 with standing.",ancillaryFind:[{type:"protocol",modifier:"tilts test"},{type:"protocol",modifier:"obtain IV access"}]}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:["BP check"],text:" If it is not the last blood pressure check, remind the Soldier to return for his or her next check. "}],next:null,selectAll:!1}]}]},{id:"L-9",options:[{text:"Record Review",type:"action",questionOptions:[],answerOptions:[]},{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"MEDPROS RED?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[4],text:"Schedule appointment or refer for service"}],decisionMaking:[{type:"dmp",text:"If MEDPROS is identified as being red, instruct the Soldier on how to correct the medical readiness deficiencies, and schedule an appointment as needed."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"Non-deployable profile"},{text:"Behavioral Health"},{text:"Specialty Care"}],answerOptions:[{text:"Yes",disposition:[{...me[4],text:"Schedule appointment"}],decisionMaking:[{type:"dmp",text:"Identification of a non-deployable profile, behavioral health appointments, specialty care appointments, or a pregnant or postpartum Soldier requires a referral to the supervising privileged provider for further evaluation prior to having the form signed. "}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"Fill out paper. Provider review and sign"}],decisionMaking:[{type:"dmp",text:"If no deficiencies or issues are identified, fill out the form for the supervising privileged provider to review and sign. Instruct the Soldier to wait or return at a later specified time depending on supervising privileged provider availability and local policy."}],next:null,selectAll:!1}]}]},{id:"L-10",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Enrolled in ABCP"},{text:"BMI > 30 and not muscular build"},{text:"Struggling with weight for >6 months"},{text:"H/O failing Ht/Wt/Tape"}],answerOptions:[{text:"Yes",disposition:[{...me[4],text:"Schedule Provider Appointment",modifier:"Screening labs. BHC referral. Dietician referral"}],decisionMaking:[{type:"dmp",ddx:["obesity","thyroid disorder","diabetes"],text:"Soldiers who are enrolled in the Army Body Composition Program (AR 600-9) are required to meet with a dietician or privileged provider if a dietician is not available. The privileged provider should screen the Soldier for medical causes of his or her weight gain. Screening labs include TSH, lipids, fasting glucose, and liver function tests. Hypothyroidism can cause weight gain and should be screened for with a TSH. Obesity is associated with diabetes, high cholesterol, and inflammation of the liver. Cholesterol, fasting glucose, and liver function tests should be screened to look for associated medical problems. Evaluation should also include screening for sleep apnea, hypertension, polycystic ovary syndrome, osteoarthritis, heartburn, and depression by history and physical exam. Soldier should be referred to the dietician while the lab results and privileged provider appointment are pending. Behavioral health consult should be offered and information about other poster services (wellness centered) provided. Same screening should be performed for Soldiers whos BMI is over 30, have been struggling to maintain their weight through multiple diets for over six months, or have a history of being placed on the Army Body Composition Program.",ancillaryFind:[{type:"lab",modifier:"TSH"},{type:"lab",modifier:"lipid panel"},{type:"lab",modifier:"fasting glucose"},{type:"lab",modifier:"liver function test"},{type:"refer",modifier:"dietician"},{type:"refer",modifier:"behavioral health if indicated"}]}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Do any of the following apply?",type:"choice",questionOptions:[{text:"New Issue"},{text:"BMI > or equal to 25"},{text:"Recent profile"}],answerOptions:[{text:"Yes",disposition:[{...me[4],text:"Wellness center or dietician referral"}],decisionMaking:[{type:"dmp",ddx:["obesity","overweight"],text:"Soldiers who are requesting assistance with weight control that is a new issue should be provided information on community resources that are available which may include the Wellness Center, access to a dietician, an athletic trainer, or strength and conditioning coach and offered a referral to behavioral health consultant if available.",ancillaryFind:[{type:"refer",modifier:"Armed Forces Wellness Center"},{type:"refer",modifier:"dietician"},{type:"refer",modifier:"H2F"},{type:"refer",modifier:"behavioral health if indicated"}]}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"Wellness center or dietician referral"}],decisionMaking:[{type:"dmp",text:"provided information on community resources that are available which may include the Wellness Center, access to a dietician, an athletic trainer, or strength and conditioning coach and offered a referral to behavioral health consultant if available.",ancillaryFind:[{type:"refer",modifier:"Armed Forces Wellness Center"},{type:"refer",modifier:"dietician"},{type:"refer",modifier:"H2F"},{type:"refer",modifier:"behavioral health if indicated"}]}],next:null,selectAll:!1}]}]},{id:"L-11",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Appears sick, AMS, uncomfortable"},{text:"HR > 100, RR > 20"},{text:"BP > 150/90"},{text:"Moderate - Severe pain"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",text:"If Soldier appears sick or unstable (pale, sweaty, dazed look in eyes), confused or has an altered mental status, uncomfortable (cant stop moving or refusing to move due to pain), has abnormal vital signs, or describes pain as five or higher, refer to the supervising privileged provider now for further evaluation and treatment. All of these scenarios may represent a more significant illness or injury."}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Complaint does not apply to another algorithm on the list?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",text:"If the complaint is not on the list, does not fit under another protocol, and the Soldier appears stable with normal vital signs, refer to the AEM for further evaluation, treatment, and disposition. "}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"Screen Symptoms"}],decisionMaking:[{type:"dmp",text:"If the complaint is not on the list but you recognize it as being under a protocol on the list or another way of saying a complaint that is on the list, screen according to the protocol that the Soldiers complaint refers to."}],next:null,selectAll:!1}]}]},{id:"L-12",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Current symptoms are present?",type:"initial",questionOptions:[],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",text:"If the Soldier has symptoms, screen the Soldier according to the protocol that represents his or her symptoms. Since nonprescription medications can be dangerous if not used properly, the Soldier should be screened first to ensure that the medications requested are appropriate for his or her current symptoms."}],disposition:[{...me[4],text:"Screen Symptoms",modifier:"discuss with AEM"}],next:null,selectAll:!0},{text:"No",disposition:[],next:2,selectAll:!1}]},{text:"Soldier is traveling on Temporary Duty to a location without easy access to medical care?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:"If a Soldier is traveling on temporary duty (TDY) to a location where medical care is not easily accessible and local policy supports providing travel medications, he or she may request a travel pack of medications. Evaluate for the risk of malaria and other diseases. Discuss the request with the supervising privileged provider. Provide travel medications as authorized by your supervising privileged provider and local policy. Example medications include ibuprofen (pain), diphenhydramine (allergies/ reaction), pseudoephedrine (congestion), loperamide and ciprofloxacin (diarrhea), doxycycline (malaria prophylaxis). Supervising privileged provider must approve all travel medications."}],disposition:[{...me[4],text:"provide travel pack medications",modifier:"local SOP or discuss with provider"}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"Discuss with AEM"}],next:null,selectAll:!1}]}]},{id:"L-13",options:[{text:"Rescreen Algorithm",type:"action",questionOptions:[],answerOptions:[]},{text:"Red Flags",type:"rf",questionOptions:[{text:"Abnormal Vital Signs/Fever > 101F"},{text:"Shortness of Breath"},{text:"Cough with or without blood clots or frank blood"},{text:"Stiff neck"},{text:"Altered mental status"},{text:"Cyanosis"},{text:"Ancillary muscle use"},{text:"SIRS criteria"},{text:"Airway Swelling"},{text:"Hives"},{text:"heat injury"},{text:"light sensitivity"},{text:"pregnant"},{text:"Seizure"},{text:"Lightheaded"}],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Fever > 101F "},{text:"Cough"},{text:"shortness of breath"}],answerOptions:[{text:"Yes",disposition:[{...me[0],modifier:"mask patient"}],decisionMaking:[{type:"dmp",ddx:["COVID-19"],text:"If the Soldier presents with red flags (shortness of breath, fever >101F, and cough) immediately mask patient and disposition the Soldier as Provider Now."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Has patient had contact with a COVID positive person?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[1],modifier:"mask patient"}],next:null,selectAll:!0},{text:"No",disposition:[me[2]],decisionMaking:[{type:"dmp",ddx:[],text:"MCP for COVID-19: see A3 cold symptoms/allergies/cough. See D1 for shortness of breath. See G2 for fever/chills",assocMcp:{type:"mcp",text:"home, no care/testing required. If symptoms develop contact command",specLim:["quarters/quarantine x 14 days","follow local policy"]}}],next:null,selectAll:!1}]}]},{id:"M-1",options:[{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Rescreen Algorithm",type:"action",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Worsening on treatment"},{text:"Previously saw provider or AEM"}],answerOptions:[{text:"Yes",disposition:[me[0]],decisionMaking:[{type:"dmp",ddx:[],text:"If the Soldier is worsening on treatment or failed the previous treatment regimen, he or she should be referred to the supervising privileged provider."}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Screened a Self Care or AEM?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[me[1]],decisionMaking:[{type:"dmp",ddx:[],text:"Soldier should not be screened to below the AEM level when he or she returns to the clinic for the same issue that was previously treated with minor-care. Soldier has the option to elevate his or her disposition to the next higher level (Provider Now) if he or she feels uncomfortable with seeing an AEM."}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"screen soldier"}],next:null,selectAll:!1}]}]},{id:"M-2",options:[{text:"Rescreen if acutely ill",type:"action",questionOptions:[],answerOptions:[]},{text:"Red Flags",type:"rf",questionOptions:[],answerOptions:[]},{text:"Do any of the following apply?",type:"initial",questionOptions:[{text:"Screening dispositioned as provider now"},{text:"Condition worsening"},{text:"Not improving"}],answerOptions:[{text:"Yes",decisionMaking:[{type:"dmp",ddx:[],text:"Rescreen the Soldier if he or she appears acutely ill. Refer to the supervising privileged provider if he or she is worsening, not improving, or screen as Provider Now in the protocol."}],disposition:[{...me[0],modifier:"rescreen if acutely ill"}],next:null,selectAll:!0},{text:"No",disposition:[],next:3,selectAll:!1}]},{text:"Previously seen by provider or specialty clinic requesting Soldier to follow-up?",type:"choice",questionOptions:[],answerOptions:[{text:"Yes",disposition:[{...me[4],text:"schedule appointment",modifier:"discuss with AEM"}],decisionMaking:[{type:"dmp",text:"If possible, refer the Soldier to the original privileged provider. If the original privileged provider is not available, discuss the situation with the AEM. Based on local policy and original privileged provider availability, the Soldier may be scheduled with a different privileged provider that is covering for the original privileged provider or scheduled with the original privileged provider when he or she is next available. Explain to the Soldier when his or her follow-up will be."}],next:null,selectAll:!0},{text:"No",disposition:[{...me[4],text:"schedule appointment"}],next:null,selectAll:!1}]}]}],g2=["EMT-B","EMT-A","EMT-P","PA-C","NP","MD","DO"],v2=["USA","USN","USMC","USAF"],Mc={USA:["PV1","PV2","PFC","SPC","CPL","SGT","SSG","SFC","MSG","1SG","SGM","CSM","2LT","1LT","CPT","MAJ","LTC","COL"],USN:["SR","SA","SN","PO3","PO2","PO1","CPO","SCPO","MCPO","ENS","LTJG","LT","LCDR","CDR","CAPT"],USMC:["Pvt","PFC","LCpl","Cpl","Sgt","SSgt","GySgt","MSgt","1stSgt","MGySgt","SgtMaj","2ndLt","1stLt","Capt","Maj","LtCol","Col"],USAF:["AB","Amn","A1C","SrA","SSgt","TSgt","MSgt","SMSgt","CMSgt","2d Lt","1st Lt","Capt","Maj","Lt Col","Col"]},o7=(()=>{const r=["PV1","PV2","PFC","SPC","SGT","SSG","SFC","MSG","1LT","CPT","MAJ","LTC"],i=new Set(r),a=[];for(const s of Object.values(Mc))for(const l of s)i.has(l)||(i.add(l),a.push(l));return[...r,...a]})();function l7(r){const i=r.replace(/([A-Z])(\d+)/,"$1-$2");return s7.find(s=>s.id===i)?.options||null}function c7(r){const i=r.replace(/([A-Z])(\d+)/,"$1-$2");for(const a of a1)if(a.contents){const s=a.contents.find(l=>l.icon===i);if(s)return{category:a,symptom:s}}return null}function Sw(r){if(!r.trim())return null;const i=r.split("|"),a={symptomCode:"",rfSelections:[],cardEntries:[],screenerEntries:[],actionEntries:[],hpiText:"",peText:"",flags:{includeAlgorithm:!0,includeDecisionMaking:!0,includeHPI:!1,includePhysicalExam:!1},timestamp:null,user:null,userId:null,clinicId:null};let s=-1,l=[];const c=i.filter(d=>d.length>0);c.length>0&&(a.symptomCode=c[0]);for(let d=1;d<c.length;d++){const f=c[d],m=f[0],g=f.substring(1);if(m==="R"){const v=parseInt(g||"0",36);a.rfSelections=t8(v)}else if(m==="H")a.hpiText=Y3(g);else if(m==="P")g.startsWith("3:")||g.startsWith("2:")?a.peText=ZD(g,a.symptomCode):a.peText=Y3(g);else if(m==="F"){const v=parseInt(g,10);a.flags={includeAlgorithm:!!(v&1),includeDecisionMaking:!!(v&2),includeHPI:!!(v&4),includePhysicalExam:!!(v&8)}}else if(m==="T"){const v=parseInt(g,36);isNaN(v)||(a.timestamp=new Date(v*1e3))}else if(m==="U"){const v=g.split(".");if(v.length>=4){const y=parseInt(v[0],10),A=parseInt(v[1],10),w=parseInt(v[2],10);let k=[];try{k=decodeURIComponent(atob(v.slice(3).join("."))).split("|")}catch(E){o1("noteParser.decodeUser",E)}a.user={firstName:k[0]||void 0,lastName:k[1]||void 0,middleInitial:k[2]||void 0,rank:y>=0?o7[y]:void 0,credential:A>=0?g2[A]:void 0,component:w>=0?v2[w]:void 0,uic:k[3]||void 0}}}else if(m==="I")g.length===32&&(a.userId=`${g.slice(0,8)}-${g.slice(8,12)}-${g.slice(12,16)}-${g.slice(16,20)}-${g.slice(20)}`);else if(m==="C")g.length===32&&(a.clinicId=`${g.slice(0,8)}-${g.slice(8,12)}-${g.slice(12,16)}-${g.slice(16,20)}-${g.slice(20)}`);else if(m==="A"){const v=g.split(".");if(v.length>=2){const y=parseInt(v[0],10),A=v[1]==="D"?"deferred":"performed";a.actionEntries.push({index:y,status:A})}}else if(m==="Q"){const v=g.split(".");if(v.length>=2){const y=v[0],A=v[1],w=A.includes("-")?A.split("-").map(E=>parseInt(E,36)):A.split("").map(E=>parseInt(E,10)),k=v.length>=3?parseInt(v[2],10):void 0;a.screenerEntries.push({id:y,responses:w,followUp:isNaN(k)?void 0:k})}}else if(m==="L")s=parseInt(g,10);else if(m==="S")l=g==="0"?[]:g.split("").map(v=>parseInt(v,10));else if(/^\d/.test(f)){const v=f.split(".");v.length>=3&&a.cardEntries.push({index:parseInt(v[0],10),selections:t8(parseInt(v[1],36)),answerIndex:parseInt(v[2],10)})}}return a.cardEntries.length===0&&s>0&&(a.cardEntries=[{index:s,selections:l,answerIndex:-1}],a.flags={includeAlgorithm:!0,includeDecisionMaking:!1,includeHPI:!1,includePhysicalExam:!1}),a.symptomCode?a:null}function ij(r,i,a,s){const l=[];l.push(s);const c=r[0];if(c?.type==="rf"&&i[0]?.selectedOptions){const v=c.questionOptions?.length||0;let y=0;for(let A=0;A<v;A++)i[0].selectedOptions.includes(A)&&(y|=1<<A);l.push(`R${y.toString(36)}`)}else l.push("R0");for(let v=0;v<i.length;v++){const y=i[v],A=r[v];if(!y?.isVisible||!A||A.type==="rf")continue;let w=0;for(const E of y.selectedOptions)w|=1<<E;let k=-1;y.answer&&(k=A.answerOptions.findIndex(E=>E.text===y.answer?.text)),l.push(`${v}.${w.toString(36)}.${k}`)}for(let v=0;v<i.length;v++){const y=i[v],A=r[v];if(!y?.isVisible||!A||!A.screenerConfig||!y.screenerResponses)continue;const w=y.completedScreenerId||A.screenerConfig.id,E=y.screenerResponses.every(T=>T>=0&&T<=9)?y.screenerResponses.map(T=>T.toString()).join(""):y.screenerResponses.map(T=>T.toString(36)).join("-");let I=`Q${w}.${E}`;y.followUpResponse!==void 0&&y.followUpResponse!==null&&(I+=`.${y.followUpResponse}`),l.push(I)}for(let v=0;v<i.length;v++){const y=i[v],A=r[v];!y?.isVisible||!A||A.type!=="action"||A.screenerConfig||!y.actionStatus||l.push(`A${v}.${y.actionStatus==="deferred"?"D":"P"}`)}const d=a.customNote?.trim();d&&l.push(`H${Mu(d)}`);const f=a.physicalExamNote?.trim();if(f)try{l.push(`P${XD(f,s)}`)}catch(v){o1("noteParser.encodePECompact",v),l.push(`P${Mu(f)}`)}let m=0;a.includeAlgorithm&&(m|=1),a.includeDecisionMaking&&(m|=2),d&&(m|=4),f&&(m|=8),l.push(`F${m}`);const g=a.user;if(g?.lastName){const v=g.rank?o7.indexOf(g.rank):-1,y=g.credential?g2.indexOf(g.credential):-1,A=g.component?v2.indexOf(g.component):-1,w=`${g.firstName??""}|${g.lastName??""}|${g.middleInitial??""}|${g.uic??""}`;try{l.push(`U${v}.${y}.${A}.${btoa(encodeURIComponent(w))}`)}catch(k){o1("noteParser.encodeUser",k),l.push(`U${v}.${y}.${A}.${encodeURIComponent(w)}`)}}return a.userId&&l.push(`I${a.userId.replace(/-/g,"")}`),a.clinicId&&l.push(`C${a.clinicId.replace(/-/g,"")}`),l.push(`T${Math.floor(Date.now()/1e3).toString(36)}`),l.join("|")}function n4(r,i){const a=s=>s.split("|").filter(l=>!l.startsWith("T")&&!l.startsWith("I")&&!l.startsWith("C")).join("|");return a(r)===a(i)}function d7(r,i){const a=r.findIndex(d=>d.type==="initial"),s=r.map((d,f)=>({index:f,isVisible:f<=a,answer:null,selectedOptions:[],count:0}));r[0]?.type==="rf"&&(s[0].selectedOptions=i.rfSelections,s[0].count=i.rfSelections.length);let c=null;for(const d of i.cardEntries){if(d.index<0||d.index>=s.length)continue;const f=r[d.index];if(f&&(s[d.index].isVisible=!0,s[d.index].selectedOptions=d.selections,s[d.index].count=d.selections.length,d.answerIndex>=0&&d.answerIndex<f.answerOptions.length)){const m=f.answerOptions[d.answerIndex];s[d.index].answer=m,m.disposition&&m.disposition.length>0&&(c=m.disposition[0]),m.next!==null&&(Array.isArray(m.next)?m.next:[m.next]).forEach(v=>{v>=0&&v<s.length&&(s[v].isVisible=!0)})}}for(const d of i.screenerEntries){const f=r.findIndex(m=>m.screenerConfig?m.screenerConfig.id===d.id||m.screenerConfig.conditionalExtension?.screener.id===d.id:!1);f>=0&&(s[f].screenerResponses=d.responses,s[f].completedScreenerId=d.id,d.followUp!==void 0&&(s[f].followUpResponse=d.followUp))}for(const d of i.actionEntries)d.index>=0&&d.index<s.length&&(s[d.index].actionStatus=d.status,d.status==="deferred"&&(c={type:"OTHER",text:"defer to AEM"}));return{cardStates:s,disposition:c}}function rj(r){const i=r.getDate().toString().padStart(2,"0"),a=r.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),s=r.getFullYear().toString().slice(2),l=r.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return`SCREENED IAW ADTMC MEDCOM PAM 40-7-21 ${i}${a}${s} ${l} UTC`}function aj(r,i){const a=[];return r.forEach((s,l)=>{const c=i[l];if(!c||!c.isVisible)return;const d=[s.text];if(s.type==="rf"&&s.questionOptions&&s.questionOptions.length>0){const f=[];s.questionOptions.forEach((m,g)=>{const v=m.text?.trim();if(v){const y=c.selectedOptions.includes(g);f.push(`   ${v} - [${y?"YES":"NO"}]`)}}),f.length>0&&a.push(`Red Flags:
${f.join(`
`)}`);return}if(s.type==="action"&&s.screenerConfig&&c.screenerResponses){const f=c.completedScreenerId||s.screenerConfig.id,m=nj[f]||s.screenerConfig,g=c.screenerResponses,v=m.gate,y=v&&!r7(m,g),A=[];if(y)A.push(`${m.title}  ${v.negativeMessage}`);else{const w=a7(m,g),k=Aw(m),E=m.interpretations.find(I=>w>=I.minScore&&w<=I.maxScore)?.label??"";A.push(`${m.title} (Score: ${w}/${k} - ${E}):`)}if(m.questions.forEach((w,k)=>{if(y&&v&&k>=v.gatedFromIndex)return;const E=g[k]??0;if(w.type==="info")return;if(w.type==="check"&&w.options){const j=w.options.filter((B,U)=>(E&1<<U)!==0);j.length>0?(A.push(`  ${w.text}`),j.forEach(B=>A.push(`     ${B}`))):A.push(`  ${w.text} None`);return}const T=(m.questions[k]?.scaleOptions??m.scaleOptions).find(j=>j.value===E)?.label??String(E),N=Ox(w)?"":" (not scored)";A.push(`  ${k+1}. ${w.text} - [${T} (${E})]${N}`)}),s.screenerConfig.followUp&&c.followUpResponse!==void 0&&c.followUpResponse!==null){const w=s.screenerConfig.followUp.options[c.followUpResponse]??"";A.push(`  Functional Difficulty: ${w}`)}a.push(A.join(`
`));return}if(s.type==="action"&&c.actionStatus){const f=c.actionStatus==="performed"?"[PERFORMED]":"[DEFERRED - defer to AEM]",m=[`${s.text} ${f}`];s.questionOptions&&s.questionOptions.length>0&&s.questionOptions.forEach(g=>{const v=g.text?.trim();v&&m.push(`   ${v}`)}),a.push(m.join(`
`));return}if(s.questionOptions&&s.questionOptions.length>0&&s.questionOptions.forEach((f,m)=>{const g=f.text?.trim();if(g){const v=c.selectedOptions.includes(m);d.push(`   ${g} - [${v?"YES":"NO"}]`)}}),c.answer&&(d.push(`Answer: ${c.answer.text}`),c.answer.disposition&&c.answer.disposition.length>0)){const f=c.answer.disposition.map(m=>{const g=`${m.type}: ${m.text}`;return m.modifier?`${g} (${m.modifier})`:g}).join("; ");d.push(`Disposition: ${f}`)}d.length>1&&a.push(d.join(`
`))}),a.join(`
`)}function sj(r,i,a,s){for(let l=i.length-1;l>=0;l--){const c=i[l],d=r[l];if(!c||!d||!c.isVisible)continue;const f=d.answerOptions.find(v=>v.text===c.answer?.text),m=c.selectedOptions&&c.selectedOptions.length>0?d.answerOptions.find(v=>v.selectAll):null,g=f||m;if(g?.disposition?.some(v=>v.type===a&&v.text===s))return g.decisionMaking||[]}return[]}function oj(r){const i=[];return r.forEach((a,s)=>{const l=[];if(s>0&&l.push("---"),a.ddx&&a.ddx.length>0&&l.push(`DDx: ${a.ddx.join(", ")}`),a.text&&l.push(a.text),a.ancillaryFind&&a.ancillaryFind.length>0){const c={lab:"Lab",refer:"Referral",med:"Other Medication",rad:"Imaging",protocol:"Other Protocol"},d=a.ancillaryFind.reduce((f,m)=>{const g=m.type||"other";return f[g]||(f[g]=[]),f[g].push(m),f},{});Object.entries(d).forEach(([f,m])=>{const g=c[f]||f||"Ancillary",v=m.map(y=>y.modifier).filter(Boolean);v.length>0&&l.push(`${g}: ${v.join(", ")}`)})}if(a.specLim&&a.specLim.length>0&&(l.push("Limitations if clinically indicated:"),a.specLim.forEach(c=>l.push(`   ${c}`))),a.assocMcp){const c=[];a.assocMcp.text&&c.push(a.assocMcp.text),a.assocMcp.specLim&&a.assocMcp.specLim.length>0&&(c.push("Limitations if clinically indicated:"),a.assocMcp.specLim.forEach(d=>c.push(`   ${d}`))),c.length>0&&(l.push("Associated MCP:"),c.forEach(d=>l.push(`  ${d}`)))}l.length>0&&i.push(l.join(`
`))}),i.join(`

`)}function lj(r,i,a,s){const l=sj(r,i,a,s);return l.length===0?"":oj(l)}function i4(r){if(!r.lastName)return"";const i=[r.lastName,r.firstName??"",r.middleInitial??""].filter(Boolean).join(" "),a=[r.credential,r.rank,r.component].filter(Boolean).join(", ");return a?`Signed: ${i} ${a}`:`Signed: ${i}`}function u7(r,i,a,s,l,c,d){const f=[],m=r.customNote.trim();m&&(f.push("HPI:"),f.push(m),f.push(""));const g=r.physicalExamNote?.trim();g&&(f.push("PHYSICAL EXAM:"),f.push(g),f.push("")),d&&(f.push(rj(d)),f.push(""));let v;if(r.includeAlgorithm&&(v=aj(i,a),v.trim())){const A=c?.icon&&c?.text?`${c.icon}: ${c.text}`:"ALGORITHM";f.push(`${A}:`),f.push(v),f.push("")}let y;return r.includeDecisionMaking&&(y=lj(i,a,s,l),y.trim()&&(f.push("DECISION MAKING:"),f.push(y),f.push(""))),r.signature&&f.push(r.signature),{sections:{algorithm:v,decisionMaking:y,physicalExam:g||void 0,customNote:m},fullNote:f.join(`
`).trim()}}const cj=()=>({importFromBarcode:D.useCallback(i=>{const a=Sw(i);if(!a)throw new Error("Could not parse barcode string");const s=l7(a.symptomCode);if(!s?.length)throw new Error(`Algorithm ${a.symptomCode} not found`);const{cardStates:l,disposition:c}=d7(s,a),d=c7(a.symptomCode),f=d?{icon:d.symptom.icon||"",text:d.symptom.text||""}:void 0,m=a.user&&i4(a.user)||"Unknown";return{fullNote:u7({includeAlgorithm:a.flags.includeAlgorithm,includeDecisionMaking:a.flags.includeDecisionMaking,customNote:a.flags.includeHPI?a.hpiText:"",physicalExamNote:a.flags.includePhysicalExam?a.peText:"",signature:a.user?i4(a.user):void 0},s,l,c?.type??"",c?.text??"",f,a.timestamp).fullNote,parsed:a,symptomText:f?.text||a.symptomCode,symptomIcon:f?.icon||a.symptomCode,dispositionType:c?.type??"",dispositionText:c?.text??"",authorLabel:m,clinicId:a.clinicId,userId:a.userId,timestamp:a.timestamp,encodedText:i}},[])}),dj=ya("NoteShare");function uj(r){const i=r.getDate().toString().padStart(2,"0"),a=r.getHours().toString().padStart(2,"0"),s=r.getMinutes().toString().padStart(2,"0"),l=r.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),c=r.getFullYear();return`${i}${a}${s}${l}${c}`}function fj(r){const i=r.toUpperCase();return i.includes("I")&&!i.includes("II")&&!i.includes("III")&&!i.includes("IV")?"#dc2626":i.includes("II")&&!i.includes("III")&&!i.includes("IV")?"#f59e0b":i.includes("III")?"#22c55e":i.includes("IV")?"#3b82f6":"#6b7280"}function hj(r){const a='-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',s=document.createElement("canvas");try{hw.toCanvas(s,{bcid:"datamatrix",text:r.encodedText,scale:3,padding:4})}catch{s.width=200,s.height=200;const B=s.getContext("2d");B&&(B.fillStyle="#ffffff",B.fillRect(0,0,200,200))}const l=24,c=20,d=160,f=220,m=l+d+c+f+l,g=l+d+l,v=document.createElement("canvas");v.width=m*2,v.height=g*2;const y=v.getContext("2d");y.scale(2,2),y.fillStyle="#ffffff",y.fillRect(0,0,m,g),y.drawImage(s,l,l,d,d);const A=l+d+c,w=l+d/2,k=!!r.dispositionType,E=k?r.dispositionType+(r.dispositionText?`  ${r.dispositionText}`:""):"";let I="";try{I=uj(new Date(r.createdAt))}catch{}const T=22,N=(k?T:0)+(I?T:0);let j=w-N/2+14;return k&&(y.fillStyle=fj(r.dispositionType),y.font=`bold 15px ${a}`,y.textAlign="left",y.fillText(E,A,j,f),j+=T),I&&(y.fillStyle="#6b7280",y.font=`13px ${a}`,y.textAlign="left",y.fillText(I,A,j)),v}function pj(r){return new Promise((i,a)=>{r.toBlob(s=>{s?i(s):a(new Error("Failed to create image blob"))},"image/png",1)})}function kw(){const[r,i]=D.useState("idle");return{shareNote:D.useCallback(async(s,l)=>{try{i("generating");const c=hj(s),d=await pj(c);if(l&&navigator.share){i("sharing");const f=new File([d],`ADTMC-Note-${s.symptomText?.replace(/[^a-zA-Z0-9]/g,"-")||"note"}.png`,{type:"image/png"});navigator.canShare?.({files:[f]})?(await navigator.share({title:`ADTMC Note  ${s.symptomText||"Note"}`,text:s.dispositionType?`${s.symptomText} (${s.dispositionType})`:s.symptomText||"ADTMC Note",files:[f]}),i("shared")):(await navigator.share({title:`ADTMC Note  ${s.symptomText||"Note"}`,text:`${s.symptomText||"Note"}${s.dispositionType?` (${s.dispositionType})`:""}

Encoded: ${s.encodedText}`}),i("shared"))}else{i("sharing");try{await navigator.clipboard.write([new ClipboardItem({"image/png":d})]),i("copied")}catch{const f=URL.createObjectURL(d),m=document.createElement("a");m.href=f,m.download=`ADTMC-Note-${s.symptomText?.replace(/[^a-zA-Z0-9]/g,"-")||"note"}.png`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f),i("shared")}}setTimeout(()=>i("idle"),Li.FEEDBACK_DURATION)}catch(c){if(c instanceof Error&&c.name==="AbortError"){i("idle");return}dj.error("Share failed:",c),i("error"),setTimeout(()=>i("idle"),Li.FEEDBACK_DURATION)}},[]),shareStatus:r}}function Dx(r,i){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&i.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(a[s[l]]=r[s[l]]);return a}function mj(r,i,a,s){function l(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function f(v){try{g(s.next(v))}catch(y){d(y)}}function m(v){try{g(s.throw(v))}catch(y){d(y)}}function g(v){v.done?c(v.value):l(v.value).then(f,m)}g((s=s.apply(r,i||[])).next())})}const gj=r=>r?(...i)=>r(...i):(...i)=>fetch(...i);class Cw extends Error{constructor(i,a="FunctionsError",s){super(i),this.name=a,this.context=s}}class vj extends Cw{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class n8 extends Cw{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class i8 extends Cw{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var r4;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(r4||(r4={}));class xj{constructor(i,{headers:a={},customFetch:s,region:l=r4.Any}={}){this.url=i,this.headers=a,this.region=l,this.fetch=gj(s)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i){return mj(this,arguments,void 0,function*(a,s={}){var l;let c,d;try{const{headers:f,method:m,body:g,signal:v,timeout:y}=s;let A={},{region:w}=s;w||(w=this.region);const k=new URL(`${this.url}/${a}`);w&&w!=="any"&&(A["x-region"]=w,k.searchParams.set("forceFunctionRegion",w));let E;g&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(A["Content-Type"]="application/octet-stream",E=g):typeof g=="string"?(A["Content-Type"]="text/plain",E=g):typeof FormData<"u"&&g instanceof FormData?E=g:(A["Content-Type"]="application/json",E=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?E=JSON.stringify(g):E=g;let I=v;y&&(d=new AbortController,c=setTimeout(()=>d.abort(),y),v?(I=d.signal,v.addEventListener("abort",()=>d.abort())):I=d.signal);const T=yield this.fetch(k.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},A),this.headers),f),body:E,signal:I}).catch(U=>{throw new vj(U)}),N=T.headers.get("x-relay-error");if(N&&N==="true")throw new n8(T);if(!T.ok)throw new i8(T);let j=((l=T.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),B;return j==="application/json"?B=yield T.json():j==="application/octet-stream"||j==="application/pdf"?B=yield T.blob():j==="text/event-stream"?B=T:j==="multipart/form-data"?B=yield T.formData():B=yield T.text(),{data:B,error:null,response:T}}catch(f){return{data:null,error:f,response:f instanceof i8||f instanceof n8?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var bj=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},yj=class{constructor(r){var i,a,s;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(i=r.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,this.urlLengthLimit=(s=r.urlLengthLimit)!==null&&s!==void 0?s:8e3,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,i){return this.headers=new Headers(this.headers),this.headers.set(r,i),this}then(r,i){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let d=null,f=null,m=null,g=c.status,v=c.statusText;if(c.ok){var y,A;if(a.method!=="HEAD"){var w;const T=await c.text();T===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((w=a.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?f=T:f=JSON.parse(T))}const E=(y=a.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),I=(A=c.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");E&&I&&I.length>1&&(m=parseInt(I[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,g=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var k;const E=await c.text();try{d=JSON.parse(E),Array.isArray(d)&&c.status===404&&(f=[],d=null,g=200,v="OK")}catch{c.status===404&&E===""?(g=204,v="No Content"):d={message:E}}if(d&&a.isMaybeSingle&&(!(d==null||(k=d.details)===null||k===void 0)&&k.includes("0 rows"))&&(d=null,g=200,v="OK"),d&&a.shouldThrowOnError)throw new bj(d)}return{error:d,data:f,count:m,status:g,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var d;let f="",m="",g="";const v=c?.cause;if(v){var y,A,w,k;const T=(y=v?.message)!==null&&y!==void 0?y:"",N=(A=v?.code)!==null&&A!==void 0?A:"";f=`${(w=c?.name)!==null&&w!==void 0?w:"FetchError"}: ${c?.message}`,f+=`

Caused by: ${(k=v?.name)!==null&&k!==void 0?k:"Error"}: ${T}`,N&&(f+=` (${N})`),v?.stack&&(f+=`
${v.stack}`)}else{var E;f=(E=c?.stack)!==null&&E!==void 0?E:""}const I=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(g="",m="Request was aborted (timeout or manual cancellation)",I>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${I} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(v?.name==="HeadersOverflowError"||v?.code==="UND_ERR_HEADERS_OVERFLOW")&&(g="",m="HTTP headers exceeded server limits (typically 16KB)",I>this.urlLengthLimit&&(m+=`. Your request URL is ${I} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(d=c?.name)!==null&&d!==void 0?d:"FetchError"}: ${c?.message}`,details:f,hint:m,code:g},data:null,count:null,status:0,statusText:""}})),l.then(r,i)}returns(){return this}overrideTypes(){return this}},wj=class extends yj{select(r){let i=!1;const a=(r??"*").split("").map(s=>/\s/.test(s)&&!i?"":(s==='"'&&(i=!i),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:i=!0,nullsFirst:a,foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${r}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:a=i}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${r}`),this}range(r,i,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(c,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:i=!1,settings:a=!1,buffers:s=!1,wal:l=!1,format:c="text"}={}){var d;const f=[r?"analyze":null,i?"verbose":null,a?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const r8=new RegExp("[,()]");var Nh=class extends wj{eq(r,i){return this.url.searchParams.append(r,`eq.${i}`),this}neq(r,i){return this.url.searchParams.append(r,`neq.${i}`),this}gt(r,i){return this.url.searchParams.append(r,`gt.${i}`),this}gte(r,i){return this.url.searchParams.append(r,`gte.${i}`),this}lt(r,i){return this.url.searchParams.append(r,`lt.${i}`),this}lte(r,i){return this.url.searchParams.append(r,`lte.${i}`),this}like(r,i){return this.url.searchParams.append(r,`like.${i}`),this}likeAllOf(r,i){return this.url.searchParams.append(r,`like(all).{${i.join(",")}}`),this}likeAnyOf(r,i){return this.url.searchParams.append(r,`like(any).{${i.join(",")}}`),this}ilike(r,i){return this.url.searchParams.append(r,`ilike.${i}`),this}ilikeAllOf(r,i){return this.url.searchParams.append(r,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(r,i){return this.url.searchParams.append(r,`ilike(any).{${i.join(",")}}`),this}regexMatch(r,i){return this.url.searchParams.append(r,`match.${i}`),this}regexIMatch(r,i){return this.url.searchParams.append(r,`imatch.${i}`),this}is(r,i){return this.url.searchParams.append(r,`is.${i}`),this}isDistinct(r,i){return this.url.searchParams.append(r,`isdistinct.${i}`),this}in(r,i){const a=Array.from(new Set(i)).map(s=>typeof s=="string"&&r8.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}notIn(r,i){const a=Array.from(new Set(i)).map(s=>typeof s=="string"&&r8.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`not.in.(${a})`),this}contains(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cs.{${i.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(i)}`),this}containedBy(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cd.{${i.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(i)}`),this}rangeGt(r,i){return this.url.searchParams.append(r,`sr.${i}`),this}rangeGte(r,i){return this.url.searchParams.append(r,`nxl.${i}`),this}rangeLt(r,i){return this.url.searchParams.append(r,`sl.${i}`),this}rangeLte(r,i){return this.url.searchParams.append(r,`nxr.${i}`),this}rangeAdjacent(r,i){return this.url.searchParams.append(r,`adj.${i}`),this}overlaps(r,i){return typeof i=="string"?this.url.searchParams.append(r,`ov.${i}`):this.url.searchParams.append(r,`ov.{${i.join(",")}}`),this}textSearch(r,i,{config:a,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${l}fts${c}.${i}`),this}match(r){return Object.entries(r).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(r,i,a){return this.url.searchParams.append(r,`not.${i}.${a}`),this}or(r,{foreignTable:i,referencedTable:a=i}={}){const s=a?`${a}.or`:"or";return this.url.searchParams.append(s,`(${r})`),this}filter(r,i,a){return this.url.searchParams.append(r,`${i}.${a}`),this}},Aj=class{constructor(r,{headers:i={},schema:a,fetch:s,urlLengthLimit:l=8e3}){this.url=r,this.headers=new Headers(i),this.schema=a,this.fetch=s,this.urlLengthLimit=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(r,i){const{head:a=!1,count:s}=i??{},l=a?"HEAD":"GET";let c=!1;const d=(r??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",d),s&&m.append("Prefer",`count=${s}`),new Nh({method:l,url:f,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(r,{count:i,defaultToNull:a=!0}={}){var s;const l="POST",{url:c,headers:d}=this.cloneRequestState();if(i&&d.append("Prefer",`count=${i}`),a||d.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);c.searchParams.set("columns",m.join(","))}}return new Nh({method:l,url:c,headers:d,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(r,{onConflict:i,ignoreDuplicates:a=!1,count:s,defaultToNull:l=!0}={}){var c;const d="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&f.searchParams.set("on_conflict",i),s&&m.append("Prefer",`count=${s}`),l||m.append("Prefer","missing=default"),Array.isArray(r)){const g=r.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(g.length>0){const v=[...new Set(g)].map(y=>`"${y}"`);f.searchParams.set("columns",v.join(","))}}return new Nh({method:d,url:f,headers:m,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(r,{count:i}={}){var a;const s="PATCH",{url:l,headers:c}=this.cloneRequestState();return i&&c.append("Prefer",`count=${i}`),new Nh({method:s,url:l,headers:c,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:r}={}){var i;const a="DELETE",{url:s,headers:l}=this.cloneRequestState();return r&&l.append("Prefer",`count=${r}`),new Nh({method:a,url:s,headers:l,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}};function Am(r){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Am(r)}function Sj(r,i){if(Am(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,i);if(Am(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function kj(r){var i=Sj(r,"string");return Am(i)=="symbol"?i:i+""}function Cj(r,i,a){return(i=kj(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}function a8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),a.push.apply(a,s)}return a}function t3(r){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?a8(Object(a),!0).forEach(function(s){Cj(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):a8(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}var Ej=class f7{constructor(i,{headers:a={},schema:s,fetch:l,timeout:c,urlLengthLimit:d=8e3}={}){this.url=i,this.headers=new Headers(a),this.schemaName=s,this.urlLengthLimit=d;const f=l??globalThis.fetch;c!==void 0&&c>0?this.fetch=(m,g)=>{const v=new AbortController,y=setTimeout(()=>v.abort(),c),A=g?.signal;if(A){if(A.aborted)return clearTimeout(y),f(m,g);const w=()=>{clearTimeout(y),v.abort()};return A.addEventListener("abort",w,{once:!0}),f(m,t3(t3({},g),{},{signal:v.signal})).finally(()=>{clearTimeout(y),A.removeEventListener("abort",w)})}return f(m,t3(t3({},g),{},{signal:v.signal})).finally(()=>clearTimeout(y))}:this.fetch=f}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Aj(new URL(`${this.url}/${i}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(i){return new f7(this.url,{headers:this.headers,schema:i,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(i,a={},{head:s=!1,get:l=!1,count:c}={}){var d;let f;const m=new URL(`${this.url}/rpc/${i}`);let g;const v=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(v)),y=s&&Object.values(a).some(v);y?(f="POST",g=a):s||l?(f=s?"HEAD":"GET",Object.entries(a).filter(([w,k])=>k!==void 0).map(([w,k])=>[w,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([w,k])=>{m.searchParams.append(w,k)})):(f="POST",g=a);const A=new Headers(this.headers);return y?A.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&A.set("Prefer",`count=${c}`),new Nh({method:f,url:m,headers:A,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};class _j{constructor(){}static detectEnvironment(){var i;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((i=navigator.userAgent)===null||i===void 0)&&i.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const a=globalThis.process;if(a){const s=a.versions;if(s&&s.node){const l=s.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const i=this.detectEnvironment();if(i.constructor)return i.constructor;let a=i.error||"WebSocket not supported in this environment.";throw i.workaround&&(a+=`

Suggested solution: ${i.workaround}`),new Error(a)}static createWebSocket(i,a){const s=this.getWebSocketConstructor();return new s(i,a)}static isWebSocketSupported(){try{const i=this.detectEnvironment();return i.type==="native"||i.type==="ws"}catch{return!1}}}const Ij="2.95.3",Nj=`realtime-js/${Ij}`,Tj="1.0.0",h7="2.0.0",s8=h7,a4=1e4,Mj=1e3,Rj=100;var gd;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(gd||(gd={}));var Fs;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Fs||(Fs={}));var _1;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(_1||(_1={}));var s4;(function(r){r.websocket="websocket"})(s4||(s4={}));var Ru;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ru||(Ru={}));class Oj{constructor(i){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=i??[]}encode(i,a){if(i.event===this.BROADCAST_EVENT&&!(i.payload instanceof ArrayBuffer)&&typeof i.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(i));let s=[i.join_ref,i.ref,i.topic,i.event,i.payload];return a(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(i){var a;return this._isArrayBuffer((a=i.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(i):this._encodeJsonUserBroadcastPush(i)}_encodeBinaryUserBroadcastPush(i){var a,s;const l=(s=(a=i.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(i,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(i){var a,s;const l=(s=(a=i.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:{},d=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(i,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(i,a,s){var l,c;const d=i.topic,f=(l=i.ref)!==null&&l!==void 0?l:"",m=(c=i.join_ref)!==null&&c!==void 0?c:"",g=i.payload.event,v=this.allowedMetadataKeys?this._pick(i.payload,this.allowedMetadataKeys):{},y=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const A=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+d.length+g.length+y.length,w=new ArrayBuffer(this.HEADER_LENGTH+A);let k=new DataView(w),E=0;k.setUint8(E++,this.KINDS.userBroadcastPush),k.setUint8(E++,m.length),k.setUint8(E++,f.length),k.setUint8(E++,d.length),k.setUint8(E++,g.length),k.setUint8(E++,y.length),k.setUint8(E++,a),Array.from(m,T=>k.setUint8(E++,T.charCodeAt(0))),Array.from(f,T=>k.setUint8(E++,T.charCodeAt(0))),Array.from(d,T=>k.setUint8(E++,T.charCodeAt(0))),Array.from(g,T=>k.setUint8(E++,T.charCodeAt(0))),Array.from(y,T=>k.setUint8(E++,T.charCodeAt(0)));var I=new Uint8Array(w.byteLength+s.byteLength);return I.set(new Uint8Array(w),0),I.set(new Uint8Array(s),w.byteLength),I.buffer}decode(i,a){if(this._isArrayBuffer(i)){let s=this._binaryDecode(i);return a(s)}if(typeof i=="string"){const s=JSON.parse(i),[l,c,d,f,m]=s;return a({join_ref:l,ref:c,topic:d,event:f,payload:m})}return a({})}_binaryDecode(i){const a=new DataView(i),s=a.getUint8(0),l=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(i,a,l)}_decodeUserBroadcast(i,a,s){const l=a.getUint8(1),c=a.getUint8(2),d=a.getUint8(3),f=a.getUint8(4);let m=this.HEADER_LENGTH+4;const g=s.decode(i.slice(m,m+l));m=m+l;const v=s.decode(i.slice(m,m+c));m=m+c;const y=s.decode(i.slice(m,m+d));m=m+d;const A=i.slice(m,i.byteLength),w=f===this.JSON_ENCODING?JSON.parse(s.decode(A)):A,k={type:this.BROADCAST_EVENT,event:v,payload:w};return d>0&&(k.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(i){var a;return i instanceof ArrayBuffer||((a=i?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(i,a){return!i||typeof i!="object"?{}:Object.fromEntries(Object.entries(i).filter(([s])=>a.includes(s)))}}class p7{constructor(i,a){this.callback=i,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ka;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(ka||(ka={}));const o8=(r,i,a={})=>{var s;const l=(s=a.skipTypes)!==null&&s!==void 0?s:[];return i?Object.keys(i).reduce((c,d)=>(c[d]=Dj(d,r,i,l),c),{}):{}},Dj=(r,i,a,s)=>{const l=i.find(f=>f.name===r),c=l?.type,d=a[r];return c&&!s.includes(c)?m7(c,d):o4(d)},m7=(r,i)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return Fj(i,a)}switch(r){case ka.bool:return jj(i);case ka.float4:case ka.float8:case ka.int2:case ka.int4:case ka.int8:case ka.numeric:case ka.oid:return Bj(i);case ka.json:case ka.jsonb:return Pj(i);case ka.timestamp:return Uj(i);case ka.abstime:case ka.date:case ka.daterange:case ka.int4range:case ka.int8range:case ka.money:case ka.reltime:case ka.text:case ka.time:case ka.timestamptz:case ka.timetz:case ka.tsrange:case ka.tstzrange:return o4(i);default:return o4(i)}},o4=r=>r,jj=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Bj=r=>{if(typeof r=="string"){const i=parseFloat(r);if(!Number.isNaN(i))return i}return r},Pj=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},Fj=(r,i)=>{if(typeof r!="string")return r;const a=r.length-1,s=r[a];if(r[0]==="{"&&s==="}"){let c;const d=r.slice(1,a);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>m7(i,f))}return r},Uj=r=>typeof r=="string"?r.replace(" ","T"):r,g7=r=>{const i=new URL(r);return i.protocol=i.protocol.replace(/^ws/i,"http"),i.pathname=i.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),i.pathname===""||i.pathname==="/"?i.pathname="/api/broadcast":i.pathname=i.pathname+"/api/broadcast",i.href};class Jb{constructor(i,a,s={},l=a4){this.channel=i,this.event=a,this.payload=s,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,a){var s;return this._hasReceived(i)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:i,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:a}){this.recHooks.filter(s=>s.status===i).forEach(s=>s.callback(a))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var l8;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(l8||(l8={}));class tm{constructor(i,a){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},l=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tm.syncState(this.state,l,c,d),this.pendingDiffs.forEach(m=>{this.state=tm.syncDiff(this.state,m,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},l=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=tm.syncDiff(this.state,l,c,d),f())}),this.onJoin((l,c,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:d})}),this.onLeave((l,c,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,a,s,l){const c=this.cloneDeep(i),d=this.transformState(a),f={},m={};return this.map(c,(g,v)=>{d[g]||(m[g]=v)}),this.map(d,(g,v)=>{const y=c[g];if(y){const A=v.map(I=>I.presence_ref),w=y.map(I=>I.presence_ref),k=v.filter(I=>w.indexOf(I.presence_ref)<0),E=y.filter(I=>A.indexOf(I.presence_ref)<0);k.length>0&&(f[g]=k),E.length>0&&(m[g]=E)}else f[g]=v}),this.syncDiff(c,{joins:f,leaves:m},s,l)}static syncDiff(i,a,s,l){const{joins:c,leaves:d}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),l||(l=()=>{}),this.map(c,(f,m)=>{var g;const v=(g=i[f])!==null&&g!==void 0?g:[];if(i[f]=this.cloneDeep(m),v.length>0){const y=i[f].map(w=>w.presence_ref),A=v.filter(w=>y.indexOf(w.presence_ref)<0);i[f].unshift(...A)}s(f,v,m)}),this.map(d,(f,m)=>{let g=i[f];if(!g)return;const v=m.map(y=>y.presence_ref);g=g.filter(y=>v.indexOf(y.presence_ref)<0),i[f]=g,l(f,g,m),g.length===0&&delete i[f]}),i}static map(i,a){return Object.getOwnPropertyNames(i).map(s=>a(s,i[s]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((a,s)=>{const l=i[s];return"metas"in l?a[s]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[s]=l,a},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c8;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(c8||(c8={}));var nm;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(nm||(nm={}));var Ac;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ac||(Ac={}));class Dh{constructor(i,a={config:{}},s){var l,c;if(this.topic=i,this.params=a,this.socket=s,this.bindings={},this.state=Fs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Jb(this,_1.join,this.params,this.timeout),this.rejoinTimer=new p7(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fs.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Fs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_1.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new tm(this),this.broadcastEndpointURL=g7(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(i,a=this.timeout){var s,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Fs.closed){const{config:{broadcast:d,presence:f,private:m}}=this.params,g=(l=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[nm.PRESENCE]&&this.bindings[nm.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},A={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>i?.(Ac.CHANNEL_ERROR,w)),this._onClose(()=>i?.(Ac.CLOSED)),this.updateJoinPayload(Object.assign({config:A},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:w})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){i?.(Ac.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,I=(k=E?.length)!==null&&k!==void 0?k:0,T=[];for(let N=0;N<I;N++){const j=E[N],{filter:{event:B,schema:U,table:F,filter:P}}=j,z=w&&w[N];if(z&&z.event===B&&Dh.isFilterValueEqual(z.schema,U)&&Dh.isFilterValueEqual(z.table,F)&&Dh.isFilterValueEqual(z.filter,P))T.push(Object.assign(Object.assign({},j),{id:z.id}));else{this.unsubscribe(),this.state=Fs.errored,i?.(Ac.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,i&&i(Ac.SUBSCRIBED);return}}).receive("error",w=>{this.state=Fs.errored,i?.(Ac.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{i?.(Ac.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,a={}){return await this.send({type:"presence",event:"track",payload:i},a.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,a,s){return this.state===Fs.joined&&i===nm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(i,a,s)}async httpSend(i,a,s={}){var l;if(a==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const g=await f.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(i,a={}){var s,l;if(!this._canPush()&&i.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=i,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,m;const g=this._push(i.type,i,a.timeout||this.timeout);i.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=Fs.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_1.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(l=>{s=new Jb(this,_1.leave,{},i),s.receive("ok",()=>{a(),l("ok")}).receive("timeout",()=>{a(),l("timed out")}).receive("error",()=>{l("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(i=>i.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fs.closed,this.bindings={}}async _fetchWithTimeout(i,a,s){const l=new AbortController,c=setTimeout(()=>l.abort(),s),d=await this.socket.fetch(i,Object.assign(Object.assign({},a),{signal:l.signal}));return clearTimeout(c),d}_push(i,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Jb(this,i,a,s);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(i){if(i.startTimeout(),this.pushBuffer.push(i),this.pushBuffer.length>Rj){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(i,a,s){return a}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,a,s){var l,c;const d=i.toLocaleLowerCase(),{close:f,error:m,leave:g,join:v}=_1;if(s&&[f,m,g,v].indexOf(d)>=0&&s!==this._joinRef())return;let A=this._onMessage(d,a,s);if(a&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var k,E,I;return((k=w.filter)===null||k===void 0?void 0:k.event)==="*"||((I=(E=w.filter)===null||E===void 0?void 0:E.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===d}).map(w=>w.callback(A,s)):(c=this.bindings[d])===null||c===void 0||c.filter(w=>{var k,E,I,T,N,j;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in w){const B=w.id,U=(k=w.filter)===null||k===void 0?void 0:k.event;return B&&((E=a.ids)===null||E===void 0?void 0:E.includes(B))&&(U==="*"||U?.toLocaleLowerCase()===((I=a.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const B=(N=(T=w?.filter)===null||T===void 0?void 0:T.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return B==="*"||B===((j=a?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===d}).map(w=>{if(typeof A=="object"&&"ids"in A){const k=A.data,{schema:E,table:I,commit_timestamp:T,type:N,errors:j}=k;A=Object.assign(Object.assign({},{schema:E,table:I,commit_timestamp:T,eventType:N,new:{},old:{},errors:j}),this._getPayloadRecords(k))}w.callback(A,s)})}_isClosed(){return this.state===Fs.closed}_isJoined(){return this.state===Fs.joined}_isJoining(){return this.state===Fs.joining}_isLeaving(){return this.state===Fs.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,a,s){const l=i.toLocaleLowerCase(),c={type:l,filter:a,callback:s};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(i,a){const s=i.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&Dh.isEqual(l.filter,a))})),this}static isEqual(i,a){if(Object.keys(i).length!==Object.keys(a).length)return!1;for(const s in i)if(i[s]!==a[s])return!1;return!0}static isFilterValueEqual(i,a){return(i??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(_1.close,{},i)}_onError(i){this._on(_1.error,{},a=>i(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fs.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const a={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(a.new=o8(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(a.old=o8(i.columns,i.old_record)),a}}const Zb=()=>{},n3={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lj=[1e3,2e3,5e3,1e4],zj=1e4,Hj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qj{constructor(i,a){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a4,this.transport=null,this.heartbeatIntervalMs=n3.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zb,this.ref=0,this.reconnectTimer=null,this.vsn=s8,this.logger=Zb,this.conn=null,this.sendBuffer=[],this.serializer=new Oj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((s=a?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${i}/${s4.websocket}`,this.httpEndpoint=g7(i),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_j.createWebSocket(this.endpointURL())}catch(i){this._setConnectionState("disconnected");const a=i.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(i,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(i?this.conn.close(i,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(i){const a=await i.unsubscribe();return a==="ok"&&this._remove(i),this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const i=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),i}log(i,a,s){this.logger(i,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case gd.connecting:return Ru.Connecting;case gd.open:return Ru.Open;case gd.closing:return Ru.Closing;default:return Ru.Closed}}isConnected(){return this.connectionState()===Ru.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(i,a={config:{}}){const s=`realtime:${i}`,l=this.getChannels().find(c=>c.topic===s);if(l)return l;{const c=new Dh(`realtime:${i}`,a,this);return this.channels.push(c),c}}push(i){const{topic:a,event:s,payload:l,ref:c}=i,d=()=>{this.encode(i,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${a} ${s} (${c})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(i=null){this._authPromise=this._performAuth(i);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var i;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(i=this.conn)===null||i===void 0||i.close(Mj,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},n3.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(i){this.heartbeatCallback=i}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let a=this.channels.find(s=>s.topic===i&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${i}"`),a.unsubscribe())}_remove(i){this.channels=this.channels.filter(a=>a.topic!==i.topic)}_onConnMessage(i){this.decode(i.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply"&&a.ref&&a.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error",g)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:l,payload:c,ref:d}=a,f=d?`(${d})`:"",m=c.status||"";this.log("receive",`${m} ${s} ${l} ${f}`.trim(),c),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(l,c,d)),this._triggerStateCallbacks("message",a)})}_clearTimer(i){var a;i==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):i==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i),this.conn.readyState===gd.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===gd.open||this.conn.readyState===gd.connecting)try{this.conn.close()}catch(i){this.log("error","Error closing connection",i)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(i=>i.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(i){var a;this._setConnectionState("disconnected"),this.log("transport","close",i),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",i)}_onConnError(i){this._setConnectionState("disconnected"),this.log("transport",`${i}`),this._triggerChanError(),this._triggerStateCallbacks("error",i);try{this.heartbeatCallback("error")}catch(a){this.log("error","error in heartbeat callback",a)}}_triggerChanError(){this.channels.forEach(i=>i._trigger(_1.error))}_appendParams(i,a){if(Object.keys(a).length===0)return i;const s=i.match(/\?/)?"&":"?",l=new URLSearchParams(a);return`${i}${s}${l}`}_workerObjectUrl(i){let a;if(i)a=i;else{const s=new Blob([Hj],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}_setConnectionState(i,a=!1){this._connectionState=i,i==="connecting"?this._wasManualDisconnect=!1:i==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(i=null){let a,s=!1;if(i)a=i,s=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),a=this.accessTokenValue}else a=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(l=>{const c={access_token:a,version:Nj};a&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(_1.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(i="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${i}`,a)})}_triggerStateCallbacks(i,a){try{this.stateChangeCallbacks[i].forEach(s=>{try{s(a)}catch(l){this.log("error",`error in ${i} callback`,l)}})}catch(s){this.log("error",`error triggering ${i} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new p7(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},n3.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(i){var a,s,l,c,d,f,m,g,v,y,A,w;switch(this.transport=(a=i?.transport)!==null&&a!==void 0?a:null,this.timeout=(s=i?.timeout)!==null&&s!==void 0?s:a4,this.heartbeatIntervalMs=(l=i?.heartbeatIntervalMs)!==null&&l!==void 0?l:n3.HEARTBEAT_INTERVAL,this.worker=(c=i?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=i?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=i?.heartbeatCallback)!==null&&f!==void 0?f:Zb,this.vsn=(m=i?.vsn)!==null&&m!==void 0?m:s8,i?.params&&(this.params=i.params),i?.logger&&(this.logger=i.logger),(i?.logLevel||i?.log_level)&&(this.logLevel=i.logLevel||i.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=i?.reconnectAfterMs)!==null&&g!==void 0?g:(k=>Lj[k-1]||zj),this.vsn){case Tj:this.encode=(v=i?.encode)!==null&&v!==void 0?v:((k,E)=>E(JSON.stringify(k))),this.decode=(y=i?.decode)!==null&&y!==void 0?y:((k,E)=>E(JSON.parse(k)));break;case h7:this.encode=(A=i?.encode)!==null&&A!==void 0?A:this.serializer.encode.bind(this.serializer),this.decode=(w=i?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=i?.workerUrl}}}var Sm=class extends Error{constructor(r,i){super(r),this.name="IcebergError",this.status=i.status,this.icebergType=i.icebergType,this.icebergCode=i.icebergCode,this.details=i.details,this.isCommitStateUnknown=i.icebergType==="CommitStateUnknownException"||[500,502,504].includes(i.status)&&i.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Gj(r,i,a){const s=new URL(i,r);if(a)for(const[l,c]of Object.entries(a))c!==void 0&&s.searchParams.set(l,c);return s.toString()}async function Vj(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function Yj(r){const i=r.fetchImpl??globalThis.fetch;return{async request({method:a,path:s,query:l,body:c,headers:d}){const f=Gj(r.baseUrl,s,l),m=await Vj(r.auth),g=await i(f,{method:a,headers:{...c?{"Content-Type":"application/json"}:{},...m,...d},body:c?JSON.stringify(c):void 0}),v=await g.text(),y=(g.headers.get("content-type")||"").includes("application/json"),A=y&&v?JSON.parse(v):v;if(!g.ok){const w=y?A:void 0,k=w?.error;throw new Sm(k?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:k?.type,icebergCode:k?.code,details:w})}return{status:g.status,headers:g.headers,data:A}}}}function i3(r){return r.join("")}var Qj=class{constructor(r,i=""){this.client=r,this.prefix=i}async listNamespaces(r){const i=r?{parent:i3(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:i})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,i){const a={namespace:r.namespace,properties:i?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${i3(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${i3(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${i3(r.namespace)}`}),!0}catch(i){if(i instanceof Sm&&i.status===404)return!1;throw i}}async createNamespaceIfNotExists(r,i){try{return await this.createNamespace(r,i)}catch(a){if(a instanceof Sm&&a.status===409)return;throw a}}};function xh(r){return r.join("")}var $j=class{constructor(r,i="",a){this.client=r,this.prefix=i,this.accessDelegation=a}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xh(r.namespace)}/tables`})).data.identifiers}async createTable(r,i){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xh(r.namespace)}/tables`,body:i,headers:a})).data.metadata}async updateTable(r,i){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xh(r.namespace)}/tables/${r.name}`,body:i});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(r,i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xh(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(i?.purge??!1)}})}async loadTable(r){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xh(r.namespace)}/tables/${r.name}`,headers:i})).data.metadata}async tableExists(r){const i={};this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xh(r.namespace)}/tables/${r.name}`,headers:i}),!0}catch(a){if(a instanceof Sm&&a.status===404)return!1;throw a}}async createTableIfNotExists(r,i){try{return await this.createTable(r,i)}catch(a){if(a instanceof Sm&&a.status===409)return await this.loadTable({namespace:r.namespace,name:i.name});throw a}}},Wj=class{constructor(r){let i="v1";r.catalogName&&(i+=`/${r.catalogName}`);const a=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Yj({baseUrl:a,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new Qj(this.client,i),this.tableOps=new $j(this.client,i,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,i){return this.namespaceOps.createNamespace(r,i)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,i){return this.tableOps.createTable(r,i)}async updateTable(r,i){return this.tableOps.updateTable(r,i)}async dropTable(r,i){await this.tableOps.dropTable(r,i)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,i){return this.namespaceOps.createNamespaceIfNotExists(r,i)}async createTableIfNotExists(r,i){return this.tableOps.createTableIfNotExists(r,i)}},jx=class extends Error{constructor(r,i="storage",a,s){super(r),this.__isStorageError=!0,this.namespace=i,this.name=i==="vectors"?"StorageVectorsError":"StorageError",this.status=a,this.statusCode=s}};function Bx(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var r3=class extends jx{constructor(r,i,a,s="storage"){super(r,s,i,a),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=i,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},v7=class extends jx{constructor(r,i,a="storage"){super(r,a),this.name=a==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=i}};const Xj=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),Kj=r=>{if(typeof r!="object"||r===null)return!1;const i=Object.getPrototypeOf(r);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},l4=r=>{if(Array.isArray(r))return r.map(a=>l4(a));if(typeof r=="function"||r!==Object(r))return r;const i={};return Object.entries(r).forEach(([a,s])=>{const l=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));i[l]=l4(s)}),i},Jj=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function km(r){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},km(r)}function Zj(r,i){if(km(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,i);if(km(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function eB(r){var i=Zj(r,"string");return km(i)=="symbol"?i:i+""}function tB(r,i,a){return(i=eB(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}function d8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),a.push.apply(a,s)}return a}function Zn(r){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?d8(Object(a),!0).forEach(function(s){tB(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):d8(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const u8=r=>{var i;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(i=r.error)===null||i===void 0?void 0:i.message)||JSON.stringify(r)},nB=async(r,i,a,s)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!a?.noResolveJson){const l=r,c=l.status||500;if(typeof l.json=="function")l.json().then(d=>{const f=d?.statusCode||d?.code||c+"";i(new r3(u8(d),c,f,s))}).catch(()=>{if(s==="vectors"){const d=c+"";i(new r3(l.statusText||`HTTP ${c} error`,c,d,s))}else{const d=c+"";i(new r3(l.statusText||`HTTP ${c} error`,c,d,s))}});else{const d=c+"";i(new r3(l.statusText||`HTTP ${c} error`,c,d,s))}}else i(new v7(u8(r),r,s))},iB=(r,i,a,s)=>{const l={method:r,headers:i?.headers||{}};return r==="GET"||r==="HEAD"||!s?Zn(Zn({},l),a):(Kj(s)?(l.headers=Zn({"Content-Type":"application/json"},i?.headers),l.body=JSON.stringify(s)):l.body=s,i?.duplex&&(l.duplex=i.duplex),Zn(Zn({},l),a))};async function _p(r,i,a,s,l,c,d){return new Promise((f,m)=>{r(a,iB(i,s,l,c)).then(g=>{if(!g.ok)throw g;if(s?.noResolveJson)return g;if(d==="vectors"){const v=g.headers.get("content-type");if(g.headers.get("content-length")==="0"||g.status===204)return{};if(!v||!v.includes("application/json"))return{}}return g.json()}).then(g=>f(g)).catch(g=>nB(g,m,s,d))})}function x7(r="storage"){return{get:async(i,a,s,l)=>_p(i,"GET",a,s,l,void 0,r),post:async(i,a,s,l,c)=>_p(i,"POST",a,l,c,s,r),put:async(i,a,s,l,c)=>_p(i,"PUT",a,l,c,s,r),head:async(i,a,s,l)=>_p(i,"HEAD",a,Zn(Zn({},s),{},{noResolveJson:!0}),l,void 0,r),remove:async(i,a,s,l,c)=>_p(i,"DELETE",a,l,c,s,r)}}const rB=x7("storage"),{get:Cm,post:E1,put:c4,head:aB,remove:Ew}=rB,Bl=x7("vectors");var x2=class{constructor(r,i={},a,s="storage"){this.shouldThrowOnError=!1,this.url=r,this.headers=i,this.fetch=Xj(a),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(r){var i=this;try{return{data:await r(),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(Bx(a))return{data:null,error:a};throw a}}},sB=class{constructor(r,i){this.downloadFn=r,this.shouldThrowOnError=i}then(r,i){return this.execute().then(r,i)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Bx(i))return{data:null,error:i};throw i}}};let b7;b7=Symbol.toStringTag;var oB=class{constructor(r,i){this.downloadFn=r,this.shouldThrowOnError=i,this[b7]="BlobDownloadBuilder",this.promise=null}asStream(){return new sB(this.downloadFn,this.shouldThrowOnError)}then(r,i){return this.getPromise().then(r,i)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Bx(i))return{data:null,error:i};throw i}}};const lB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},f8={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var cB=class extends x2{constructor(r,i={},a,s){super(r,i,s,"storage"),this.bucketId=a}async uploadOrUpdate(r,i,a,s){var l=this;return l.handleOperation(async()=>{let c;const d=Zn(Zn({},f8),s);let f=Zn(Zn({},l.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),m&&c.append("metadata",l.encodeMetadata(m)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),m&&!c.has("metadata")&&c.append("metadata",l.encodeMetadata(m))):(c=a,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=l.toBase64(l.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),s?.headers&&(f=Zn(Zn({},f),s.headers));const g=l._removeEmptyFolders(i),v=l._getFinalPath(g),y=await(r=="PUT"?c4:E1)(l.fetch,`${l.url}/object/${v}`,c,Zn({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{path:g,id:y.Id,fullPath:y.Key}})}async upload(r,i,a){return this.uploadOrUpdate("POST",r,i,a)}async uploadToSignedUrl(r,i,a,s){var l=this;const c=l._removeEmptyFolders(r),d=l._getFinalPath(c),f=new URL(l.url+`/object/upload/sign/${d}`);return f.searchParams.set("token",i),l.handleOperation(async()=>{let m;const g=Zn({upsert:f8.upsert},s),v=Zn(Zn({},l.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",a)):typeof FormData<"u"&&a instanceof FormData?(m=a,m.append("cacheControl",g.cacheControl)):(m=a,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType),{path:c,fullPath:(await c4(l.fetch,f.toString(),m,{headers:v})).Key}})}async createSignedUploadUrl(r,i){var a=this;return a.handleOperation(async()=>{let s=a._getFinalPath(r);const l=Zn({},a.headers);i?.upsert&&(l["x-upsert"]="true");const c=await E1(a.fetch,`${a.url}/object/upload/sign/${s}`,{},{headers:l}),d=new URL(a.url+c.url),f=d.searchParams.get("token");if(!f)throw new jx("No token returned by API");return{signedUrl:d.toString(),path:r,token:f}})}async update(r,i,a){return this.uploadOrUpdate("PUT",r,i,a)}async move(r,i,a){var s=this;return s.handleOperation(async()=>await E1(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:r,destinationKey:i,destinationBucket:a?.destinationBucket},{headers:s.headers}))}async copy(r,i,a){var s=this;return s.handleOperation(async()=>({path:(await E1(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:r,destinationKey:i,destinationBucket:a?.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(r,i,a){var s=this;return s.handleOperation(async()=>{let l=s._getFinalPath(r),c=await E1(s.fetch,`${s.url}/object/sign/${l}`,Zn({expiresIn:i},a?.transform?{transform:a.transform}:{}),{headers:s.headers});const d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{signedUrl:encodeURI(`${s.url}${c.signedURL}${d}`)}})}async createSignedUrls(r,i,a){var s=this;return s.handleOperation(async()=>{const l=await E1(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:i,paths:r},{headers:s.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return l.map(d=>Zn(Zn({},d),{},{signedUrl:d.signedURL?encodeURI(`${s.url}${d.signedURL}${c}`):null}))})}download(r,i,a){const s=typeof i?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(i?.transform||{}),c=l?`?${l}`:"",d=this._getFinalPath(r),f=()=>Cm(this.fetch,`${this.url}/${s}/${d}${c}`,{headers:this.headers,noResolveJson:!0},a);return new oB(f,this.shouldThrowOnError)}async info(r){var i=this;const a=i._getFinalPath(r);return i.handleOperation(async()=>l4(await Cm(i.fetch,`${i.url}/object/info/${a}`,{headers:i.headers})))}async exists(r){var i=this;const a=i._getFinalPath(r);try{return await aB(i.fetch,`${i.url}/object/${a}`,{headers:i.headers}),{data:!0,error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Bx(s)&&s instanceof v7){const l=s.originalError;if([400,404].includes(l?.status))return{data:!1,error:s}}throw s}}getPublicUrl(r,i){const a=this._getFinalPath(r),s=[],l=i?.download?`download=${i.download===!0?"":i.download}`:"";l!==""&&s.push(l);const c=typeof i?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(i?.transform||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${a}${f}`)}}}async remove(r){var i=this;return i.handleOperation(async()=>await Ew(i.fetch,`${i.url}/object/${i.bucketId}`,{prefixes:r},{headers:i.headers}))}async list(r,i,a){var s=this;return s.handleOperation(async()=>{const l=Zn(Zn(Zn({},lB),i),{},{prefix:r||""});return await E1(s.fetch,`${s.url}/object/list/${s.bucketId}`,l,{headers:s.headers},a)})}async listV2(r,i){var a=this;return a.handleOperation(async()=>{const s=Zn({},r);return await E1(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,s,{headers:a.headers},i)})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const i=[];return r.width&&i.push(`width=${r.width}`),r.height&&i.push(`height=${r.height}`),r.resize&&i.push(`resize=${r.resize}`),r.format&&i.push(`format=${r.format}`),r.quality&&i.push(`quality=${r.quality}`),i.join("&")}};const dB="2.95.3",Wm={"X-Client-Info":`storage-js/${dB}`};var uB=class extends x2{constructor(r,i={},a,s){const l=new URL(r);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const c=l.href.replace(/\/$/,""),d=Zn(Zn({},Wm),i);super(c,d,a,"storage")}async listBuckets(r){var i=this;return i.handleOperation(async()=>{const a=i.listBucketOptionsToQueryString(r);return await Cm(i.fetch,`${i.url}/bucket${a}`,{headers:i.headers})})}async getBucket(r){var i=this;return i.handleOperation(async()=>await Cm(i.fetch,`${i.url}/bucket/${r}`,{headers:i.headers}))}async createBucket(r,i={public:!1}){var a=this;return a.handleOperation(async()=>await E1(a.fetch,`${a.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:a.headers}))}async updateBucket(r,i){var a=this;return a.handleOperation(async()=>await c4(a.fetch,`${a.url}/bucket/${r}`,{id:r,name:r,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:a.headers}))}async emptyBucket(r){var i=this;return i.handleOperation(async()=>await E1(i.fetch,`${i.url}/bucket/${r}/empty`,{},{headers:i.headers}))}async deleteBucket(r){var i=this;return i.handleOperation(async()=>await Ew(i.fetch,`${i.url}/bucket/${r}`,{},{headers:i.headers}))}listBucketOptionsToQueryString(r){const i={};return r&&("limit"in r&&(i.limit=String(r.limit)),"offset"in r&&(i.offset=String(r.offset)),r.search&&(i.search=r.search),r.sortColumn&&(i.sortColumn=r.sortColumn),r.sortOrder&&(i.sortOrder=r.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}},fB=class extends x2{constructor(r,i={},a){const s=r.replace(/\/$/,""),l=Zn(Zn({},Wm),i);super(s,l,a,"storage")}async createBucket(r){var i=this;return i.handleOperation(async()=>await E1(i.fetch,`${i.url}/bucket`,{name:r},{headers:i.headers}))}async listBuckets(r){var i=this;return i.handleOperation(async()=>{const a=new URLSearchParams;r?.limit!==void 0&&a.set("limit",r.limit.toString()),r?.offset!==void 0&&a.set("offset",r.offset.toString()),r?.sortColumn&&a.set("sortColumn",r.sortColumn),r?.sortOrder&&a.set("sortOrder",r.sortOrder),r?.search&&a.set("search",r.search);const s=a.toString(),l=s?`${i.url}/bucket?${s}`:`${i.url}/bucket`;return await Cm(i.fetch,l,{headers:i.headers})})}async deleteBucket(r){var i=this;return i.handleOperation(async()=>await Ew(i.fetch,`${i.url}/bucket/${r}`,{},{headers:i.headers}))}from(r){var i=this;if(!Jj(r))throw new jx("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new Wj({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>i.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(a,{get(l,c){const d=l[c];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(l,f),error:null}}catch(m){if(s)throw m;return{data:null,error:m}}}}})}},hB=class extends x2{constructor(r,i={},a){const s=r.replace(/\/$/,""),l=Zn(Zn({},Wm),{},{"Content-Type":"application/json"},i);super(s,l,a,"vectors")}async createIndex(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/CreateIndex`,r,{headers:i.headers})||{})}async getIndex(r,i){var a=this;return a.handleOperation(async()=>await Bl.post(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:r,indexName:i},{headers:a.headers}))}async listIndexes(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/ListIndexes`,r,{headers:i.headers}))}async deleteIndex(r,i){var a=this;return a.handleOperation(async()=>await Bl.post(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:r,indexName:i},{headers:a.headers})||{})}},pB=class extends x2{constructor(r,i={},a){const s=r.replace(/\/$/,""),l=Zn(Zn({},Wm),{},{"Content-Type":"application/json"},i);super(s,l,a,"vectors")}async putVectors(r){var i=this;if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/PutVectors`,r,{headers:i.headers})||{})}async getVectors(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/GetVectors`,r,{headers:i.headers}))}async listVectors(r){var i=this;if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/ListVectors`,r,{headers:i.headers}))}async queryVectors(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/QueryVectors`,r,{headers:i.headers}))}async deleteVectors(r){var i=this;if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/DeleteVectors`,r,{headers:i.headers})||{})}},mB=class extends x2{constructor(r,i={},a){const s=r.replace(/\/$/,""),l=Zn(Zn({},Wm),{},{"Content-Type":"application/json"},i);super(s,l,a,"vectors")}async createBucket(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:i.headers})||{})}async getBucket(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/GetVectorBucket`,{vectorBucketName:r},{headers:i.headers}))}async listBuckets(r={}){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/ListVectorBuckets`,r,{headers:i.headers}))}async deleteBucket(r){var i=this;return i.handleOperation(async()=>await Bl.post(i.fetch,`${i.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:i.headers})||{})}},gB=class extends mB{constructor(r,i={}){super(r,i.headers||{},i.fetch)}from(r){return new vB(this.url,this.headers,r,this.fetch)}async createBucket(r){var i=()=>super.createBucket,a=this;return i().call(a,r)}async getBucket(r){var i=()=>super.getBucket,a=this;return i().call(a,r)}async listBuckets(r={}){var i=()=>super.listBuckets,a=this;return i().call(a,r)}async deleteBucket(r){var i=()=>super.deleteBucket,a=this;return i().call(a,r)}},vB=class extends hB{constructor(r,i,a,s){super(r,i,s),this.vectorBucketName=a}async createIndex(r){var i=()=>super.createIndex,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(r={}){var i=()=>super.listIndexes,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(r){var i=()=>super.getIndex,a=this;return i().call(a,a.vectorBucketName,r)}async deleteIndex(r){var i=()=>super.deleteIndex,a=this;return i().call(a,a.vectorBucketName,r)}index(r){return new xB(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},xB=class extends pB{constructor(r,i,a,s,l){super(r,i,l),this.vectorBucketName=a,this.indexName=s}async putVectors(r){var i=()=>super.putVectors,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(r){var i=()=>super.getVectors,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(r={}){var i=()=>super.listVectors,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(r){var i=()=>super.queryVectors,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(r){var i=()=>super.deleteVectors,a=this;return i().call(a,Zn(Zn({},r),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},bB=class extends uB{constructor(r,i={},a,s){super(r,i,a,s)}from(r){return new cB(this.url,this.headers,r,this.fetch)}get vectors(){return new gB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fB(this.url+"/iceberg",this.headers,this.fetch)}};const y7="2.95.3",Th=30*1e3,d4=3,ey=d4*Th,yB="http://localhost:9999",wB="supabase.auth.token",AB={"X-Client-Info":`gotrue-js/${y7}`},u4="X-Supabase-Api-Version",w7={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},SB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kB=600*1e3;class Em extends Error{constructor(i,a,s){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function En(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class CB extends Em{constructor(i,a,s){super(i,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function EB(r){return En(r)&&r.name==="AuthApiError"}class Ou extends Em{constructor(i,a){super(i),this.name="AuthUnknownError",this.originalError=a}}class jc extends Em{constructor(i,a,s,l){super(i,s,l),this.name=a,this.status=s}}class Dl extends jc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ty(r){return En(r)&&r.name==="AuthSessionMissingError"}class bh extends jc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class a3 extends jc{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class s3 extends jc{constructor(i,a=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _B(r){return En(r)&&r.name==="AuthImplicitGrantRedirectError"}class h8 extends jc{constructor(i,a=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class IB extends jc{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class f4 extends jc{constructor(i,a){super(i,"AuthRetryableFetchError",a,void 0)}}function ny(r){return En(r)&&r.name==="AuthRetryableFetchError"}class p8 extends jc{constructor(i,a,s){super(i,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class h4 extends jc{constructor(i){super(i,"AuthInvalidJwtError",400,"invalid_jwt")}}const Q3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),m8=` 	
\r=`.split(""),NB=(()=>{const r=new Array(128);for(let i=0;i<r.length;i+=1)r[i]=-1;for(let i=0;i<m8.length;i+=1)r[m8[i].charCodeAt(0)]=-2;for(let i=0;i<Q3.length;i+=1)r[Q3[i].charCodeAt(0)]=i;return r})();function g8(r,i,a){if(r!==null)for(i.queue=i.queue<<8|r,i.queuedBits+=8;i.queuedBits>=6;){const s=i.queue>>i.queuedBits-6&63;a(Q3[s]),i.queuedBits-=6}else if(i.queuedBits>0)for(i.queue=i.queue<<6-i.queuedBits,i.queuedBits=6;i.queuedBits>=6;){const s=i.queue>>i.queuedBits-6&63;a(Q3[s]),i.queuedBits-=6}}function A7(r,i,a){const s=NB[r];if(s>-1)for(i.queue=i.queue<<6|s,i.queuedBits+=6;i.queuedBits>=8;)a(i.queue>>i.queuedBits-8&255),i.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function v8(r){const i=[],a=d=>{i.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=d=>{RB(d,s,a)};for(let d=0;d<r.length;d+=1)A7(r.charCodeAt(d),l,c);return i.join("")}function TB(r,i){if(r<=127){i(r);return}else if(r<=2047){i(192|r>>6),i(128|r&63);return}else if(r<=65535){i(224|r>>12),i(128|r>>6&63),i(128|r&63);return}else if(r<=1114111){i(240|r>>18),i(128|r>>12&63),i(128|r>>6&63),i(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function MB(r,i){for(let a=0;a<r.length;a+=1){let s=r.charCodeAt(a);if(s>55295&&s<=56319){const l=(s-55296)*1024&65535;s=(r.charCodeAt(a+1)-56320&65535|l)+65536,a+=1}TB(s,i)}}function RB(r,i,a){if(i.utf8seq===0){if(r<=127){a(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){i.utf8seq=s;break}if(i.utf8seq===2)i.codepoint=r&31;else if(i.utf8seq===3)i.codepoint=r&15;else if(i.utf8seq===4)i.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");i.utf8seq-=1}else if(i.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");i.codepoint=i.codepoint<<6|r&63,i.utf8seq-=1,i.utf8seq===0&&a(i.codepoint)}}function Vh(r){const i=[],a={queue:0,queuedBits:0},s=l=>{i.push(l)};for(let l=0;l<r.length;l+=1)A7(r.charCodeAt(l),a,s);return new Uint8Array(i)}function OB(r){const i=[];return MB(r,a=>i.push(a)),new Uint8Array(i)}function qu(r){const i=[],a={queue:0,queuedBits:0},s=l=>{i.push(l)};return r.forEach(l=>g8(l,a,s)),g8(null,a,s),i.join("")}function DB(r){return Math.round(Date.now()/1e3)+r}function jB(){return Symbol("auth-callback")}const xo=()=>typeof window<"u"&&typeof document<"u",Au={tested:!1,writable:!1},S7=()=>{if(!xo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Au.tested)return Au.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Au.tested=!0,Au.writable=!0}catch{Au.tested=!0,Au.writable=!1}return Au.writable};function BB(r){const i={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((l,c)=>{i[c]=l})}catch{}return a.searchParams.forEach((s,l)=>{i[l]=s}),i}const k7=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),PB=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Mh=async(r,i,a)=>{await r.setItem(i,JSON.stringify(a))},Su=async(r,i)=>{const a=await r.getItem(i);if(!a)return null;try{return JSON.parse(a)}catch{return a}},vo=async(r,i)=>{await r.removeItem(i)};class Px{constructor(){this.promise=new Px.promiseConstructor((i,a)=>{this.resolve=i,this.reject=a})}}Px.promiseConstructor=Promise;function o3(r){const i=r.split(".");if(i.length!==3)throw new h4("Invalid JWT structure");for(let s=0;s<i.length;s++)if(!SB.test(i[s]))throw new h4("JWT not in base64url format");return{header:JSON.parse(v8(i[0])),payload:JSON.parse(v8(i[1])),signature:Vh(i[2]),raw:{header:i[0],payload:i[1]}}}async function FB(r){return await new Promise(i=>{setTimeout(()=>i(null),r)})}function UB(r,i){return new Promise((s,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await r(c);if(!i(c,null,d)){s(d);return}}catch(d){if(!i(c,d)){l(d);return}}})()})}function LB(r){return("0"+r.toString(16)).substr(-2)}function zB(){const i=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let l="";for(let c=0;c<56;c++)l+=a.charAt(Math.floor(Math.random()*s));return l}return crypto.getRandomValues(i),Array.from(i,LB).join("")}async function HB(r){const a=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",a),l=new Uint8Array(s);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function qB(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=await HB(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yh(r,i,a=!1){const s=zB();let l=s;a&&(l+="/PASSWORD_RECOVERY"),await Mh(r,`${i}-code-verifier`,l);const c=await qB(s);return[c,s===c?"plain":"s256"]}const GB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VB(r){const i=r.headers.get(u4);if(!i||!i.match(GB))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}function YB(r){if(!r)throw new Error("Missing exp claim");const i=Math.floor(Date.now()/1e3);if(r<=i)throw new Error("JWT has expired")}function QB(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $B=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wh(r){if(!$B.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function iy(){const r={};return new Proxy(r,{get:(i,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(i,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(i,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WB(r,i){return new Proxy(r,{get:(a,s,l)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const c=s.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,s,l)}return!i.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i.value=!0),Reflect.get(a,s,l)}})}function x8(r){return JSON.parse(JSON.stringify(r))}const Iu=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),XB=[502,503,504];async function b8(r){var i;if(!PB(r))throw new f4(Iu(r),0);if(XB.includes(r.status))throw new f4(Iu(r),r.status);let a;try{a=await r.json()}catch(c){throw new Ou(Iu(c),c)}let s;const l=VB(r);if(l&&l.getTime()>=w7["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new p8(Iu(a),r.status,((i=a.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(s==="session_not_found")throw new Dl}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new p8(Iu(a),r.status,a.weak_password.reasons);throw new CB(Iu(a),r.status||500,s)}const KB=(r,i,a,s)=>{const l={method:r,headers:i?.headers||{}};return r==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i?.headers),l.body=JSON.stringify(s),Object.assign(Object.assign({},l),a))};async function Xn(r,i,a,s){var l;const c=Object.assign({},s?.headers);c[u4]||(c[u4]=w7["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const d=(l=s?.query)!==null&&l!==void 0?l:{};s?.redirectTo&&(d.redirect_to=s.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await JB(r,i,a+f,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(m):{data:Object.assign({},m),error:null}}async function JB(r,i,a,s,l,c){const d=KB(i,s,l,c);let f;try{f=await r(a,Object.assign({},d))}catch(m){throw console.error(m),new f4(Iu(m),0)}if(f.ok||await b8(f),s?.noResolveJson)return f;try{return await f.json()}catch(m){await b8(m)}}function k1(r){var i;let a=null;tP(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=DB(r.expires_in)));const s=(i=r.user)!==null&&i!==void 0?i:r;return{data:{session:a,user:s},error:null}}function y8(r){const i=k1(r);return!i.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(i.data.weak_password=r.weak_password),i}function yd(r){var i;return{data:{user:(i=r.user)!==null&&i!==void 0?i:r},error:null}}function ZB(r){return{data:r,error:null}}function eP(r){const{action_link:i,email_otp:a,hashed_token:s,redirect_to:l,verification_type:c}=r,d=Dx(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:i,email_otp:a,hashed_token:s,redirect_to:l,verification_type:c},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function w8(r){return r}function tP(r){return r.access_token&&r.refresh_token&&r.expires_in}const ry=["global","local","others"];class nP{constructor({url:i="",headers:a={},fetch:s}){this.url=i,this.headers=a,this.fetch=k7(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(i,a=ry[0]){if(ry.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ry.join(", ")}`);try{return await Xn(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(s){if(En(s))return{data:null,error:s};throw s}}async inviteUserByEmail(i,a={}){try{return await Xn(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:yd})}catch(s){if(En(s))return{data:{user:null},error:s};throw s}}async generateLink(i){try{const{options:a}=i,s=Dx(i,["options"]),l=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(l.new_email=s?.newEmail,delete l.newEmail),await Xn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:eP,redirectTo:a?.redirectTo})}catch(a){if(En(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(i){try{return await Xn(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:yd})}catch(a){if(En(a))return{data:{user:null},error:a};throw a}}async listUsers(i){var a,s,l,c,d,f,m;try{const g={nextPage:null,lastPage:0,total:0},v=await Xn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=i?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(c=(l=i?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:w8});if(v.error)throw v.error;const y=await v.json(),A=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(k=>{const E=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(k.split(";")[1].split("=")[1]);g[`${I}Page`]=E}),g.total=parseInt(A)),{data:Object.assign(Object.assign({},y),g),error:null}}catch(g){if(En(g))return{data:{users:[]},error:g};throw g}}async getUserById(i){wh(i);try{return await Xn(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:yd})}catch(a){if(En(a))return{data:{user:null},error:a};throw a}}async updateUserById(i,a){wh(i);try{return await Xn(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:a,headers:this.headers,xform:yd})}catch(s){if(En(s))return{data:{user:null},error:s};throw s}}async deleteUser(i,a=!1){wh(i);try{return await Xn(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:a},xform:yd})}catch(s){if(En(s))return{data:{user:null},error:s};throw s}}async _listFactors(i){wh(i.userId);try{const{data:a,error:s}=await Xn(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:a,error:s}}catch(a){if(En(a))return{data:null,error:a};throw a}}async _deleteFactor(i){wh(i.userId),wh(i.id);try{return{data:await Xn(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(a){if(En(a))return{data:null,error:a};throw a}}async _listOAuthClients(i){var a,s,l,c,d,f,m;try{const g={nextPage:null,lastPage:0,total:0},v=await Xn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=i?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(c=(l=i?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:w8});if(v.error)throw v.error;const y=await v.json(),A=(d=v.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(k=>{const E=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(k.split(";")[1].split("=")[1]);g[`${I}Page`]=E}),g.total=parseInt(A)),{data:Object.assign(Object.assign({},y),g),error:null}}catch(g){if(En(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(i){try{return await Xn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:i,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(En(a))return{data:null,error:a};throw a}}async _getOAuthClient(i){try{return await Xn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(En(a))return{data:null,error:a};throw a}}async _updateOAuthClient(i,a){try{return await Xn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${i}`,{body:a,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(En(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(i){try{return await Xn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${i}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(En(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(i){try{return await Xn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${i}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(En(a))return{data:null,error:a};throw a}}}function A8(r={}){return{getItem:i=>r[i]||null,setItem:(i,a)=>{r[i]=a},removeItem:i=>{delete r[i]}}}const Ah={debug:!!(globalThis&&S7()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class C7 extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class iP extends C7{}async function rP(r,i,a){Ah.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,i);const s=new globalThis.AbortController;return i>0&&setTimeout(()=>{s.abort(),Ah.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async l=>{if(l){Ah.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,l.name);try{return await a()}finally{Ah.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,l.name)}}else{if(i===0)throw Ah.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new iP(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ah.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function aP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function E7(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function sP(r){return parseInt(r,16)}function oP(r){const i=new TextEncoder().encode(r);return"0x"+Array.from(i,s=>s.toString(16).padStart(2,"0")).join("")}function lP(r){var i;const{chainId:a,domain:s,expirationTime:l,issuedAt:c=new Date,nonce:d,notBefore:f,requestId:m,resources:g,scheme:v,uri:y,version:A}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(A!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${A}`);if(!((i=r.statement)===null||i===void 0)&&i.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const w=E7(r.address),k=v?`${v}://${s}`:s,E=r.statement?`${r.statement}
`:"",I=`${k} wants you to sign in with your Ethereum account:
${w}

${E}`;let T=`URI: ${y}
Version: ${A}
Chain ID: ${a}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(l&&(T+=`
Expiration Time: ${l.toISOString()}`),f&&(T+=`
Not Before: ${f.toISOString()}`),m&&(T+=`
Request ID: ${m}`),g){let N=`
Resources:`;for(const j of g){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);N+=`
- ${j}`}T+=N}return`${I}
${T}`}class _s extends Error{constructor({message:i,code:a,cause:s,name:l}){var c;super(i,{cause:s}),this.__isWebAuthnError=!0,this.name=(c=l??(s instanceof Error?s.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=a}}class $3 extends _s{constructor(i,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:i}),this.name="WebAuthnUnknownError",this.originalError=a}}function cP({error:r,options:i}){var a,s,l;const{publicKey:c}=i;if(!c)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(i.signal instanceof AbortSignal)return new _s({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new _s({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(i.mediation==="conditional"&&((s=c.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _s({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new _s({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new _s({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new _s({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new _s({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new _s({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const d=window.location.hostname;if(_7(d)){if(c.rp.id!==d)return new _s({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new _s({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new _s({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new _s({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new _s({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function dP({error:r,options:i}){const{publicKey:a}=i;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(i.signal instanceof AbortSignal)return new _s({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new _s({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(_7(s)){if(a.rpId!==s)return new _s({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new _s({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new _s({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new _s({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class uP{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const i=new AbortController;return this.controller=i,i.signal}cancelCeremony(){if(this.controller){const i=new Error("Manually cancelling existing WebAuthn API call");i.name="AbortError",this.controller.abort(i),this.controller=void 0}}}const fP=new uP;function hP(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:i,user:a,excludeCredentials:s}=r,l=Dx(r,["challenge","user","excludeCredentials"]),c=Vh(i).buffer,d=Object.assign(Object.assign({},a),{id:Vh(a.id).buffer}),f=Object.assign(Object.assign({},l),{challenge:c,user:d});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const g=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Vh(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function pP(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:i,allowCredentials:a}=r,s=Dx(r,["challenge","allowCredentials"]),l=Vh(i).buffer,c=Object.assign(Object.assign({},s),{challenge:l});if(a&&a.length>0){c.allowCredentials=new Array(a.length);for(let d=0;d<a.length;d++){const f=a[d];c.allowCredentials[d]=Object.assign(Object.assign({},f),{id:Vh(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function mP(r){var i;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:qu(new Uint8Array(r.response.attestationObject)),clientDataJSON:qu(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(i=a.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function gP(r){var i;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,s=r.getClientExtensionResults(),l=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:qu(new Uint8Array(l.authenticatorData)),clientDataJSON:qu(new Uint8Array(l.clientDataJSON)),signature:qu(new Uint8Array(l.signature)),userHandle:l.userHandle?qu(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(i=a.authenticatorAttachment)!==null&&i!==void 0?i:void 0}}function _7(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function S8(){var r,i;return!!(xo()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.get)=="function")}async function vP(r){try{const i=await navigator.credentials.create(r);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new $3("Browser returned unexpected credential type",i)}:{data:null,error:new $3("Empty credential response",i)}}catch(i){return{data:null,error:cP({error:i,options:r})}}}async function xP(r){try{const i=await navigator.credentials.get(r);return i?i instanceof PublicKeyCredential?{data:i,error:null}:{data:null,error:new $3("Browser returned unexpected credential type",i)}:{data:null,error:new $3("Empty credential response",i)}}catch(i){return{data:null,error:dP({error:i,options:r})}}}const bP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},yP={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function W3(...r){const i=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),a=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),s={};for(const l of r)if(l)for(const c in l){const d=l[c];if(d!==void 0)if(Array.isArray(d))s[c]=d;else if(a(d))s[c]=d;else if(i(d)){const f=s[c];i(f)?s[c]=W3(f,d):s[c]=W3(d)}else s[c]=d}return s}function wP(r,i){return W3(bP,r,i||{})}function AP(r,i){return W3(yP,r,i||{})}class SP{constructor(i){this.client=i,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(i){return this.client.mfa.enroll(Object.assign(Object.assign({},i),{factorType:"webauthn"}))}async _challenge({factorId:i,webauthn:a,friendlyName:s,signal:l},c){var d;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:i,webauthn:a});if(!f)return{data:null,error:m};const g=l??fP.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;if(!v.name){const y=s;if(y)v.name=`${v.id}:${y}`;else{const w=(await this.client.getUser()).data.user,k=((d=w?.user_metadata)===null||d===void 0?void 0:d.name)||w?.email||w?.id||"User";v.name=`${v.id}:${k}`}}v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=wP(f.webauthn.credential_options.publicKey,c?.create),{data:y,error:A}=await vP({publicKey:v,signal:g});return y?{data:{factorId:i,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:y}},error:null}:{data:null,error:A}}case"request":{const v=AP(f.webauthn.credential_options.publicKey,c?.request),{data:y,error:A}=await xP(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:g}));return y?{data:{factorId:i,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:y}},error:null}:{data:null,error:A}}}}catch(f){return En(f)?{data:null,error:f}:{data:null,error:new Ou("Unexpected error in challenge",f)}}}async _verify({challengeId:i,factorId:a,webauthn:s}){return this.client.mfa.verify({factorId:a,challengeId:i,webauthn:s})}async _authenticate({factorId:i,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!a)return{data:null,error:new Em("rpId is required for WebAuthn authentication")};try{if(!S8())return{data:null,error:new Ou("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:i,webauthn:{rpId:a,rpOrigins:s},signal:l},{request:c});if(!d)return{data:null,error:f};const{webauthn:m}=d;return this._verify({factorId:i,challengeId:d.challengeId,webauthn:{type:m.type,rpId:a,rpOrigins:s,credential_response:m.credential_response}})}catch(d){return En(d)?{data:null,error:d}:{data:null,error:new Ou("Unexpected error in authenticate",d)}}}async _register({friendlyName:i,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!a)return{data:null,error:new Em("rpId is required for WebAuthn registration")};try{if(!S8())return{data:null,error:new Ou("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:i});if(!d)return await this.client.mfa.listFactors().then(v=>{var y;return(y=v.data)===null||y===void 0?void 0:y.all.find(A=>A.factor_type==="webauthn"&&A.friendly_name===i&&A.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:f};const{data:m,error:g}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:a,rpOrigins:s},signal:l},{create:c});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:a,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(d){return En(d)?{data:null,error:d}:{data:null,error:new Ou("Unexpected error in register",d)}}}}aP();const kP={url:yB,storageKey:wB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function k8(r,i,a){return await a()}const Sh={};class _m{get jwks(){var i,a;return(a=(i=Sh[this.storageKey])===null||i===void 0?void 0:i.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(i){Sh[this.storageKey]=Object.assign(Object.assign({},Sh[this.storageKey]),{jwks:i})}get jwks_cached_at(){var i,a;return(a=(i=Sh[this.storageKey])===null||i===void 0?void 0:i.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(i){Sh[this.storageKey]=Object.assign(Object.assign({},Sh[this.storageKey]),{cachedAt:i})}constructor(i){var a,s,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},kP),i);if(this.storageKey=c.storageKey,this.instanceID=(a=_m.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,_m.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&xo()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new nP({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=k7(c.fetch),this.lock=c.lock||k8,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&xo()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=rP:this.lock=k8,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new SP(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:S7()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=A8(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=A8(this.memoryStorage)),xo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(i){if(this.throwOnError&&i&&i.error)throw i.error;return i}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${y7}) ${new Date().toISOString()}`}_debug(...i){return this.logDebugMessages&&this.logger(this._logPrefix(),...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{let a={},s="none";if(xo()&&(a=BB(window.location.href),this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce")),xo()&&this.detectSessionInUrl&&s!=="none"){const{data:l,error:c}=await this._getSessionFromURL(a,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),_B(c)){const m=(i=c.details)===null||i===void 0?void 0:i.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:d,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return En(a)?this._returnResult({error:a}):this._returnResult({error:new Ou("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var a,s,l;try{const c=await Xn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=i?.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(l=i?.options)===null||l===void 0?void 0:l.captchaToken}},xform:k1}),{data:d,error:f}=c;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(En(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(i){var a,s,l;try{let c;if("email"in i){const{email:v,password:y,options:A}=i;let w=null,k=null;this.flowType==="pkce"&&([w,k]=await yh(this.storage,this.storageKey)),c=await Xn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A?.emailRedirectTo,body:{email:v,password:y,data:(a=A?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:A?.captchaToken},code_challenge:w,code_challenge_method:k},xform:k1})}else if("phone"in i){const{phone:v,password:y,options:A}=i;c=await Xn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(s=A?.data)!==null&&s!==void 0?s:{},channel:(l=A?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:k1})}else throw new a3("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return await vo(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(i){try{let a;if("email"in i){const{email:c,password:d,options:f}=i;a=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:y8})}else if("phone"in i){const{phone:c,password:d,options:f}=i;a=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:y8})}else throw new a3("You must provide either an email or phone number and a password");const{data:s,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s||!s.session||!s.user){const c=new bh;return this._returnResult({data:{user:null,session:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:l})}catch(a){if(En(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(i){var a,s,l,c;return await this._handleProviderSignIn(i.provider,{redirectTo:(a=i.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=i.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=i.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=i.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(i))}async signInWithWeb3(i){const{chain:a}=i;switch(a){case"ethereum":return await this.signInWithEthereum(i);case"solana":return await this.signInWithSolana(i);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(i){var a,s,l,c,d,f,m,g,v,y,A;let w,k;if("message"in i)w=i.message,k=i.signature;else{const{chain:E,wallet:I,statement:T,options:N}=i;let j;if(xo())if(typeof I=="object")j=I;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")j=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=I}const B=new URL((a=N?.url)!==null&&a!==void 0?a:window.location.href),U=await j.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=E7(U[0]);let P=(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const V=await j.request({method:"eth_chainId"});P=sP(V)}const z={domain:B.host,address:F,statement:T,uri:B.href,version:"1",chainId:P,nonce:(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(c=N?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=N?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=N?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=N?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=lP(z),k=await j.request({method:"personal_sign",params:[oP(w),F]})}try{const{data:E,error:I}=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:k},!((y=i.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(A=i.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:k1});if(I)throw I;if(!E||!E.session||!E.user){const T=new bh;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:I})}catch(E){if(En(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(i){var a,s,l,c,d,f,m,g,v,y,A,w;let k,E;if("message"in i)k=i.message,E=i.signature;else{const{chain:I,wallet:T,statement:N,options:j}=i;let B;if(xo())if(typeof T=="object")B=T;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))B=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=T}const U=new URL((a=j?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in B&&B.signIn){const F=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),N?{statement:N}:null));let P;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")P=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)P=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)k=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),E=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${U.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(l=(s=j?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=j?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((f=j?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((m=j?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((g=j?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((y=(v=j?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...j.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const F=await B.signMessage(new TextEncoder().encode(k),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:I,error:T}=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:qu(E)},!((A=i.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(w=i.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:k1});if(T)throw T;if(!I||!I.session||!I.user){const N=new bh;return this._returnResult({data:{user:null,session:null},error:N})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:T})}catch(I){if(En(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(i){const a=await Su(this.storage,`${this.storageKey}-code-verifier`),[s,l]=(a??"").split("/");try{if(!s&&this.flowType==="pkce")throw new IB;const{data:c,error:d}=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:s},xform:k1});if(await vo(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const f=new bh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:d})}catch(c){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(i){try{const{options:a,provider:s,token:l,access_token:c,nonce:d}=i,f=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:l,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:k1}),{data:m,error:g}=f;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new bh;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(a){if(En(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(i){var a,s,l,c,d;try{if("email"in i){const{email:f,options:m}=i;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await yh(this.storage,this.storageKey));const{error:y}=await Xn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(a=m?.data)!==null&&a!==void 0?a:{},create_user:(s=m?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in i){const{phone:f,options:m}=i,{data:g,error:v}=await Xn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:v})}throw new a3("You must provide either an email or phone number.")}catch(f){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(i){var a,s;try{let l,c;"options"in i&&(l=(a=i.options)===null||a===void 0?void 0:a.redirectTo,c=(s=i.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:f}=await Xn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:k1});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,g=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(En(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(i){var a,s,l,c,d;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await yh(this.storage,this.storageKey));const g=await Xn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(s=(a=i.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((l=i?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:ZB});return!((c=g.data)===null||c===void 0)&&c.url&&xo()&&!(!((d=i.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(f){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:a},error:s}=i;if(s)throw s;if(!a)throw new Dl;const{error:l}=await Xn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(i){if(En(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async resend(i){try{const a=`${this.url}/resend`;if("email"in i){const{email:s,type:l,options:c}=i,{error:d}=await Xn(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in i){const{phone:s,type:l,options:c}=i,{data:d,error:f}=await Xn(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new a3("You must provide either an email or phone number and a type")}catch(a){if(En(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async a=>a))}async _acquireLock(i,a){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await i(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const a=await Su(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?i=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const s=i.expires_at?i.expires_at*1e3-Date.now()<ey:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",i.expires_at),!s){if(this.userStorage){const d=await Su(this.userStorage,this.storageKey+"-user");d?.user?i.user=d.user:i.user=iy()}if(this.storage.isServer&&i.user&&!i.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};i.user=WB(i.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:i},error:null}}const{data:l,error:c}=await this._callRefreshToken(i.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(i){if(i)return await this._getUser(i);await this.initializePromise;const a=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(i){try{return i?await Xn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:yd}):await this._useSession(async a=>{var s,l,c;const{data:d,error:f}=a;if(f)throw f;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dl}:await Xn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:yd})})}catch(a){if(En(a))return ty(a)&&(await this._removeSession(),await vo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(i,a={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(i,a))}async _updateUser(i,a={}){try{return await this._useSession(async s=>{const{data:l,error:c}=s;if(c)throw c;if(!l.session)throw new Dl;const d=l.session;let f=null,m=null;this.flowType==="pkce"&&i.email!=null&&([f,m]=await yh(this.storage,this.storageKey));const{data:g,error:v}=await Xn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:yd});if(v)throw v;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(s){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new Dl;const a=Date.now()/1e3;let s=a,l=!0,c=null;const{payload:d}=o3(i.access_token);if(d.exp&&(s=d.exp,l=s<=a),l){const{data:f,error:m}=await this._callRefreshToken(i.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:m}=await this._getUser(i.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:i.access_token,refresh_token:i.refresh_token,user:f.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(a){if(En(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async a=>{var s;if(!i){const{data:d,error:f}=a;if(f)throw f;i=(s=d.session)!==null&&s!==void 0?s:void 0}if(!i?.refresh_token)throw new Dl;const{data:l,error:c}=await this._callRefreshToken(i.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(En(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(i,a){try{if(!xo())throw new s3("No browser detected.");if(i.error||i.error_description||i.error_code)throw new s3(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new h8("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new s3("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new h8("No code detected.");const{data:N,error:j}=await this._exchangeCodeForSession(i.code);if(j)throw j;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:l,access_token:c,refresh_token:d,expires_in:f,expires_at:m,token_type:g}=i;if(!c||!f||!d||!g)throw new s3("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(f);let A=v+y;m&&(A=parseInt(m));const w=A-v;w*1e3<=Th&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const k=A-y;v-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,A,v):v-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,A,v);const{data:E,error:I}=await this._getUser(c);if(I)throw I;const T={provider_token:s,provider_refresh_token:l,access_token:c,expires_in:y,expires_at:A,refresh_token:d,token_type:g,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:i.type},error:null})}catch(s){if(En(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(i){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),i):!!(i.access_token||i.error_description)}async _isPKCECallback(i){const a=await Su(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&a)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:l,error:c}=a;if(c&&!ty(c))return this._returnResult({error:c});const d=(s=l.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:f}=await this.admin.signOut(d,i);if(f&&!(EB(f)&&(f.status===404||f.status===401||f.status===403)||ty(f)))return this._returnResult({error:f})}return i!=="others"&&(await this._removeSession(),await vo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(i){const a=jB(),s={id:a,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(i){return await this._useSession(async a=>{var s,l;try{const{data:{session:c},error:d}=a;if(d)throw d;await((s=this.stateChangeEmitters.get(i))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",i,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(i))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",c),console.error(c)}})}async resetPasswordForEmail(i,a={}){let s=null,l=null;this.flowType==="pkce"&&([s,l]=await yh(this.storage,this.storageKey,!0));try{return await Xn(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:s,code_challenge_method:l,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var i;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(i=a.user.identities)!==null&&i!==void 0?i:[]},error:null})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(i){return"token"in i?this.linkIdentityIdToken(i):this.linkIdentityOAuth(i)}async linkIdentityOAuth(i){var a;try{const{data:s,error:l}=await this._useSession(async c=>{var d,f,m,g,v;const{data:y,error:A}=c;if(A)throw A;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(d=i.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=i.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=i.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Xn(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(g=y.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return xo()&&!(!((a=i.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:i.provider,url:s?.url},error:null})}catch(s){if(En(s))return this._returnResult({data:{provider:i.provider,url:null},error:s});throw s}}async linkIdentityIdToken(i){return await this._useSession(async a=>{var s;try{const{error:l,data:{session:c}}=a;if(l)throw l;const{options:d,provider:f,token:m,access_token:g,nonce:v}=i,y=await Xn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=c?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:k1}),{data:A,error:w}=y;return w?this._returnResult({data:{user:null,session:null},error:w}):!A||!A.session||!A.user?this._returnResult({data:{user:null,session:null},error:new bh}):(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("USER_UPDATED",A.session)),this._returnResult({data:A,error:w}))}catch(l){if(await vo(this.storage,`${this.storageKey}-code-verifier`),En(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(i){try{return await this._useSession(async a=>{var s,l;const{data:c,error:d}=a;if(d)throw d;return await Xn(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(l=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0})})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(i){const a=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await UB(async l=>(l>0&&await FB(200*Math.pow(2,l-1)),this._debug(a,"refreshing attempt",l),await Xn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:k1})),(l,c)=>{const d=200*Math.pow(2,l);return c&&ny(c)&&Date.now()+d-s<Th})}catch(s){if(this._debug(a,"error",s),En(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(a,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",a,"url",s),xo()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:i,url:s},error:null}}async _recoverAndRefresh(){var i,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const l=await Su(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Su(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Mh(this.userStorage,this.storageKey+"-user",d)),l.user=(i=d?.user)!==null&&i!==void 0?i:iy()}else if(l&&!l.user&&!l.user){const d=await Su(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await vo(this.storage,this.storageKey+"-user"),await Mh(this.storage,this.storageKey,l)):l.user=iy()}if(this._debug(s,"session from storage",l),!this._isValidSession(l)){this._debug(s,"session is not valid"),l!==null&&await this._removeSession();return}const c=((a=l.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<ey;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${ey}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),ny(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(l.access_token);!f&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(s,"error",l),console.error(l);return}finally{this._debug(s,"end")}}async _callRefreshToken(i){var a,s;if(!i)throw new Dl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Px;const{data:c,error:d}=await this._refreshAccessToken(i);if(d)throw d;if(!c.session)throw new Dl;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(l,"error",c),En(c)){const d={data:null,error:c};return ny(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(i,a,s=!0){const l=`#_notifyAllSubscribers(${i})`;this._debug(l,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:i,session:a});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(i,a)}catch(m){c.push(m)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await vo(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},i),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await Mh(this.userStorage,this.storageKey+"-user",{user:a.user});const l=Object.assign({},a);delete l.user;const c=x8(l);await Mh(this.storage,this.storageKey,c)}else{const l=x8(a);await Mh(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await vo(this.storage,this.storageKey),await vo(this.storage,this.storageKey+"-code-verifier"),await vo(this.storage,this.storageKey+"-user"),this.userStorage&&await vo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&xo()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",i)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),Th);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i);const a=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i);const a=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,a&&clearTimeout(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((s.expires_at*1e3-i)/Th);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Th}ms, refresh threshold is ${d4} ticks`),l<=d4&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof C7)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xo()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(i){this._debug("#visibilityChangedCallback","error",i)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const a=`#_onVisibilityChanged(${i})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,a,s){const l=[`provider=${encodeURIComponent(a)}`];if(s?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&l.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,d]=await yh(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(f.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);l.push(c.toString())}return s?.skipBrowserRedirect&&l.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${i}?${l.join("&")}`}async _unenroll(i){try{return await this._useSession(async a=>{var s;const{data:l,error:c}=a;return c?this._returnResult({data:null,error:c}):await Xn(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(i){try{return await this._useSession(async a=>{var s,l;const{data:c,error:d}=a;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:i.factorType==="totp"?{issuer:i.issuer}:{}),{data:m,error:g}=await Xn(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(i.factorType==="totp"&&m.type==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}}async _verify(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var s;const{data:l,error:c}=a;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:i.challengeId},"webauthn"in i?{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_response:i.webauthn.type==="create"?mP(i.webauthn.credential_response):gP(i.webauthn.credential_response)})}:{code:i.code}),{data:f,error:m}=await Xn(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(i){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var s;const{data:l,error:c}=a;if(c)return this._returnResult({data:null,error:c});const d=await Xn(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:i,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:hP(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:pP(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(i){const{data:a,error:s}=await this._challenge({factorId:i.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:i.factorId,challengeId:a.id,code:i.code})}async _listFactors(){var i;const{data:{user:a},error:s}=await this.getUser();if(s)return{data:null,error:s};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(i=a?.factors)!==null&&i!==void 0?i:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(i){var a,s,l,c;if(i)try{const{payload:w}=o3(i);let k=null;w.aal&&(k=w.aal);let E=k;const{data:{user:I},error:T}=await this.getUser(i);if(T)return this._returnResult({data:null,error:T});((s=(a=I?.factors)===null||a===void 0?void 0:a.filter(B=>B.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(E="aal2");const j=w.amr||[];return{data:{currentLevel:k,nextLevel:E,currentAuthenticationMethods:j},error:null}}catch(w){if(En(w))return this._returnResult({data:null,error:w});throw w}const{data:{session:d},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=o3(d.access_token);let g=null;m.aal&&(g=m.aal);let v=g;((c=(l=d.user.factors)===null||l===void 0?void 0:l.filter(w=>w.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(v="aal2");const A=m.amr||[];return{data:{currentLevel:g,nextLevel:v,currentAuthenticationMethods:A},error:null}}async _getAuthorizationDetails(i){try{return await this._useSession(async a=>{const{data:{session:s},error:l}=a;return l?this._returnResult({data:null,error:l}):s?await Xn(this.fetch,"GET",`${this.url}/oauth/authorizations/${i}`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Dl})})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(i,a){try{return await this._useSession(async s=>{const{data:{session:l},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new Dl});const d=await Xn(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&xo()&&!a?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(s){if(En(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(i,a){try{return await this._useSession(async s=>{const{data:{session:l},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new Dl});const d=await Xn(this.fetch,"POST",`${this.url}/oauth/authorizations/${i}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&xo()&&!a?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(s){if(En(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async i=>{const{data:{session:a},error:s}=i;return s?this._returnResult({data:null,error:s}):a?await Xn(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Dl})})}catch(i){if(En(i))return this._returnResult({data:null,error:i});throw i}}async _revokeOAuthGrant(i){try{return await this._useSession(async a=>{const{data:{session:s},error:l}=a;return l?this._returnResult({data:null,error:l}):s?(await Xn(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:i.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Dl})})}catch(a){if(En(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(i,a={keys:[]}){let s=a.keys.find(f=>f.kid===i);if(s)return s;const l=Date.now();if(s=this.jwks.keys.find(f=>f.kid===i),s&&this.jwks_cached_at+kB>l)return s;const{data:c,error:d}=await Xn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,s=c.keys.find(f=>f.kid===i),!s)?null:s}async getClaims(i,a={}){try{let s=i;if(!s){const{data:w,error:k}=await this.getSession();if(k||!w.session)return this._returnResult({data:null,error:k});s=w.session.access_token}const{header:l,payload:c,signature:d,raw:{header:f,payload:m}}=o3(s);a?.allowExpired||YB(c.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!g){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:c,header:l,signature:d},error:null}}const v=QB(l.alg),y=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,d,OB(`${f}.${m}`)))throw new h4("Invalid JWT signature");return{data:{claims:c,header:l,signature:d},error:null}}catch(s){if(En(s))return this._returnResult({data:null,error:s});throw s}}}_m.nextInstanceID={};const CP=_m,EP="2.95.3";let zp="";typeof Deno<"u"?zp="deno":typeof document<"u"?zp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zp="react-native":zp="node";const _P={"X-Client-Info":`supabase-js-${zp}/${EP}`},IP={headers:_P},NP={schema:"public"},TP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MP={};function Im(r){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Im(r)}function RP(r,i){if(Im(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,i);if(Im(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function OP(r){var i=RP(r,"string");return Im(i)=="symbol"?i:i+""}function DP(r,i,a){return(i=OP(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}function C8(r,i){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);i&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),a.push.apply(a,s)}return a}function ls(r){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?C8(Object(a),!0).forEach(function(s){DP(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):C8(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r}const jP=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),BP=()=>Headers,PP=(r,i,a)=>{const s=jP(a),l=BP();return async(c,d)=>{var f;const m=(f=await i())!==null&&f!==void 0?f:r;let g=new l(d?.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),s(c,ls(ls({},d),{},{headers:g}))}};function FP(r){return r.endsWith("/")?r:r+"/"}function UP(r,i){var a,s;const{db:l,auth:c,realtime:d,global:f}=r,{db:m,auth:g,realtime:v,global:y}=i,A={db:ls(ls({},m),l),auth:ls(ls({},g),c),realtime:ls(ls({},v),d),storage:{},global:ls(ls(ls({},y),f),{},{headers:ls(ls({},(a=y?.headers)!==null&&a!==void 0?a:{}),(s=f?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?A.accessToken=r.accessToken:delete A.accessToken,A}function LP(r){const i=r?.trim();if(!i)throw new Error("supabaseUrl is required.");if(!i.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(FP(i))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var zP=class extends CP{constructor(r){super(r)}},HP=class{constructor(r,i,a){var s,l;this.supabaseUrl=r,this.supabaseKey=i;const c=LP(r);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:NP,realtime:MP,auth:ls(ls({},TP),{},{storageKey:d}),global:IP},m=UP(a??{},f);if(this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=PP(i,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(ls({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Ej(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new bB(this.storageUrl.href,this.headers,this.fetch,a?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new xj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,i={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,i,a)}channel(r,i={config:{}}){return this.realtime.channel(r,i)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,i,a;if(r.accessToken)return await r.accessToken();const{data:s}=await r.auth.getSession();return(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:i,detectSessionInUrl:a,storage:s,userStorage:l,storageKey:c,flowType:d,lock:f,debug:m,throwOnError:g},v,y){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zP({url:this.authUrl.href,headers:ls(ls({},A),v),storageKey:c,autoRefreshToken:r,persistSession:i,detectSessionInUrl:a,storage:s,userStorage:l,flowType:d,lock:f,debug:m,throwOnError:g,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new qj(this.realtimeUrl.href,ls(ls({},r),{},{params:ls(ls({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(r,i,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qP=(r,i,a)=>new HP(r,i,a);function GP(){if(typeof window<"u")return!1;const r=globalThis.process;if(!r)return!1;const i=r.version;if(i==null)return!1;const a=i.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}GP()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ip=ya("Supabase"),VP="https://flekwqtlnpvffamqroen.supabase.co",YP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZsZWt3cXRsbnB2ZmZhbXFyb2VuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExNDcyMjYsImV4cCI6MjA4NjcyMzIyNn0.3EILFi0n-nnL3Rdv4mA6zKDeuHwHfDuolsEpnCokrVU",St=qP(VP,YP,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});async function QP(){const r=performance.now();try{const{error:i}=await St.from("profiles").select("id",{count:"exact",head:!0}),a=Math.round(performance.now()-r);return i?i.code==="PGRST116"||i.code==="PGRST205"?(Ip.info(`Connection verified (${a}ms)  table may not exist yet but API is reachable`),{connected:!0,latencyMs:a}):i.code==="42P01"?(Ip.info(`Connection verified (${a}ms)  table not created yet but database is reachable`),{connected:!0,latencyMs:a}):(Ip.error("Connection check error:",i.message,`(code: ${i.code})`),{connected:!1,error:i.message}):(Ip.info(`Connection verified (${a}ms)  database responding`),{connected:!0,latencyMs:a})}catch(i){const a=Math.round(performance.now()-r),s=i instanceof Error?i.message:"Unknown error";return Ip.error(`Connection failed (${a}ms):`,s),{connected:!1,error:s,latencyMs:a}}}const l3=new Map;function $P(r){const[i,a]=D.useState(()=>r?l3.get(r)??null:null);return D.useEffect(()=>{if(!r){a(null);return}if(l3.has(r)){a(l3.get(r));return}let s=!1;return St.from("clinics").select("name").eq("id",r).single().then(({data:l})=>{if(s)return;const c=l?.name??null;c&&l3.set(r,c),a(c)}),()=>{s=!0}},[r]),i}function WP(r,i){var a=Object.setPrototypeOf;a?a(r,i):r.__proto__=i}function XP(r,i){i===void 0&&(i=r.constructor);var a=Error.captureStackTrace;a&&a(r,i)}var KP=(function(){var r=function(a,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])},r(a,s)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),JP=(function(r){KP(i,r);function i(a,s){var l=this.constructor,c=r.call(this,a,s)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1,configurable:!0}),WP(c,l.prototype),XP(c),c}return i})(Error),ZP=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),_l=(function(r){ZP(i,r);function i(a){a===void 0&&(a=void 0);var s=r.call(this,a)||this;return s.message=a,s}return i.prototype.getKind=function(){var a=this.constructor;return a.kind},i.kind="Exception",i})(JP),eF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),C1=(function(r){eF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="ArgumentException",i})(_l),tF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Ln=(function(r){tF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="IllegalArgumentException",i})(_l),nF=(function(){function r(i){if(this.binarizer=i,i===null)throw new Ln("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(i,a){return this.binarizer.getBlackRow(i,a)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(i,a,s,l){var c=this.binarizer.getLuminanceSource().crop(i,a,s,l);return new r(this.binarizer.createBinarizer(c))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(i))},r.prototype.rotateCounterClockwise45=function(){var i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(i))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),iF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),ao=(function(r){iF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.getChecksumInstance=function(){return new i},i.kind="ChecksumException",i})(_l),rF=(function(){function r(i){this.source=i}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),Ca=(function(){function r(){}return r.arraycopy=function(i,a,s,l,c){for(;c--;)s[l++]=i[a++]},r.currentTimeMillis=function(){return Date.now()},r})(),aF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),_w=(function(r){aF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="IndexOutOfBoundsException",i})(_l),sF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),E8=(function(r){sF(i,r);function i(a,s){a===void 0&&(a=void 0),s===void 0&&(s=void 0);var l=r.call(this,s)||this;return l.index=a,l.message=s,l}return i.kind="ArrayIndexOutOfBoundsException",i})(_w),oF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Gs=(function(){function r(){}return r.fill=function(i,a){for(var s=0,l=i.length;s<l;s++)i[s]=a},r.fillWithin=function(i,a,s,l){r.rangeCheck(i.length,a,s);for(var c=a;c<s;c++)i[c]=l},r.rangeCheck=function(i,a,s){if(a>s)throw new Ln("fromIndex("+a+") > toIndex("+s+")");if(a<0)throw new E8(a);if(s>i)throw new E8(s)},r.asList=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return i},r.create=function(i,a,s){var l=Array.from({length:i});return l.map(function(c){return Array.from({length:a}).fill(s)})},r.createInt32Array=function(i,a,s){var l=Array.from({length:i});return l.map(function(c){return Int32Array.from({length:a}).fill(s)})},r.equals=function(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(var s=0,l=i.length;s<l;s++)if(i[s]!==a[s])return!1;return!0},r.hashCode=function(i){var a,s;if(i===null)return 0;var l=1;try{for(var c=oF(i),d=c.next();!d.done;d=c.next()){var f=d.value;l=31*l+f}}catch(m){a={error:m}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return l},r.fillUint8Array=function(i,a){for(var s=0;s!==i.length;s++)i[s]=a},r.copyOf=function(i,a){return i.slice(0,a)},r.copyOfUint8Array=function(i,a){if(i.length<=a){var s=new Uint8Array(a);return s.set(i),s}return i.slice(0,a)},r.copyOfRange=function(i,a,s){var l=s-a,c=new Int32Array(l);return Ca.arraycopy(i,a,c,0,l),c},r.binarySearch=function(i,a,s){s===void 0&&(s=r.numberComparator);for(var l=0,c=i.length-1;l<=c;){var d=c+l>>1,f=s(a,i[d]);if(f>0)l=d+1;else if(f<0)c=d-1;else return d}return-l-1},r.numberComparator=function(i,a){return i-a},r})(),Ui=(function(){function r(){}return r.numberOfTrailingZeros=function(i){var a;if(i===0)return 32;var s=31;return a=i<<16,a!==0&&(s-=16,i=a),a=i<<8,a!==0&&(s-=8,i=a),a=i<<4,a!==0&&(s-=4,i=a),a=i<<2,a!==0&&(s-=2,i=a),s-(i<<1>>>31)},r.numberOfLeadingZeros=function(i){if(i===0)return 32;var a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a},r.toHexString=function(i){return i.toString(16)},r.toBinaryString=function(i){return String(parseInt(String(i),2))},r.bitCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63},r.truncDivision=function(i,a){return Math.trunc(i/a)},r.parseInt=function(i,a){return a===void 0&&(a=void 0),parseInt(i,a)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),so=(function(){function r(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=r.makeArray(i):this.bits=a)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(i){if(i>this.bits.length*32){var a=r.makeArray(i);Ca.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}},r.prototype.get=function(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0},r.prototype.set=function(i){this.bits[Math.floor(i/32)]|=1<<(i&31)},r.prototype.flip=function(i){this.bits[Math.floor(i/32)]^=1<<(i&31)},r.prototype.getNextSet=function(i){var a=this.size;if(i>=a)return a;var s=this.bits,l=Math.floor(i/32),c=s[l];c&=~((1<<(i&31))-1);for(var d=s.length;c===0;){if(++l===d)return a;c=s[l]}var f=l*32+Ui.numberOfTrailingZeros(c);return f>a?a:f},r.prototype.getNextUnset=function(i){var a=this.size;if(i>=a)return a;var s=this.bits,l=Math.floor(i/32),c=~s[l];c&=~((1<<(i&31))-1);for(var d=s.length;c===0;){if(++l===d)return a;c=~s[l]}var f=l*32+Ui.numberOfTrailingZeros(c);return f>a?a:f},r.prototype.setBulk=function(i,a){this.bits[Math.floor(i/32)]=a},r.prototype.setRange=function(i,a){if(a<i||i<0||a>this.size)throw new Ln;if(a!==i){a--;for(var s=Math.floor(i/32),l=Math.floor(a/32),c=this.bits,d=s;d<=l;d++){var f=d>s?0:i&31,m=d<l?31:a&31,g=(2<<m)-(1<<f);c[d]|=g}}},r.prototype.clear=function(){for(var i=this.bits.length,a=this.bits,s=0;s<i;s++)a[s]=0},r.prototype.isRange=function(i,a,s){if(a<i||i<0||a>this.size)throw new Ln;if(a===i)return!0;a--;for(var l=Math.floor(i/32),c=Math.floor(a/32),d=this.bits,f=l;f<=c;f++){var m=f>l?0:i&31,g=f<c?31:a&31,v=(2<<g)-(1<<m)&4294967295;if((d[f]&v)!==(s?v:0))return!1}return!0},r.prototype.appendBit=function(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(i,a){if(a<0||a>32)throw new Ln("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(var s=a;s>0;s--)this.appendBit((i>>s-1&1)===1)},r.prototype.appendBitArray=function(i){var a=i.size;this.ensureCapacity(this.size+a);for(var s=0;s<a;s++)this.appendBit(i.get(s))},r.prototype.xor=function(i){if(this.size!==i.size)throw new Ln("Sizes don't match");for(var a=this.bits,s=0,l=a.length;s<l;s++)a[s]^=i.bits[s]},r.prototype.toBytes=function(i,a,s,l){for(var c=0;c<l;c++){for(var d=0,f=0;f<8;f++)this.get(i)&&(d|=1<<7-f),i++;a[s+c]=d}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),s=a+1,l=this.bits,c=0;c<s;c++){var d=l[c];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,i[a-c]=d}if(this.size!==s*32){for(var f=s*32-this.size,m=i[0]>>>f,c=1;c<s;c++){var g=i[c];m|=g<<32-f,i[c-1]=m,m=g>>>f}i[s-1]=m}this.bits=i},r.makeArray=function(i){return new Int32Array(Math.floor((i+31)/32))},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.size===a.size&&Gs.equals(this.bits,a.bits)},r.prototype.hashCode=function(){return 31*this.size+Gs.hashCode(this.bits)},r.prototype.toString=function(){for(var i="",a=0,s=this.size;a<s;a++)(a&7)===0&&(i+=" "),i+=this.get(a)?"X":".";return i},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var i=[],a=0,s=this.size;a<s;a++)i.push(this.get(a));return i},r})(),p4;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(p4||(p4={}));const qa=p4;var lF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Ut=(function(r){lF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.getFormatInstance=function(){return new i},i.kind="FormatException",i})(_l),cF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},aa;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(aa||(aa={}));var qs=(function(){function r(i,a,s){for(var l,c,d=[],f=3;f<arguments.length;f++)d[f-3]=arguments[f];this.valueIdentifier=i,this.name=s,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=d,r.VALUE_IDENTIFIER_TO_ECI.set(i,this),r.NAME_TO_ECI.set(s,this);for(var m=this.values,g=0,v=m.length;g!==v;g++){var y=m[g];r.VALUES_TO_ECI.set(y,this)}try{for(var A=cF(d),w=A.next();!w.done;w=A.next()){var k=w.value;r.NAME_TO_ECI.set(k,this)}}catch(E){l={error:E}}finally{try{w&&!w.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(i){if(i<0||i>=900)throw new Ut("incorect value");var a=r.VALUES_TO_ECI.get(i);if(a===void 0)throw new Ut("incorect value");return a},r.getCharacterSetECIByName=function(i){var a=r.NAME_TO_ECI.get(i);if(a===void 0)throw new Ut("incorect value");return a},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.getName()===a.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(aa.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(aa.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(aa.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(aa.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(aa.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(aa.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(aa.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(aa.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(aa.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(aa.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(aa.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(aa.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(aa.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(aa.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(aa.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(aa.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(aa.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(aa.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(aa.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(aa.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(aa.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(aa.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(aa.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(aa.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(aa.Big5,28,"Big5"),r.GB18030=new r(aa.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(aa.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),dF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),_3=(function(r){dF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="UnsupportedOperationException",i})(_l),l1=(function(){function r(){}return r.decode=function(i,a){var s=this.encodingName(a);return this.customDecoder?this.customDecoder(i,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(i,s):new TextDecoder(s).decode(i)},r.shouldDecodeOnFallback=function(i){return!r.isBrowser()&&i==="ISO-8859-1"},r.encode=function(i,a){var s=this.encodingName(a);return this.customEncoder?this.customEncoder(i,s):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(i){return typeof i=="string"?i:i.getName()},r.encodingCharacterSet=function(i){return i instanceof qs?i:qs.getCharacterSetECIByName(i)},r.decodeFallback=function(i,a){var s=this.encodingCharacterSet(a);if(r.isDecodeFallbackSupported(s)){for(var l="",c=0,d=i.length;c<d;c++){var f=i[c].toString(16);f.length<2&&(f="0"+f),l+="%"+f}return decodeURIComponent(l)}if(s.equals(qs.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new _3("Encoding "+this.encodingName(a)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(i){return i.equals(qs.UTF8)||i.equals(qs.ISO8859_1)||i.equals(qs.ASCII)},r.encodeFallback=function(i){for(var a=btoa(unescape(encodeURIComponent(i))),s=a.split(""),l=[],c=0;c<s.length;c++)l.push(s[c].charCodeAt(0));return new Uint8Array(l)},r})(),fr=(function(){function r(){}return r.castAsNonUtf8Char=function(i,a){a===void 0&&(a=null);var s=a?a.getName():this.ISO88591;return l1.decode(new Uint8Array([i]),s)},r.guessEncoding=function(i,a){if(a!=null&&a.get(qa.CHARACTER_SET)!==void 0)return a.get(qa.CHARACTER_SET).toString();for(var s=i.length,l=!0,c=!0,d=!0,f=0,m=0,g=0,v=0,y=0,A=0,w=0,k=0,E=0,I=0,T=0,N=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191,j=0;j<s&&(l||c||d);j++){var B=i[j]&255;d&&(f>0?(B&128)===0?d=!1:f--:(B&128)!==0&&((B&64)===0?d=!1:(f++,(B&32)===0?m++:(f++,(B&16)===0?g++:(f++,(B&8)===0?v++:d=!1))))),l&&(B>127&&B<160?l=!1:B>159&&(B<192||B===215||B===247)&&T++),c&&(y>0?B<64||B===127||B>252?c=!1:y--:B===128||B===160||B>239?c=!1:B>160&&B<224?(A++,k=0,w++,w>E&&(E=w)):B>127?(y++,w=0,k++,k>I&&(I=k)):(w=0,k=0))}return d&&f>0&&(d=!1),c&&y>0&&(c=!1),d&&(N||m+g+v>0)?r.UTF8:c&&(r.ASSUME_SHIFT_JIS||E>=3||I>=3)?r.SHIFT_JIS:l&&c?E===2&&A===2||T*10>=s?r.SHIFT_JIS:r.ISO88591:l?r.ISO88591:c?r.SHIFT_JIS:d?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];var l=-1;function c(f,m,g,v,y,A){if(f==="%%")return"%";if(a[++l]!==void 0){f=v?parseInt(v.substr(1)):void 0;var w=y?parseInt(y.substr(1)):void 0,k;switch(A){case"s":k=a[l];break;case"c":k=a[l][0];break;case"f":k=parseFloat(a[l]).toFixed(f);break;case"p":k=parseFloat(a[l]).toPrecision(f);break;case"e":k=parseFloat(a[l]).toExponential(f);break;case"x":k=parseInt(a[l]).toString(w||16);break;case"d":k=parseFloat(parseInt(a[l],w||10).toPrecision(f)).toFixed(0);break}k=typeof k=="object"?JSON.stringify(k):(+k).toString(w);for(var E=parseInt(g),I=g&&g[0]+""=="0"?"0":" ";k.length<E;)k=m!==void 0?k+I:I+k;return k}}var d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,c)},r.getBytes=function(i,a){return l1.encode(i,a)},r.getCharCode=function(i,a){return a===void 0&&(a=0),i.charCodeAt(a)},r.getCharAt=function(i){return String.fromCharCode(i)},r.SHIFT_JIS=qs.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=qs.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=qs.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),ji=(function(){function r(i){i===void 0&&(i=""),this.value=i}return r.prototype.enableDecoding=function(i){return this.encoding=i,this},r.prototype.append=function(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=fr.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this},r.prototype.appendChars=function(i,a,s){for(var l=a;a<a+s;l++)this.append(i[l]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(i){return this.value.charAt(i)},r.prototype.deleteCharAt=function(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)},r.prototype.setCharAt=function(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)},r.prototype.substring=function(i,a){return this.value.substring(i,a)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(i,a){this.value=this.value.substring(0,i)+a+this.value.substring(i)},r})(),ac=(function(){function r(i,a,s,l){if(this.width=i,this.height=a,this.rowSize=s,this.bits=l,a==null&&(a=i),this.height=a,i<1||a<1)throw new Ln("Both dimensions must be greater than 0");s==null&&(s=Math.floor((i+31)/32)),this.rowSize=s,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(i){for(var a=i.length,s=i[0].length,l=new r(s,a),c=0;c<a;c++)for(var d=i[c],f=0;f<s;f++)d[f]&&l.set(f,c);return l},r.parseFromString=function(i,a,s){if(i===null)throw new Ln("stringRepresentation cannot be null");for(var l=new Array(i.length),c=0,d=0,f=-1,m=0,g=0;g<i.length;)if(i.charAt(g)===`
`||i.charAt(g)==="\r"){if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new Ln("row lengths do not match");d=c,m++}g++}else if(i.substring(g,g+a.length)===a)g+=a.length,l[c]=!0,c++;else if(i.substring(g,g+s.length)===s)g+=s.length,l[c]=!1,c++;else throw new Ln("illegal character encountered: "+i.substring(g));if(c>d){if(f===-1)f=c-d;else if(c-d!==f)throw new Ln("row lengths do not match");m++}for(var v=new r(f,m),y=0;y<c;y++)l[y]&&v.set(Math.floor(y%f),Math.floor(y/f));return v},r.prototype.get=function(i,a){var s=a*this.rowSize+Math.floor(i/32);return(this.bits[s]>>>(i&31)&1)!==0},r.prototype.set=function(i,a){var s=a*this.rowSize+Math.floor(i/32);this.bits[s]|=1<<(i&31)&4294967295},r.prototype.unset=function(i,a){var s=a*this.rowSize+Math.floor(i/32);this.bits[s]&=~(1<<(i&31)&4294967295)},r.prototype.flip=function(i,a){var s=a*this.rowSize+Math.floor(i/32);this.bits[s]^=1<<(i&31)&4294967295},r.prototype.xor=function(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new Ln("input matrix dimensions do not match");for(var a=new so(Math.floor(this.width/32)+1),s=this.rowSize,l=this.bits,c=0,d=this.height;c<d;c++)for(var f=c*s,m=i.getRow(c,a).getBitArray(),g=0;g<s;g++)l[f+g]^=m[g]},r.prototype.clear=function(){for(var i=this.bits,a=i.length,s=0;s<a;s++)i[s]=0},r.prototype.setRegion=function(i,a,s,l){if(a<0||i<0)throw new Ln("Left and top must be nonnegative");if(l<1||s<1)throw new Ln("Height and width must be at least 1");var c=i+s,d=a+l;if(d>this.height||c>this.width)throw new Ln("The region must fit inside the matrix");for(var f=this.rowSize,m=this.bits,g=a;g<d;g++)for(var v=g*f,y=i;y<c;y++)m[v+Math.floor(y/32)]|=1<<(y&31)&4294967295},r.prototype.getRow=function(i,a){a==null||a.getSize()<this.width?a=new so(this.width):a.clear();for(var s=this.rowSize,l=this.bits,c=i*s,d=0;d<s;d++)a.setBulk(d*32,l[c+d]);return a},r.prototype.setRow=function(i,a){Ca.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var i=this.getWidth(),a=this.getHeight(),s=new so(i),l=new so(i),c=0,d=Math.floor((a+1)/2);c<d;c++)s=this.getRow(c,s),l=this.getRow(a-1-c,l),s.reverse(),l.reverse(),this.setRow(c,l),this.setRow(a-1-c,s)},r.prototype.getEnclosingRectangle=function(){for(var i=this.width,a=this.height,s=this.rowSize,l=this.bits,c=i,d=a,f=-1,m=-1,g=0;g<a;g++)for(var v=0;v<s;v++){var y=l[g*s+v];if(y!==0){if(g<d&&(d=g),g>m&&(m=g),v*32<c){for(var A=0;(y<<31-A&4294967295)===0;)A++;v*32+A<c&&(c=v*32+A)}if(v*32+31>f){for(var A=31;!(y>>>A);)A--;v*32+A>f&&(f=v*32+A)}}}return f<c||m<d?null:Int32Array.from([c,d,f-c+1,m-d+1])},r.prototype.getTopLeftOnBit=function(){for(var i=this.rowSize,a=this.bits,s=0;s<a.length&&a[s]===0;)s++;if(s===a.length)return null;for(var l=s/i,c=s%i*32,d=a[s],f=0;(d<<31-f&4294967295)===0;)f++;return c+=f,Int32Array.from([c,l])},r.prototype.getBottomRightOnBit=function(){for(var i=this.rowSize,a=this.bits,s=a.length-1;s>=0&&a[s]===0;)s--;if(s<0)return null;for(var l=Math.floor(s/i),c=Math.floor(s%i)*32,d=a[s],f=31;!(d>>>f);)f--;return c+=f,Int32Array.from([c,l])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&Gs.equals(this.bits,a.bits)},r.prototype.hashCode=function(){var i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Gs.hashCode(this.bits),i},r.prototype.toString=function(i,a,s){return i===void 0&&(i="X "),a===void 0&&(a="  "),s===void 0&&(s=`
`),this.buildToString(i,a,s)},r.prototype.buildToString=function(i,a,s){for(var l=new ji,c=0,d=this.height;c<d;c++){for(var f=0,m=this.width;f<m;f++)l.append(this.get(f,c)?i:a);l.append(s)}return l.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),uF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),et=(function(r){uF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.getNotFoundInstance=function(){return new i},i.kind="NotFoundException",i})(_l),fF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),hF=(function(r){fF(i,r);function i(a){var s=r.call(this,a)||this;return s.luminances=i.EMPTY,s.buckets=new Int32Array(i.LUMINANCE_BUCKETS),s}return i.prototype.getBlackRow=function(a,s){var l=this.getLuminanceSource(),c=l.getWidth();s==null||s.getSize()<c?s=new so(c):s.clear(),this.initArrays(c);for(var d=l.getRow(a,this.luminances),f=this.buckets,m=0;m<c;m++)f[(d[m]&255)>>i.LUMINANCE_SHIFT]++;var g=i.estimateBlackPoint(f);if(c<3)for(var m=0;m<c;m++)(d[m]&255)<g&&s.set(m);else for(var v=d[0]&255,y=d[1]&255,m=1;m<c-1;m++){var A=d[m+1]&255;(y*4-v-A)/2<g&&s.set(m),v=y,y=A}return s},i.prototype.getBlackMatrix=function(){var a=this.getLuminanceSource(),s=a.getWidth(),l=a.getHeight(),c=new ac(s,l);this.initArrays(s);for(var d=this.buckets,f=1;f<5;f++)for(var m=Math.floor(l*f/5),g=a.getRow(m,this.luminances),v=Math.floor(s*4/5),y=Math.floor(s/5);y<v;y++){var A=g[y]&255;d[A>>i.LUMINANCE_SHIFT]++}for(var w=i.estimateBlackPoint(d),k=a.getMatrix(),f=0;f<l;f++)for(var E=f*s,y=0;y<s;y++){var A=k[E+y]&255;A<w&&c.set(y,f)}return c},i.prototype.createBinarizer=function(a){return new i(a)},i.prototype.initArrays=function(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));for(var s=this.buckets,l=0;l<i.LUMINANCE_BUCKETS;l++)s[l]=0},i.estimateBlackPoint=function(a){for(var s=a.length,l=0,c=0,d=0,f=0;f<s;f++)a[f]>d&&(c=f,d=a[f]),a[f]>l&&(l=a[f]);for(var m=0,g=0,f=0;f<s;f++){var v=f-c,y=a[f]*v*v;y>g&&(m=f,g=y)}if(c>m){var A=c;c=m,m=A}if(m-c<=s/16)throw new et;for(var w=m-1,k=-1,f=m-1;f>c;f--){var E=f-c,y=E*E*(m-f)*(l-a[f]);y>k&&(w=f,k=y)}return w<<i.LUMINANCE_SHIFT},i.LUMINANCE_BITS=5,i.LUMINANCE_SHIFT=8-i.LUMINANCE_BITS,i.LUMINANCE_BUCKETS=1<<i.LUMINANCE_BITS,i.EMPTY=Uint8ClampedArray.from([0]),i})(rF),pF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),mF=(function(r){pF(i,r);function i(a){var s=r.call(this,a)||this;return s.matrix=null,s}return i.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var a=this.getLuminanceSource(),s=a.getWidth(),l=a.getHeight();if(s>=i.MINIMUM_DIMENSION&&l>=i.MINIMUM_DIMENSION){var c=a.getMatrix(),d=s>>i.BLOCK_SIZE_POWER;(s&i.BLOCK_SIZE_MASK)!==0&&d++;var f=l>>i.BLOCK_SIZE_POWER;(l&i.BLOCK_SIZE_MASK)!==0&&f++;var m=i.calculateBlackPoints(c,d,f,s,l),g=new ac(s,l);i.calculateThresholdForBlock(c,d,f,s,l,m,g),this.matrix=g}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},i.prototype.createBinarizer=function(a){return new i(a)},i.calculateThresholdForBlock=function(a,s,l,c,d,f,m){for(var g=d-i.BLOCK_SIZE,v=c-i.BLOCK_SIZE,y=0;y<l;y++){var A=y<<i.BLOCK_SIZE_POWER;A>g&&(A=g);for(var w=i.cap(y,2,l-3),k=0;k<s;k++){var E=k<<i.BLOCK_SIZE_POWER;E>v&&(E=v);for(var I=i.cap(k,2,s-3),T=0,N=-2;N<=2;N++){var j=f[w+N];T+=j[I-2]+j[I-1]+j[I]+j[I+1]+j[I+2]}var B=T/25;i.thresholdBlock(a,E,A,B,c,m)}}},i.cap=function(a,s,l){return a<s?s:a>l?l:a},i.thresholdBlock=function(a,s,l,c,d,f){for(var m=0,g=l*d+s;m<i.BLOCK_SIZE;m++,g+=d)for(var v=0;v<i.BLOCK_SIZE;v++)(a[g+v]&255)<=c&&f.set(s+v,l+m)},i.calculateBlackPoints=function(a,s,l,c,d){for(var f=d-i.BLOCK_SIZE,m=c-i.BLOCK_SIZE,g=new Array(l),v=0;v<l;v++){g[v]=new Int32Array(s);var y=v<<i.BLOCK_SIZE_POWER;y>f&&(y=f);for(var A=0;A<s;A++){var w=A<<i.BLOCK_SIZE_POWER;w>m&&(w=m);for(var k=0,E=255,I=0,T=0,N=y*c+w;T<i.BLOCK_SIZE;T++,N+=c){for(var j=0;j<i.BLOCK_SIZE;j++){var B=a[N+j]&255;k+=B,B<E&&(E=B),B>I&&(I=B)}if(I-E>i.MIN_DYNAMIC_RANGE)for(T++,N+=c;T<i.BLOCK_SIZE;T++,N+=c)for(var j=0;j<i.BLOCK_SIZE;j++)k+=a[N+j]&255}var U=k>>i.BLOCK_SIZE_POWER*2;if(I-E<=i.MIN_DYNAMIC_RANGE&&(U=E/2,v>0&&A>0)){var F=(g[v-1][A]+2*g[v][A-1]+g[v-1][A-1])/4;E<F&&(U=F)}g[v][A]=U}}return g},i.BLOCK_SIZE_POWER=3,i.BLOCK_SIZE=1<<i.BLOCK_SIZE_POWER,i.BLOCK_SIZE_MASK=i.BLOCK_SIZE-1,i.MINIMUM_DIMENSION=i.BLOCK_SIZE*5,i.MIN_DYNAMIC_RANGE=24,i})(hF),Fx=(function(){function r(i,a){this.width=i,this.height=a}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(i,a,s,l){throw new _3("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new _3("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new _3("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var i=new Uint8ClampedArray(this.width),a=new ji,s=0;s<this.height;s++){for(var l=this.getRow(s,i),c=0;c<this.width;c++){var d=l[c]&255,f=void 0;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",a.append(f)}a.append(`
`)}return a.toString()},r})(),gF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Iw=(function(r){gF(i,r);function i(a){var s=r.call(this,a.getWidth(),a.getHeight())||this;return s.delegate=a,s}return i.prototype.getRow=function(a,s){for(var l=this.delegate.getRow(a,s),c=this.getWidth(),d=0;d<c;d++)l[d]=255-(l[d]&255);return l},i.prototype.getMatrix=function(){for(var a=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s),c=0;c<s;c++)l[c]=255-(a[c]&255);return l},i.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},i.prototype.crop=function(a,s,l,c){return new i(this.delegate.crop(a,s,l,c))},i.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},i.prototype.invert=function(){return this.delegate},i.prototype.rotateCounterClockwise=function(){return new i(this.delegate.rotateCounterClockwise())},i.prototype.rotateCounterClockwise45=function(){return new i(this.delegate.rotateCounterClockwise45())},i})(Fx),vF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),xF=(function(r){vF(i,r);function i(a,s){s===void 0&&(s=!1);var l=r.call(this,a.width,a.height)||this;return l.canvas=a,l.tempCanvasElement=null,l.buffer=i.makeBufferFromCanvasImageData(a,s),l}return i.makeBufferFromCanvasImageData=function(a,s){s===void 0&&(s=!1);var l=a.getContext("2d").getImageData(0,0,a.width,a.height);return i.toGrayscaleBuffer(l.data,a.width,a.height,s)},i.toGrayscaleBuffer=function(a,s,l,c){c===void 0&&(c=!1);var d=new Uint8ClampedArray(s*l);if(i.FRAME_INDEX=!i.FRAME_INDEX,i.FRAME_INDEX||!c)for(var f=0,m=0,g=a.length;f<g;f+=4,m++){var v=void 0,y=a[f+3];if(y===0)v=255;else{var A=a[f],w=a[f+1],k=a[f+2];v=306*A+601*w+117*k+512>>10}d[m]=v}else for(var f=0,m=0,E=a.length;f<E;f+=4,m++){var v=void 0,y=a[f+3];if(y===0)v=255;else{var A=a[f],w=a[f+1],k=a[f+2];v=306*A+601*w+117*k+512>>10}d[m]=255-v}return d},i.prototype.getRow=function(a,s){if(a<0||a>=this.getHeight())throw new Ln("Requested row is outside the image: "+a);var l=this.getWidth(),c=a*l;return s===null?s=this.buffer.slice(c,c+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(c,c+l))),s},i.prototype.getMatrix=function(){return this.buffer},i.prototype.isCropSupported=function(){return!0},i.prototype.crop=function(a,s,l,c){return r.prototype.crop.call(this,a,s,l,c),this},i.prototype.isRotateSupported=function(){return!0},i.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},i.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},i.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement},i.prototype.rotate=function(a){var s=this.getTempCanvasElement(),l=s.getContext("2d"),c=a*i.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*f),g=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*f);return s.width=m,s.height=g,l.translate(m/2,g/2),l.rotate(c),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=i.makeBufferFromCanvasImageData(s),this},i.prototype.invert=function(){return new Iw(this)},i.DEGREE_TO_RADIANS=Math.PI/180,i.FRAME_INDEX=!0,i})(Fx),bF=(function(){function r(i,a,s){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=s||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),tl=function(r,i,a,s){function l(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function f(v){try{g(s.next(v))}catch(y){d(y)}}function m(v){try{g(s.throw(v))}catch(y){d(y)}}function g(v){v.done?c(v.value):l(v.value).then(f,m)}g((s=s.apply(r,i||[])).next())})},nl=function(r,i){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(g){return function(v){return m([g,v])}}function m(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(c=g[0]&2?l.return:g[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,g[1])).done)return c;switch(l=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){a.label=g[1];break}if(g[0]===6&&a.label<c[1]){a.label=c[1],c=g;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(g);break}c[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(r,a)}catch(v){g=[6,v],l=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},yF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},b2=(function(){function r(i,a,s){a===void 0&&(a=500),this.reader=i,this.timeBetweenScansMillis=a,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(i){this._timeBetweenDecodingAttempts=i<0?0:i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(i){this._hints=i||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return tl(this,void 0,void 0,function(){var i,a,s,l,c,d,f,m,g,v,y,A;return nl(this,function(w){switch(w.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:i=w.sent(),a=[];try{for(s=yF(i),l=s.next();!l.done;l=s.next())c=l.value,d=c.kind==="video"?"videoinput":c.kind,d==="videoinput"&&(f=c.deviceId||c.id,m=c.label||"Video device "+(a.length+1),g=c.groupId,v={deviceId:f,label:m,kind:d,groupId:g},a.push(v))}catch(k){y={error:k}}finally{try{l&&!l.done&&(A=s.return)&&A.call(s)}finally{if(y)throw y.error}}return[2,a]}})})},r.prototype.getVideoInputDevices=function(){return tl(this,void 0,void 0,function(){var i;return nl(this,function(a){switch(a.label){case 0:return[4,this.listVideoInputDevices()];case 1:return i=a.sent(),[2,i.map(function(s){return new bF(s.deviceId,s.label)})]}})})},r.prototype.findDeviceById=function(i){return tl(this,void 0,void 0,function(){var a;return nl(this,function(s){switch(s.label){case 0:return[4,this.listVideoInputDevices()];case 1:return a=s.sent(),a?[2,a.find(function(l){return l.deviceId===i})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(i,a){return tl(this,void 0,void 0,function(){return nl(this,function(s){switch(s.label){case 0:return[4,this.decodeOnceFromVideoDevice(i,a)];case 1:return[2,s.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(i,a){return tl(this,void 0,void 0,function(){var s,l;return nl(this,function(c){switch(c.label){case 0:return this.reset(),i?s={deviceId:{exact:i}}:s={facingMode:"environment"},l={video:s},[4,this.decodeOnceFromConstraints(l,a)];case 1:return[2,c.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(i,a){return tl(this,void 0,void 0,function(){var s;return nl(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.getUserMedia(i)];case 1:return s=l.sent(),[4,this.decodeOnceFromStream(s,a)];case 2:return[2,l.sent()]}})})},r.prototype.decodeOnceFromStream=function(i,a){return tl(this,void 0,void 0,function(){var s,l;return nl(this,function(c){switch(c.label){case 0:return this.reset(),[4,this.attachStreamToVideo(i,a)];case 1:return s=c.sent(),[4,this.decodeOnce(s)];case 2:return l=c.sent(),[2,l]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(i,a,s){return tl(this,void 0,void 0,function(){return nl(this,function(l){switch(l.label){case 0:return[4,this.decodeFromVideoDevice(i,a,s)];case 1:return[2,l.sent()]}})})},r.prototype.decodeFromVideoDevice=function(i,a,s){return tl(this,void 0,void 0,function(){var l,c;return nl(this,function(d){switch(d.label){case 0:return i?l={deviceId:{exact:i}}:l={facingMode:"environment"},c={video:l},[4,this.decodeFromConstraints(c,a,s)];case 1:return[2,d.sent()]}})})},r.prototype.decodeFromConstraints=function(i,a,s){return tl(this,void 0,void 0,function(){var l;return nl(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.getUserMedia(i)];case 1:return l=c.sent(),[4,this.decodeFromStream(l,a,s)];case 2:return[2,c.sent()]}})})},r.prototype.decodeFromStream=function(i,a,s){return tl(this,void 0,void 0,function(){var l;return nl(this,function(c){switch(c.label){case 0:return this.reset(),[4,this.attachStreamToVideo(i,a)];case 1:return l=c.sent(),[4,this.decodeContinuously(l,s)];case 2:return[2,c.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(i,a){return tl(this,void 0,void 0,function(){var s;return nl(this,function(l){switch(l.label){case 0:return s=this.prepareVideoElement(a),this.addVideoSource(s,i),this.videoElement=s,this.stream=i,[4,this.playVideoOnLoadAsync(s)];case 1:return l.sent(),[2,s]}})})},r.prototype.playVideoOnLoadAsync=function(i){var a=this;return new Promise(function(s,l){return a.playVideoOnLoad(i,function(){return s()})})},r.prototype.playVideoOnLoad=function(i,a){var s=this;this.videoEndedListener=function(){return s.stopStreams()},this.videoCanPlayListener=function(){return s.tryPlayVideo(i)},i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)},r.prototype.isVideoPlaying=function(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2},r.prototype.tryPlayVideo=function(i){return tl(this,void 0,void 0,function(){return nl(this,function(a){switch(a.label){case 0:if(this.isVideoPlaying(i))return console.warn("Trying to play video that is already playing."),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.play()];case 2:return a.sent(),[3,4];case 3:return a.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(i,a){var s=document.getElementById(i);if(!s)throw new C1("element with id '"+i+"' not found");if(s.nodeName.toLowerCase()!==a.toLowerCase())throw new C1("element with id '"+i+"' must be an "+a+" element");return s},r.prototype.decodeFromImage=function(i,a){if(!i&&!a)throw new C1("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)},r.prototype.decodeFromVideo=function(i,a){if(!i&&!a)throw new C1("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)},r.prototype.decodeFromVideoContinuously=function(i,a,s){if(i===void 0&&a===void 0)throw new C1("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,s):this.decodeFromVideoElementContinuously(i,s)},r.prototype.decodeFromImageElement=function(i){if(!i)throw new C1("An image element must be provided.");this.reset();var a=this.prepareImageElement(i);this.imageElement=a;var s;return this.isImageLoaded(a)?s=this.decodeOnce(a,!1,!0):s=this._decodeOnLoadImage(a),s},r.prototype.decodeFromVideoElement=function(i){var a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)},r.prototype.decodeFromVideoElementContinuously=function(i,a){var s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(s,a)},r.prototype._decodeFromVideoElementSetup=function(i){if(!i)throw new C1("A video element must be provided.");this.reset();var a=this.prepareVideoElement(i);return this.videoElement=a,a},r.prototype.decodeFromImageUrl=function(i){if(!i)throw new C1("An URL must be provided.");this.reset();var a=this.prepareImageElement();this.imageElement=a;var s=this._decodeOnLoadImage(a);return a.src=i,s},r.prototype.decodeFromVideoUrl=function(i){if(!i)throw new C1("An URL must be provided.");this.reset();var a=this.prepareVideoElement(),s=this.decodeFromVideoElement(a);return a.src=i,s},r.prototype.decodeFromVideoUrlContinuously=function(i,a){if(!i)throw new C1("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(s,a);return s.src=i,l},r.prototype._decodeOnLoadImage=function(i){var a=this;return new Promise(function(s,l){a.imageLoadedListener=function(){return a.decodeOnce(i,!1,!0).then(s,l)},i.addEventListener("load",a.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(i){return tl(this,void 0,void 0,function(){return nl(this,function(a){switch(a.label){case 0:return[4,this.playVideoOnLoadAsync(i)];case 1:return a.sent(),[4,this.decodeOnce(i)];case 2:return[2,a.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(i,a){return tl(this,void 0,void 0,function(){return nl(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(i)];case 1:return s.sent(),this.decodeContinuously(i,a),[2]}})})},r.prototype.isImageLoaded=function(i){return!(!i.complete||i.naturalWidth===0)},r.prototype.prepareImageElement=function(i){var a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a},r.prototype.prepareVideoElement=function(i){var a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a},r.prototype.decodeOnce=function(i,a,s){var l=this;a===void 0&&(a=!0),s===void 0&&(s=!0),this._stopAsyncDecode=!1;var c=function(d,f){if(l._stopAsyncDecode){f(new et("Video stream has ended before any code could be detected.")),l._stopAsyncDecode=void 0;return}try{var m=l.decode(i);d(m)}catch(A){var g=a&&A instanceof et,v=A instanceof ao||A instanceof Ut,y=v&&s;if(g||y)return setTimeout(c,l._timeBetweenDecodingAttempts,d,f);f(A)}};return new Promise(function(d,f){return c(d,f)})},r.prototype.decodeContinuously=function(i,a){var s=this;this._stopContinuousDecode=!1;var l=function(){if(s._stopContinuousDecode){s._stopContinuousDecode=void 0;return}try{var c=s.decode(i);a(c,null),setTimeout(l,s.timeBetweenScansMillis)}catch(m){a(null,m);var d=m instanceof ao||m instanceof Ut,f=m instanceof et;(d||f)&&setTimeout(l,s._timeBetweenDecodingAttempts)}};l()},r.prototype.decode=function(i){var a=this.createBinaryBitmap(i);return this.decodeBitmap(a)},r.prototype.createBinaryBitmap=function(i){this.getCaptureCanvasContext(i);var a=!1;i instanceof HTMLVideoElement?(this.drawFrameOnCanvas(i),a=!0):this.drawImageOnCanvas(i);var s=this.getCaptureCanvas(i),l=new xF(s,a),c=new mF(l);return new nF(c)},r.prototype.getCaptureCanvasContext=function(i){if(!this.captureCanvasContext){var a=this.getCaptureCanvas(i),s=void 0;try{s=a.getContext("2d",{willReadFrequently:!0})}catch{s=a.getContext("2d")}this.captureCanvasContext=s}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(i){if(!this.captureCanvas){var a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(i,a,s){a===void 0&&(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),s===void 0&&(s=this.captureCanvasContext),s.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)},r.prototype.drawImageOnCanvas=function(i,a,s){a===void 0&&(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),s===void 0&&(s=this.captureCanvasContext),s.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)},r.prototype.decodeBitmap=function(i){return this.reader.decode(i,this._hints)},r.prototype.createCaptureCanvas=function(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var a=document.createElement("canvas"),s,l;return typeof i<"u"&&(i instanceof HTMLVideoElement?(s=i.videoWidth,l=i.videoHeight):i instanceof HTMLImageElement&&(s=i.naturalWidth||i.width,l=i.naturalHeight||i.height)),a.style.width=s+"px",a.style.height=l+"px",a.width=s,a.height=l,a},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(i){return i.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}},r.prototype.cleanVideoSource=function(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")},r})(),Ho=(function(){function r(i,a,s,l,c,d){s===void 0&&(s=a==null?0:8*a.length),d===void 0&&(d=Ca.currentTimeMillis()),this.text=i,this.rawBytes=a,this.numBits=s,this.resultPoints=l,this.format=c,this.timestamp=d,this.text=i,this.rawBytes=a,s==null?this.numBits=a==null?0:8*a.length:this.numBits=s,this.resultPoints=l,this.format=c,this.resultMetadata=null,d==null?this.timestamp=Ca.currentTimeMillis():this.timestamp=d}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)},r.prototype.putAllMetadata=function(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))},r.prototype.addResultPoints=function(i){var a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){var s=new Array(a.length+i.length);Ca.arraycopy(a,0,s,0,a.length),Ca.arraycopy(i,0,s,a.length,i.length),this.resultPoints=s}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),m4;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(m4||(m4={}));const Pn=m4;var g4;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(g4||(g4={}));const Ao=g4;var Ux=(function(){function r(i,a,s,l,c,d){c===void 0&&(c=-1),d===void 0&&(d=-1),this.rawBytes=i,this.text=a,this.byteSegments=s,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=d,this.numBits=i==null?0:8*i.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(i){this.numBits=i},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(i){this.errorsCorrected=i},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(i){this.erasures=i},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(i){this.other=i},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),Hp=(function(){function r(){}return r.prototype.exp=function(i){return this.expTable[i]},r.prototype.log=function(i){if(i===0)throw new Ln;return this.logTable[i]},r.addOrSubtract=function(i,a){return i^a},r})(),Rd=(function(){function r(i,a){if(a.length===0)throw new Ln;this.field=i;var s=a.length;if(s>1&&a[0]===0){for(var l=1;l<s&&a[l]===0;)l++;l===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-l),Ca.arraycopy(a,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(i){return this.coefficients[this.coefficients.length-1-i]},r.prototype.evaluateAt=function(i){if(i===0)return this.getCoefficient(0);var a=this.coefficients,s;if(i===1){s=0;for(var l=0,c=a.length;l!==c;l++){var d=a[l];s=Hp.addOrSubtract(s,d)}return s}s=a[0];for(var f=a.length,m=this.field,l=1;l<f;l++)s=Hp.addOrSubtract(m.multiply(i,s),a[l]);return s},r.prototype.addOrSubtract=function(i){if(!this.field.equals(i.field))throw new Ln("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;var a=this.coefficients,s=i.coefficients;if(a.length>s.length){var l=a;a=s,s=l}var c=new Int32Array(s.length),d=s.length-a.length;Ca.arraycopy(s,0,c,0,d);for(var f=d;f<s.length;f++)c[f]=Hp.addOrSubtract(a[f-d],s[f]);return new r(this.field,c)},r.prototype.multiply=function(i){if(!this.field.equals(i.field))throw new Ln("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();for(var a=this.coefficients,s=a.length,l=i.coefficients,c=l.length,d=new Int32Array(s+c-1),f=this.field,m=0;m<s;m++)for(var g=a[m],v=0;v<c;v++)d[m+v]=Hp.addOrSubtract(d[m+v],f.multiply(g,l[v]));return new r(f,d)},r.prototype.multiplyScalar=function(i){if(i===0)return this.field.getZero();if(i===1)return this;for(var a=this.coefficients.length,s=this.field,l=new Int32Array(a),c=this.coefficients,d=0;d<a;d++)l[d]=s.multiply(c[d],i);return new r(s,l)},r.prototype.multiplyByMonomial=function(i,a){if(i<0)throw new Ln;if(a===0)return this.field.getZero();for(var s=this.coefficients,l=s.length,c=new Int32Array(l+i),d=this.field,f=0;f<l;f++)c[f]=d.multiply(s[f],a);return new r(d,c)},r.prototype.divide=function(i){if(!this.field.equals(i.field))throw new Ln("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new Ln("Divide by 0");for(var a=this.field,s=a.getZero(),l=this,c=i.getCoefficient(i.getDegree()),d=a.inverse(c);l.getDegree()>=i.getDegree()&&!l.isZero();){var f=l.getDegree()-i.getDegree(),m=a.multiply(l.getCoefficient(l.getDegree()),d),g=i.multiplyByMonomial(f,m),v=a.buildMonomial(f,m);s=s.addOrSubtract(v),l=l.addOrSubtract(g)}return[s,l]},r.prototype.toString=function(){for(var i="",a=this.getDegree();a>=0;a--){var s=this.getCoefficient(a);if(s!==0){if(s<0?(i+=" - ",s=-s):i.length>0&&(i+=" + "),a===0||s!==1){var l=this.field.log(s);l===0?i+="1":l===1?i+="a":(i+="a^",i+=l)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i},r})(),wF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),I7=(function(r){wF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="ArithmeticException",i})(_l),AF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),kl=(function(r){AF(i,r);function i(a,s,l){var c=r.call(this)||this;c.primitive=a,c.size=s,c.generatorBase=l;for(var d=new Int32Array(s),f=1,m=0;m<s;m++)d[m]=f,f*=2,f>=s&&(f^=a,f&=s-1);c.expTable=d;for(var g=new Int32Array(s),m=0;m<s-1;m++)g[d[m]]=m;return c.logTable=g,c.zero=new Rd(c,Int32Array.from([0])),c.one=new Rd(c,Int32Array.from([1])),c}return i.prototype.getZero=function(){return this.zero},i.prototype.getOne=function(){return this.one},i.prototype.buildMonomial=function(a,s){if(a<0)throw new Ln;if(s===0)return this.zero;var l=new Int32Array(a+1);return l[0]=s,new Rd(this,l)},i.prototype.inverse=function(a){if(a===0)throw new I7;return this.expTable[this.size-this.logTable[a]-1]},i.prototype.multiply=function(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.size-1)]},i.prototype.getSize=function(){return this.size},i.prototype.getGeneratorBase=function(){return this.generatorBase},i.prototype.toString=function(){return"GF(0x"+Ui.toHexString(this.primitive)+","+this.size+")"},i.prototype.equals=function(a){return a===this},i.AZTEC_DATA_12=new i(4201,4096,1),i.AZTEC_DATA_10=new i(1033,1024,1),i.AZTEC_DATA_6=new i(67,64,1),i.AZTEC_PARAM=new i(19,16,1),i.QR_CODE_FIELD_256=new i(285,256,0),i.DATA_MATRIX_FIELD_256=new i(301,256,1),i.AZTEC_DATA_8=i.DATA_MATRIX_FIELD_256,i.MAXICODE_FIELD_64=i.AZTEC_DATA_6,i})(Hp),SF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),c3=(function(r){SF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="ReedSolomonException",i})(_l),kF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Xm=(function(r){kF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="IllegalStateException",i})(_l),Lx=(function(){function r(i){this.field=i}return r.prototype.decode=function(i,a){for(var s=this.field,l=new Rd(s,i),c=new Int32Array(a),d=!0,f=0;f<a;f++){var m=l.evaluateAt(s.exp(f+s.getGeneratorBase()));c[c.length-1-f]=m,m!==0&&(d=!1)}if(!d)for(var g=new Rd(s,c),v=this.runEuclideanAlgorithm(s.buildMonomial(a,1),g,a),y=v[0],A=v[1],w=this.findErrorLocations(y),k=this.findErrorMagnitudes(A,w),f=0;f<w.length;f++){var E=i.length-1-s.log(w[f]);if(E<0)throw new c3("Bad error location");i[E]=kl.addOrSubtract(i[E],k[f])}},r.prototype.runEuclideanAlgorithm=function(i,a,s){if(i.getDegree()<a.getDegree()){var l=i;i=a,a=l}for(var c=this.field,d=i,f=a,m=c.getZero(),g=c.getOne();f.getDegree()>=(s/2|0);){var v=d,y=m;if(d=f,m=g,d.isZero())throw new c3("r_{i-1} was zero");f=v;for(var A=c.getZero(),w=d.getCoefficient(d.getDegree()),k=c.inverse(w);f.getDegree()>=d.getDegree()&&!f.isZero();){var E=f.getDegree()-d.getDegree(),I=c.multiply(f.getCoefficient(f.getDegree()),k);A=A.addOrSubtract(c.buildMonomial(E,I)),f=f.addOrSubtract(d.multiplyByMonomial(E,I))}if(g=A.multiply(m).addOrSubtract(y),f.getDegree()>=d.getDegree())throw new Xm("Division algorithm failed to reduce polynomial?")}var T=g.getCoefficient(0);if(T===0)throw new c3("sigmaTilde(0) was zero");var N=c.inverse(T),j=g.multiplyScalar(N),B=f.multiplyScalar(N);return[j,B]},r.prototype.findErrorLocations=function(i){var a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);for(var s=new Int32Array(a),l=0,c=this.field,d=1;d<c.getSize()&&l<a;d++)i.evaluateAt(d)===0&&(s[l]=c.inverse(d),l++);if(l!==a)throw new c3("Error locator degree does not match number of roots");return s},r.prototype.findErrorMagnitudes=function(i,a){for(var s=a.length,l=new Int32Array(s),c=this.field,d=0;d<s;d++){for(var f=c.inverse(a[d]),m=1,g=0;g<s;g++)if(d!==g){var v=c.multiply(a[g],f),y=(v&1)===0?v|1:v&-2;m=c.multiply(m,y)}l[d]=c.multiply(i.evaluateAt(f),c.inverse(m)),c.getGeneratorBase()!==0&&(l[d]=c.multiply(l[d],f))}return l},r})(),bo;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(bo||(bo={}));var _8=(function(){function r(){}return r.prototype.decode=function(i){this.ddata=i;var a=i.getBits(),s=this.extractBits(a),l=this.correctBits(s),c=r.convertBoolArrayToByteArray(l),d=r.getEncodedData(l),f=new Ux(c,d,null,null);return f.setNumBits(l.length),f},r.highLevelDecode=function(i){return this.getEncodedData(i)},r.getEncodedData=function(i){for(var a=i.length,s=bo.UPPER,l=bo.UPPER,c="",d=0;d<a;)if(l===bo.BINARY){if(a-d<5)break;var f=r.readCode(i,d,5);if(d+=5,f===0){if(a-d<11)break;f=r.readCode(i,d,11)+31,d+=11}for(var m=0;m<f;m++){if(a-d<8){d=a;break}var g=r.readCode(i,d,8);c+=fr.castAsNonUtf8Char(g),d+=8}l=s}else{var v=l===bo.DIGIT?4:5;if(a-d<v)break;var g=r.readCode(i,d,v);d+=v;var y=r.getCharacter(l,g);y.startsWith("CTRL_")?(s=l,l=r.getTable(y.charAt(5)),y.charAt(6)==="L"&&(s=l)):(c+=y,l=s)}return c},r.getTable=function(i){switch(i){case"L":return bo.LOWER;case"P":return bo.PUNCT;case"M":return bo.MIXED;case"D":return bo.DIGIT;case"B":return bo.BINARY;default:return bo.UPPER}},r.getCharacter=function(i,a){switch(i){case bo.UPPER:return r.UPPER_TABLE[a];case bo.LOWER:return r.LOWER_TABLE[a];case bo.MIXED:return r.MIXED_TABLE[a];case bo.PUNCT:return r.PUNCT_TABLE[a];case bo.DIGIT:return r.DIGIT_TABLE[a];default:throw new Xm("Bad table")}},r.prototype.correctBits=function(i){var a,s;this.ddata.getNbLayers()<=2?(s=6,a=kl.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,a=kl.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,a=kl.AZTEC_DATA_10):(s=12,a=kl.AZTEC_DATA_12);var l=this.ddata.getNbDatablocks(),c=i.length/s;if(c<l)throw new Ut;for(var d=i.length%s,f=new Int32Array(c),m=0;m<c;m++,d+=s)f[m]=r.readCode(i,d,s);try{var g=new Lx(a);g.decode(f,c-l)}catch(I){throw new Ut(I)}for(var v=(1<<s)-1,y=0,m=0;m<l;m++){var A=f[m];if(A===0||A===v)throw new Ut;(A===1||A===v-1)&&y++}for(var w=new Array(l*s-y),k=0,m=0;m<l;m++){var A=f[m];if(A===1||A===v-1)w.fill(A>1,k,k+s-1),k+=s-1;else for(var E=s-1;E>=0;--E)w[k++]=(A&1<<E)!==0}return w},r.prototype.extractBits=function(i){var a=this.ddata.isCompact(),s=this.ddata.getNbLayers(),l=(a?11:14)+s*4,c=new Int32Array(l),d=new Array(this.totalBitsInLayer(s,a));if(a)for(var f=0;f<c.length;f++)c[f]=f;else for(var m=l+1+2*Ui.truncDivision(Ui.truncDivision(l,2)-1,15),g=l/2,v=Ui.truncDivision(m,2),f=0;f<g;f++){var y=f+Ui.truncDivision(f,15);c[g-f-1]=v-y-1,c[g+f]=v+y+1}for(var f=0,A=0;f<s;f++){for(var w=(s-f)*4+(a?9:12),k=f*2,E=l-1-k,I=0;I<w;I++)for(var T=I*2,N=0;N<2;N++)d[A+T+N]=i.get(c[k+N],c[k+I]),d[A+2*w+T+N]=i.get(c[k+I],c[E-N]),d[A+4*w+T+N]=i.get(c[E-N],c[E-I]),d[A+6*w+T+N]=i.get(c[E-I],c[k+N]);A+=w*8}return d},r.readCode=function(i,a,s){for(var l=0,c=a;c<a+s;c++)l<<=1,i[c]&&(l|=1);return l},r.readByte=function(i,a){var s=i.length-a;return s>=8?r.readCode(i,a,8):r.readCode(i,a,s)<<8-s},r.convertBoolArrayToByteArray=function(i){for(var a=new Uint8Array((i.length+7)/8),s=0;s<a.length;s++)a[s]=r.readByte(i,8*s);return a},r.prototype.totalBitsInLayer=function(i,a){return((a?88:112)+16*i)*i},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),_r=(function(){function r(){}return r.round=function(i){return isNaN(i)?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0},r.distance=function(i,a,s,l){var c=i-s,d=a-l;return Math.sqrt(c*c+d*d)},r.sum=function(i){for(var a=0,s=0,l=i.length;s!==l;s++){var c=i[s];a+=c}return a},r})(),v4=(function(){function r(){}return r.floatToIntBits=function(i){return i},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),bn=(function(){function r(i,a){this.x=i,this.y=a}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(i){if(i instanceof r){var a=i;return this.x===a.x&&this.y===a.y}return!1},r.prototype.hashCode=function(){return 31*v4.floatToIntBits(this.x)+v4.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(i){var a=this.distance(i[0],i[1]),s=this.distance(i[1],i[2]),l=this.distance(i[0],i[2]),c,d,f;if(s>=a&&s>=l?(d=i[0],c=i[1],f=i[2]):l>=s&&l>=a?(d=i[1],c=i[0],f=i[2]):(d=i[2],c=i[0],f=i[1]),this.crossProductZ(c,d,f)<0){var m=c;c=f,f=m}i[0]=c,i[1]=d,i[2]=f},r.distance=function(i,a){return _r.distance(i.x,i.y,a.x,a.y)},r.crossProductZ=function(i,a,s){var l=a.x,c=a.y;return(s.x-l)*(i.y-c)-(s.y-c)*(i.x-l)},r})(),Nw=(function(){function r(i,a){this.bits=i,this.points=a}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),CF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),EF=(function(r){CF(i,r);function i(a,s,l,c,d){var f=r.call(this,a,s)||this;return f.compact=l,f.nbDatablocks=c,f.nbLayers=d,f}return i.prototype.getNbLayers=function(){return this.nbLayers},i.prototype.getNbDatablocks=function(){return this.nbDatablocks},i.prototype.isCompact=function(){return this.compact},i})(Nw),x4=(function(){function r(i,a,s,l){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=r.INIT_SIZE),s==null&&(s=i.getWidth()/2|0),l==null&&(l=i.getHeight()/2|0);var c=a/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new et}return r.prototype.detect=function(){for(var i=this.leftInit,a=this.rightInit,s=this.upInit,l=this.downInit,c=!1,d=!0,f=!1,m=!1,g=!1,v=!1,y=!1,A=this.width,w=this.height;d;){d=!1;for(var k=!0;(k||!m)&&a<A;)k=this.containsBlackPoint(s,l,a,!1),k?(a++,d=!0,m=!0):m||a++;if(a>=A){c=!0;break}for(var E=!0;(E||!g)&&l<w;)E=this.containsBlackPoint(i,a,l,!0),E?(l++,d=!0,g=!0):g||l++;if(l>=w){c=!0;break}for(var I=!0;(I||!v)&&i>=0;)I=this.containsBlackPoint(s,l,i,!1),I?(i--,d=!0,v=!0):v||i--;if(i<0){c=!0;break}for(var T=!0;(T||!y)&&s>=0;)T=this.containsBlackPoint(i,a,s,!0),T?(s--,d=!0,y=!0):y||s--;if(s<0){c=!0;break}d&&(f=!0)}if(!c&&f){for(var N=a-i,j=null,B=1;j===null&&B<N;B++)j=this.getBlackPointOnSegment(i,l-B,i+B,l);if(j==null)throw new et;for(var U=null,B=1;U===null&&B<N;B++)U=this.getBlackPointOnSegment(i,s+B,i+B,s);if(U==null)throw new et;for(var F=null,B=1;F===null&&B<N;B++)F=this.getBlackPointOnSegment(a,s+B,a-B,s);if(F==null)throw new et;for(var P=null,B=1;P===null&&B<N;B++)P=this.getBlackPointOnSegment(a,l-B,a-B,l);if(P==null)throw new et;return this.centerEdges(P,j,F,U)}else throw new et},r.prototype.getBlackPointOnSegment=function(i,a,s,l){for(var c=_r.round(_r.distance(i,a,s,l)),d=(s-i)/c,f=(l-a)/c,m=this.image,g=0;g<c;g++){var v=_r.round(i+g*d),y=_r.round(a+g*f);if(m.get(v,y))return new bn(v,y)}return null},r.prototype.centerEdges=function(i,a,s,l){var c=i.getX(),d=i.getY(),f=a.getX(),m=a.getY(),g=s.getX(),v=s.getY(),y=l.getX(),A=l.getY(),w=r.CORR;return c<this.width/2?[new bn(y-w,A+w),new bn(f+w,m+w),new bn(g-w,v-w),new bn(c+w,d-w)]:[new bn(y+w,A+w),new bn(f+w,m-w),new bn(g-w,v+w),new bn(c-w,d-w)]},r.prototype.containsBlackPoint=function(i,a,s,l){var c=this.image;if(l){for(var d=i;d<=a;d++)if(c.get(d,s))return!0}else for(var f=i;f<=a;f++)if(c.get(s,f))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),I8=(function(){function r(){}return r.checkAndNudgePoints=function(i,a){for(var s=i.getWidth(),l=i.getHeight(),c=!0,d=0;d<a.length&&c;d+=2){var f=Math.floor(a[d]),m=Math.floor(a[d+1]);if(f<-1||f>s||m<-1||m>l)throw new et;c=!1,f===-1?(a[d]=0,c=!0):f===s&&(a[d]=s-1,c=!0),m===-1?(a[d+1]=0,c=!0):m===l&&(a[d+1]=l-1,c=!0)}c=!0;for(var d=a.length-2;d>=0&&c;d-=2){var f=Math.floor(a[d]),m=Math.floor(a[d+1]);if(f<-1||f>s||m<-1||m>l)throw new et;c=!1,f===-1?(a[d]=0,c=!0):f===s&&(a[d]=s-1,c=!0),m===-1?(a[d+1]=0,c=!0):m===l&&(a[d+1]=l-1,c=!0)}},r})(),N7=(function(){function r(i,a,s,l,c,d,f,m,g){this.a11=i,this.a21=a,this.a31=s,this.a12=l,this.a22=c,this.a32=d,this.a13=f,this.a23=m,this.a33=g}return r.quadrilateralToQuadrilateral=function(i,a,s,l,c,d,f,m,g,v,y,A,w,k,E,I){var T=r.quadrilateralToSquare(i,a,s,l,c,d,f,m),N=r.squareToQuadrilateral(g,v,y,A,w,k,E,I);return N.times(T)},r.prototype.transformPoints=function(i){for(var a=i.length,s=this.a11,l=this.a12,c=this.a13,d=this.a21,f=this.a22,m=this.a23,g=this.a31,v=this.a32,y=this.a33,A=0;A<a;A+=2){var w=i[A],k=i[A+1],E=c*w+m*k+y;i[A]=(s*w+d*k+g)/E,i[A+1]=(l*w+f*k+v)/E}},r.prototype.transformPointsWithValues=function(i,a){for(var s=this.a11,l=this.a12,c=this.a13,d=this.a21,f=this.a22,m=this.a23,g=this.a31,v=this.a32,y=this.a33,A=i.length,w=0;w<A;w++){var k=i[w],E=a[w],I=c*k+m*E+y;i[w]=(s*k+d*E+g)/I,a[w]=(l*k+f*E+v)/I}},r.squareToQuadrilateral=function(i,a,s,l,c,d,f,m){var g=i-s+c-f,v=a-l+d-m;if(g===0&&v===0)return new r(s-i,c-s,i,l-a,d-l,a,0,0,1);var y=s-c,A=f-c,w=l-d,k=m-d,E=y*k-A*w,I=(g*k-A*v)/E,T=(y*v-g*w)/E;return new r(s-i+I*s,f-i+T*f,i,l-a+I*l,m-a+T*m,a,I,T,1)},r.quadrilateralToSquare=function(i,a,s,l,c,d,f,m){return r.squareToQuadrilateral(i,a,s,l,c,d,f,m).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(i){return new r(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)},r})(),_F=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),IF=(function(r){_F(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.sampleGrid=function(a,s,l,c,d,f,m,g,v,y,A,w,k,E,I,T,N,j,B){var U=N7.quadrilateralToQuadrilateral(c,d,f,m,g,v,y,A,w,k,E,I,T,N,j,B);return this.sampleGridWithTransform(a,s,l,U)},i.prototype.sampleGridWithTransform=function(a,s,l,c){if(s<=0||l<=0)throw new et;for(var d=new ac(s,l),f=new Float32Array(2*s),m=0;m<l;m++){for(var g=f.length,v=m+.5,y=0;y<g;y+=2)f[y]=y/2+.5,f[y+1]=v;c.transformPoints(f),I8.checkAndNudgePoints(a,f);try{for(var y=0;y<g;y+=2)a.get(Math.floor(f[y]),Math.floor(f[y+1]))&&d.set(y/2,m)}catch{throw new et}}return d},i})(I8),Tw=(function(){function r(){}return r.setGridSampler=function(i){r.gridSampler=i},r.getInstance=function(){return r.gridSampler},r.gridSampler=new IF,r})(),xl=(function(){function r(i,a){this.x=i,this.y=a}return r.prototype.toResultPoint=function(){return new bn(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),NF=(function(){function r(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(i){var a=this.getMatrixCenter(),s=this.getBullsEyeCorners(a);if(i){var l=s[0];s[0]=s[2],s[2]=l}this.extractParameters(s);var c=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),d=this.getMatrixCornerPoints(s);return new EF(c,d,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new et;var a=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(s,a);for(var l=0,c=0;c<4;c++){var d=s[(this.shift+c)%4];this.compact?(l<<=7,l+=d>>1&127):(l<<=10,l+=(d>>2&992)+(d>>1&31))}var f=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)},r.prototype.getRotation=function(i,a){var s=0;i.forEach(function(c,d,f){var m=(c>>a-2<<1)+(c&1);s=(s<<3)+m}),s=((s&1)<<11)+(s>>1);for(var l=0;l<4;l++)if(Ui.bitCount(s^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new et},r.prototype.getCorrectedParameterData=function(i,a){var s,l;a?(s=7,l=2):(s=10,l=4);for(var c=s-l,d=new Int32Array(s),f=s-1;f>=0;--f)d[f]=i&15,i>>=4;try{var m=new Lx(kl.AZTEC_PARAM);m.decode(d,c)}catch{throw new et}for(var g=0,f=0;f<l;f++)g=(g<<4)+d[f];return g},r.prototype.getBullsEyeCorners=function(i){var a=i,s=i,l=i,c=i,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var f=this.getFirstDifferent(a,d,1,-1),m=this.getFirstDifferent(s,d,1,1),g=this.getFirstDifferent(l,d,-1,1),v=this.getFirstDifferent(c,d,-1,-1);if(this.nbCenterLayers>2){var y=this.distancePoint(v,f)*this.nbCenterLayers/(this.distancePoint(c,a)*(this.nbCenterLayers+2));if(y<.75||y>1.25||!this.isWhiteOrBlackRectangle(f,m,g,v))break}a=f,s=m,l=g,c=v,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new et;this.compact=this.nbCenterLayers===5;var A=new bn(a.getX()+.5,a.getY()-.5),w=new bn(s.getX()+.5,s.getY()+.5),k=new bn(l.getX()-.5,l.getY()+.5),E=new bn(c.getX()-.5,c.getY()-.5);return this.expandSquare([A,w,k,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var i,a,s,l;try{var c=new x4(this.image).detect();i=c[0],a=c[1],s=c[2],l=c[3]}catch{var d=this.image.getWidth()/2,f=this.image.getHeight()/2;i=this.getFirstDifferent(new xl(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new xl(d+7,f+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new xl(d-7,f+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new xl(d-7,f-7),!1,-1,-1).toResultPoint()}var m=_r.round((i.getX()+l.getX()+a.getX()+s.getX())/4),g=_r.round((i.getY()+l.getY()+a.getY()+s.getY())/4);try{var c=new x4(this.image,15,m,g).detect();i=c[0],a=c[1],s=c[2],l=c[3]}catch{i=this.getFirstDifferent(new xl(m+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new xl(m+7,g+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new xl(m-7,g+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new xl(m-7,g-7),!1,-1,-1).toResultPoint()}return m=_r.round((i.getX()+l.getX()+a.getX()+s.getX())/4),g=_r.round((i.getY()+l.getY()+a.getY()+s.getY())/4),new xl(m,g)},r.prototype.getMatrixCornerPoints=function(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(i,a,s,l,c){var d=Tw.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,g=f/2+this.nbCenterLayers;return d.sampleGrid(i,f,f,m,m,g,m,g,g,m,g,a.getX(),a.getY(),s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY())},r.prototype.sampleLine=function(i,a,s){for(var l=0,c=this.distanceResultPoint(i,a),d=c/s,f=i.getX(),m=i.getY(),g=d*(a.getX()-i.getX())/c,v=d*(a.getY()-i.getY())/c,y=0;y<s;y++)this.image.get(_r.round(f+y*g),_r.round(m+y*v))&&(l|=1<<s-y-1);return l},r.prototype.isWhiteOrBlackRectangle=function(i,a,s,l){var c=3;i=new xl(i.getX()-c,i.getY()+c),a=new xl(a.getX()-c,a.getY()-c),s=new xl(s.getX()+c,s.getY()-c),l=new xl(l.getX()+c,l.getY()+c);var d=this.getColor(l,i);if(d===0)return!1;var f=this.getColor(i,a);return f!==d||(f=this.getColor(a,s),f!==d)?!1:(f=this.getColor(s,l),f===d)},r.prototype.getColor=function(i,a){for(var s=this.distancePoint(i,a),l=(a.getX()-i.getX())/s,c=(a.getY()-i.getY())/s,d=0,f=i.getX(),m=i.getY(),g=this.image.get(i.getX(),i.getY()),v=Math.ceil(s),y=0;y<v;y++)f+=l,m+=c,this.image.get(_r.round(f),_r.round(m))!==g&&d++;var A=d/s;return A>.1&&A<.9?0:A<=.1===g?1:-1},r.prototype.getFirstDifferent=function(i,a,s,l){for(var c=i.getX()+s,d=i.getY()+l;this.isValid(c,d)&&this.image.get(c,d)===a;)c+=s,d+=l;for(c-=s,d-=l;this.isValid(c,d)&&this.image.get(c,d)===a;)c+=s;for(c-=s;this.isValid(c,d)&&this.image.get(c,d)===a;)d+=l;return d-=l,new xl(c,d)},r.prototype.expandSquare=function(i,a,s){var l=s/(2*a),c=i[0].getX()-i[2].getX(),d=i[0].getY()-i[2].getY(),f=(i[0].getX()+i[2].getX())/2,m=(i[0].getY()+i[2].getY())/2,g=new bn(f+l*c,m+l*d),v=new bn(f-l*c,m-l*d);c=i[1].getX()-i[3].getX(),d=i[1].getY()-i[3].getY(),f=(i[1].getX()+i[3].getX())/2,m=(i[1].getY()+i[3].getY())/2;var y=new bn(f+l*c,m+l*d),A=new bn(f-l*c,m-l*d),w=[g,y,v,A];return w},r.prototype.isValid=function(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()},r.prototype.isValidPoint=function(i){var a=_r.round(i.getX()),s=_r.round(i.getY());return this.isValid(a,s)},r.prototype.distancePoint=function(i,a){return _r.distance(i.getX(),i.getY(),a.getX(),a.getY())},r.prototype.distanceResultPoint=function(i,a){return _r.distance(i.getX(),i.getY(),a.getX(),a.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ui.truncDivision(this.nbLayers-4,8)+1)+15},r})(),b4=(function(){function r(){}return r.prototype.decode=function(i,a){a===void 0&&(a=null);var s=null,l=new NF(i.getBlackMatrix()),c=null,d=null;try{var f=l.detectMirror(!1);c=f.getPoints(),this.reportFoundResultPoints(a,c),d=new _8().decode(f)}catch(y){s=y}if(d==null)try{var f=l.detectMirror(!0);c=f.getPoints(),this.reportFoundResultPoints(a,c),d=new _8().decode(f)}catch(y){throw s??y}var m=new Ho(d.getText(),d.getRawBytes(),d.getNumBits(),c,Pn.AZTEC,Ca.currentTimeMillis()),g=d.getByteSegments();g!=null&&m.putMetadata(Ao.BYTE_SEGMENTS,g);var v=d.getECLevel();return v!=null&&m.putMetadata(Ao.ERROR_CORRECTION_LEVEL,v),m},r.prototype.reportFoundResultPoints=function(i,a){if(i!=null){var s=i.get(qa.NEED_RESULT_POINT_CALLBACK);s!=null&&a.forEach(function(l,c,d){s.foundPossibleResultPoint(l)})}},r.prototype.reset=function(){},r})(),TF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){TF(i,r);function i(a){return a===void 0&&(a=500),r.call(this,new b4,a)||this}return i})(b2);var Vs=(function(){function r(){}return r.prototype.decode=function(i,a){try{return this.doDecode(i,a)}catch{var s=a&&a.get(qa.TRY_HARDER)===!0;if(s&&i.isRotateSupported()){var l=i.rotateCounterClockwise(),c=this.doDecode(l,a),d=c.getResultMetadata(),f=270;d!==null&&d.get(Ao.ORIENTATION)===!0&&(f=f+d.get(Ao.ORIENTATION)%360),c.putMetadata(Ao.ORIENTATION,f);var m=c.getResultPoints();if(m!==null)for(var g=l.getHeight(),v=0;v<m.length;v++)m[v]=new bn(g-m[v].getY()-1,m[v].getX());return c}else throw new et}},r.prototype.reset=function(){},r.prototype.doDecode=function(i,a){var s=i.getWidth(),l=i.getHeight(),c=new so(s),d=a&&a.get(qa.TRY_HARDER)===!0,f=Math.max(1,l>>(d?8:5)),m;d?m=l:m=15;for(var g=Math.trunc(l/2),v=0;v<m;v++){var y=Math.trunc((v+1)/2),A=(v&1)===0,w=g+f*(A?y:-y);if(w<0||w>=l)break;try{c=i.getBlackRow(w,c)}catch{continue}for(var k=function(N){if(N===1&&(c.reverse(),a&&a.get(qa.NEED_RESULT_POINT_CALLBACK)===!0)){var j=new Map;a.forEach(function(F,P){return j.set(P,F)}),j.delete(qa.NEED_RESULT_POINT_CALLBACK),a=j}try{var B=E.decodeRow(w,c,a);if(N===1){B.putMetadata(Ao.ORIENTATION,180);var U=B.getResultPoints();U!==null&&(U[0]=new bn(s-U[0].getX()-1,U[0].getY()),U[1]=new bn(s-U[1].getX()-1,U[1].getY()))}return{value:B}}catch{}},E=this,I=0;I<2;I++){var T=k(I);if(typeof T=="object")return T.value}}throw new et},r.recordPattern=function(i,a,s){for(var l=s.length,c=0;c<l;c++)s[c]=0;var d=i.getSize();if(a>=d)throw new et;for(var f=!i.get(a),m=0,g=a;g<d;){if(i.get(g)!==f)s[m]++;else{if(++m===l)break;s[m]=1,f=!f}g++}if(!(m===l||m===l-1&&g===d))throw new et},r.recordPatternInReverse=function(i,a,s){for(var l=s.length,c=i.get(a);a>0&&l>=0;)i.get(--a)!==c&&(l--,c=!c);if(l>=0)throw new et;r.recordPattern(i,a+1,s)},r.patternMatchVariance=function(i,a,s){for(var l=i.length,c=0,d=0,f=0;f<l;f++)c+=i[f],d+=a[f];if(c<d)return Number.POSITIVE_INFINITY;var m=c/d;s*=m;for(var g=0,v=0;v<l;v++){var y=i[v],A=a[v]*m,w=y>A?y-A:A-y;if(w>s)return Number.POSITIVE_INFINITY;g+=w}return g/c},r})(),MF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),N8=(function(r){MF(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.findStartPattern=function(a){for(var s=a.getSize(),l=a.getNextSet(0),c=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,m=!1,g=6,v=l;v<s;v++)if(a.get(v)!==m)d[c]++;else{if(c===g-1){for(var y=i.MAX_AVG_VARIANCE,A=-1,w=i.CODE_START_A;w<=i.CODE_START_C;w++){var k=Vs.patternMatchVariance(d,i.CODE_PATTERNS[w],i.MAX_INDIVIDUAL_VARIANCE);k<y&&(y=k,A=w)}if(A>=0&&a.isRange(Math.max(0,f-(v-f)/2),f,!1))return Int32Array.from([f,v,A]);f+=d[0]+d[1],d=d.slice(2,d.length),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,m=!m}throw new et},i.decodeCode=function(a,s,l){Vs.recordPattern(a,l,s);for(var c=i.MAX_AVG_VARIANCE,d=-1,f=0;f<i.CODE_PATTERNS.length;f++){var m=i.CODE_PATTERNS[f],g=this.patternMatchVariance(s,m,i.MAX_INDIVIDUAL_VARIANCE);g<c&&(c=g,d=f)}if(d>=0)return d;throw new et},i.prototype.decodeRow=function(a,s,l){var c=l&&l.get(qa.ASSUME_GS1)===!0,d=i.findStartPattern(s),f=d[2],m=0,g=new Uint8Array(20);g[m++]=f;var v;switch(f){case i.CODE_START_A:v=i.CODE_CODE_A;break;case i.CODE_START_B:v=i.CODE_CODE_B;break;case i.CODE_START_C:v=i.CODE_CODE_C;break;default:throw new Ut}for(var y=!1,A=!1,w="",k=d[0],E=d[1],I=Int32Array.from([0,0,0,0,0,0]),T=0,N=0,j=f,B=0,U=!0,F=!1,P=!1;!y;){var z=A;switch(A=!1,T=N,N=i.decodeCode(s,I,E),g[m++]=N,N!==i.CODE_STOP&&(U=!0),N!==i.CODE_STOP&&(B++,j+=B*N),k=E,E+=I.reduce(function(ie,ne){return ie+ne},0),N){case i.CODE_START_A:case i.CODE_START_B:case i.CODE_START_C:throw new Ut}switch(v){case i.CODE_CODE_A:if(N<64)P===F?w+=String.fromCharCode(32+N):w+=String.fromCharCode(32+N+128),P=!1;else if(N<96)P===F?w+=String.fromCharCode(N-64):w+=String.fromCharCode(N+64),P=!1;else switch(N!==i.CODE_STOP&&(U=!1),N){case i.CODE_FNC_1:c&&(w.length===0?w+="]C1":w+="");break;case i.CODE_FNC_2:case i.CODE_FNC_3:break;case i.CODE_FNC_4_A:!F&&P?(F=!0,P=!1):F&&P?(F=!1,P=!1):P=!0;break;case i.CODE_SHIFT:A=!0,v=i.CODE_CODE_B;break;case i.CODE_CODE_B:v=i.CODE_CODE_B;break;case i.CODE_CODE_C:v=i.CODE_CODE_C;break;case i.CODE_STOP:y=!0;break}break;case i.CODE_CODE_B:if(N<96)P===F?w+=String.fromCharCode(32+N):w+=String.fromCharCode(32+N+128),P=!1;else switch(N!==i.CODE_STOP&&(U=!1),N){case i.CODE_FNC_1:c&&(w.length===0?w+="]C1":w+="");break;case i.CODE_FNC_2:case i.CODE_FNC_3:break;case i.CODE_FNC_4_B:!F&&P?(F=!0,P=!1):F&&P?(F=!1,P=!1):P=!0;break;case i.CODE_SHIFT:A=!0,v=i.CODE_CODE_A;break;case i.CODE_CODE_A:v=i.CODE_CODE_A;break;case i.CODE_CODE_C:v=i.CODE_CODE_C;break;case i.CODE_STOP:y=!0;break}break;case i.CODE_CODE_C:if(N<100)N<10&&(w+="0"),w+=N;else switch(N!==i.CODE_STOP&&(U=!1),N){case i.CODE_FNC_1:c&&(w.length===0?w+="]C1":w+="");break;case i.CODE_CODE_A:v=i.CODE_CODE_A;break;case i.CODE_CODE_B:v=i.CODE_CODE_B;break;case i.CODE_STOP:y=!0;break}break}z&&(v=v===i.CODE_CODE_A?i.CODE_CODE_B:i.CODE_CODE_A)}var V=E-k;if(E=s.getNextUnset(E),!s.isRange(E,Math.min(s.getSize(),E+(E-k)/2),!1))throw new et;if(j-=B*T,j%103!==T)throw new ao;var L=w.length;if(L===0)throw new et;L>0&&U&&(v===i.CODE_CODE_C?w=w.substring(0,L-2):w=w.substring(0,L-1));for(var Q=(d[1]+d[0])/2,q=k+V/2,ee=g.length,X=new Uint8Array(ee),ae=0;ae<ee;ae++)X[ae]=g[ae];var K=[new bn(Q,a),new bn(q,a)];return new Ho(w,X,0,K,Pn.CODE_128,new Date().getTime())},i.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],i.MAX_AVG_VARIANCE=.25,i.MAX_INDIVIDUAL_VARIANCE=.7,i.CODE_SHIFT=98,i.CODE_CODE_C=99,i.CODE_CODE_B=100,i.CODE_CODE_A=101,i.CODE_FNC_1=102,i.CODE_FNC_2=97,i.CODE_FNC_3=96,i.CODE_FNC_4_A=101,i.CODE_FNC_4_B=100,i.CODE_START_A=103,i.CODE_START_B=104,i.CODE_START_C=105,i.CODE_STOP=106,i})(Vs),RF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),ay=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},T8=(function(r){RF(i,r);function i(a,s){a===void 0&&(a=!1),s===void 0&&(s=!1);var l=r.call(this)||this;return l.usingCheckDigit=a,l.extendedMode=s,l.decodeRowResult="",l.counters=new Int32Array(9),l}return i.prototype.decodeRow=function(a,s,l){var c,d,f,m,g=this.counters;g.fill(0),this.decodeRowResult="";var v=i.findAsteriskPattern(s,g),y=s.getNextSet(v[1]),A=s.getSize(),w,k;do{i.recordPattern(s,y,g);var E=i.toNarrowWidePattern(g);if(E<0)throw new et;w=i.patternToChar(E),this.decodeRowResult+=w,k=y;try{for(var I=(c=void 0,ay(g)),T=I.next();!T.done;T=I.next()){var N=T.value;y+=N}}catch(ee){c={error:ee}}finally{try{T&&!T.done&&(d=I.return)&&d.call(I)}finally{if(c)throw c.error}}y=s.getNextSet(y)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var j=0;try{for(var B=ay(g),U=B.next();!U.done;U=B.next()){var N=U.value;j+=N}}catch(ee){f={error:ee}}finally{try{U&&!U.done&&(m=B.return)&&m.call(B)}finally{if(f)throw f.error}}var F=y-k-j;if(y!==A&&F*2<j)throw new et;if(this.usingCheckDigit){for(var P=this.decodeRowResult.length-1,z=0,V=0;V<P;V++)z+=i.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(V));if(this.decodeRowResult.charAt(P)!==i.ALPHABET_STRING.charAt(z%43))throw new ao;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new et;var L;this.extendedMode?L=i.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;var Q=(v[1]+v[0])/2,q=k+j/2;return new Ho(L,null,0,[new bn(Q,a),new bn(q,a)],Pn.CODE_39,new Date().getTime())},i.findAsteriskPattern=function(a,s){for(var l=a.getSize(),c=a.getNextSet(0),d=0,f=c,m=!1,g=s.length,v=c;v<l;v++)if(a.get(v)!==m)s[d]++;else{if(d===g-1){if(this.toNarrowWidePattern(s)===i.ASTERISK_ENCODING&&a.isRange(Math.max(0,f-Math.floor((v-f)/2)),f,!1))return[f,v];f+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,m=!m}throw new et},i.toNarrowWidePattern=function(a){var s,l,c=a.length,d=0,f;do{var m=2147483647;try{for(var g=(s=void 0,ay(a)),v=g.next();!v.done;v=g.next()){var y=v.value;y<m&&y>d&&(m=y)}}catch(E){s={error:E}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(s)throw s.error}}d=m,f=0;for(var A=0,w=0,k=0;k<c;k++){var y=a[k];y>d&&(w|=1<<c-1-k,f++,A+=y)}if(f===3){for(var k=0;k<c&&f>0;k++){var y=a[k];if(y>d&&(f--,y*2>=A))return-1}return w}}while(f>3);return-1},i.patternToChar=function(a){for(var s=0;s<i.CHARACTER_ENCODINGS.length;s++)if(i.CHARACTER_ENCODINGS[s]===a)return i.ALPHABET_STRING.charAt(s);if(a===i.ASTERISK_ENCODING)return"*";throw new et},i.decodeExtended=function(a){for(var s=a.length,l="",c=0;c<s;c++){var d=a.charAt(c);if(d==="+"||d==="$"||d==="%"||d==="/"){var f=a.charAt(c+1),m="\0";switch(d){case"+":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new Ut;break;case"$":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new Ut;break;case"%":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f==="X"||f==="Y"||f==="Z")m="";else throw new Ut;break;case"/":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new Ut;break}l+=m,c++}else l+=d}return l},i.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",i.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],i.ASTERISK_ENCODING=148,i})(Vs),OF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),sy=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},M8=(function(r){OF(i,r);function i(){var a=r.call(this)||this;return a.decodeRowResult="",a.counters=new Int32Array(6),a}return i.prototype.decodeRow=function(a,s,l){var c,d,f,m,g=this.findAsteriskPattern(s),v=s.getNextSet(g[1]),y=s.getSize(),A=this.counters;A.fill(0),this.decodeRowResult="";var w,k;do{i.recordPattern(s,v,A);var E=this.toPattern(A);if(E<0)throw new et;w=this.patternToChar(E),this.decodeRowResult+=w,k=v;try{for(var I=(c=void 0,sy(A)),T=I.next();!T.done;T=I.next()){var N=T.value;v+=N}}catch(V){c={error:V}}finally{try{T&&!T.done&&(d=I.return)&&d.call(I)}finally{if(c)throw c.error}}v=s.getNextSet(v)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var j=0;try{for(var B=sy(A),U=B.next();!U.done;U=B.next()){var N=U.value;j+=N}}catch(V){f={error:V}}finally{try{U&&!U.done&&(m=B.return)&&m.call(B)}finally{if(f)throw f.error}}if(v===y||!s.get(v))throw new et;if(this.decodeRowResult.length<2)throw new et;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var F=this.decodeExtended(this.decodeRowResult),P=(g[1]+g[0])/2,z=k+j/2;return new Ho(F,null,0,[new bn(P,a),new bn(z,a)],Pn.CODE_93,new Date().getTime())},i.prototype.findAsteriskPattern=function(a){var s=a.getSize(),l=a.getNextSet(0);this.counters.fill(0);for(var c=this.counters,d=l,f=!1,m=c.length,g=0,v=l;v<s;v++)if(a.get(v)!==f)c[g]++;else{if(g===m-1){if(this.toPattern(c)===i.ASTERISK_ENCODING)return new Int32Array([d,v]);d+=c[0]+c[1],c.copyWithin(0,2,2+g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,f=!f}throw new et},i.prototype.toPattern=function(a){var s,l,c=0;try{for(var d=sy(a),f=d.next();!f.done;f=d.next()){var m=f.value;c+=m}}catch(k){s={error:k}}finally{try{f&&!f.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}for(var g=0,v=a.length,y=0;y<v;y++){var A=Math.round(a[y]*9/c);if(A<1||A>4)return-1;if((y&1)===0)for(var w=0;w<A;w++)g=g<<1|1;else g<<=A}return g},i.prototype.patternToChar=function(a){for(var s=0;s<i.CHARACTER_ENCODINGS.length;s++)if(i.CHARACTER_ENCODINGS[s]===a)return i.ALPHABET_STRING.charAt(s);throw new et},i.prototype.decodeExtended=function(a){for(var s=a.length,l="",c=0;c<s;c++){var d=a.charAt(c);if(d>="a"&&d<="d"){if(c>=s-1)throw new Ut;var f=a.charAt(c+1),m="\0";switch(d){case"d":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)+32);else throw new Ut;break;case"a":if(f>="A"&&f<="Z")m=String.fromCharCode(f.charCodeAt(0)-64);else throw new Ut;break;case"b":if(f>="A"&&f<="E")m=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")m=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")m=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")m="\0";else if(f==="V")m="@";else if(f==="W")m="`";else if(f>="X"&&f<="Z")m="";else throw new Ut;break;case"c":if(f>="A"&&f<="O")m=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")m=":";else throw new Ut;break}l+=m,c++}else l+=d}return l},i.prototype.checkChecksums=function(a){var s=a.length;this.checkOneChecksum(a,s-2,20),this.checkOneChecksum(a,s-1,15)},i.prototype.checkOneChecksum=function(a,s,l){for(var c=1,d=0,f=s-1;f>=0;f--)d+=c*i.ALPHABET_STRING.indexOf(a.charAt(f)),++c>l&&(c=1);if(a.charAt(s)!==i.ALPHABET_STRING[d%47])throw new ao},i.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",i.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],i.ASTERISK_ENCODING=i.CHARACTER_ENCODINGS[47],i})(Vs),DF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),jF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},R8=(function(r){DF(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.narrowLineWidth=-1,a}return i.prototype.decodeRow=function(a,s,l){var c,d,f=this.decodeStart(s),m=this.decodeEnd(s),g=new ji;i.decodeMiddle(s,f[1],m[0],g);var v=g.toString(),y=null;l!=null&&(y=l.get(qa.ALLOWED_LENGTHS)),y==null&&(y=i.DEFAULT_ALLOWED_LENGTHS);var A=v.length,w=!1,k=0;try{for(var E=jF(y),I=E.next();!I.done;I=E.next()){var T=I.value;if(A===T){w=!0;break}T>k&&(k=T)}}catch(B){c={error:B}}finally{try{I&&!I.done&&(d=E.return)&&d.call(E)}finally{if(c)throw c.error}}if(!w&&A>k&&(w=!0),!w)throw new Ut;var N=[new bn(f[1],a),new bn(m[0],a)],j=new Ho(v,null,0,N,Pn.ITF,new Date().getTime());return j},i.decodeMiddle=function(a,s,l,c){var d=new Int32Array(10),f=new Int32Array(5),m=new Int32Array(5);for(d.fill(0),f.fill(0),m.fill(0);s<l;){Vs.recordPattern(a,s,d);for(var g=0;g<5;g++){var v=2*g;f[g]=d[v],m[g]=d[v+1]}var y=i.decodeDigit(f);c.append(y.toString()),y=this.decodeDigit(m),c.append(y.toString()),d.forEach(function(A){s+=A})}},i.prototype.decodeStart=function(a){var s=i.skipWhiteSpace(a),l=i.findGuardPattern(a,s,i.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(a,l[0]),l},i.prototype.validateQuietZone=function(a,s){var l=this.narrowLineWidth*10;l=l<s?l:s;for(var c=s-1;l>0&&c>=0&&!a.get(c);c--)l--;if(l!==0)throw new et},i.skipWhiteSpace=function(a){var s=a.getSize(),l=a.getNextSet(0);if(l===s)throw new et;return l},i.prototype.decodeEnd=function(a){a.reverse();try{var s=i.skipWhiteSpace(a),l=void 0;try{l=i.findGuardPattern(a,s,i.END_PATTERN_REVERSED[0])}catch(d){d instanceof et&&(l=i.findGuardPattern(a,s,i.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,l[0]);var c=l[0];return l[0]=a.getSize()-l[1],l[1]=a.getSize()-c,l}finally{a.reverse()}},i.findGuardPattern=function(a,s,l){var c=l.length,d=new Int32Array(c),f=a.getSize(),m=!1,g=0,v=s;d.fill(0);for(var y=s;y<f;y++)if(a.get(y)!==m)d[g]++;else{if(g===c-1){if(Vs.patternMatchVariance(d,l,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return[v,y];v+=d[0]+d[1],Ca.arraycopy(d,2,d,0,g-1),d[g-1]=0,d[g]=0,g--}else g++;d[g]=1,m=!m}throw new et},i.decodeDigit=function(a){for(var s=i.MAX_AVG_VARIANCE,l=-1,c=i.PATTERNS.length,d=0;d<c;d++){var f=i.PATTERNS[d],m=Vs.patternMatchVariance(a,f,i.MAX_INDIVIDUAL_VARIANCE);m<s?(s=m,l=d):m===s&&(l=-1)}if(l>=0)return l%10;throw new et},i.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],i.MAX_AVG_VARIANCE=.38,i.MAX_INDIVIDUAL_VARIANCE=.5,i.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],i.START_PATTERN=Int32Array.from([1,1,1,1]),i.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],i})(Vs),BF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),n2=(function(r){BF(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.decodeRowStringBuffer="",a}return i.findStartGuardPattern=function(a){for(var s=!1,l,c=0,d=Int32Array.from([0,0,0]);!s;){d=Int32Array.from([0,0,0]),l=i.findGuardPattern(a,c,!1,this.START_END_PATTERN,d);var f=l[0];c=l[1];var m=f-(c-f);m>=0&&(s=a.isRange(m,f,!1))}return l},i.checkChecksum=function(a){return i.checkStandardUPCEANChecksum(a)},i.checkStandardUPCEANChecksum=function(a){var s=a.length;if(s===0)return!1;var l=parseInt(a.charAt(s-1),10);return i.getStandardUPCEANChecksum(a.substring(0,s-1))===l},i.getStandardUPCEANChecksum=function(a){for(var s=a.length,l=0,c=s-1;c>=0;c-=2){var d=a.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new Ut;l+=d}l*=3;for(var c=s-2;c>=0;c-=2){var d=a.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new Ut;l+=d}return(1e3-l)%10},i.decodeEnd=function(a,s){return i.findGuardPattern(a,s,!1,i.START_END_PATTERN,new Int32Array(i.START_END_PATTERN.length).fill(0))},i.findGuardPatternWithoutCounters=function(a,s,l,c){return this.findGuardPattern(a,s,l,c,new Int32Array(c.length))},i.findGuardPattern=function(a,s,l,c,d){var f=a.getSize();s=l?a.getNextUnset(s):a.getNextSet(s);for(var m=0,g=s,v=c.length,y=l,A=s;A<f;A++)if(a.get(A)!==y)d[m]++;else{if(m===v-1){if(Vs.patternMatchVariance(d,c,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return Int32Array.from([g,A]);g+=d[0]+d[1];for(var w=d.slice(2,d.length),k=0;k<m-1;k++)d[k]=w[k];d[m-1]=0,d[m]=0,m--}else m++;d[m]=1,y=!y}throw new et},i.decodeDigit=function(a,s,l,c){this.recordPattern(a,l,s);for(var d=this.MAX_AVG_VARIANCE,f=-1,m=c.length,g=0;g<m;g++){var v=c[g],y=Vs.patternMatchVariance(s,v,i.MAX_INDIVIDUAL_VARIANCE);y<d&&(d=y,f=g)}if(f>=0)return f;throw new et},i.MAX_AVG_VARIANCE=.48,i.MAX_INDIVIDUAL_VARIANCE=.7,i.START_END_PATTERN=Int32Array.from([1,1,1]),i.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),i.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),i.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],i})(Vs),PF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},FF=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(i,a,s){var l=this.decodeRowStringBuffer,c=this.decodeMiddle(a,s,l),d=l.toString(),f=r.parseExtensionString(d),m=[new bn((s[0]+s[1])/2,i),new bn(c,i)],g=new Ho(d,null,0,m,Pn.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&g.putAllMetadata(f),g},r.prototype.decodeMiddle=function(i,a,s){var l,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=i.getSize(),m=a[1],g=0,v=0;v<5&&m<f;v++){var y=n2.decodeDigit(i,d,m,n2.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);try{for(var A=(l=void 0,PF(d)),w=A.next();!w.done;w=A.next()){var k=w.value;m+=k}}catch(I){l={error:I}}finally{try{w&&!w.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}y>=10&&(g|=1<<4-v),v!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(s.length!==5)throw new et;var E=this.determineCheckDigit(g);if(r.extensionChecksum(s.toString())!==E)throw new et;return m},r.extensionChecksum=function(i){for(var a=i.length,s=0,l=a-2;l>=0;l-=2)s+=i.charAt(l).charCodeAt(0)-48;s*=3;for(var l=a-1;l>=0;l-=2)s+=i.charAt(l).charCodeAt(0)-48;return s*=3,s%10},r.prototype.determineCheckDigit=function(i){for(var a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new et},r.parseExtensionString=function(i){if(i.length!==5)return null;var a=r.parseExtension5String(i);return a==null?null:new Map([[Ao.SUGGESTED_PRICE,a]])},r.parseExtension5String=function(i){var a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}var s=parseInt(i.substring(1)),l=(s/100).toString(),c=s%100,d=c<10?"0"+c:c.toString();return a+l+"."+d},r})(),UF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},LF=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(i,a,s){var l=this.decodeRowStringBuffer,c=this.decodeMiddle(a,s,l),d=l.toString(),f=r.parseExtensionString(d),m=[new bn((s[0]+s[1])/2,i),new bn(c,i)],g=new Ho(d,null,0,m,Pn.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&g.putAllMetadata(f),g},r.prototype.decodeMiddle=function(i,a,s){var l,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var f=i.getSize(),m=a[1],g=0,v=0;v<2&&m<f;v++){var y=n2.decodeDigit(i,d,m,n2.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);try{for(var A=(l=void 0,UF(d)),w=A.next();!w.done;w=A.next()){var k=w.value;m+=k}}catch(E){l={error:E}}finally{try{w&&!w.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}y>=10&&(g|=1<<1-v),v!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(s.length!==2)throw new et;if(parseInt(s.toString())%4!==g)throw new et;return m},r.parseExtensionString=function(i){return i.length!==2?null:new Map([[Ao.ISSUE_NUMBER,parseInt(i)]])},r})(),zF=(function(){function r(){}return r.decodeRow=function(i,a,s){var l=n2.findGuardPattern(a,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var c=new FF;return c.decodeRow(i,a,l)}catch{var d=new LF;return d.decodeRow(i,a,l)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),HF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Hs=(function(r){HF(i,r);function i(){var a=r.call(this)||this;a.decodeRowStringBuffer="",i.L_AND_G_PATTERNS=i.L_PATTERNS.map(function(f){return Int32Array.from(f)});for(var s=10;s<20;s++){for(var l=i.L_PATTERNS[s-10],c=new Int32Array(l.length),d=0;d<l.length;d++)c[d]=l[l.length-d-1];i.L_AND_G_PATTERNS[s]=c}return a}return i.prototype.decodeRow=function(a,s,l){var c=i.findStartGuardPattern(s),d=l==null?null:l.get(qa.NEED_RESULT_POINT_CALLBACK);if(d!=null){var f=new bn((c[0]+c[1])/2,a);d.foundPossibleResultPoint(f)}var m=this.decodeMiddle(s,c,this.decodeRowStringBuffer),g=m.rowOffset,v=m.resultString;if(d!=null){var y=new bn(g,a);d.foundPossibleResultPoint(y)}var A=i.decodeEnd(s,g);if(d!=null){var w=new bn((A[0]+A[1])/2,a);d.foundPossibleResultPoint(w)}var k=A[1],E=k+(k-A[0]);if(E>=s.getSize()||!s.isRange(k,E,!1))throw new et;var I=v.toString();if(I.length<8)throw new Ut;if(!i.checkChecksum(I))throw new ao;var T=(c[1]+c[0])/2,N=(A[1]+A[0])/2,j=this.getBarcodeFormat(),B=[new bn(T,a),new bn(N,a)],U=new Ho(I,null,0,B,j,new Date().getTime()),F=0;try{var P=zF.decodeRow(a,s,A[1]);U.putMetadata(Ao.UPC_EAN_EXTENSION,P.getText()),U.putAllMetadata(P.getResultMetadata()),U.addResultPoints(P.getResultPoints()),F=P.getText().length}catch{}var z=l==null?null:l.get(qa.ALLOWED_EAN_EXTENSIONS);if(z!=null){var V=!1;for(var L in z)if(F.toString()===L){V=!0;break}if(!V)throw new et}return j===Pn.EAN_13||Pn.UPC_A,U},i.checkChecksum=function(a){return i.checkStandardUPCEANChecksum(a)},i.checkStandardUPCEANChecksum=function(a){var s=a.length;if(s===0)return!1;var l=parseInt(a.charAt(s-1),10);return i.getStandardUPCEANChecksum(a.substring(0,s-1))===l},i.getStandardUPCEANChecksum=function(a){for(var s=a.length,l=0,c=s-1;c>=0;c-=2){var d=a.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new Ut;l+=d}l*=3;for(var c=s-2;c>=0;c-=2){var d=a.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new Ut;l+=d}return(1e3-l)%10},i.decodeEnd=function(a,s){return i.findGuardPattern(a,s,!1,i.START_END_PATTERN,new Int32Array(i.START_END_PATTERN.length).fill(0))},i})(n2),qF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),O8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},y4=(function(r){qF(i,r);function i(){var a=r.call(this)||this;return a.decodeMiddleCounters=Int32Array.from([0,0,0,0]),a}return i.prototype.decodeMiddle=function(a,s,l){var c,d,f,m,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var v=a.getSize(),y=s[1],A=0,w=0;w<6&&y<v;w++){var k=Hs.decodeDigit(a,g,y,Hs.L_AND_G_PATTERNS);l+=String.fromCharCode(48+k%10);try{for(var E=(c=void 0,O8(g)),I=E.next();!I.done;I=E.next()){var T=I.value;y+=T}}catch(U){c={error:U}}finally{try{I&&!I.done&&(d=E.return)&&d.call(E)}finally{if(c)throw c.error}}k>=10&&(A|=1<<5-w)}l=i.determineFirstDigit(l,A);var N=Hs.findGuardPattern(a,y,!0,Hs.MIDDLE_PATTERN,new Int32Array(Hs.MIDDLE_PATTERN.length).fill(0));y=N[1];for(var w=0;w<6&&y<v;w++){var k=Hs.decodeDigit(a,g,y,Hs.L_PATTERNS);l+=String.fromCharCode(48+k);try{for(var j=(f=void 0,O8(g)),B=j.next();!B.done;B=j.next()){var T=B.value;y+=T}}catch(P){f={error:P}}finally{try{B&&!B.done&&(m=j.return)&&m.call(j)}finally{if(f)throw f.error}}}return{rowOffset:y,resultString:l}},i.prototype.getBarcodeFormat=function(){return Pn.EAN_13},i.determineFirstDigit=function(a,s){for(var l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return a=String.fromCharCode(48+l)+a,a;throw new et},i.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],i})(Hs),GF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),D8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},j8=(function(r){GF(i,r);function i(){var a=r.call(this)||this;return a.decodeMiddleCounters=Int32Array.from([0,0,0,0]),a}return i.prototype.decodeMiddle=function(a,s,l){var c,d,f,m,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var v=a.getSize(),y=s[1],A=0;A<4&&y<v;A++){var w=Hs.decodeDigit(a,g,y,Hs.L_PATTERNS);l+=String.fromCharCode(48+w);try{for(var k=(c=void 0,D8(g)),E=k.next();!E.done;E=k.next()){var I=E.value;y+=I}}catch(B){c={error:B}}finally{try{E&&!E.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}}var T=Hs.findGuardPattern(a,y,!0,Hs.MIDDLE_PATTERN,new Int32Array(Hs.MIDDLE_PATTERN.length).fill(0));y=T[1];for(var A=0;A<4&&y<v;A++){var w=Hs.decodeDigit(a,g,y,Hs.L_PATTERNS);l+=String.fromCharCode(48+w);try{for(var N=(f=void 0,D8(g)),j=N.next();!j.done;j=N.next()){var I=j.value;y+=I}}catch(F){f={error:F}}finally{try{j&&!j.done&&(m=N.return)&&m.call(N)}finally{if(f)throw f.error}}}return{rowOffset:y,resultString:l}},i.prototype.getBarcodeFormat=function(){return Pn.EAN_8},i})(Hs),VF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),B8=(function(r){VF(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.ean13Reader=new y4,a}return i.prototype.getBarcodeFormat=function(){return Pn.UPC_A},i.prototype.decode=function(a,s){return this.maybeReturnResult(this.ean13Reader.decode(a))},i.prototype.decodeRow=function(a,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,s,l))},i.prototype.decodeMiddle=function(a,s,l){return this.ean13Reader.decodeMiddle(a,s,l)},i.prototype.maybeReturnResult=function(a){var s=a.getText();if(s.charAt(0)==="0"){var l=new Ho(s.substring(1),null,null,a.getResultPoints(),Pn.UPC_A);return a.getResultMetadata()!=null&&l.putAllMetadata(a.getResultMetadata()),l}else throw new et},i.prototype.reset=function(){this.ean13Reader.reset()},i})(Hs),YF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),QF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},P8=(function(r){YF(i,r);function i(){var a=r.call(this)||this;return a.decodeMiddleCounters=new Int32Array(4),a}return i.prototype.decodeMiddle=function(a,s,l){var c,d,f=this.decodeMiddleCounters.map(function(I){return I});f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var m=a.getSize(),g=s[1],v=0,y=0;y<6&&g<m;y++){var A=i.decodeDigit(a,f,g,i.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);try{for(var w=(c=void 0,QF(f)),k=w.next();!k.done;k=w.next()){var E=k.value;g+=E}}catch(I){c={error:I}}finally{try{k&&!k.done&&(d=w.return)&&d.call(w)}finally{if(c)throw c.error}}A>=10&&(v|=1<<5-y)}return i.determineNumSysAndCheckDigit(new ji(l),v),g},i.prototype.decodeEnd=function(a,s){return i.findGuardPatternWithoutCounters(a,s,!0,i.MIDDLE_END_PATTERN)},i.prototype.checkChecksum=function(a){return Hs.checkChecksum(i.convertUPCEtoUPCA(a))},i.determineNumSysAndCheckDigit=function(a,s){for(var l=0;l<=1;l++)for(var c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){a.insert(0,"0"+l),a.append("0"+c);return}throw et.getNotFoundInstance()},i.prototype.getBarcodeFormat=function(){return Pn.UPC_E},i.convertUPCEtoUPCA=function(a){var s=a.slice(1,7).split("").map(function(d){return d.charCodeAt(0)}),l=new ji;l.append(a.charAt(0));var c=s[5];switch(c){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(c),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(c);break}return a.length>=8&&l.append(a.charAt(7)),l.toString()},i.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),i.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],i})(Hs),$F=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),F8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},oy=(function(r){$F(i,r);function i(a){var s=r.call(this)||this,l=a==null?null:a.get(qa.POSSIBLE_FORMATS),c=[];return l!=null&&(l.indexOf(Pn.EAN_13)>-1&&c.push(new y4),l.indexOf(Pn.UPC_A)>-1&&c.push(new B8),l.indexOf(Pn.EAN_8)>-1&&c.push(new j8),l.indexOf(Pn.UPC_E)>-1&&c.push(new P8)),c.length===0&&(c.push(new y4),c.push(new B8),c.push(new j8),c.push(new P8)),s.readers=c,s}return i.prototype.decodeRow=function(a,s,l){var c,d;try{for(var f=F8(this.readers),m=f.next();!m.done;m=f.next()){var g=m.value;try{var v=g.decodeRow(a,s,l),y=v.getBarcodeFormat()===Pn.EAN_13&&v.getText().charAt(0)==="0",A=l==null?null:l.get(qa.POSSIBLE_FORMATS),w=A==null||A.includes(Pn.UPC_A);if(y&&w){var k=v.getRawBytes(),E=new Ho(v.getText().substring(1),k,k?k.length:null,v.getResultPoints(),Pn.UPC_A);return E.putAllMetadata(v.getResultMetadata()),E}return v}catch{}}}catch(I){c={error:I}}finally{try{m&&!m.done&&(d=f.return)&&d.call(f)}finally{if(c)throw c.error}}throw new et},i.prototype.reset=function(){var a,s;try{for(var l=F8(this.readers),c=l.next();!c.done;c=l.next()){var d=c.value;d.reset()}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},i})(Vs),WF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),XF=(function(r){WF(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},a}return i.prototype.decodeRow=function(a,s,l){var c=this.getValidRowData(s);if(!c)throw new et;var d=this.codaBarDecodeRow(c.row);if(!d)throw new et;return new Ho(d,null,0,[new bn(c.left,a),new bn(c.right,a)],Pn.CODABAR,new Date().getTime())},i.prototype.getValidRowData=function(a){var s=a.toArray(),l=s.indexOf(!0);if(l===-1)return null;var c=s.lastIndexOf(!0);if(c<=l)return null;s=s.slice(l,c+1);for(var d=[],f=s[0],m=1,g=1;g<s.length;g++)s[g]===f?m++:(f=s[g],d.push(m),m=1);return d.push(m),d.length<23&&(d.length+1)%8!==0?null:{row:d,left:l,right:c}},i.prototype.codaBarDecodeRow=function(a){for(var s=[],l=Math.ceil(a.reduce(function(m,g){return(m+g)/2},0));a.length>0;){var c=a.splice(0,8).splice(0,7),d=c.map(function(m){return m<l?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[d]===void 0)return null;s.push(this.CODA_BAR_CHAR_SET[d])}var f=s.join("");return this.validCodaBarString(f)?f:null},i.prototype.validCodaBarString=function(a){var s=/^[A-D].{1,}[A-D]$/;return s.test(a)},i})(Vs),KF=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),JF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Nu=(function(r){KF(i,r);function i(){var a=r.call(this)||this;return a.decodeFinderCounters=new Int32Array(4),a.dataCharacterCounters=new Int32Array(8),a.oddRoundingErrors=new Array(4),a.evenRoundingErrors=new Array(4),a.oddCounts=new Array(a.dataCharacterCounters.length/2),a.evenCounts=new Array(a.dataCharacterCounters.length/2),a}return i.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},i.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},i.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},i.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},i.prototype.getOddCounts=function(){return this.oddCounts},i.prototype.getEvenCounts=function(){return this.evenCounts},i.prototype.parseFinderValue=function(a,s){for(var l=0;l<s.length;l++)if(Vs.patternMatchVariance(a,s[l],i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return l;throw new et},i.count=function(a){return _r.sum(new Int32Array(a))},i.increment=function(a,s){for(var l=0,c=s[0],d=1;d<a.length;d++)s[d]>c&&(c=s[d],l=d);a[l]++},i.decrement=function(a,s){for(var l=0,c=s[0],d=1;d<a.length;d++)s[d]<c&&(c=s[d],l=d);a[l]--},i.isFinderPattern=function(a){var s,l,c=a[0]+a[1],d=c+a[2]+a[3],f=c/d;if(f>=i.MIN_FINDER_PATTERN_RATIO&&f<=i.MAX_FINDER_PATTERN_RATIO){var m=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;try{for(var v=JF(a),y=v.next();!y.done;y=v.next()){var A=y.value;A>g&&(g=A),A<m&&(m=A)}}catch(w){s={error:w}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}return g<10*m}return!1},i.MAX_AVG_VARIANCE=.2,i.MAX_INDIVIDUAL_VARIANCE=.45,i.MIN_FINDER_PATTERN_RATIO=9.5/12,i.MAX_FINDER_PATTERN_RATIO=12.5/14,i})(Vs),X3=(function(){function r(i,a){this.value=i,this.checksumPortion=a}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),T7=(function(){function r(i,a,s,l,c){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new bn(s,c)),this.resultPoints.push(new bn(l,c))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.value===a.value},r.prototype.hashCode=function(){return this.value},r})(),ZF=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},jh=(function(){function r(){}return r.getRSSvalue=function(i,a,s){var l,c,d=0;try{for(var f=ZF(i),m=f.next();!m.done;m=f.next()){var g=m.value;d+=g}}catch(N){l={error:N}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}for(var v=0,y=0,A=i.length,w=0;w<A-1;w++){var k=void 0;for(k=1,y|=1<<w;k<i[w];k++,y&=~(1<<w)){var E=r.combins(d-k-1,A-w-2);if(s&&y===0&&d-k-(A-w-1)>=A-w-1&&(E-=r.combins(d-k-(A-w),A-w-2)),A-w-1>1){for(var I=0,T=d-k-(A-w-2);T>a;T--)I+=r.combins(d-k-T-1,A-w-3);E-=I*(A-1-w)}else d-k>a&&E--;v+=E}d-=k}return v},r.combins=function(i,a){var s,l;i-a>a?(l=a,s=i-a):(l=i-a,s=a);for(var c=1,d=1,f=i;f>s;f--)c*=f,d<=l&&(c/=d,d++);for(;d<=l;)c/=d,d++;return c},r})(),eU=(function(){function r(){}return r.buildBitArray=function(i){var a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);for(var s=12*a,l=new so(s),c=0,d=i[0],f=d.getRightChar().getValue(),m=11;m>=0;--m)(f&1<<m)!==0&&l.set(c),c++;for(var m=1;m<i.length;++m){for(var g=i[m],v=g.getLeftChar().getValue(),y=11;y>=0;--y)(v&1<<y)!==0&&l.set(c),c++;if(g.getRightChar()!==null)for(var A=g.getRightChar().getValue(),y=11;y>=0;--y)(A&1<<y)!==0&&l.set(c),c++}return l},r})(),ku=(function(){function r(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),Mw=(function(){function r(i){this.newPosition=i}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),tU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),S1=(function(r){tU(i,r);function i(a,s){var l=r.call(this,a)||this;return l.value=s,l}return i.prototype.getValue=function(){return this.value},i.prototype.isFNC1=function(){return this.value===i.FNC1},i.FNC1="$",i})(Mw),nU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Cu=(function(r){nU(i,r);function i(a,s,l){var c=r.call(this,a)||this;return l?(c.remaining=!0,c.remainingValue=c.remainingValue):(c.remaining=!1,c.remainingValue=0),c.newString=s,c}return i.prototype.getNewString=function(){return this.newString},i.prototype.isRemaining=function(){return this.remaining},i.prototype.getRemainingValue=function(){return this.remainingValue},i})(Mw),iU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),kh=(function(r){iU(i,r);function i(a,s,l){var c=r.call(this,a)||this;if(s<0||s>10||l<0||l>10)throw new Ut;return c.firstDigit=s,c.secondDigit=l,c}return i.prototype.getFirstDigit=function(){return this.firstDigit},i.prototype.getSecondDigit=function(){return this.secondDigit},i.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},i.prototype.isFirstDigitFNC1=function(){return this.firstDigit===i.FNC1},i.prototype.isSecondDigitFNC1=function(){return this.secondDigit===i.FNC1},i.prototype.isAnyFNC1=function(){return this.firstDigit===i.FNC1||this.secondDigit===i.FNC1},i.FNC1=10,i})(Mw),d3=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},rU=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(i){var a,s,l,c,d,f,m,g;if(!i)return null;if(i.length<2)throw new et;var v=i.substring(0,2);try{for(var y=d3(r.TWO_DIGIT_DATA_LENGTH),A=y.next();!A.done;A=y.next()){var w=A.value;if(w[0]===v)return w[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,w[2],i):r.processFixedAI(2,w[1],i)}}catch(F){a={error:F}}finally{try{A&&!A.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}if(i.length<3)throw new et;var k=i.substring(0,3);try{for(var E=d3(r.THREE_DIGIT_DATA_LENGTH),I=E.next();!I.done;I=E.next()){var w=I.value;if(w[0]===k)return w[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,w[2],i):r.processFixedAI(3,w[1],i)}}catch(F){l={error:F}}finally{try{I&&!I.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}try{for(var T=d3(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),N=T.next();!N.done;N=T.next()){var w=N.value;if(w[0]===k)return w[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,w[2],i):r.processFixedAI(4,w[1],i)}}catch(F){d={error:F}}finally{try{N&&!N.done&&(f=T.return)&&f.call(T)}finally{if(d)throw d.error}}if(i.length<4)throw new et;var j=i.substring(0,4);try{for(var B=d3(r.FOUR_DIGIT_DATA_LENGTH),U=B.next();!U.done;U=B.next()){var w=U.value;if(w[0]===j)return w[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,w[2],i):r.processFixedAI(4,w[1],i)}}catch(F){m={error:F}}finally{try{U&&!U.done&&(g=B.return)&&g.call(B)}finally{if(m)throw m.error}}throw new et},r.processFixedAI=function(i,a,s){if(s.length<i)throw new et;var l=s.substring(0,i);if(s.length<i+a)throw new et;var c=s.substring(i,i+a),d=s.substring(i+a),f="("+l+")"+c,m=r.parseFieldsInGeneralPurpose(d);return m==null?f:f+m},r.processVariableAI=function(i,a,s){var l=s.substring(0,i),c;s.length<i+a?c=s.length:c=i+a;var d=s.substring(i,c),f=s.substring(c),m="("+l+")"+d,g=r.parseFieldsInGeneralPurpose(f);return g==null?m:m+g},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),I3=(function(){function r(i){this.buffer=new ji,this.information=i}return r.prototype.decodeAllCodes=function(i,a){var s=a,l=null;do{var c=this.decodeGeneralPurposeField(s,l),d=rU.parseFieldsInGeneralPurpose(c.getNewString());if(d!=null&&i.append(d),c.isRemaining()?l=""+c.getRemainingValue():l=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return i.toString()},r.prototype.isStillNumeric=function(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(var a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)},r.prototype.decodeNumeric=function(i){if(i+7>this.information.getSize()){var a=this.extractNumericValueFromBitArray(i,4);return a===0?new kh(this.information.getSize(),kh.FNC1,kh.FNC1):new kh(this.information.getSize(),a-1,kh.FNC1)}var s=this.extractNumericValueFromBitArray(i,7),l=(s-8)/11,c=(s-8)%11;return new kh(i+7,l,c)},r.prototype.extractNumericValueFromBitArray=function(i,a){return r.extractNumericValueFromBitArray(this.information,i,a)},r.extractNumericValueFromBitArray=function(i,a,s){for(var l=0,c=0;c<s;++c)i.get(a+c)&&(l|=1<<s-c-1);return l},r.prototype.decodeGeneralPurposeField=function(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);var s=this.parseBlocks();return s!=null&&s.isRemaining()?new Cu(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Cu(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var i,a;do{var s=this.current.getPosition();this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished());var l=s!==this.current.getPosition();if(!l&&!i)break}while(!i);return a.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){var a=void 0;return i.isSecondDigitFNC1()?a=new Cu(this.current.getPosition(),this.buffer.toString()):a=new Cu(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new ku(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){var a=new Cu(this.current.getPosition(),this.buffer.toString());return new ku(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ku(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){var a=new Cu(this.current.getPosition(),this.buffer.toString());return new ku(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ku(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){var a=new Cu(this.current.getPosition(),this.buffer.toString());return new ku(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ku(!1)},r.prototype.isStillIsoIec646=function(i){if(i+5>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(i,7);if(s>=64&&s<116)return!0;if(i+8>this.information.getSize())return!1;var l=this.extractNumericValueFromBitArray(i,8);return l>=232&&l<253},r.prototype.decodeIsoIec646=function(i){var a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new S1(i+5,S1.FNC1);if(a>=5&&a<15)return new S1(i+5,"0"+(a-5));var s=this.extractNumericValueFromBitArray(i,7);if(s>=64&&s<90)return new S1(i+7,""+(s+1));if(s>=90&&s<116)return new S1(i+7,""+(s+7));var l=this.extractNumericValueFromBitArray(i,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new Ut}return new S1(i+8,c)},r.prototype.isStillAlpha=function(i){if(i+5>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(i,6);return s>=16&&s<63},r.prototype.decodeAlphanumeric=function(i){var a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new S1(i+5,S1.FNC1);if(a>=5&&a<15)return new S1(i+5,"0"+(a-5));var s=this.extractNumericValueFromBitArray(i,6);if(s>=32&&s<58)return new S1(i+6,""+(s+33));var l;switch(s){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Xm("Decoding invalid alphanumeric value: "+s)}return new S1(i+6,l)},r.prototype.isAlphaTo646ToAlphaLatch=function(i){if(i+1>this.information.getSize())return!1;for(var a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(i){if(i+3>this.information.getSize())return!1;for(var a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(i){if(i+1>this.information.getSize())return!1;for(var a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0},r})(),M7=(function(){function r(i){this.information=i,this.generalDecoder=new I3(i)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),aU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),N1=(function(r){aU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.encodeCompressedGtin=function(a,s){a.append("(01)");var l=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,s,l)},i.prototype.encodeCompressedGtinWithoutAI=function(a,s,l){for(var c=0;c<4;++c){var d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);d/100===0&&a.append("0"),d/10===0&&a.append("0"),a.append(d)}i.appendCheckDigit(a,l)},i.appendCheckDigit=function(a,s){for(var l=0,c=0;c<13;c++){var d=a.charAt(c+s).charCodeAt(0)-48;l+=(c&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),a.append(l)},i.GTIN_SIZE=40,i})(M7),sU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),oU=(function(r){sU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.parseInformation=function(){var a=new ji;a.append("(01)");var s=a.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE,4);return a.append(l),this.encodeCompressedGtinWithoutAI(a,i.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(a,i.HEADER_SIZE+44)},i.HEADER_SIZE=4,i})(N1),lU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),cU=(function(r){lU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.parseInformation=function(){var a=new ji;return this.getGeneralDecoder().decodeAllCodes(a,i.HEADER_SIZE)},i.HEADER_SIZE=5,i})(M7),dU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),N3=(function(r){dU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.encodeCompressedWeight=function(a,s,l){var c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(a,c);for(var d=this.checkWeight(c),f=1e5,m=0;m<5;++m)d/f===0&&a.append("0"),f/=10;a.append(d)},i})(N1),uU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),R7=(function(r){uU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.parseInformation=function(){if(this.getInformation().getSize()!==i.HEADER_SIZE+N3.GTIN_SIZE+i.WEIGHT_SIZE)throw new et;var a=new ji;return this.encodeCompressedGtin(a,i.HEADER_SIZE),this.encodeCompressedWeight(a,i.HEADER_SIZE+N3.GTIN_SIZE,i.WEIGHT_SIZE),a.toString()},i.HEADER_SIZE=5,i.WEIGHT_SIZE=15,i})(N3),fU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),hU=(function(r){fU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.addWeightCode=function(a,s){a.append("(3103)")},i.prototype.checkWeight=function(a){return a},i})(R7),pU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),mU=(function(r){pU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.addWeightCode=function(a,s){s<1e4?a.append("(3202)"):a.append("(3203)")},i.prototype.checkWeight=function(a){return a<1e4?a:a-1e4},i})(R7),gU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),vU=(function(r){gU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.parseInformation=function(){if(this.getInformation().getSize()<i.HEADER_SIZE+N1.GTIN_SIZE)throw new et;var a=new ji;this.encodeCompressedGtin(a,i.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE+N1.GTIN_SIZE,i.LAST_DIGIT_SIZE);a.append("(392"),a.append(s),a.append(")");var l=this.getGeneralDecoder().decodeGeneralPurposeField(i.HEADER_SIZE+N1.GTIN_SIZE+i.LAST_DIGIT_SIZE,null);return a.append(l.getNewString()),a.toString()},i.HEADER_SIZE=8,i.LAST_DIGIT_SIZE=2,i})(N1),xU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),bU=(function(r){xU(i,r);function i(a){return r.call(this,a)||this}return i.prototype.parseInformation=function(){if(this.getInformation().getSize()<i.HEADER_SIZE+N1.GTIN_SIZE)throw new et;var a=new ji;this.encodeCompressedGtin(a,i.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE+N1.GTIN_SIZE,i.LAST_DIGIT_SIZE);a.append("(393"),a.append(s),a.append(")");var l=this.getGeneralDecoder().extractNumericValueFromBitArray(i.HEADER_SIZE+N1.GTIN_SIZE+i.LAST_DIGIT_SIZE,i.FIRST_THREE_DIGITS_SIZE);l/100===0&&a.append("0"),l/10===0&&a.append("0"),a.append(l);var c=this.getGeneralDecoder().decodeGeneralPurposeField(i.HEADER_SIZE+N1.GTIN_SIZE+i.LAST_DIGIT_SIZE+i.FIRST_THREE_DIGITS_SIZE,null);return a.append(c.getNewString()),a.toString()},i.HEADER_SIZE=8,i.LAST_DIGIT_SIZE=2,i.FIRST_THREE_DIGITS_SIZE=10,i})(N1),yU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),pd=(function(r){yU(i,r);function i(a,s,l){var c=r.call(this,a)||this;return c.dateCode=l,c.firstAIdigits=s,c}return i.prototype.parseInformation=function(){if(this.getInformation().getSize()!==i.HEADER_SIZE+i.GTIN_SIZE+i.WEIGHT_SIZE+i.DATE_SIZE)throw new et;var a=new ji;return this.encodeCompressedGtin(a,i.HEADER_SIZE),this.encodeCompressedWeight(a,i.HEADER_SIZE+i.GTIN_SIZE,i.WEIGHT_SIZE),this.encodeCompressedDate(a,i.HEADER_SIZE+i.GTIN_SIZE+i.WEIGHT_SIZE),a.toString()},i.prototype.encodeCompressedDate=function(a,s){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,i.DATE_SIZE);if(l!==38400){a.append("("),a.append(this.dateCode),a.append(")");var c=l%32;l/=32;var d=l%12+1;l/=12;var f=l;f/10===0&&a.append("0"),a.append(f),d/10===0&&a.append("0"),a.append(d),c/10===0&&a.append("0"),a.append(c)}},i.prototype.addWeightCode=function(a,s){a.append("("),a.append(this.firstAIdigits),a.append(s/1e5),a.append(")")},i.prototype.checkWeight=function(a){return a%1e5},i.HEADER_SIZE=8,i.WEIGHT_SIZE=20,i.DATE_SIZE=16,i})(N3);function wU(r){try{if(r.get(1))return new oU(r);if(!r.get(2))return new cU(r);var i=I3.extractNumericValueFromBitArray(r,1,4);switch(i){case 4:return new hU(r);case 5:return new mU(r)}var a=I3.extractNumericValueFromBitArray(r,1,5);switch(a){case 12:return new vU(r);case 13:return new bU(r)}var s=I3.extractNumericValueFromBitArray(r,1,7);switch(s){case 56:return new pd(r,"310","11");case 57:return new pd(r,"320","11");case 58:return new pd(r,"310","13");case 59:return new pd(r,"320","13");case 60:return new pd(r,"310","15");case 61:return new pd(r,"320","15");case 62:return new pd(r,"310","17");case 63:return new pd(r,"320","17")}}catch(l){throw console.log(l),new Xm("unknown decoder: "+r)}}var U8=(function(){function r(i,a,s,l){this.leftchar=i,this.rightchar=a,this.finderpattern=s,this.maybeLast=l}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(i,a){return i instanceof r?r.equalsOrNull(i.leftchar,a.leftchar)&&r.equalsOrNull(i.rightchar,a.rightchar)&&r.equalsOrNull(i.finderpattern,a.finderpattern):!1},r.equalsOrNull=function(i,a){return i===null?a===null:r.equals(i,a)},r.prototype.hashCode=function(){var i=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return i},r})(),AU=(function(){function r(i,a,s){this.pairs=i,this.rowNumber=a,this.wasReversed=s}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(i){return this.checkEqualitity(this,i)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(i,a){return i instanceof r?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1},r.prototype.checkEqualitity=function(i,a){if(!(!i||!a)){var s;return i.forEach(function(l,c){a.forEach(function(d){l.getLeftChar().getValue()===d.getLeftChar().getValue()&&l.getRightChar().getValue()===d.getRightChar().getValue()&&l.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(s=!0)})}),s}},r})(),SU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),md=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},kU=(function(r){SU(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.pairs=new Array(i.MAX_PAIRS),a.rows=new Array,a.startEnd=[2],a}return i.prototype.decodeRow=function(a,s,l){this.pairs.length=0,this.startFromEven=!1;try{return i.constructResult(this.decodeRow2pairs(a,s))}catch{}return this.pairs.length=0,this.startFromEven=!0,i.constructResult(this.decodeRow2pairs(a,s))},i.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},i.prototype.decodeRow2pairs=function(a,s){for(var l=!1;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,a))}catch(f){if(f instanceof et){if(!this.pairs.length)throw new et;l=!0}}if(this.checkChecksum())return this.pairs;var c;if(this.rows.length?c=!0:c=!1,this.storeRow(a,!1),c){var d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new et},i.prototype.checkRowsBoolean=function(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());var s=null;try{s=this.checkRows(new Array,0)}catch(l){console.log(l)}return a&&(this.rows=this.rows.reverse()),s},i.prototype.checkRows=function(a,s){for(var l,c,d=s;d<this.rows.length;d++){var f=this.rows[d];this.pairs.length=0;try{for(var m=(l=void 0,md(a)),g=m.next();!g.done;g=m.next()){var v=g.value;this.pairs.push(v.getPairs())}}catch(A){l={error:A}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}if(this.pairs.push(f.getPairs()),!!i.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var y=new Array(a);y.push(f);try{return this.checkRows(y,d+1)}catch(A){console.log(A)}}}throw new et},i.isValidSequence=function(a){var s,l;try{for(var c=md(i.FINDER_PATTERN_SEQUENCES),d=c.next();!d.done;d=c.next()){var f=d.value;if(!(a.length>f.length)){for(var m=!0,g=0;g<a.length;g++)if(a[g].getFinderPattern().getValue()!==f[g]){m=!1;break}if(m)return!0}}}catch(v){s={error:v}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}return!1},i.prototype.storeRow=function(a,s){for(var l=0,c=!1,d=!1;l<this.rows.length;){var f=this.rows[l];if(f.getRowNumber()>a){d=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),l++}d||c||i.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new AU(this.pairs,a,s)),this.removePartialRows(this.pairs,this.rows))},i.prototype.removePartialRows=function(a,s){var l,c,d,f,m,g;try{for(var v=md(s),y=v.next();!y.done;y=v.next()){var A=y.value;if(A.getPairs().length!==a.length){var w=!0;try{for(var k=(d=void 0,md(A.getPairs())),E=k.next();!E.done;E=k.next()){var I=E.value,T=!1;try{for(var N=(m=void 0,md(a)),j=N.next();!j.done;j=N.next()){var B=j.value;if(U8.equals(I,B)){T=!0;break}}}catch(U){m={error:U}}finally{try{j&&!j.done&&(g=N.return)&&g.call(N)}finally{if(m)throw m.error}}T||(w=!1)}}catch(U){d={error:U}}finally{try{E&&!E.done&&(f=k.return)&&f.call(k)}finally{if(d)throw d.error}}}}}catch(U){l={error:U}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}},i.isPartialRow=function(a,s){var l,c,d,f,m,g;try{for(var v=md(s),y=v.next();!y.done;y=v.next()){var A=y.value,w=!0;try{for(var k=(d=void 0,md(a)),E=k.next();!E.done;E=k.next()){var I=E.value,T=!1;try{for(var N=(m=void 0,md(A.getPairs())),j=N.next();!j.done;j=N.next()){var B=j.value;if(I.equals(B)){T=!0;break}}}catch(U){m={error:U}}finally{try{j&&!j.done&&(g=N.return)&&g.call(N)}finally{if(m)throw m.error}}if(!T){w=!1;break}}}catch(U){d={error:U}}finally{try{E&&!E.done&&(f=k.return)&&f.call(k)}finally{if(d)throw d.error}}if(w)return!0}}catch(U){l={error:U}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}return!1},i.prototype.getRows=function(){return this.rows},i.constructResult=function(a){var s=eU.buildBitArray(a),l=wU(s),c=l.parseInformation(),d=a[0].getFinderPattern().getResultPoints(),f=a[a.length-1].getFinderPattern().getResultPoints(),m=[d[0],d[1],f[0],f[1]];return new Ho(c,null,null,m,Pn.RSS_EXPANDED,null)},i.prototype.checkChecksum=function(){var a=this.pairs.get(0),s=a.getLeftChar(),l=a.getRightChar();if(l===null)return!1;for(var c=l.getChecksumPortion(),d=2,f=1;f<this.pairs.size();++f){var m=this.pairs.get(f);c+=m.getLeftChar().getChecksumPortion(),d++;var g=m.getRightChar();g!=null&&(c+=g.getChecksumPortion(),d++)}c%=211;var v=211*(d-4)+c;return v===s.getValue()},i.getNextSecondBar=function(a,s){var l;return a.get(s)?(l=a.getNextUnset(s),l=a.getNextSet(l)):(l=a.getNextSet(s),l=a.getNextUnset(l)),l},i.prototype.retrieveNextPair=function(a,s,l){var c=s.length%2===0;this.startFromEven&&(c=!c);var d,f=!0,m=-1;do this.findNextPair(a,s,m),d=this.parseFoundFinderPattern(a,l,c),d===null?m=i.getNextSecondBar(a,this.startEnd[0]):f=!1;while(f);var g=this.decodeDataCharacter(a,d,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new et;var v;try{v=this.decodeDataCharacter(a,d,c,!1)}catch(y){v=null,console.log(y)}return new U8(g,v,d,!0)},i.prototype.isEmptyPair=function(a){return a.length===0},i.prototype.findNextPair=function(a,s,l){var c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;var d=a.getSize(),f;if(l>=0)f=l;else if(this.isEmptyPair(s))f=0;else{var m=s[s.length-1];f=m.getFinderPattern().getStartEnd()[1]}var g=s.length%2!==0;this.startFromEven&&(g=!g);for(var v=!1;f<d&&(v=!a.get(f),!!v);)f++;for(var y=0,A=f,w=f;w<d;w++)if(a.get(w)!==v)c[y]++;else{if(y===3){if(g&&i.reverseCounters(c),i.isFinderPattern(c)){this.startEnd[0]=A,this.startEnd[1]=w;return}g&&i.reverseCounters(c),A+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,v=!v}throw new et},i.reverseCounters=function(a){for(var s=a.length,l=0;l<s/2;++l){var c=a[l];a[l]=a[s-l-1],a[s-l-1]=c}},i.prototype.parseFoundFinderPattern=function(a,s,l){var c,d,f;if(l){for(var m=this.startEnd[0]-1;m>=0&&!a.get(m);)m--;m++,c=this.startEnd[0]-m,d=m,f=this.startEnd[1]}else d=this.startEnd[0],f=a.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];var g=this.getDecodeFinderCounters();Ca.arraycopy(g,0,g,1,g.length-1),g[0]=c;var v;try{v=this.parseFinderValue(g,i.FINDER_PATTERNS)}catch{return null}return new T7(v,[d,f],d,f,s)},i.prototype.decodeDataCharacter=function(a,s,l,c){for(var d=this.getDataCharacterCounters(),f=0;f<d.length;f++)d[f]=0;if(c)i.recordPatternInReverse(a,s.getStartEnd()[0],d);else{i.recordPattern(a,s.getStartEnd()[1],d);for(var m=0,g=d.length-1;m<g;m++,g--){var v=d[m];d[m]=d[g],d[g]=v}}var y=17,A=_r.sum(new Int32Array(d))/y,w=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(A-w)/w>.3)throw new et;for(var k=this.getOddCounts(),E=this.getEvenCounts(),I=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),m=0;m<d.length;m++){var N=1*d[m]/A,j=N+.5;if(j<1){if(N<.3)throw new et;j=1}else if(j>8){if(N>8.7)throw new et;j=8}var B=m/2;(m&1)===0?(k[B]=j,I[B]=N-j):(E[B]=j,T[B]=N-j)}this.adjustOddEvenCounts(y);for(var U=4*s.getValue()+(l?0:2)+(c?0:1)-1,F=0,P=0,m=k.length-1;m>=0;m--){if(i.isNotA1left(s,l,c)){var z=i.WEIGHTS[U][2*m];P+=k[m]*z}F+=k[m]}for(var V=0,m=E.length-1;m>=0;m--)if(i.isNotA1left(s,l,c)){var z=i.WEIGHTS[U][2*m+1];V+=E[m]*z}var L=P+V;if((F&1)!==0||F>13||F<4)throw new et;var Q=(13-F)/2,q=i.SYMBOL_WIDEST[Q],ee=9-q,X=jh.getRSSvalue(k,q,!0),ae=jh.getRSSvalue(E,ee,!1),K=i.EVEN_TOTAL_SUBSET[Q],ie=i.GSUM[Q],ne=X*K+ae+ie;return new X3(ne,L)},i.isNotA1left=function(a,s,l){return!(a.getValue()===0&&s&&l)},i.prototype.adjustOddEvenCounts=function(a){var s=_r.sum(new Int32Array(this.getOddCounts())),l=_r.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;s>13?d=!0:s<4&&(c=!0);var f=!1,m=!1;l>13?m=!0:l<4&&(f=!0);var g=s+l-a,v=(s&1)===1,y=(l&1)===0;if(g===1)if(v){if(y)throw new et;d=!0}else{if(!y)throw new et;m=!0}else if(g===-1)if(v){if(y)throw new et;c=!0}else{if(!y)throw new et;f=!0}else if(g===0){if(v){if(!y)throw new et;s<l?(c=!0,m=!0):(d=!0,f=!0)}else if(y)throw new et}else throw new et;if(c){if(d)throw new et;i.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&i.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new et;i.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&i.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},i.SYMBOL_WIDEST=[7,5,4,3,1],i.EVEN_TOTAL_SUBSET=[4,20,52,104,204],i.GSUM=[0,348,1388,2948,3988],i.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],i.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],i.FINDER_PAT_A=0,i.FINDER_PAT_B=1,i.FINDER_PAT_C=2,i.FINDER_PAT_D=3,i.FINDER_PAT_E=4,i.FINDER_PAT_F=5,i.FINDER_PATTERN_SEQUENCES=[[i.FINDER_PAT_A,i.FINDER_PAT_A],[i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B],[i.FINDER_PAT_A,i.FINDER_PAT_C,i.FINDER_PAT_B,i.FINDER_PAT_D],[i.FINDER_PAT_A,i.FINDER_PAT_E,i.FINDER_PAT_B,i.FINDER_PAT_D,i.FINDER_PAT_C],[i.FINDER_PAT_A,i.FINDER_PAT_E,i.FINDER_PAT_B,i.FINDER_PAT_D,i.FINDER_PAT_D,i.FINDER_PAT_F],[i.FINDER_PAT_A,i.FINDER_PAT_E,i.FINDER_PAT_B,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_F,i.FINDER_PAT_F],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_D],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_E],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_F,i.FINDER_PAT_F],[i.FINDER_PAT_A,i.FINDER_PAT_A,i.FINDER_PAT_B,i.FINDER_PAT_B,i.FINDER_PAT_C,i.FINDER_PAT_D,i.FINDER_PAT_D,i.FINDER_PAT_E,i.FINDER_PAT_E,i.FINDER_PAT_F,i.FINDER_PAT_F]],i.MAX_PAIRS=11,i})(Nu),CU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),EU=(function(r){CU(i,r);function i(a,s,l){var c=r.call(this,a,s)||this;return c.count=0,c.finderPattern=l,c}return i.prototype.getFinderPattern=function(){return this.finderPattern},i.prototype.getCount=function(){return this.count},i.prototype.incrementCount=function(){this.count++},i})(X3),_U=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),ly=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},L8=(function(r){_U(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.possibleLeftPairs=[],a.possibleRightPairs=[],a}return i.prototype.decodeRow=function(a,s,l){var c,d,f,m,g=this.decodePair(s,!1,a,l);i.addOrTally(this.possibleLeftPairs,g),s.reverse();var v=this.decodePair(s,!0,a,l);i.addOrTally(this.possibleRightPairs,v),s.reverse();try{for(var y=ly(this.possibleLeftPairs),A=y.next();!A.done;A=y.next()){var w=A.value;if(w.getCount()>1)try{for(var k=(f=void 0,ly(this.possibleRightPairs)),E=k.next();!E.done;E=k.next()){var I=E.value;if(I.getCount()>1&&i.checkChecksum(w,I))return i.constructResult(w,I)}}catch(T){f={error:T}}finally{try{E&&!E.done&&(m=k.return)&&m.call(k)}finally{if(f)throw f.error}}}}catch(T){c={error:T}}finally{try{A&&!A.done&&(d=y.return)&&d.call(y)}finally{if(c)throw c.error}}throw new et},i.addOrTally=function(a,s){var l,c;if(s!=null){var d=!1;try{for(var f=ly(a),m=f.next();!m.done;m=f.next()){var g=m.value;if(g.getValue()===s.getValue()){g.incrementCount(),d=!0;break}}}catch(v){l={error:v}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}d||a.push(s)}},i.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},i.constructResult=function(a,s){for(var l=4537077*a.getValue()+s.getValue(),c=new String(l).toString(),d=new ji,f=13-c.length;f>0;f--)d.append("0");d.append(c);for(var m=0,f=0;f<13;f++){var g=d.charAt(f).charCodeAt(0)-48;m+=(f&1)===0?3*g:g}m=10-m%10,m===10&&(m=0),d.append(m.toString());var v=a.getFinderPattern().getResultPoints(),y=s.getFinderPattern().getResultPoints();return new Ho(d.toString(),null,0,[v[0],v[1],y[0],y[1]],Pn.RSS_14,new Date().getTime())},i.checkChecksum=function(a,s){var l=(a.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*a.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c},i.prototype.decodePair=function(a,s,l,c){try{var d=this.findFinderPattern(a,s),f=this.parseFoundFinderPattern(a,l,s,d),m=c==null?null:c.get(qa.NEED_RESULT_POINT_CALLBACK);if(m!=null){var g=(d[0]+d[1])/2;s&&(g=a.getSize()-1-g),m.foundPossibleResultPoint(new bn(g,l))}var v=this.decodeDataCharacter(a,f,!0),y=this.decodeDataCharacter(a,f,!1);return new EU(1597*v.getValue()+y.getValue(),v.getChecksumPortion()+4*y.getChecksumPortion(),f)}catch{return null}},i.prototype.decodeDataCharacter=function(a,s,l){for(var c=this.getDataCharacterCounters(),d=0;d<c.length;d++)c[d]=0;if(l)Vs.recordPatternInReverse(a,s.getStartEnd()[0],c);else{Vs.recordPattern(a,s.getStartEnd()[1]+1,c);for(var f=0,m=c.length-1;f<m;f++,m--){var g=c[f];c[f]=c[m],c[m]=g}}for(var v=l?16:15,y=_r.sum(new Int32Array(c))/v,A=this.getOddCounts(),w=this.getEvenCounts(),k=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors(),f=0;f<c.length;f++){var I=c[f]/y,T=Math.floor(I+.5);T<1?T=1:T>8&&(T=8);var N=Math.floor(f/2);(f&1)===0?(A[N]=T,k[N]=I-T):(w[N]=T,E[N]=I-T)}this.adjustOddEvenCounts(l,v);for(var j=0,B=0,f=A.length-1;f>=0;f--)B*=9,B+=A[f],j+=A[f];for(var U=0,F=0,f=w.length-1;f>=0;f--)U*=9,U+=w[f],F+=w[f];var P=B+3*U;if(l){if((j&1)!==0||j>12||j<4)throw new et;var z=(12-j)/2,V=i.OUTSIDE_ODD_WIDEST[z],L=9-V,Q=jh.getRSSvalue(A,V,!1),q=jh.getRSSvalue(w,L,!0),ee=i.OUTSIDE_EVEN_TOTAL_SUBSET[z],X=i.OUTSIDE_GSUM[z];return new X3(Q*ee+q+X,P)}else{if((F&1)!==0||F>10||F<4)throw new et;var z=(10-F)/2,V=i.INSIDE_ODD_WIDEST[z],L=9-V,Q=jh.getRSSvalue(A,V,!0),q=jh.getRSSvalue(w,L,!1),ae=i.INSIDE_ODD_TOTAL_SUBSET[z],X=i.INSIDE_GSUM[z];return new X3(q*ae+Q+X,P)}},i.prototype.findFinderPattern=function(a,s){var l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=a.getSize(),d=!1,f=0;f<c&&(d=!a.get(f),s!==d);)f++;for(var m=0,g=f,v=f;v<c;v++)if(a.get(v)!==d)l[m]++;else{if(m===3){if(Nu.isFinderPattern(l))return[g,v];g+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,d=!d}throw new et},i.prototype.parseFoundFinderPattern=function(a,s,l,c){for(var d=a.get(c[0]),f=c[0]-1;f>=0&&d!==a.get(f);)f--;f++;var m=c[0]-f,g=this.getDecodeFinderCounters(),v=new Int32Array(g.length);Ca.arraycopy(g,0,v,1,g.length-1),v[0]=m;var y=this.parseFinderValue(v,i.FINDER_PATTERNS),A=f,w=c[1];return l&&(A=a.getSize()-1-A,w=a.getSize()-1-w),new T7(y,[f,c[1]],A,w,s)},i.prototype.adjustOddEvenCounts=function(a,s){var l=_r.sum(new Int32Array(this.getOddCounts())),c=_r.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,m=!1,g=!1;a?(l>12?f=!0:l<4&&(d=!0),c>12?g=!0:c<4&&(m=!0)):(l>11?f=!0:l<5&&(d=!0),c>10?g=!0:c<4&&(m=!0));var v=l+c-s,y=(l&1)===(a?1:0),A=(c&1)===1;if(v===1)if(y){if(A)throw new et;f=!0}else{if(!A)throw new et;g=!0}else if(v===-1)if(y){if(A)throw new et;d=!0}else{if(!A)throw new et;m=!0}else if(v===0){if(y){if(!A)throw new et;l<c?(d=!0,g=!0):(f=!0,m=!0)}else if(A)throw new et}else throw new et;if(d){if(f)throw new et;Nu.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Nu.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(g)throw new et;Nu.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Nu.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},i.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],i.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],i.OUTSIDE_GSUM=[0,161,961,2015,2715],i.INSIDE_GSUM=[0,336,1036,1516],i.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],i.INSIDE_ODD_WIDEST=[2,4,6,8],i.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],i})(Nu),IU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),qp=(function(r){IU(i,r);function i(a){var s=r.call(this)||this;s.readers=[];var l=a?a.get(qa.POSSIBLE_FORMATS):null,c=a&&a.get(qa.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,d=a&&a.get(qa.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return l&&((l.includes(Pn.EAN_13)||l.includes(Pn.UPC_A)||l.includes(Pn.EAN_8)||l.includes(Pn.UPC_E))&&s.readers.push(new oy(a)),l.includes(Pn.CODE_39)&&s.readers.push(new T8(c,d)),l.includes(Pn.CODE_93)&&s.readers.push(new M8),l.includes(Pn.CODE_128)&&s.readers.push(new N8),l.includes(Pn.ITF)&&s.readers.push(new R8),l.includes(Pn.CODABAR)&&s.readers.push(new XF),l.includes(Pn.RSS_14)&&s.readers.push(new L8),l.includes(Pn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),s.readers.push(new kU))),s.readers.length===0&&(s.readers.push(new oy(a)),s.readers.push(new T8),s.readers.push(new M8),s.readers.push(new oy(a)),s.readers.push(new N8),s.readers.push(new R8),s.readers.push(new L8)),s}return i.prototype.decodeRow=function(a,s,l){for(var c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(a,s,l)}catch{}throw new et},i.prototype.reset=function(){this.readers.forEach(function(a){return a.reset()})},i})(Vs),NU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){NU(i,r);function i(a,s){return a===void 0&&(a=500),r.call(this,new qp(s),a,s)||this}return i})(b2);var z8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Jr=(function(){function r(i,a,s){this.ecCodewords=i,this.ecBlocks=[a],s&&this.ecBlocks.push(s)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),Pr=(function(){function r(i,a){this.count=i,this.dataCodewords=a}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),TU=(function(){function r(i,a,s,l,c,d){var f,m;this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=s,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=d;var g=0,v=d.getECCodewords(),y=d.getECBlocks();try{for(var A=z8(y),w=A.next();!w.done;w=A.next()){var k=w.value;g+=k.getCount()*(k.getDataCodewords()+v)}}catch(E){f={error:E}}finally{try{w&&!w.done&&(m=A.return)&&m.call(A)}finally{if(f)throw f.error}}this.totalCodewords=g}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(i,a){var s,l;if((i&1)!==0||(a&1)!==0)throw new Ut;try{for(var c=z8(r.VERSIONS),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.symbolSizeRows===i&&f.symbolSizeColumns===a)return f}}catch(m){s={error:m}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}throw new Ut},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Jr(5,new Pr(1,3))),new r(2,12,12,10,10,new Jr(7,new Pr(1,5))),new r(3,14,14,12,12,new Jr(10,new Pr(1,8))),new r(4,16,16,14,14,new Jr(12,new Pr(1,12))),new r(5,18,18,16,16,new Jr(14,new Pr(1,18))),new r(6,20,20,18,18,new Jr(18,new Pr(1,22))),new r(7,22,22,20,20,new Jr(20,new Pr(1,30))),new r(8,24,24,22,22,new Jr(24,new Pr(1,36))),new r(9,26,26,24,24,new Jr(28,new Pr(1,44))),new r(10,32,32,14,14,new Jr(36,new Pr(1,62))),new r(11,36,36,16,16,new Jr(42,new Pr(1,86))),new r(12,40,40,18,18,new Jr(48,new Pr(1,114))),new r(13,44,44,20,20,new Jr(56,new Pr(1,144))),new r(14,48,48,22,22,new Jr(68,new Pr(1,174))),new r(15,52,52,24,24,new Jr(42,new Pr(2,102))),new r(16,64,64,14,14,new Jr(56,new Pr(2,140))),new r(17,72,72,16,16,new Jr(36,new Pr(4,92))),new r(18,80,80,18,18,new Jr(48,new Pr(4,114))),new r(19,88,88,20,20,new Jr(56,new Pr(4,144))),new r(20,96,96,22,22,new Jr(68,new Pr(4,174))),new r(21,104,104,24,24,new Jr(56,new Pr(6,136))),new r(22,120,120,18,18,new Jr(68,new Pr(6,175))),new r(23,132,132,20,20,new Jr(62,new Pr(8,163))),new r(24,144,144,22,22,new Jr(62,new Pr(8,156),new Pr(2,155))),new r(25,8,18,6,16,new Jr(7,new Pr(1,5))),new r(26,8,32,6,14,new Jr(11,new Pr(1,10))),new r(27,12,26,10,24,new Jr(14,new Pr(1,16))),new r(28,12,36,10,16,new Jr(18,new Pr(1,22))),new r(29,16,36,14,16,new Jr(24,new Pr(1,32))),new r(30,16,48,14,22,new Jr(28,new Pr(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),MU=(function(){function r(i){var a=i.getHeight();if(a<8||a>144||(a&1)!==0)throw new Ut;this.version=r.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ac(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(i){var a=i.getHeight(),s=i.getWidth();return TU.getVersionForDimensions(a,s)},r.prototype.readCodewords=function(){var i=new Int8Array(this.version.getTotalCodewords()),a=0,s=4,l=0,c=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth(),f=!1,m=!1,g=!1,v=!1;do if(s===c&&l===0&&!f)i[a++]=this.readCorner1(c,d)&255,s-=2,l+=2,f=!0;else if(s===c-2&&l===0&&(d&3)!==0&&!m)i[a++]=this.readCorner2(c,d)&255,s-=2,l+=2,m=!0;else if(s===c+4&&l===2&&(d&7)===0&&!g)i[a++]=this.readCorner3(c,d)&255,s-=2,l+=2,g=!0;else if(s===c-2&&l===0&&(d&7)===4&&!v)i[a++]=this.readCorner4(c,d)&255,s-=2,l+=2,v=!0;else{do s<c&&l>=0&&!this.readMappingMatrix.get(l,s)&&(i[a++]=this.readUtah(s,l,c,d)&255),s-=2,l+=2;while(s>=0&&l<d);s+=1,l+=3;do s>=0&&l<d&&!this.readMappingMatrix.get(l,s)&&(i[a++]=this.readUtah(s,l,c,d)&255),s+=2,l-=2;while(s<c&&l>=0);s+=3,l+=1}while(s<c||l<d);if(a!==this.version.getTotalCodewords())throw new Ut;return i},r.prototype.readModule=function(i,a,s,l){return i<0&&(i+=s,a+=4-(s+4&7)),a<0&&(a+=l,i+=4-(l+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)},r.prototype.readUtah=function(i,a,s,l){var c=0;return this.readModule(i-2,a-2,s,l)&&(c|=1),c<<=1,this.readModule(i-2,a-1,s,l)&&(c|=1),c<<=1,this.readModule(i-1,a-2,s,l)&&(c|=1),c<<=1,this.readModule(i-1,a-1,s,l)&&(c|=1),c<<=1,this.readModule(i-1,a,s,l)&&(c|=1),c<<=1,this.readModule(i,a-2,s,l)&&(c|=1),c<<=1,this.readModule(i,a-1,s,l)&&(c|=1),c<<=1,this.readModule(i,a,s,l)&&(c|=1),c},r.prototype.readCorner1=function(i,a){var s=0;return this.readModule(i-1,0,i,a)&&(s|=1),s<<=1,this.readModule(i-1,1,i,a)&&(s|=1),s<<=1,this.readModule(i-1,2,i,a)&&(s|=1),s<<=1,this.readModule(0,a-2,i,a)&&(s|=1),s<<=1,this.readModule(0,a-1,i,a)&&(s|=1),s<<=1,this.readModule(1,a-1,i,a)&&(s|=1),s<<=1,this.readModule(2,a-1,i,a)&&(s|=1),s<<=1,this.readModule(3,a-1,i,a)&&(s|=1),s},r.prototype.readCorner2=function(i,a){var s=0;return this.readModule(i-3,0,i,a)&&(s|=1),s<<=1,this.readModule(i-2,0,i,a)&&(s|=1),s<<=1,this.readModule(i-1,0,i,a)&&(s|=1),s<<=1,this.readModule(0,a-4,i,a)&&(s|=1),s<<=1,this.readModule(0,a-3,i,a)&&(s|=1),s<<=1,this.readModule(0,a-2,i,a)&&(s|=1),s<<=1,this.readModule(0,a-1,i,a)&&(s|=1),s<<=1,this.readModule(1,a-1,i,a)&&(s|=1),s},r.prototype.readCorner3=function(i,a){var s=0;return this.readModule(i-1,0,i,a)&&(s|=1),s<<=1,this.readModule(i-1,a-1,i,a)&&(s|=1),s<<=1,this.readModule(0,a-3,i,a)&&(s|=1),s<<=1,this.readModule(0,a-2,i,a)&&(s|=1),s<<=1,this.readModule(0,a-1,i,a)&&(s|=1),s<<=1,this.readModule(1,a-3,i,a)&&(s|=1),s<<=1,this.readModule(1,a-2,i,a)&&(s|=1),s<<=1,this.readModule(1,a-1,i,a)&&(s|=1),s},r.prototype.readCorner4=function(i,a){var s=0;return this.readModule(i-3,0,i,a)&&(s|=1),s<<=1,this.readModule(i-2,0,i,a)&&(s|=1),s<<=1,this.readModule(i-1,0,i,a)&&(s|=1),s<<=1,this.readModule(0,a-2,i,a)&&(s|=1),s<<=1,this.readModule(0,a-1,i,a)&&(s|=1),s<<=1,this.readModule(1,a-1,i,a)&&(s|=1),s<<=1,this.readModule(2,a-1,i,a)&&(s|=1),s<<=1,this.readModule(3,a-1,i,a)&&(s|=1),s},r.prototype.extractDataRegion=function(i){var a=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new Ln("Dimension of bitMatrix must match the version size");for(var l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),d=a/l|0,f=s/c|0,m=d*l,g=f*c,v=new ac(g,m),y=0;y<d;++y)for(var A=y*l,w=0;w<f;++w)for(var k=w*c,E=0;E<l;++E)for(var I=y*(l+2)+1+E,T=A+E,N=0;N<c;++N){var j=w*(c+2)+1+N;if(i.get(j,I)){var B=k+N;v.set(B,T)}}return v},r})(),H8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},RU=(function(){function r(i,a){this.numDataCodewords=i,this.codewords=a}return r.getDataBlocks=function(i,a){var s,l,c,d,f=a.getECBlocks(),m=0,g=f.getECBlocks();try{for(var v=H8(g),y=v.next();!y.done;y=v.next()){var A=y.value;m+=A.getCount()}}catch(X){s={error:X}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}var w=new Array(m),k=0;try{for(var E=H8(g),I=E.next();!I.done;I=E.next())for(var A=I.value,T=0;T<A.getCount();T++){var N=A.getDataCodewords(),j=f.getECCodewords()+N;w[k++]=new r(N,new Uint8Array(j))}}catch(X){c={error:X}}finally{try{I&&!I.done&&(d=E.return)&&d.call(E)}finally{if(c)throw c.error}}for(var B=w[0].codewords.length,U=B-f.getECCodewords(),F=U-1,P=0,T=0;T<F;T++)for(var z=0;z<k;z++)w[z].codewords[T]=i[P++];for(var V=a.getVersionNumber()===24,L=V?8:k,z=0;z<L;z++)w[z].codewords[U-1]=i[P++];for(var Q=w[0].codewords.length,T=U;T<Q;T++)for(var z=0;z<k;z++){var q=V?(z+8)%k:z,ee=V&&q>7?T-1:T;w[q].codewords[ee]=i[P++]}if(P!==i.length)throw new Ln;return w},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),O7=(function(){function r(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(i){if(i<1||i>32||i>this.available())throw new Ln(""+i);var a=0,s=this.bitOffset,l=this.byteOffset,c=this.bytes;if(s>0){var d=8-s,f=i<d?i:d,m=d-f,g=255>>8-f<<m;a=(c[l]&g)>>m,i-=f,s+=f,s===8&&(s=0,l++)}if(i>0){for(;i>=8;)a=a<<8|c[l]&255,l++,i-=8;if(i>0){var m=8-i,g=255>>m<<m;a=a<<i|(c[l]&g)>>m,s+=i}}return this.bitOffset=s,this.byteOffset=l,a},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),Us;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(Us||(Us={}));var OU=(function(){function r(){}return r.decode=function(i){var a=new O7(i),s=new ji,l=new ji,c=new Array,d=Us.ASCII_ENCODE;do if(d===Us.ASCII_ENCODE)d=this.decodeAsciiSegment(a,s,l);else{switch(d){case Us.C40_ENCODE:this.decodeC40Segment(a,s);break;case Us.TEXT_ENCODE:this.decodeTextSegment(a,s);break;case Us.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,s);break;case Us.EDIFACT_ENCODE:this.decodeEdifactSegment(a,s);break;case Us.BASE256_ENCODE:this.decodeBase256Segment(a,s,c);break;default:throw new Ut}d=Us.ASCII_ENCODE}while(d!==Us.PAD_ENCODE&&a.available()>0);return l.length()>0&&s.append(l.toString()),new Ux(i,s.toString(),c.length===0?null:c,null)},r.decodeAsciiSegment=function(i,a,s){var l=!1;do{var c=i.readBits(8);if(c===0)throw new Ut;if(c<=128)return l&&(c+=128),a.append(String.fromCharCode(c-1)),Us.ASCII_ENCODE;if(c===129)return Us.PAD_ENCODE;if(c<=229){var d=c-130;d<10&&a.append("0"),a.append(""+d)}else switch(c){case 230:return Us.C40_ENCODE;case 231:return Us.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:a.append("[)>05"),s.insert(0,"");break;case 237:a.append("[)>06"),s.insert(0,"");break;case 238:return Us.ANSIX12_ENCODE;case 239:return Us.TEXT_ENCODE;case 240:return Us.EDIFACT_ENCODE;case 241:break;default:if(c!==254||i.available()!==0)throw new Ut;break}}while(i.available()>0);return Us.ASCII_ENCODE},r.decodeC40Segment=function(i,a){var s=!1,l=[],c=0;do{if(i.available()===8)return;var d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),l);for(var f=0;f<3;f++){var m=l[f];switch(c){case 0:if(m<3)c=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){var g=this.C40_BASIC_SET_CHARS[m];s?(a.append(String.fromCharCode(g.charCodeAt(0)+128)),s=!1):a.append(g)}else throw new Ut;break;case 1:s?(a.append(String.fromCharCode(m+128)),s=!1):a.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){var g=this.C40_SHIFT2_SET_CHARS[m];s?(a.append(String.fromCharCode(g.charCodeAt(0)+128)),s=!1):a.append(g)}else switch(m){case 27:a.append("");break;case 30:s=!0;break;default:throw new Ut}c=0;break;case 3:s?(a.append(String.fromCharCode(m+224)),s=!1):a.append(String.fromCharCode(m+96)),c=0;break;default:throw new Ut}}}while(i.available()>0)},r.decodeTextSegment=function(i,a){var s=!1,l=[],c=0;do{if(i.available()===8)return;var d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),l);for(var f=0;f<3;f++){var m=l[f];switch(c){case 0:if(m<3)c=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){var g=this.TEXT_BASIC_SET_CHARS[m];s?(a.append(String.fromCharCode(g.charCodeAt(0)+128)),s=!1):a.append(g)}else throw new Ut;break;case 1:s?(a.append(String.fromCharCode(m+128)),s=!1):a.append(String.fromCharCode(m)),c=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){var g=this.TEXT_SHIFT2_SET_CHARS[m];s?(a.append(String.fromCharCode(g.charCodeAt(0)+128)),s=!1):a.append(g)}else switch(m){case 27:a.append("");break;case 30:s=!0;break;default:throw new Ut}c=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){var g=this.TEXT_SHIFT3_SET_CHARS[m];s?(a.append(String.fromCharCode(g.charCodeAt(0)+128)),s=!1):a.append(g),c=0}else throw new Ut;break;default:throw new Ut}}}while(i.available()>0)},r.decodeAnsiX12Segment=function(i,a){var s=[];do{if(i.available()===8)return;var l=i.readBits(8);if(l===254)return;this.parseTwoBytes(l,i.readBits(8),s);for(var c=0;c<3;c++){var d=s[c];switch(d){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(d<14)a.append(String.fromCharCode(d+44));else if(d<40)a.append(String.fromCharCode(d+51));else throw new Ut;break}}}while(i.available()>0)},r.parseTwoBytes=function(i,a,s){var l=(i<<8)+a-1,c=Math.floor(l/1600);s[0]=c,l-=c*1600,c=Math.floor(l/40),s[1]=c,s[2]=l-c*40},r.decodeEdifactSegment=function(i,a){do{if(i.available()<=16)return;for(var s=0;s<4;s++){var l=i.readBits(6);if(l===31){var c=8-i.getBitOffset();c!==8&&i.readBits(c);return}(l&32)===0&&(l|=64),a.append(String.fromCharCode(l))}}while(i.available()>0)},r.decodeBase256Segment=function(i,a,s){var l=1+i.getByteOffset(),c=this.unrandomize255State(i.readBits(8),l++),d;if(c===0?d=i.available()/8|0:c<250?d=c:d=250*(c-249)+this.unrandomize255State(i.readBits(8),l++),d<0)throw new Ut;for(var f=new Uint8Array(d),m=0;m<d;m++){if(i.available()<8)throw new Ut;f[m]=this.unrandomize255State(i.readBits(8),l++)}s.push(f);try{a.append(l1.decode(f,fr.ISO88591))}catch(g){throw new Xm("Platform does not support required encoding: "+g.message)}},r.unrandomize255State=function(i,a){var s=149*a%255+1,l=i-s;return l>=0?l:l+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),DU=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},jU=(function(){function r(){this.rsDecoder=new Lx(kl.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(i){var a,s,l=new MU(i),c=l.getVersion(),d=l.readCodewords(),f=RU.getDataBlocks(d,c),m=0;try{for(var g=DU(f),v=g.next();!v.done;v=g.next()){var y=v.value;m+=y.getNumDataCodewords()}}catch(j){a={error:j}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}for(var A=new Uint8Array(m),w=f.length,k=0;k<w;k++){var E=f[k],I=E.getCodewords(),T=E.getNumDataCodewords();this.correctErrors(I,T);for(var N=0;N<T;N++)A[N*w+k]=I[N]}return OU.decode(A)},r.prototype.correctErrors=function(i,a){var s=new Int32Array(i);try{this.rsDecoder.decode(s,i.length-a)}catch{throw new ao}for(var l=0;l<a;l++)i[l]=s[l]},r})(),BU=(function(){function r(i){this.image=i,this.rectangleDetector=new x4(this.image)}return r.prototype.detect=function(){var i=this.rectangleDetector.detect(),a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new et;a=this.shiftToModuleCenter(a);var s=a[0],l=a[1],c=a[2],d=a[3],f=this.transitionsBetween(s,d)+1,m=this.transitionsBetween(c,d)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));var g=r.sampleGrid(this.image,s,l,c,d,f,m);return new Nw(g,[s,l,c,d])},r.shiftPoint=function(i,a,s){var l=(a.getX()-i.getX())/(s+1),c=(a.getY()-i.getY())/(s+1);return new bn(i.getX()+l,i.getY()+c)},r.moveAway=function(i,a,s){var l=i.getX(),c=i.getY();return l<a?l-=1:l+=1,c<s?c-=1:c+=1,new bn(l,c)},r.prototype.detectSolid1=function(i){var a=i[0],s=i[1],l=i[3],c=i[2],d=this.transitionsBetween(a,s),f=this.transitionsBetween(s,l),m=this.transitionsBetween(l,c),g=this.transitionsBetween(c,a),v=d,y=[c,a,s,l];return v>f&&(v=f,y[0]=a,y[1]=s,y[2]=l,y[3]=c),v>m&&(v=m,y[0]=s,y[1]=l,y[2]=c,y[3]=a),v>g&&(y[0]=l,y[1]=c,y[2]=a,y[3]=s),y},r.prototype.detectSolid2=function(i){var a=i[0],s=i[1],l=i[2],c=i[3],d=this.transitionsBetween(a,c),f=r.shiftPoint(s,l,(d+1)*4),m=r.shiftPoint(l,s,(d+1)*4),g=this.transitionsBetween(f,a),v=this.transitionsBetween(m,c);return g<v?(i[0]=a,i[1]=s,i[2]=l,i[3]=c):(i[0]=s,i[1]=l,i[2]=c,i[3]=a),i},r.prototype.correctTopRight=function(i){var a=i[0],s=i[1],l=i[2],c=i[3],d=this.transitionsBetween(a,c),f=this.transitionsBetween(s,c),m=r.shiftPoint(a,s,(f+1)*4),g=r.shiftPoint(l,s,(d+1)*4);d=this.transitionsBetween(m,c),f=this.transitionsBetween(g,c);var v=new bn(c.getX()+(l.getX()-s.getX())/(d+1),c.getY()+(l.getY()-s.getY())/(d+1)),y=new bn(c.getX()+(a.getX()-s.getX())/(f+1),c.getY()+(a.getY()-s.getY())/(f+1));if(!this.isValid(v))return this.isValid(y)?y:null;if(!this.isValid(y))return v;var A=this.transitionsBetween(m,v)+this.transitionsBetween(g,v),w=this.transitionsBetween(m,y)+this.transitionsBetween(g,y);return A>w?v:y},r.prototype.shiftToModuleCenter=function(i){var a=i[0],s=i[1],l=i[2],c=i[3],d=this.transitionsBetween(a,c)+1,f=this.transitionsBetween(l,c)+1,m=r.shiftPoint(a,s,f*4),g=r.shiftPoint(l,s,d*4);d=this.transitionsBetween(m,c)+1,f=this.transitionsBetween(g,c)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);var v=(a.getX()+s.getX()+l.getX()+c.getX())/4,y=(a.getY()+s.getY()+l.getY()+c.getY())/4;a=r.moveAway(a,v,y),s=r.moveAway(s,v,y),l=r.moveAway(l,v,y),c=r.moveAway(c,v,y);var A,w;return m=r.shiftPoint(a,s,f*4),m=r.shiftPoint(m,c,d*4),A=r.shiftPoint(s,a,f*4),A=r.shiftPoint(A,l,d*4),g=r.shiftPoint(l,c,f*4),g=r.shiftPoint(g,s,d*4),w=r.shiftPoint(c,l,f*4),w=r.shiftPoint(w,a,d*4),[m,A,g,w]},r.prototype.isValid=function(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()},r.sampleGrid=function(i,a,s,l,c,d,f){var m=Tw.getInstance();return m.sampleGrid(i,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,a.getX(),a.getY(),c.getX(),c.getY(),l.getX(),l.getY(),s.getX(),s.getY())},r.prototype.transitionsBetween=function(i,a){var s=Math.trunc(i.getX()),l=Math.trunc(i.getY()),c=Math.trunc(a.getX()),d=Math.trunc(a.getY()),f=Math.abs(d-l)>Math.abs(c-s);if(f){var m=s;s=l,l=m,m=c,c=d,d=m}for(var g=Math.abs(c-s),v=Math.abs(d-l),y=-g/2,A=l<d?1:-1,w=s<c?1:-1,k=0,E=this.image.get(f?l:s,f?s:l),I=s,T=l;I!==c;I+=w){var N=this.image.get(f?T:I,f?I:T);if(N!==E&&(k++,E=N),y+=v,y>0){if(T===d)break;T+=A,y-=g}}return k},r})(),w4=(function(){function r(){this.decoder=new jU}return r.prototype.decode=function(i,a){a===void 0&&(a=null);var s,l;if(a!=null&&a.has(qa.PURE_BARCODE)){var c=r.extractPureBits(i.getBlackMatrix());s=this.decoder.decode(c),l=r.NO_POINTS}else{var d=new BU(i.getBlackMatrix()).detect();s=this.decoder.decode(d.getBits()),l=d.getPoints()}var f=s.getRawBytes(),m=new Ho(s.getText(),f,8*f.length,l,Pn.DATA_MATRIX,Ca.currentTimeMillis()),g=s.getByteSegments();g!=null&&m.putMetadata(Ao.BYTE_SEGMENTS,g);var v=s.getECLevel();return v!=null&&m.putMetadata(Ao.ERROR_CORRECTION_LEVEL,v),m},r.prototype.reset=function(){},r.extractPureBits=function(i){var a=i.getTopLeftOnBit(),s=i.getBottomRightOnBit();if(a==null||s==null)throw new et;var l=this.moduleSize(a,i),c=a[1],d=s[1],f=a[0],m=s[0],g=(m-f+1)/l,v=(d-c+1)/l;if(g<=0||v<=0)throw new et;var y=l/2;c+=y,f+=y;for(var A=new ac(g,v),w=0;w<v;w++)for(var k=c+w*l,E=0;E<g;E++)i.get(f+E*l,k)&&A.set(E,w);return A},r.moduleSize=function(i,a){for(var s=a.getWidth(),l=i[0],c=i[1];l<s&&a.get(l,c);)l++;if(l===s)throw new et;var d=l-i[0];if(d===0)throw new et;return d},r.NO_POINTS=[],r})(),PU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){PU(i,r);function i(a){return a===void 0&&(a=500),r.call(this,new w4,a)||this}return i})(b2);var Bh;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(Bh||(Bh={}));var FU=(function(){function r(i,a,s){this.value=i,this.stringValue=a,this.bits=s,r.FOR_BITS.set(s,this),r.FOR_VALUE.set(i,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(i){switch(i){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new C1(i+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.value===a.value},r.forBits=function(i){if(i<0||i>=r.FOR_BITS.size)throw new Ln;return r.FOR_BITS.get(i)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(Bh.L,"L",1),r.M=new r(Bh.M,"M",0),r.Q=new r(Bh.Q,"Q",3),r.H=new r(Bh.H,"H",2),r})(),UU=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},D7=(function(){function r(i){this.errorCorrectionLevel=FU.forBits(i>>3&3),this.dataMask=i&7}return r.numBitsDiffering=function(i,a){return Ui.bitCount(i^a)},r.decodeFormatInformation=function(i,a){var s=r.doDecodeFormatInformation(i,a);return s!==null?s:r.doDecodeFormatInformation(i^r.FORMAT_INFO_MASK_QR,a^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(i,a){var s,l,c=Number.MAX_SAFE_INTEGER,d=0;try{for(var f=UU(r.FORMAT_INFO_DECODE_LOOKUP),m=f.next();!m.done;m=f.next()){var g=m.value,v=g[0];if(v===i||v===a)return new r(g[1]);var y=r.numBitsDiffering(i,v);y<c&&(d=g[1],c=y),i!==a&&(y=r.numBitsDiffering(a,v),y<c&&(d=g[1],c=y))}}catch(A){s={error:A}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return c<=3?new r(d):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),LU=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Fe=(function(){function r(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];this.ecCodewordsPerBlock=i,this.ecBlocks=a}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var i,a,s=0,l=this.ecBlocks;try{for(var c=LU(l),d=c.next();!d.done;d=c.next()){var f=d.value;s+=f.getCount()}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),ue=(function(){function r(i,a){this.count=i,this.dataCodewords=a}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),zU=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},$u=(function(){function r(i,a){for(var s,l,c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=c;var f=0,m=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();try{for(var v=zU(g),y=v.next();!y.done;y=v.next()){var A=y.value;f+=A.getCount()*(A.getDataCodewords()+m)}}catch(w){s={error:w}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}this.totalCodewords=f}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(i){return this.ecBlocks[i.getValue()]},r.getProvisionalVersionForDimension=function(i){if(i%4!==1)throw new Ut;try{return this.getVersionForNumber((i-17)/4)}catch{throw new Ut}},r.getVersionForNumber=function(i){if(i<1||i>40)throw new Ln;return r.VERSIONS[i-1]},r.decodeVersionInformation=function(i){for(var a=Number.MAX_SAFE_INTEGER,s=0,l=0;l<r.VERSION_DECODE_INFO.length;l++){var c=r.VERSION_DECODE_INFO[l];if(c===i)return r.getVersionForNumber(l+7);var d=D7.numBitsDiffering(i,c);d<a&&(s=l+7,a=d)}return a<=3?r.getVersionForNumber(s):null},r.prototype.buildFunctionPattern=function(){var i=this.getDimensionForVersion(),a=new ac(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);for(var s=this.alignmentPatternCenters.length,l=0;l<s;l++)for(var c=this.alignmentPatternCenters[l]-2,d=0;d<s;d++)l===0&&(d===0||d===s-1)||l===s-1&&d===0||a.setRegion(this.alignmentPatternCenters[d]-2,c,5,5);return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new Fe(7,new ue(1,19)),new Fe(10,new ue(1,16)),new Fe(13,new ue(1,13)),new Fe(17,new ue(1,9))),new r(2,Int32Array.from([6,18]),new Fe(10,new ue(1,34)),new Fe(16,new ue(1,28)),new Fe(22,new ue(1,22)),new Fe(28,new ue(1,16))),new r(3,Int32Array.from([6,22]),new Fe(15,new ue(1,55)),new Fe(26,new ue(1,44)),new Fe(18,new ue(2,17)),new Fe(22,new ue(2,13))),new r(4,Int32Array.from([6,26]),new Fe(20,new ue(1,80)),new Fe(18,new ue(2,32)),new Fe(26,new ue(2,24)),new Fe(16,new ue(4,9))),new r(5,Int32Array.from([6,30]),new Fe(26,new ue(1,108)),new Fe(24,new ue(2,43)),new Fe(18,new ue(2,15),new ue(2,16)),new Fe(22,new ue(2,11),new ue(2,12))),new r(6,Int32Array.from([6,34]),new Fe(18,new ue(2,68)),new Fe(16,new ue(4,27)),new Fe(24,new ue(4,19)),new Fe(28,new ue(4,15))),new r(7,Int32Array.from([6,22,38]),new Fe(20,new ue(2,78)),new Fe(18,new ue(4,31)),new Fe(18,new ue(2,14),new ue(4,15)),new Fe(26,new ue(4,13),new ue(1,14))),new r(8,Int32Array.from([6,24,42]),new Fe(24,new ue(2,97)),new Fe(22,new ue(2,38),new ue(2,39)),new Fe(22,new ue(4,18),new ue(2,19)),new Fe(26,new ue(4,14),new ue(2,15))),new r(9,Int32Array.from([6,26,46]),new Fe(30,new ue(2,116)),new Fe(22,new ue(3,36),new ue(2,37)),new Fe(20,new ue(4,16),new ue(4,17)),new Fe(24,new ue(4,12),new ue(4,13))),new r(10,Int32Array.from([6,28,50]),new Fe(18,new ue(2,68),new ue(2,69)),new Fe(26,new ue(4,43),new ue(1,44)),new Fe(24,new ue(6,19),new ue(2,20)),new Fe(28,new ue(6,15),new ue(2,16))),new r(11,Int32Array.from([6,30,54]),new Fe(20,new ue(4,81)),new Fe(30,new ue(1,50),new ue(4,51)),new Fe(28,new ue(4,22),new ue(4,23)),new Fe(24,new ue(3,12),new ue(8,13))),new r(12,Int32Array.from([6,32,58]),new Fe(24,new ue(2,92),new ue(2,93)),new Fe(22,new ue(6,36),new ue(2,37)),new Fe(26,new ue(4,20),new ue(6,21)),new Fe(28,new ue(7,14),new ue(4,15))),new r(13,Int32Array.from([6,34,62]),new Fe(26,new ue(4,107)),new Fe(22,new ue(8,37),new ue(1,38)),new Fe(24,new ue(8,20),new ue(4,21)),new Fe(22,new ue(12,11),new ue(4,12))),new r(14,Int32Array.from([6,26,46,66]),new Fe(30,new ue(3,115),new ue(1,116)),new Fe(24,new ue(4,40),new ue(5,41)),new Fe(20,new ue(11,16),new ue(5,17)),new Fe(24,new ue(11,12),new ue(5,13))),new r(15,Int32Array.from([6,26,48,70]),new Fe(22,new ue(5,87),new ue(1,88)),new Fe(24,new ue(5,41),new ue(5,42)),new Fe(30,new ue(5,24),new ue(7,25)),new Fe(24,new ue(11,12),new ue(7,13))),new r(16,Int32Array.from([6,26,50,74]),new Fe(24,new ue(5,98),new ue(1,99)),new Fe(28,new ue(7,45),new ue(3,46)),new Fe(24,new ue(15,19),new ue(2,20)),new Fe(30,new ue(3,15),new ue(13,16))),new r(17,Int32Array.from([6,30,54,78]),new Fe(28,new ue(1,107),new ue(5,108)),new Fe(28,new ue(10,46),new ue(1,47)),new Fe(28,new ue(1,22),new ue(15,23)),new Fe(28,new ue(2,14),new ue(17,15))),new r(18,Int32Array.from([6,30,56,82]),new Fe(30,new ue(5,120),new ue(1,121)),new Fe(26,new ue(9,43),new ue(4,44)),new Fe(28,new ue(17,22),new ue(1,23)),new Fe(28,new ue(2,14),new ue(19,15))),new r(19,Int32Array.from([6,30,58,86]),new Fe(28,new ue(3,113),new ue(4,114)),new Fe(26,new ue(3,44),new ue(11,45)),new Fe(26,new ue(17,21),new ue(4,22)),new Fe(26,new ue(9,13),new ue(16,14))),new r(20,Int32Array.from([6,34,62,90]),new Fe(28,new ue(3,107),new ue(5,108)),new Fe(26,new ue(3,41),new ue(13,42)),new Fe(30,new ue(15,24),new ue(5,25)),new Fe(28,new ue(15,15),new ue(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new Fe(28,new ue(4,116),new ue(4,117)),new Fe(26,new ue(17,42)),new Fe(28,new ue(17,22),new ue(6,23)),new Fe(30,new ue(19,16),new ue(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new Fe(28,new ue(2,111),new ue(7,112)),new Fe(28,new ue(17,46)),new Fe(30,new ue(7,24),new ue(16,25)),new Fe(24,new ue(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new Fe(30,new ue(4,121),new ue(5,122)),new Fe(28,new ue(4,47),new ue(14,48)),new Fe(30,new ue(11,24),new ue(14,25)),new Fe(30,new ue(16,15),new ue(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new Fe(30,new ue(6,117),new ue(4,118)),new Fe(28,new ue(6,45),new ue(14,46)),new Fe(30,new ue(11,24),new ue(16,25)),new Fe(30,new ue(30,16),new ue(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new Fe(26,new ue(8,106),new ue(4,107)),new Fe(28,new ue(8,47),new ue(13,48)),new Fe(30,new ue(7,24),new ue(22,25)),new Fe(30,new ue(22,15),new ue(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new Fe(28,new ue(10,114),new ue(2,115)),new Fe(28,new ue(19,46),new ue(4,47)),new Fe(28,new ue(28,22),new ue(6,23)),new Fe(30,new ue(33,16),new ue(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new Fe(30,new ue(8,122),new ue(4,123)),new Fe(28,new ue(22,45),new ue(3,46)),new Fe(30,new ue(8,23),new ue(26,24)),new Fe(30,new ue(12,15),new ue(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new Fe(30,new ue(3,117),new ue(10,118)),new Fe(28,new ue(3,45),new ue(23,46)),new Fe(30,new ue(4,24),new ue(31,25)),new Fe(30,new ue(11,15),new ue(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new Fe(30,new ue(7,116),new ue(7,117)),new Fe(28,new ue(21,45),new ue(7,46)),new Fe(30,new ue(1,23),new ue(37,24)),new Fe(30,new ue(19,15),new ue(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new Fe(30,new ue(5,115),new ue(10,116)),new Fe(28,new ue(19,47),new ue(10,48)),new Fe(30,new ue(15,24),new ue(25,25)),new Fe(30,new ue(23,15),new ue(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new Fe(30,new ue(13,115),new ue(3,116)),new Fe(28,new ue(2,46),new ue(29,47)),new Fe(30,new ue(42,24),new ue(1,25)),new Fe(30,new ue(23,15),new ue(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new Fe(30,new ue(17,115)),new Fe(28,new ue(10,46),new ue(23,47)),new Fe(30,new ue(10,24),new ue(35,25)),new Fe(30,new ue(19,15),new ue(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new Fe(30,new ue(17,115),new ue(1,116)),new Fe(28,new ue(14,46),new ue(21,47)),new Fe(30,new ue(29,24),new ue(19,25)),new Fe(30,new ue(11,15),new ue(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new Fe(30,new ue(13,115),new ue(6,116)),new Fe(28,new ue(14,46),new ue(23,47)),new Fe(30,new ue(44,24),new ue(7,25)),new Fe(30,new ue(59,16),new ue(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new Fe(30,new ue(12,121),new ue(7,122)),new Fe(28,new ue(12,47),new ue(26,48)),new Fe(30,new ue(39,24),new ue(14,25)),new Fe(30,new ue(22,15),new ue(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new Fe(30,new ue(6,121),new ue(14,122)),new Fe(28,new ue(6,47),new ue(34,48)),new Fe(30,new ue(46,24),new ue(10,25)),new Fe(30,new ue(2,15),new ue(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new Fe(30,new ue(17,122),new ue(4,123)),new Fe(28,new ue(29,46),new ue(14,47)),new Fe(30,new ue(49,24),new ue(10,25)),new Fe(30,new ue(24,15),new ue(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new Fe(30,new ue(4,122),new ue(18,123)),new Fe(28,new ue(13,46),new ue(32,47)),new Fe(30,new ue(48,24),new ue(14,25)),new Fe(30,new ue(42,15),new ue(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new Fe(30,new ue(20,117),new ue(4,118)),new Fe(28,new ue(40,47),new ue(7,48)),new Fe(30,new ue(43,24),new ue(22,25)),new Fe(30,new ue(10,15),new ue(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new Fe(30,new ue(19,118),new ue(6,119)),new Fe(28,new ue(18,47),new ue(31,48)),new Fe(30,new ue(34,24),new ue(34,25)),new Fe(30,new ue(20,15),new ue(61,16)))],r})(),to;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(to||(to={}));var q8=(function(){function r(i,a){this.value=i,this.isMasked=a}return r.prototype.unmaskBitMatrix=function(i,a){for(var s=0;s<a;s++)for(var l=0;l<a;l++)this.isMasked(s,l)&&i.flip(l,s)},r.values=new Map([[to.DATA_MASK_000,new r(to.DATA_MASK_000,function(i,a){return(i+a&1)===0})],[to.DATA_MASK_001,new r(to.DATA_MASK_001,function(i,a){return(i&1)===0})],[to.DATA_MASK_010,new r(to.DATA_MASK_010,function(i,a){return a%3===0})],[to.DATA_MASK_011,new r(to.DATA_MASK_011,function(i,a){return(i+a)%3===0})],[to.DATA_MASK_100,new r(to.DATA_MASK_100,function(i,a){return(Math.floor(i/2)+Math.floor(a/3)&1)===0})],[to.DATA_MASK_101,new r(to.DATA_MASK_101,function(i,a){return i*a%6===0})],[to.DATA_MASK_110,new r(to.DATA_MASK_110,function(i,a){return i*a%6<3})],[to.DATA_MASK_111,new r(to.DATA_MASK_111,function(i,a){return(i+a+i*a%3&1)===0})]]),r})(),HU=(function(){function r(i){var a=i.getHeight();if(a<21||(a&3)!==1)throw new Ut;this.bitMatrix=i}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var i=0,a=0;a<6;a++)i=this.copyBit(a,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(var s=5;s>=0;s--)i=this.copyBit(8,s,i);for(var l=this.bitMatrix.getHeight(),c=0,d=l-7,s=l-1;s>=d;s--)c=this.copyBit(8,s,c);for(var a=l-8;a<l;a++)c=this.copyBit(a,8,c);if(this.parsedFormatInfo=D7.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Ut},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return $u.getVersionForNumber(a);for(var s=0,l=i-11,c=5;c>=0;c--)for(var d=i-9;d>=l;d--)s=this.copyBit(d,c,s);var f=$u.decodeVersionInformation(s);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;s=0;for(var d=5;d>=0;d--)for(var c=i-9;c>=l;c--)s=this.copyBit(d,c,s);if(f=$u.decodeVersionInformation(s),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new Ut},r.prototype.copyBit=function(i,a,s){var l=this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a);return l?s<<1|1:s<<1},r.prototype.readCodewords=function(){var i=this.readFormatInformation(),a=this.readVersion(),s=q8.values.get(i.getDataMask()),l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l);for(var c=a.buildFunctionPattern(),d=!0,f=new Uint8Array(a.getTotalCodewords()),m=0,g=0,v=0,y=l-1;y>0;y-=2){y===6&&y--;for(var A=0;A<l;A++)for(var w=d?l-1-A:A,k=0;k<2;k++)c.get(y-k,w)||(v++,g<<=1,this.bitMatrix.get(y-k,w)&&(g|=1),v===8&&(f[m++]=g,v=0,g=0));d=!d}if(m!==a.getTotalCodewords())throw new Ut;return f},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var i=q8.values.get(this.parsedFormatInfo.getDataMask()),a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}},r.prototype.setMirror=function(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i},r.prototype.mirror=function(){for(var i=this.bitMatrix,a=0,s=i.getWidth();a<s;a++)for(var l=a+1,c=i.getHeight();l<c;l++)i.get(a,l)!==i.get(l,a)&&(i.flip(l,a),i.flip(a,l))},r})(),G8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},qU=(function(){function r(i,a){this.numDataCodewords=i,this.codewords=a}return r.getDataBlocks=function(i,a,s){var l,c,d,f;if(i.length!==a.getTotalCodewords())throw new Ln;var m=a.getECBlocksForLevel(s),g=0,v=m.getECBlocks();try{for(var y=G8(v),A=y.next();!A.done;A=y.next()){var w=A.value;g+=w.getCount()}}catch(ee){l={error:ee}}finally{try{A&&!A.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}var k=new Array(g),E=0;try{for(var I=G8(v),T=I.next();!T.done;T=I.next())for(var w=T.value,N=0;N<w.getCount();N++){var j=w.getDataCodewords(),B=m.getECCodewordsPerBlock()+j;k[E++]=new r(j,new Uint8Array(B))}}catch(ee){d={error:ee}}finally{try{T&&!T.done&&(f=I.return)&&f.call(I)}finally{if(d)throw d.error}}for(var U=k[0].codewords.length,F=k.length-1;F>=0;){var P=k[F].codewords.length;if(P===U)break;F--}F++;for(var z=U-m.getECCodewordsPerBlock(),V=0,N=0;N<z;N++)for(var L=0;L<E;L++)k[L].codewords[N]=i[V++];for(var L=F;L<E;L++)k[L].codewords[z]=i[V++];for(var Q=k[0].codewords.length,N=z;N<Q;N++)for(var L=0;L<E;L++){var q=L<F?N:N+1;k[L].codewords[q]=i[V++]}return k},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),e1;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(e1||(e1={}));var Da=(function(){function r(i,a,s,l){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=s,this.bits=l,r.FOR_BITS.set(l,this),r.FOR_VALUE.set(i,this)}return r.forBits=function(i){var a=r.FOR_BITS.get(i);if(a===void 0)throw new Ln;return a},r.prototype.getCharacterCountBits=function(i){var a=i.getVersionNumber(),s;return a<=9?s=0:a<=26?s=1:s=2,this.characterCountBitsForVersions[s]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;return this.value===a.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(e1.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(e1.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(e1.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(e1.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(e1.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(e1.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(e1.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(e1.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(e1.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(e1.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),GU=(function(){function r(){}return r.decode=function(i,a,s,l){var c=new O7(i),d=new ji,f=new Array,m=-1,g=-1;try{var v=null,y=!1,A=void 0;do{if(c.available()<4)A=Da.TERMINATOR;else{var w=c.readBits(4);A=Da.forBits(w)}switch(A){case Da.TERMINATOR:break;case Da.FNC1_FIRST_POSITION:case Da.FNC1_SECOND_POSITION:y=!0;break;case Da.STRUCTURED_APPEND:if(c.available()<16)throw new Ut;m=c.readBits(8),g=c.readBits(8);break;case Da.ECI:var k=r.parseECIValue(c);if(v=qs.getCharacterSetECIByValue(k),v===null)throw new Ut;break;case Da.HANZI:var E=c.readBits(4),I=c.readBits(A.getCharacterCountBits(a));E===r.GB2312_SUBSET&&r.decodeHanziSegment(c,d,I);break;default:var T=c.readBits(A.getCharacterCountBits(a));switch(A){case Da.NUMERIC:r.decodeNumericSegment(c,d,T);break;case Da.ALPHANUMERIC:r.decodeAlphanumericSegment(c,d,T,y);break;case Da.BYTE:r.decodeByteSegment(c,d,T,v,f,l);break;case Da.KANJI:r.decodeKanjiSegment(c,d,T);break;default:throw new Ut}break}}while(A!==Da.TERMINATOR)}catch{throw new Ut}return new Ux(i,d.toString(),f.length===0?null:f,s===null?null:s.toString(),m,g)},r.decodeHanziSegment=function(i,a,s){if(s*13>i.available())throw new Ut;for(var l=new Uint8Array(2*s),c=0;s>0;){var d=i.readBits(13),f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,l[c]=f>>8&255,l[c+1]=f&255,c+=2,s--}try{a.append(l1.decode(l,fr.GB2312))}catch(m){throw new Ut(m)}},r.decodeKanjiSegment=function(i,a,s){if(s*13>i.available())throw new Ut;for(var l=new Uint8Array(2*s),c=0;s>0;){var d=i.readBits(13),f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,l[c]=f>>8,l[c+1]=f,c+=2,s--}try{a.append(l1.decode(l,fr.SHIFT_JIS))}catch(m){throw new Ut(m)}},r.decodeByteSegment=function(i,a,s,l,c,d){if(8*s>i.available())throw new Ut;for(var f=new Uint8Array(s),m=0;m<s;m++)f[m]=i.readBits(8);var g;l===null?g=fr.guessEncoding(f,d):g=l.getName();try{a.append(l1.decode(f,g))}catch(v){throw new Ut(v)}c.push(f)},r.toAlphaNumericChar=function(i){if(i>=r.ALPHANUMERIC_CHARS.length)throw new Ut;return r.ALPHANUMERIC_CHARS[i]},r.decodeAlphanumericSegment=function(i,a,s,l){for(var c=a.length();s>1;){if(i.available()<11)throw new Ut;var d=i.readBits(11);a.append(r.toAlphaNumericChar(Math.floor(d/45))),a.append(r.toAlphaNumericChar(d%45)),s-=2}if(s===1){if(i.available()<6)throw new Ut;a.append(r.toAlphaNumericChar(i.readBits(6)))}if(l)for(var f=c;f<a.length();f++)a.charAt(f)==="%"&&(f<a.length()-1&&a.charAt(f+1)==="%"?a.deleteCharAt(f+1):a.setCharAt(f,""))},r.decodeNumericSegment=function(i,a,s){for(;s>=3;){if(i.available()<10)throw new Ut;var l=i.readBits(10);if(l>=1e3)throw new Ut;a.append(r.toAlphaNumericChar(Math.floor(l/100))),a.append(r.toAlphaNumericChar(Math.floor(l/10)%10)),a.append(r.toAlphaNumericChar(l%10)),s-=3}if(s===2){if(i.available()<7)throw new Ut;var c=i.readBits(7);if(c>=100)throw new Ut;a.append(r.toAlphaNumericChar(Math.floor(c/10))),a.append(r.toAlphaNumericChar(c%10))}else if(s===1){if(i.available()<4)throw new Ut;var d=i.readBits(4);if(d>=10)throw new Ut;a.append(r.toAlphaNumericChar(d))}},r.parseECIValue=function(i){var a=i.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){var s=i.readBits(8);return(a&63)<<8&4294967295|s}if((a&224)===192){var l=i.readBits(16);return(a&31)<<16&4294967295|l}throw new Ut},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),j7=(function(){function r(i){this.mirrored=i}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(i){if(!(!this.mirrored||i===null||i.length<3)){var a=i[0];i[0]=i[2],i[2]=a}},r})(),V8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},VU=(function(){function r(){this.rsDecoder=new Lx(kl.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(i,a){return this.decodeBitMatrix(ac.parseFromBooleanArray(i),a)},r.prototype.decodeBitMatrix=function(i,a){var s=new HU(i),l=null;try{return this.decodeBitMatrixParser(s,a)}catch(d){l=d}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();var c=this.decodeBitMatrixParser(s,a);return c.setOther(new j7(!0)),c}catch(d){throw l!==null?l:d}},r.prototype.decodeBitMatrixParser=function(i,a){var s,l,c,d,f=i.readVersion(),m=i.readFormatInformation().getErrorCorrectionLevel(),g=i.readCodewords(),v=qU.getDataBlocks(g,f,m),y=0;try{for(var A=V8(v),w=A.next();!w.done;w=A.next()){var k=w.value;y+=k.getNumDataCodewords()}}catch(F){s={error:F}}finally{try{w&&!w.done&&(l=A.return)&&l.call(A)}finally{if(s)throw s.error}}var E=new Uint8Array(y),I=0;try{for(var T=V8(v),N=T.next();!N.done;N=T.next()){var k=N.value,j=k.getCodewords(),B=k.getNumDataCodewords();this.correctErrors(j,B);for(var U=0;U<B;U++)E[I++]=j[U]}}catch(F){c={error:F}}finally{try{N&&!N.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return GU.decode(E,f,m,a)},r.prototype.correctErrors=function(i,a){var s=new Int32Array(i);try{this.rsDecoder.decode(s,i.length-a)}catch{throw new ao}for(var l=0;l<a;l++)i[l]=s[l]},r})(),YU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),QU=(function(r){YU(i,r);function i(a,s,l){var c=r.call(this,a,s)||this;return c.estimatedModuleSize=l,c}return i.prototype.aboutEquals=function(a,s,l){if(Math.abs(s-this.getY())<=a&&Math.abs(l-this.getX())<=a){var c=Math.abs(a-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1},i.prototype.combineEstimate=function(a,s,l){var c=(this.getX()+s)/2,d=(this.getY()+a)/2,f=(this.estimatedModuleSize+l)/2;return new i(c,d,f)},i})(bn),$U=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},WU=(function(){function r(i,a,s,l,c,d,f){this.image=i,this.startX=a,this.startY=s,this.width=l,this.height=c,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var i=this.startX,a=this.height,s=this.width,l=i+s,c=this.startY+a/2,d=new Int32Array(3),f=this.image,m=0;m<a;m++){var g=c+((m&1)===0?Math.floor((m+1)/2):-Math.floor((m+1)/2));d[0]=0,d[1]=0,d[2]=0;for(var v=i;v<l&&!f.get(v,g);)v++;for(var y=0;v<l;){if(f.get(v,g))if(y===1)d[1]++;else if(y===2){if(this.foundPatternCross(d)){var A=this.handlePossibleCenter(d,g,v);if(A!==null)return A}d[0]=d[2],d[1]=1,d[2]=0,y=1}else d[++y]++;else y===1&&y++,d[y]++;v++}if(this.foundPatternCross(d)){var A=this.handlePossibleCenter(d,g,l);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new et},r.centerFromEnd=function(i,a){return a-i[2]-i[1]/2},r.prototype.foundPatternCross=function(i){for(var a=this.moduleSize,s=a/2,l=0;l<3;l++)if(Math.abs(a-i[l])>=s)return!1;return!0},r.prototype.crossCheckVertical=function(i,a,s,l){var c=this.image,d=c.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;for(var m=i;m>=0&&c.get(a,m)&&f[1]<=s;)f[1]++,m--;if(m<0||f[1]>s)return NaN;for(;m>=0&&!c.get(a,m)&&f[0]<=s;)f[0]++,m--;if(f[0]>s)return NaN;for(m=i+1;m<d&&c.get(a,m)&&f[1]<=s;)f[1]++,m++;if(m===d||f[1]>s)return NaN;for(;m<d&&!c.get(a,m)&&f[2]<=s;)f[2]++,m++;if(f[2]>s)return NaN;var g=f[0]+f[1]+f[2];return 5*Math.abs(g-l)>=2*l?NaN:this.foundPatternCross(f)?r.centerFromEnd(f,m):NaN},r.prototype.handlePossibleCenter=function(i,a,s){var l,c,d=i[0]+i[1]+i[2],f=r.centerFromEnd(i,s),m=this.crossCheckVertical(a,f,2*i[1],d);if(!isNaN(m)){var g=(i[0]+i[1]+i[2])/3;try{for(var v=$U(this.possibleCenters),y=v.next();!y.done;y=v.next()){var A=y.value;if(A.aboutEquals(g,m,f))return A.combineEstimate(m,f,g)}}catch(k){l={error:k}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}var w=new QU(f,m,g);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},r})(),XU=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),KU=(function(r){XU(i,r);function i(a,s,l,c){var d=r.call(this,a,s)||this;return d.estimatedModuleSize=l,d.count=c,c===void 0&&(d.count=1),d}return i.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},i.prototype.getCount=function(){return this.count},i.prototype.aboutEquals=function(a,s,l){if(Math.abs(s-this.getY())<=a&&Math.abs(l-this.getX())<=a){var c=Math.abs(a-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1},i.prototype.combineEstimate=function(a,s,l){var c=this.count+1,d=(this.count*this.getX()+s)/c,f=(this.count*this.getY()+a)/c,m=(this.count*this.estimatedModuleSize+l)/c;return new i(d,f,m,c)},i})(bn),JU=(function(){function r(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),Np=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ZU=(function(){function r(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(i){var a=i!=null&&i.get(qa.TRY_HARDER)!==void 0,s=i!=null&&i.get(qa.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),d=l.getWidth(),f=Math.floor(3*c/(4*r.MAX_MODULES));(f<r.MIN_SKIP||a)&&(f=r.MIN_SKIP);for(var m=!1,g=new Int32Array(5),v=f-1;v<c&&!m;v+=f){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;for(var y=0,A=0;A<d;A++)if(l.get(A,v))(y&1)===1&&y++,g[y]++;else if((y&1)===0)if(y===4)if(r.foundPatternCross(g)){var w=this.handlePossibleCenter(g,v,A,s);if(w===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{var k=this.findRowSkip();k>g[2]&&(v+=k-g[2]-f,A=d-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,y=3;continue}y=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,y=3;else g[++y]++;else g[y]++;if(r.foundPatternCross(g)){var w=this.handlePossibleCenter(g,v,d,s);w===!0&&(f=g[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}}var E=this.selectBestPatterns();return bn.orderBestPatterns(E),new JU(E)},r.centerFromEnd=function(i,a){return a-i[4]-i[3]-i[2]/2},r.foundPatternCross=function(i){for(var a=0,s=0;s<5;s++){var l=i[s];if(l===0)return!1;a+=l}if(a<7)return!1;var c=a/7,d=c/2;return Math.abs(c-i[0])<d&&Math.abs(c-i[1])<d&&Math.abs(3*c-i[2])<3*d&&Math.abs(c-i[3])<d&&Math.abs(c-i[4])<d},r.prototype.getCrossCheckStateCount=function(){var i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i},r.prototype.crossCheckDiagonal=function(i,a,s,l){for(var c=this.getCrossCheckStateCount(),d=0,f=this.image;i>=d&&a>=d&&f.get(a-d,i-d);)c[2]++,d++;if(i<d||a<d)return!1;for(;i>=d&&a>=d&&!f.get(a-d,i-d)&&c[1]<=s;)c[1]++,d++;if(i<d||a<d||c[1]>s)return!1;for(;i>=d&&a>=d&&f.get(a-d,i-d)&&c[0]<=s;)c[0]++,d++;if(c[0]>s)return!1;var m=f.getHeight(),g=f.getWidth();for(d=1;i+d<m&&a+d<g&&f.get(a+d,i+d);)c[2]++,d++;if(i+d>=m||a+d>=g)return!1;for(;i+d<m&&a+d<g&&!f.get(a+d,i+d)&&c[3]<s;)c[3]++,d++;if(i+d>=m||a+d>=g||c[3]>=s)return!1;for(;i+d<m&&a+d<g&&f.get(a+d,i+d)&&c[4]<s;)c[4]++,d++;if(c[4]>=s)return!1;var v=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(v-l)<2*l&&r.foundPatternCross(c)},r.prototype.crossCheckVertical=function(i,a,s,l){for(var c=this.image,d=c.getHeight(),f=this.getCrossCheckStateCount(),m=i;m>=0&&c.get(a,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(a,m)&&f[1]<=s;)f[1]++,m--;if(m<0||f[1]>s)return NaN;for(;m>=0&&c.get(a,m)&&f[0]<=s;)f[0]++,m--;if(f[0]>s)return NaN;for(m=i+1;m<d&&c.get(a,m);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!c.get(a,m)&&f[3]<s;)f[3]++,m++;if(m===d||f[3]>=s)return NaN;for(;m<d&&c.get(a,m)&&f[4]<s;)f[4]++,m++;if(f[4]>=s)return NaN;var g=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(g-l)>=2*l?NaN:r.foundPatternCross(f)?r.centerFromEnd(f,m):NaN},r.prototype.crossCheckHorizontal=function(i,a,s,l){for(var c=this.image,d=c.getWidth(),f=this.getCrossCheckStateCount(),m=i;m>=0&&c.get(m,a);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!c.get(m,a)&&f[1]<=s;)f[1]++,m--;if(m<0||f[1]>s)return NaN;for(;m>=0&&c.get(m,a)&&f[0]<=s;)f[0]++,m--;if(f[0]>s)return NaN;for(m=i+1;m<d&&c.get(m,a);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!c.get(m,a)&&f[3]<s;)f[3]++,m++;if(m===d||f[3]>=s)return NaN;for(;m<d&&c.get(m,a)&&f[4]<s;)f[4]++,m++;if(f[4]>=s)return NaN;var g=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(g-l)>=l?NaN:r.foundPatternCross(f)?r.centerFromEnd(f,m):NaN},r.prototype.handlePossibleCenter=function(i,a,s,l){var c=i[0]+i[1]+i[2]+i[3]+i[4],d=r.centerFromEnd(i,s),f=this.crossCheckVertical(a,Math.floor(d),i[2],c);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),i[2],c),!isNaN(d)&&(!l||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),i[2],c)))){for(var m=c/7,g=!1,v=this.possibleCenters,y=0,A=v.length;y<A;y++){var w=v[y];if(w.aboutEquals(m,f,d)){v[y]=w.combineEstimate(f,d,m),g=!0;break}}if(!g){var k=new KU(d,f,m);v.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1},r.prototype.findRowSkip=function(){var i,a,s=this.possibleCenters.length;if(s<=1)return 0;var l=null;try{for(var c=Np(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.getCount()>=r.CENTER_QUORUM)if(l==null)l=f;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-f.getX())-Math.abs(l.getY()-f.getY()))/2)}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var i,a,s,l,c=0,d=0,f=this.possibleCenters.length;try{for(var m=Np(this.possibleCenters),g=m.next();!g.done;g=m.next()){var v=g.value;v.getCount()>=r.CENTER_QUORUM&&(c++,d+=v.getEstimatedModuleSize())}}catch(E){i={error:E}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(c<3)return!1;var y=d/f,A=0;try{for(var w=Np(this.possibleCenters),k=w.next();!k.done;k=w.next()){var v=k.value;A+=Math.abs(v.getEstimatedModuleSize()-y)}}catch(E){s={error:E}}finally{try{k&&!k.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}return A<=.05*d},r.prototype.selectBestPatterns=function(){var i,a,s,l,c=this.possibleCenters.length;if(c<3)throw new et;var d=this.possibleCenters,f;if(c>3){var m=0,g=0;try{for(var v=Np(this.possibleCenters),y=v.next();!y.done;y=v.next()){var A=y.value,w=A.getEstimatedModuleSize();m+=w,g+=w*w}}catch(U){i={error:U}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}f=m/c;var k=Math.sqrt(g/c-f*f);d.sort(function(U,F){var P=Math.abs(F.getEstimatedModuleSize()-f),z=Math.abs(U.getEstimatedModuleSize()-f);return P<z?-1:P>z?1:0});for(var E=Math.max(.2*f,k),I=0;I<d.length&&d.length>3;I++){var T=d[I];Math.abs(T.getEstimatedModuleSize()-f)>E&&(d.splice(I,1),I--)}}if(d.length>3){var m=0;try{for(var N=Np(d),j=N.next();!j.done;j=N.next()){var B=j.value;m+=B.getEstimatedModuleSize()}}catch(F){s={error:F}}finally{try{j&&!j.done&&(l=N.return)&&l.call(N)}finally{if(s)throw s.error}}f=m/d.length,d.sort(function(F,P){if(P.getCount()===F.getCount()){var z=Math.abs(P.getEstimatedModuleSize()-f),V=Math.abs(F.getEstimatedModuleSize()-f);return z<V?1:z>V?-1:0}else return P.getCount()-F.getCount()}),d.splice(3)}return[d[0],d[1],d[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),eL=(function(){function r(i){this.image=i}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(i){this.resultPointCallback=i==null?null:i.get(qa.NEED_RESULT_POINT_CALLBACK);var a=new ZU(this.image,this.resultPointCallback),s=a.find(i);return this.processFinderPatternInfo(s)},r.prototype.processFinderPatternInfo=function(i){var a=i.getTopLeft(),s=i.getTopRight(),l=i.getBottomLeft(),c=this.calculateModuleSize(a,s,l);if(c<1)throw new et("No pattern found in proccess finder.");var d=r.computeDimension(a,s,l,c),f=$u.getProvisionalVersionForDimension(d),m=f.getDimensionForVersion()-7,g=null;if(f.getAlignmentPatternCenters().length>0)for(var v=s.getX()-a.getX()+l.getX(),y=s.getY()-a.getY()+l.getY(),A=1-3/m,w=Math.floor(a.getX()+A*(v-a.getX())),k=Math.floor(a.getY()+A*(y-a.getY())),E=4;E<=16;E<<=1)try{g=this.findAlignmentInRegion(c,w,k,E);break}catch(j){if(!(j instanceof et))throw j}var I=r.createTransform(a,s,l,g,d),T=r.sampleGrid(this.image,I,d),N;return g===null?N=[l,a,s]:N=[l,a,s,g],new Nw(T,N)},r.createTransform=function(i,a,s,l,c){var d=c-3.5,f,m,g,v;return l!==null?(f=l.getX(),m=l.getY(),g=d-3,v=g):(f=a.getX()-i.getX()+s.getX(),m=a.getY()-i.getY()+s.getY(),g=d,v=d),N7.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,g,v,3.5,d,i.getX(),i.getY(),a.getX(),a.getY(),f,m,s.getX(),s.getY())},r.sampleGrid=function(i,a,s){var l=Tw.getInstance();return l.sampleGridWithTransform(i,s,s,a)},r.computeDimension=function(i,a,s,l){var c=_r.round(bn.distance(i,a)/l),d=_r.round(bn.distance(i,s)/l),f=Math.floor((c+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new et("Dimensions could be not found.")}return f},r.prototype.calculateModuleSize=function(i,a,s){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,s))/2},r.prototype.calculateModuleSizeOneWay=function(i,a){var s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(s)?l/7:isNaN(l)?s/7:(s+l)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(i,a,s,l){var c=this.sizeOfBlackWhiteBlackRun(i,a,s,l),d=1,f=i-(s-i);f<0?(d=i/(i-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-i)/(f-i),f=this.image.getWidth()-1);var m=Math.floor(a-(l-a)*d);return d=1,m<0?(d=a/(a-m),m=0):m>=this.image.getHeight()&&(d=(this.image.getHeight()-1-a)/(m-a),m=this.image.getHeight()-1),f=Math.floor(i+(f-i)*d),c+=this.sizeOfBlackWhiteBlackRun(i,a,f,m),c-1},r.prototype.sizeOfBlackWhiteBlackRun=function(i,a,s,l){var c=Math.abs(l-a)>Math.abs(s-i);if(c){var d=i;i=a,a=d,d=s,s=l,l=d}for(var f=Math.abs(s-i),m=Math.abs(l-a),g=-f/2,v=i<s?1:-1,y=a<l?1:-1,A=0,w=s+v,k=i,E=a;k!==w;k+=v){var I=c?E:k,T=c?k:E;if(A===1===this.image.get(I,T)){if(A===2)return _r.distance(k,E,i,a);A++}if(g+=m,g>0){if(E===l)break;E+=y,g-=f}}return A===2?_r.distance(s+v,l,i,a):NaN},r.prototype.findAlignmentInRegion=function(i,a,s,l){var c=Math.floor(l*i),d=Math.max(0,a-c),f=Math.min(this.image.getWidth()-1,a+c);if(f-d<i*3)throw new et("Alignment top exceeds estimated module size.");var m=Math.max(0,s-c),g=Math.min(this.image.getHeight()-1,s+c);if(g-m<i*3)throw new et("Alignment bottom exceeds estimated module size.");var v=new WU(this.image,d,m,f-d,g-m,i,this.resultPointCallback);return v.find()},r})(),A4=(function(){function r(){this.decoder=new VU}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(i,a){var s,l;if(a!=null&&a.get(qa.PURE_BARCODE)!==void 0){var c=r.extractPureBits(i.getBlackMatrix());s=this.decoder.decodeBitMatrix(c,a),l=r.NO_POINTS}else{var d=new eL(i.getBlackMatrix()).detect(a);s=this.decoder.decodeBitMatrix(d.getBits(),a),l=d.getPoints()}s.getOther()instanceof j7&&s.getOther().applyMirroredCorrection(l);var f=new Ho(s.getText(),s.getRawBytes(),void 0,l,Pn.QR_CODE,void 0),m=s.getByteSegments();m!==null&&f.putMetadata(Ao.BYTE_SEGMENTS,m);var g=s.getECLevel();return g!==null&&f.putMetadata(Ao.ERROR_CORRECTION_LEVEL,g),s.hasStructuredAppend()&&(f.putMetadata(Ao.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),f.putMetadata(Ao.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),f},r.prototype.reset=function(){},r.extractPureBits=function(i){var a=i.getTopLeftOnBit(),s=i.getBottomRightOnBit();if(a===null||s===null)throw new et;var l=this.moduleSize(a,i),c=a[1],d=s[1],f=a[0],m=s[0];if(f>=m||c>=d)throw new et;if(d-c!==m-f&&(m=f+(d-c),m>=i.getWidth()))throw new et;var g=Math.round((m-f+1)/l),v=Math.round((d-c+1)/l);if(g<=0||v<=0)throw new et;if(v!==g)throw new et;var y=Math.floor(l/2);c+=y,f+=y;var A=f+Math.floor((g-1)*l)-m;if(A>0){if(A>y)throw new et;f-=A}var w=c+Math.floor((v-1)*l)-d;if(w>0){if(w>y)throw new et;c-=w}for(var k=new ac(g,v),E=0;E<v;E++)for(var I=c+Math.floor(E*l),T=0;T<g;T++)i.get(f+Math.floor(T*l),I)&&k.set(T,E);return k},r.moduleSize=function(i,a){for(var s=a.getHeight(),l=a.getWidth(),c=i[0],d=i[1],f=!0,m=0;c<l&&d<s;){if(f!==a.get(c,d)){if(++m===5)break;f=!f}c++,d++}if(c===l||d===s)throw new et;return(c-i[0])/7},r.NO_POINTS=new Array,r})(),tL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},vr=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(i){return _r.sum(i)},r.toIntArray=function(i){var a,s;if(i==null||!i.length)return r.EMPTY_INT_ARRAY;var l=new Int32Array(i.length),c=0;try{for(var d=tL(i),f=d.next();!f.done;f=d.next()){var m=f.value;l[c++]=m}}catch(g){a={error:g}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return l},r.getCodeword=function(i){var a=Gs.binarySearch(r.SYMBOL_TABLE,i&262143);return a<0?-1:(r.CODEWORD_TABLE[a]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),nL=(function(){function r(i,a){this.bits=i,this.points=a}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),iL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},rL=(function(){function r(){}return r.detectMultiple=function(i,a,s){var l=i.getBlackMatrix(),c=r.detect(s,l);return c.length||(l=l.clone(),l.rotate180(),c=r.detect(s,l)),new nL(l,c)},r.detect=function(i,a){for(var s,l,c=new Array,d=0,f=0,m=!1;d<a.getHeight();){var g=r.findVertices(a,d,f);if(g[0]==null&&g[3]==null){if(!m)break;m=!1,f=0;try{for(var v=(s=void 0,iL(c)),y=v.next();!y.done;y=v.next()){var A=y.value;A[1]!=null&&(d=Math.trunc(Math.max(d,A[1].getY()))),A[3]!=null&&(d=Math.max(d,Math.trunc(A[3].getY())))}}catch(w){s={error:w}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}d+=r.ROW_STEP;continue}if(m=!0,c.push(g),!i)break;g[2]!=null?(f=Math.trunc(g[2].getX()),d=Math.trunc(g[2].getY())):(f=Math.trunc(g[4].getX()),d=Math.trunc(g[4].getY()))}return c},r.findVertices=function(i,a,s){var l=i.getHeight(),c=i.getWidth(),d=new Array(8);return r.copyToResult(d,r.findRowsWithPattern(i,l,c,a,s,r.START_PATTERN),r.INDEXES_START_PATTERN),d[4]!=null&&(s=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY())),r.copyToResult(d,r.findRowsWithPattern(i,l,c,a,s,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),d},r.copyToResult=function(i,a,s){for(var l=0;l<s.length;l++)i[s[l]]=a[l]},r.findRowsWithPattern=function(i,a,s,l,c,d){for(var f=new Array(4),m=!1,g=new Int32Array(d.length);l<a;l+=r.ROW_STEP){var v=r.findGuardPattern(i,c,l,s,!1,d,g);if(v!=null){for(;l>0;){var y=r.findGuardPattern(i,c,--l,s,!1,d,g);if(y!=null)v=y;else{l++;break}}f[0]=new bn(v[0],l),f[1]=new bn(v[1],l),m=!0;break}}var A=l+1;if(m){for(var w=0,y=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);A<a;A++){var v=r.findGuardPattern(i,y[0],A,s,!1,d,g);if(v!=null&&Math.abs(y[0]-v[0])<r.MAX_PATTERN_DRIFT&&Math.abs(y[1]-v[1])<r.MAX_PATTERN_DRIFT)y=v,w=0;else{if(w>r.SKIPPED_ROW_COUNT_MAX)break;w++}}A-=w+1,f[2]=new bn(y[0],A),f[3]=new bn(y[1],A)}return A-l<r.BARCODE_MIN_HEIGHT&&Gs.fill(f,null),f},r.findGuardPattern=function(i,a,s,l,c,d,f){Gs.fillWithin(f,0,f.length,0);for(var m=a,g=0;i.get(m,s)&&m>0&&g++<r.MAX_PIXEL_DRIFT;)m--;for(var v=m,y=0,A=d.length,w=c;v<l;v++){var k=i.get(v,s);if(k!==w)f[y]++;else{if(y===A-1){if(r.patternMatchVariance(f,d,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([m,v]);m+=f[0]+f[1],Ca.arraycopy(f,2,f,0,y-1),f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,w=!w}}return y===A-1&&r.patternMatchVariance(f,d,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([m,v-1]):null},r.patternMatchVariance=function(i,a,s){for(var l=i.length,c=0,d=0,f=0;f<l;f++)c+=i[f],d+=a[f];if(c<d)return 1/0;var m=c/d;s*=m;for(var g=0,v=0;v<l;v++){var y=i[v],A=a[v]*m,w=y>A?y-A:A-y;if(w>s)return 1/0;g+=w}return g/c},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),aL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Gu=(function(){function r(i,a){if(a.length===0)throw new Ln;this.field=i;var s=a.length;if(s>1&&a[0]===0){for(var l=1;l<s&&a[l]===0;)l++;l===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-l),Ca.arraycopy(a,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(i){return this.coefficients[this.coefficients.length-1-i]},r.prototype.evaluateAt=function(i){var a,s;if(i===0)return this.getCoefficient(0);if(i===1){var l=0;try{for(var c=aL(this.coefficients),d=c.next();!d.done;d=c.next()){var f=d.value;l=this.field.add(l,f)}}catch(y){a={error:y}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return l}for(var m=this.coefficients[0],g=this.coefficients.length,v=1;v<g;v++)m=this.field.add(this.field.multiply(i,m),this.coefficients[v]);return m},r.prototype.add=function(i){if(!this.field.equals(i.field))throw new Ln("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;var a=this.coefficients,s=i.coefficients;if(a.length>s.length){var l=a;a=s,s=l}var c=new Int32Array(s.length),d=s.length-a.length;Ca.arraycopy(s,0,c,0,d);for(var f=d;f<s.length;f++)c[f]=this.field.add(a[f-d],s[f]);return new r(this.field,c)},r.prototype.subtract=function(i){if(!this.field.equals(i.field))throw new Ln("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())},r.prototype.multiply=function(i){return i instanceof r?this.multiplyOther(i):this.multiplyScalar(i)},r.prototype.multiplyOther=function(i){if(!this.field.equals(i.field))throw new Ln("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new r(this.field,new Int32Array([0]));for(var a=this.coefficients,s=a.length,l=i.coefficients,c=l.length,d=new Int32Array(s+c-1),f=0;f<s;f++)for(var m=a[f],g=0;g<c;g++)d[f+g]=this.field.add(d[f+g],this.field.multiply(m,l[g]));return new r(this.field,d)},r.prototype.negative=function(){for(var i=this.coefficients.length,a=new Int32Array(i),s=0;s<i;s++)a[s]=this.field.subtract(0,this.coefficients[s]);return new r(this.field,a)},r.prototype.multiplyScalar=function(i){if(i===0)return new r(this.field,new Int32Array([0]));if(i===1)return this;for(var a=this.coefficients.length,s=new Int32Array(a),l=0;l<a;l++)s[l]=this.field.multiply(this.coefficients[l],i);return new r(this.field,s)},r.prototype.multiplyByMonomial=function(i,a){if(i<0)throw new Ln;if(a===0)return new r(this.field,new Int32Array([0]));for(var s=this.coefficients.length,l=new Int32Array(s+i),c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],a);return new r(this.field,l)},r.prototype.toString=function(){for(var i=new ji,a=this.getDegree();a>=0;a--){var s=this.getCoefficient(a);s!==0&&(s<0?(i.append(" - "),s=-s):i.length()>0&&i.append(" + "),(a===0||s!==1)&&i.append(s),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()},r})(),sL=(function(){function r(){}return r.prototype.add=function(i,a){return(i+a)%this.modulus},r.prototype.subtract=function(i,a){return(this.modulus+i-a)%this.modulus},r.prototype.exp=function(i){return this.expTable[i]},r.prototype.log=function(i){if(i===0)throw new Ln;return this.logTable[i]},r.prototype.inverse=function(i){if(i===0)throw new I7;return this.expTable[this.modulus-this.logTable[i]-1]},r.prototype.multiply=function(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(i){return i===this},r})(),oL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),lL=(function(r){oL(i,r);function i(a,s){var l=r.call(this)||this;l.modulus=a,l.expTable=new Int32Array(a),l.logTable=new Int32Array(a);for(var c=1,d=0;d<a;d++)l.expTable[d]=c,c=c*s%a;for(var d=0;d<a-1;d++)l.logTable[l.expTable[d]]=d;return l.zero=new Gu(l,new Int32Array([0])),l.one=new Gu(l,new Int32Array([1])),l}return i.prototype.getZero=function(){return this.zero},i.prototype.getOne=function(){return this.one},i.prototype.buildMonomial=function(a,s){if(a<0)throw new Ln;if(s===0)return this.zero;var l=new Int32Array(a+1);return l[0]=s,new Gu(this,l)},i.PDF417_GF=new i(vr.NUMBER_OF_CODEWORDS,3),i})(sL),cL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},dL=(function(){function r(){this.field=lL.PDF417_GF}return r.prototype.decode=function(i,a,s){for(var l,c,d=new Gu(this.field,i),f=new Int32Array(a),m=!1,g=a;g>0;g--){var v=d.evaluateAt(this.field.exp(g));f[a-g]=v,v!==0&&(m=!0)}if(!m)return 0;var y=this.field.getOne();if(s!=null)try{for(var A=cL(s),w=A.next();!w.done;w=A.next()){var k=w.value,E=this.field.exp(i.length-1-k),I=new Gu(this.field,new Int32Array([this.field.subtract(0,E),1]));y=y.multiply(I)}}catch(z){l={error:z}}finally{try{w&&!w.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}for(var T=new Gu(this.field,f),N=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),T,a),j=N[0],B=N[1],U=this.findErrorLocations(j),F=this.findErrorMagnitudes(B,j,U),g=0;g<U.length;g++){var P=i.length-1-this.field.log(U[g]);if(P<0)throw ao.getChecksumInstance();i[P]=this.field.subtract(i[P],F[g])}return U.length},r.prototype.runEuclideanAlgorithm=function(i,a,s){if(i.getDegree()<a.getDegree()){var l=i;i=a,a=l}for(var c=i,d=a,f=this.field.getZero(),m=this.field.getOne();d.getDegree()>=Math.round(s/2);){var g=c,v=f;if(c=d,f=m,c.isZero())throw ao.getChecksumInstance();d=g;for(var y=this.field.getZero(),A=c.getCoefficient(c.getDegree()),w=this.field.inverse(A);d.getDegree()>=c.getDegree()&&!d.isZero();){var k=d.getDegree()-c.getDegree(),E=this.field.multiply(d.getCoefficient(d.getDegree()),w);y=y.add(this.field.buildMonomial(k,E)),d=d.subtract(c.multiplyByMonomial(k,E))}m=y.multiply(f).subtract(v).negative()}var I=m.getCoefficient(0);if(I===0)throw ao.getChecksumInstance();var T=this.field.inverse(I),N=m.multiply(T),j=d.multiply(T);return[N,j]},r.prototype.findErrorLocations=function(i){for(var a=i.getDegree(),s=new Int32Array(a),l=0,c=1;c<this.field.getSize()&&l<a;c++)i.evaluateAt(c)===0&&(s[l]=this.field.inverse(c),l++);if(l!==a)throw ao.getChecksumInstance();return s},r.prototype.findErrorMagnitudes=function(i,a,s){for(var l=a.getDegree(),c=new Int32Array(l),d=1;d<=l;d++)c[l-d]=this.field.multiply(d,a.getCoefficient(d));for(var f=new Gu(this.field,c),m=s.length,g=new Int32Array(m),d=0;d<m;d++){var v=this.field.inverse(s[d]),y=this.field.subtract(0,i.evaluateAt(v)),A=this.field.inverse(f.evaluateAt(v));g[d]=this.field.multiply(y,A)}return g},r})(),S4=(function(){function r(i,a,s,l,c){i instanceof r?this.constructor_2(i):this.constructor_1(i,a,s,l,c)}return r.prototype.constructor_1=function(i,a,s,l,c){var d=a==null||s==null,f=l==null||c==null;if(d&&f)throw new et;d?(a=new bn(0,l.getY()),s=new bn(0,c.getY())):f&&(l=new bn(i.getWidth()-1,a.getY()),c=new bn(i.getWidth()-1,s.getY())),this.image=i,this.topLeft=a,this.bottomLeft=s,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(a.getX(),s.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(a.getY(),l.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))},r.prototype.constructor_2=function(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()},r.merge=function(i,a){return i==null?a:a==null?i:new r(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)},r.prototype.addMissingRows=function(i,a,s){var l=this.topLeft,c=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(i>0){var m=s?this.topLeft:this.topRight,g=Math.trunc(m.getY()-i);g<0&&(g=0);var v=new bn(m.getX(),g);s?l=v:d=v}if(a>0){var y=s?this.bottomLeft:this.bottomRight,A=Math.trunc(y.getY()+a);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);var w=new bn(y.getX(),A);s?c=w:f=w}return new r(this.image,l,c,d,f)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),uL=(function(){function r(i,a,s,l){this.columnCount=i,this.errorCorrectionLevel=l,this.rowCountUpperPart=a,this.rowCountLowerPart=s,this.rowCount=a+s}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),Rw=(function(){function r(){this.buffer=""}return r.form=function(i,a){var s=-1;function l(d,f,m,g,v,y){if(d==="%%")return"%";if(a[++s]!==void 0){d=g?parseInt(g.substr(1)):void 0;var A=v?parseInt(v.substr(1)):void 0,w;switch(y){case"s":w=a[s];break;case"c":w=a[s][0];break;case"f":w=parseFloat(a[s]).toFixed(d);break;case"p":w=parseFloat(a[s]).toPrecision(d);break;case"e":w=parseFloat(a[s]).toExponential(d);break;case"x":w=parseInt(a[s]).toString(A||16);break;case"d":w=parseFloat(parseInt(a[s],A||10).toPrecision(d)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(A);for(var k=parseInt(m),E=m&&m[0]+""=="0"?"0":" ";w.length<k;)w=f!==void 0?w+E:E+w;return w}}var c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(c,l)},r.prototype.format=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];this.buffer+=r.form(i,a)},r.prototype.toString=function(){return this.buffer},r})(),fL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},B7=(function(){function r(i){this.boundingBox=new S4(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}return r.prototype.getCodewordNearby=function(i){var a=this.getCodeword(i);if(a!=null)return a;for(var s=1;s<r.MAX_NEARBY_DISTANCE;s++){var l=this.imageRowToCodewordIndex(i)-s;if(l>=0&&(a=this.codewords[l],a!=null)||(l=this.imageRowToCodewordIndex(i)+s,l<this.codewords.length&&(a=this.codewords[l],a!=null)))return a}return null},r.prototype.imageRowToCodewordIndex=function(i){return i-this.boundingBox.getMinY()},r.prototype.setCodeword=function(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a},r.prototype.getCodeword=function(i){return this.codewords[this.imageRowToCodewordIndex(i)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var i,a,s=new Rw,l=0;try{for(var c=fL(this.codewords),d=c.next();!d.done;d=c.next()){var f=d.value;if(f==null){s.format("%3d:    |   %n",l++);continue}s.format("%3d: %3d|%3d%n",l++,f.getRowNumber(),f.getValue())}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),hL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},pL=function(r,i){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var s=a.call(r),l,c=[],d;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(f){d={error:f}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(d)throw d.error}}return c},Gp=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(i){i=Math.trunc(i);var a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)},r.prototype.getValue=function(){var i,a,s=-1,l=new Array,c=function(y,A){var w={getKey:function(){return y},getValue:function(){return A}};w.getValue()>s?(s=w.getValue(),l=[],l.push(w.getKey())):w.getValue()===s&&l.push(w.getKey())};try{for(var d=hL(this.values.entries()),f=d.next();!f.done;f=d.next()){var m=pL(f.value,2),g=m[0],v=m[1];c(g,v)}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return vr.toIntArray(l)},r.prototype.getConfidence=function(i){return this.values.get(i)},r})(),mL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),cy=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Y8=(function(r){mL(i,r);function i(a,s){var l=r.call(this,a)||this;return l._isLeft=s,l}return i.prototype.setRowNumbers=function(){var a,s;try{for(var l=cy(this.getCodewords()),c=l.next();!c.done;c=l.next()){var d=c.value;d?.setRowNumberAsRowIndicatorColumn()}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},i.prototype.adjustCompleteIndicatorColumnRowNumbers=function(a){var s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,a);for(var l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=-1,v=1,y=0,A=f;A<m;A++)if(s[A]!=null){var w=s[A],k=w.getRowNumber()-g;if(k===0)y++;else if(k===1)v=Math.max(v,y),y=1,g=w.getRowNumber();else if(k<0||w.getRowNumber()>=a.getRowCount()||k>A)s[A]=null;else{var E=void 0;v>2?E=(v-2)*k:E=k;for(var I=E>=A,T=1;T<=E&&!I;T++)I=s[A-T]!=null;I?s[A]=null:(g=w.getRowNumber(),y=1)}}},i.prototype.getRowHeights=function(){var a,s,l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);var c=new Int32Array(l.getRowCount());try{for(var d=cy(this.getCodewords()),f=d.next();!f.done;f=d.next()){var m=f.value;if(m!=null){var g=m.getRowNumber();if(g>=c.length)continue;c[g]++}}}catch(v){a={error:v}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return c},i.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(a){for(var s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),g=-1,v=d;v<f;v++)if(m[v]!=null){var y=m[v];y.setRowNumberAsRowIndicatorColumn();var A=y.getRowNumber()-g;A===0||(A===1?g=y.getRowNumber():y.getRowNumber()>=a.getRowCount()?m[v]=null:g=y.getRowNumber())}},i.prototype.getBarcodeMetadata=function(){var a,s,l=this.getCodewords(),c=new Gp,d=new Gp,f=new Gp,m=new Gp;try{for(var g=cy(l),v=g.next();!v.done;v=g.next()){var y=v.value;if(y!=null){y.setRowNumberAsRowIndicatorColumn();var A=y.getValue()%30,w=y.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:d.setValue(A*3+1);break;case 1:m.setValue(A/3),f.setValue(A%3);break;case 2:c.setValue(A+1);break}}}}catch(E){a={error:E}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(c.getValue().length===0||d.getValue().length===0||f.getValue().length===0||m.getValue().length===0||c.getValue()[0]<1||d.getValue()[0]+f.getValue()[0]<vr.MIN_ROWS_IN_BARCODE||d.getValue()[0]+f.getValue()[0]>vr.MAX_ROWS_IN_BARCODE)return null;var k=new uL(c.getValue()[0],d.getValue()[0],f.getValue()[0],m.getValue()[0]);return this.removeIncorrectCodewords(l,k),k},i.prototype.removeIncorrectCodewords=function(a,s){for(var l=0;l<a.length;l++){var c=a[l];if(a[l]!=null){var d=c.getValue()%30,f=c.getRowNumber();if(f>s.getRowCount()){a[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(a[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(a[l]=null);break;case 2:d+1!==s.getColumnCount()&&(a[l]=null);break}}}},i.prototype.isLeft=function(){return this._isLeft},i.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},i})(B7),gL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},vL=(function(){function r(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var i=vr.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var i=this.adjustRowNumbersByRow();if(i===0)return 0;for(var a=1;a<this.barcodeColumnCount+1;a++)for(var s=this.detectionResultColumns[a].getCodewords(),l=0;l<s.length;l++)s[l]!=null&&(s[l].hasValidRowNumber()||this.adjustRowNumbers(a,l,s));return i},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var i=this.adjustRowNumbersFromLRI();return i+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<i.length;s++)if(i[s]!=null&&a[s]!=null&&i[s].getRowNumber()===a[s].getRowNumber())for(var l=1;l<=this.barcodeColumnCount;l++){var c=this.detectionResultColumns[l].getCodewords()[s];c!=null&&(c.setRowNumber(i[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[s]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<a.length;s++)if(a[s]!=null)for(var l=a[s].getRowNumber(),c=0,d=this.barcodeColumnCount+1;d>0&&c<this.ADJUST_ROW_NUMBER_SKIP;d--){var f=this.detectionResultColumns[d].getCodewords()[s];f!=null&&(c=r.adjustRowNumberIfValid(l,c,f),f.hasValidRowNumber()||i++)}return i},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var i=0,a=this.detectionResultColumns[0].getCodewords(),s=0;s<a.length;s++)if(a[s]!=null)for(var l=a[s].getRowNumber(),c=0,d=1;d<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;d++){var f=this.detectionResultColumns[d].getCodewords()[s];f!=null&&(c=r.adjustRowNumberIfValid(l,c,f),f.hasValidRowNumber()||i++)}return i},r.adjustRowNumberIfValid=function(i,a,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(i)?(s.setRowNumber(i),a=0):++a),a},r.prototype.adjustRowNumbers=function(i,a,s){var l,c;if(this.detectionResultColumns[i-1]!=null){var d=s[a],f=this.detectionResultColumns[i-1].getCodewords(),m=f;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());var g=new Array(14);g[2]=f[a],g[3]=m[a],a>0&&(g[0]=s[a-1],g[4]=f[a-1],g[5]=m[a-1]),a>1&&(g[8]=s[a-2],g[10]=f[a-2],g[11]=m[a-2]),a<s.length-1&&(g[1]=s[a+1],g[6]=f[a+1],g[7]=m[a+1]),a<s.length-2&&(g[9]=s[a+2],g[12]=f[a+2],g[13]=m[a+2]);try{for(var v=gL(g),y=v.next();!y.done;y=v.next()){var A=y.value;if(r.adjustRowNumber(d,A))return}}catch(w){l={error:w}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}}},r.adjustRowNumber=function(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(i){this.boundingBox=i},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(i,a){this.detectionResultColumns[i]=a},r.prototype.getDetectionResultColumn=function(i){return this.detectionResultColumns[i]},r.prototype.toString=function(){var i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var a=new Rw,s=0;s<i.getCodewords().length;s++){a.format("CW %3d:",s);for(var l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){a.format("    |   ");continue}var c=this.detectionResultColumns[l].getCodewords()[s];if(c==null){a.format("    |   ");continue}a.format(" %3d|%3d",c.getRowNumber(),c.getValue())}a.format("%n")}return a.toString()},r})(),xL=(function(){function r(i,a,s,l){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(s),this.value=Math.trunc(l)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(i){return i!==r.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(i){this.rowNumber=i},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),bL=(function(){function r(){}return r.initialize=function(){for(var i=0;i<vr.SYMBOL_TABLE.length;i++)for(var a=vr.SYMBOL_TABLE[i],s=a&1,l=0;l<vr.BARS_IN_MODULE;l++){for(var c=0;(a&1)===s;)c+=1,a>>=1;s=a&1,r.RATIOS_TABLE[i]||(r.RATIOS_TABLE[i]=new Array(vr.BARS_IN_MODULE)),r.RATIOS_TABLE[i][vr.BARS_IN_MODULE-l-1]=Math.fround(c/vr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(i){var a=r.getDecodedCodewordValue(r.sampleBitCounts(i));return a!==-1?a:r.getClosestDecodedValue(i)},r.sampleBitCounts=function(i){for(var a=_r.sum(i),s=new Int32Array(vr.BARS_IN_MODULE),l=0,c=0,d=0;d<vr.MODULES_IN_CODEWORD;d++){var f=a/(2*vr.MODULES_IN_CODEWORD)+d*a/vr.MODULES_IN_CODEWORD;c+i[l]<=f&&(c+=i[l],l++),s[l]++}return s},r.getDecodedCodewordValue=function(i){var a=r.getBitValue(i);return vr.getCodeword(a)===-1?-1:a},r.getBitValue=function(i){for(var a=0,s=0;s<i.length;s++)for(var l=0;l<i[s];l++)a=a<<1|(s%2===0?1:0);return Math.trunc(a)},r.getClosestDecodedValue=function(i){var a=_r.sum(i),s=new Array(vr.BARS_IN_MODULE);if(a>1)for(var l=0;l<s.length;l++)s[l]=Math.fround(i[l]/a);var c=v4.MAX_VALUE,d=-1;this.bSymbolTableReady||r.initialize();for(var f=0;f<r.RATIOS_TABLE.length;f++){for(var m=0,g=r.RATIOS_TABLE[f],v=0;v<vr.BARS_IN_MODULE;v++){var y=Math.fround(g[v]-s[v]);if(m+=Math.fround(y*y),m>=c)break}m<c&&(c=m,d=vr.SYMBOL_TABLE[f])}return d},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(vr.SYMBOL_TABLE.length).map(function(i){return new Array(vr.BARS_IN_MODULE)}),r})(),yL=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(i){this.segmentIndex=i},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(i){this.fileId=i},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(i){this.optionalData=i},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(i){this.lastSegment=i},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(i){this.segmentCount=i},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(i){this.sender=i},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(i){this.addressee=i},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(i){this.fileName=i},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(i){this.fileSize=i},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(i){this.checksum=i},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(i){this.timestamp=i},r})(),Q8=(function(){function r(){}return r.parseLong=function(i,a){return a===void 0&&(a=void 0),parseInt(i,a)},r})(),wL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),AL=(function(r){wL(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="NullPointerException",i})(_l),SL=(function(){function r(){}return r.prototype.writeBytes=function(i){this.writeBytesOffset(i,0,i.length)},r.prototype.writeBytesOffset=function(i,a,s){if(i==null)throw new AL;if(a<0||a>i.length||s<0||a+s>i.length||a+s<0)throw new _w;if(s===0)return;for(var l=0;l<s;l++)this.write(i[a+l])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),kL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),CL=(function(r){kL(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i})(_l),EL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),_L=(function(r){EL(i,r);function i(a){a===void 0&&(a=32);var s=r.call(this)||this;if(s.count=0,a<0)throw new Ln("Negative initial size: "+a);return s.buf=new Uint8Array(a),s}return i.prototype.ensureCapacity=function(a){a-this.buf.length>0&&this.grow(a)},i.prototype.grow=function(a){var s=this.buf.length,l=s<<1;if(l-a<0&&(l=a),l<0){if(a<0)throw new CL;l=Ui.MAX_VALUE}this.buf=Gs.copyOfUint8Array(this.buf,l)},i.prototype.write=function(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1},i.prototype.writeBytesOffset=function(a,s,l){if(s<0||s>a.length||l<0||s+l-a.length>0)throw new _w;this.ensureCapacity(this.count+l),Ca.arraycopy(a,s,this.buf,this.count,l),this.count+=l},i.prototype.writeTo=function(a){a.writeBytesOffset(this.buf,0,this.count)},i.prototype.reset=function(){this.count=0},i.prototype.toByteArray=function(){return Gs.copyOfUint8Array(this.buf,this.count)},i.prototype.size=function(){return this.count},i.prototype.toString=function(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()},i.prototype.toString_void=function(){return new String(this.buf).toString()},i.prototype.toString_string=function(a){return new String(this.buf).toString()},i.prototype.toString_number=function(a){return new String(this.buf).toString()},i.prototype.close=function(){},i})(SL),ha;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ha||(ha={}));function P7(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var u3;function vd(r){if(typeof u3>"u"&&(u3=P7()),u3===null)throw new Error("BigInt is not supported!");return u3(r)}function IL(){var r=[];r[0]=vd(1);var i=vd(900);r[1]=i;for(var a=2;a<16;a++)r[a]=r[a-1]*i;return r}var NL=(function(){function r(){}return r.decode=function(i,a){var s=new ji(""),l=qs.ISO8859_1;s.enableDecoding(l);for(var c=1,d=i[c++],f=new yL;c<i[0];){switch(d){case r.TEXT_COMPACTION_MODE_LATCH:c=r.textCompaction(i,c,s);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:c=r.byteCompaction(d,i,l,c,s);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[c++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:c=r.numericCompaction(i,c,s);break;case r.ECI_CHARSET:qs.getCharacterSetECIByValue(i[c++]);break;case r.ECI_GENERAL_PURPOSE:c+=2;break;case r.ECI_USER_DEFINED:c++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=r.decodeMacroBlock(i,c,f);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new Ut;default:c--,c=r.textCompaction(i,c,s);break}if(c<i.length)d=i[c++];else throw Ut.getFormatInstance()}if(s.length()===0)throw Ut.getFormatInstance();var m=new Ux(null,s.toString(),null,a);return m.setOther(f),m},r.decodeMacroBlock=function(i,a,s){if(a+r.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw Ut.getFormatInstance();for(var l=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),c=0;c<r.NUMBER_OF_SEQUENCE_CODEWORDS;c++,a++)l[c]=i[a];s.setSegmentIndex(Ui.parseInt(r.decodeBase900toBase10(l,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var d=new ji;a=r.textCompaction(i,a,d),s.setFileId(d.toString());var f=-1;for(i[a]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<i[0];)switch(i[a]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var m=new ji;a=r.textCompaction(i,a+1,m),s.setFileName(m.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var g=new ji;a=r.textCompaction(i,a+1,g),s.setSender(g.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var v=new ji;a=r.textCompaction(i,a+1,v),s.setAddressee(v.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var y=new ji;a=r.numericCompaction(i,a+1,y),s.setSegmentCount(Ui.parseInt(y.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var A=new ji;a=r.numericCompaction(i,a+1,A),s.setTimestamp(Q8.parseLong(A.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var w=new ji;a=r.numericCompaction(i,a+1,w),s.setChecksum(Ui.parseInt(w.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var k=new ji;a=r.numericCompaction(i,a+1,k),s.setFileSize(Q8.parseLong(k.toString()));break;default:throw Ut.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:a++,s.setLastSegment(!0);break;default:throw Ut.getFormatInstance()}if(f!==-1){var E=a-f;s.isLastSegment()&&E--,s.setOptionalData(Gs.copyOfRange(i,f,f+E))}return a},r.textCompaction=function(i,a,s){for(var l=new Int32Array((i[0]-a)*2),c=new Int32Array((i[0]-a)*2),d=0,f=!1;a<i[0]&&!f;){var m=i[a++];if(m<r.TEXT_COMPACTION_MODE_LATCH)l[d]=m/30,l[d+1]=m%30,d+=2;else switch(m){case r.TEXT_COMPACTION_MODE_LATCH:l[d++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,f=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[d]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=i[a++],c[d]=m,d++;break}}return r.decodeTextCompaction(l,c,d,s),a},r.decodeTextCompaction=function(i,a,s,l){for(var c=ha.ALPHA,d=ha.ALPHA,f=0;f<s;){var m=i[f],g="";switch(c){case ha.ALPHA:if(m<26)g=String.fromCharCode(65+m);else switch(m){case 26:g=" ";break;case r.LL:c=ha.LOWER;break;case r.ML:c=ha.MIXED;break;case r.PS:d=c,c=ha.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:c=ha.ALPHA;break}break;case ha.LOWER:if(m<26)g=String.fromCharCode(97+m);else switch(m){case 26:g=" ";break;case r.AS:d=c,c=ha.ALPHA_SHIFT;break;case r.ML:c=ha.MIXED;break;case r.PS:d=c,c=ha.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:c=ha.ALPHA;break}break;case ha.MIXED:if(m<r.PL)g=r.MIXED_CHARS[m];else switch(m){case r.PL:c=ha.PUNCT;break;case 26:g=" ";break;case r.LL:c=ha.LOWER;break;case r.AL:c=ha.ALPHA;break;case r.PS:d=c,c=ha.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:c=ha.ALPHA;break}break;case ha.PUNCT:if(m<r.PAL)g=r.PUNCT_CHARS[m];else switch(m){case r.PAL:c=ha.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:c=ha.ALPHA;break}break;case ha.ALPHA_SHIFT:if(c=d,m<26)g=String.fromCharCode(65+m);else switch(m){case 26:g=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:c=ha.ALPHA;break}break;case ha.PUNCT_SHIFT:if(c=d,m<r.PAL)g=r.PUNCT_CHARS[m];else switch(m){case r.PAL:c=ha.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[f]);break;case r.TEXT_COMPACTION_MODE_LATCH:c=ha.ALPHA;break}break}g!==""&&l.append(g),f++}},r.byteCompaction=function(i,a,s,l,c){var d=new _L,f=0,m=0,g=!1;switch(i){case r.BYTE_COMPACTION_MODE_LATCH:for(var v=new Int32Array(6),y=a[l++];l<a[0]&&!g;)switch(v[f++]=y,m=900*m+y,y=a[l++],y){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:l--,g=!0;break;default:if(f%5===0&&f>0){for(var A=0;A<6;++A)d.write(Number(vd(m)>>vd(8*(5-A))));m=0,f=0}break}l===a[0]&&y<r.TEXT_COMPACTION_MODE_LATCH&&(v[f++]=y);for(var w=0;w<f;w++)d.write(v[w]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;l<a[0]&&!g;){var k=a[l++];if(k<r.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+k;else switch(k){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:l--,g=!0;break}if(f%5===0&&f>0){for(var A=0;A<6;++A)d.write(Number(vd(m)>>vd(8*(5-A))));m=0,f=0}}break}return c.append(l1.decode(d.toByteArray(),s)),l},r.numericCompaction=function(i,a,s){for(var l=0,c=!1,d=new Int32Array(r.MAX_NUMERIC_CODEWORDS);a<i[0]&&!c;){var f=i[a++];if(a===i[0]&&(c=!0),f<r.TEXT_COMPACTION_MODE_LATCH)d[l]=f,l++;else switch(f){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break}(l%r.MAX_NUMERIC_CODEWORDS===0||f===r.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(s.append(r.decodeBase900toBase10(d,l)),l=0)}return a},r.decodeBase900toBase10=function(i,a){for(var s=vd(0),l=0;l<a;l++)s+=r.EXP900[a-l-1]*vd(i[l]);var c=s.toString();if(c.charAt(0)!=="1")throw new Ut;return c.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=P7()?IL():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),Tp=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},TL=(function(){function r(){}return r.decode=function(i,a,s,l,c,d,f){for(var m=new S4(i,a,s,l,c),g=null,v=null,y,A=!0;;A=!1){if(a!=null&&(g=r.getRowIndicatorColumn(i,m,a,!0,d,f)),l!=null&&(v=r.getRowIndicatorColumn(i,m,l,!1,d,f)),y=r.merge(g,v),y==null)throw et.getNotFoundInstance();var w=y.getBoundingBox();if(A&&w!=null&&(w.getMinY()<m.getMinY()||w.getMaxY()>m.getMaxY()))m=w;else break}y.setBoundingBox(m);var k=y.getBarcodeColumnCount()+1;y.setDetectionResultColumn(0,g),y.setDetectionResultColumn(k,v);for(var E=g!=null,I=1;I<=k;I++){var T=E?I:k-I;if(y.getDetectionResultColumn(T)===void 0){var N=void 0;T===0||T===k?N=new Y8(m,T===0):N=new B7(m),y.setDetectionResultColumn(T,N);for(var j=-1,B=j,U=m.getMinY();U<=m.getMaxY();U++){if(j=r.getStartColumn(y,T,U,E),j<0||j>m.getMaxX()){if(B===-1)continue;j=B}var F=r.detectCodeword(i,m.getMinX(),m.getMaxX(),E,j,U,d,f);F!=null&&(N.setCodeword(U,F),B=j,d=Math.min(d,F.getWidth()),f=Math.max(f,F.getWidth()))}}}return r.createDecoderResult(y)},r.merge=function(i,a){if(i==null&&a==null)return null;var s=r.getBarcodeMetadata(i,a);if(s==null)return null;var l=S4.merge(r.adjustBoundingBox(i),r.adjustBoundingBox(a));return new vL(s,l)},r.adjustBoundingBox=function(i){var a,s;if(i==null)return null;var l=i.getRowHeights();if(l==null)return null;var c=r.getMax(l),d=0;try{for(var f=Tp(l),m=f.next();!m.done;m=f.next()){var g=m.value;if(d+=c-g,g>0)break}}catch(w){a={error:w}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}for(var v=i.getCodewords(),y=0;d>0&&v[y]==null;y++)d--;for(var A=0,y=l.length-1;y>=0&&(A+=c-l[y],!(l[y]>0));y--);for(var y=v.length-1;A>0&&v[y]==null;y--)A--;return i.getBoundingBox().addMissingRows(d,A,i.isLeft())},r.getMax=function(i){var a,s,l=-1;try{for(var c=Tp(i),d=c.next();!d.done;d=c.next()){var f=d.value;l=Math.max(l,f)}}catch(m){a={error:m}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return l},r.getBarcodeMetadata=function(i,a){var s;if(i==null||(s=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();var l;return a==null||(l=a.getBarcodeMetadata())==null?s:s.getColumnCount()!==l.getColumnCount()&&s.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&s.getRowCount()!==l.getRowCount()?null:s},r.getRowIndicatorColumn=function(i,a,s,l,c,d){for(var f=new Y8(a,l),m=0;m<2;m++)for(var g=m===0?1:-1,v=Math.trunc(Math.trunc(s.getX())),y=Math.trunc(Math.trunc(s.getY()));y<=a.getMaxY()&&y>=a.getMinY();y+=g){var A=r.detectCodeword(i,0,i.getWidth(),l,v,y,c,d);A!=null&&(f.setCodeword(y,A),l?v=A.getStartX():v=A.getEndX())}return f},r.adjustCodewordCount=function(i,a){var s=a[0][1],l=s.getValue(),c=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-r.getNumberOfECCodeWords(i.getBarcodeECLevel());if(l.length===0){if(c<1||c>vr.MAX_CODEWORDS_IN_BARCODE)throw et.getNotFoundInstance();s.setValue(c)}else l[0]!==c&&s.setValue(c)},r.createDecoderResult=function(i){var a=r.createBarcodeMatrix(i);r.adjustCodewordCount(i,a);for(var s=new Array,l=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),c=[],d=new Array,f=0;f<i.getBarcodeRowCount();f++)for(var m=0;m<i.getBarcodeColumnCount();m++){var g=a[f][m+1].getValue(),v=f*i.getBarcodeColumnCount()+m;g.length===0?s.push(v):g.length===1?l[v]=g[0]:(d.push(v),c.push(g))}for(var y=new Array(c.length),A=0;A<y.length;A++)y[A]=c[A];return r.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),l,vr.toIntArray(s),vr.toIntArray(d),y)},r.createDecoderResultFromAmbiguousValues=function(i,a,s,l,c){for(var d=new Int32Array(l.length),f=100;f-- >0;){for(var m=0;m<d.length;m++)a[l[m]]=c[m][d[m]];try{return r.decodeCodewords(a,i,s)}catch(v){var g=v instanceof ao;if(!g)throw v}if(d.length===0)throw ao.getChecksumInstance();for(var m=0;m<d.length;m++)if(d[m]<c[m].length-1){d[m]++;break}else if(d[m]=0,m===d.length-1)throw ao.getChecksumInstance()}throw ao.getChecksumInstance()},r.createBarcodeMatrix=function(i){for(var a,s,l,c,d=Array.from({length:i.getBarcodeRowCount()},function(){return new Array(i.getBarcodeColumnCount()+2)}),f=0;f<d.length;f++)for(var m=0;m<d[f].length;m++)d[f][m]=new Gp;var g=0;try{for(var v=Tp(i.getDetectionResultColumns()),y=v.next();!y.done;y=v.next()){var A=y.value;if(A!=null)try{for(var w=(l=void 0,Tp(A.getCodewords())),k=w.next();!k.done;k=w.next()){var E=k.value;if(E!=null){var I=E.getRowNumber();if(I>=0){if(I>=d.length)continue;d[I][g].setValue(E.getValue())}}}}catch(T){l={error:T}}finally{try{k&&!k.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}g++}}catch(T){a={error:T}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}return d},r.isValidBarcodeColumn=function(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1},r.getStartColumn=function(i,a,s,l){var c,d,f=l?1:-1,m=null;if(r.isValidBarcodeColumn(i,a-f)&&(m=i.getDetectionResultColumn(a-f).getCodeword(s)),m!=null)return l?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(a).getCodewordNearby(s),m!=null)return l?m.getStartX():m.getEndX();if(r.isValidBarcodeColumn(i,a-f)&&(m=i.getDetectionResultColumn(a-f).getCodewordNearby(s)),m!=null)return l?m.getEndX():m.getStartX();for(var g=0;r.isValidBarcodeColumn(i,a-f);){a-=f;try{for(var v=(c=void 0,Tp(i.getDetectionResultColumn(a).getCodewords())),y=v.next();!y.done;y=v.next()){var A=y.value;if(A!=null)return(l?A.getEndX():A.getStartX())+f*g*(A.getEndX()-A.getStartX())}}catch(w){c={error:w}}finally{try{y&&!y.done&&(d=v.return)&&d.call(v)}finally{if(c)throw c.error}}g++}return l?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()},r.detectCodeword=function(i,a,s,l,c,d,f,m){c=r.adjustCodewordStartColumn(i,a,s,l,c,d);var g=r.getModuleBitCount(i,a,s,l,c,d);if(g==null)return null;var v,y=_r.sum(g);if(l)v=c+y;else{for(var A=0;A<g.length/2;A++){var w=g[A];g[A]=g[g.length-1-A],g[g.length-1-A]=w}v=c,c=v-y}if(!r.checkCodewordSkew(y,f,m))return null;var k=bL.getDecodedValue(g),E=vr.getCodeword(k);return E===-1?null:new xL(c,v,r.getCodewordBucketNumber(k),E)},r.getModuleBitCount=function(i,a,s,l,c,d){for(var f=c,m=new Int32Array(8),g=0,v=l?1:-1,y=l;(l?f<s:f>=a)&&g<m.length;)i.get(f,d)===y?(m[g]++,f+=v):(g++,y=!y);return g===m.length||f===(l?s:a)&&g===m.length-1?m:null},r.getNumberOfECCodeWords=function(i){return 2<<i},r.adjustCodewordStartColumn=function(i,a,s,l,c,d){for(var f=c,m=l?-1:1,g=0;g<2;g++){for(;(l?f>=a:f<s)&&l===i.get(f,d);){if(Math.abs(c-f)>r.CODEWORD_SKEW_SIZE)return c;f+=m}m=-m,l=!l}return f},r.checkCodewordSkew=function(i,a,s){return a-r.CODEWORD_SKEW_SIZE<=i&&i<=s+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(i,a,s){if(i.length===0)throw Ut.getFormatInstance();var l=1<<a+1,c=r.correctErrors(i,s,l);r.verifyCodewordCount(i,l);var d=NL.decode(i,""+a);return d.setErrorsCorrected(c),d.setErasures(s.length),d},r.correctErrors=function(i,a,s){if(a!=null&&a.length>s/2+r.MAX_ERRORS||s<0||s>r.MAX_EC_CODEWORDS)throw ao.getChecksumInstance();return r.errorCorrection.decode(i,s,a)},r.verifyCodewordCount=function(i,a){if(i.length<4)throw Ut.getFormatInstance();var s=i[0];if(s>i.length)throw Ut.getFormatInstance();if(s===0)if(a<i.length)i[0]=i.length-a;else throw Ut.getFormatInstance()},r.getBitCountForCodeword=function(i){for(var a=new Int32Array(8),s=0,l=a.length-1;!((i&1)!==s&&(s=i&1,l--,l<0));)a[l]++,i>>=1;return a},r.getCodewordBucketNumber=function(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)},r.getCodewordBucketNumber_number=function(i){return r.getCodewordBucketNumber(r.getBitCountForCodeword(i))},r.getCodewordBucketNumber_Int32Array=function(i){return(i[0]-i[2]+i[4]-i[6]+9)%9},r.toString=function(i){for(var a=new Rw,s=0;s<i.length;s++){a.format("Row %2d: ",s);for(var l=0;l<i[s].length;l++){var c=i[s][l];c.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}a.format("%n")}return a.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new dL,r})(),ML=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},k4=(function(){function r(){}return r.prototype.decode=function(i,a){a===void 0&&(a=null);var s=r.decode(i,a,!1);if(s==null||s.length===0||s[0]==null)throw et.getNotFoundInstance();return s[0]},r.prototype.decodeMultiple=function(i,a){a===void 0&&(a=null);try{return r.decode(i,a,!0)}catch(s){throw s instanceof Ut||s instanceof ao?et.getNotFoundInstance():s}},r.decode=function(i,a,s){var l,c,d=new Array,f=rL.detectMultiple(i,a,s);try{for(var m=ML(f.getPoints()),g=m.next();!g.done;g=m.next()){var v=g.value,y=TL.decode(f.getBits(),v[4],v[5],v[6],v[7],r.getMinCodewordWidth(v),r.getMaxCodewordWidth(v)),A=new Ho(y.getText(),y.getRawBytes(),void 0,v,Pn.PDF_417);A.putMetadata(Ao.ERROR_CORRECTION_LEVEL,y.getECLevel());var w=y.getOther();w!=null&&A.putMetadata(Ao.PDF417_EXTRA_METADATA,w),d.push(A)}}catch(k){l={error:k}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}return d.map(function(k){return k})},r.getMaxWidth=function(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))},r.getMinWidth=function(i,a){return i==null||a==null?Ui.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))},r.getMaxCodewordWidth=function(i){return Math.floor(Math.max(Math.max(r.getMaxWidth(i[0],i[4]),r.getMaxWidth(i[6],i[2])*vr.MODULES_IN_CODEWORD/vr.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(i[1],i[5]),r.getMaxWidth(i[7],i[3])*vr.MODULES_IN_CODEWORD/vr.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(i){return Math.floor(Math.min(Math.min(r.getMinWidth(i[0],i[4]),r.getMinWidth(i[6],i[2])*vr.MODULES_IN_CODEWORD/vr.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(i[1],i[5]),r.getMinWidth(i[7],i[3])*vr.MODULES_IN_CODEWORD/vr.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),RL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),$8=(function(r){RL(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="ReaderException",i})(_l),W8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},OL=(function(){function r(){}return r.prototype.decode=function(i,a){return this.setHints(a),this.decodeInternal(i)},r.prototype.decodeWithState=function(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)},r.prototype.setHints=function(i){this.hints=i;var a=i!=null&&i.get(qa.TRY_HARDER)!==void 0,s=i==null?null:i.get(qa.POSSIBLE_FORMATS),l=new Array;if(s!=null){var c=s.some(function(d){return d===Pn.UPC_A||d===Pn.UPC_E||d===Pn.EAN_13||d===Pn.EAN_8||d===Pn.CODABAR||d===Pn.CODE_39||d===Pn.CODE_93||d===Pn.CODE_128||d===Pn.ITF||d===Pn.RSS_14||d===Pn.RSS_EXPANDED});c&&!a&&l.push(new qp(i)),s.includes(Pn.QR_CODE)&&l.push(new A4),s.includes(Pn.DATA_MATRIX)&&l.push(new w4),s.includes(Pn.AZTEC)&&l.push(new b4),s.includes(Pn.PDF_417)&&l.push(new k4),c&&a&&l.push(new qp(i))}l.length===0&&(a||l.push(new qp(i)),l.push(new A4),l.push(new w4),l.push(new b4),l.push(new k4),a&&l.push(new qp(i))),this.readers=l},r.prototype.reset=function(){var i,a;if(this.readers!==null)try{for(var s=W8(this.readers),l=s.next();!l.done;l=s.next()){var c=l.value;c.reset()}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},r.prototype.decodeInternal=function(i){var a,s;if(this.readers===null)throw new $8("No readers where selected, nothing can be read.");try{for(var l=W8(this.readers),c=l.next();!c.done;c=l.next()){var d=c.value;try{return d.decode(i,this.hints)}catch(f){if(f instanceof $8)continue}}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}throw new et("No MultiFormat Readers were able to detect the code.")},r})(),DL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),jL=(function(r){DL(i,r);function i(a,s){a===void 0&&(a=null),s===void 0&&(s=500);var l=this,c=new OL;return c.setHints(a),l=r.call(this,c,s)||this,l}return i.prototype.decodeBitmap=function(a){return this.reader.decodeWithState(a)},i})(b2),BL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){BL(i,r);function i(a){return a===void 0&&(a=500),r.call(this,new k4,a)||this}return i})(b2);var PL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){PL(i,r);function i(a){return a===void 0&&(a=500),r.call(this,new A4,a)||this}return i})(b2);var C4;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(C4||(C4={}));const f3=C4;var F7=(function(){function r(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Rd(i,Int32Array.from([1])))}return r.prototype.buildGenerator=function(i){var a=this.cachedGenerators;if(i>=a.length)for(var s=a[a.length-1],l=this.field,c=a.length;c<=i;c++){var d=s.multiply(new Rd(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));a.push(d),s=d}return a[i]},r.prototype.encode=function(i,a){if(a===0)throw new Ln("No error correction bytes");var s=i.length-a;if(s<=0)throw new Ln("No data bytes provided");var l=this.buildGenerator(a),c=new Int32Array(s);Ca.arraycopy(i,0,c,0,s);var d=new Rd(this.field,c);d=d.multiplyByMonomial(a,1);for(var f=d.divide(l)[1],m=f.getCoefficients(),g=a-m.length,v=0;v<g;v++)i[s+v]=0;Ca.arraycopy(m,0,i,s+g,m.length)},r})(),Vp=(function(){function r(){}return r.applyMaskPenaltyRule1=function(i){return r.applyMaskPenaltyRule1Internal(i,!0)+r.applyMaskPenaltyRule1Internal(i,!1)},r.applyMaskPenaltyRule2=function(i){for(var a=0,s=i.getArray(),l=i.getWidth(),c=i.getHeight(),d=0;d<c-1;d++)for(var f=s[d],m=0;m<l-1;m++){var g=f[m];g===f[m+1]&&g===s[d+1][m]&&g===s[d+1][m+1]&&a++}return r.N2*a},r.applyMaskPenaltyRule3=function(i){for(var a=0,s=i.getArray(),l=i.getWidth(),c=i.getHeight(),d=0;d<c;d++)for(var f=0;f<l;f++){var m=s[d];f+6<l&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(r.isWhiteHorizontal(m,f-4,f)||r.isWhiteHorizontal(m,f+7,f+11))&&a++,d+6<c&&s[d][f]===1&&s[d+1][f]===0&&s[d+2][f]===1&&s[d+3][f]===1&&s[d+4][f]===1&&s[d+5][f]===0&&s[d+6][f]===1&&(r.isWhiteVertical(s,f,d-4,d)||r.isWhiteVertical(s,f,d+7,d+11))&&a++}return a*r.N3},r.isWhiteHorizontal=function(i,a,s){a=Math.max(a,0),s=Math.min(s,i.length);for(var l=a;l<s;l++)if(i[l]===1)return!1;return!0},r.isWhiteVertical=function(i,a,s,l){s=Math.max(s,0),l=Math.min(l,i.length);for(var c=s;c<l;c++)if(i[c][a]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(i){for(var a=0,s=i.getArray(),l=i.getWidth(),c=i.getHeight(),d=0;d<c;d++)for(var f=s[d],m=0;m<l;m++)f[m]===1&&a++;var g=i.getHeight()*i.getWidth(),v=Math.floor(Math.abs(a*2-g)*10/g);return v*r.N4},r.getDataMaskBit=function(i,a,s){var l,c;switch(i){case 0:l=s+a&1;break;case 1:l=s&1;break;case 2:l=a%3;break;case 3:l=(s+a)%3;break;case 4:l=Math.floor(s/2)+Math.floor(a/3)&1;break;case 5:c=s*a,l=(c&1)+c%3;break;case 6:c=s*a,l=(c&1)+c%3&1;break;case 7:c=s*a,l=c%3+(s+a&1)&1;break;default:throw new Ln("Invalid mask pattern: "+i)}return l===0},r.applyMaskPenaltyRule1Internal=function(i,a){for(var s=0,l=a?i.getHeight():i.getWidth(),c=a?i.getWidth():i.getHeight(),d=i.getArray(),f=0;f<l;f++){for(var m=0,g=-1,v=0;v<c;v++){var y=a?d[f][v]:d[v][f];y===g?m++:(m>=5&&(s+=r.N1+(m-5)),m=1,g=y)}m>=5&&(s+=r.N1+(m-5))}return s},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),FL=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},UL=(function(){function r(i,a){this.width=i,this.height=a;for(var s=new Array(a),l=0;l!==a;l++)s[l]=new Uint8Array(i);this.bytes=s}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(i,a){return this.bytes[a][i]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(i,a,s){this.bytes[a][i]=s},r.prototype.setBoolean=function(i,a,s){this.bytes[a][i]=s?1:0},r.prototype.clear=function(i){var a,s;try{for(var l=FL(this.bytes),c=l.next();!c.done;c=l.next()){var d=c.value;Gs.fill(d,i)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},r.prototype.equals=function(i){if(!(i instanceof r))return!1;var a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(var s=0,l=this.height;s<l;++s)for(var c=this.bytes[s],d=a.bytes[s],f=0,m=this.width;f<m;++f)if(c[f]!==d[f])return!1;return!0},r.prototype.toString=function(){for(var i=new ji,a=0,s=this.height;a<s;++a){for(var l=this.bytes[a],c=0,d=this.width;c<d;++c)switch(l[c]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()},r})(),E4=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var i=new ji;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()},r.prototype.setMode=function(i){this.mode=i},r.prototype.setECLevel=function(i){this.ecLevel=i},r.prototype.setVersion=function(i){this.version=i},r.prototype.setMaskPattern=function(i){this.maskPattern=i},r.prototype.setMatrix=function(i){this.matrix=i},r.isValidMaskPattern=function(i){return i>=0&&i<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),LL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Oa=(function(r){LL(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.kind="WriterException",i})(_l),X8=(function(){function r(){}return r.clearMatrix=function(i){i.clear(255)},r.buildMatrix=function(i,a,s,l,c){r.clearMatrix(c),r.embedBasicPatterns(s,c),r.embedTypeInfo(a,l,c),r.maybeEmbedVersionInfo(s,c),r.embedDataBits(i,l,c)},r.embedBasicPatterns=function(i,a){r.embedPositionDetectionPatternsAndSeparators(a),r.embedDarkDotAtLeftBottomCorner(a),r.maybeEmbedPositionAdjustmentPatterns(i,a),r.embedTimingPatterns(a)},r.embedTypeInfo=function(i,a,s){var l=new so;r.makeTypeInfoBits(i,a,l);for(var c=0,d=l.getSize();c<d;++c){var f=l.get(l.getSize()-1-c),m=r.TYPE_INFO_COORDINATES[c],g=m[0],v=m[1];if(s.setBoolean(g,v,f),c<8){var y=s.getWidth()-c-1,A=8;s.setBoolean(y,A,f)}else{var y=8,A=s.getHeight()-7+(c-8);s.setBoolean(y,A,f)}}},r.maybeEmbedVersionInfo=function(i,a){if(!(i.getVersionNumber()<7)){var s=new so;r.makeVersionInfoBits(i,s);for(var l=17,c=0;c<6;++c)for(var d=0;d<3;++d){var f=s.get(l);l--,a.setBoolean(c,a.getHeight()-11+d,f),a.setBoolean(a.getHeight()-11+d,c,f)}}},r.embedDataBits=function(i,a,s){for(var l=0,c=-1,d=s.getWidth()-1,f=s.getHeight()-1;d>0;){for(d===6&&(d-=1);f>=0&&f<s.getHeight();){for(var m=0;m<2;++m){var g=d-m;if(r.isEmpty(s.get(g,f))){var v=void 0;l<i.getSize()?(v=i.get(l),++l):v=!1,a!==255&&Vp.getDataMaskBit(a,g,f)&&(v=!v),s.setBoolean(g,f,v)}}f+=c}c=-c,f+=c,d-=2}if(l!==i.getSize())throw new Oa("Not all bits consumed: "+l+"/"+i.getSize())},r.findMSBSet=function(i){return 32-Ui.numberOfLeadingZeros(i)},r.calculateBCHCode=function(i,a){if(a===0)throw new Ln("0 polynomial");var s=r.findMSBSet(a);for(i<<=s-1;r.findMSBSet(i)>=s;)i^=a<<r.findMSBSet(i)-s;return i},r.makeTypeInfoBits=function(i,a,s){if(!E4.isValidMaskPattern(a))throw new Oa("Invalid mask pattern");var l=i.getBits()<<3|a;s.appendBits(l,5);var c=r.calculateBCHCode(l,r.TYPE_INFO_POLY);s.appendBits(c,10);var d=new so;if(d.appendBits(r.TYPE_INFO_MASK_PATTERN,15),s.xor(d),s.getSize()!==15)throw new Oa("should not happen but we got: "+s.getSize())},r.makeVersionInfoBits=function(i,a){a.appendBits(i.getVersionNumber(),6);var s=r.calculateBCHCode(i.getVersionNumber(),r.VERSION_INFO_POLY);if(a.appendBits(s,12),a.getSize()!==18)throw new Oa("should not happen but we got: "+a.getSize())},r.isEmpty=function(i){return i===255},r.embedTimingPatterns=function(i){for(var a=8;a<i.getWidth()-8;++a){var s=(a+1)%2;r.isEmpty(i.get(a,6))&&i.setNumber(a,6,s),r.isEmpty(i.get(6,a))&&i.setNumber(6,a,s)}},r.embedDarkDotAtLeftBottomCorner=function(i){if(i.get(8,i.getHeight()-8)===0)throw new Oa;i.setNumber(8,i.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(i,a,s){for(var l=0;l<8;++l){if(!r.isEmpty(s.get(i+l,a)))throw new Oa;s.setNumber(i+l,a,0)}},r.embedVerticalSeparationPattern=function(i,a,s){for(var l=0;l<7;++l){if(!r.isEmpty(s.get(i,a+l)))throw new Oa;s.setNumber(i,a+l,0)}},r.embedPositionAdjustmentPattern=function(i,a,s){for(var l=0;l<5;++l)for(var c=r.POSITION_ADJUSTMENT_PATTERN[l],d=0;d<5;++d)s.setNumber(i+d,a+l,c[d])},r.embedPositionDetectionPattern=function(i,a,s){for(var l=0;l<7;++l)for(var c=r.POSITION_DETECTION_PATTERN[l],d=0;d<7;++d)s.setNumber(i+d,a+l,c[d])},r.embedPositionDetectionPatternsAndSeparators=function(i){var a=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,i),r.embedPositionDetectionPattern(i.getWidth()-a,0,i),r.embedPositionDetectionPattern(0,i.getWidth()-a,i);var s=8;r.embedHorizontalSeparationPattern(0,s-1,i),r.embedHorizontalSeparationPattern(i.getWidth()-s,s-1,i),r.embedHorizontalSeparationPattern(0,i.getWidth()-s,i);var l=7;r.embedVerticalSeparationPattern(l,0,i),r.embedVerticalSeparationPattern(i.getHeight()-l-1,0,i),r.embedVerticalSeparationPattern(l,i.getHeight()-l,i)},r.maybeEmbedPositionAdjustmentPatterns=function(i,a){if(!(i.getVersionNumber()<2))for(var s=i.getVersionNumber()-1,l=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s],c=0,d=l.length;c!==d;c++){var f=l[c];if(f>=0)for(var m=0;m!==d;m++){var g=l[m];g>=0&&r.isEmpty(a.get(g,f))&&r.embedPositionAdjustmentPattern(g-2,f-2,a)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),zL=(function(){function r(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),K8=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(i){return Vp.applyMaskPenaltyRule1(i)+Vp.applyMaskPenaltyRule2(i)+Vp.applyMaskPenaltyRule3(i)+Vp.applyMaskPenaltyRule4(i)},r.encode=function(i,a,s){s===void 0&&(s=null);var l=r.DEFAULT_BYTE_MODE_ENCODING,c=s!==null&&s.get(f3.CHARACTER_SET)!==void 0;c&&(l=s.get(f3.CHARACTER_SET).toString());var d=this.chooseMode(i,l),f=new so;if(d===Da.BYTE&&(c||r.DEFAULT_BYTE_MODE_ENCODING!==l)){var m=qs.getCharacterSetECIByName(l);m!==void 0&&this.appendECI(m,f)}this.appendModeInfo(d,f);var g=new so;this.appendBytes(i,d,g,l);var v;if(s!==null&&s.get(f3.QR_VERSION)!==void 0){var y=Number.parseInt(s.get(f3.QR_VERSION).toString(),10);v=$u.getVersionForNumber(y);var A=this.calculateBitsNeeded(d,f,g,v);if(!this.willFit(A,v,a))throw new Oa("Data too big for requested version")}else v=this.recommendVersion(a,d,f,g);var w=new so;w.appendBitArray(f);var k=d===Da.BYTE?g.getSizeInBytes():i.length;this.appendLengthInfo(k,v,d,w),w.appendBitArray(g);var E=v.getECBlocksForLevel(a),I=v.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(I,w);var T=this.interleaveWithECBytes(w,v.getTotalCodewords(),I,E.getNumBlocks()),N=new E4;N.setECLevel(a),N.setMode(d),N.setVersion(v);var j=v.getDimensionForVersion(),B=new UL(j,j),U=this.chooseMaskPattern(T,a,v,B);return N.setMaskPattern(U),X8.buildMatrix(T,a,v,U,B),N.setMatrix(B),N},r.recommendVersion=function(i,a,s,l){var c=this.calculateBitsNeeded(a,s,l,$u.getVersionForNumber(1)),d=this.chooseVersion(c,i),f=this.calculateBitsNeeded(a,s,l,d);return this.chooseVersion(f,i)},r.calculateBitsNeeded=function(i,a,s,l){return a.getSize()+i.getCharacterCountBits(l)+s.getSize()},r.getAlphanumericCode=function(i){return i<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[i]:-1},r.chooseMode=function(i,a){if(a===void 0&&(a=null),qs.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return Da.KANJI;for(var s=!1,l=!1,c=0,d=i.length;c<d;++c){var f=i.charAt(c);if(r.isDigit(f))s=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)l=!0;else return Da.BYTE}return l?Da.ALPHANUMERIC:s?Da.NUMERIC:Da.BYTE},r.isOnlyDoubleByteKanji=function(i){var a;try{a=l1.encode(i,qs.SJIS)}catch{return!1}var s=a.length;if(s%2!==0)return!1;for(var l=0;l<s;l+=2){var c=a[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0},r.chooseMaskPattern=function(i,a,s,l){for(var c=Number.MAX_SAFE_INTEGER,d=-1,f=0;f<E4.NUM_MASK_PATTERNS;f++){X8.buildMatrix(i,a,s,f,l);var m=this.calculateMaskPenalty(l);m<c&&(c=m,d=f)}return d},r.chooseVersion=function(i,a){for(var s=1;s<=40;s++){var l=$u.getVersionForNumber(s);if(r.willFit(i,l,a))return l}throw new Oa("Data too big")},r.willFit=function(i,a,s){var l=a.getTotalCodewords(),c=a.getECBlocksForLevel(s),d=c.getTotalECCodewords(),f=l-d,m=(i+7)/8;return f>=m},r.terminateBits=function(i,a){var s=i*8;if(a.getSize()>s)throw new Oa("data bits cannot fit in the QR Code"+a.getSize()+" > "+s);for(var l=0;l<4&&a.getSize()<s;++l)a.appendBit(!1);var c=a.getSize()&7;if(c>0)for(var l=c;l<8;l++)a.appendBit(!1);for(var d=i-a.getSizeInBytes(),l=0;l<d;++l)a.appendBits((l&1)===0?236:17,8);if(a.getSize()!==s)throw new Oa("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(i,a,s,l,c,d){if(l>=s)throw new Oa("Block ID too large");var f=i%s,m=s-f,g=Math.floor(i/s),v=g+1,y=Math.floor(a/s),A=y+1,w=g-y,k=v-A;if(w!==k)throw new Oa("EC bytes mismatch");if(s!==m+f)throw new Oa("RS blocks mismatch");if(i!==(y+w)*m+(A+k)*f)throw new Oa("Total bytes mismatch");l<m?(c[0]=y,d[0]=w):(c[0]=A,d[0]=k)},r.interleaveWithECBytes=function(i,a,s,l){var c,d,f,m;if(i.getSizeInBytes()!==s)throw new Oa("Number of bits and data bytes does not match");for(var g=0,v=0,y=0,A=new Array,w=0;w<l;++w){var k=new Int32Array(1),E=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(a,s,l,w,k,E);var I=k[0],T=new Uint8Array(I);i.toBytes(8*g,T,0,I);var N=r.generateECBytes(T,E[0]);A.push(new zL(T,N)),v=Math.max(v,I),y=Math.max(y,N.length),g+=k[0]}if(s!==g)throw new Oa("Data bytes does not match offset");for(var j=new so,w=0;w<v;++w)try{for(var B=(c=void 0,K8(A)),U=B.next();!U.done;U=B.next()){var F=U.value,T=F.getDataBytes();w<T.length&&j.appendBits(T[w],8)}}catch(L){c={error:L}}finally{try{U&&!U.done&&(d=B.return)&&d.call(B)}finally{if(c)throw c.error}}for(var w=0;w<y;++w)try{for(var P=(f=void 0,K8(A)),z=P.next();!z.done;z=P.next()){var F=z.value,N=F.getErrorCorrectionBytes();w<N.length&&j.appendBits(N[w],8)}}catch(L){f={error:L}}finally{try{z&&!z.done&&(m=P.return)&&m.call(P)}finally{if(f)throw f.error}}if(a!==j.getSizeInBytes())throw new Oa("Interleaving error: "+a+" and "+j.getSizeInBytes()+" differ.");return j},r.generateECBytes=function(i,a){for(var s=i.length,l=new Int32Array(s+a),c=0;c<s;c++)l[c]=i[c]&255;new F7(kl.QR_CODE_FIELD_256).encode(l,a);for(var d=new Uint8Array(a),c=0;c<a;c++)d[c]=l[s+c];return d},r.appendModeInfo=function(i,a){a.appendBits(i.getBits(),4)},r.appendLengthInfo=function(i,a,s,l){var c=s.getCharacterCountBits(a);if(i>=1<<c)throw new Oa(i+" is bigger than "+((1<<c)-1));l.appendBits(i,c)},r.appendBytes=function(i,a,s,l){switch(a){case Da.NUMERIC:r.appendNumericBytes(i,s);break;case Da.ALPHANUMERIC:r.appendAlphanumericBytes(i,s);break;case Da.BYTE:r.append8BitBytes(i,s,l);break;case Da.KANJI:r.appendKanjiBytes(i,s);break;default:throw new Oa("Invalid mode: "+a)}},r.getDigit=function(i){return i.charCodeAt(0)-48},r.isDigit=function(i){var a=r.getDigit(i);return a>=0&&a<=9},r.appendNumericBytes=function(i,a){for(var s=i.length,l=0;l<s;){var c=r.getDigit(i.charAt(l));if(l+2<s){var d=r.getDigit(i.charAt(l+1)),f=r.getDigit(i.charAt(l+2));a.appendBits(c*100+d*10+f,10),l+=3}else if(l+1<s){var d=r.getDigit(i.charAt(l+1));a.appendBits(c*10+d,7),l+=2}else a.appendBits(c,4),l++}},r.appendAlphanumericBytes=function(i,a){for(var s=i.length,l=0;l<s;){var c=r.getAlphanumericCode(i.charCodeAt(l));if(c===-1)throw new Oa;if(l+1<s){var d=r.getAlphanumericCode(i.charCodeAt(l+1));if(d===-1)throw new Oa;a.appendBits(c*45+d,11),l+=2}else a.appendBits(c,6),l++}},r.append8BitBytes=function(i,a,s){var l;try{l=l1.encode(i,s)}catch(m){throw new Oa(m)}for(var c=0,d=l.length;c!==d;c++){var f=l[c];a.appendBits(f,8)}},r.appendKanjiBytes=function(i,a){var s;try{s=l1.encode(i,qs.SJIS)}catch(y){throw new Oa(y)}for(var l=s.length,c=0;c<l;c+=2){var d=s[c]&255,f=s[c+1]&255,m=d<<8&4294967295|f,g=-1;if(m>=33088&&m<=40956?g=m-33088:m>=57408&&m<=60351&&(g=m-49472),g===-1)throw new Oa("Invalid byte sequence");var v=(g>>8)*192+(g&255);a.appendBits(v,13)}},r.appendECI=function(i,a){a.appendBits(Da.ECI.getBits(),4),a.appendBits(i.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=qs.UTF8.getName(),r})();var HL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){HL(i,r);function i(a,s,l,c,d,f,m,g){var v=r.call(this,f,m)||this;if(v.yuvData=a,v.dataWidth=s,v.dataHeight=l,v.left=c,v.top=d,c+f>s||d+m>l)throw new Ln("Crop rectangle does not fit within image data.");return g&&v.reverseHorizontal(f,m),v}return i.prototype.getRow=function(a,s){if(a<0||a>=this.getHeight())throw new Ln("Requested row is outside the image: "+a);var l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));var c=(a+this.top)*this.dataWidth+this.left;return Ca.arraycopy(this.yuvData,c,s,0,l),s},i.prototype.getMatrix=function(){var a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.yuvData;var l=a*s,c=new Uint8ClampedArray(l),d=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return Ca.arraycopy(this.yuvData,d,c,0,l),c;for(var f=0;f<s;f++){var m=f*a;Ca.arraycopy(this.yuvData,d,c,m,a),d+=this.dataWidth}return c},i.prototype.isCropSupported=function(){return!0},i.prototype.crop=function(a,s,l,c){return new i(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+s,l,c,!1)},i.prototype.renderThumbnail=function(){for(var a=this.getWidth()/i.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/i.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(a*s),c=this.yuvData,d=this.top*this.dataWidth+this.left,f=0;f<s;f++){for(var m=f*a,g=0;g<a;g++){var v=c[d+g*i.THUMBNAIL_SCALE_FACTOR]&255;l[m+g]=4278190080|v*65793}d+=this.dataWidth*i.THUMBNAIL_SCALE_FACTOR}return l},i.prototype.getThumbnailWidth=function(){return this.getWidth()/i.THUMBNAIL_SCALE_FACTOR},i.prototype.getThumbnailHeight=function(){return this.getHeight()/i.THUMBNAIL_SCALE_FACTOR},i.prototype.reverseHorizontal=function(a,s){for(var l=this.yuvData,c=0,d=this.top*this.dataWidth+this.left;c<s;c++,d+=this.dataWidth)for(var f=d+a/2,m=d,g=d+a-1;m<f;m++,g--){var v=l[m];l[m]=l[g],l[g]=v}},i.prototype.invert=function(){return new Iw(this)},i.THUMBNAIL_SCALE_FACTOR=2,i})(Fx);var qL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();(function(r){qL(i,r);function i(a,s,l,c,d,f,m){var g=r.call(this,s,l)||this;if(g.dataWidth=c,g.dataHeight=d,g.left=f,g.top=m,a.BYTES_PER_ELEMENT===4){for(var v=s*l,y=new Uint8ClampedArray(v),A=0;A<v;A++){var w=a[A],k=w>>16&255,E=w>>7&510,I=w&255;y[A]=(k+E+I)/4&255}g.luminances=y}else g.luminances=a;if(c===void 0&&(g.dataWidth=s),d===void 0&&(g.dataHeight=l),f===void 0&&(g.left=0),m===void 0&&(g.top=0),g.left+s>g.dataWidth||g.top+l>g.dataHeight)throw new Ln("Crop rectangle does not fit within image data.");return g}return i.prototype.getRow=function(a,s){if(a<0||a>=this.getHeight())throw new Ln("Requested row is outside the image: "+a);var l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));var c=(a+this.top)*this.dataWidth+this.left;return Ca.arraycopy(this.luminances,c,s,0,l),s},i.prototype.getMatrix=function(){var a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.luminances;var l=a*s,c=new Uint8ClampedArray(l),d=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return Ca.arraycopy(this.luminances,d,c,0,l),c;for(var f=0;f<s;f++){var m=f*a;Ca.arraycopy(this.luminances,d,c,m,a),d+=this.dataWidth}return c},i.prototype.isCropSupported=function(){return!0},i.prototype.crop=function(a,s,l,c){return new i(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+a,this.top+s)},i.prototype.invert=function(){return new Iw(this)},i})(Fx);var GL=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),VL=(function(r){GL(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.forName=function(a){return this.getCharacterSetECIByName(a)},i})(qs),YL=(function(){function r(){}return r.ISO_8859_1=qs.ISO8859_1,r})(),_4,QL=301,$L=function(r,i){for(var a=1,s=0;s<255;s++)i[s]=a,r[a]=s,a*=2,a>=256&&(a^=QL);return{LOG:r,ALOG:i}};_4=$L([],[]),_4.LOG;_4.ALOG;var J8;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(J8||(J8={}));var Z8=129,U7=230,WL=231,XL=235,KL=236,JL=237,ZL=238,ez=239,tz=240,dy=254,nz=254,e5="[)>05",t5="[)>06",n5="",sa=0,yo=1,rl=2,Ls=3,no=4,Uo=5,iz=(function(){function r(){}return r.prototype.getEncodingMode=function(){return sa},r.prototype.encode=function(i){var a=T1.determineConsecutiveDigitCount(i.getMessage(),i.pos);if(a>=2)i.writeCodeword(this.encodeASCIIDigits(i.getMessage().charCodeAt(i.pos),i.getMessage().charCodeAt(i.pos+1))),i.pos+=2;else{var s=i.getCurrentChar(),l=T1.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode());if(l!==this.getEncodingMode())switch(l){case Uo:i.writeCodeword(WL),i.signalEncoderChange(Uo);return;case yo:i.writeCodeword(U7),i.signalEncoderChange(yo);return;case Ls:i.writeCodeword(ZL),i.signalEncoderChange(Ls);break;case rl:i.writeCodeword(ez),i.signalEncoderChange(rl);break;case no:i.writeCodeword(tz),i.signalEncoderChange(no);break;default:throw new Error("Illegal mode: "+l)}else T1.isExtendedASCII(s)?(i.writeCodeword(XL),i.writeCodeword(s-128+1),i.pos++):(i.writeCodeword(s+1),i.pos++)}},r.prototype.encodeASCIIDigits=function(i,a){if(T1.isDigit(i)&&T1.isDigit(a)){var s=(i-48)*10+(a-48);return s+130}throw new Error("not digits: "+i+a)},r})(),rz=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Uo},r.prototype.encode=function(i){var a=new ji;for(a.append(0);i.hasMoreCharacters();){var s=i.getCurrentChar();a.append(s),i.pos++;var l=T1.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){i.signalEncoderChange(sa);break}}var c=a.length()-1,d=1,f=i.getCodewordCount()+c+d;i.updateSymbolInfo(f);var m=i.getSymbolInfo().getDataCapacity()-f>0;if(i.hasMoreCharacters()||m)if(c<=249)a.setCharAt(0,fr.getCharAt(c));else if(c<=1555)a.setCharAt(0,fr.getCharAt(Math.floor(c/250)+249)),a.insert(1,fr.getCharAt(c%250));else throw new Error("Message length not in valid ranges: "+c);for(var g=0,s=a.length();g<s;g++)i.writeCodeword(this.randomize255State(a.charAt(g).charCodeAt(0),i.getCodewordCount()+1))},r.prototype.randomize255State=function(i,a){var s=149*a%255+1,l=i+s;return l<=255?l:l-256},r})(),Ow=(function(){function r(){}return r.prototype.getEncodingMode=function(){return yo},r.prototype.encodeMaximal=function(i){for(var a=new ji,s=0,l=i.pos,c=0;i.hasMoreCharacters();){var d=i.getCurrentChar();i.pos++,s=this.encodeChar(d,a),a.length()%3===0&&(l=i.pos,c=a.length())}if(c!==a.length()){var f=Math.floor(a.length()/3*2),m=Math.floor(i.getCodewordCount()+f+1);i.updateSymbolInfo(m);var g=i.getSymbolInfo().getDataCapacity()-m,v=Math.floor(a.length()%3);(v===2&&g!==2||v===1&&(s>3||g!==1))&&(i.pos=l)}a.length()>0&&i.writeCodeword(U7),this.handleEOD(i,a)},r.prototype.encode=function(i){for(var a=new ji;i.hasMoreCharacters();){var s=i.getCurrentChar();i.pos++;var l=this.encodeChar(s,a),c=Math.floor(a.length()/3)*2,d=i.getCodewordCount()+c;i.updateSymbolInfo(d);var f=i.getSymbolInfo().getDataCapacity()-d;if(!i.hasMoreCharacters()){var m=new ji;for(a.length()%3===2&&f!==2&&(l=this.backtrackOneCharacter(i,a,m,l));a.length()%3===1&&(l>3||f!==1);)l=this.backtrackOneCharacter(i,a,m,l);break}var g=a.length();if(g%3===0){var v=T1.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode());if(v!==this.getEncodingMode()){i.signalEncoderChange(sa);break}}}this.handleEOD(i,a)},r.prototype.backtrackOneCharacter=function(i,a,s,l){var c=a.length(),d=a.toString().substring(0,c-l);a.setLengthToZero(),a.append(d),i.pos--;var f=i.getCurrentChar();return l=this.encodeChar(f,s),i.resetSymbolInfo(),l},r.prototype.writeNextTriplet=function(i,a){i.writeCodewords(this.encodeToCodewords(a.toString()));var s=a.toString().substring(3);a.setLengthToZero(),a.append(s)},r.prototype.handleEOD=function(i,a){var s=Math.floor(a.length()/3*2),l=a.length()%3,c=i.getCodewordCount()+s;i.updateSymbolInfo(c);var d=i.getSymbolInfo().getDataCapacity()-c;if(l===2){for(a.append("\0");a.length()>=3;)this.writeNextTriplet(i,a);i.hasMoreCharacters()&&i.writeCodeword(dy)}else if(d===1&&l===1){for(;a.length()>=3;)this.writeNextTriplet(i,a);i.hasMoreCharacters()&&i.writeCodeword(dy),i.pos--}else if(l===0){for(;a.length()>=3;)this.writeNextTriplet(i,a);(d>0||i.hasMoreCharacters())&&i.writeCodeword(dy)}else throw new Error("Unexpected case. Please report!");i.signalEncoderChange(sa)},r.prototype.encodeChar=function(i,a){if(i===32)return a.append(3),1;if(i>=48&&i<=57)return a.append(i-48+4),1;if(i>=65&&i<=90)return a.append(i-65+14),1;if(i<32)return a.append(0),a.append(i),2;if(i<=47)return a.append(1),a.append(i-33),2;if(i<=64)return a.append(1),a.append(i-58+15),2;if(i<=95)return a.append(1),a.append(i-91+22),2;if(i<=127)return a.append(2),a.append(i-96),2;a.append("1");var s=2;return s+=this.encodeChar(i-128,a),s},r.prototype.encodeToCodewords=function(i){var a=1600*i.charCodeAt(0)+40*i.charCodeAt(1)+i.charCodeAt(2)+1,s=a/256,l=a%256,c=new ji;return c.append(s),c.append(l),c.toString()},r})(),az=(function(){function r(){}return r.prototype.getEncodingMode=function(){return no},r.prototype.encode=function(i){for(var a=new ji;i.hasMoreCharacters();){var s=i.getCurrentChar();this.encodeChar(s,a),i.pos++;var l=a.length();if(l>=4){i.writeCodewords(this.encodeToCodewords(a.toString()));var c=a.toString().substring(4);a.setLengthToZero(),a.append(c);var d=T1.lookAheadTest(i.getMessage(),i.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){i.signalEncoderChange(sa);break}}}a.append(fr.getCharAt(31)),this.handleEOD(i,a)},r.prototype.handleEOD=function(i,a){try{var s=a.length();if(s===0)return;if(s===1){i.updateSymbolInfo();var l=i.getSymbolInfo().getDataCapacity()-i.getCodewordCount(),c=i.getRemainingCharacters();if(c>l&&(i.updateSymbolInfo(i.getCodewordCount()+1),l=i.getSymbolInfo().getDataCapacity()-i.getCodewordCount()),c<=l&&l<=2)return}if(s>4)throw new Error("Count must not exceed 4");var d=s-1,f=this.encodeToCodewords(a.toString()),m=!i.hasMoreCharacters(),g=m&&d<=2;if(d<=2){i.updateSymbolInfo(i.getCodewordCount()+d);var l=i.getSymbolInfo().getDataCapacity()-i.getCodewordCount();l>=3&&(g=!1,i.updateSymbolInfo(i.getCodewordCount()+f.length))}g?(i.resetSymbolInfo(),i.pos-=d):i.writeCodewords(f)}finally{i.signalEncoderChange(sa)}},r.prototype.encodeChar=function(i,a){i>=32&&i<=63?a.append(i):i>=64&&i<=94?a.append(fr.getCharAt(i-64)):T1.illegalCharacter(fr.getCharAt(i))},r.prototype.encodeToCodewords=function(i){var a=i.length;if(a===0)throw new Error("StringBuilder must not be empty");var s=i.charAt(0).charCodeAt(0),l=a>=2?i.charAt(1).charCodeAt(0):0,c=a>=3?i.charAt(2).charCodeAt(0):0,d=a>=4?i.charAt(3).charCodeAt(0):0,f=(s<<18)+(l<<12)+(c<<6)+d,m=f>>16&255,g=f>>8&255,v=f&255,y=new ji;return y.append(m),a>=2&&y.append(g),a>=3&&y.append(v),y.toString()},r})(),sz=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),oz=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Fr=(function(){function r(i,a,s,l,c,d,f,m){f===void 0&&(f=0),m===void 0&&(m=0),this.rectangular=i,this.dataCapacity=a,this.errorCodewords=s,this.matrixWidth=l,this.matrixHeight=c,this.dataRegions=d,this.rsBlockData=f,this.rsBlockError=m}return r.lookup=function(i,a,s,l,c){var d,f;a===void 0&&(a=0),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=!0);try{for(var m=oz(cz),g=m.next();!g.done;g=m.next()){var v=g.value;if(!(a===1&&v.rectangular)&&!(a===2&&!v.rectangular)&&!(s!=null&&(v.getSymbolWidth()<s.getWidth()||v.getSymbolHeight()<s.getHeight()))&&!(l!=null&&(v.getSymbolWidth()>l.getWidth()||v.getSymbolHeight()>l.getHeight()))&&i<=v.dataCapacity)return v}}catch(y){d={error:y}}finally{try{g&&!g.done&&(f=m.return)&&f.call(m)}finally{if(d)throw d.error}}if(c)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+i);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(i){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(i){return this.rsBlockError},r})(),lz=(function(r){sz(i,r);function i(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return i.prototype.getInterleavedBlockCount=function(){return 10},i.prototype.getDataLengthForInterleavedBlock=function(a){return a<=8?156:155},i})(Fr),cz=[new Fr(!1,3,5,8,8,1),new Fr(!1,5,7,10,10,1),new Fr(!0,5,7,16,6,1),new Fr(!1,8,10,12,12,1),new Fr(!0,10,11,14,6,2),new Fr(!1,12,12,14,14,1),new Fr(!0,16,14,24,10,1),new Fr(!1,18,14,16,16,1),new Fr(!1,22,18,18,18,1),new Fr(!0,22,18,16,10,2),new Fr(!1,30,20,20,20,1),new Fr(!0,32,24,16,14,2),new Fr(!1,36,24,22,22,1),new Fr(!1,44,28,24,24,1),new Fr(!0,49,28,22,14,2),new Fr(!1,62,36,14,14,4),new Fr(!1,86,42,16,16,4),new Fr(!1,114,48,18,18,4),new Fr(!1,144,56,20,20,4),new Fr(!1,174,68,22,22,4),new Fr(!1,204,84,24,24,4,102,42),new Fr(!1,280,112,14,14,16,140,56),new Fr(!1,368,144,16,16,16,92,36),new Fr(!1,456,192,18,18,16,114,48),new Fr(!1,576,224,20,20,16,144,56),new Fr(!1,696,272,22,22,16,174,68),new Fr(!1,816,336,24,24,16,136,56),new Fr(!1,1050,408,18,18,36,175,68),new Fr(!1,1304,496,20,20,36,163,62),new lz],dz=(function(){function r(i){this.msg=i,this.pos=0,this.skipAtEnd=0;for(var a=i.split("").map(function(f){return f.charCodeAt(0)}),s=new ji,l=0,c=a.length;l<c;l++){var d=String.fromCharCode(a[l]&255);if(d==="?"&&i.charAt(l)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");s.append(d)}this.msg=s.toString(),this.shape=0,this.codewords=new ji,this.newEncoding=-1}return r.prototype.setSymbolShape=function(i){this.shape=i},r.prototype.setSizeConstraints=function(i,a){this.minSize=i,this.maxSize=a},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(i){this.skipAtEnd=i},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(i){this.codewords.append(i)},r.prototype.writeCodeword=function(i){this.codewords.append(i)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(i){this.newEncoding=i},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(i){i===void 0&&(i=this.getCodewordCount()),(this.symbolInfo==null||i>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Fr.lookup(i,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),uz=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),fz=(function(r){uz(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getEncodingMode=function(){return Ls},i.prototype.encode=function(a){for(var s=new ji;a.hasMoreCharacters();){var l=a.getCurrentChar();a.pos++,this.encodeChar(l,s);var c=s.length();if(c%3===0){this.writeNextTriplet(a,s);var d=T1.lookAheadTest(a.getMessage(),a.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){a.signalEncoderChange(sa);break}}}this.handleEOD(a,s)},i.prototype.encodeChar=function(a,s){switch(a){case 13:s.append(0);break;case 42:s.append(1);break;case 62:s.append(2);break;case 32:s.append(3);break;default:a>=48&&a<=57?s.append(a-48+4):a>=65&&a<=90?s.append(a-65+14):T1.illegalCharacter(fr.getCharAt(a));break}return 1},i.prototype.handleEOD=function(a,s){a.updateSymbolInfo();var l=a.getSymbolInfo().getDataCapacity()-a.getCodewordCount(),c=s.length();a.pos-=c,(a.getRemainingCharacters()>1||l>1||a.getRemainingCharacters()!==l)&&a.writeCodeword(nz),a.getNewEncoding()<0&&a.signalEncoderChange(sa)},i})(Ow),hz=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),pz=(function(r){hz(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getEncodingMode=function(){return rl},i.prototype.encodeChar=function(a,s){if(a===32)return s.append(3),1;if(a>=48&&a<=57)return s.append(a-48+4),1;if(a>=97&&a<=122)return s.append(a-97+14),1;if(a<32)return s.append(0),s.append(a),2;if(a<=47)return s.append(1),s.append(a-33),2;if(a<=64)return s.append(1),s.append(a-58+15),2;if(a>=91&&a<=95)return s.append(1),s.append(a-91+22),2;if(a===96)return s.append(2),s.append(0),2;if(a<=90)return s.append(2),s.append(a-65+1),2;if(a<=127)return s.append(2),s.append(a-123+27),2;s.append("1");var l=2;return l+=this.encodeChar(a-128,s),l},i})(Ow),T1=(function(){function r(){}return r.randomize253State=function(i){var a=149*i%253+1,s=Z8+a;return s<=254?s:s-254},r.encodeHighLevel=function(i,a,s,l,c){a===void 0&&(a=0),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=!1);var d=new Ow,f=[new iz,d,new pz,new fz,new az,new rz],m=new dz(i);m.setSymbolShape(a),m.setSizeConstraints(s,l),i.startsWith(e5)&&i.endsWith(n5)?(m.writeCodeword(KL),m.setSkipAtEnd(2),m.pos+=e5.length):i.startsWith(t5)&&i.endsWith(n5)&&(m.writeCodeword(JL),m.setSkipAtEnd(2),m.pos+=t5.length);var g=sa;for(c&&(d.encodeMaximal(m),g=m.getNewEncoding(),m.resetEncoderSignal());m.hasMoreCharacters();)f[g].encode(m),m.getNewEncoding()>=0&&(g=m.getNewEncoding(),m.resetEncoderSignal());var v=m.getCodewordCount();m.updateSymbolInfo();var y=m.getSymbolInfo().getDataCapacity();v<y&&g!==sa&&g!==Uo&&g!==no&&m.writeCodeword("");var A=m.getCodewords();for(A.length()<y&&A.append(Z8);A.length()<y;)A.append(this.randomize253State(A.length()+1));return m.getCodewords().toString()},r.lookAheadTest=function(i,a,s){var l=this.lookAheadTestIntern(i,a,s);if(s===Ls&&l===Ls){for(var c=Math.min(a+3,i.length),d=a;d<c;d++)if(!this.isNativeX12(i.charCodeAt(d)))return sa}else if(s===no&&l===no){for(var c=Math.min(a+4,i.length),d=a;d<c;d++)if(!this.isNativeEDIFACT(i.charCodeAt(d)))return sa}return l},r.lookAheadTestIntern=function(i,a,s){if(a>=i.length)return s;var l;s===sa?l=[0,1,1,1,1,1.25]:(l=[1,2,2,2,2,2.25],l[s]=0);for(var c=0,d=new Uint8Array(6),f=[];;){if(a+c===i.length){Gs.fill(d,0),Gs.fill(f,0);var m=this.findMinimums(l,f,Ui.MAX_VALUE,d),g=this.getMinimumCount(d);if(f[sa]===m)return sa;if(g===1){if(d[Uo]>0)return Uo;if(d[no]>0)return no;if(d[rl]>0)return rl;if(d[Ls]>0)return Ls}return yo}var v=i.charCodeAt(a+c);if(c++,this.isDigit(v)?l[sa]+=.5:this.isExtendedASCII(v)?(l[sa]=Math.ceil(l[sa]),l[sa]+=2):(l[sa]=Math.ceil(l[sa]),l[sa]++),this.isNativeC40(v)?l[yo]+=2/3:this.isExtendedASCII(v)?l[yo]+=8/3:l[yo]+=4/3,this.isNativeText(v)?l[rl]+=2/3:this.isExtendedASCII(v)?l[rl]+=8/3:l[rl]+=4/3,this.isNativeX12(v)?l[Ls]+=2/3:this.isExtendedASCII(v)?l[Ls]+=13/3:l[Ls]+=10/3,this.isNativeEDIFACT(v)?l[no]+=3/4:this.isExtendedASCII(v)?l[no]+=17/4:l[no]+=13/4,this.isSpecialB256(v)?l[Uo]+=4:l[Uo]++,c>=4){if(Gs.fill(d,0),Gs.fill(f,0),this.findMinimums(l,f,Ui.MAX_VALUE,d),f[sa]<this.min(f[Uo],f[yo],f[rl],f[Ls],f[no]))return sa;if(f[Uo]<f[sa]||f[Uo]+1<this.min(f[yo],f[rl],f[Ls],f[no]))return Uo;if(f[no]+1<this.min(f[Uo],f[yo],f[rl],f[Ls],f[sa]))return no;if(f[rl]+1<this.min(f[Uo],f[yo],f[no],f[Ls],f[sa]))return rl;if(f[Ls]+1<this.min(f[Uo],f[yo],f[no],f[rl],f[sa]))return Ls;if(f[yo]+1<this.min(f[sa],f[Uo],f[no],f[rl])){if(f[yo]<f[Ls])return yo;if(f[yo]===f[Ls]){for(var y=a+c+1;y<i.length;){var A=i.charCodeAt(y);if(this.isX12TermSep(A))return Ls;if(!this.isNativeX12(A))break;y++}return yo}}}}},r.min=function(i,a,s,l,c){var d=Math.min(i,Math.min(a,Math.min(s,l)));return c===void 0?d:Math.min(d,c)},r.findMinimums=function(i,a,s,l){for(var c=0;c<6;c++){var d=a[c]=Math.ceil(i[c]);s>d&&(s=d,Gs.fill(l,0)),s===d&&(l[c]=l[c]+1)}return s},r.getMinimumCount=function(i){for(var a=0,s=0;s<6;s++)a+=i[s];return a||0},r.isDigit=function(i){return i>=48&&i<=57},r.isExtendedASCII=function(i){return i>=128&&i<=255},r.isNativeC40=function(i){return i===32||i>=48&&i<=57||i>=65&&i<=90},r.isNativeText=function(i){return i===32||i>=48&&i<=57||i>=97&&i<=122},r.isNativeX12=function(i){return this.isX12TermSep(i)||i===32||i>=48&&i<=57||i>=65&&i<=90},r.isX12TermSep=function(i){return i===13||i===42||i===62},r.isNativeEDIFACT=function(i){return i>=32&&i<=94},r.isSpecialB256=function(i){return!1},r.determineConsecutiveDigitCount=function(i,a){a===void 0&&(a=0);for(var s=i.length,l=a;l<s&&this.isDigit(i.charCodeAt(l));)l++;return l-a},r.illegalCharacter=function(i){var a=Ui.toHexString(i.charCodeAt(0));throw a="0000".substring(0,4-a.length)+a,new Error("Illegal character: "+i+" (0x"+a+")")},r})(),uy=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},i5=(function(){function r(i){this.charset=i,this.name=i.name}return r.prototype.canEncode=function(i){try{return l1.encode(i,this.charset)!=null}catch{return!1}},r})(),mz=(function(){function r(i,a,s){var l,c,d,f,m,g;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(V){return new i5(VL.forName(V))}),this.encoders=[];var v=[];v.push(new i5(YL.ISO_8859_1));for(var y=a!=null&&a.name.startsWith("UTF"),A=0;A<i.length;A++){var w=!1;try{for(var k=(l=void 0,uy(v)),E=k.next();!E.done;E=k.next()){var I=E.value,T=i.charAt(A),N=T.charCodeAt(0);if(N===s||I.canEncode(T)){w=!0;break}}}catch(V){l={error:V}}finally{try{E&&!E.done&&(c=k.return)&&c.call(k)}finally{if(l)throw l.error}}if(!w)try{for(var j=(d=void 0,uy(this.ENCODERS)),B=j.next();!B.done;B=j.next()){var I=B.value;if(I.canEncode(i.charAt(A))){v.push(I),w=!0;break}}}catch(V){d={error:V}}finally{try{B&&!B.done&&(f=j.return)&&f.call(j)}finally{if(d)throw d.error}}w||(y=!0)}if(v.length===1&&!y)this.encoders=[v[0]];else{this.encoders=[];var U=0;try{for(var F=uy(v),P=F.next();!P.done;P=F.next()){var I=P.value;this.encoders[U++]=I}}catch(V){m={error:V}}finally{try{P&&!P.done&&(g=F.return)&&g.call(F)}finally{if(m)throw m.error}}}var z=-1;if(a!=null){for(var A=0;A<this.encoders.length;A++)if(this.encoders[A]!=null&&a.name===this.encoders[A].name){z=A;break}}this.priorityEncoderIndex=z}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(i){if(!(i<this.length()))throw new Error("index must be less than length");return this.encoders[i].name},r.prototype.getCharset=function(i){if(!(i<this.length()))throw new Error("index must be less than length");return this.encoders[i].charset},r.prototype.getECIValue=function(i){return this.encoders[i].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(i,a){if(!(a<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(i,a){if(!(a<this.length()))throw new Error("index must be less than length");return l1.encode(fr.getCharAt(i),this.encoders[a].name)},r})(),gz=3,vz=(function(){function r(i,a,s){this.fnc1=s;var l=new mz(i,a,s);if(l.length()===1)for(var c=0;c<this.bytes.length;c++){var d=i.charAt(c).charCodeAt(0);this.bytes[c]=d===s?1e3:d}else this.bytes=this.encodeMinimally(i,l,s)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(i,a){if(i+a-1>=this.bytes.length)return!1;for(var s=0;s<a;s++)if(this.isECI(i+s))return!1;return!0},r.prototype.charAt=function(i){if(i<0||i>=this.length())throw new Error(""+i);if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");return this.isFNC1(i)?this.fnc1:this.bytes[i]},r.prototype.subSequence=function(i,a){if(i<0||i>a||a>this.length())throw new Error(""+i);for(var s=new ji,l=i;l<a;l++){if(this.isECI(l))throw new Error("value at "+l+" is not a character but an ECI");s.append(this.charAt(l))}return s.toString()},r.prototype.isECI=function(i){if(i<0||i>=this.length())throw new Error(""+i);return this.bytes[i]>255&&this.bytes[i]<=999},r.prototype.isFNC1=function(i){if(i<0||i>=this.length())throw new Error(""+i);return this.bytes[i]===1e3},r.prototype.getECIValue=function(i){if(i<0||i>=this.length())throw new Error(""+i);if(!this.isECI(i))throw new Error("value at "+i+" is not an ECI but a character");return this.bytes[i]-256},r.prototype.addEdge=function(i,a,s){(i[a][s.encoderIndex]==null||i[a][s.encoderIndex].cachedTotalSize>s.cachedTotalSize)&&(i[a][s.encoderIndex]=s)},r.prototype.addEdges=function(i,a,s,l,c,d){var f=i.charAt(l).charCodeAt(0),m=0,g=a.length();a.getPriorityEncoderIndex()>=0&&(f===d||a.canEncode(f,a.getPriorityEncoderIndex()))&&(m=a.getPriorityEncoderIndex(),g=m+1);for(var v=m;v<g;v++)(f===d||a.canEncode(f,v))&&this.addEdge(s,l+1,new r5(f,a,v,c,d))},r.prototype.encodeMinimally=function(i,a,s){var l=i.length,c=new r5[l+1][a.length()];this.addEdges(i,a,c,0,null,s);for(var d=1;d<=l;d++){for(var f=0;f<a.length();f++)c[d][f]!=null&&d<l&&this.addEdges(i,a,c,d,c[d][f],s);for(var f=0;f<a.length();f++)c[d-1][f]=null}for(var m=-1,g=Ui.MAX_VALUE,f=0;f<a.length();f++)if(c[l][f]!=null){var v=c[l][f];v.cachedTotalSize<g&&(g=v.cachedTotalSize,m=f)}if(m<0)throw new Error('Failed to encode "'+i+'"');for(var y=[],A=c[l][m];A!=null;){if(A.isFNC1())y.unshift(1e3);else for(var w=a.encode(A.c,A.encoderIndex),d=w.length-1;d>=0;d--)y.unshift(w[d]&255);var k=A.previous===null?0:A.previous.encoderIndex;k!==A.encoderIndex&&y.unshift(256+a.getECIValue(A.encoderIndex)),A=A.previous}for(var E=[],d=0;d<E.length;d++)E[d]=y[d];return E},r})(),r5=(function(){function r(i,a,s,l,c){this.c=i,this.encoderSet=a,this.encoderIndex=s,this.previous=l,this.fnc1=c,this.c=i===c?1e3:i;var d=this.isFNC1()?1:a.encode(i,s).length,f=l===null?0:l.encoderIndex;f!==s&&(d+=gz),l!=null&&(d+=l.cachedTotalSize),this.cachedTotalSize=d}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),xz=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})();var a5;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(a5||(a5={}));(function(r){xz(i,r);function i(a,s,l,c,d){var f=r.call(this,a,s,l)||this;return f.shape=c,f.macroId=d,f}return i.prototype.getMacroId=function(){return this.macroId},i.prototype.getShapeHint=function(){return this.shape},i})(vz);var bz=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(i){this.compact=i},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(i){this.size=i},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(i){this.layers=i},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(i){this.codeWords=i},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(i){this.matrix=i},r})(),s5=(function(){function r(){}return r.singletonList=function(i){return[i]},r.min=function(i,a){return i.sort(a)[0]},r})(),yz=(function(){function r(i){this.previous=i}return r.prototype.getPrevious=function(){return this.previous},r})(),wz=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Dw=(function(r){wz(i,r);function i(a,s,l){var c=r.call(this,a)||this;return c.value=s,c.bitCount=l,c}return i.prototype.appendTo=function(a,s){a.appendBits(this.value,this.bitCount)},i.prototype.add=function(a,s){return new i(this,a,s)},i.prototype.addBinaryShift=function(a,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new i(this,a,s)},i.prototype.toString=function(){var a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+Ui.toBinaryString(a|1<<this.bitCount).substring(1)+">"},i})(yz),Az=(function(){var r=function(i,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])},r(i,a)};return function(i,a){r(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}})(),Sz=(function(r){Az(i,r);function i(a,s,l){var c=r.call(this,a,0,0)||this;return c.binaryShiftStart=s,c.binaryShiftByteCount=l,c}return i.prototype.appendTo=function(a,s){for(var l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):l===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(s[this.binaryShiftStart+l],8)},i.prototype.addBinaryShift=function(a,s){return new i(this,a,s)},i.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},i})(Dw);function kz(r,i,a){return new Sz(r,i,a)}function Mp(r,i,a){return new Dw(r,i,a)}var Cz=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Od=0,K3=1,s1=2,L7=3,tc=4,Ez=new Dw(null,0,0),fy=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],_z=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};function Iz(r){var i,a;try{for(var s=_z(r),l=s.next();!l.done;l=s.next()){var c=l.value;Gs.fill(c,-1)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return r[Od][tc]=0,r[K3][tc]=0,r[K3][Od]=28,r[L7][tc]=0,r[s1][tc]=0,r[s1][Od]=15,r}var z7=Iz(Gs.createInt32Array(6,6)),Nz=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Tz=(function(){function r(i,a,s,l){this.token=i,this.mode=a,this.binaryShiftByteCount=s,this.bitCount=l}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(i,a){var s=this.bitCount,l=this.token;if(i!==this.mode){var c=fy[this.mode][i];l=Mp(l,c&65535,c>>16),s+=c>>16}var d=i===s1?4:5;return l=Mp(l,a,d),new r(l,i,0,s+d)},r.prototype.shiftAndAppend=function(i,a){var s=this.token,l=this.mode===s1?4:5;return s=Mp(s,z7[this.mode][i],l),s=Mp(s,a,5),new r(s,this.mode,0,this.bitCount+l+5)},r.prototype.addBinaryShiftChar=function(i){var a=this.token,s=this.mode,l=this.bitCount;if(this.mode===tc||this.mode===s1){var c=fy[s][Od];a=Mp(a,c&65535,c>>16),l+=c>>16,s=Od}var d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new r(a,s,this.binaryShiftByteCount+1,l+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(i+1)),f},r.prototype.endBinaryShift=function(i){if(this.binaryShiftByteCount===0)return this;var a=this.token;return a=kz(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(a,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(i){var a=this.bitCount+(fy[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=r.calculateBinaryShiftCost(i)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount},r.prototype.toBitArray=function(i){for(var a,s,l=[],c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())l.unshift(c);var d=new so;try{for(var f=Nz(l),m=f.next();!m.done;m=f.next()){var g=m.value;g.appendTo(d,i)}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}return d},r.prototype.toString=function(){return fr.format("%s bits=%d bytes=%d",Cz[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(Ez,Od,0,0),r})();function Mz(r){var i=fr.getCharCode(" "),a=fr.getCharCode("."),s=fr.getCharCode(",");r[Od][i]=1;for(var l=fr.getCharCode("Z"),c=fr.getCharCode("A"),d=c;d<=l;d++)r[Od][d]=d-c+2;r[K3][i]=1;for(var f=fr.getCharCode("z"),m=fr.getCharCode("a"),d=m;d<=f;d++)r[K3][d]=d-m+2;r[s1][i]=1;for(var g=fr.getCharCode("9"),v=fr.getCharCode("0"),d=v;d<=g;d++)r[s1][d]=d-v+2;r[s1][s]=12,r[s1][a]=13;for(var y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],A=0;A<y.length;A++)r[L7][fr.getCharCode(y[A])]=A;for(var w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],A=0;A<w.length;A++)fr.getCharCode(w[A])>0&&(r[tc][fr.getCharCode(w[A])]=A);return r}var hy=Mz(Gs.createInt32Array(5,256)),h3=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Rz=(function(){function r(i){this.text=i}return r.prototype.encode=function(){for(var i=fr.getCharCode(" "),a=fr.getCharCode(`
`),s=s5.singletonList(Tz.INITIAL_STATE),l=0;l<this.text.length;l++){var c=void 0,d=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case fr.getCharCode("\r"):c=d===a?2:0;break;case fr.getCharCode("."):c=d===i?3:0;break;case fr.getCharCode(","):c=d===i?4:0;break;case fr.getCharCode(":"):c=d===i?5:0;break;default:c=0}c>0?(s=r.updateStateListForPair(s,l,c),l++):s=this.updateStateListForChar(s,l)}var f=s5.min(s,function(m,g){return m.getBitCount()-g.getBitCount()});return f.toBitArray(this.text)},r.prototype.updateStateListForChar=function(i,a){var s,l,c=[];try{for(var d=h3(i),f=d.next();!f.done;f=d.next()){var m=f.value;this.updateStateForChar(m,a,c)}}catch(g){s={error:g}}finally{try{f&&!f.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return r.simplifyStates(c)},r.prototype.updateStateForChar=function(i,a,s){for(var l=this.text[a]&255,c=hy[i.getMode()][l]>0,d=null,f=0;f<=tc;f++){var m=hy[f][l];if(m>0){if(d==null&&(d=i.endBinaryShift(a)),!c||f===i.getMode()||f===s1){var g=d.latchAndAppend(f,m);s.push(g)}if(!c&&z7[i.getMode()][f]>=0){var v=d.shiftAndAppend(f,m);s.push(v)}}}if(i.getBinaryShiftByteCount()>0||hy[i.getMode()][l]===0){var y=i.addBinaryShiftChar(a);s.push(y)}},r.updateStateListForPair=function(i,a,s){var l,c,d=[];try{for(var f=h3(i),m=f.next();!m.done;m=f.next()){var g=m.value;this.updateStateForPair(g,a,s,d)}}catch(v){l={error:v}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}return this.simplifyStates(d)},r.updateStateForPair=function(i,a,s,l){var c=i.endBinaryShift(a);if(l.push(c.latchAndAppend(tc,s)),i.getMode()!==tc&&l.push(c.shiftAndAppend(tc,s)),s===3||s===4){var d=c.latchAndAppend(s1,16-s).latchAndAppend(s1,1);l.push(d)}if(i.getBinaryShiftByteCount()>0){var f=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);l.push(f)}},r.simplifyStates=function(i){var a,s,l,c,d=[];try{for(var f=h3(i),m=f.next();!m.done;m=f.next()){var g=m.value,v=!0,y=function(I){if(I.isBetterThanOrEqualTo(g))return v=!1,"break";g.isBetterThanOrEqualTo(I)&&(d=d.filter(function(T){return T!==I}))};try{for(var A=(l=void 0,h3(d)),w=A.next();!w.done;w=A.next()){var k=w.value,E=y(k);if(E==="break")break}}catch(I){l={error:I}}finally{try{w&&!w.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}v&&d.push(g)}}catch(I){a={error:I}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}return d},r})(),Oz=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(i){return r.encode(i,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(i,a,s){var l=new Rz(i).encode(),c=Ui.truncDivision(l.getSize()*a,100)+11,d=l.getSize()+c,f,m,g,v,y;if(s!==r.DEFAULT_AZTEC_LAYERS){if(f=s<0,m=Math.abs(s),m>(f?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new Ln(fr.format("Illegal value %s for layers",s));g=r.totalBitsInLayer(m,f),v=r.WORD_SIZE[m];var A=g-g%v;if(y=r.stuffBits(l,v),y.getSize()+c>A)throw new Ln("Data to large for user specified layer");if(f&&y.getSize()>v*64)throw new Ln("Data to large for user specified layer")}else{v=0,y=null;for(var w=0;;w++){if(w>r.MAX_NB_BITS)throw new Ln("Data too large for an Aztec code");if(f=w<=3,m=f?w+1:w,g=r.totalBitsInLayer(m,f),!(d>g)){(y==null||v!==r.WORD_SIZE[m])&&(v=r.WORD_SIZE[m],y=r.stuffBits(l,v));var A=g-g%v;if(!(f&&y.getSize()>v*64)&&y.getSize()+c<=A)break}}}var k=r.generateCheckWords(y,g,v),E=y.getSize()/v,I=r.generateModeMessage(f,m,E),T=(f?11:14)+m*4,N=new Int32Array(T),j;if(f){j=T;for(var w=0;w<N.length;w++)N[w]=w}else{j=T+1+2*Ui.truncDivision(Ui.truncDivision(T,2)-1,15);for(var B=Ui.truncDivision(T,2),U=Ui.truncDivision(j,2),w=0;w<B;w++){var F=w+Ui.truncDivision(w,15);N[B-w-1]=U-F-1,N[B+w]=U+F+1}}for(var P=new ac(j),w=0,z=0;w<m;w++){for(var V=(m-w)*4+(f?9:12),L=0;L<V;L++)for(var Q=L*2,q=0;q<2;q++)k.get(z+Q+q)&&P.set(N[w*2+q],N[w*2+L]),k.get(z+V*2+Q+q)&&P.set(N[w*2+L],N[T-1-w*2-q]),k.get(z+V*4+Q+q)&&P.set(N[T-1-w*2-q],N[T-1-w*2-L]),k.get(z+V*6+Q+q)&&P.set(N[T-1-w*2-L],N[w*2+q]);z+=V*8}if(r.drawModeMessage(P,f,j,I),f)r.drawBullsEye(P,Ui.truncDivision(j,2),5);else{r.drawBullsEye(P,Ui.truncDivision(j,2),7);for(var w=0,L=0;w<Ui.truncDivision(T,2)-1;w+=15,L+=16)for(var q=Ui.truncDivision(j,2)&1;q<j;q+=2)P.set(Ui.truncDivision(j,2)-L,q),P.set(Ui.truncDivision(j,2)+L,q),P.set(q,Ui.truncDivision(j,2)-L),P.set(q,Ui.truncDivision(j,2)+L)}var ee=new bz;return ee.setCompact(f),ee.setSize(j),ee.setLayers(m),ee.setCodeWords(E),ee.setMatrix(P),ee},r.drawBullsEye=function(i,a,s){for(var l=0;l<s;l+=2)for(var c=a-l;c<=a+l;c++)i.set(c,a-l),i.set(c,a+l),i.set(a-l,c),i.set(a+l,c);i.set(a-s,a-s),i.set(a-s+1,a-s),i.set(a-s,a-s+1),i.set(a+s,a-s),i.set(a+s,a-s+1),i.set(a+s,a+s-1)},r.generateModeMessage=function(i,a,s){var l=new so;return i?(l.appendBits(a-1,2),l.appendBits(s-1,6),l=r.generateCheckWords(l,28,4)):(l.appendBits(a-1,5),l.appendBits(s-1,11),l=r.generateCheckWords(l,40,4)),l},r.drawModeMessage=function(i,a,s,l){var c=Ui.truncDivision(s,2);if(a)for(var d=0;d<7;d++){var f=c-3+d;l.get(d)&&i.set(f,c-5),l.get(d+7)&&i.set(c+5,f),l.get(20-d)&&i.set(f,c+5),l.get(27-d)&&i.set(c-5,f)}else for(var d=0;d<10;d++){var f=c-5+d+Ui.truncDivision(d,5);l.get(d)&&i.set(f,c-7),l.get(d+10)&&i.set(c+7,f),l.get(29-d)&&i.set(f,c+7),l.get(39-d)&&i.set(c-7,f)}},r.generateCheckWords=function(i,a,s){var l,c,d=i.getSize()/s,f=new F7(r.getGF(s)),m=Ui.truncDivision(a,s),g=r.bitsToWords(i,s,m);f.encode(g,m-d);var v=a%s,y=new so;y.appendBits(0,v);try{for(var A=Oz(Array.from(g)),w=A.next();!w.done;w=A.next()){var k=w.value;y.appendBits(k,s)}}catch(E){l={error:E}}finally{try{w&&!w.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}return y},r.bitsToWords=function(i,a,s){var l=new Int32Array(s),c,d;for(c=0,d=i.getSize()/a;c<d;c++){for(var f=0,m=0;m<a;m++)f|=i.get(c*a+m)?1<<a-m-1:0;l[c]=f}return l},r.getGF=function(i){switch(i){case 4:return kl.AZTEC_PARAM;case 6:return kl.AZTEC_DATA_6;case 8:return kl.AZTEC_DATA_8;case 10:return kl.AZTEC_DATA_10;case 12:return kl.AZTEC_DATA_12;default:throw new Ln("Unsupported word size "+i)}},r.stuffBits=function(i,a){for(var s=new so,l=i.getSize(),c=(1<<a)-2,d=0;d<l;d+=a){for(var f=0,m=0;m<a;m++)(d+m>=l||i.get(d+m))&&(f|=1<<a-1-m);(f&c)===c?(s.appendBits(f&c,a),d--):(f&c)===0?(s.appendBits(f|1,a),d--):s.appendBits(f,a)}return s},r.totalBitsInLayer=function(i,a){return((a?88:112)+16*i)*i},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();const Dz=()=>{const[r,i]=D.useState({isScanning:!1,error:null,result:null}),a=D.useRef(null),s=D.useRef(null),l=D.useRef(null),c=D.useRef(!1),d=D.useCallback(()=>{c.current=!1,s.current&&(s.current.getTracks().forEach(v=>v.stop()),s.current=null),l.current&&(l.current.reset(),l.current=null),a.current&&(a.current.srcObject=null)},[]),f=D.useCallback(async v=>{if(!c.current){a.current=v,i(y=>({...y,isScanning:!0,error:null,result:null})),c.current=!0;try{const y=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}});s.current=y,v.srcObject=y,await v.play();const A=new jL;l.current=A,A.decodeFromStream(y,v,(w,k)=>{if(c.current&&w){const E=w.getText();i(I=>({...I,result:E,isScanning:!1})),d()}}).catch(w=>{c.current&&(i(k=>({...k,error:w.message||"Failed to start barcode scanner",isScanning:!1})),d())})}catch(y){let A="Camera access denied";y.name==="NotAllowedError"?A="Camera permission denied. Please allow camera access.":y.name==="NotFoundError"?A="No camera found on this device.":y.name==="NotReadableError"?A="Camera is in use by another application.":y.message&&(A=y.message),i(w=>({...w,error:A,isScanning:!1})),d()}}},[d]),m=D.useCallback(()=>{d(),i(v=>({...v,isScanning:!1}))},[d]),g=D.useCallback(()=>{i(v=>({...v,result:null,error:null}))},[]);return D.useEffect(()=>()=>{d()},[d]),{isScanning:r.isScanning,error:r.error,result:r.result,startScanning:f,stopScanning:m,clearResult:g}},o5={symptomCheck:"text-themeblue3",answerSlider:"bg-themeblue3",answerButton:"text-white",badgeBg:"bg-themeblue3",badgeText:"text-white",badgeBorder:"border-themeblue1/30",overlayBg:"bg-themeblue3",symptomClass:"border-themeblue3/20 text-primary bg-themeblue3/10!",buttonClass:"bg-themeblue3/20 hover:bg-themeblue3/30 text-white",barBg:"bg-gradient-to-r from-themeblue3/5 to-themeblue3/10 border border-themeblue3/20",sliderClass:"bg-themeblue3"},l5={"CAT I":{symptomCheck:"text-themeredred",answerSlider:"bg-themeredred",answerButton:"text-white",badgeBg:"bg-themeredred",badgeText:"text-white",badgeBorder:"border-themeredred/30",overlayBg:"bg-themeredred",symptomClass:"border-themeredred/60 bg-themeredred/10! text-white",buttonClass:"bg-themeredred/60 hover:bg-themeredred/30 text-white",barBg:"bg-gradient-to-r from-themeredred/5 to-themeredred/10 border border-themeredred/20",sliderClass:"bg-themeredred",dispositionBadge:"bg-themeredred text-white"},"CAT II":{symptomCheck:"text-themeyellow",answerSlider:"bg-themeyellowlow",answerButton:"text-primary",badgeBg:"bg-themeyellowlow",badgeText:"text-primary",badgeBorder:"border-themeyellowlow/30",overlayBg:"bg-themeyellowlow",symptomClass:"border-themeyellowlow/60 bg-themeyellowlow/20 text-primary",buttonClass:"bg-themeyellowlow/20 hover:bg-themeyellowlow/30 text-primary",barBg:"bg-gradient-to-r from-themeyellowlow/5 to-themeyellowlow/10 border border-themeyellowlow/20",sliderClass:"bg-themeyellowlow",dispositionBadge:"bg-themeyellowlow/70 text-primary"},"CAT III":{symptomCheck:"text-themegreen",answerSlider:"bg-themegreen",answerButton:"text-white",badgeBg:"bg-themegreen",badgeText:"text-white",badgeBorder:"border-themegreen/30",overlayBg:"bg-themegreen",symptomClass:"border-themegreen/60 bg-themegreen/10! text-primary",buttonClass:"bg-themegreen/20 hover:bg-themegreen/30 text-primary",barBg:"bg-gradient-to-r from-themegreen/5 to-themegreen/10 border border-themegreen/20",sliderClass:"bg-themegreen",dispositionBadge:"bg-themegreen/40 text-white"},"CAT IV":{symptomCheck:"text-themeblue2",answerSlider:"bg-themeblue2",answerButton:"text-white",badgeBg:"bg-themeblue2",badgeText:"text-white",badgeBorder:"border-themeblue2/30",overlayBg:"bg-themeblue2",symptomClass:"border-themeblue2/60 bg-themeblue2/10! text-primary",buttonClass:"bg-themeblue2/20 hover:bg-themeblue2/30 text-primary",barBg:"bg-gradient-to-r from-themeblue2/5 to-themeblue2/10 border border-themeblue2/20",sliderClass:"bg-themeblue2",dispositionBadge:"bg-themeblue2/10 text-white"},OTHER:{...o5,dispositionBadge:"bg-themeblue3/80 text-white"},default:{...o5,dispositionBadge:"bg-themeblue3/10 text-themeblue3"}},cf=r=>l5[r??""]??l5.default;function jz(r){const i=r.getDate().toString().padStart(2,"0"),a=r.getHours().toString().padStart(2,"0"),s=r.getMinutes().toString().padStart(2,"0"),l=r.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),c=r.getFullYear();return`${i}${a}${s}${l}${c}`}function Bz({encodedText:r}){const i=D.useRef(null);D.useEffect(()=>{if(!(!i.current||!r))try{hw.toCanvas(i.current,{bcid:"datamatrix",text:r,scale:2,padding:3})}catch(s){o1("NoteImport.StaticBarcode",s)}},[r]);const a=r.length>300;return x.jsx("div",{className:"p-2 bg-themewhite2",children:x.jsxs("div",{className:`flex ${a?"flex-col items-center gap-3":"flex-row items-start gap-3"}`,children:[x.jsx("div",{className:`shrink-0 ${a?"flex justify-center":""}`,children:x.jsx("canvas",{ref:i,className:"border border-gray-300 bg-white rounded-md",style:{maxWidth:"120px",height:"auto"}})}),x.jsx("div",{className:`text-secondary ${a?"w-full":"flex-1 min-w-0"}`,children:x.jsx("code",{className:"text-xs break-all bg-themewhite3 p-2 rounded block max-h-24 overflow-y-auto",children:r})})]})})}const Pz=({state:r,setState:i,onImportSuccess:a,isMobile:s=!1})=>{const l=D.useRef(null),c=D.useRef(null),{importFromBarcode:d}=cj(),{shareNote:f,shareStatus:m}=kw(),g=$P(r.preview?.clinicId??null),{isScanning:v,error:y,result:A,startScanning:w,stopScanning:k,clearResult:E}=Dz(),I=D.useCallback(z=>{try{const V=d(z);i(L=>({...L,preview:V,viewState:"decoded"}))}catch(V){i(L=>({...L,scanError:V.message||"Failed to decode barcode"}))}},[d,i]);D.useEffect(()=>{A&&(i(z=>({...z,inputText:A})),E(),I(A))},[A,E,I,i]),D.useEffect(()=>{y&&i(z=>({...z,scanError:y,viewState:"input"}))},[y,i]);const T=()=>{i(z=>({...z,scanError:"",viewState:"scanning"})),setTimeout(()=>{c.current&&w(c.current)},100)},N=()=>{k(),i(z=>({...z,viewState:"input"}))};D.useEffect(()=>{if(r.copiedTarget){const z=window.setTimeout(()=>i(V=>({...V,copiedTarget:null})),Li.COPY_FEEDBACK);return()=>clearTimeout(z)}},[r.copiedTarget,i]),D.useEffect(()=>{r.scanError&&r.inputText&&i(z=>({...z,scanError:""}))},[r.inputText,r.scanError,i]);const j=()=>{if(!r.inputText.trim()){i(z=>({...z,scanError:"Please enter or scan a barcode"}));return}I(r.inputText)},B=D.useCallback((z,V)=>{navigator.clipboard.writeText(z),i(L=>({...L,copiedTarget:V}))},[i]),U=D.useCallback(()=>{r.preview&&f({id:"",encodedText:r.preview.encodedText,createdAt:r.preview.timestamp?.toISOString()||new Date().toISOString(),symptomIcon:r.preview.symptomIcon,symptomText:r.preview.symptomText,dispositionType:r.preview.dispositionType,dispositionText:r.preview.dispositionText,previewText:r.preview.fullNote.slice(0,200),sync_status:"synced",authorId:"",authorName:null},s)},[r.preview,f,s]),F=r.preview,P=F?cf(F.dispositionType):null;return x.jsxs("div",{className:"flex flex-col h-full",children:[r.viewState==="input"&&x.jsxs("div",{className:"flex flex-col p-4 md:p-6 h-max min-h-20",children:[x.jsxs("div",{className:"mb-4 relative",children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{ref:l,type:"text",value:r.inputText,onChange:z=>i(V=>({...V,inputText:z.target.value})),className:"w-full rounded-full p-2 pl-10 border border-themegray1 focus:bg-themewhite2 text-sm focus:outline-none bg-themewhite text-tertiary pr-10",placeholder:"Enter barcode string or scan"}),r.inputText&&x.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:x.jsx("button",{type:"button",onClick:()=>i(z=>({...z,inputText:""})),className:"p-1 text-tertiary",title:"Clear input",children:x.jsx(ms,{size:16})})})]}),r.scanError&&x.jsx("div",{className:"ml-2 mt-2 text-sm text-themeredred",children:r.scanError})]}),x.jsxs("div",{className:"flex gap-3 justify-between",children:[x.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-themewhite2 text-secondary rounded-full text-sm font-medium hover:bg-themewhite transition-colors",children:[x.jsx(X5,{size:16}),"Scan"]}),x.jsx(jb,{text:"Decode",onClick:j,variant:"dispo-specific",className:"bg-themeblue3 text-white rounded-full"})]})]}),r.viewState==="scanning"&&x.jsxs("div",{className:"flex flex-col p-4 md:p-6 h-max min-h-60",children:[x.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-video mb-4",children:[x.jsx("video",{ref:c,className:"w-full h-full object-cover",playsInline:!0,muted:!0}),x.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[x.jsx("div",{className:"absolute inset-4 border-2 border-white/30 rounded-lg"}),x.jsx("div",{className:"absolute inset-x-4 top-1/2 h-0.5 bg-themeblue2 animate-pulse"}),x.jsx(g_,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 text-white/50"})]}),v&&x.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1.5 rounded-full",children:"Looking for Data Matrix code..."})]}),x.jsx("div",{className:"flex gap-3 justify-center",children:x.jsx(jb,{text:"Cancel",onClick:N,variant:"dispo-specific",className:"bg-themewhite2 text-secondary rounded-full"})})]}),r.viewState==="decoded"&&F&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"px-4 md:px-6 pt-3 pb-2 border-b border-tertiary/10 bg-themewhite2",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-primary",children:F.symptomText}),F.dispositionType&&P&&x.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium ${P.badgeBg} ${P.badgeText}`,children:[F.dispositionType,F.dispositionText?`  ${F.dispositionText}`:""]})]}),x.jsxs("div",{className:"flex items-center gap-3 text-xs text-tertiary flex-wrap",children:[F.timestamp&&x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(lx,{size:12,className:"shrink-0"}),jz(F.timestamp)]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(W_,{size:12,className:"shrink-0"}),F.authorLabel]}),x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(W5,{size:12,className:"shrink-0"}),g||(F.clinicId?"Loading...":"Unknown")]})]})]}),x.jsx("div",{className:`flex-1 overflow-y-auto p-4 md:p-6 bg-themewhite2 ${s?"pb-24":""}`,children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-t-md bg-themewhite text-xs text-secondary",children:[x.jsx("span",{className:"font-medium",children:"Note Preview"}),x.jsx(Uu,{onClick:()=>B(F.fullNote,"preview"),status:r.copiedTarget==="preview"?"done":"idle",variant:"copy",title:"Copy note text"})]}),x.jsx("div",{className:"p-3 rounded-b-md bg-themewhite3 text-tertiary text-[8pt] whitespace-pre-wrap max-h-48 overflow-y-auto border border-themegray1/15",children:F.fullNote||"No content"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-t-md bg-themewhite text-xs text-secondary",children:[x.jsx("span",{className:"font-medium",children:"Encoded Note"}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Uu,{onClick:()=>B(F.encodedText,"encoded"),status:r.copiedTarget==="encoded"?"done":"idle",variant:"copy",title:"Copy encoded text"}),x.jsx(Uu,{onClick:U,status:m==="shared"||m==="copied"?"done":m==="generating"||m==="sharing"?"busy":"idle",variant:"share",title:"Share note as image"})]})]}),x.jsx("div",{className:"mt-1",children:x.jsx(Bz,{encodedText:F.encodedText})})]})]})}),a&&x.jsx("div",{className:`shrink-0 flex justify-end px-4 md:px-6 ${s?"pt-3 pb-4":"py-3"} border-t border-tertiary/10 bg-themewhite2`,style:s?{paddingBottom:"max(1rem, calc(env(safe-area-inset-bottom, 0px) + 1rem))"}:{},children:x.jsx(jb,{text:"Import Note",onClick:()=>{a({encodedText:r.inputText,decodedText:F.fullNote,preview:F})},variant:"dispo-specific",className:"bg-themeblue3 text-white rounded-full"})})]})]})};function Fz({isVisible:r,onClose:i,initialViewState:a,onImportSuccess:s,isMobile:l}){const[c,d]=D.useState({viewState:a||"input",inputText:"",preview:null,scanError:"",copiedTarget:null});D.useEffect(()=>{r&&d({viewState:a||"input",inputText:"",preview:null,scanError:"",copiedTarget:null})},[r,a]);const f=c.viewState==="decoded",m=f?"Screening Note":c.viewState==="scanning"?"Scan Barcode":"Import Note",g=D.useCallback(()=>{d(v=>({...v,viewState:"input",scanError:"",preview:null}))},[]);return x.jsx(of,{isVisible:r,onClose:i,fullHeight:"90dvh",header:{title:m,showBack:f,onBack:f?g:void 0},children:x.jsx(Pz,{state:c,setState:d,onImportSuccess:s,isMobile:l})})}const H7=D.createContext(void 0);function Uz({children:r}){const[i,a]=D.useState(null);D.useEffect(()=>{if(typeof window<"u"){let c=null;try{c=localStorage.getItem("theme")}catch(m){o1("ThemeContext.getItem",m)}const d=window.matchMedia("(prefers-color-scheme: dark)");a(c==="light"||c==="dark"?c:d.matches?"dark":"light");const f=m=>{let g=null;try{g=localStorage.getItem("theme")}catch(v){o1("ThemeContext.getItemListener",v)}g!=="light"&&g!=="dark"&&a(m.matches?"dark":"light")};return d.addEventListener("change",f),()=>d.removeEventListener("change",f)}},[]),D.useEffect(()=>{if(i&&typeof window<"u"){document.documentElement.setAttribute("data-theme",i);try{localStorage.setItem("theme",i)}catch(f){o1("ThemeContext.setItem",f)}const c=i==="dark"?"rgb(15, 25, 35)":"rgb(255, 251, 251)";let d=document.querySelector('meta[name="theme-color"]');d?d.setAttribute("content",c):(d=document.createElement("meta"),d.setAttribute("name","theme-color"),d.setAttribute("content",c),document.head.appendChild(d))}},[i]);const s=c=>{a(c)},l=()=>{a(c=>c==="light"?"dark":"light")};return i===null?null:x.jsx(H7.Provider,{value:{theme:i,toggleTheme:l,setTheme:s},children:r})}function Lz(){const r=D.useContext(H7);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}const zz=r=>({...r,isVisible:!1,answer:null,selectedOptions:[],count:0,screenerResponses:void 0,followUpResponse:void 0,completedScreenerId:void 0,actionStatus:void 0}),Ch=(r,i,a)=>r.map((s,l)=>l<=i||a[l]?.type==="rf"?s:zz(s)),Rp=(r,i,a)=>{if(i===null)return[];const s=Array.isArray(i)?[...i].sort((l,c)=>l-c):[i];for(let l=0;l<s.length;l++){const c=s[l];if(c>=0&&c<r.length&&(r[c]={...r[c],isVisible:!0},a[c]?.type==="action"))return s.slice(l+1)}return[]},Hz=(r,i,a)=>{const s=D.useMemo(()=>r.findIndex(z=>z.type==="initial"),[r]),l=D.useMemo(()=>r.reduce((z,V,L)=>(V.type==="rf"&&z.push(L),z),[]),[r]),c=D.useCallback(()=>r.map((z,V)=>({index:V,isVisible:V<=s,answer:null,selectedOptions:[],count:0})),[r,s]),[d,f]=D.useState(()=>i&&i.length>0?i:c()),[m,g]=D.useState(a!==void 0?a:null),v=D.useRef([]),y=D.useCallback((z,V,L)=>l.reduce((Q,q)=>q===V?Q+(L??0):Q+(z[q]?.selectedOptions.length||0),0),[l]),A=D.useCallback((z,V,L,Q)=>{const q=r[V];if(!q?.answerOptions?.[0])return z;let ee=z;if(L){const X=q.answerOptions[0],ae=Q?.text!==X.text;ee[V]={...ee[V],answer:X},g(X.disposition?.[0]||null),ae&&(ee=Ch(ee,V,r),v.current=Rp(ee,X.next,r))}else Q?.text===q.answerOptions[0]?.text&&(ee[V]={...ee[V],answer:null},g(null),ee=Ch(ee,V,r),v.current=[]);return ee},[r]),w=D.useCallback((z,V,L)=>{const Q=r[V],q=z[V];if(!q||!Q)return z;const ee=L.length;let X=[...z];if(X[V]={...q,selectedOptions:L,count:ee},Q.type==="rf"){const K=y(X,V,ee)>0,ie=X[s],ne=r[s];if(ie&&ne?.answerOptions?.[0]){const J=ie.answer;let te=[...X[s].selectedOptions];if(ne.questionOptions&&ne.questionOptions.length>0){const oe=ne.questionOptions.findIndex(we=>we.text.toLowerCase().includes("red flag"));oe!==-1&&(K&&!te.includes(oe)?te.push(oe):!K&&te.includes(oe)&&(te=te.filter(we=>we!==oe)))}X[s]={...X[s],selectedOptions:te,count:te.length};const $=K||te.length>0;X=A(X,s,$,J)}}else if(Q.type==="initial"&&Q.questionOptions&&Q.questionOptions.length>0){const ae=y(X),K=ee+ae>0;X=A(X,V,K,q.answer)}else if((Q.type==="choice"||Q.type==="count")&&Q.answerOptions){const ae=Q.type==="choice"?ee>0?0:1:ee>=3?0:1,K=Q.answerOptions[ae];X[V]={...X[V],answer:K},q.answer?.text!==K.text&&(X=Ch(X,V,r),v.current=Rp(X,K.next,r)),g(K.disposition?.[0]||null)}return X},[r,s,y,A]),k=D.useCallback((z,V)=>{f(L=>{const Q=r[z],q=L[z];if(!q||!Q)return L;const ee=q.selectedOptions.includes(V)?q.selectedOptions.filter(X=>X!==V):[...q.selectedOptions,V];return w(L,z,ee)})},[r,w]),E=(z,V)=>{if(!z.questionOptions?.length)return[[],0];if(V){const L=z.questionOptions.map((Q,q)=>q);return[L,L.length]}return[[],0]},I=D.useCallback((z,V,L)=>{const Q=r[V],q=z[V];if(!q||!Q||!Q.answerOptions?.[L])return z;const ee=Q.answerOptions[L];let X=[...z];if(Q.type==="initial"){const ae=ee.text===Q.answerOptions[0].text,[K,ie]=E(Q,ae);X[V]={...q,answer:ee,selectedOptions:K,count:ie},l.forEach(ne=>{const J=r[ne];if(J){const[te,$]=E(J,ae);X[ne]={...X[ne],selectedOptions:te,count:$}}})}else{const[ae,K]=Q.questionOptions?.length?E(Q,ee.selectAll):[q.selectedOptions,q.selectedOptions.length];X[V]={...q,answer:ee,selectedOptions:ae,count:K}}return X=Ch(X,V,r),v.current=Rp(X,ee.next,r),g(ee.disposition?.[0]||null),X},[r,l]),T=D.useCallback((z,V)=>{f(L=>I(L,z,V))},[I]),N=D.useCallback(()=>d.filter(z=>z.isVisible).sort((z,V)=>z.index-V.index),[d]),j=D.useCallback(()=>{v.current=[],f(c()),g(null)},[c]),B=d[s]?.answer!==null?!0:d.some((z,V)=>V>s&&r[V]?.type!=="rf"&&(z.answer!==null||z.actionStatus!==void 0)),U=D.useCallback(()=>{v.current=[],f(z=>{let V=-1;for(let Q=z.length-1;Q>=0;Q--)if(!l.includes(Q)&&(z[Q].answer!==null||z[Q].actionStatus!==void 0)){V=Q;break}if(V===-1)return z;let L=[...z];if(L[V]={...L[V],answer:null,selectedOptions:[],count:0,actionStatus:void 0},V===s)l.forEach(Q=>{L[Q]={...L[Q],selectedOptions:[],count:0}}),L=Ch(L,s,r),g(null);else{L=Ch(L,V,r);let Q=null;for(let q=V-1;q>=0;q--){if(l.includes(q))continue;if(L[q].actionStatus==="deferred"){Q={type:"OTHER",text:"defer to AEM"};break}const ee=L[q].answer;if(ee?.disposition?.[0]){Q=ee.disposition[0];break}}g(Q)}return L})},[s,l,r]),F=D.useCallback((z,V,L,Q)=>{const q=v.current;f(ee=>{const X=[...ee];return z<0||z>=X.length?ee:(X[z]={...X[z],screenerResponses:L,completedScreenerId:V,followUpResponse:Q},v.current=Rp(X,q,r),X)})},[r]),P=D.useCallback((z,V)=>{const L=v.current;f(Q=>{const q=[...Q];return z<0||z>=q.length?Q:(q[z]={...q[z],actionStatus:V},v.current=Rp(q,L,r),q)}),V==="deferred"&&g({type:"OTHER",text:"defer to AEM"})},[r]);return{cardStates:d,currentDisposition:m,handleQuestionOption:k,handleAnswer:T,getVisibleCards:N,resetAlgorithm:j,canGoBack:B,goBackOneCard:U,setScreenerResults:F,setActionStatus:P}},T3=({colorClass:r})=>x.jsxs("div",{className:"flex flex-col items-center py-1",children:[x.jsx("div",{className:`connector-dot ${r}`,style:{animationDelay:"0ms"}}),x.jsx("div",{className:`connector-dot ${r}`,style:{animationDelay:"100ms"}}),x.jsx("div",{className:`connector-dot ${r}`,style:{animationDelay:"200ms"}}),x.jsx("div",{className:`connector-dot ${r}`,style:{animationDelay:"290ms"}})]}),qz=({algorithmOptions:r,visibleCards:i,isTransitioning:a,onAnswer:s,onQuestionOption:l,onOpenScreener:c,onActionStatus:d})=>x.jsx("div",{className:"space-y-0",children:i.map((f,m)=>{const g=r[f.index];if(!g)return null;const v=cf(f.answer?.disposition?.[0]?.type),y=g.type==="rf",A=g.type==="choice",w=g.type==="count",k=g.type==="initial",E=g.type==="action",I=E&&!!g.screenerConfig,T=m<i.length-1;if(I){const N=g.screenerConfig,j=!!f.completedScreenerId,U=!!N.conditionalExtension&&f.completedScreenerId===N.conditionalExtension.screener.id?N.conditionalExtension.screener:N,F=j&&f.screenerResponses&&!r7(U,f.screenerResponses),P=f.screenerResponses?a7(U,f.screenerResponses):0,z=Aw(U),L=j?U.interpretations.find(Q=>P>=Q.minScore&&P<=Q.maxScore)?.label??"":"";return x.jsxs("div",{className:`flex flex-col items-center ${m>0?"animate-cardAppearIn":""}`,children:[x.jsxs("div",{className:"flex flex-col rounded-md w-full overflow-hidden shadow-sm bg-themewhite2 border-3 border-dashed border-themeblue2/30",children:[x.jsxs("div",{className:"px-4 py-3 text-center",children:[x.jsx("div",{className:"text-[9pt] font-semibold mb-1 uppercase tracking-wider text-themeblue2",children:"Screening Tool"}),x.jsx("div",{className:"text-[10pt] font-normal text-primary/80",children:g.text})]}),j?x.jsxs("div",{className:"px-4 pb-3",children:[x.jsxs("div",{className:"flex items-center justify-between bg-themeblue2/8 rounded-md px-3 py-2 mb-2",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(So,{size:14,className:"text-themeblue2"}),x.jsx("span",{className:"text-xs font-medium text-themeblue2",children:"Completed"})]}),x.jsx("span",{className:"text-xs text-themeblue2 font-semibold",children:F?"Negative Screen":`${P}/${z}  ${L}`})]}),x.jsx("button",{onClick:()=>c?.(f.index),className:"w-full py-2 text-xs text-themeblue2 bg-themeblue2/8 rounded-md font-medium active:scale-[0.98] transition-all",children:"View / Edit Results"})]}):x.jsx("div",{className:"px-4 pb-3",children:x.jsxs("button",{onClick:()=>c?.(f.index),className:"w-full py-2.5 text-xs text-white bg-themeblue2 rounded-md font-medium flex items-center justify-center gap-1.5 active:scale-[0.98] transition-all",children:[x.jsx(bE,{size:14}),"Start Screening"]})})]}),T&&x.jsx(T3,{colorClass:v.badgeBg})]},f.index)}if(E){const N=f.actionStatus==="performed",j=f.actionStatus==="deferred",B=N||j;return x.jsxs("div",{className:`flex flex-col items-center ${m>0?"animate-cardAppearIn":""}`,children:[x.jsxs("div",{className:`flex flex-col rounded-md w-full overflow-hidden shadow-sm bg-themewhite2 border-3 border-dashed ${j?"border-themeredred/30":"border-themeblue2/30"}`,children:[x.jsxs("div",{className:"px-4 py-3 text-center",children:[x.jsx("div",{className:`text-[9pt] font-semibold mb-1 uppercase tracking-wider ${j?"text-themeredred":"text-themeblue2"}`,children:"Action Required"}),x.jsx("div",{className:"text-[10pt] font-normal text-primary/80",children:g.text})]}),g.questionOptions&&g.questionOptions.length>0&&x.jsx("div",{className:"px-3 pb-2",children:x.jsx("div",{className:"space-y-2",children:g.questionOptions.map((U,F)=>x.jsx("div",{className:"text-xs p-2 rounded-md bg-themewhite3 text-tertiary cursor-default",children:x.jsx("div",{className:"font-normal flex items-center",children:U.text})},F))})}),B?x.jsx("div",{className:"px-4 pb-3 pt-1",children:N?x.jsxs("div",{className:"flex items-center justify-center gap-2 bg-themegreen/10 rounded-md px-3 py-2.5",children:[x.jsx(So,{size:14,className:"text-themegreen"}),x.jsx("span",{className:"text-xs font-medium text-themegreen",children:"Performed"})]}):x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("div",{className:"flex items-center justify-center gap-2 bg-themeredred/10 rounded-md px-3 py-2.5",children:[x.jsx(ms,{size:14,className:"text-themeredred"}),x.jsx("span",{className:"text-xs font-medium text-themeredred",children:"Deferred"})]}),x.jsx("div",{className:"text-[9px] text-center text-tertiary uppercase tracking-wider",children:"defer to AEM"})]})}):x.jsxs("div",{className:"px-4 pb-3 pt-1 flex gap-2",children:[x.jsx("button",{onClick:()=>d?.(f.index,"performed"),disabled:a,className:"flex-1 py-2.5 text-xs text-white bg-themegreen rounded-md font-medium active:scale-[0.98] transition-all",children:"Performed"}),x.jsx("button",{onClick:()=>d?.(f.index,"deferred"),disabled:a,className:"flex-1 py-2.5 text-xs text-themeredred border border-themeredred rounded-md font-medium active:scale-[0.98] transition-all",children:"Deferred"})]})]}),T&&x.jsx(T3,{colorClass:v.badgeBg})]},f.index)}return x.jsxs("div",{className:`flex flex-col items-center ${m>0?"animate-cardAppearIn":""}`,children:[x.jsxs("div",{className:`
              flex flex-col rounded-md w-full overflow-hidden shadow-sm
              bg-themewhite2 border
              ${y?"border-2 border-dashed border-themeredred/30":"border-themewhite/10"}
            `,children:[x.jsxs("div",{className:`px-4 py-3 ${y?"text-center text-themeredred":"text-primary/80"}`,children:[y&&x.jsx("div",{className:"text-[9pt] font-semibold mb-1 uppercase tracking-wider"}),x.jsx("div",{className:"text-[10pt] font-normal",children:g.text})]}),g.questionOptions&&g.questionOptions.length>0&&x.jsx("div",{className:"px-3 pt-2 pb-10",children:x.jsx("div",{className:"space-y-2",children:g.questionOptions.map((N,j)=>{const B=f.selectedOptions.includes(j);return x.jsx("div",{onClick:()=>{(y||A||w||k)&&l(f.index,j)},className:`
                                                text-xs p-2 rounded-md transition-all duration-200
                                                ${B?y?"bg-themeredred text-white":`${v.symptomClass} border-dashed`:"bg-themewhite3 text-tertiary"}
                                                ${y||A||w||k?"cursor-pointer":"cursor-default"}
                                            `,children:x.jsxs("div",{className:"font-normal flex items-center",children:[B&&x.jsx("span",{className:`mr-2 ${y?"text-white":v.symptomCheck}`,children:""}),N.text]})},j)})})}),g.answerOptions&&g.answerOptions.length>0&&!y&&x.jsxs("div",{className:"relative flex w-full h-10 bg-themewhite2",children:[x.jsx("div",{className:`
                  absolute top-0 left-0 h-full w-1/2 
                  transition-all duration-300
                  ${f.answer===g.answerOptions[0]?"translate-x-0":f.answer===g.answerOptions[1]?"translate-x-full":"-translate-x-full"} 
                  ${f.answer?v.sliderClass:"bg-themewhite"}
                `}),g.answerOptions.map((N,j)=>x.jsx("button",{onClick:()=>s(f.index,j),className:"relative h-full w-1/2 text-[10pt] flex items-center justify-center",disabled:a,children:x.jsxs("span",{className:`
                      transition-colors duration-300 
                      ${f.answer===N?`font-semibold ${v.answerButton}`:"text-gray-600"}
                    `,children:[N.text.toUpperCase(),k&&f.selectedOptions.length>0&&j===0&&f.answer===N&&x.jsx("span",{className:"ml-1",children:""})]})},N.text))]})]}),T&&y&&x.jsx("div",{className:"h-6"}),T&&!y&&x.jsx(T3,{colorClass:v.badgeBg})]},f.index)})});function Gz({screenerConfig:r,initialResponses:i,initialFollowUp:a,initialCompletedId:s,onComplete:l,onClose:c}){const d=r.conditionalExtension,f=d?.screener,m=s===f?.id,[g,v]=D.useState(()=>m&&i?r.questions.map((J,te)=>i[te]??null):i&&s===r.id?r.questions.map((J,te)=>i[te]??null):r.questions.map(()=>null)),[y,A]=D.useState(()=>m&&i&&f&&d?f.questions.slice(d.carryOverQuestions).map((te,$)=>i[d.carryOverQuestions+$]??null):f&&d?f.questions.slice(d.carryOverQuestions).map(()=>null):[]),[w,k]=D.useState(a!==void 0?a:null),[E]=D.useState(()=>r.wordLists?.length?Math.floor(Math.random()*r.wordLists.length):0),I=r.wordLists?.[E],T=D.useMemo(()=>g.reduce((J,te,$)=>{const oe=r.questions[$];return!oe||!Ox(oe)?J:J+(te??0)},0),[g,r.questions]),N=d&&T>=d.threshold,j=D.useMemo(()=>N?T+y.reduce((J,te)=>J+(te??0),0):0,[N,T,y]),B=N&&f?f:r,U=N?j:T,F=Aw(B),P=r.gate,z=D.useMemo(()=>{if(!P)return!0;const J=g[P.requiredIndex]===1,te=P.anyOfIndices.some($=>g[$]===1);return J&&te},[P,g]),V=!P||g[P.requiredIndex]!==null,L=D.useMemo(()=>B.interpretations.find(J=>U>=J.minScore&&U<=J.maxScore)?.label??"",[B.interpretations,U]),Q=g.every((J,te)=>{const $=r.questions[te];return!$||$.type==="check"||$.type==="info"||P&&!z&&te>=P.gatedFromIndex?!0:J!==null}),q=!N||y.every(J=>J!==null),ee=!r.followUp||w!==null,X=Q&&q&&ee,ae=D.useCallback((J,te)=>{v($=>{const oe=[...$];return oe[J]=te,oe})},[]),K=D.useCallback((J,te)=>{v($=>{const oe=[...$],we=oe[J]??0;return oe[J]=we^1<<te,oe})},[]),ie=D.useCallback((J,te)=>{A($=>{const oe=[...$];return oe[J]=te,oe})},[]),ne=D.useCallback(()=>{if(X)if(N&&f&&d){const J=[...g.map(te=>te??0),...y.map(te=>te??0)];l(f.id,J)}else l(r.id,g.map(J=>J??0),w!==null?w:void 0)},[X,N,f,d,g,y,r.id,w,l]);return x.jsx(of,{isVisible:!0,onClose:c,header:{title:B.title},fullHeight:"90dvh",desktopPosition:"right",children:x.jsxs("div",{className:"h-full overflow-y-auto px-4 pb-6",children:[x.jsx("p",{className:"text-xs text-secondary py-3 border-b border-tertiary/10",children:r.instruction}),(!P||z)&&x.jsxs("div",{className:"sticky top-0 z-10 bg-themewhite3 py-2 flex items-center justify-between border-b border-tertiary/10",children:[x.jsxs("div",{className:"text-sm font-medium text-primary",children:["Score: ",x.jsx("span",{className:"font-bold",children:U}),x.jsxs("span",{className:"text-tertiary",children:["/",F]})]}),L&&x.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${(B.invertThreshold?U<=B.threshold:U>=B.threshold)?"bg-amber-100 text-amber-800":"bg-emerald-100 text-emerald-800"}`,children:L})]}),x.jsx("div",{className:"mt-3",children:r.questions.map((J,te)=>P&&!z&&te>=P.gatedFromIndex?null:x.jsxs("div",{children:[J.sectionHeader&&x.jsxs("div",{className:"flex items-center gap-2 mt-4 mb-2 px-1",children:[x.jsx("div",{className:"h-px flex-1 bg-tertiary/15"}),x.jsx("span",{className:"text-[10px] font-semibold text-secondary uppercase tracking-wider",children:J.sectionHeader}),x.jsx("div",{className:"h-px flex-1 bg-tertiary/15"})]}),J.type==="info"&&x.jsxs("div",{className:"px-1 py-2",children:[x.jsx("p",{className:"text-[11px] text-secondary/80 leading-relaxed",children:J.text}),J.dynamicContent&&I&&x.jsx(Vz,{type:J.dynamicContent,wordList:I})]}),J.type==="check"&&x.jsxs("div",{className:"py-2 px-1",children:[x.jsx("p",{className:"text-xs text-primary mb-1.5",children:J.text}),x.jsx("div",{className:"flex flex-wrap gap-1.5",children:J.options?.map(($,oe)=>{const we=((g[te]??0)&1<<oe)!==0;return x.jsxs("button",{onClick:()=>K(te,oe),className:`px-2.5 py-1.5 rounded-full text-[10px] transition-all ${we?"bg-themeblue2/15 text-themeblue2 font-semibold ring-1 ring-themeblue2/30":"bg-themewhite2 text-tertiary hover:bg-themewhite"}`,children:[we&&x.jsx(So,{size:10,className:"inline mr-1"}),$]},oe)})})]}),J.type!=="info"&&J.type!=="check"&&x.jsx(c5,{index:te+1,text:J.text,scaleOptions:J.scaleOptions??r.scaleOptions,value:g[te],onChange:$=>ae(te,$)}),P&&te===P.gatedFromIndex-1&&V&&x.jsx("div",{className:`mx-1 my-3 px-3 py-2.5 rounded-md text-xs font-medium text-center ${z?"bg-emerald-50 text-emerald-800 border border-emerald-200":"bg-amber-50 text-amber-800 border border-amber-200"}`,children:z?P.positiveMessage:P.negativeMessage})]},te))}),N&&f&&d&&x.jsxs("div",{className:"mt-4 animate-cardAppearIn",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[x.jsx("div",{className:"h-px flex-1 bg-amber-300/40"}),x.jsxs("span",{className:"text-[10px] font-semibold text-amber-700 uppercase tracking-wider",children:["Extended to ",f.title]}),x.jsx("div",{className:"h-px flex-1 bg-amber-300/40"})]}),x.jsx("div",{className:"space-y-1",children:f.questions.slice(d.carryOverQuestions).map((J,te)=>x.jsx(c5,{index:d.carryOverQuestions+te+1,text:J.text,scaleOptions:J.scaleOptions??f.scaleOptions,value:y[te],onChange:$=>ie(te,$)},`ext-${te}`))})]}),r.followUp&&x.jsxs("div",{className:"mt-4 pt-3 border-t border-tertiary/10",children:[x.jsx("p",{className:"text-xs text-secondary mb-2",children:r.followUp.text}),x.jsx("div",{className:"space-y-1.5",children:r.followUp.options.map((J,te)=>x.jsxs("button",{onClick:()=>k(te),className:`w-full text-left text-xs px-3 py-2 rounded-md transition-all ${w===te?"bg-themeblue2/15 text-themeblue2 font-medium":"bg-themewhite2 text-tertiary hover:bg-themewhite"}`,children:[w===te&&x.jsx(So,{size:12,className:"inline mr-1.5"}),J]},te))})]}),x.jsx("button",{onClick:ne,disabled:!X,className:`w-full mt-5 py-3 rounded-lg text-sm font-medium transition-all ${X?"bg-themeblue2 text-white active:scale-[0.98]":"bg-tertiary/20 text-tertiary cursor-not-allowed"}`,children:"Complete Screening"})]})})}function c5({index:r,text:i,scaleOptions:a,value:s,onChange:l}){return x.jsxs("div",{className:"py-2 px-1",children:[x.jsxs("p",{className:"text-xs text-primary mb-1.5",children:[x.jsxs("span",{className:"text-tertiary mr-1",children:[r,"."]}),i]}),x.jsx("div",{className:"flex gap-1",children:a.map(c=>x.jsxs("button",{onClick:()=>l(c.value),className:`flex-1 py-1.5 rounded text-[10px] leading-tight text-center transition-all ${s===c.value?"bg-themeblue2/15 text-themeblue2 font-semibold ring-1 ring-themeblue2/30":"bg-themewhite2 text-tertiary hover:bg-themewhite"}`,title:c.label,children:[x.jsx("div",{className:"font-bold",children:c.value}),x.jsx("div",{className:"hidden sm:block mt-0.5 leading-[1.1] px-0.5",children:c.label})]},c.value))})]})}function Vz({type:r,wordList:i}){return r==="wordList"?x.jsxs("div",{className:"mt-2 px-2.5 py-2 bg-themewhite2 rounded-md border border-tertiary/10",children:[x.jsxs("p",{className:"text-[11px] font-semibold text-primary mb-1.5",children:["List ",i.name]}),x.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:i.words.map((a,s)=>x.jsx("span",{className:"px-2 py-0.5 bg-themeblue2/10 text-themeblue2 text-[11px] font-medium rounded",children:a},s))}),x.jsxs("div",{className:"space-y-1.5 text-[10px] text-tertiary",children:[x.jsxs("p",{children:[x.jsx("span",{className:"font-semibold text-secondary",children:"Trial 1:"})," ",'"I am going to test your memory. I will read you a list of words and when I am done, repeat back as many words as you can remember, in any order."']}),x.jsxs("p",{children:[x.jsx("span",{className:"font-semibold text-secondary",children:"Trials 2 & 3:"})," ",'"I am going to repeat that list again. Repeat back as many words as you can remember, in any order, even if you said them before."']})]})]}):r==="digitStrings"?x.jsxs("div",{className:"mt-2 px-2.5 py-2 bg-themewhite2 rounded-md border border-tertiary/10",children:[x.jsxs("p",{className:"text-[11px] font-semibold text-primary mb-1",children:["List ",i.name,"  Reverse Digits"]}),x.jsx("p",{className:"text-[10px] text-tertiary mb-2",children:'"I am going to read you a string of numbers. When I am finished, repeat them back to me backward, in reverse order."'}),x.jsx("div",{className:"space-y-1",children:i.digits.trial1.map((a,s)=>x.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[x.jsxs("span",{className:"text-tertiary w-14 shrink-0",children:[a.split("-").length," digits:"]}),x.jsxs("span",{className:"text-primary font-mono font-medium",children:["T1: ",a]}),x.jsxs("span",{className:"text-secondary font-mono",children:["T2: ",i.digits.trial2[s]]})]},s))}),x.jsx("p",{className:"text-[10px] text-tertiary mt-2",children:"If correct on Trial 1, proceed to next length. If incorrect, try Trial 2 at same length. If both incorrect, stop and record score."})]}):r==="recallWords"?x.jsxs("div",{className:"mt-2 px-2.5 py-2 bg-themewhite2 rounded-md border border-tertiary/10",children:[x.jsxs("p",{className:"text-[11px] font-semibold text-primary mb-1.5",children:["List ",i.name]}),x.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:i.words.map((a,s)=>x.jsx("span",{className:"px-2 py-0.5 bg-themeblue2/10 text-themeblue2 text-[11px] font-medium rounded",children:a},s))}),x.jsx("p",{className:"text-[10px] text-tertiary",children:'"Do you remember that list of words I read a few minutes earlier? Tell me as many words from that list as you can remember, in any order."'})]}):null}function Yz({selectedSymptom:r,onExpandNote:i,isMobile:a=!1,initialCardStates:s,initialDisposition:l,noteSource:c=null}){const d=D.useRef(null),f=D.useRef(null),m=D.useRef(null),g=D.useRef(!1),v=D.useRef(0),[y,A]=D.useState(!1),[w,k]=D.useState(0),E=s7.find(te=>te.id===r?.icon),I=E?.options||[],{cardStates:T,currentDisposition:N,handleQuestionOption:j,handleAnswer:B,getVisibleCards:U,setScreenerResults:F,setActionStatus:P}=Hz(I,s,l),[z,V]=D.useState(null);D.useEffect(()=>{const te=m.current!==N;m.current=N,N&&te&&setTimeout(()=>{k($=>$+1)},yu.DISPOSITION_SCROLL_DELAY)},[N]);const L=D.useCallback(()=>{if(!f.current||!d.current){setTimeout(L,yu.SCROLL_RETRY);return}const te=f.current,$=d.current,oe=Math.max(0,te.offsetTop);$.scrollTo({top:oe,behavior:"smooth"}),A(!1)},[]);D.useEffect(()=>{w>v.current&&(v.current=w,L())},[w,L]),D.useEffect(()=>{if(!d.current||!f.current)return;const te=new IntersectionObserver($=>{$.forEach(oe=>{!oe.isIntersecting&&y&&L()})},{root:d.current,rootMargin:"0px",threshold:.1});return te.observe(f.current),()=>te.disconnect()},[y,L]);const Q=(te,$)=>{A(!0),B(te,$),setTimeout(()=>{k(oe=>oe+1)},yu.SCROLL_AFTER_STAGGER)},q=(te,$)=>{A(!0),j(te,$),setTimeout(()=>{k(oe=>oe+1)},yu.SCROLL_AFTER_STAGGER)},ee=(te,$)=>{A(!0),P(te,$),setTimeout(()=>{k(oe=>oe+1)},yu.SCROLL_AFTER_STAGGER)},X=D.useCallback(te=>{V(te)},[]),ae=D.useCallback((te,$,oe)=>{z!==null&&(A(!0),F(z,te,$,oe),setTimeout(()=>{k(we=>we+1)},yu.SCROLL_AFTER_STAGGER)),V(null)},[z,F]),K=D.useCallback(()=>{V(null)},[]),ie=()=>{!N||!r||!i||i({disposition:N,algorithmOptions:I,cardStates:T,selectedSymptom:{icon:r.icon||"",text:r.text||""}})};if(D.useEffect(()=>{g.current=!1},[r?.id,E]),D.useEffect(()=>{r&&E&&!g.current&&(g.current=!0,setTimeout(()=>{k(te=>te+1)},yu.INITIAL_SCROLL_DELAY))},[r?.id,E]),!r)return x.jsx("div",{className:"w-full h-full flex items-center justify-center",children:x.jsx("p",{className:"text-primary",children:"No symptom selected"})});if(!E||I.length===0)return x.jsx("div",{className:"p-4 text-center w-full text-themeblue3",children:x.jsxs("p",{children:["No algorithm found for: ",r.text]})});const ne=U(),J=N?cf(N.type):null;return x.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[x.jsxs("div",{className:"h-full flex flex-col",children:[!a&&x.jsx("div",{className:"shrink-0",children:x.jsxs("div",{className:"flex items-center gap-1.5 py-2 px-3 rounded-md bg-themewhite2 border border-tertiary/10 shadow-sm text-[11px] font-medium text-primary mb-3",children:[c&&!c.startsWith("external")?x.jsx(So,{className:"w-3 h-3 shrink-0"}):c?.startsWith("external")?x.jsx(Yu,{className:"w-3 h-3 shrink-0"}):x.jsx(aS,{className:"w-3 h-3 shrink-0"}),lw(c)]})}),x.jsx("div",{ref:d,className:`flex-1 overflow-y-auto ${a?"bg-themewhite":""} ${y?"transition-none":""}`,children:x.jsxs("div",{className:`pb-4 ${a?"px-2 min-h-full":""}`,style:a?{paddingTop:"calc(env(safe-area-inset-top, 0px) + 4rem)"}:void 0,children:[x.jsx(qz,{algorithmOptions:I,cardStates:T,visibleCards:ne,isTransitioning:y,onAnswer:Q,onQuestionOption:q,onOpenScreener:X,onActionStatus:ee}),N&&J&&x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx(T3,{colorClass:J.badgeBg}),x.jsx("div",{className:"w-full animate-cardAppearIn",children:x.jsx("div",{className:`flex flex-col rounded-md w-full overflow-hidden shadow-sm
                                            bg-themewhite2 border ${J.badgeBorder}`,children:x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`px-3 py-2 shrink-0 rounded-md
                                                            flex items-center justify-center ${J.badgeBg}
                                                            font-bold text-sm ${J.badgeText}`,children:N.type}),x.jsxs("div",{className:"min-w-0 flex-1 flex flex-col",children:[x.jsx("p",{className:"text-sm text-primary wrap-break-word",children:N.text}),N.modifier&&x.jsx("p",{className:"text-xs text-secondary mt-1 wrap-break-word",children:N.modifier})]})]}),x.jsx("button",{onClick:ie,className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 active:scale-95 transition-all ${J.buttonClass}`,"aria-label":"Continue",children:x.jsx(af,{className:"w-5 h-5"})})]})})})},`dispo-${N.type}-${N.text}`)]}),x.jsx("div",{ref:f,className:"h-2 w-full pointer-events-none","aria-hidden":"true",style:{marginTop:"1rem",marginBottom:"1rem"}})]})})]},"algorithm-view"),z!==null&&I[z]?.screenerConfig&&qS.createPortal(x.jsx(Gz,{screenerConfig:I[z].screenerConfig,initialResponses:T[z]?.screenerResponses,initialFollowUp:T[z]?.followUpResponse,initialCompletedId:T[z]?.completedScreenerId,onComplete:ae,onClose:K}),document.getElementById("app-drawer-root"))]})}const Qz=(r,i)=>({generateNote:D.useCallback((s,l,c,d,f)=>u7(s,r,i,l,c,d,f),[r,i])}),$z="modulepreload",Wz=function(r){return"/test2/"+r},d5={},jw=function(i,a,s){let l=Promise.resolve();if(a&&a.length>0){let m=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");l=m(a.map(g=>{if(g=Wz(g),g in d5)return;d5[g]=!0;const v=g.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const A=document.createElement("link");if(A.rel=v?"stylesheet":$z,v||(A.as="script"),A.crossOrigin="",A.href=g,f&&A.setAttribute("nonce",f),document.head.appendChild(A),v)return new Promise((w,k)=>{A.addEventListener("load",w),A.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return l.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return i().catch(c)})};function Xz(){const[r,i]=D.useState("idle");return{exportDD689:D.useCallback(async s=>{try{i("generating");const{generateDD689Pdf:l,downloadPdfBytes:c}=await jw(async()=>{const{generateDD689Pdf:m,downloadPdfBytes:g}=await import("./DD689Export-BJ3quGOo.js");return{generateDD689Pdf:m,downloadPdfBytes:g}},[]),d=await l(s),f=`DD689-${s.symptomText?.replace(/[^a-zA-Z0-9]/g,"-")||"note"}.pdf`;c(d,f),i("done"),setTimeout(()=>i("idle"),Li.FEEDBACK_DURATION)}catch(l){console.error("DD689 export failed:",l),i("error"),setTimeout(()=>i("idle"),Li.FEEDBACK_DURATION)}},[]),exportStatus:r}}const u5=r=>{let i;const a=new Set,s=(g,v)=>{const y=typeof g=="function"?g(i):g;if(!Object.is(y,i)){const A=i;i=v??(typeof y!="object"||y===null)?y:Object.assign({},i,y),a.forEach(w=>w(i,A))}},l=()=>i,f={setState:s,getState:l,getInitialState:()=>m,subscribe:g=>(a.add(g),()=>a.delete(g))},m=i=r(s,l,f);return f},Kz=(r=>r?u5(r):u5),Jz=r=>r;function Zz(r,i=Jz){const a=Bu.useSyncExternalStore(r.subscribe,Bu.useCallback(()=>i(r.getState()),[r,i]),Bu.useCallback(()=>i(r.getInitialState()),[r,i]));return Bu.useDebugValue(a),a}const eH=r=>{const i=Kz(r),a=s=>Zz(i,s);return Object.assign(a,i),a},q7=(r=>eH);function tH(r){const i=r.match(/.{2}/g);return i?new Uint8Array(i.map(a=>parseInt(a,16))):new Uint8Array(0)}function I4(r){let i="";for(let a=0;a<r.length;a++)i+=r[a].toString(16).padStart(2,"0");return i}async function G7(r){const i=crypto.getRandomValues(new Uint8Array(16)),a=I4(i),s=new TextEncoder,l=new Uint8Array([...i,...s.encode(r)]),c=await crypto.subtle.digest("SHA-256",l);return{hash:I4(new Uint8Array(c)),salt:a}}async function V7(r,i,a){const s=tH(a),l=new TextEncoder,c=new Uint8Array([...s,...l.encode(r)]),d=await crypto.subtle.digest("SHA-256",c);return I4(new Uint8Array(d))===i}const nH="adtmc-secure-store",iH=1,Bd="kv";let p3=null,m3=null,N4=!1;async function rH(){const r=[navigator.userAgent,screen.width.toString(),screen.height.toString(),screen.colorDepth.toString(),Intl.DateTimeFormat().resolvedOptions().timeZone].join("|");return crypto.subtle.digest("SHA-256",new TextEncoder().encode(r))}async function Y7(){if(m3)return m3;const r=await rH();return m3=await crypto.subtle.importKey("raw",r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),m3}function Bw(){return p3?Promise.resolve(p3):new Promise((r,i)=>{const a=indexedDB.open(nH,iH);a.onupgradeneeded=()=>{const s=a.result;s.objectStoreNames.contains(Bd)||s.createObjectStore(Bd)},a.onsuccess=()=>{p3=a.result,r(p3)},a.onerror=()=>i(a.error)})}function aH(r,i,a){return new Promise((s,l)=>{const c=r.transaction(Bd,"readwrite");c.objectStore(Bd).put(a,i),c.oncomplete=()=>s(),c.onerror=()=>l(c.error)})}function sH(r,i){return new Promise((a,s)=>{const c=r.transaction(Bd,"readonly").objectStore(Bd).get(i);c.onsuccess=()=>a(c.result),c.onerror=()=>s(c.error)})}function oH(r,i){return new Promise((a,s)=>{const l=r.transaction(Bd,"readwrite");l.objectStore(Bd).delete(i),l.oncomplete=()=>a(),l.onerror=()=>s(l.error)})}function Pw(){return N4?!0:typeof indexedDB>"u"||typeof crypto?.subtle>"u"?(N4=!0,console.warn("secureStorage: IndexedDB or Web Crypto unavailable, falling back to localStorage"),!0):!1}async function i2(r,i){if(Pw()){localStorage.setItem(r,i);return}try{const a=await Y7(),s=crypto.getRandomValues(new Uint8Array(12)),l=new TextEncoder().encode(i),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},a,l),d=new Uint8Array(s.length+c.byteLength);d.set(s),d.set(new Uint8Array(c),s.length);const f=await Bw();await aH(f,r,d.buffer)}catch{N4=!0,console.warn("secureStorage: encryption failed, falling back to localStorage"),localStorage.setItem(r,i)}}async function J3(r){if(Pw())return localStorage.getItem(r);try{const i=await Bw(),a=await sH(i,r);if(!a)return null;const s=new Uint8Array(a),l=s.slice(0,12),c=s.slice(12),d=await Y7(),f=await crypto.subtle.decrypt({name:"AES-GCM",iv:l},d,c);return new TextDecoder().decode(f)}catch{return localStorage.getItem(r)}}async function Z3(r){if(Pw()){localStorage.removeItem(r);return}try{const i=await Bw();await oH(i,r)}catch{localStorage.removeItem(r)}try{localStorage.removeItem(r)}catch{}}const Ea={hash:"adtmc_pin_hash",salt:"adtmc_pin_salt",unlocked:"adtmc_pin_unlocked",failures:"adtmc_pin_failures",lockoutUntil:"adtmc_pin_lockout_until",permanentLock:"adtmc_pin_permanent_lock",inactivityTimeout:"adtmc_inactivity_timeout_ms"};let Rc=null,Oc=null,Nm=!1;async function Q7(){Nm||(Rc=await J3(Ea.hash),Oc=await J3(Ea.salt),Nm=!0)}const py=0;function $7(){try{const r=localStorage.getItem(Ea.inactivityTimeout);if(r===null)return py;const i=parseInt(r,10);return isNaN(i)?py:i}catch{return py}}function lH(r){try{localStorage.setItem(Ea.inactivityTimeout,String(r))}catch{}}async function W7(r){return await Q7(),!Rc||!Oc?!1:V7(r,Rc,Oc)}async function f5(r){try{const{hash:i,salt:a}=await G7(r);await i2(Ea.hash,i),await i2(Ea.salt,a),Rc=i,Oc=a,Nm=!0}catch{}}function Ph(){return!!Rc&&!!Oc}function X7(){try{Z3(Ea.hash).catch(()=>{}),Z3(Ea.salt).catch(()=>{}),Rc=null,Oc=null,Nm=!0,sessionStorage.removeItem(Ea.unlocked),Wu(),K7()}catch{}}function h5(){return Rc&&Oc?{hash:Rc,salt:Oc}:null}function p5(){try{return sessionStorage.getItem(Ea.unlocked)==="true"}catch{return!1}}function my(){try{sessionStorage.setItem(Ea.unlocked,"true")}catch{}}function m5(){try{sessionStorage.removeItem(Ea.unlocked)}catch{}}function cH(){try{return localStorage.getItem(Ea.permanentLock)==="true"}catch{return!1}}function K7(){try{localStorage.removeItem(Ea.permanentLock),localStorage.removeItem(Ea.failures),sessionStorage.removeItem(Ea.lockoutUntil)}catch{}}function ex(){try{if(cH())return{isLockedOut:!0,remainingSeconds:0,isPermanentlyLocked:!0};const r=sessionStorage.getItem(Ea.lockoutUntil);if(!r)return{isLockedOut:!1,remainingSeconds:0};const i=Math.ceil((parseInt(r,10)-Date.now())/1e3);return i<=0?(sessionStorage.removeItem(Ea.lockoutUntil),{isLockedOut:!1,remainingSeconds:0}):{isLockedOut:!0,remainingSeconds:i}}catch{return{isLockedOut:!1,remainingSeconds:0}}}const g5=[30,60,120,240,300];function J7(){try{const r=parseInt(localStorage.getItem(Ea.failures)||"0",10)+1;if(localStorage.setItem(Ea.failures,String(r)),r>=3)return localStorage.setItem(Ea.permanentLock,"true"),{isLockedOut:!0,remainingSeconds:0,isPermanentlyLocked:!0};const i=Math.min(r-1,g5.length-1),a=g5[i],s=Date.now()+a*1e3;return sessionStorage.setItem(Ea.lockoutUntil,String(s)),{isLockedOut:!0,remainingSeconds:a}}catch{return{isLockedOut:!1,remainingSeconds:0}}}function Wu(){try{localStorage.removeItem(Ea.failures),sessionStorage.removeItem(Ea.lockoutUntil)}catch{}}async function v5(r,i){try{await St.rpc("update_own_security_settings",{p_pin_hash:r,p_pin_salt:i})}catch{}}async function dH(){try{await St.rpc("clear_own_pin")}catch{}}async function uH(r,i){try{await i2(Ea.hash,r),await i2(Ea.salt,i),Rc=r,Oc=i,Nm=!0}catch{}}async function Z7(){await Q7()}function fH(r){const i=atob(r),a=new Uint8Array(i.length);for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return a}function hH(r){let i="";for(let a=0;a<r.length;a++)i+=String.fromCharCode(r[a]);return btoa(i)}function pH(r){const a=r.replace(/-/g,"+").replace(/_/g,"/")+"=".repeat((4-r.length%4)%4);return fH(a)}function mH(r){return hH(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function gH(r){const i="=".repeat((4-r.length%4)%4),a=(r+i).replace(/-/g,"+").replace(/_/g,"/"),s=atob(a),l=new Uint8Array(s.length);for(let c=0;c<s.length;++c)l[c]=s.charCodeAt(c);return l}const zx="adtmc_webauthn_credential",Fw="adtmc_biometric_enabled";async function ek(){try{return!window.PublicKeyCredential||!navigator.credentials?!1:await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}}function tk(){try{return!!localStorage.getItem(zx)&&localStorage.getItem(Fw)==="true"}catch{return!1}}async function vH(){try{const r=crypto.getRandomValues(new Uint8Array(32)),i=crypto.getRandomValues(new Uint8Array(16)),a=await navigator.credentials.create({publicKey:{challenge:r,rp:{name:"ADTMC"},user:{id:i,name:"local-user",displayName:"ADTMC User"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",residentKey:"preferred",userVerification:"required"},timeout:6e4,attestation:"none"}});if(!a)return!1;const l=a.response.getPublicKey?.(),c={credentialId:mH(new Uint8Array(a.rawId)),publicKeySpki:l?btoa(String.fromCharCode(...new Uint8Array(l))):"",createdAt:Date.now()};return localStorage.setItem(zx,JSON.stringify(c)),localStorage.setItem(Fw,"true"),!0}catch{return!1}}async function xH(){try{const r=localStorage.getItem(zx);if(!r)return!1;const i=JSON.parse(r),a=await navigator.credentials.get({publicKey:{challenge:crypto.getRandomValues(new Uint8Array(32)),allowCredentials:[{type:"public-key",id:pH(i.credentialId).buffer,transports:["internal"]}],userVerification:"required",timeout:6e4}});return a?(new Uint8Array(a.response.authenticatorData)[32]&4)!==0:!1}catch{return!1}}function T4(){try{localStorage.removeItem(zx),localStorage.removeItem(Fw)}catch{}}const bH=["supabase-api-cache","supabase-storage-cache"];async function nk(){try{if(!("caches"in window))return;await Promise.all(bH.map(r=>caches.delete(r)))}catch{}}const yH=ya("NotifyDispatcher");function Hx(r){St.functions.invoke("send-push-notification",{body:r}).catch(i=>{yH.warn("Push notification delivery failed:",i)})}ya("AuthService");const r2={hash:"adtmc_pw_verify_hash",salt:"adtmc_pw_verify_salt"};let Tm=null,Mm=null,tx=!1;async function wH(){tx||(Tm=await J3(r2.hash),Mm=await J3(r2.salt),tx=!0)}async function ik(r){try{const{hash:i,salt:a}=await G7(r);await i2(r2.hash,i),await i2(r2.salt,a),Tm=i,Mm=a,tx=!0}catch{}}async function M4(r){try{return await wH(),!Tm||!Mm?!1:V7(r,Tm,Mm)}catch{return!1}}async function AH(){try{await Z3(r2.hash),await Z3(r2.salt),Tm=null,Mm=null,tx=!1}catch{}}async function SH(r,i){const{data:a,error:s}=await St.auth.signInWithPassword({email:r,password:i});return!s&&a.user&&(ik(i).catch(()=>{}),Hx({type:"user_login",name:null,email:r,author_id:a.user.id})),{user:a.user,session:a.session,error:s}}const R4=(r,i)=>i.some(a=>r instanceof a);let x5,b5;function kH(){return x5||(x5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CH(){return b5||(b5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O4=new WeakMap,gy=new WeakMap,qx=new WeakMap;function EH(r){const i=new Promise((a,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{a(Xu(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return qx.set(i,r),i}function _H(r){if(O4.has(r))return;const i=new Promise((a,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{a(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});O4.set(r,i)}let D4={get(r,i,a){if(r instanceof IDBTransaction){if(i==="done")return O4.get(r);if(i==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Xu(r[i])},set(r,i,a){return r[i]=a,!0},has(r,i){return r instanceof IDBTransaction&&(i==="done"||i==="store")?!0:i in r}};function rk(r){D4=r(D4)}function IH(r){return CH().includes(r)?function(...i){return r.apply(j4(this),i),Xu(this.request)}:function(...i){return Xu(r.apply(j4(this),i))}}function NH(r){return typeof r=="function"?IH(r):(r instanceof IDBTransaction&&_H(r),R4(r,kH())?new Proxy(r,D4):r)}function Xu(r){if(r instanceof IDBRequest)return EH(r);if(gy.has(r))return gy.get(r);const i=NH(r);return i!==r&&(gy.set(r,i),qx.set(i,r)),i}const j4=r=>qx.get(r);function ak(r,i,{blocked:a,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,i),f=Xu(d);return s&&d.addEventListener("upgradeneeded",m=>{s(Xu(d.result),m.oldVersion,m.newVersion,Xu(d.transaction),m)}),a&&d.addEventListener("blocked",m=>a(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),l&&m.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const TH=["get","getKey","getAll","getAllKeys","count"],MH=["put","add","delete","clear"],vy=new Map;function y5(r,i){if(!(r instanceof IDBDatabase&&!(i in r)&&typeof i=="string"))return;if(vy.get(i))return vy.get(i);const a=i.replace(/FromIndex$/,""),s=i!==a,l=MH.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(l||TH.includes(a)))return;const c=async function(d,...f){const m=this.transaction(d,l?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[a](...f),l&&m.done]))[0]};return vy.set(i,c),c}rk(r=>({...r,get:(i,a,s)=>y5(i,a)||r.get(i,a,s),has:(i,a)=>!!y5(i,a)||r.has(i,a)}));const RH=["continue","continuePrimaryKey","advance"],w5={},B4=new WeakMap,sk=new WeakMap,OH={get(r,i){if(!RH.includes(i))return r[i];let a=w5[i];return a||(a=w5[i]=function(...s){B4.set(this,sk.get(this)[i](...s))}),a}};async function*DH(...r){let i=this;if(i instanceof IDBCursor||(i=await i.openCursor(...r)),!i)return;i=i;const a=new Proxy(i,OH);for(sk.set(a,i),qx.set(a,j4(i));i;)yield a,i=await(B4.get(a)||i.continue()),B4.delete(a)}function A5(r,i){return i===Symbol.asyncIterator&&R4(r,[IDBIndex,IDBObjectStore,IDBCursor])||i==="iterate"&&R4(r,[IDBIndex,IDBObjectStore])}rk(r=>({...r,get(i,a,s){return A5(i,a)?DH:r.get(i,a,s)},has(i,a){return A5(i,a)||r.has(i,a)}}));const c1=ya("CryptoService"),nx="enc.v1:",Rm=["display_name","rank","uic","hpi_encoded","preview_text","clinic_name"],jH="packagebackend-keystore",BH=1;let g3=null;async function Uw(){return g3||(g3=await ak(jH,BH,{upgrade(r){r.objectStoreNames.contains("keys")||r.createObjectStore("keys")}}),g3)}const M3=new Map;function ok(r){return`clinic:${r}`}function lk(r){let i="";for(let a=0;a<r.length;a++)i+=String.fromCharCode(r[a]);return btoa(i)}function ck(r){const i=atob(r),a=new Uint8Array(i.length);for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return a}async function Lw(r){const i=ck(r);return crypto.subtle.importKey("raw",i.buffer,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}function PH(){const r=crypto.getRandomValues(new Uint8Array(32));return lk(r)}async function FH(r){try{return await(await Uw()).get("keys",ok(r))??null}catch(i){return c1.warn("Failed to load clinic key from store:",i),null}}async function UH(r,i){await(await Uw()).put("keys",i,ok(r))}async function LH(r){try{const{data:i,error:a}=await St.from("clinics").select("encryption_key").eq("id",r).single();return a||!i?.encryption_key?(c1.warn(`Failed to fetch encryption key for clinic ${r}:`,a?.message),null):i.encryption_key}catch(i){return c1.warn("Failed to fetch clinic encryption key:",i),null}}async function Km(r){const i=M3.get(r);if(i)return i;const a=await FH(r);if(a)return M3.set(r,a),a;const s=await LH(r);if(!s)return null;const l=await Lw(s);return M3.set(r,l),await UH(r,l),l}async function S5(r){await Promise.all(r.map(i=>Km(i)))}function dk(r){return r.clinic_id||r.visible_clinic_ids?.[0]||null}function y2(r){return r.startsWith(nx)}async function zw(r,i){const a=crypto.getRandomValues(new Uint8Array(12)),s=new TextEncoder().encode(i),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},r,s),c=new Uint8Array(a.length+l.byteLength);return c.set(a),c.set(new Uint8Array(l),a.length),nx+lk(c)}async function Hw(r,i){if(!i.startsWith(nx))return i;const a=i.slice(nx.length),s=ck(a),l=s.slice(0,12),c=s.slice(12),d=await crypto.subtle.decrypt({name:"AES-GCM",iv:l},r,c);return new TextDecoder().decode(d)}async function zH(r){if(r.user_id==="guest")return r;const i=dk(r);if(!i)return c1.debug("No clinic context for note, skipping encryption"),r;const a=await Km(i);if(!a)return c1.warn("Clinic key not available, skipping encryption"),r;const s={...r};for(const l of Rm){const c=s[l];typeof c=="string"&&c.length>0&&!y2(c)&&(s[l]=await zw(a,c))}return s}async function HH(r){if(r.user_id==="guest"||!Rm.some(c=>{const d=r[c];return typeof d=="string"&&y2(d)}))return r;const a=dk(r);if(!a)return c1.warn("Cannot decrypt note: no clinic context"),r;const s=await Km(a);if(!s)return c1.warn("Cannot decrypt note: clinic key not available"),r;const l={...r};for(const c of Rm){const d=l[c];if(typeof d=="string"&&d.length>0)try{l[c]=await Hw(s,d)}catch(f){c1.warn(`Failed to decrypt field "${c}" on note ${r.id}:`,f)}}return l}async function uk(r){return Promise.all(r.map(HH))}async function fk(r,i){const a=r.clinic_id||r.visible_clinic_ids?.[0]||null;if(!a||!Rm.some(d=>{const f=r[d];return typeof f=="string"&&y2(f)}))return r;const l=await Km(a);if(!l)return r;const c={...r};for(const d of Rm){const f=c[d];if(typeof f=="string"&&f.length>0)try{c[d]=await Hw(l,f)}catch(m){c1.warn(`Failed to decrypt server note field "${d}":`,m)}}return c}async function qH(r,i){if(!i||y2(i))return i;const a=await Lw(r);return zw(a,i)}async function GH(r,i){if(!i||!y2(i))return i;const a=await Lw(r);return Hw(a,i)}async function VH(r,i){if(!i||y2(i))return i;const a=await Km(r);return a?zw(a,i):(c1.warn("Cannot encrypt clinic field: key not available"),i)}async function YH(){try{M3.clear();const i=(await Uw()).transaction("keys","readwrite");await i.objectStore("keys").clear(),await i.done,c1.info("Cleared crypto key store")}catch(r){c1.warn("Failed to clear crypto key store:",r)}}const a2={MIN_PASSWORD_LENGTH:12,SALT_BYTES:16,PIN_MAX_ATTEMPTS:3,LOCKOUT_BASE_SECONDS:30,LOCKOUT_MAX_SECONDS:300};var Yh=(r=>(r.NETWORK_ERROR="NETWORK_ERROR",r.AUTH_REQUIRED="AUTH_REQUIRED",r.RATE_LIMITED="RATE_LIMITED",r.VALIDATION_FAILED="VALIDATION_FAILED",r.NOT_FOUND="NOT_FOUND",r.PERMISSION_DENIED="PERMISSION_DENIED",r.ENCRYPTION_FAILED="ENCRYPTION_FAILED",r.SYNC_FAILED="SYNC_FAILED",r.STORAGE_ERROR="STORAGE_ERROR",r.RPC_ERROR="RPC_ERROR",r.UNKNOWN="UNKNOWN",r))(Yh||{});function hk(r){const i=r.message.toLowerCase(),a=r.code??"";return i.includes("too many pending requests")||i.includes("rate limit")||a==="429"?"RATE_LIMITED":i.includes("jwt expired")||i.includes("not authenticated")||i.includes("invalid claim")||a==="PGRST301"||a==="401"?"AUTH_REQUIRED":i.includes("permission denied")||i.includes("insufficient privilege")||i.includes("new row violates row-level security")||a==="42501"||a==="403"?"PERMISSION_DENIED":i.includes("fetch")||i.includes("network")||i.includes("failed to fetch")||i.includes("econnrefused")||i.includes("enotfound")||i.includes("timeout")?"NETWORK_ERROR":i.includes("not found")||i.includes("no rows")||a==="PGRST116"?"NOT_FOUND":i.includes("check constraint")||i.includes("violates")||i.includes("invalid input")||a==="23514"||a==="23505"||a==="22P02"?"VALIDATION_FAILED":"UNKNOWN"}function pk(r){return{ok:!0,data:r}}function im(r,i){return i?{ok:!1,error:r,code:i}:{ok:!1,error:r}}function QH(r){return r.error?im(r.error.message,r.error.code):r.data===null?im("No data returned"):pk(r.data)}function $H(r){return r!=null}function WH(r,i){if(typeof r!="object"||r===null)return!1;const a=r;return i.every(s=>s in a)}function Jm(r,i,a){if(!$H(r))return im(`${a}: received null or undefined`,Yh.RPC_ERROR);if(typeof r!="object")return im(`${a}: expected object, got ${typeof r}`,Yh.RPC_ERROR);if(!WH(r,i)){const s=i.filter(l=>!(l in r));return im(`${a}: missing fields: ${s.join(", ")}`,Yh.VALIDATION_FAILED)}return pk(r)}const Ll=ya("AdminService");async function qw(){try{const{data:{user:r}}=await St.auth.getUser();if(!r)return!1;const{data:i}=await St.from("profiles").select("roles").eq("id",r.id).single();return i?.roles?.includes("dev")??!1}catch{return!1}}async function XH(r){try{let i=St.from("account_requests").select("*").order("requested_at",{ascending:!1});r&&(i=i.eq("status",r));const{data:a,error:s}=await i;if(s)throw s;return(a||[]).map(l=>({id:l.id,email:l.email,first_name:l.first_name,last_name:l.last_name,middle_initial:l.middle_initial,credential:l.credential,rank:l.rank,component:l.component,uic:l.uic,status:l.status,request_type:l.request_type||"new_account",status_check_token:l.status_check_token||null,user_id:l.user_id,requested_at:l.requested_at,reviewed_at:l.reviewed_at,rejection_reason:l.rejection_reason,notes:l.notes}))}catch(i){return Ll.error("Failed to get account requests:",i),[]}}async function KH(r,i){try{const{data:{user:a}}=await St.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};if(i.length<a2.MIN_PASSWORD_LENGTH)return{success:!1,error:`Temporary password must be at least ${a2.MIN_PASSWORD_LENGTH} characters`};const{data:s,error:l}=await St.rpc("approve_account_request",{request_id:r,admin_user_id:a.id,temp_password:i});if(l)return hk(l)===Yh.RATE_LIMITED?{success:!1,error:"Rate limited. Please try again later."}:{success:!1,error:l.message};const c=Jm(s,["user_id"],"approveAccountRequest");return{success:!0,userId:c.ok?c.data.user_id:void 0}}catch(a){return Ll.error("Failed to approve request:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function JH(r,i){try{const{data:{user:a}}=await St.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{error:s}=await St.rpc("reject_account_request",{request_id:r,admin_user_id:a.id,reason:i});return s?{success:!1,error:s.message}:{success:!0}}catch(a){return Ll.error("Failed to reject request:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function mk(r){try{const{data:i}=await St.from("profiles").select("roles").eq("id",r).single();return i?.roles||[]}catch{return[]}}async function ZH(r,i){try{const a=await mk(r);if(a.includes(i))return{success:!0};const s=[...a,i],{error:l}=await St.rpc("set_user_roles",{target_user_id:r,new_roles:s});return l?{success:!1,error:l.message}:{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function eq(r,i){try{const a=await mk(r),s=a.filter(c=>c!==i);if(s.length===a.length)return{success:!0};const{error:l}=await St.rpc("set_user_roles",{target_user_id:r,new_roles:s});return l?{success:!1,error:l.message}:{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function gk(){try{const{data:r,error:i}=await St.rpc("admin_list_users");if(i)throw i;return Array.isArray(r)?r:[]}catch(r){return Ll.error("Failed to list users:",r),[]}}async function tq(r){try{const{data:{user:i}}=await St.auth.getUser();if(!i)return{success:!1,error:"Not authenticated"};if(r.tempPassword.length<a2.MIN_PASSWORD_LENGTH)return{success:!1,error:`Password must be at least ${a2.MIN_PASSWORD_LENGTH} characters`};const{data:a,error:s}=await St.rpc("admin_create_user",{p_email:r.email,p_temp_password:r.tempPassword,p_first_name:r.firstName,p_last_name:r.lastName,p_middle_initial:r.middleInitial||void 0,p_credential:r.credential||void 0,p_component:r.component||void 0,p_rank:r.rank||void 0,p_uic:r.uic||void 0,p_roles:r.roles});if(s)return{success:!1,error:s.message};const l=Jm(a,["user_id"],"createUser");return{success:!0,userId:l.ok?l.data.user_id:void 0}}catch(i){return Ll.error("Failed to create user:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async function nq(r,i){try{const{data:{user:a}}=await St.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};if(i.length<a2.MIN_PASSWORD_LENGTH)return{success:!1,error:`Password must be at least ${a2.MIN_PASSWORD_LENGTH} characters`};const{error:s}=await St.rpc("admin_reset_password",{p_target_user_id:r,p_new_password:i});return s?{success:!1,error:s.message}:{success:!0}}catch(a){return Ll.error("Failed to reset password:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function iq(r){try{const{data:{user:i}}=await St.auth.getUser();if(!i)return{success:!1,error:"Not authenticated"};if(i.id===r)return{success:!1,error:"Cannot delete your own account"};const{error:a}=await St.rpc("admin_delete_user",{p_target_user_id:r});return a?{success:!1,error:a.message}:{success:!0}}catch(i){return Ll.error("Failed to delete user:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async function vk(){try{const{data:r,error:i}=await St.from("clinics").select("id, name, uics, child_clinic_ids, location, additional_user_ids, encryption_key").order("name");if(i)throw i;return await Promise.all((r||[]).map(async s=>({id:s.id,name:s.name,uics:s.uics||[],child_clinic_ids:s.child_clinic_ids||[],additional_user_ids:s.additional_user_ids||[],location:s.encryption_key?await GH(s.encryption_key,s.location):s.location})))}catch(r){return Ll.error("Failed to list clinics:",r),[]}}async function rq(r){try{const i=PH(),a=r.location?await qH(i,r.location):null,{data:s,error:l}=await St.from("clinics").insert({name:r.name,location:a,uics:r.uics||[],child_clinic_ids:r.child_clinic_ids||[],additional_user_ids:r.additional_user_ids||[],encryption_key:i}).select("id").single();return l?{success:!1,error:l.message}:{success:!0,id:s.id}}catch(i){return Ll.error("Failed to create clinic:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async function aq(r,i){try{const a={...i};i.location!==void 0&&i.location!==null&&(a.location=await VH(r,i.location));const{error:s}=await St.from("clinics").update(a).eq("id",r);return s?{success:!1,error:s.message}:{success:!0}}catch(a){return Ll.error("Failed to update clinic:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function sq(r){try{const{error:i}=await St.from("clinics").delete().eq("id",r);return i?{success:!1,error:i.message}:{success:!0}}catch(i){return Ll.error("Failed to delete clinic:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async function oq(r,i){try{const{data:{user:a}}=await St.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{error:s}=await St.rpc("admin_set_clinic",{p_target_user_id:r,p_clinic_id:i});return s?{success:!1,error:s.message}:{success:!0}}catch(a){return Ll.error("Failed to set user clinic:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function lq(r,i){try{const{data:{user:a}}=await St.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const{error:s}=await St.rpc("admin_update_profile",{p_target_user_id:r,p_first_name:i.firstName||void 0,p_last_name:i.lastName||void 0,p_middle_initial:i.middleInitial??void 0,p_credential:i.credential??void 0,p_component:i.component??void 0,p_rank:i.rank??void 0,p_uic:i.uic||void 0,p_note_include_hpi:i.noteIncludeHPI??void 0,p_note_include_pe:i.noteIncludePE??void 0,p_pe_depth:i.peDepth??void 0});return s?{success:!1,error:s.message}:{success:!0}}catch(a){return Ll.error("Failed to update profile:",a),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}const Gw="adtmc_user_profile";function cq(r){const i=r.peDepth;return i==="focused"?r.peDepth="minimal":(i==="standard"||i==="comprehensive")&&(r.peDepth="expanded"),r}function dq(){try{const r=localStorage.getItem(Gw);if(r)return cq(JSON.parse(r))}catch{}return{}}function k5(r){try{localStorage.setItem(Gw,JSON.stringify(r))}catch{}}function uq(){try{localStorage.removeItem(Gw)}catch{}}async function fq(r){const i={};let a=[],s=null;const{data:l}=await St.from("profiles").select("first_name, last_name, middle_initial, credential, component, rank, uic, roles, clinic_id, clinics(name), pin_hash, pin_salt, notifications_enabled, notify_clinic_notes, notify_dev_alerts, note_include_hpi, note_include_pe, pe_depth, text_expanders, text_expander_enabled").eq("id",r).single();if(l){const c=l.clinics;s=l.clinic_id,i.firstName=l.first_name??void 0,i.lastName=l.last_name??void 0,i.middleInitial=l.middle_initial??void 0,i.credential=l.credential??void 0,i.component=l.component??void 0,i.rank=l.rank??void 0,i.uic=l.uic??void 0,i.clinicName=c?.name??void 0,a=l.roles??[];const d=l;if(await Z7(),d.pin_hash&&d.pin_salt&&!Ph()&&await uH(d.pin_hash,d.pin_salt),i.notificationsEnabled=d.notifications_enabled??!1,d.notify_clinic_notes!=null&&(i.notifyClinicNotes=d.notify_clinic_notes),d.notify_dev_alerts!=null&&(i.notifyDevAlerts=d.notify_dev_alerts),d.note_include_hpi!=null&&(i.noteIncludeHPI=d.note_include_hpi),d.note_include_pe!=null&&(i.noteIncludePE=d.note_include_pe),d.pe_depth!=null){const f=d.pe_depth;f==="focused"||f==="minimal"?i.peDepth="minimal":f==="standard"||f==="comprehensive"||f==="expanded"?i.peDepth="expanded":i.peDepth=f}d.text_expanders!=null&&(i.textExpanders=d.text_expanders),d.text_expander_enabled!=null&&(i.textExpanderEnabled=d.text_expander_enabled)}return{profile:i,roles:a,clinicId:s}}const zs=q7()((r,i)=>({user:null,loading:!0,isGuest:!0,profile:dq(),roles:[],clinicId:null,isDevRole:!1,isSupervisorRole:!1,isPasswordRecovery:!1,init:()=>{const{data:{subscription:a}}=St.auth.onAuthStateChange((s,l)=>{s==="SIGNED_OUT"?(r({user:null,isGuest:!0,profile:{},roles:[],clinicId:null,isDevRole:!1,isSupervisorRole:!1}),uq(),X7(),T4(),AH().catch(()=>{}),nk().catch(()=>{})):l?.user&&(r({user:l.user,isGuest:!1}),s==="PASSWORD_RECOVERY"&&r({isPasswordRecovery:!0}),(s==="SIGNED_IN"||s==="INITIAL_SESSION")&&i().refreshProfile()),s==="INITIAL_SESSION"&&r({loading:!1})});return()=>a.unsubscribe()},continueAsGuest:()=>{r({isGuest:!0,user:null})},signOut:async()=>{await St.auth.signOut({scope:"local"})},patchProfile:a=>{const s={...i().profile,...a};r({profile:s}),k5(s)},setPasswordRecovery:a=>{r({isPasswordRecovery:a})},refreshProfile:async()=>{const a=i().user;if(a)try{const{profile:s,roles:l,clinicId:c}=await fq(a.id),d=await qw();r({profile:s,roles:l,clinicId:c,isDevRole:d,isSupervisorRole:l.includes("supervisor")}),k5(s)}catch{}}})),hq=r=>!!r.user;function Zm(){const r=zs(c=>c.profile),i=zs(c=>c.patchProfile),a=zs(c=>c.user),s=D.useCallback(c=>{i(c)},[i]),l=D.useCallback(c=>{a&&St.from("profiles").update(c).eq("id",a.id).then(({error:d})=>{d&&console.error("syncProfileField failed:",d)})},[a]);return{profile:r,updateProfile:s,syncProfileField:l}}function pq(r,i,a=!0){const s=D.useRef(null),l=D.useCallback(f=>{if(!a||f.target.closest('button, textarea, input, select, [role="checkbox"], [role="button"], [role="slider"]'))return;const g=f.touches[0];s.current={startX:g.clientX,startY:g.clientY,lastX:g.clientX,locked:null}},[a]),c=D.useCallback(f=>{const m=s.current;if(!m)return;const g=f.touches[0],v=g.clientX-m.startX,y=g.clientY-m.startY;if(m.locked===null){if(Math.abs(v)<al.DIRECTION_LOCK&&Math.abs(y)<al.DIRECTION_LOCK)return;if(m.locked=Math.abs(v)>Math.abs(y),!m.locked){s.current=null;return}}m.locked&&(m.lastX=g.clientX,f.preventDefault())},[]),d=D.useCallback(()=>{const f=s.current;if(s.current=null,!f||f.locked!==!0)return;const m=f.lastX-f.startX;m<-40?r():m>al.PAGE_SWIPE_THRESHOLD&&i()},[r,i]);return{onTouchStart:l,onTouchMove:c,onTouchEnd:d}}function mq(r,i){if(i<=0||i>r.length)return"";let a=i;for(;a>0&&!/\s/.test(r[a-1]);)a--;return r.slice(a,i)}function gq(r,i){const a=r.toLowerCase();return i.toLowerCase().startsWith(a)?a.length>=Math.ceil(i.length*.4):!1}function vq({text:r,cursorPosition:i,expanders:a,enabled:s}){const l=D.useRef(""),[c,d]=D.useState(0),f=D.useRef(""),m=D.useMemo(()=>s?mq(r,i):"",[r,i,s]);m!==f.current&&(f.current=m,c!==0&&d(0));const g=D.useMemo(()=>!m||!s||a.length===0?[]:m.toLowerCase()===l.current.toLowerCase()?[]:a.filter(k=>gq(m,k.abbr)),[m,s,a]);m&&l.current&&m.toLowerCase()!==l.current.toLowerCase()&&(l.current="");const v=D.useCallback(k=>{const E=k??g[c];if(!E)return null;const I=i-m.length,T=r.slice(0,I)+E.expansion+r.slice(i),N=I+E.expansion.length;return l.current="",{newText:T,newCursorPosition:N}},[g,c,r,i,m]),y=D.useCallback(()=>{m&&(l.current=m)},[m]),A=D.useCallback(()=>{d(k=>(k+1)%(g.length||1))},[g.length]),w=D.useCallback(()=>{d(k=>(k-1+(g.length||1))%(g.length||1))},[g.length]);return{suggestions:g,selectedIndex:c,currentWord:m,accept:v,dismiss:y,selectNext:A,selectPrev:w}}const xq=({suggestions:r,selectedIndex:i,onDismiss:a})=>x.jsxs("div",{className:"absolute left-2 right-2 bottom-1 z-10 rounded-lg bg-themewhite border border-themeblue2/25 shadow-lg animate-in fade-in slide-in-from-bottom-1 duration-150 overflow-hidden",children:[r.map((s,l)=>{const c=l===i,d=s.expansion.split(`
`)[0],f=s.expansion.includes(`
`),m=d.length>80?d.slice(0,77)+"...":d+(f?" ...":"");return x.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${c?"bg-themeblue2/8":""} ${l>0?"border-t border-tertiary/8":""}`,children:[x.jsx("code",{className:"shrink-0 text-[11px] font-mono font-semibold bg-themeblue2/10 text-themeblue2 px-1.5 py-0.5 rounded self-start mt-0.5",children:s.abbr}),x.jsx("span",{className:"text-tertiary/50 text-xs shrink-0 self-start mt-0.5",children:""}),x.jsx("span",{className:"text-sm text-tertiary truncate flex-1 min-w-0",children:m}),c&&x.jsx("kbd",{className:"shrink-0 text-[10px] text-tertiary/50 border border-tertiary/15 rounded px-1.5 py-0.5 font-mono self-start mt-0.5",children:"Enter "})]},s.abbr)}),x.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),a()},className:"absolute top-1.5 right-1.5 p-0.5 rounded hover:bg-tertiary/10 transition-colors","aria-label":"Dismiss suggestions",tabIndex:-1,children:x.jsx(ms,{size:14,className:"text-tertiary/40"})})]});function bq({algorithmOptions:r,cardStates:i,noteOptions:a,symptomCode:s="A1",onEncodedValueChange:l,layout:c="col"}){const d=D.useRef(null),[f,m]=D.useState(""),g=D.useMemo(()=>ij(r,i,a,s),[r,i,a.includeAlgorithm,a.includeDecisionMaking,a.customNote,a.physicalExamNote,a.user,a.userId,a.clinicId,s]);D.useEffect(()=>{m(g),l?.(g)},[g,l]),D.useEffect(()=>{if(!(!d.current||!f))try{hw.toCanvas(d.current,{bcid:"datamatrix",text:f,scale:2,padding:3})}catch(y){o1("Barcode.render",y)}},[f]);const v=c==="row";return x.jsx("div",{className:"p-2 bg-themewhite2",children:x.jsxs("div",{className:`flex ${v?"flex-row items-start gap-3":"flex-col items-center gap-3"}`,children:[x.jsx("div",{className:`shrink-0 ${v?"":"flex justify-center"}`,children:x.jsx("canvas",{ref:d,className:"border border-gray-300 bg-white rounded-md",style:{maxWidth:"120px",height:"auto"}})}),x.jsx("div",{className:`text-secondary ${v?"flex-1 min-w-0":"w-full"}`,children:x.jsx("code",{className:"text-xs break-all bg-themewhite3 p-2 rounded block max-h-24 overflow-y-auto",children:f})})]})})}function P4({children:r,onClick:i,className:a,title:s}){return x.jsx("button",{className:`px-2 py-1 text-xs bg-themewhite text-primary rounded border border-themegray1/30 ${i?"hover:bg-themewhite2 transition-colors cursor-pointer":""} ${a}`,onClick:i,type:i?"button":void 0,title:s,children:r})}function C5({item:r}){const a={dmp:"Decision Making",mcp:"Minor Care Protocol",lim:"Limitations"}[r.type||""];return a?x.jsx("div",{className:"text-xs font-medium text-tertiary mb-2",children:a}):null}function yq({ddx:r,onDdxClick:i}){return x.jsxs("div",{className:"bg-themewhite3 px-3 pt-3 pb-2 border-b border-themegray1/20",children:[x.jsx("div",{className:"text-xs font-medium text-tertiary mb-1",children:r.length===1?"Differential Diagnosis:":"Differential Diagnoses:"}),x.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((a,s)=>x.jsx(P4,{onClick:i?()=>i(a):void 0,title:i?`Click to view ${a} details`:void 0,children:a},s))})]})}function wq({text:r}){const[i,a]=D.useState(!1),[s,l]=D.useState(!1),c=D.useRef(null);return D.useEffect(()=>{if(c.current){const f=parseFloat(getComputedStyle(c.current).lineHeight)*2;l(c.current.scrollHeight>f+2)}},[r]),x.jsxs("div",{className:"text-sm text-primary leading-relaxed mb-3",children:[x.jsx("div",{ref:c,className:!i&&s?"line-clamp-2":"",children:r}),s&&!i&&x.jsx("button",{onClick:()=>a(!0),className:"text-themeblue1 text-xs mt-1 hover:underline cursor-pointer",children:"...more"}),s&&i&&x.jsx("button",{onClick:()=>a(!1),className:"text-themeblue1 text-xs mt-1 hover:underline cursor-pointer",children:"show less"})]})}function E5({item:r,onMedicationClick:i}){const a=l=>({lab:"Lab",refer:"Referral",med:"Other Medication",rad:"Imaging",protocol:"Other Protocol"})[l||""]||l||"Test",s=D.useMemo(()=>r.ancillaryFind?.reduce((l,c)=>{const d=c.type||"other";return l[d]||(l[d]=[]),l[d].push(c),l},{})||{},[r.ancillaryFind]);return x.jsxs(x.Fragment,{children:[r.text&&x.jsx(wq,{text:r.text}),Object.keys(s).length>0&&x.jsx("div",{className:"mb-3",children:Object.entries(s).map(([l,c])=>x.jsxs("div",{className:"mb-2",children:[x.jsxs("div",{className:"text-xs font-medium text-tertiary mb-1",children:[a(l),":"]}),x.jsx("div",{className:"flex flex-wrap gap-1",children:c.map((d,f)=>x.jsx(P4,{children:d.modifier||""},f))})]},l))}),r.medFind&&r.medFind.length>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("div",{className:"text-xs font-medium text-tertiary mb-1",children:"Medications:"}),x.jsx("div",{className:"flex flex-wrap gap-1",children:r.medFind.map((l,c)=>x.jsx(P4,{onClick:()=>i(l),title:`Click to view ${l.text} details`,children:l.text},c))})]}),r.specLim&&r.specLim.length>0&&x.jsxs("div",{children:[x.jsx("div",{className:"text-xs font-medium text-tertiary mb-1",children:"Special Limitations:"}),x.jsx("div",{className:"space-y-1",children:r.specLim.map((l,c)=>x.jsx("div",{className:"text-sm text-primary",children:l},c))})]})]})}const Aq=D.memo(function({item:i,onMedicationClick:a,onDdxClick:s}){const l=i.ddx&&i.ddx.length>0;return x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"rounded-md bg-themewhite3",children:[l&&x.jsx(yq,{ddx:i.ddx,onDdxClick:s}),x.jsxs("div",{className:`${l?"px-3 pb-3":"p-3"}`,children:[x.jsxs("div",{children:[x.jsx(C5,{item:i}),x.jsx(E5,{item:i,onMedicationClick:a})]}),i.assocMcp&&x.jsxs("div",{className:"pt-4 mt-4 border-t border-themegray1/20",children:[x.jsx(C5,{item:i.assocMcp}),x.jsx(E5,{item:i.assocMcp,onMedicationClick:a})]})]})]})})});function _5({title:r,content:i,className:a=""}){return x.jsxs("div",{className:a,children:[x.jsx("div",{className:"text-[10pt] font-normal text-primary mb-1.5 uppercase tracking-wide",children:r}),x.jsx("div",{className:"text-[9pt] text-tertiary px-3 py-2.5 rounded-lg border border-themeblue1/10 bg-themewhite",children:i})]})}function I5({items:r}){return x.jsx("div",{className:"space-y-2",children:r.map((i,a)=>x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("span",{className:"inline-flex items-center justify-center py-0.5 px-2 rounded-md bg-themeblue3 text-secondary text-[8.5pt] font-normal",children:i.icon}),x.jsx("span",{className:"flex-1 pt-0.5 text-secondary",children:i.text})]},a))})}function xk({medication:r}){const i=[{key:"trade",title:"trade",content:r.icon?.trim()||null},{key:"indication",title:"Indication",content:r.indication?.trim()||null},{key:"contra",title:"Contraindications",content:r.contra?.trim()||null},{key:"moi",title:"Mechanism of Action",content:r.moi?.trim()||null},{key:"adult",title:"Adult Dosing",content:r.adult?.trim()||null},{key:"peds",title:"Pediatric Dosing",content:r.peds?.trim()||null},{key:"adverse",title:"Adverse Reactions",content:r.adverse?.trim()||null},{key:"preg",title:"Pregnancy Considerations",content:r.preg&&r.preg.length>0?x.jsx(I5,{items:r.preg}):null},{key:"aviation",title:"Aviation Considerations",content:r.aviation&&r.aviation.length>0?x.jsx(I5,{items:r.aviation}):null}];return x.jsx("div",{className:"flex flex-col h-full w-full",children:x.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsx("div",{className:"space-y-4",children:i.slice(0,4).map(({key:a,title:s,content:l})=>l?x.jsx(_5,{title:s,content:l},a):null)}),x.jsx("div",{className:"space-y-4",children:i.slice(4).map(({key:a,title:s,content:l})=>l?x.jsx(_5,{title:s,content:l},a):null)})]})})})}function Sq({algorithmOptions:r=[],cardStates:i=[],disposition:a,dispositionType:s}){const[l,c]=D.useState(null),d=cf(s),m=(()=>{const y=[];for(let A=i.length-1;A>=0;A--){const w=i[A],k=r[A];if(!w||!k||!w.isVisible)continue;const E=k.answerOptions.find(N=>N.text===w.answer?.text),I=w.selectedOptions&&w.selectedOptions.length>0?k.answerOptions.find(N=>N.selectAll):null,T=E||I;if(T?.disposition?.some(N=>N.type===a.type&&N.text===a.text)){const N=T.decisionMaking||[];y.push(...N)}}return y})(),g=y=>{c(y)},v=()=>{c(null)};return x.jsx("div",{className:"h-full w-full",children:x.jsx("div",{className:"h-full",children:l?x.jsxs("div",{className:"h-full flex flex-col",children:[x.jsx("div",{className:"flex-none p-3 border-b border-themegray1/20",children:x.jsx("button",{onClick:v,className:"flex items-center gap-1 text-sm text-themeblue2 hover:text-themeblue1",children:" Back"})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:x.jsx(xk,{medication:l})})]}):x.jsx("div",{className:"h-full overflow-y-auto p-3 space-y-4",children:m.length>0&&x.jsxs("div",{className:"border-t border-themegray1/20 pt-4",children:[x.jsx("div",{className:"text-xs font-semibold text-tertiary uppercase tracking-wide mb-3",children:"Clinical Decision Support"}),m.map((y,A)=>x.jsx(Aq,{item:y,colors:d,onMedicationClick:g,onDdxClick:void 0},A))]})})})})}const kq=["General Appearance","HEENT","Cardiovascular","Respiratory","Abdominal","Musculoskeletal","Neurological","Skin/Integumentary"];function xd(){return{status:"not-examined",findings:"",selectedAbnormals:[]}}function Qh(){return{status:"normal",findings:"",selectedAbnormals:[]}}function Cq(r,i){const a=[];if(i)for(const s of i)r.selectedAbnormals.includes(s.key)&&a.push(s.label);return r.findings.trim()&&a.push(r.findings.trim()),a.join("; ")||"(no details)"}const Eq={"General Appearance":"sw_gen",Skin:"sw_derm",Neuro:"sw_neuro",Psych:"sw_psych"};function N5(r,i,a,s){if(!r.toUpperCase().startsWith(`${i.toUpperCase()}:`))return null;const l=r.slice(i.length+1).trim();if(l.startsWith("Abnormal")){const c=l.replace(/^Abnormal\s*-?\s*/,"").trim(),d=T5(c,a);return{status:"abnormal",findings:d.freeText,selectedAbnormals:d.selectedKeys}}if(l.startsWith("Normal")||s&&l===s)return Qh();if(l){const c=T5(l,a);return{status:"abnormal",findings:c.freeText,selectedAbnormals:c.selectedKeys}}return null}function _q(r,i,a,s){const l={};i.items.forEach(E=>{l[E.key]=xd()});const c={};s.forEach(E=>{c[E.key]=xd()});let d="right",f="lumbar",m="";const g={};if(O1.forEach(E=>{g[E.key]=""}),!r)return{items:l,generals:c,laterality:d,spineRegion:f,additional:m,vitals:g};const v=r.split(`
`);let y=!1,A=!1;const w=[],k={};O1.forEach(E=>{k[E.shortLabel]=E.key});for(const E of v){if(E.startsWith("Additional Findings:")){y=!0,A=!1,m=E.replace("Additional Findings:","").trim();continue}if(y){m+=(m?`
`:"")+E;continue}if(E.startsWith("Vital Signs:")||E==="Vital Signs"){A=!0;continue}if(A){const N=E.match(/^\s*BP:\s*(.+?)\/(.+?)\s*mmHg/);if(N){const B=N[1].trim(),U=N[2].trim();B&&B!=="--"&&(g.bpSys=B),U&&U!=="--"&&(g.bpDia=U);continue}const j=E.match(/^\s*(\w+):\s*(.+)/);if(j){const B=k[j[1]];if(B){let U=j[2].trim();const F=O1.find(P=>P.key===B);F&&U.endsWith(F.unit)&&(U=U.slice(0,-F.unit.length).trim()),g[B]=U;continue}}if(E.trim())A=!1;else continue}if(!E.trim()||E.trim()==="General:"||E.startsWith("Vitals:")||E.match(/^(HEENT|Gastrointestinal|Cardiorespiratory|Genitourinary|Neuropsychiatric|Constitutional|Eye|Gynecological|Dermatological|Environmental|Miscellaneous|Misc Return|Musculoskeletal)(\s*[-:]|$)/))continue;if(E.startsWith("MSK")){const N=E.match(/\((Cervical|Thoracic|Lumbar|Sacral)\)/i);if(N)f=N[1].toLowerCase();else{const j=E.match(/\((Left|Right|Bilateral)\)/i);j&&(d=j[1].toLowerCase())}continue}let I=!1;for(const N of s){const j=N5(E,N.label,N.abnormalOptions,N.normalText);if(j){c[N.key]=j,I=!0;break}}if(I)continue;for(const N of i.items){const j=N5(E,N.label,N.abnormalOptions,N.normalText);if(j){l[N.key]=j,I=!0;break}}if(I)continue;for(const[N,j]of Object.entries(Eq))if(E.toUpperCase().startsWith(`${N.toUpperCase()}:`)){const B=E.slice(N.length+1).trim();if(B.startsWith("Abnormal")){const U=B.replace(/^Abnormal\s*-?\s*/,"").trim();c[j]={status:"abnormal",findings:U,selectedAbnormals:[]}}else B.startsWith("Normal")&&(c[j]=Qh());I=!0;break}if(I)continue;let T=!1;for(const N of kq)if(E.startsWith(`${N}:`)){T=!0;break}!T&&E.trim()&&!E.match(/^(Vitals:|PE:)/)&&w.push(E)}if(w.length>0){const E=w.join(`
`);m=m?`${m}
${E}`:E}return{items:l,generals:c,laterality:d,spineRegion:f,additional:m,vitals:g}}function T5(r,i){if(!r||!i||i.length===0)return{selectedKeys:[],freeText:r||""};const a=r.split(";").map(c=>c.trim()).filter(Boolean),s=[],l=[];for(const c of a){const d=i.find(f=>f.label===c);d?s.push(d.key):l.push(c)}return{selectedKeys:s,freeText:l.join("; ")}}function $h(r,i,a,s){const l=r.toUpperCase();if(i.status==="normal")return a?`${l}: ${a}`:`${l}: Normal`;const c=Cq(i,s);return`${l}: ${c}`}function bk(r){const i=[];if(!O1.some(s=>r[s.key]?.trim()))return i;i.push("Vital Signs:");for(const s of O1){if(s.key==="bpSys"){const c=r.bpSys?.trim(),d=r.bpDia?.trim();(c||d)&&i.push(`  BP: ${c||"--"}/${d||"--"} mmHg`);continue}if(s.key==="bpDia")continue;const l=r[s.key]?.trim();l&&i.push(`  ${s.shortLabel}: ${l} ${s.unit}`)}return i}function Iq(r,i,a,s,l,c,d,f,m){const g=[...bk(f)],v=a.slice(0,jd),y=a.slice(jd),A=[];for(const w of v){const k=s[w.key];!k||k.status==="not-examined"||A.push($h(w.label,k,w.normalText,w.abnormalOptions))}if(r.category==="B"&&l&&r.items.some(k=>i[k.key]?.status!=="not-examined"))if(W9(l.code)&&m){const k=m.charAt(0).toUpperCase()+m.slice(1);A.push(`MSK - ${l.label} (${k})`)}else{const k=c==="bilateral"?"Bilateral":c==="left"?"Left":"Right";A.push(`MSK - ${l.label} (${k})`)}for(const w of r.items){const k=i[w.key];!k||k.status==="not-examined"||A.push($h(w.label,k,w.normalText,w.abnormalOptions))}for(const w of y){const k=s[w.key];!k||k.status==="not-examined"||A.push($h(w.label,k,w.normalText,w.abnormalOptions))}return A.length>0&&(g.length>0&&g.push(""),g.push(...A)),d.trim()&&(g.length>0&&g.push(""),g.push(`Additional Findings: ${d.trim()}`)),g.join(`
`)}function Nq(r,i,a,s,l,c){const d=[...bk(c)],f=[],m=a.slice(0,jd),g=a.slice(jd);for(const v of m){const y=s[v.key];!y||y.status==="not-examined"||f.push($h(v.label,y,v.normalText,v.abnormalOptions))}for(const v of r){const y=i[v.id];if(!y||y.status==="not-examined")continue;const A=v.abnormalTags.map(w=>({key:w,label:w}));f.push($h(v.name,y,v.normalText,A))}for(const v of g){const y=s[v.key];!y||y.status==="not-examined"||f.push($h(v.label,y,v.normalText,v.abnormalOptions))}return f.length>0&&(d.length>0&&d.push(""),d.push(...f)),l.trim()&&(d.length>0&&d.push(""),d.push(`Additional Findings: ${l.trim()}`)),d.join(`
`)}function v3({label:r,normalText:i,abnormalOptions:a,state:s,onCycleStatus:l,onToggleAbnormal:c,onSetFindings:d}){return x.jsxs("div",{children:[x.jsxs("button",{type:"button",className:"flex items-center justify-between w-full text-left p-2.5 rounded-md transition-colors text-xs border border-themegray1/20 bg-themewhite text-secondary hover:bg-themewhite3",onClick:l,children:[x.jsx("span",{className:"font-medium",children:r.toUpperCase()}),x.jsx("span",{className:`text-[10px] uppercase tracking-wide font-semibold ${s.status==="normal"?"text-emerald-600":s.status==="abnormal"?"text-themeredred":"text-secondary/40"}`,children:s.status==="not-examined"?"Not Examined":s.status==="normal"?"Normal":"Abnormal"})]}),s.status==="normal"&&i&&x.jsx("div",{className:"text-[10px] text-secondary/60 mt-0.5 ml-2 italic",children:i}),s.status==="abnormal"&&x.jsxs("div",{className:"mt-1 ml-2",children:[a&&a.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:a.map(f=>x.jsx("button",{onClick:m=>{m.stopPropagation(),c(f.key)},className:`px-2 py-0.5 text-[10px] rounded-full border transition-colors ${s.selectedAbnormals.includes(f.key)?"bg-themeredred/20 border-themeredred/40 text-primary":"border-themegray1/20 bg-themewhite text-secondary hover:bg-themewhite3"}`,children:f.label},f.key))}),x.jsx("input",{type:"text",value:s.findings,onChange:f=>d(f.target.value),placeholder:"Describe findings...",className:"w-full text-xs px-3 py-1.5 rounded border border-themeredred/20 bg-themewhite text-tertiary outline-none focus:border-themeredred/40",onClick:f=>f.stopPropagation()})]})]})}function Tq({initialText:r="",onChange:i,colors:a,symptomCode:s,depth:l="minimal",customBlocks:c=[]}){const d=X9(s)||"A",f=yw(d),m=d==="B"?K9(s):null,g=bw(),[v]=D.useState(()=>_q(r,f,m,g)),[y,A]=D.useState(()=>v.items),[w,k]=D.useState(()=>v.generals),[E,I]=D.useState(()=>{const ne={};for(const J of c)ne[J.id]=xd();return ne}),[T,N]=D.useState(()=>v.laterality),[j,B]=D.useState(()=>v.spineRegion),[U,F]=D.useState(()=>v.additional),[P,z]=D.useState(()=>v.vitals),V=W9(s),L=l==="custom"&&c.length>0;D.useEffect(()=>{L&&I(ne=>{const J={};for(const te of c)J[te.id]=ne[te.id]||xd();return J})},[c,L]);const Q=D.useCallback((ne,J,te,$,oe,we)=>{i(Iq(f,ne,g,J,m,te,$,oe,we))},[i,f,g,m]),q=D.useCallback((ne,J,te,$)=>{i(Nq(c,ne,g,J,te,$))},[i,c,g]);D.useEffect(()=>{L?q(E,w,U,P):Q(y,w,T,U,P,j)},[L,y,E,w,T,j,U,P,Q,q]);const ee=(ne,J)=>{z(te=>({...te,[ne]:J}))},X=(ne,J)=>{J(te=>{const $=te[ne].status;let oe;return $==="not-examined"?oe="normal":$==="normal"?oe="abnormal":oe="not-examined",{...te,[ne]:{...te[ne],status:oe,findings:oe==="not-examined"?"":te[ne].findings,selectedAbnormals:oe==="not-examined"?[]:te[ne].selectedAbnormals}}})},ae=(ne,J,te)=>{te($=>{const oe=$[ne],we=oe.selectedAbnormals.includes(J)?oe.selectedAbnormals.filter(be=>be!==J):[...oe.selectedAbnormals,J];return{...$,[ne]:{...oe,selectedAbnormals:we}}})},K=(ne,J,te)=>{te($=>({...$,[ne]:{...$[ne],findings:J}}))},ie=()=>{L?I(ne=>{const J={...ne};for(const te of Object.keys(J))J[te]=Qh();return J}):A(ne=>{const J={...ne};for(const te of Object.keys(J))J[te]=Qh();return J}),k(ne=>{const J={...ne};for(const te of Object.keys(J))J[te]=Qh();return J})};return x.jsxs("div",{className:"p-3 space-y-4",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-xs text-secondary font-medium block mb-2",children:"Vital Signs"}),x.jsx("div",{className:"grid grid-cols-3 gap-2",children:O1.map(ne=>ne.key==="bpDia"?null:ne.key==="bpSys"?x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{className:"text-xs text-secondary mb-0.5",children:"BP (mmHg)"}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("input",{type:"text",value:P.bpSys||"",onChange:J=>ee("bpSys",J.target.value),placeholder:"120",className:"w-1/2 text-xs px-2 py-1.5 rounded border border-themegray1/20 bg-themewhite text-tertiary outline-none focus:border-themeblue1/30"}),x.jsx("span",{className:"text-xs text-secondary",children:"/"}),x.jsx("input",{type:"text",value:P.bpDia||"",onChange:J=>ee("bpDia",J.target.value),placeholder:"80",className:"w-1/2 text-xs px-2 py-1.5 rounded border border-themegray1/20 bg-themewhite text-tertiary outline-none focus:border-themeblue1/30"})]})]},"bp"):x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("label",{className:"text-xs text-secondary mb-0.5",children:[ne.shortLabel," (",ne.unit,")"]}),x.jsx("input",{type:"text",value:P[ne.key]||"",onChange:J=>ee(ne.key,J.target.value),placeholder:ne.placeholder,className:"text-xs px-2 py-1.5 rounded border border-themegray1/20 bg-themewhite text-tertiary outline-none focus:border-themeblue1/30"})]},ne.key))})]}),l==="minimal"&&!L?x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-secondary font-medium block mb-1",children:"Additional Findings"}),x.jsx("textarea",{value:U,onChange:ne=>F(ne.target.value),placeholder:"Enter additional findings...",className:"w-full text-xs px-3 py-2 rounded border border-themegray1/20 bg-themewhite text-tertiary outline-none focus:border-themeblue1/30 resize-none min-h-[3rem]"})]}):x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:ie,className:"w-full py-2 text-xs font-medium rounded-md border border-themeblue1/30 text-themeblue1 bg-themeblue1/5 hover:bg-themeblue1/10 transition-colors",children:"All Normal"}),!L&&d==="B"&&m&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs text-secondary font-medium",children:m.label}),x.jsx("div",{className:"flex gap-1 ml-auto",children:V?["cervical","thoracic","lumbar","sacral"].map(ne=>x.jsx("button",{onClick:()=>B(ne),className:`px-2.5 py-1 text-[10px] rounded-full transition-colors ${j===ne?a.symptomClass:"bg-themewhite3 text-secondary hover:bg-themewhite"}`,children:ne.charAt(0).toUpperCase()+ne.slice(1)},ne)):["left","right","bilateral"].map(ne=>x.jsx("button",{onClick:()=>N(ne),className:`px-2.5 py-1 text-[10px] rounded-full transition-colors ${T===ne?a.symptomClass:"bg-themewhite3 text-secondary hover:bg-themewhite"}`,children:ne==="bilateral"?"BL":ne==="left"?"L":"R"},ne))})]}),x.jsxs("div",{className:"space-y-2",children:[g.slice(0,jd).map(ne=>{const J=w[ne.key]||xd();return x.jsx(v3,{label:ne.label,normalText:ne.normalText,abnormalOptions:ne.abnormalOptions,state:J,onCycleStatus:()=>X(ne.key,k),onToggleAbnormal:te=>ae(ne.key,te,k),onSetFindings:te=>K(ne.key,te,k)},ne.key)}),L?c.map(ne=>{const J=E[ne.id]||xd(),te=ne.abnormalTags.map($=>({key:$,label:$}));return x.jsx(v3,{label:ne.name,normalText:ne.normalText,abnormalOptions:te,state:J,onCycleStatus:()=>X(ne.id,I),onToggleAbnormal:$=>ae(ne.id,$,I),onSetFindings:$=>K(ne.id,$,I)},ne.id)}):f.items.map(ne=>{const J=y[ne.key]||xd();return x.jsx(v3,{label:ne.label,normalText:ne.normalText,abnormalOptions:ne.abnormalOptions,state:J,onCycleStatus:()=>X(ne.key,A),onToggleAbnormal:te=>ae(ne.key,te,A),onSetFindings:te=>K(ne.key,te,A)},ne.key)}),g.slice(jd).map(ne=>{const J=w[ne.key]||xd();return x.jsx(v3,{label:ne.label,normalText:ne.normalText,abnormalOptions:ne.abnormalOptions,state:J,onCycleStatus:()=>X(ne.key,k),onToggleAbnormal:te=>ae(ne.key,te,k),onSetFindings:te=>K(ne.key,te,k)},ne.key)})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-secondary font-medium block mb-1",children:"Additional Findings"}),x.jsx("textarea",{value:U,onChange:ne=>F(ne.target.value),placeholder:"Enter additional findings...",className:"w-full text-xs px-3 py-2 rounded border border-themegray1/20 bg-themewhite text-tertiary outline-none focus:border-themeblue1/30 resize-none min-h-[3rem]"})]})]})]})}const Mq=({isVisible:r,disposition:i,algorithmOptions:a=[],cardStates:s=[],onExpansionChange:l,onNoteSave:c,onNoteDelete:d,onNoteUpdate:f,existingNoteId:m=null,existingEncodedText:g=null,selectedSymptom:v={icon:"",text:""},isMobile:y=!1,initialPage:A=0,initialHpiText:w="",initialPeText:k="",noteSource:E=null,onAfterSave:I,timestamp:T=null})=>{const{profile:N}=Zm(),j=zs(Ve=>Ve.user?.id),B=zs(Ve=>Ve.clinicId),U=w?!0:N.noteIncludeHPI??!0,F=k?!0:N.noteIncludePE??!1,P=D.useMemo(()=>{const Ve=[{id:"decision",label:"Decision Making"}];return U&&Ve.push({id:"hpi",label:"HPI"}),F&&Ve.push({id:"pe",label:"Physical Exam"}),Ve.push({id:"fullnote",label:"Full Note"}),Ve},[U,F]),[z,V]=D.useState(w),[L,Q]=D.useState(""),[q,ee]=D.useState(!0),[X,ae]=D.useState(U),[K,ie]=D.useState(k),[ne,J]=D.useState(F),[te,$]=D.useState(T),[oe,we]=D.useState(""),[be,Te]=D.useState(null),[ye,tt]=D.useState(!1),[Qe,Ge]=D.useState(!1),[Xe,Je]=D.useState(!1),[dt,vt]=D.useState(!1),_t=D.useRef(!1),xt=D.useRef(0),[bt,kt]=D.useState(()=>A>=3?P.length-1:Math.min(A,P.length-1)),Pt=P[bt]?.id??"decision",[Rt,Wt]=D.useState(""),[zt,Ct]=D.useState(0),Yt=N.textExpanders??[],jt=N.textExpanderEnabled??!0,{suggestions:an,selectedIndex:rn,accept:Kt,dismiss:Jt,selectNext:Zt,selectPrev:Qt}=vq({text:z,cursorPosition:zt,expanders:Yt,enabled:jt&&Pt==="hpi"}),mn=an.length>0,cn=D.useRef(null),dn=D.useRef(bt);dn.current=bt;const{generateNote:Ht}=Qz(a,s),Bt=i4(N),{shareNote:Y,shareStatus:le}=kw(),{exportDD689:se,exportStatus:ge}=Xz(),ve=cf(i.type);D.useEffect(()=>{if(be){const Ve=window.setTimeout(()=>Te(null),Li.COPY_FEEDBACK);return()=>clearTimeout(Ve)}},[be]),D.useEffect(()=>{Pt==="fullnote"&&!te&&$(new Date)},[Pt,te]),D.useEffect(()=>{Pt==="hpi"&&X&&setTimeout(()=>cn.current?.focus(),Li.AUTOFOCUS_DELAY)},[Pt,X]),D.useEffect(()=>{const Ve=Ht({includeAlgorithm:!0,includeDecisionMaking:q,customNote:X?z:"",physicalExamNote:ne?K:"",signature:Bt},i.type,i.text,v,te);Q(Ve.fullNote)},[z,q,X,K,ne,Ht,i,v,te,Bt]);const _e=D.useCallback((Ve,$e)=>{navigator.clipboard.writeText(Ve),Te($e)},[]),pe=D.useCallback(()=>{oe&&Y({id:m||"",encodedText:oe,createdAt:te?.toISOString()||new Date().toISOString(),symptomIcon:v?.icon||"",symptomText:v?.text||"Note",dispositionType:i.type,dispositionText:i.text,previewText:L.slice(0,200)},y)},[oe,m,te,v,i,L,y,Y]),Oe=D.useCallback(()=>{if(!oe)return;const Ve=te?`${te.getFullYear()}${String(te.getMonth()+1).padStart(2,"0")}${String(te.getDate()).padStart(2,"0")}`:"",$e=[N.lastName,N.firstName,N.middleInitial,N.credential,N.rank].filter(Boolean);se({encodedValue:oe,dispositionType:i.type,dispositionText:i.text,symptomText:v?.text||"Note",clinicName:N.clinicName||"",noteDate:Ve,authorLine:$e.length?$e.join(", "):void 0})},[oe,i,v,se,te,N]),de=!!m,ke=de&&oe!==""&&!n4(oe,g||""),Ee=D.useCallback(()=>{if(!oe)return;if(c?.({encodedText:oe,previewText:L.slice(0,200),symptomIcon:v?.icon||"",symptomText:v?.text||"Note",dispositionType:i.type,dispositionText:i.text})===!1){Ge(!0),setTimeout(()=>Ge(!1),Li.SAVE_ERROR_DURATION);return}tt(!0),I?setTimeout(()=>I(),Li.AFTER_SAVE_DELAY):setTimeout(()=>tt(!1),Li.FEEDBACK_DURATION)},[oe,L,v,i,c,I]),De=D.useCallback(()=>{m&&(_t.current?(d?.(m),Je(!0),_t.current=!1,vt(!1),xt.current&&clearTimeout(xt.current),setTimeout(()=>Je(!1),Li.FEEDBACK_DURATION)):(_t.current=!0,vt(!0),xt.current&&clearTimeout(xt.current),xt.current=setTimeout(()=>{_t.current=!1,vt(!1)},Li.DELETE_CONFIRM_TIMEOUT)))},[m,d]),xe=D.useCallback(()=>{!m||!oe||f?.(m,{encodedText:oe,previewText:L.slice(0,200),symptomIcon:v?.icon||"",symptomText:v?.text||"Note",dispositionType:i.type,dispositionText:i.text})===!1||(tt(!0),I?setTimeout(()=>I(),Li.AFTER_SAVE_DELAY):setTimeout(()=>tt(!1),Li.FEEDBACK_DURATION))},[m,oe,L,v,i,f,I]),Ne=D.useCallback(Ve=>{Wt(Ve),setTimeout(()=>Wt(""),Li.SLIDE_ANIMATION)},[]),je=D.useCallback(()=>{kt(Ve=>Ve>=P.length-1?Ve:(Ne("left"),Ve+1))},[Ne,P.length]),Se=D.useCallback(()=>{kt(Ve=>Ve<=0?Ve:(Ne("right"),Ve-1))},[Ne]),ze=D.useCallback(()=>{const Ve=dn.current;Ve<P.length-1&&(Ne("left"),kt(Ve+1))},[Ne,P.length]),Pe=D.useCallback(()=>{const Ve=dn.current;Ve>0&&(Ne("right"),kt(Ve-1))},[Ne]),{onTouchStart:Be,onTouchMove:at,onTouchEnd:Ze}=pq(ze,Pe,y),ft=Ve=>x.jsxs(x.Fragment,{children:[y&&x.jsx("div",{className:"flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing",style:{touchAction:"none"},"data-drag-zone":!0,children:x.jsx("div",{className:"w-14 h-1.5 rounded-full bg-tertiary/30"})}),x.jsxs("div",{className:"px-6 border-b border-tertiary/10 py-3 md:py-4",style:y?{touchAction:"none"}:{},"data-drag-zone":!0,children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2 min-w-0 transition-all duration-200",children:[x.jsx("div",{className:"shrink-0 overflow-hidden transition-all duration-200",style:{width:bt>0?40:0,opacity:bt>0?1:0},children:x.jsx("button",{onClick:Se,className:"p-2 rounded-full hover:bg-themewhite2 active:scale-95 transition-all","aria-label":"Go back",children:x.jsx(Nc,{className:"w-6 h-6 text-tertiary"})})}),x.jsx("h2",{className:"text-[11pt] font-normal text-primary md:text-2xl truncate",children:P[bt]?.label}),x.jsx("span",{className:"text-xs text-tertiary shrink-0",children:lw(E)})]}),x.jsx("button",{onClick:Ve,className:"p-2 rounded-full hover:bg-themewhite2 md:hover:bg-themewhite active:scale-95 transition-all shrink-0","aria-label":"Close",children:x.jsx(ms,{className:"w-6 h-6 text-tertiary"})})]}),x.jsx("div",{className:"flex gap-1.5 mt-2",children:P.map(($e,Me)=>x.jsx("div",{className:`h-1 rounded-full transition-all duration-300 ${Me===bt?`w-4 ${ve.symptomClass}`:Me<bt?`w-1.5 ${ve.symptomClass} opacity-40`:"w-1.5 bg-themegray1/30"}`},Me))})]}),x.jsx("div",{className:"flex-1 overflow-hidden relative",style:{touchAction:y?"pan-y":"auto"},onTouchStart:y?Be:void 0,onTouchMove:y?at:void 0,onTouchEnd:y?Ze:void 0,onTouchCancel:y?Ze:void 0,children:x.jsxs(lR,{slideDirection:Rt,children:[x.jsx("div",{className:`w-full h-full overflow-y-auto p-2 bg-themewhite2 ${y?"pb-16":""} ${Pt!=="decision"?"hidden":""}`,children:x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"mx-2 mt-2",children:x.jsx(Pb,{checked:q,onChange:()=>ee(!q),label:"Include Decision Making in note",onDescription:"Decision making will be added to your note",offDescription:"Decision making will not be included",icon:x.jsx(KC,{size:18}),colors:ve})}),x.jsx("div",{className:"mx-2",children:x.jsx("div",{className:"rounded-md border border-themegray1/15 overflow-hidden",children:x.jsx(Sq,{algorithmOptions:a,cardStates:s,disposition:i,dispositionType:i.type})})})]})}),U&&x.jsx("div",{className:`w-full h-full overflow-y-auto p-2 bg-themewhite2 ${y?"pb-16":""} ${Pt!=="hpi"?"hidden":""}`,children:x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"mx-2 mt-2",children:x.jsx(Pb,{checked:X,onChange:()=>{const $e=!X;ae($e),$e&&setTimeout(()=>cn.current?.focus(),Li.AUTOFOCUS_DELAY)},label:"Include HPI in note",onDescription:"HPI will be added to your note",offDescription:"HPI will not be included",icon:x.jsx(c2,{size:18}),colors:ve})}),X&&x.jsxs("div",{className:"mx-2 relative",children:[x.jsx("textarea",{ref:cn,value:z,onChange:$e=>{V($e.target.value),Ct($e.target.selectionStart)},onSelect:$e=>Ct($e.target.selectionStart),onKeyDown:$e=>{if($e.key==="Escape"&&mn){$e.preventDefault(),Jt();return}if(mn&&($e.key==="ArrowDown"||$e.key==="ArrowUp")){$e.preventDefault(),$e.key==="ArrowDown"?Zt():Qt();return}if($e.key==="Enter"&&mn&&!$e.shiftKey){$e.preventDefault();const Me=Kt();Me&&(V(Me.newText),Ct(Me.newCursorPosition),requestAnimationFrame(()=>{const it=cn.current;it&&(it.selectionStart=Me.newCursorPosition,it.selectionEnd=Me.newCursorPosition)}));return}},placeholder:"History of present illness, clinical observations, assessment...",className:"w-full text-tertiary bg-themewhite outline-none text-[16px] md:text-[10pt] px-4 py-3 rounded-md border border-themegray1/20 min-w-0 resize-none min-h-[12rem] leading-6 focus:border-themeblue1/30 transition-colors"}),mn&&x.jsx(xq,{suggestions:an,selectedIndex:rn,onDismiss:Jt})]})]})}),F&&x.jsx("div",{className:`w-full h-full overflow-y-auto p-2 bg-themewhite2 ${y?"pb-16":""} ${Pt!=="pe"?"hidden":""}`,children:x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"mx-2 mt-2",children:x.jsx(Pb,{checked:ne,onChange:()=>J(!ne),label:"Include Physical Exam in note",onDescription:"Physical exam will be added to your note",offDescription:"Physical exam will not be included",icon:x.jsx(ux,{size:18}),colors:ve})}),ne&&x.jsx("div",{className:"mx-2",children:x.jsx("div",{className:"rounded-md border border-themegray1/15 overflow-hidden",children:x.jsx(Tq,{initialText:K,onChange:ie,colors:ve,symptomCode:v?.icon||"A-1",depth:N.peDepth??"minimal",customBlocks:N.peDepth==="custom"?N.customPEBlocks:void 0})})})]})}),x.jsx("div",{className:`w-full h-full overflow-y-auto p-4 bg-themewhite2 ${y?"pb-16":""} ${Pt!=="fullnote"?"hidden":""}`,children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-t-md bg-themewhite text-xs text-secondary",children:[x.jsx("span",{className:"font-medium",children:"Note Preview"}),x.jsx(Uu,{onClick:()=>_e(L,"preview"),status:be==="preview"?"done":"idle",variant:"copy",title:"Copy note text"})]}),x.jsx("div",{className:"p-3 rounded-b-md bg-themewhite3 text-tertiary text-[8pt] whitespace-pre-wrap max-h-48 overflow-y-auto border border-themegray1/15",children:L||"No content selected"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-t-md bg-themewhite text-xs text-secondary",children:[x.jsx("span",{className:"font-medium",children:"Encoded Note"}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Uu,{onClick:()=>_e(oe,"encoded"),status:be==="encoded"?"done":"idle",variant:"copy",title:"Copy encoded text"}),x.jsx(Uu,{onClick:pe,status:le==="shared"||le==="copied"?"done":le==="generating"||le==="sharing"?"busy":"idle",variant:"share",title:"Share note as image"}),x.jsx(Uu,{onClick:Oe,status:ge==="done"?"done":ge==="generating"?"busy":"idle",variant:"pdf",title:"Export DD689 PDF"})]})]}),x.jsx("div",{className:"mt-1",children:x.jsx(bq,{algorithmOptions:a,cardStates:s,noteOptions:{includeAlgorithm:!0,includeDecisionMaking:q,customNote:X?z:"",physicalExamNote:ne?K:"",user:N,userId:j,clinicId:B??void 0},symptomCode:v?.icon?.replace("-","")||"A1",onEncodedValueChange:we,layout:oe.length>300?"col":"row"})})]})]})})]})}),x.jsxs("div",{className:`flex items-center gap-2 justify-between shrink-0 ${y?"px-6 pt-4 pb-6":"p-4"}`,style:y?{paddingBottom:"max(2rem, calc(env(safe-area-inset-bottom, 0px) + 2rem))"}:{},children:[x.jsx("div",{}),x.jsx("div",{className:`flex items-center gap-2 ${Rt==="left"?"animate-footer-btn-left":Rt==="right"?"animate-footer-btn-right":""}`,children:bt<P.length-1?x.jsxs("button",{onClick:je,className:`w-11 h-11 rounded-full flex items-center justify-center shrink-0 active:scale-95 transition-all md:w-auto md:h-auto md:px-5 md:py-2.5 md:rounded-xl md:gap-2 ${ve.buttonClass}`,"aria-label":"Next",children:[x.jsx("span",{className:"hidden md:inline text-sm font-medium",children:"Next"}),x.jsx(af,{className:"w-6 h-6"})]}):x.jsxs(x.Fragment,{children:[c&&!de&&x.jsxs("button",{onClick:Ee,disabled:ye||!oe,className:`w-11 h-11 rounded-full flex items-center justify-center transition-all active:scale-95 disabled:opacity-40 md:w-auto md:h-auto md:px-5 md:py-2.5 md:rounded-xl md:gap-2
                                        ${Qe?"bg-themeredred/15 text-themeredred":ye?"bg-green-500/15 text-green-600 dark:text-green-300":ve.buttonClass}`,title:Qe?"Storage full":ye?"Saved":"Save to My Notes",children:[Qe?x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):ye?x.jsx(So,{className:"w-6 h-6"}):x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),x.jsx("span",{className:"hidden md:inline text-sm font-medium",children:Qe?"Storage Full":ye?"Saved":"Save Note"})]}),de&&ke&&f&&x.jsxs("button",{onClick:xe,disabled:ye||!oe,className:`w-11 h-11 rounded-full flex items-center justify-center transition-all active:scale-95 disabled:opacity-40 md:w-auto md:h-auto md:px-5 md:py-2.5 md:rounded-xl md:gap-2
                                        ${ye?"bg-green-500/15 text-green-600 dark:text-green-300":"bg-themeblue3/10 text-themeblue3 hover:bg-themeblue3/20"}`,title:ye?"Changes saved":"Save changes",children:[ye?x.jsx(So,{className:"w-6 h-6"}):x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),x.jsx("span",{className:"hidden md:inline text-sm font-medium",children:ye?"Saved":"Save Changes"})]}),de&&!ke&&d&&x.jsxs("button",{onClick:De,disabled:Xe,className:`w-11 h-11 rounded-full flex items-center justify-center transition-all active:scale-95 disabled:opacity-40 md:w-auto md:h-auto md:px-5 md:py-2.5 md:rounded-xl md:gap-2
                                        ${Xe?"bg-themeredred/15 text-themeredred":dt?"bg-red-500 text-white":"bg-themewhite3 text-themeredred hover:bg-themeredred/10"}`,title:dt?"Tap again to confirm":"Delete note",children:[Xe?x.jsx(So,{className:"w-6 h-6"}):x.jsx("svg",{className:"w-6 h-6 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),x.jsx("span",{className:"hidden md:inline text-sm font-medium",children:Xe?"Deleted":dt?"Confirm?":"Delete"})]})]})},bt)]})]});return x.jsx(of,{isVisible:r,onClose:()=>l(!1),fullHeight:"90dvh",mobileClassName:"flex flex-col bg-themewhite2",children:Ve=>ft(Ve)})};function Rq(){const[r,i]=D.useState(""),[a,s]=D.useState([]),[l,c]=D.useState(!1),d=D.useRef(0),f=D.useMemo(()=>{const v=[],y=(k,E,I,T,N,j)=>{k?.forEach((B,U)=>{B?.text&&v.push({type:N,id:B.id??U,icon:B.icon||j,text:B.text,data:{categoryId:E.id,symptomId:I.id,categoryRef:E,symptomRef:I,guidelineType:T,guidelineId:B.id??U}})})};a1.forEach(k=>{v.push({type:"category",id:k.id,icon:k.icon,text:k.text,data:{categoryRef:k,categoryId:k.id}})}),a1.forEach(k=>{k.contents?.forEach(E=>{v.push({type:"CC",id:E.id,icon:E.icon,text:E.text,data:{categoryId:k.id,symptomId:E.id,categoryRef:k,symptomRef:E}}),y(E.DDX,k,E,"DDX","DDX","DDX"),y(E.medcom,k,E,"medcom","training","")})}),Ke.forEach((k,E)=>{v.push({type:"medication",id:E,icon:k.icon,text:k.text,data:{medicationData:k}})});const A=new Map;a1.forEach(k=>{k.contents?.forEach(E=>{E.stp?.forEach(I=>{"icon"in I&&I.icon&&!A.has(I.icon)&&A.set(I.icon,{categoryId:k.id,symptomId:E.id,categoryRef:k,symptomRef:E})})})});const w=new Set;return Kh.forEach(k=>{k.subjectArea.forEach(E=>{E.tasks.forEach(I=>{if(!w.has(I.id)){w.add(I.id);const T=A.get(I.id);v.push({type:"training",id:v.length,icon:"",text:I.title,data:{guidelineType:"stp-task",taskId:I.id,skillLevel:k.skillLevel,subjectArea:E.name,...T&&{categoryId:T.categoryId,symptomId:T.symptomId,categoryRef:T.categoryRef,symptomRef:T.symptomRef}}})}})})}),v},[]),m=D.useCallback(v=>{if(i(v),!v.trim()){s([]),c(!1);return}c(!0),d.current&&window.clearTimeout(d.current),d.current=window.setTimeout(()=>{const y=v.toLowerCase(),A={category:1,CC:2,training:3,DDX:4,medication:5},k=f.filter(E=>E.text.toLowerCase().includes(y)).slice(0,100).sort((E,I)=>{const T=A[E.type]||5,N=A[I.type]||5;return T!==N?T-N:E.text.localeCompare(I.text)});s(k),c(!1)},150)},[f]),g=D.useCallback(()=>{i(""),s([]),c(!1),d.current&&(window.clearTimeout(d.current),d.current=0)},[]);return{searchInput:r,setSearchInput:i,searchResults:a,isSearching:l,handleSearchChange:m,clearSearch:g}}const $1={showNoteImport:!1,showSettings:!1,showMedications:!1,showSymptomInfo:!1,showTrainingDrawer:!1,trainingDrawerTaskId:null,isMenuOpen:!1},wi=q7()((r,i)=>({viewState:"main",selectedCategory:null,selectedSymptom:null,selectedMedication:null,selectedGuideline:null,isMenuOpen:!1,showNoteImport:!1,showSettings:!1,isSearchExpanded:!1,showSymptomInfo:!1,showMedications:!1,isWriteNoteVisible:!1,writeNoteData:null,showTrainingDrawer:!1,trainingDrawerTaskId:null,isMobile:typeof window<"u"?window.matchMedia("(max-width: 767px)").matches:!1,init:()=>{const a=window.matchMedia("(max-width: 767px)"),s=l=>{r({isMobile:l.matches}),l.matches||r({isMenuOpen:!1,isSearchExpanded:!1})};return a.addEventListener("change",s),()=>a.removeEventListener("change",s)},handleNavigation:a=>{switch(a.type){case"category":{const s=a.data?.categoryRef||a1.find(l=>l.id===a.id);s&&r({...$1,viewState:"subcategory",selectedCategory:s,selectedSymptom:null,selectedMedication:null,selectedGuideline:null,isSearchExpanded:!1});break}case"CC":{const s=a.data?.categoryRef||a1.find(c=>c.id===a.data?.categoryId)||a1.find(c=>c.contents?.some(d=>d.id===a.id)),l=a.data?.symptomRef||s?.contents?.find(c=>c.id===a.id);s&&l&&r({...$1,viewState:"questions",selectedCategory:s,selectedSymptom:l,selectedMedication:null,selectedGuideline:null,isSearchExpanded:!1});break}case"training":break;case"DDX":{const s=a.data?.categoryRef||a1.find(c=>c.id===a.data?.categoryId),l=a.data?.symptomRef||s?.contents?.find(c=>c.id===a.data?.symptomId);s&&l&&r({...$1,viewState:"questions",selectedCategory:s,selectedSymptom:l,selectedMedication:null,selectedGuideline:{type:"DDX",id:a.data?.guidelineId||a.id,symptomId:l.id},isSearchExpanded:!1});break}case"medication":{const s=a.data?.medicationData;s&&r({...$1,showMedications:!0,selectedMedication:s,isSearchExpanded:!1});break}}},handleMedicationSelect:a=>{r(a?{showMedications:!0,selectedMedication:a}:{selectedMedication:null})},handleShowMedications:()=>{const s=!i().showMedications;r({...s?$1:{isMenuOpen:!1},showMedications:s,selectedMedication:null,isSearchExpanded:!1})},handleBackClick:()=>{const a=i();a.selectedGuideline?r({selectedGuideline:null}):a.selectedSymptom?r({selectedSymptom:null,selectedGuideline:null,viewState:"subcategory"}):a.selectedCategory&&r({viewState:"main",selectedCategory:null,selectedSymptom:null,selectedMedication:null,selectedGuideline:null})},toggleMenu:()=>r(a=>({isMenuOpen:!a.isMenuOpen})),closeMenu:()=>r({isMenuOpen:!1}),setShowNoteImport:a=>r(s=>({...a?$1:{},showNoteImport:a,viewState:s.viewState,selectedCategory:s.selectedCategory,selectedSymptom:s.selectedSymptom,selectedMedication:s.selectedMedication,selectedGuideline:s.selectedGuideline,isSearchExpanded:s.isSearchExpanded,isWriteNoteVisible:s.isWriteNoteVisible,writeNoteData:s.writeNoteData})),setShowSettings:a=>r(s=>({...a?$1:{},showSettings:a,viewState:s.viewState,selectedCategory:s.selectedCategory,selectedSymptom:s.selectedSymptom,selectedMedication:s.selectedMedication,selectedGuideline:s.selectedGuideline,isSearchExpanded:s.isSearchExpanded,isWriteNoteVisible:s.isWriteNoteVisible,writeNoteData:s.writeNoteData})),toggleSearchExpanded:()=>r(a=>({isSearchExpanded:!a.isSearchExpanded})),setSearchExpanded:a=>r({isSearchExpanded:a}),expandSearchOnMobile:()=>{const a=i();!a.isMobile||a.isSearchExpanded||r({isSearchExpanded:!0})},toggleSymptomInfo:()=>r(a=>({showSymptomInfo:!a.showSymptomInfo})),setShowSymptomInfo:a=>r(s=>({...a?$1:{},showSymptomInfo:a,viewState:s.viewState,selectedCategory:s.selectedCategory,selectedSymptom:s.selectedSymptom,selectedMedication:s.selectedMedication,selectedGuideline:s.selectedGuideline,isSearchExpanded:s.isSearchExpanded,isWriteNoteVisible:s.isWriteNoteVisible,writeNoteData:s.writeNoteData})),setShowMedications:a=>{r(s=>({...a?{...$1,selectedMedication:null}:{},...a?{}:{selectedMedication:null},showMedications:a,viewState:s.viewState,selectedCategory:s.selectedCategory,selectedSymptom:s.selectedSymptom,selectedGuideline:s.selectedGuideline,isSearchExpanded:s.isSearchExpanded,isWriteNoteVisible:s.isWriteNoteVisible,writeNoteData:s.writeNoteData}))},setShowTrainingDrawer:a=>r(s=>({...a?$1:{},showTrainingDrawer:!!a,trainingDrawerTaskId:a,viewState:s.viewState,selectedCategory:s.selectedCategory,selectedSymptom:s.selectedSymptom,selectedMedication:s.selectedMedication,selectedGuideline:s.selectedGuideline,isSearchExpanded:s.isSearchExpanded,isWriteNoteVisible:s.isWriteNoteVisible,writeNoteData:s.writeNoteData})),openWriteNote:a=>r({isWriteNoteVisible:!0,writeNoteData:a}),closeWriteNote:()=>{r({isWriteNoteVisible:!1}),setTimeout(()=>{wi.getState().isWriteNoteVisible||wi.setState({writeNoteData:null})},350)},resetToMain:()=>r({viewState:"main",selectedCategory:null,selectedSymptom:null,selectedGuideline:null,selectedMedication:null,isWriteNoteVisible:!1,writeNoteData:null})})),Oq=r=>r.selectedSymptom!==null&&r.viewState==="questions",Dq=r=>{const i=r.selectedSymptom!==null&&r.viewState==="questions";return r.isSearchExpanded||i?"grid-cols-[0fr_1fr]":"grid-cols-[1fr_0fr]"},jq=r=>{const i=r.selectedSymptom!==null&&r.viewState==="questions";return r.selectedCategory?i?2:1:0},Bq=r=>r.isMobile&&(r.isSearchExpanded||r.selectedSymptom!==null&&r.viewState==="questions");function Pq(){D.useEffect(()=>wi.getState().init(),[]);const r=wi(ye=>ye.viewState),i=wi(ye=>ye.selectedCategory),a=wi(ye=>ye.selectedSymptom),s=wi(ye=>ye.selectedMedication),l=wi(ye=>ye.selectedGuideline),c=wi(ye=>ye.isMobile),d=wi(ye=>ye.isMenuOpen),f=wi(ye=>ye.showNoteImport),m=wi(ye=>ye.showSettings),g=wi(ye=>ye.isSearchExpanded),v=wi(ye=>ye.showSymptomInfo),y=wi(ye=>ye.showMedications),A=wi(ye=>ye.isWriteNoteVisible),w=wi(ye=>ye.writeNoteData),k=wi(ye=>ye.showTrainingDrawer),E=wi(ye=>ye.trainingDrawerTaskId),I=wi(Oq),T=wi(Dq),N=wi(jq),j=wi(Bq),B=wi(ye=>ye.handleNavigation),U=wi(ye=>ye.handleMedicationSelect),F=wi(ye=>ye.handleShowMedications),P=wi(ye=>ye.handleBackClick),z=wi(ye=>ye.toggleMenu),V=wi(ye=>ye.closeMenu),L=wi(ye=>ye.setShowNoteImport),Q=wi(ye=>ye.setShowSettings),q=wi(ye=>ye.setShowMedications),ee=wi(ye=>ye.toggleSearchExpanded),X=wi(ye=>ye.setSearchExpanded),ae=wi(ye=>ye.expandSearchOnMobile),K=wi(ye=>ye.toggleSymptomInfo),ie=wi(ye=>ye.setShowSymptomInfo),ne=wi(ye=>ye.setShowTrainingDrawer),J=wi(ye=>ye.openWriteNote),te=wi(ye=>ye.closeWriteNote),$=wi(ye=>ye.resetToMain),oe=()=>r==="questions"&&a?a.text:r==="subcategory"&&i?i.text:"",we=ye=>ye?!1:!!(i||a),be=ye=>ye?!1:!(i||a),Te=()=>"Medications";return{viewState:r,selectedCategory:i,selectedSymptom:a,selectedMedication:s,selectedGuideline:l,isMobile:c,isMenuOpen:d,showNoteImport:f,showSettings:m,isSearchExpanded:g,showSymptomInfo:v,showMedications:y,isWriteNoteVisible:A,writeNoteData:w,showTrainingDrawer:k,trainingDrawerTaskId:E,handleNavigation:B,handleMedicationSelect:U,handleShowMedications:F,handleBackClick:P,toggleMenu:z,closeMenu:V,setShowNoteImport:L,setShowSettings:Q,setShowMedications:q,toggleSearchExpanded:ee,setSearchExpanded:X,expandSearchOnMobile:ae,toggleSymptomInfo:K,setShowSymptomInfo:ie,setShowTrainingDrawer:ne,showWriteNote:J,closeWriteNote:te,resetToMain:$,showQuestionCard:I,mobileGridClass:T,columnAPanel:N,isMobileColumnB:j,dynamicTitle:oe(),shouldShowBackButton:we,shouldShowMenuButton:be,getMedicationButtonText:Te}}const yk=ya("OfflineDb"),Fq="packagebackend-offline",Uq=3;let Op=null;async function Qs(){if(Op)return Op;Op=await ak(Fq,Uq,{upgrade(r,i,a,s){if(i<1){const l=r.createObjectStore("notes",{keyPath:"id"});l.createIndex("by-user","user_id"),l.createIndex("by-sync-status","_sync_status"),l.createIndex("by-user-sync",["user_id","_sync_status"])}else if(i<2){const l=s.objectStore("notes");l.indexNames.contains("by-synced")&&l.deleteIndex("by-synced"),l.indexNames.contains("by-sync-status")||l.createIndex("by-sync-status","_sync_status"),l.indexNames.contains("by-user-sync")||l.createIndex("by-user-sync",["user_id","_sync_status"])}if(i<1){const l=r.createObjectStore("syncQueue",{keyPath:"id"});l.createIndex("by-status","status"),l.createIndex("by-user","user_id"),l.createIndex("by-user-status",["user_id","status"])}else if(i<2){const l=s.objectStore("syncQueue");l.indexNames.contains("by-user-status")||l.createIndex("by-user-status",["user_id","status"])}if(i<1){const l=r.createObjectStore("trainingCompletions",{keyPath:"id"});l.createIndex("by-user","user_id"),l.createIndex("by-training-item","training_item_id")}if(i<3){const l=s.objectStore("trainingCompletions");l.indexNames.contains("by-user-type")||l.createIndex("by-user-type",["user_id","completion_type"]),l.indexNames.contains("by-user-sync")||l.createIndex("by-user-sync",["user_id","_sync_status"])}}});try{const r=Op.transaction("trainingCompletions","readwrite"),i=r.objectStore("trainingCompletions"),a=await i.getAll();for(const s of a){const l=s;if("_synced"in l&&!("_sync_status"in l&&l._sync_status)){const c=l._synced,d={id:s.id,user_id:s.user_id,training_item_id:s.training_item_id,completed:s.completed??!0,completed_at:s.completed_at??null,completion_type:s.completion_type??"read",result:s.result??"GO",supervisor_id:s.supervisor_id??null,step_results:s.step_results??null,supervisor_notes:s.supervisor_notes??null,created_at:s.created_at,updated_at:s.updated_at,_sync_status:c?"synced":"pending",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null};await i.put(d)}}await r.done}catch(r){yk.warn("Training completions v2v3 migration error (non-fatal):",r)}return Op}async function Gx(r){const s=(await(await Qs()).getAllFromIndex("notes","by-user",r)).filter(l=>l.deleted_at===null);return uk(s)}async function Fh(r){const a=await(await Qs()).getAllFromIndex("notes","by-user",r);return uk(a)}async function nf(r){const i=await Qs(),a=await zH(r);return await i.put("notes",a),a}async function Vx(r){await(await Qs()).delete("notes",r)}async function s2(r,i,a){const s=await Qs(),l=await s.get("notes",r);l&&(l._sync_status=i,i==="error"?(l._sync_retry_count=(l._sync_retry_count||0)+1,l._last_sync_error=new Date().toISOString(),l._last_sync_error_message=a||"Unknown error"):i==="synced"&&(l._sync_retry_count=0,l._last_sync_error=null,l._last_sync_error_message=null),await s.put("notes",l))}async function df(r){const a=(await Qs()).transaction("syncQueue","readwrite"),s=a.objectStore("syncQueue"),c=(await s.index("by-user-status").getAll([r.user_id,"pending"])).find(f=>f.record_id===r.record_id&&f.table_name===r.table_name);if(c)return c.action==="create"&&r.action==="delete"?(await s.delete(c.id),await a.done,{...c,status:"synced"}):c.action==="create"&&r.action==="update"?(c.payload={...c.payload,...r.payload},c.created_at=new Date().toISOString(),await s.put(c),await a.done,c):(c.action=r.action,c.payload=r.payload,c.created_at=new Date().toISOString(),await s.put(c),await a.done,c);const d={...r,id:crypto.randomUUID(),created_at:new Date().toISOString(),synced_at:null,status:"pending",retry_count:0,last_error:null};return await s.put(d),await a.done,d}async function Vw(r){return(await(await Qs()).getAllFromIndex("syncQueue","by-user-status",[r,"pending"])).sort((s,l)=>new Date(s.created_at).getTime()-new Date(l.created_at).getTime())}async function wk(r){return(await Qs()).getAllFromIndex("syncQueue","by-user-status",[r,"failed"])}async function Ak(r){const i=await Qs(),a=await i.get("syncQueue",r);a&&(a.status="synced",a.synced_at=new Date().toISOString(),await i.put("syncQueue",a))}async function Sk(r,i){const a=await Qs(),s=await a.get("syncQueue",r);s&&(s.status="failed",s.retry_count=(s.retry_count||0)+1,s.last_error=i||"Unknown error",await a.put("syncQueue",s))}async function kk(r,i=5){const a=await Qs(),s=await wk(r);let l=0;const c=a.transaction("syncQueue","readwrite"),d=c.objectStore("syncQueue");for(const f of s)f.retry_count<i&&(f.status="pending",await d.put(f),l++);return await c.done,l}async function F4(r=10080*60*1e3){const a=(await Qs()).transaction("syncQueue","readwrite"),s=a.objectStore("syncQueue"),l=await s.getAll();let c=0;const d=Date.now()-r;for(const f of l)f.status==="synced"&&f.synced_at&&new Date(f.synced_at).getTime()<d&&(await s.delete(f.id),c++);return await a.done,c}async function Uh(r){return(await Qs()).getAllFromIndex("trainingCompletions","by-user",r)}async function eg(r){await(await Qs()).put("trainingCompletions",r)}async function Yw(r){await(await Qs()).delete("trainingCompletions",r)}async function o2(r,i,a){const s=await Qs(),l=await s.get("trainingCompletions",r);l&&(l._sync_status=i,i==="error"?(l._sync_retry_count=(l._sync_retry_count||0)+1,l._last_sync_error=new Date().toISOString(),l._last_sync_error_message=a||"Unknown error"):i==="synced"&&(l._sync_retry_count=0,l._last_sync_error=null,l._last_sync_error_message=null),await s.put("trainingCompletions",l))}async function Ck(){const i=(await Qs()).transaction(["notes","syncQueue","trainingCompletions"],"readwrite");await i.objectStore("notes").clear(),await i.objectStore("syncQueue").clear(),await i.objectStore("trainingCompletions").clear(),await i.done,await YH(),yk.info("Cleared all user data from IndexedDB (including crypto keys)")}async function Ek(){const i=(await Qs()).transaction("notes","readwrite"),a=i.objectStore("notes"),s=await a.getAll();let l=0;for(const c of s){const d=c;if("_synced"in d&&!("_sync_status"in d&&d._sync_status)){const f=d._synced,m=c;m._sync_status=f?"synced":"pending",m._sync_retry_count=0,m._last_sync_error=null,m._last_sync_error_message=null,m.symptom_icon||(m.symptom_icon=null),m.symptom_text||(m.symptom_text=null),m.disposition_type||(m.disposition_type=null),m.disposition_text||(m.disposition_text=null),m.preview_text||(m.preview_text=null),await a.put(m),l++}}return await i.done,l}function Pd(r){const i={};for(const[a,s]of Object.entries(r))a.startsWith("_")||(i[a]=s);return i}const Lq=Object.freeze(Object.defineProperty({__proto__:null,addToSyncQueue:df,cleanupSyncedItems:F4,clearAllUserData:Ck,getAllLocalNotesIncludingDeleted:Fh,getDb:Qs,getFailedSyncItems:wk,getLocalNotes:Gx,getLocalTrainingCompletions:Uh,getPendingSyncItems:Vw,hardDeleteLocalNote:Vx,hardDeleteLocalTrainingCompletion:Yw,markSyncItemFailed:Sk,markSyncItemSynced:Ak,migrateV1Notes:Ek,resetFailedItemsForRetry:kk,saveLocalNote:nf,saveLocalTrainingCompletion:eg,stripLocalFields:Pd,updateNoteSyncStatus:s2,updateTrainingCompletionSyncStatus:o2},Symbol.toStringTag,{value:"Module"})),Is=ya("SyncService"),zq=["notes","training_completions"],xy=5,M5=1e3,Hq=3e4,R5=20;function R1(){return navigator.onLine}async function O5(){try{const{error:r}=await St.from("notes").select("id").limit(1);return!r}catch{return!1}}function qq(r){if(!zq.includes(r))throw new Error(`Sync not allowed for table: ${r}`);return r}function Gq(r){const i=M5*Math.pow(2,r),a=Math.random()*M5;return Math.min(Hq,i+a)}function Vq(r){return new Promise(i=>setTimeout(i,r))}async function _k(r){if(!R1())return{processed:0,failed:0,skipped:0,aborted:!0};await kk(r,xy);const i=await Vw(r);if(i.length===0)return await F4(),{processed:0,failed:0,skipped:0,aborted:!1};Is.info(`Processing ${i.length} pending items`);let a=0,s=0,l=0;for(let d=0;d<i.length;d+=R5){if(!R1())return Is.debug("Went offline, aborting sync"),{processed:a,failed:s,skipped:i.length-d,aborted:!0};const f=i.slice(d,d+R5);for(const m of f){if(m.retry_count>=xy){Is.warn(`Skipping item ${m.id} (exceeded ${xy} retries)`),l++;continue}try{const g=qq(m.table_name),v=Pd(m.payload);switch(m.action){case"create":await Yq(g,v);break;case"update":await Qq(g,m.record_id,v);break;case"delete":await $q(g,m.record_id,m.payload);break}await Ak(m.id),g==="notes"?await s2(m.record_id,"synced"):g==="training_completions"&&await o2(m.record_id,"synced"),a++}catch(g){const v=g instanceof Error?g.message:String(g);if(Is.error(`Sync failed for item ${m.id}:`,v),await Sk(m.id,v),m.table_name==="notes"?await s2(m.record_id,"error",v):m.table_name==="training_completions"&&await o2(m.record_id,"error",v),s++,m.retry_count>0){const y=Gq(m.retry_count);Is.debug(`Backing off ${y}ms before next item`),await Vq(y)}}}}const c=await F4();return c>0&&Is.info(`Cleaned up ${c} old synced queue items`),Is.info(`Sync complete: ${a} processed, ${s} failed, ${l} skipped`),{processed:a,failed:s,skipped:l,aborted:!1}}async function Yq(r,i){const{error:a}=await St.from(r).upsert(i,{onConflict:"id"});if(a)throw new Error(`Create failed: ${a.message}`)}async function Qq(r,i,a){const{data:s}=await St.from(r).select("updated_at").eq("id",i).maybeSingle();if(s){const c=s.updated_at,d=a.updated_at;if(c&&d){const f=new Date(c).getTime();if(new Date(d).getTime()<=f){Is.debug(`Skipping update for ${i}: server version is newer`);return}}}else{const{error:c}=await St.from(r).upsert(a,{onConflict:"id"});if(c)throw new Error(`Upsert failed: ${c.message}`);return}const{error:l}=await St.from(r).update(a).eq("id",i);if(l)throw new Error(`Update failed: ${l.message}`)}async function $q(r,i,a){const s=a._deleted_at_timestamp;if(s){const{data:c}=await St.from(r).select("updated_at").eq("id",i).maybeSingle();if(c){const d=c.updated_at;if(d){const f=new Date(d).getTime(),m=new Date(s).getTime();if(f>m){Is.debug(`Skipping delete for ${i}: server version is newer (${d} > ${s})`);return}}}else{Is.debug(`Record ${i} not found on server, skipping delete`);return}}const{error:l}=await St.from(r).delete().eq("id",i);if(l&&!l.message.includes("0 rows"))throw new Error(`Delete failed: ${l.message}`)}async function Ik(r,i){let a=0,s=0;const l=await i.fetchServer(r),c=await i.fetchLocal(r),d=new Map(c.map(m=>[i.getId(m),m])),f=new Map(l.map(m=>[i.getId(m),m]));for(const m of l){const g=d.get(i.getId(m));if(!g){await i.saveLocal(m),a++;continue}const v=new Date(i.getTimestamp(m)).getTime(),y=new Date(i.getTimestamp(g)).getTime();g._sync_status==="pending"?v>y&&(await i.saveLocal(m),a++):v>=y&&(await i.saveLocal(m),a++)}for(const m of c)if(!f.has(i.getId(m))){if(m._sync_status==="pending")continue;await i.deleteLocal(i.getId(m)),s++}return{uploaded:0,downloaded:a,deleted:s}}async function Nk(r){if(!R1())return Is.debug("Offline, skipping reconciliation"),Fh(r);Is.info("Starting reconciliation with server");try{await Ik(r,{tableName:"notes",fetchLocal:Fh,fetchServer:async i=>{const{data:a,error:s}=await St.from("notes").select("*").eq("user_id",i).order("updated_at",{ascending:!1});if(s)throw s;return a||[]},getId:i=>i.id,getTimestamp:i=>i.updated_at,saveLocal:async i=>{await nf({...i,_sync_status:"synced",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null})},deleteLocal:Vx,upsertServer:async()=>{}})}catch(i){return Is.error("Failed to reconcile notes:",i),Fh(r)}return Fh(r)}async function Tk(r){if(!R1())return Is.debug("Offline, skipping training completions reconciliation"),Uh(r);Is.info("Starting training completions reconciliation with server");try{await Ik(r,{tableName:"training_completions",fetchLocal:Uh,fetchServer:async i=>{const{data:a,error:s}=await St.from("training_completions").select("*").eq("user_id",i).order("updated_at",{ascending:!1});if(s)throw s;return a||[]},getId:i=>i.id,getTimestamp:i=>i.updated_at,saveLocal:async i=>{await eg({...i,_sync_status:"synced",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null})},deleteLocal:Yw,upsertServer:async()=>{}})}catch(i){return Is.error("Failed to reconcile training completions:",i),Uh(r)}return Uh(r)}function Mk(r,i){let a=!1,s=navigator.onLine;const l=async()=>{if(!a){a=!0;try{i?.onSyncStart?.();const g=await Nk(r);i?.onReconcileComplete?.(g);const v=await Tk(r);i?.onTrainingReconcileComplete?.(v);const y=await _k(r);i?.onSyncComplete?.(y),i?.onClinicRefresh?.(),Is.info(`Full sync completed: ${y.processed} pushed, ${y.failed} failed`)}catch(g){Is.error("Sync on reconnect failed:",g),i?.onSyncComplete?.({processed:0,failed:0,skipped:0,aborted:!0})}finally{a=!1}}},c=async()=>{if(!await O5()){Is.debug("online event fired but Supabase is unreachable");return}s=!0,i?.onStatusChange?.(!0),await l()},d=()=>{s=!1,i?.onStatusChange?.(!1)},m=setInterval(async()=>{if(a)return;const g=await Vw(r),v=g.length>0,y=!s&&navigator.onLine;if(!v&&!y)return;if(!await O5()){s&&(s=!1,i?.onStatusChange?.(!1));return}s||(s=!0,i?.onStatusChange?.(!0)),Is.debug(`Periodic check: ${v?g.length+" pending items":"reconnect detected"}, syncing`),await l()},3e4);return window.addEventListener("online",c),window.addEventListener("offline",d),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d),clearInterval(m)}}async function U4(r,i,a){if(!R1())return{processed:0,failed:0,skipped:0,aborted:!0};const s=await Nk(r);return i?.(s),await Tk(r),_k(r)}const Wq=ya("SyncEngine");async function w2(r,i,a){if(!R1())return!1;try{return await i.upsertFn(r),await i.updateSyncStatus(r.id,"synced"),!0}catch(s){const l=s instanceof Error?s.message:String(s);return Wq.warn(`Immediate ${a} sync failed for ${i.tableName}/${r.id}, queued: ${l}`),!1}}const Rk=ya("NotesService");function Xq(r){if(!r)return null;if(r.last_name){let i="";return r.rank&&(i=r.rank+" "),i+=r.last_name,r.first_name&&(i+=", "+r.first_name.charAt(0)+".",r.middle_initial&&(i+=r.middle_initial.charAt(0)+".")),r.credential&&(i+=" "+r.credential),i}return r.display_name||null}function ix(r,i,a){return{id:r.id,encodedText:r.hpi_encoded||"",createdAt:r.timestamp,symptomIcon:r.symptom_icon||"",symptomText:r.symptom_text||"",dispositionType:r.disposition_type||"",dispositionText:r.disposition_text||"",previewText:r.preview_text||"",source:r.source_device||void 0,sync_status:r._sync_status,authorId:r.user_id,authorName:i??r.display_name??null,clinicName:a??r.clinic_name??void 0,clinicId:r.clinic_id,originating_clinic_id:r.originating_clinic_id??null,visible_clinic_ids:r.visible_clinic_ids??[]}}function by(r,i,a,s=null,l=null,c,d=null,f=null,m=[],g){const v=new Date().toISOString();return{id:c??crypto.randomUUID(),user_id:i,clinic_id:a,clinic_name:d,timestamp:g??v,display_name:s,rank:l,uic:null,algorithm_reference:null,hpi_encoded:r.encodedText,symptom_icon:r.symptomIcon,symptom_text:r.symptomText,disposition_type:r.dispositionType,disposition_text:r.dispositionText,preview_text:r.previewText,is_imported:r.source?.startsWith("external")??!1,originating_clinic_id:f,visible_clinic_ids:m,source_device:r.source||null,created_at:v,updated_at:v,deleted_at:null,_sync_status:"pending",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null}}async function Kq(){try{const{data:{user:r}}=await St.auth.getUser();if(!r)return{userId:null,clinicId:null,clinicName:null,displayName:null,rank:null};const{data:i}=await St.from("profiles").select("clinic_id, first_name, last_name, rank, clinics(name)").eq("id",r.id).single(),a=i?.last_name??null,s=i?.rank??null,l=a?s?`${s} ${a}`:a:null,d=i?.clinics?.name??null;return{userId:r.id,clinicId:i?.clinic_id??null,clinicName:d,displayName:l,rank:s}}catch{return{userId:null,clinicId:null,clinicName:null,displayName:null,rank:null}}}async function Jq(r,i,a){const{userId:s,clinicId:l,clinicName:c,displayName:d,rank:f}=await Kq(),m=r.source?.startsWith("external")??!1;if(!s){const w={...by(r,"guest",null,null,null,i,null,r.originating_clinic_id??null,[],a),_sync_status:"synced"};return await nf(w),ix(w)}const g=m?by(r,s,null,null,null,i,null,r.originating_clinic_id??null,l?[l]:[],a):by(r,s,l,d,f,i,c),v=await nf(g);await df({user_id:s,action:"create",table_name:"notes",record_id:g.id,payload:Pd(v)});const y=Pd(v);return await w2({id:g.id,payload:y},{tableName:"notes",upsertFn:async w=>{const{error:k}=await St.from("notes").upsert(w.payload,{onConflict:"id"});if(k)throw k},updateSyncStatus:s2},"create")&&(g._sync_status="synced",Rk.info(`Note ${g.id} synced immediately`),l&&!m&&Hx({type:"new_clinic_note",name:d,clinic_id:l,author_id:s})),ix(g)}async function Zq(r,i,a){const l=(await Gx(a)).find(m=>m.id===r);if(!l)return null;const c=new Date().toISOString(),d={...l,updated_at:c,_sync_status:a==="guest"?"synced":"pending",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null};i.encodedText!==void 0&&(d.hpi_encoded=i.encodedText),i.createdAt!==void 0&&(d.timestamp=i.createdAt),i.symptomIcon!==void 0&&(d.symptom_icon=i.symptomIcon),i.symptomText!==void 0&&(d.symptom_text=i.symptomText),i.dispositionType!==void 0&&(d.disposition_type=i.dispositionType),i.dispositionText!==void 0&&(d.disposition_text=i.dispositionText),i.previewText!==void 0&&(d.preview_text=i.previewText),i.source!==void 0&&(d.source_device=i.source||null);const f=await nf(d);if(a!=="guest"){await df({user_id:a,action:"update",table_name:"notes",record_id:r,payload:Pd(f)});const m=Pd(f);await w2({id:r,payload:m},{tableName:"notes",upsertFn:async v=>{const{error:y}=await St.from("notes").update(v.payload).eq("id",r);if(y)throw y},updateSyncStatus:s2},"update")&&(d._sync_status="synced")}return ix(d)}async function Ok(r,i){const a=new Date().toISOString();await Vx(r),i!=="guest"&&(await df({user_id:i,action:"delete",table_name:"notes",record_id:r,payload:{_deleted_at_timestamp:a}}),await w2({id:r},{tableName:"notes",upsertFn:async()=>{const{data:s}=await St.from("notes").select("updated_at").eq("id",r).maybeSingle();if(s){const c=new Date(s.updated_at).getTime(),d=new Date(a).getTime();if(c>d){Rk.debug(`Skipping delete for ${r}: server version is newer`);return}}const{error:l}=await St.from("notes").delete().eq("id",r);if(l)throw l},updateSyncStatus:s2},"delete"))}async function eG(r){const i=await Gx(r);for(const a of i)await Ok(a.id,r)}async function tG(r,i){const{data:a,error:s}=await St.rpc("get_clinic_notes_by_hierarchy",{p_exclude_user_id:i??void 0});if(s)throw new Error(`Failed to fetch clinic notes from server: ${s.message}`);const l=a||[];if(l.length===0)return[];const c=[...new Set(l.map(y=>y.user_id))],{data:d}=await St.from("profiles").select("id, first_name, last_name, middle_initial, rank, credential, display_name").in("id",c),f=new Map;for(const y of d||[]){const A=Xq(y);f.set(y.id,A)}const m=[...new Set([...l.map(y=>y.clinic_id).filter(y=>y!=null),...l.map(y=>y.originating_clinic_id).filter(y=>y!=null)])],g=new Map;if(m.length>0){const{data:y}=await St.from("clinics").select("id, name").in("id",m);for(const A of y||[])g.set(A.id,A.name)}return(await Promise.all(l.map(y=>fk(y)))).map(y=>{const A=f.get(y.user_id)??y.display_name??null;return{id:y.id,encodedText:y.hpi_encoded||"",createdAt:y.timestamp,symptomIcon:y.symptom_icon||"",symptomText:y.symptom_text||"",dispositionType:y.disposition_type||"",dispositionText:y.disposition_text||"",previewText:y.preview_text||"",source:y.source_device||void 0,sync_status:"synced",authorId:y.user_id,authorName:A,clinicName:y.clinic_id?g.get(y.clinic_id):void 0,clinicId:y.clinic_id,originating_clinic_id:y.originating_clinic_id??null,visible_clinic_ids:y.visible_clinic_ids??[]}})}async function nG(r){const{error:i}=await St.from("notes").delete().eq("id",r);if(i)throw new Error(`Failed to delete clinic note: ${i.message}`)}async function iG(r,i){const{data:a,error:s}=await St.from("notes").select("visible_clinic_ids").eq("id",r).single();if(s||!a)throw new Error(`Failed to fetch note for visibility update: ${s?.message}`);const c=(a.visible_clinic_ids||[]).filter(f=>f!==i),{error:d}=await St.from("notes").update({visible_clinic_ids:c}).eq("id",r);if(d)throw new Error(`Failed to update note visibility: ${d.message}`)}function Qw(){const[r,i]=D.useState(()=>typeof document<"u"?document.visibilityState==="visible":!0);return D.useEffect(()=>{const a=()=>{i(document.visibilityState==="visible")};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[]),r}function Dk({shouldSubscribe:r,channelName:i,postgresFilter:a,onPayload:s,logger:l}){const c=D.useRef(null),d=D.useRef(s);D.useEffect(()=>{d.current=s},[s]);const f=D.useCallback(()=>{c.current&&(l.debug("Unsubscribing from channel"),St.removeChannel(c.current),c.current=null)},[l]);D.useEffect(()=>{if(!r){f();return}f(),l.info(`Subscribing to ${i}`);const m=St.channel(i).on("postgres_changes",{event:"*",schema:a.schema??"public",table:a.table,...a.filter?{filter:a.filter}:{}},g=>d.current(g)).subscribe((g,v)=>{g==="SUBSCRIBED"?l.info(`Subscribed to ${i}`):g==="CHANNEL_ERROR"?l.error("Channel error:",v?.message??"unknown"):g==="TIMED_OUT"?l.warn("Subscription timed out, will retry"):l.debug(`Channel status: ${g}`)});return c.current=m,f},[r,i,a.table,a.filter,f])}const yy=ya("RealtimeClinicNotes");function D5(r){return{id:r.id,encodedText:r.hpi_encoded||"",createdAt:r.timestamp,symptomIcon:r.symptom_icon||"",symptomText:r.symptom_text||"",dispositionType:r.disposition_type||"",dispositionText:r.disposition_text||"",previewText:r.preview_text||"",source:r.source_device||void 0,sync_status:"synced",authorId:r.user_id,authorName:r.display_name||null,clinicName:r.clinic_name||void 0,clinicId:r.clinic_id,originating_clinic_id:r.originating_clinic_id??null,visible_clinic_ids:r.visible_clinic_ids??[]}}function rG({clinicId:r,userId:i,isAuthenticated:a,visibleClinicIds:s,isPageVisible:l,isNotePanelOpen:c,onClinicUpsert:d,onClinicDelete:f,onPersonalUpsert:m,onPersonalDelete:g}){const v=D.useRef(d),y=D.useRef(f),A=D.useRef(m),w=D.useRef(g);D.useEffect(()=>{v.current=d,y.current=f,A.current=m,w.current=g},[d,f,m,g]);const k=D.useRef(i);D.useEffect(()=>{k.current=i},[i]);const E=D.useCallback(N=>{const j=N.eventType,B=k.current;if(j==="INSERT"||j==="UPDATE"){const U=N.new;if(U.deleted_at){U.user_id===B?w.current(U.id):y.current(U.id);return}fk(U).then(F=>{const P=D5(F);U.user_id===B?A.current(P):v.current(P)}).catch(F=>{yy.warn("Failed to decrypt realtime note, using raw:",F);const P=D5(U);U.user_id===B?A.current(P):v.current(P)});return}if(j==="DELETE"){const U=N.old,F=U.id;if(!F){yy.warn("DELETE event missing row id, ignoring");return}U.user_id&&U.user_id===B?w.current(F):y.current(F)}},[]),I=D.useMemo(()=>({table:"notes",filter:s.length>0?`clinic_id=in.(${s.join(",")})`:`clinic_id=eq.${r}`}),[s,r]),T=D.useMemo(()=>s.length>0?`clinic-notes:${s.join(",")}`:`clinic-notes:${r}`,[s,r]);Dk({shouldSubscribe:a&&(s.length>0||!!r)&&!!i&&l&&c,channelName:T,postgresFilter:I,onPayload:E,logger:yy})}const j5=ya("NotesRealtime");function L4(r){return r.sort((i,a)=>new Date(a.createdAt).getTime()-new Date(i.createdAt).getTime())}function B5(r,i){const a=r.findIndex(s=>s.id===i.id);if(a>=0){const s=r[a],l=new Date(s.createdAt).getTime();if(new Date(i.createdAt).getTime()>=l){const d=[...r];return d[a]=i,d}return r}return L4([i,...r])}function aG(r){const{userIdRef:i,setNotes:a,setClinicNotes:s,realtimeClinicId:l,realtimeUserId:c,realtimeAuthenticated:d,realtimeVisibleClinicIds:f,isPageVisible:m,isNotePanelOpen:g}=r,v=D.useCallback(k=>{s(E=>B5(E,k))},[s]),y=D.useCallback(k=>{s(E=>E.filter(I=>I.id!==k))},[s]),A=D.useCallback(k=>{a(I=>B5(I,k));const E=i.current;if(E&&E!=="guest"){const I=new Date().toISOString();nf({id:k.id,user_id:E,clinic_id:k.clinicId??null,clinic_name:k.clinicName??null,timestamp:k.createdAt,display_name:k.authorName||null,rank:null,uic:null,algorithm_reference:null,hpi_encoded:k.encodedText||null,symptom_icon:k.symptomIcon||null,symptom_text:k.symptomText||null,disposition_type:k.dispositionType||null,disposition_text:k.dispositionText||null,preview_text:k.previewText||null,is_imported:k.source?.startsWith("external")??!1,originating_clinic_id:k.originating_clinic_id??null,visible_clinic_ids:k.visible_clinic_ids??[],source_device:k.source||null,created_at:k.createdAt,updated_at:I,deleted_at:null,_sync_status:"synced",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null}).catch(T=>{j5.warn("Failed to persist realtime personal note to IndexedDB:",T)})}},[i,a]),w=D.useCallback(k=>{a(E=>E.filter(I=>I.id!==k)),Vx(k).catch(E=>{j5.warn("Failed to delete realtime personal note from IndexedDB:",E)})},[a]);rG({clinicId:l,userId:c,isAuthenticated:d,visibleClinicIds:f,isPageVisible:m,isNotePanelOpen:g,onClinicUpsert:v,onClinicDelete:y,onPersonalUpsert:A,onPersonalDelete:w})}const Du=ya("NotesSync"),wy="adtmc_saved_notes";async function sG(r){try{const i=localStorage.getItem(wy);if(!i)return 0;const a=JSON.parse(i);if(!Array.isArray(a)||a.length===0)return localStorage.removeItem(wy),0;const s=await Fh(r),l=new Set(s.map(d=>d.id));let c=0;for(const d of a){if(!d.id||!d.encodedText||l.has(d.id))continue;const f=new Date().toISOString();await nf({id:d.id,user_id:r,clinic_id:null,clinic_name:null,timestamp:d.createdAt||f,display_name:null,rank:null,uic:null,algorithm_reference:null,hpi_encoded:d.encodedText||null,symptom_icon:d.symptomIcon||null,symptom_text:d.symptomText||null,disposition_type:d.dispositionType||null,disposition_text:d.dispositionText||null,preview_text:d.previewText||null,is_imported:d.source?.startsWith("external")??!1,originating_clinic_id:null,visible_clinic_ids:[],source_device:d.source||null,created_at:d.createdAt||f,updated_at:f,deleted_at:null,_sync_status:"pending",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null}),c++}return localStorage.removeItem(wy),Du.info(`Migrated ${c} notes from localStorage to IndexedDB`),c}catch(i){return Du.warn("localStorage migration failed:",i),0}}function oG(r){const{setNotes:i,setClinicNotes:a}=r,[s,l]=D.useState(R1()),[c,d]=D.useState(!1),[f,m]=D.useState(0),[g,v]=D.useState(0),[y,A]=D.useState(null),w=D.useRef(null),k=D.useRef(null),E=D.useRef(!1),I=D.useRef(null),[T,N]=D.useState(null),[j,B]=D.useState(null),[U,F]=D.useState(!1),[P,z]=D.useState([]),[V,L]=D.useState(0),Q=Qw();D.useEffect(()=>{const{data:{subscription:K}}=St.auth.onAuthStateChange(ie=>{ie==="SIGNED_OUT"&&(i([]),a([]),m(0),v(0),A(null),N(null),B(null),F(!1),z([]),w.current=null,k.current=null,E.current=!1),(ie==="SIGNED_IN"||ie==="SIGNED_OUT")&&L(ne=>ne+1)});return()=>K.unsubscribe()},[i,a]);const q=D.useCallback(async K=>{const ne=(await Gx(K)).map($=>ix($));L4(ne),i(ne);const J=ne.filter($=>$.sync_status==="pending").length;m(J);const te=ne.filter($=>$.sync_status==="error").length;v(te)},[i]),ee=D.useCallback(async(K,ie)=>{try{const ne=await tG(K,ie);L4(ne),a(ne)}catch(ne){Du.warn("Failed to fetch clinic notes:",ne)}},[a]);D.useEffect(()=>{let K=!1;async function ie(){try{const{data:{user:ne}}=await St.auth.getUser(),J=ne?.id||"guest";if(w.current=J,B(J),F(J!=="guest"),K)return;const te=await Ek();if(te>0&&Du.info(`Migrated ${te} v1 notes to v2 format`),await sG(J),K)return;if(J!=="guest"&&R1())try{if(d(!0),await U4(J),K)return;const{data:$}=await St.from("profiles").select("clinic_id").eq("id",J).single(),oe=$?.clinic_id??null;if(k.current=oe,K||N(oe),oe)try{const{data:we}=await St.from("clinics").select("child_clinic_ids").eq("id",oe).single(),be=[oe,...we?.child_clinic_ids||[]];K||z(be),S5(be).catch(Te=>{Du.warn("Failed to prefetch clinic encryption keys:",Te)})}catch{K||z([oe]),S5([oe]).catch(()=>{})}oe&&await ee(oe,J),K||A(new Date)}catch($){Du.warn("Initial sync failed, using local data:",$)}finally{K||d(!1)}if(K)return;await q(J),J!=="guest"&&(I.current=Mk(J,{onStatusChange:$=>{K||l($)},onSyncStart:()=>{K||d(!0)},onSyncComplete:()=>{K||(d(!1),A(new Date),q(J))},onReconcileComplete:()=>{K||q(J)},onClinicRefresh:async()=>{if(K)return;let $=k.current;if(!$)try{const{data:oe}=await St.from("profiles").select("clinic_id").eq("id",J).single();if($=oe?.clinic_id??null,k.current=$,$&&!K){N($);try{const{data:we}=await St.from("clinics").select("child_clinic_ids").eq("id",$).single();K||z([$,...we?.child_clinic_ids||[]])}catch{K||z([$])}}}catch{}$&&!K&&ee($,J)}})),E.current=!0}catch(ne){Du.error("Initialization failed:",ne),E.current=!0}}return ie(),()=>{K=!0,I.current&&(I.current(),I.current=null)}},[q,ee,V]),D.useEffect(()=>{const K=()=>l(!0),ie=()=>l(!1);return window.addEventListener("online",K),window.addEventListener("offline",ie),()=>{window.removeEventListener("online",K),window.removeEventListener("offline",ie)}},[]);const X=D.useRef(!0);D.useEffect(()=>{if(Q&&!X.current&&E.current){const K=w.current;if(K&&K!=="guest"&&R1()){q(K);const ie=k.current;ie&&ee(ie,K)}}X.current=Q},[Q,q,ee]);const ae=D.useCallback(async()=>{const K=w.current;if(!(!K||K==="guest"||!R1())){d(!0);try{await U4(K,()=>q(K)),await q(K);const ie=k.current;ie&&await ee(ie,K)}finally{d(!1)}}},[q,ee]);return{online:s,isSyncing:c,pendingCount:f,errorCount:g,lastSyncTime:y,userIdRef:w,clinicIdRef:k,initDone:E,refreshNotes:q,refreshClinicNotes:ee,triggerSync:ae,setPendingCount:m,setErrorCount:v,isPageVisible:Q,realtimeClinicId:T,realtimeUserId:j,realtimeAuthenticated:U,realtimeVisibleClinicIds:P,authVersion:V}}const Eh=ya("NotesCRUD");function lG(r){const{userIdRef:i,clinicIdRef:a,setNotes:s,setClinicNotes:l,setPendingCount:c,refreshNotes:d,refreshClinicNotes:f}=r,m=D.useCallback((w,k)=>{const E=i.current;if(!E)return{success:!1,error:"Not initialized yet. Please try again."};const I=crypto.randomUUID(),T={id:I,encodedText:w.encodedText,createdAt:k?.timestamp??new Date().toISOString(),symptomIcon:w.symptomIcon,symptomText:w.symptomText,dispositionType:w.dispositionType,dispositionText:w.dispositionText,previewText:w.previewText,source:w.source,sync_status:E==="guest"?"synced":"pending",authorId:E,authorName:null};s(j=>[T,...j]),E!=="guest"&&c(j=>j+1);const N=k?.originating_clinic_id!=null?{...w,originating_clinic_id:k.originating_clinic_id}:w;return Jq(N,I,k?.timestamp).then(j=>{s(B=>B.map(U=>U.id===I?j:U)),j.sync_status==="synced"&&E!=="guest"&&c(B=>Math.max(0,B-1))}).catch(j=>{Eh.error("Create note failed:",j),d(E)}),{success:!0,noteId:I}},[i,s,c,d]),g=D.useCallback((w,k,E=!1)=>{const I=i.current;if(!I)return{success:!1,error:"Not initialized yet."};const T={...k,...E?{createdAt:new Date().toISOString()}:{}};return s(N=>N.map(j=>j.id!==w?j:{...j,...T,sync_status:I==="guest"?"synced":"pending"})),I!=="guest"&&c(N=>N+1),Zq(w,T,I).then(N=>{N&&(s(j=>j.map(B=>B.id===w?N:B)),N.sync_status==="synced"&&I!=="guest"&&c(j=>Math.max(0,j-1)))}).catch(N=>{Eh.error("Update note failed:",N),d(I)}),{success:!0}},[i,s,c,d]),v=D.useCallback(w=>{const k=i.current;k&&(s(E=>E.filter(I=>I.id!==w)),Ok(w,k).catch(E=>{Eh.error("Delete note failed:",E),d(k)}))},[i,s,d]),y=D.useCallback(w=>{const k=a.current;let E;if(l(I=>(E=I.find(T=>T.id===w),I.filter(T=>T.id!==w))),E?.originating_clinic_id&&k&&E.originating_clinic_id!==k){iG(w,k).catch(I=>{Eh.error("Remove clinic visibility failed:",I),k&&f(k,i.current??void 0)});return}nG(w).catch(I=>{Eh.error("Delete clinic note failed:",I),k&&f(k,i.current??void 0)})},[i,a,l,f]),A=D.useCallback(()=>{const w=i.current;w&&(s([]),eG(w).catch(k=>{Eh.error("Clear all notes failed:",k),d(w)}))},[i,s,d]);return{saveNote:m,updateNote:g,deleteNote:v,deleteClinicNote:y,clearAllNotes:A}}function cG(r=!1){const[i,a]=D.useState([]),[s,l]=D.useState([]),c=oG({setNotes:a,setClinicNotes:l}),d=lG({userIdRef:c.userIdRef,clinicIdRef:c.clinicIdRef,setNotes:a,setClinicNotes:l,setPendingCount:c.setPendingCount,refreshNotes:c.refreshNotes,refreshClinicNotes:c.refreshClinicNotes});return aG({userIdRef:c.userIdRef,setNotes:a,setClinicNotes:l,realtimeClinicId:c.realtimeClinicId,realtimeUserId:c.realtimeUserId,realtimeAuthenticated:c.realtimeAuthenticated,realtimeVisibleClinicIds:c.realtimeVisibleClinicIds,isPageVisible:c.isPageVisible,isNotePanelOpen:r}),{notes:i,clinicNotes:s,saveNote:d.saveNote,updateNote:d.updateNote,deleteNote:d.deleteNote,deleteClinicNote:d.deleteClinicNote,clearAllNotes:d.clearAllNotes,isOnline:c.online,isSyncing:c.isSyncing,pendingCount:c.pendingCount,errorCount:c.errorCount,lastSyncTime:c.lastSyncTime,triggerSync:c.triggerSync}}function dG(){return{restoreNote:D.useCallback(i=>{const a=Sw(i.encodedText);if(!a)return{success:!1,error:"Could not parse encoded text"};const s=l7(a.symptomCode);if(!s?.length)return{success:!1,error:`Algorithm ${a.symptomCode} not found`};const l=c7(a.symptomCode);if(!l)return{success:!1,error:`Symptom ${a.symptomCode} not found in categories`};const{cardStates:c,disposition:d}=d7(s,a);return d?{success:!0,writeNoteData:{disposition:d,algorithmOptions:s,cardStates:c,selectedSymptom:{icon:l.symptom.icon||"",text:l.symptom.text||""}},category:l.category,symptom:l.symptom,hpiText:a.hpiText||"",peText:a.peText||"",timestamp:a.timestamp}:{success:!1,error:"Could not determine disposition from saved note"}},[])}}function uG({enabled:r,viewDepth:i,onSwipeBack:a,threshold:s=al.SWIPE_BACK_THRESHOLD,velocityThreshold:l=al.FLING_VELOCITY}){const c=D.useRef(!1),d=Ex(({active:f,movement:[m],velocity:[g],direction:[v],tap:y})=>{if(!(!r||y))if(f)c.current=!1;else{if(c.current)return;(Math.max(0,m)>s||g>l&&v>0)&&i>0&&(c.current=!0,a())}},{enabled:r&&i>0,axis:"x",filterTaps:!0,pointer:{touch:!0},from:()=>[0,0]});return{touchHandlers:r?d():{}}}const P5=ya("ActiveNote");function fG({navigation:r,notesStorage:i,restoreNote:a,initialViewParam:s,postUpdateNav:l}){const[c,d]=D.useState(s==="import"?"scanning":void 0),f=D.useRef(!1),[m,g]=D.useState(!1),[v,y]=D.useState(!1),[A,w]=D.useState(!1),[k,E]=D.useState(null),[I,T]=D.useState("main"),[N,j]=D.useState(null),[B,U]=D.useState(null),F=D.useCallback(()=>U(null),[]),[P,z]=D.useState(null),[V,L]=D.useState(null),[Q,q]=D.useState(null),ee=D.useRef(null),[X,ae]=D.useState(null),[K,ie]=D.useState("fresh");D.useEffect(()=>{l==="release-notes"?(T("release-notes"),r.setShowSettings(!0)):s==="mynotes"?(T("my-notes"),r.setShowSettings(!0)):s==="import"?r.setShowNoteImport(!0):s==="training"&&(T("training"),r.setShowSettings(!0))},[]),D.useEffect(()=>{r.showNoteImport?f.current=!0:f.current&&c&&d(void 0)},[r.showNoteImport,c]),D.useEffect(()=>{r.isWriteNoteVisible||L(null)},[r.isWriteNoteVisible]),D.useEffect(()=>{r.showQuestionCard||(z(null),L(null),q(null),ae(null),ie("fresh"))},[r.showQuestionCard]);const ne=D.useCallback(Qe=>{if(P&&V){const Xe=a({id:P,encodedText:V,createdAt:"",symptomIcon:"",symptomText:"",dispositionType:"",dispositionText:"",previewText:"",sync_status:"synced",authorId:"",authorName:null});if(Xe.success&&(Xe.hpiText||Xe.peText)){r.showWriteNote({...Qe,initialHpiText:Xe.hpiText,initialPeText:Xe.peText});return}}r.showWriteNote(Qe)},[P,V,a,r]),J=D.useCallback(Qe=>{const Ge=i.saveNote({encodedText:Qe.encodedText,previewText:Qe.previewText,symptomIcon:Qe.symptomIcon,symptomText:Qe.symptomText,dispositionType:Qe.dispositionType,dispositionText:Qe.dispositionText});return Ge.success&&Ge.noteId?(z(Ge.noteId),L(Qe.encodedText),q("device"),ee.current=Ge.noteId,!0):(U(Ge.error||"Failed to save note. Storage may be full."),!1)},[i]),te=D.useCallback(Qe=>{i.deleteNote(Qe),z(null),L(null)},[i]),$=D.useCallback((Qe,Ge)=>{const Xe=i.updateNote(Qe,{encodedText:Ge.encodedText,previewText:Ge.previewText,symptomIcon:Ge.symptomIcon,symptomText:Ge.symptomText,dispositionType:Ge.dispositionType,dispositionText:Ge.dispositionText,source:void 0},!0);return Xe.success?(L(Ge.encodedText),q("device"),!0):(U(Xe.error||"Failed to update note. Storage may be full."),!1)},[i]),oe=D.useCallback(()=>{const Qe=ee.current;r.closeWriteNote(),w(!0),setTimeout(()=>w(!1),Li.FEEDBACK_DURATION),setTimeout(()=>{r.resetToMain(),E(Qe),T("my-notes"),r.setShowSettings(!0)},Li.SLIDE_ANIMATION)},[r]),we=D.useCallback((Qe,Ge)=>{const Xe=a(Qe);if(!Xe.success||!Xe.writeNoteData||!Xe.symptom||!Xe.category){P5.warn("Failed to restore note:",Xe.error);return}z(Qe.id),L(Qe.encodedText),q(Qe.source||"device"),ie(`restored-${Qe.id}`),ae({cardStates:Xe.writeNoteData.cardStates,disposition:Xe.writeNoteData.disposition}),r.handleNavigation({type:"CC",id:Xe.symptom.id,icon:Xe.symptom.icon,text:Xe.symptom.text,data:{categoryId:Xe.category.id,symptomId:Xe.symptom.id,categoryRef:Xe.category,symptomRef:Xe.symptom}}),r.setShowSettings(!1);const Je=Ge?.(Xe),dt=Je?{...Xe.writeNoteData,...Je}:Xe.writeNoteData;r.showWriteNote(dt)},[a,r]),be=D.useCallback(Qe=>{we(Qe,Ge=>({initialPage:3,initialHpiText:Ge.hpiText||"",initialPeText:Ge.peText||"",timestamp:Ge.timestamp}))},[we]),Te=D.useCallback(Qe=>{const Ge=i.notes.find(Rt=>n4(Rt.encodedText,Qe.encodedText));if(Ge){r.setShowNoteImport(!1),y(!0),setTimeout(()=>y(!1),Li.FEEDBACK_DURATION),setTimeout(()=>{E(Ge.id),T("my-notes"),r.setShowSettings(!0)},Li.SLIDE_ANIMATION);return}if(i.clinicNotes.find(Rt=>n4(Rt.encodedText,Qe.encodedText))){r.setShowNoteImport(!1),y(!0),setTimeout(()=>y(!1),Li.FEEDBACK_DURATION);return}const Je=Qe.preview,dt=Je?.authorLabel,vt=dt&&dt!=="Unknown"?`external:${dt}`:"external",_t={id:"",encodedText:Qe.encodedText,createdAt:new Date().toISOString(),symptomIcon:Je?.symptomIcon||"",symptomText:Je?.symptomText||"",dispositionType:Je?.dispositionType||"",dispositionText:Je?.dispositionText||"",previewText:Qe.decodedText.slice(0,200),source:vt,sync_status:"pending",authorId:"",authorName:null},xt=a(_t);if(!xt.success||!xt.writeNoteData||!xt.symptom||!xt.category){P5.warn("Failed to restore imported note:",xt.error);return}const bt=xt.writeNoteData.disposition,kt=Je?.clinicId??null,Pt=i.saveNote({encodedText:Qe.encodedText,previewText:Qe.decodedText.slice(0,200),symptomIcon:xt.symptom.icon||"",symptomText:xt.symptom.text||"Imported Note",dispositionType:bt.type,dispositionText:bt.text,source:vt},{originating_clinic_id:kt,timestamp:Je?.timestamp?.toISOString()});if(!Pt.success){U(Pt.error||"Failed to import note. Storage may be full."),r.setShowNoteImport(!1);return}r.setShowNoteImport(!1),g(!0),setTimeout(()=>g(!1),Li.FEEDBACK_DURATION),setTimeout(()=>{E(null),T("my-notes"),r.setShowSettings(!0)},Li.SLIDE_ANIMATION)},[a,i,r]),ye=D.useCallback(Qe=>{T("training"),j(Qe)},[]),tt=D.useCallback(()=>{T("main"),E(null),j(null)},[]);return{activeNoteId:P,activeNoteEncodedText:V,activeNoteSource:Q,algorithmKeySuffix:K,restoredAlgorithmState:X,showImportSuccessModal:m,showImportDuplicateModal:v,showNoteSavedModal:A,importInitialView:c,settingsInitialPanel:I,myNotesInitialSelectedId:k,initialTrainingTaskId:N,storageError:B,clearStorageError:F,handleExpandNote:ne,handleNoteSave:J,handleNoteDelete:te,handleNoteUpdate:$,handleAfterSave:oe,handleViewNote:be,handleImportSuccess:Te,resetSettingsPanel:tt,openTrainingTask:ye}}function hG(r={}){const{immediate:i=!1,onNeedRefresh:a,onOfflineReady:s,onRegistered:l,onRegisteredSW:c,onRegisterError:d}=r;let f,m,g;const v=async(A=!0)=>{await m,g?.()};async function y(){if("serviceWorker"in navigator){if(f=await jw(async()=>{const{Workbox:A}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:A}},[]).then(({Workbox:A})=>new A("/test2/sw.js",{scope:"/test2/",type:"classic"})).catch(A=>{d?.(A)}),!f)return;g=()=>{f?.messageSkipWaiting()};{let A=!1;const w=()=>{A=!0,f?.addEventListener("controlling",k=>{k.isUpdate&&window.location.reload()}),a?.()};f.addEventListener("installed",k=>{typeof k.isUpdate>"u"?typeof k.isExternal<"u"&&k.isExternal?w():!A&&s?.():k.isUpdate||s?.()}),f.addEventListener("waiting",w)}f.register({immediate:i}).then(A=>{c?c("/test2/sw.js",A):l?.(A)}).catch(A=>{d?.(A)})}}return m=y(),v}const W1=ya("PWA"),pG=300*1e3,mG=3600*1e3;function gG(){const[r,i]=D.useState(!1),[a,s]=D.useState(!1),[l,c]=D.useState(!1),[d,f]=D.useState(),m=D.useRef(0),[g,v]=D.useState(null),y=D.useRef(null);D.useEffect(()=>{const I=hG({immediate:!0,async onNeedRefresh(){W1.info("New content available, checking version...");try{const T=await fetch(`/test2/version.json?t=${Date.now()}`),{version:N}=await T.json();if(N==="2.6.3"){W1.info("Same version, applying update silently"),y.current&&await y.current(!0);return}W1.info(`New version ${N} (current: 2.6.3), prompting user`)}catch(T){W1.warn("Could not fetch version.json, showing update prompt",T)}i(!0)},onOfflineReady(){W1.info("App ready to work offline"),s(!0)},onRegistered(T){W1.info("Service Worker registered:",T?.scope),f(T),T&&(m.current=window.setInterval(()=>{W1.debug("Checking for updates..."),T.update()},pG))},onRegisterError(T){W1.error("Service Worker registration failed:",T)}});return y.current=I,v(()=>I),()=>{m.current&&clearInterval(m.current)}},[]);const A=D.useCallback(async()=>{if(g){W1.info("Updating to new version..."),c(!0);try{localStorage.removeItem("updateDismissed")}catch{}try{localStorage.setItem("postUpdateNav","release-notes")}catch{}await g(!0)}},[g]),w=D.useCallback(()=>{d&&(W1.debug("Manual update check..."),d.update())},[d]),k=D.useRef(0),E=D.useCallback(()=>{i(!1);try{localStorage.setItem("updateDismissed",Date.now().toString())}catch{}k.current&&clearTimeout(k.current),k.current=window.setTimeout(()=>{try{localStorage.removeItem("updateDismissed")}catch{}k.current=0},mG)},[]);return{updateAvailable:r,offlineReady:a,skipWaiting:A,checkForUpdate:w,dismissUpdate:E,registration:d,isUpdating:l,appVersion:"2.6.3"}}const vG=()=>{const{updateAvailable:r,offlineReady:i,skipWaiting:a,dismissUpdate:s,isUpdating:l,appVersion:c}=gG(),[d,f]=D.useState(!1),[m,g]=D.useState(!1),[v,y]=D.useState(!1);D.useEffect(()=>{try{const k=localStorage.getItem("updateDismissed");if(k){const E=parseInt(k,10);!isNaN(E)&&Date.now()-E<3600*1e3?g(!0):localStorage.removeItem("updateDismissed")}}catch{}},[]),D.useEffect(()=>{f(!!(r&&!m))},[r,m]),D.useEffect(()=>{if(i){y(!0);const k=setTimeout(()=>y(!1),Li.OFFLINE_TOAST_DURATION);return()=>clearTimeout(k)}},[i]);const A=()=>{a()},w=()=>{f(!1),g(!0),s()};return v&&!d?x.jsx("div",{className:"fixed inset-x-0 bottom-0 z-50 flex justify-center p-4 pointer-events-none animate-slideInUp",children:x.jsxs("div",{className:"bg-themewhite rounded-2xl shadow-2xl border border-tertiary/10 px-6 py-4 flex items-center gap-3 pointer-events-auto backdrop-blur-xl",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-themegreen/15 flex items-center justify-center flex-shrink-0",children:x.jsx(J_,{className:"h-5 w-5 text-themegreen"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-primary",children:"Ready for Offline Use"}),x.jsx("p",{className:"text-xs text-tertiary/60",children:"App cached successfully"})]})]})}):d?x.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none",children:[x.jsx("div",{className:"absolute inset-0 bg-black/10 pointer-events-auto sm:bg-black/15 transition-opacity",onClick:w}),x.jsx("div",{className:"relative w-full sm:w-auto sm:max-w-sm mx-0 sm:mx-4 mb-0 sm:mb-0 pointer-events-auto animate-slideInUp",children:x.jsxs("div",{className:"bg-themewhite rounded-t-2xl sm:rounded-2xl shadow-2xl border border-tertiary/10 overflow-hidden backdrop-blur-xl",children:[x.jsx("div",{className:"h-1 bg-themeblue2"}),x.jsxs("div",{className:"px-5 py-4",children:[x.jsxs("div",{className:"flex items-start justify-between gap-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-themeblue2/15 flex items-center justify-center flex-shrink-0",children:x.jsx(Yu,{className:"h-5 w-5 text-themeblue2"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-semibold text-primary",children:"Update Available"}),x.jsxs("p",{className:"text-xs text-tertiary mt-0.5",children:["Version ",c," is ready to install"]})]})]}),x.jsx("button",{onClick:w,className:"p-1.5 rounded-lg hover:bg-themewhite2 active:scale-95 transition-all text-tertiary","aria-label":"Dismiss update notification",children:x.jsx(ms,{className:"h-4 w-4"})})]}),x.jsxs("div",{className:"flex items-center gap-2.5 mt-4",children:[x.jsx("button",{onClick:w,className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-tertiary bg-themewhite2 hover:bg-themegray1/40 active:scale-[0.97] transition-all",children:"Later"}),x.jsx("button",{onClick:A,disabled:l,className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-white bg-themeblue2 hover:opacity-90 active:scale-[0.97] transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:l?x.jsxs(x.Fragment,{children:[x.jsx(tS,{className:"h-3.5 w-3.5 animate-spin"}),"Updating"]}):x.jsxs(x.Fragment,{children:[x.jsx(Yu,{className:"h-3.5 w-3.5"}),"Update Now"]})})]})]})]})})]}):null},Ay="installPromptDismissed",xG=10080*60*1e3;let Lh=null;const z4=new Set;typeof window<"u"&&window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),Lh=r,z4.forEach(i=>i(Lh))});function bG(){const[r,i]=D.useState(null),[a,s]=D.useState(!1),[l,c]=D.useState(!1),[d,f]=D.useState(!1);D.useEffect(()=>{const v=navigator.userAgent,y=/iPad|iPhone|iPod/.test(v)&&!window.MSStream;if(f(y),window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0)return;try{const k=localStorage.getItem(Ay);if(k){const E=parseInt(k,10);if(Date.now()-E<xG)return;localStorage.removeItem(Ay)}}catch{}if(y){s(!0);return}if(Lh){i(Lh),s(!0);return}const w=k=>{i(k),s(!0)};return z4.add(w),()=>{z4.delete(w)}},[]),D.useEffect(()=>{const v=()=>{s(!1),i(null),Lh=null};return window.addEventListener("appinstalled",v),()=>window.removeEventListener("appinstalled",v)},[]);const m=D.useCallback(async()=>{if(!r)return;c(!0),r.prompt();const{outcome:v}=await r.userChoice;v==="accepted"&&s(!1),i(null),Lh=null,c(!1)},[r]),g=D.useCallback(()=>{s(!1);try{localStorage.setItem(Ay,Date.now().toString())}catch{}},[]);return{showPrompt:a,install:m,dismiss:g,isInstalling:l,isIOS:d}}const yG=()=>{const{showPrompt:r,install:i,dismiss:a,isInstalling:s,isIOS:l}=bG();return r?x.jsxs("div",{className:"fixed inset-0 z-51 flex items-end sm:items-center justify-center pointer-events-none",children:[x.jsx("div",{className:"absolute inset-0 bg-black/10 pointer-events-auto sm:bg-black/15 transition-opacity",onClick:a}),x.jsx("div",{className:"relative w-full sm:w-auto sm:max-w-sm mx-0 sm:mx-4 mb-0 sm:mb-0 pointer-events-auto animate-slideInUp",children:x.jsxs("div",{className:"bg-themewhite rounded-t-2xl sm:rounded-2xl shadow-2xl border border-tertiary/10 overflow-hidden backdrop-blur-xl",children:[x.jsx("div",{className:"h-1 bg-themegreen"}),x.jsxs("div",{className:"px-5 py-4",children:[x.jsxs("div",{className:"flex items-start justify-between gap-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-themegreen/15 flex items-center justify-center shrink-0",children:x.jsx(Yu,{className:"h-5 w-5 text-themegreen"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-normal text-primary",children:"Install App"}),x.jsx("p",{className:"text-xs text-tertiary mt-0.5",children:l?"Add to your home screen for quick access":"Install for offline access & quick launch"})]})]}),x.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-themewhite2 active:scale-95 transition-all text-tertiary","aria-label":"Dismiss install prompt",children:x.jsx(ms,{className:"h-4 w-4"})})]}),l?x.jsxs("div",{className:"mt-4 px-1",children:[x.jsxs("p",{className:"text-xs text-tertiary leading-relaxed",children:["Tap ",x.jsx(w_,{className:"inline h-3.5 w-3.5 text-themeblue2 -mt-0.5"})," in your browser toolbar, then select ",x.jsx("span",{className:"font-medium text-primary",children:'"Add to Home Screen"'})]}),x.jsx("div",{className:"flex justify-end mt-3",children:x.jsx("button",{onClick:a,className:"px-4 py-2 rounded-xl text-sm font-medium text-tertiary bg-themewhite2 hover:bg-themegray1/40 active:scale-[0.97] transition-all",children:"Got it"})})]}):x.jsxs("div",{className:"flex items-center gap-2.5 mt-4",children:[x.jsx("button",{onClick:a,className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-tertiary bg-themewhite2 hover:bg-themegray1/40 active:scale-[0.97] transition-all",children:"Not Now"}),x.jsx("button",{onClick:i,disabled:s,className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-white bg-themegreen hover:opacity-90 active:scale-[0.97] transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:s?x.jsxs(x.Fragment,{children:[x.jsx(Yu,{className:"h-3.5 w-3.5 animate-bounce"}),"Installing"]}):x.jsxs(x.Fragment,{children:[x.jsx(Yu,{className:"h-3.5 w-3.5"}),"Install"]})})]})]})]})})]}):null},wG=({message:r,onDismiss:i})=>{const[a,s]=D.useState(!1);return D.useEffect(()=>{if(r){requestAnimationFrame(()=>s(!0));const l=setTimeout(()=>{s(!1),setTimeout(i,Li.SLIDE_ANIMATION)},5e3);return()=>clearTimeout(l)}else s(!1)},[r,i]),r?x.jsx("div",{className:`fixed inset-x-0 bottom-0 z-[70] flex justify-center p-4 pointer-events-none transition-all duration-300 ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:x.jsxs("div",{className:"bg-themewhite rounded-2xl shadow-2xl border border-themeredred/20 px-6 py-4 flex items-center gap-3 pointer-events-auto backdrop-blur-xl cursor-pointer max-w-sm",onClick:()=>{s(!1),setTimeout(i,Li.SLIDE_ANIMATION)},role:"alert",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-themeredred/15 flex items-center justify-center flex-shrink-0",children:x.jsx(Tc,{className:"h-5 w-5 text-themeredred"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-primary",children:"Storage Error"}),x.jsx("p",{className:"text-xs text-tertiary/80",children:r})]})]})}):null},wd=[{id:"doc",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themeredred)"}),x.jsx("rect",{x:"16",y:"10",width:"8",height:"20",rx:"2",fill:"rgba(255,255,255,1)"}),x.jsx("rect",{x:"10",y:"16",width:"20",height:"8",rx:"2",fill:"rgba(255,255,255,1)"})]})},{id:"dino",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themeblue3)"}),x.jsx("path",{d:"M10 14c0-3 3-6 8-6h6c4 0 7 3 7 7v8c0 3-2 5-5 5H15c-3 0-5-2-5-5V14z",fill:"rgba(255,255,255,0.9)"}),x.jsx("polygon",{points:"13,8 15,13 11,13",fill:"rgba(255,255,255,0.8)"}),x.jsx("polygon",{points:"19,5 21,11 17,11",fill:"rgba(255,255,255,0.8)"}),x.jsx("polygon",{points:"25,6 27,12 23,12",fill:"rgba(255,255,255,0.8)"}),x.jsx("circle",{cx:"25",cy:"16",r:"2.5",fill:"var(--color-themeblue3)"}),x.jsx("circle",{cx:"25.5",cy:"15.5",r:"1",fill:"rgba(255,255,255,0.5)"}),x.jsx("ellipse",{cx:"28",cy:"22",rx:"3",ry:"1.5",fill:"var(--color-themeblue3)",opacity:"0.4"})]})},{id:"medic",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themeredred)"}),x.jsx("path",{d:"M20 8 L30 13 V22 C30 27 25 32 20 34 C15 32 10 27 10 22 V13 Z",fill:"rgba(255,255,255,1)"}),x.jsx("rect",{x:"18",y:"15",width:"4",height:"12",rx:"1",fill:"var(--color-themeredred)"}),x.jsx("rect",{x:"14",y:"19",width:"12",height:"4",rx:"1",fill:"var(--color-themeredred)"})]})},{id:"drip",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themepurple)"}),x.jsx("path",{d:"M8 16c0-5 5-9 12-9s12 4 12 9v4c0 3-5 5-12 5S8 23 8 20v-4z",fill:"rgba(255,255,255,0.9)"}),x.jsx("ellipse",{cx:"13",cy:"27",rx:"2",ry:"4",fill:"rgba(255,255,255,1)"}),x.jsx("ellipse",{cx:"20",cy:"28",rx:"2.5",ry:"4",fill:"rgba(255,255,255,1)"}),x.jsx("ellipse",{cx:"27",cy:"27",rx:"2",ry:"4",fill:"rgba(255,255,255,1)"}),x.jsx("circle",{cx:"16",cy:"16",r:"2.5",fill:"var(--color-themepurple)"}),x.jsx("circle",{cx:"24",cy:"16",r:"2.5",fill:"var(--color-themepurple)"}),x.jsx("circle",{cx:"16.5",cy:"15.5",r:"1",fill:"rgba(255,255,255,0.5)"}),x.jsx("circle",{cx:"24.5",cy:"15.5",r:"1",fill:"rgba(255,255,255,0.5)"}),x.jsx("ellipse",{cx:"20",cy:"20",rx:"3",ry:"1.5",fill:"var(--color-themepurple)",opacity:"0.3"})]})},{id:"sol",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themeblue3)"}),x.jsxs("g",{transform:"translate(20,20)",children:[x.jsx("rect",{x:"-3",y:"-11",width:"6",height:"22",rx:"1.5",fill:"rgba(255,255,255,1)"}),x.jsx("rect",{x:"-3",y:"-11",width:"6",height:"22",rx:"1.5",fill:"rgba(255,255,255,1)",transform:"rotate(60)"}),x.jsx("rect",{x:"-3",y:"-11",width:"6",height:"22",rx:"1.5",fill:"rgba(255,255,255,1)",transform:"rotate(120)"})]})]})},{id:"bub",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themegreen)"}),x.jsx("path",{d:"M9 19c0-5 5-10 11-10s11 5 11 10v4c0 5-5 9-11 9S9 28 9 23v-4z",fill:"rgba(255,255,255,0.9)"}),x.jsx("circle",{cx:"14",cy:"10",r:"3",fill:"rgba(255,255,255,0.8)"}),x.jsx("circle",{cx:"22",cy:"7",r:"3.5",fill:"rgba(255,255,255,0.8)"}),x.jsx("circle",{cx:"29",cy:"12",r:"2.5",fill:"rgba(255,255,255,0.8)"}),x.jsx("circle",{cx:"23",cy:"19",r:"3",fill:"var(--color-themegreen)"}),x.jsx("circle",{cx:"23.5",cy:"18.5",r:"1.2",fill:"rgba(255,255,255,0.5)"}),x.jsx("ellipse",{cx:"14",cy:"23",rx:"3",ry:"1.5",fill:"var(--color-themegreen)",opacity:"0.3"})]})},{id:"caduceus",svg:x.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"var(--color-themepurple)"}),x.jsx("rect",{x:"19",y:"9",width:"2",height:"23",rx:"1",fill:"rgba(255,255,255,1)"}),x.jsx("circle",{cx:"20",cy:"9",r:"2.5",fill:"rgba(255,255,255,1)"}),x.jsx("path",{d:"M13 12 L17 14",stroke:"rgba(255,255,255,0.9)",strokeWidth:"2",strokeLinecap:"round"}),x.jsx("path",{d:"M27 12 L23 14",stroke:"rgba(255,255,255,0.9)",strokeWidth:"2",strokeLinecap:"round"}),x.jsx("path",{d:"M20 15 C15 17 15 20 20 22 C25 24 25 27 20 29",stroke:"rgba(255,255,255,0.85)",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),x.jsx("path",{d:"M20 15 C25 17 25 20 20 22 C15 24 15 27 20 29",stroke:"rgba(255,255,255,0.85)",strokeWidth:"2",fill:"none",strokeLinecap:"round"})]})}],AG=ya("ProfileAvatar"),ju="adtmc_profile_avatar",R3="adtmc_profile_custom_avatar";function SG(){try{const i=localStorage.getItem(ju);if(i==="custom"||i&&wd.some(a=>a.id===i))return i}catch{}const r=wd[Math.floor(Math.random()*wd.length)].id;try{localStorage.setItem(ju,r)}catch{}return r}function kG(){try{return localStorage.getItem(R3)}catch{return null}}function x3(r,i){St.from("profiles").update({avatar_id:i}).eq("id",r).then(({error:a})=>{a&&AG.error("Failed to sync avatar:",a.message)})}function CG(r,i=160){return new Promise((a,s)=>{const l=new FileReader;l.onload=c=>{const d=new Image;d.onload=()=>{const f=document.createElement("canvas");f.width=i,f.height=i;const m=f.getContext("2d");if(!m){s(new Error("Canvas not supported"));return}const g=Math.min(d.width,d.height),v=(d.width-g)/2,y=(d.height-g)/2;m.drawImage(d,v,y,g,g,0,0,i,i),a(f.toDataURL("image/jpeg",.8))},d.onerror=()=>s(new Error("Failed to load image")),d.src=c.target?.result},l.onerror=()=>s(new Error("Failed to read file")),l.readAsDataURL(r)})}function EG(r){const[i,a]=D.useState(SG),[s,l]=D.useState(kG),c=D.useRef(null),d=Qw(),f=i==="custom"&&s!==null,m=wd.find(A=>A.id===i)??wd[0];D.useEffect(()=>{!r||c.current===r||(c.current=r,St.from("profiles").select("avatar_id").eq("id",r).single().then(({data:A})=>{const w=A?.avatar_id;if(!w){x3(r,i);return}if(wd.some(k=>k.id===w)){a(w);try{localStorage.setItem(ju,w)}catch{}}}))},[r,i]),D.useEffect(()=>{if(!r||!d)return;const A=St.channel(`profile-avatar:${r}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${r}`},w=>{const k=w.new.avatar_id;k&&a(E=>{if(E===k)return E;try{localStorage.setItem(ju,k)}catch{}if(k!=="custom"){try{localStorage.removeItem(R3)}catch{}l(null)}return k})}).subscribe();return()=>{St.removeChannel(A)}},[r,d]);const g=D.useCallback(A=>{a(A);try{localStorage.setItem(ju,A)}catch{}r&&x3(r,A)},[r]),v=D.useCallback(A=>{try{localStorage.setItem(R3,A),localStorage.setItem(ju,"custom")}catch{return}l(A),a("custom"),r&&x3(r,"custom")},[r]),y=D.useCallback(()=>{try{localStorage.removeItem(R3)}catch{}l(null);const A=wd[0].id;a(A);try{localStorage.setItem(ju,A)}catch{}r&&x3(r,A)},[r]);return{currentAvatar:m,setAvatar:g,avatarList:wd,customImage:s,isCustom:f,setCustomImage:v,clearCustomImage:y}}function jk(r,i=!0){const a=D.useRef(null),s=D.useCallback(d=>{if(!i||!r||d.target.closest('button, textarea, input, select, [role="checkbox"], [role="button"], [role="slider"]'))return;const m=d.touches[0],g=d.currentTarget.getBoundingClientRect().left;m.clientX-g>al.EDGE_ZONE||(a.current={startX:m.clientX,startY:m.clientY,lastX:m.clientX,locked:null})},[i,r]),l=D.useCallback(d=>{const f=a.current;if(!f)return;const m=d.touches[0],g=m.clientX-f.startX,v=m.clientY-f.startY;if(f.locked===null){if(Math.abs(g)<al.DIRECTION_LOCK&&Math.abs(v)<al.DIRECTION_LOCK)return;if(f.locked=Math.abs(g)>Math.abs(v),!f.locked){a.current=null;return}}f.locked&&(f.lastX=m.clientX)},[]),c=D.useCallback(()=>{const d=a.current;a.current=null,!(!d||d.locked!==!0)&&d.lastX-d.startX>al.SWIPE_BACK_THRESHOLD&&r?.()},[r]);return{onTouchStart:s,onTouchMove:l,onTouchEnd:c}}const Bk=r=>{try{const i=new Date(r),a=i.getDate().toString().padStart(2,"0"),s=i.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),l=i.getFullYear().toString().slice(2),c=i.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});return`${a}${s}${l} ${c}`}catch{return"Unknown date"}};function _G(r){try{const i=new Date(r),a=i.getDate().toString().padStart(2,"0"),s=i.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),l=i.getFullYear().toString().slice(2);return`${a} ${s} ${l}`}catch{return"Unknown"}}function IG(r,i){const a=new Map;for(const s of r){const l=new Date(s.createdAt),c=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`;a.has(c)||a.set(c,{label:_G(s.createdAt),notes:[]}),a.get(c).notes.push(s)}for(const s of a.values())s.notes.sort((l,c)=>{const d=new Date(c.createdAt).getTime()-new Date(l.createdAt).getTime();if(d!==0)return d;if(i){const f=l.clinicName===i?0:1,m=c.clinicName===i?0:1;return f-m}return 0});return Array.from(a.entries()).sort(([s],[l])=>l.localeCompare(s)).map(([s,{label:l,notes:c}])=>({key:s,label:l,notes:c}))}const Pk=({syncStatus:r,authorName:i,clinicName:a})=>{const s=r==="pending",l=r==="error",c=l?"error":s?"pending":"saved",d=s||l?kE:AE,f=l?"text-themeredred/70 bg-themeredred/8":s?"text-themeyellow bg-themeyellowlow/10":"text-themegreen/80 bg-themegreen/8";return x.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] font-medium px-1.5 py-0.5 rounded-full shrink-0 ${f}`,"aria-label":`${c}, authored by ${i}${a?`, from ${a}`:""}`,children:[x.jsx(d,{size:9,className:"shrink-0"}),x.jsx("span",{children:c}),x.jsx("span",{className:"opacity-50",children:""}),x.jsx("span",{className:"truncate max-w-20",children:i}),a&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"opacity-50",children:""}),x.jsx("span",{className:"truncate max-w-24 opacity-70",children:a})]})]})},NG=({note:r,isSelected:i,authorLabel:a,clinicName:s})=>x.jsxs("div",{className:"flex items-center gap-3 px-3 py-3",children:[i&&x.jsx("div",{className:"shrink-0",children:x.jsx(rS,{size:20,className:"text-themeblue3"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-primary truncate",children:r.symptomText||"Note"}),x.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[x.jsx("p",{className:"text-xs text-tertiary/60",children:Bk(r.createdAt)}),x.jsx(Pk,{syncStatus:r.sync_status,authorName:a,clinicName:s})]})]}),r.dispositionType&&x.jsx("span",{className:`text-[10px] font-medium px-2 py-1 rounded-full shrink-0 ${cf(r.dispositionType).dispositionBadge}`,children:r.dispositionType})]}),Ec=({icon:r,label:i,bgClass:a,textClass:s,onClick:l,ariaLabel:c})=>x.jsxs("button",{onClick:l,className:"flex flex-col items-center justify-center gap-1 active:scale-95 transition-transform","aria-label":c||i,children:[x.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a}`,children:r}),x.jsx("span",{className:`text-[10px] ${s??"font-normal text-themeyellowlow"}`,children:i})]}),_h=148,Ih=72,F5=60,TG=({note:r,onView:i,onCopy:a,onShare:s,onDelete:l,isSelected:c,onToggleSelect:d,authorLabel:f,clinicName:m,copyLabel:g,shareLabel:v,readOnly:y})=>{const[A,w]=D.useState(0),[k,E]=D.useState(!1),[I,T]=D.useState(null),[N,j]=D.useState(!1),B=D.useRef(0);D.useEffect(()=>()=>{B.current&&clearTimeout(B.current)},[]);const U=D.useCallback(()=>{w(0),T(null),j(!1)},[]),F=Math.min(Math.max(A/_h,0),1),P=Math.min(Math.max(-A/Ih,0),1),z=Pu({opacity:F,scale:.5+F*.5,immediate:k,config:{tension:300,friction:22}}),V=Pu({opacity:P,scale:.5+P*.5,immediate:k,config:{tension:300,friction:22}}),L=ee=>({opacity:ee.opacity,transform:ee.scale.to(X=>`scale(${X})`)}),Q=Ex(({active:ee,first:X,movement:[ae],tap:K,memo:ie})=>{if(K)return ie;const ne=X?A:ie??0;let J=ne+ae;if(J>_h){const te=J-_h;J=_h+te*.3}else if(!y&&J<-Ih){const te=Math.abs(J)-Ih;J=-(Ih+te*.3)}else y&&J<0&&(J=J*.15);return ee?(E(!0),w(J)):(E(!1),J>F5?(w(_h),T("left")):!y&&J<-F5?(w(-Ih),T("right")):(w(0),T(null))),ne},{axis:"x",filterTaps:!0,pointer:{touch:!0}}),q=D.useCallback(()=>{if(I){U();return}d(r.id)},[I,U,d,r.id]);return x.jsxs("div",{className:"relative mb-2 rounded-lg overflow-hidden",children:[(A>0||I==="left")&&x.jsxs("div",{className:"absolute inset-y-0 left-0 flex items-center gap-1 pl-2 pr-1",style:{width:_h},children:[x.jsx(Z1.div,{style:L(z),children:x.jsx(Ec,{icon:x.jsx(am,{size:18,className:"text-themeyellow"}),label:"View",bgClass:"bg-themeyellow/10",onClick:ee=>{ee.stopPropagation(),i(r),U()},ariaLabel:"View note"})}),x.jsx(Z1.div,{style:L(z),children:x.jsx(Ec,{icon:x.jsx(J5,{size:18,className:"text-themegreen"}),label:g??"Copy",bgClass:"bg-themegreen/10",textClass:g==="Copied!"?"font-normal text-themegreen":"text-themegreen",onClick:ee=>{ee.stopPropagation(),a(r)},ariaLabel:"Copy note"})}),x.jsx(Z1.div,{style:L(z),children:x.jsx(Ec,{icon:x.jsx(Q4,{size:18,className:"text-themeblue2"}),label:v??"Share",bgClass:"bg-themeblue2/15",textClass:v==="Shared!"||v==="Copied!"?"font-normal text-themeblue2":"text-themeblue2",onClick:ee=>{ee.stopPropagation(),s(r)},ariaLabel:"Share note"})})]}),!y&&(A<0||I==="right")&&x.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-center pr-2 pl-1",style:{width:Ih},children:x.jsx(Z1.div,{style:L(V),children:x.jsx(Ec,{icon:x.jsx(Dd,{size:18,className:"text-themeredred"}),label:N?"Confirm":"Delete",bgClass:N?"bg-themeredred/40":"bg-themeredred/15",textClass:N?"font-medium text-themeredred":"font-medium text-themeredred/60",onClick:ee=>{ee.stopPropagation(),N?(l(r.id),U()):(j(!0),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>j(!1),Li.DELETE_CONFIRM_TIMEOUT))},ariaLabel:N?"Confirm delete":"Delete note"})})}),x.jsx("div",{className:`relative bg-themewhite border rounded-lg ${c?"border-themeblue3/50 bg-themeblue3/5 ring-1 ring-themeblue3/20":"border-tertiary/10"}`,style:{transform:`translateX(${A}px)`,transition:k?"none":"transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)",touchAction:"pan-y",willChange:k?"transform":"auto"},...Q(),onClick:q,children:x.jsxs("div",{className:"flex items-center gap-3 px-3 py-3",children:[c&&x.jsx("div",{className:"shrink-0",children:x.jsx(rS,{size:20,className:"text-themeblue3"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-primary truncate",children:r.symptomText||"Note"}),x.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[x.jsx("p",{className:"text-xs text-tertiary/60",children:Bk(r.createdAt)}),x.jsx(Pk,{syncStatus:r.sync_status,authorName:f,clinicName:m})]})]}),r.dispositionType&&x.jsx("span",{className:`text-[10px] font-normal px-2 py-1 rounded-full shrink-0 ${cf(r.dispositionType).badgeBg}`,children:r.dispositionType})]})})]})},MG=({note:r,isSelected:i,onToggleSelect:a,authorLabel:s,clinicName:l})=>x.jsx("div",{className:`relative rounded-lg mb-2 cursor-pointer transition-all duration-150 ${i?"border-themeblue3/50 bg-themeblue3/5 ring-1 ring-themeblue3/20 border":"border border-tertiary/10 bg-themewhite hover:bg-themewhite2/50"}`,onClick:()=>a(r.id),children:x.jsx(NG,{note:r,isSelected:i,authorLabel:s,clinicName:l})}),RG=({isMobile:r,notes:i,clinicNotes:a,onDeleteNote:s,onDeleteClinicNote:l,onViewNote:c,onCloseDrawer:d})=>{const{profile:f}=Zm(),m=f.clinicName,g=D.useMemo(()=>{const be=new Map;for(const Te of i)be.set(Te.id,Te);for(const Te of a||[]){const ye=be.get(Te.id);if(!ye)be.set(Te.id,Te);else{const tt=new Date(ye.createdAt).getTime();new Date(Te.createdAt).getTime()>tt&&be.set(Te.id,Te)}}return Array.from(be.values())},[i,a]),v=D.useMemo(()=>new Set((a||[]).map(be=>be.id)),[a]),y=D.useCallback(be=>{v.has(be)&&l?l(be):s(be)},[v,l,s]),[A,w]=D.useState(new Set),[k,E]=D.useState(!1),I=D.useRef(!1),T=D.useRef(0),[N,j]=D.useState(!1),{shareNote:B,shareStatus:U}=kw(),F=D.useMemo(()=>IG(g,m),[g,m]),P=D.useMemo(()=>{const be=new Set;if(!f.lastName)return be;for(const Te of g){const ye=Sw(Te.encodedText);if(!ye?.user)continue;const tt=ye.user.lastName?.toLowerCase()===f.lastName.toLowerCase()&&(ye.user.firstName?.toLowerCase()??"")===(f.firstName?.toLowerCase()??""),Qe=(ye.user.uic??"")===(f.uic??"");tt&&Qe&&be.add(Te.id)}return be},[g,f.lastName,f.firstName,f.uic]),z=D.useCallback(be=>be.clinicName,[]),V=D.useCallback(be=>{if(P.has(be.id))return"You";if(be.authorName)return be.authorName;if(be.source?.startsWith("external")){const Te=be.source.indexOf(":");return Te!==-1?be.source.slice(Te+1):"External"}return"Unknown"},[P]);D.useEffect(()=>{w(be=>{const Te=new Set(g.map(tt=>tt.id)),ye=new Set;return be.forEach(tt=>{Te.has(tt)&&ye.add(tt)}),ye.size!==be.size?ye:be})},[g]);const L=D.useCallback(be=>{w(Te=>{const ye=new Set(Te);return ye.has(be)?ye.delete(be):ye.add(be),ye}),I.current=!1,E(!1)},[]),Q=D.useCallback(()=>{w(new Set),I.current=!1,E(!1)},[]),q=D.useCallback(be=>{d(),c&&c(be)},[d,c]),ee=D.useCallback(be=>{be.encodedText&&navigator.clipboard.writeText(be.encodedText).then(()=>{j(!0),setTimeout(()=>j(!1),Li.COPY_FEEDBACK)}).catch(()=>{j(!0),setTimeout(()=>j(!1),Li.COPY_FEEDBACK)})},[]),X=D.useCallback(be=>{B(be,r)},[B,r]),ae=D.useCallback(()=>{I.current?(A.forEach(be=>y(be)),w(new Set),I.current=!1,E(!1),T.current&&clearTimeout(T.current)):(I.current=!0,E(!0),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{I.current=!1,E(!1)},Li.DELETE_CONFIRM_TIMEOUT))},[A,y]),K=A.size,ie=g.filter(be=>A.has(be.id)),ne=K===1,J=K>1,te=ne?ie[0]:null,$=N?"Copied!":"Copy",oe=U==="copied"?"Copied!":U==="shared"?"Shared!":U==="generating"||U==="sharing"?"...":"Share",we=D.useCallback(be=>{q(be)},[q]);return x.jsxs("div",{className:"h-full flex flex-col",children:[x.jsx("div",{className:"flex-1 overflow-y-auto",children:g.length===0?x.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[x.jsx("div",{className:"w-16 h-16 rounded-full bg-tertiary/5 flex items-center justify-center mb-4",children:x.jsx(c2,{size:28,className:"text-tertiary/30"})}),x.jsx("p",{className:"text-sm font-medium text-primary/70 mb-1",children:"No saved notes"}),x.jsx("p",{className:"text-xs text-tertiary/50 max-w-60",children:"Notes you save from the Write Note page will appear here."})]}):r?x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-[10px] text-tertiary/40 text-center mb-2",children:"Swipe for actions  Tap to select"}),F.map((be,Te)=>x.jsxs("div",{children:[x.jsx("p",{className:`text-[10px] font-medium text-tertiary/50 uppercase tracking-wider px-1 pb-1 ${Te===0?"pt-1":"pt-4"}`,children:be.label}),be.notes.map(ye=>x.jsx(TG,{note:ye,onView:q,onCopy:ee,onShare:X,onDelete:y,isSelected:A.has(ye.id),onToggleSelect:L,authorLabel:V(ye),clinicName:z(ye),copyLabel:$,shareLabel:oe},ye.id))]},be.key))]}):x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-[10px] text-tertiary/40 text-center mb-2",children:"Tap to select  Multi-select for bulk actions"}),F.map((be,Te)=>x.jsxs("div",{children:[x.jsx("p",{className:`text-[10px] font-medium text-tertiary/50 uppercase tracking-wider px-1 pb-1 ${Te===0?"pt-1":"pt-4"}`,children:be.label}),be.notes.map(ye=>x.jsx(MG,{note:ye,isSelected:A.has(ye.id),onToggleSelect:L,authorLabel:V(ye),clinicName:z(ye)},ye.id))]},be.key))]})}),K>0&&x.jsxs("div",{className:"shrink-0 border-t border-tertiary/10 bg-themewhite2",style:r?{paddingBottom:"env(safe-area-inset-bottom, 0px)"}:void 0,children:[x.jsxs("div",{className:"px-4 pt-3 pb-2 flex items-center justify-between",children:[x.jsxs("span",{className:"text-xs text-tertiary",children:[K," ",K===1?"note":"notes"," selected"]}),x.jsx("button",{onClick:Q,className:"px-3 py-1 text-xs rounded-full bg-themewhite3 text-tertiary hover:bg-tertiary/10 transition-all active:scale-95",children:"Cancel"})]}),x.jsxs("div",{className:"px-4 pb-3",children:[ne&&te&&x.jsxs("div",{className:"flex items-center justify-center gap-4",children:[x.jsx(Ec,{icon:x.jsx(am,{size:18,className:"text-themeyellow"}),label:"View",bgClass:"bg-themeyellow/10",onClick:()=>we(te),ariaLabel:"View note in algorithm"}),x.jsx(Ec,{icon:x.jsx(J5,{size:18,className:"text-themegreen"}),label:$,bgClass:"bg-themegreen/10",textClass:N?"font-normal text-themegreen":"text-themegreen",onClick:()=>ee(te),ariaLabel:"Copy encoded text"}),x.jsx(Ec,{icon:x.jsx(Q4,{size:18,className:"text-themeblue2"}),label:oe,bgClass:"bg-themeblue2/15",textClass:U==="shared"||U==="copied"?"font-normal text-themeblue2":"text-themeblue2",onClick:()=>X(te),ariaLabel:"Share note as image"}),x.jsx(Ec,{icon:x.jsx(Dd,{size:18,className:"text-themeredred"}),label:k?"Confirm":"Delete",bgClass:k?"bg-themeredred/40":"bg-themeredred/15",textClass:k?"font-medium text-themeredred":"font-medium text-themeredred/60",onClick:ae,ariaLabel:k?"Tap again to confirm delete":"Delete note"})]}),J&&x.jsx("div",{className:"flex items-center justify-center gap-4",children:x.jsx(Ec,{icon:x.jsx(Dd,{size:18,className:"text-white"}),label:k?`Confirm (${K})`:`Delete (${K})`,bgClass:"bg-themeredred",textClass:"font-medium text-themeredred",onClick:ae})})]})]})]})},OG=[{version:"2.6.3",type:"added",text:"text expander for HPI and physical exams. Make your own templates"},{version:"2.6.3",type:"added",text:"clinic heirarchy. Parent clinics see child clinic documentation for easier patient tracking"},{version:"2.6.3",type:"added",text:"DD FORM 689 export"},{version:"2.6.2",type:"added",text:"physical exam section and HPI can be toggled on in settings"},{version:"2.6.2",type:"changed",text:"tutorials and how-to. Found in settings"},{version:"2.6.2",type:"started",text:"training list and evaluation through the supervisor role"},{version:"2.6.1",type:"added",text:"biometric/pin for timeout (optional)"},{version:"2.6.1",type:"added",text:"User login and UIC assignment - see all the notes from your clinic wherever you log in"}],DG={bug:{icon:ZC,className:"text-red-500"},added:{icon:RA,className:"text-green-500"},changed:{icon:tS,className:"text-blue-500"},planned:{icon:nE,className:"text-yellow-500"},started:{icon:QE,className:"text-orange-500"},default:{icon:RA,className:"text-tertiary"}},jG=({note:r})=>{const i=r.type||"default",{icon:a,className:s}=DG[i];return x.jsxs("div",{className:"flex items-start mb-2 last:mb-0",children:[x.jsx("div",{className:"mt-1.5 mr-3",children:x.jsx(a,{size:14,className:s})}),x.jsx("p",{className:"text-sm text-tertiary/80 flex-1",children:r.text})]})},BG=()=>{const r=OG.reduce((a,s)=>{const l=s.version;return a[l]||(a[l]=[]),a[l].push(s),a},{}),i=Object.keys(r).sort((a,s)=>parseFloat(s)-parseFloat(a));return x.jsx("div",{className:"h-full overflow-y-auto px-4 py-3 md:p-5",children:i.map((a,s)=>{const l=r[a],c=s===0;return x.jsxs("div",{className:`${s>0?"pt-6 border-t border-tertiary/10":"mb-6"}`,children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("h3",{className:"text-lg font-semibold text-primary",children:["Version ",a]}),c&&x.jsx("span",{className:"text-xs text-tertiary/60 bg-tertiary/10 px-2 py-1 rounded-full",children:"Latest"})]}),x.jsx("div",{className:"space-y-1",children:l.map((d,f)=>x.jsx(jG,{note:d},`${a}-${f}`))}),l[0]?.date&&x.jsxs("p",{className:"text-xs text-tertiary/60 mt-3",children:["Released: ",l[0].date]})]},a)})})};function tg(){const r=zs(y=>y.user),i=zs(y=>y.loading),a=zs(y=>y.isGuest),s=zs(hq),l=zs(y=>y.continueAsGuest),c=zs(y=>y.signOut),d=zs(y=>y.profile),f=zs(y=>y.roles),m=zs(y=>y.isDevRole),g=zs(y=>y.isSupervisorRole),v=zs(y=>y.refreshProfile);return{user:r,loading:i,isGuest:a,isAuthenticated:s,continueAsGuest:l,signOut:c,profile:d,roles:f,isDevRole:m,isSupervisorRole:g,refreshProfile:v}}const Eu=({label:r,value:i})=>x.jsxs("div",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:r}),x.jsx("div",{className:"mt-1 px-3 py-2.5 rounded-lg bg-themewhite2/50 text-primary text-base border border-tertiary/10",children:i||x.jsx("span",{className:"text-tertiary/30 italic",children:"Not set"})})]}),PG=({onRequestChange:r})=>{const{profile:i}=tg();return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("div",{className:"flex items-start justify-between mb-5",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Your Profile"}),x.jsx("p",{className:"text-sm text-tertiary/60 mt-1",children:"Profile information is read-only. Request changes below."})]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(Eu,{label:"First Name",value:i.firstName}),x.jsx(Eu,{label:"Last Name",value:i.lastName})]}),x.jsx(Eu,{label:"Middle Initial",value:i.middleInitial}),x.jsx(Eu,{label:"Credential",value:i.credential}),x.jsx(Eu,{label:"Component",value:i.component}),x.jsx(Eu,{label:"Rank",value:i.rank}),x.jsx(Eu,{label:"UIC",value:i.uic})]}),i.lastName&&i.credential&&x.jsxs("div",{className:"mt-6 pt-4 border-t border-tertiary/10",children:[x.jsx("p",{className:"text-xs text-tertiary/60 uppercase tracking-wide mb-1",children:"Signature Preview"}),x.jsxs("p",{className:"text-sm text-primary font-medium",children:["Signed: ",i.lastName," ",i.firstName," ",i.middleInitial," ",i.credential,i.rank?`, ${i.rank}`:"",i.component?`, ${i.component}`:"",i.uic?` | UIC: ${i.uic}`:""]})]}),x.jsxs("div",{className:"mt-6 pt-4 border-t border-tertiary/10",children:[x.jsxs("button",{onClick:r,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg
                     bg-themeblue2 text-white font-medium hover:bg-themeblue2/90
                     transition-colors`,children:[x.jsx(o_,{size:18}),"Request Profile Changes"]}),x.jsx("p",{className:"text-xs text-tertiary/60 text-center mt-2",children:"All profile changes require administrator approval"})]})]})})},$w=ya("AccountRequest");async function FG(r){try{const{data:i,error:a}=await St.rpc("submit_account_request",{p_email:r.email.toLowerCase().trim(),p_first_name:r.firstName.trim(),p_last_name:r.lastName.trim(),p_middle_initial:r.middleInitial?.trim()||null,p_credential:r.credential||null,p_rank:r.rank||null,p_component:r.component||null,p_uic:r.uic.toUpperCase().trim(),p_notes:r.notes?.trim()||null,p_request_type:"new_account"});if(a){if(hk(a)===Yh.RATE_LIMITED)return{success:!1,error:"You have too many pending requests. Please wait for existing requests to be reviewed."};throw a}const s=Jm(i,["id","status_check_token"],"submitAccountRequest"),l=s.ok?s.data:null;return Hx({type:"new_account",name:`${r.firstName} ${r.lastName}`.trim(),email:r.email}),{success:!0,statusCheckToken:l?.status_check_token,requestId:l?.id}}catch(i){return $w.error("Failed to submit account request:",i),{success:!1,error:i instanceof Error?i.message:"Failed to submit request"}}}async function UG(r){try{const{data:{user:i}}=await St.auth.getUser();if(!i)return{success:!1,error:"You must be logged in to request profile changes."};const{data:a,error:s}=await St.rpc("submit_account_request",{p_email:r.email.toLowerCase().trim(),p_first_name:r.firstName.trim(),p_last_name:r.lastName.trim(),p_middle_initial:r.middleInitial?.trim()||null,p_credential:r.credential||null,p_rank:r.rank||null,p_component:r.component||null,p_uic:r.uic.toUpperCase().trim(),p_notes:r.notes?.trim()||null,p_request_type:"profile_change"});if(s)throw s;const l=Jm(a,["id","status_check_token"],"submitProfileChangeRequest"),c=l.ok?l.data:null;return{success:!0,statusCheckToken:c?.status_check_token,requestId:c?.id}}catch(i){return $w.error("Failed to submit profile change request:",i),{success:!1,error:i instanceof Error?i.message:"Failed to submit request"}}}async function LG(r,i){try{if(!r||!i)return null;const{data:a,error:s}=await St.rpc("check_request_status",{p_email:r.toLowerCase().trim(),p_token:i});if(s)throw s;const l=Jm(a,["found"],"checkRequestStatus"),c=l.ok?l.data:null;return!c||!c.found?null:{id:c.id||"",email:c.email||"",first_name:c.first_name||"",last_name:c.last_name||"",middle_initial:null,credential:null,rank:null,component:null,uic:"",status:c.status||"pending",request_type:c.request_type||"new_account",status_check_token:i,user_id:null,requested_at:c.requested_at||"",reviewed_at:c.reviewed_at||null,rejection_reason:c.rejection_reason||null,notes:null}}catch(a){return $w.error("Failed to check request status:",a),null}}const zG=ya("ProfileChangeRequest"),b3=({label:r,value:i,onChange:a,placeholder:s,maxLength:l,currentValue:c,type:d="text"})=>x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:r}),c&&x.jsxs("div",{className:"text-xs text-tertiary/50 mb-1",children:["Current: ",x.jsx("span",{className:"font-medium",children:c})]}),x.jsx("input",{type:d,value:i,onChange:f=>a(f.target.value),placeholder:s,maxLength:l,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                 border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                 transition-colors placeholder:text-tertiary/30`})]}),Sy=({label:r,value:i,onChange:a,options:s,placeholder:l,currentValue:c})=>x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:r}),c&&x.jsxs("div",{className:"text-xs text-tertiary/50 mb-1",children:["Current: ",x.jsx("span",{className:"font-medium",children:c})]}),x.jsxs("select",{value:i,onChange:d=>a(d.target.value),className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                 border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                 transition-colors appearance-none`,children:[x.jsx("option",{value:"",children:l??"Select..."}),s.map(d=>x.jsx("option",{value:d,children:d},d))]})]}),HG=()=>{const[r,i]=D.useState({email:"",firstName:"",lastName:"",middleInitial:"",credential:"",component:"",rank:"",uic:""}),[a,s]=D.useState(""),[l,c]=D.useState(""),[d,f]=D.useState(""),[m,g]=D.useState(""),[v,y]=D.useState(""),[A,w]=D.useState(""),[k,E]=D.useState(""),[I,T]=D.useState(""),[N,j]=D.useState(!1),[B,U]=D.useState(!1),[F,P]=D.useState(null),z=v?Mc[v]:[];D.useEffect(()=>{(async()=>{try{const{data:{user:ee}}=await St.auth.getUser();if(!ee)return;const{data:X}=await St.from("profiles").select("first_name, last_name, middle_initial, credential, component, rank, uic").eq("id",ee.id).single();X&&(i({email:ee.email||"",firstName:X.first_name||"",lastName:X.last_name||"",middleInitial:X.middle_initial||"",credential:X.credential||"",component:X.component||"",rank:X.rank||"",uic:X.uic||""}),s(X.first_name||""),c(X.last_name||""),f(X.middle_initial||""),g(X.credential||""),y(X.component||""),w(X.rank||""),E(X.uic||""))}catch(ee){zG.error("Error loading profile:",ee)}})()},[]);const V=q=>{y(q),q&&A&&!Mc[q]?.includes(A)&&w("")},L=a!==r.firstName||l!==r.lastName||d!==r.middleInitial||m!==r.credential||v!==r.component||A!==r.rank||k!==r.uic,Q=async q=>{if(q.preventDefault(),!L){P("No changes detected. Please modify at least one field.");return}j(!0),P(null);const ee=await UG({email:r.email,firstName:a,lastName:l,middleInitial:d||void 0,credential:m||void 0,component:v||void 0,rank:A||void 0,uic:k,notes:I||void 0});j(!1),ee.success?U(!0):P(ee.error||"Failed to submit request")};return B?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx("div",{className:"px-4 py-3 md:p-5",children:x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"text-5xl mb-4",children:""}),x.jsx("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Change Request Submitted!"}),x.jsxs("p",{className:"text-tertiary/70 mb-6",children:["Your profile change request has been submitted for review.",x.jsx("br",{}),"An administrator will review your changes and update your profile accordingly."]}),x.jsx("button",{onClick:()=>U(!1),className:`px-4 py-2 rounded-lg bg-themeblue2 text-white font-medium
                       hover:bg-themeblue2/90 transition-colors`,children:"Submit Another Request"})]})})}):x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("h2",{className:"text-lg font-semibold text-primary mb-2",children:"Request Profile Changes"}),x.jsx("p",{className:"text-sm text-tertiary/60 mb-5 md:text-base",children:"Update the fields you want to change. An administrator will review your request."}),F&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:F}),!L&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-yellow-50 border border-yellow-200 text-yellow-700 text-sm",children:"Make changes to the fields below to submit a request"}),x.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(b3,{label:"First Name",value:a,onChange:s,placeholder:"Christopher",currentValue:r.firstName}),x.jsx(b3,{label:"Last Name",value:l,onChange:c,placeholder:"Conner",currentValue:r.lastName})]}),x.jsx(b3,{label:"Middle Initial",value:d,onChange:q=>f(q.toUpperCase().slice(0,1)),placeholder:"D",maxLength:1,currentValue:r.middleInitial}),x.jsx(Sy,{label:"Credential",value:m,onChange:g,options:g2,currentValue:r.credential}),x.jsx(Sy,{label:"Component",value:v,onChange:V,options:v2,currentValue:r.component}),v&&x.jsx(Sy,{label:"Rank",value:A,onChange:w,options:z,currentValue:r.rank}),x.jsx(b3,{label:"UIC",value:k,onChange:q=>E(q.toUpperCase()),placeholder:"W12ABC",maxLength:6,currentValue:r.uic}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Reason for Changes"}),x.jsx("textarea",{value:I,onChange:q=>T(q.target.value),placeholder:"Please explain why you're requesting these changes...",rows:3,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                       border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                       transition-colors placeholder:text-tertiary/30 resize-none`})]}),x.jsx("button",{type:"submit",disabled:N||!L,className:`w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium
                     hover:bg-themeblue2/90 transition-colors disabled:opacity-50
                     disabled:cursor-not-allowed`,children:N?"Submitting...":"Submit Change Request"})]})]})})},Fk="adtmc_request_token",Uk="adtmc_request_email",Dp=({label:r,value:i,onChange:a,placeholder:s,maxLength:l,required:c=!1,type:d="text"})=>x.jsxs("label",{className:"block",children:[x.jsxs("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:[r," ",c&&x.jsx("span",{className:"text-red-500",children:"*"})]}),x.jsx("input",{type:d,value:i,onChange:f=>a(f.target.value),placeholder:s,maxLength:l,required:c,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                 border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                 transition-colors placeholder:text-tertiary/30`})]}),ky=({label:r,value:i,onChange:a,options:s,placeholder:l,required:c=!1})=>x.jsxs("label",{className:"block",children:[x.jsxs("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:[r," ",c&&x.jsx("span",{className:"text-red-500",children:"*"})]}),x.jsxs("select",{value:i,onChange:d=>a(d.target.value),required:c,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                 border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                 transition-colors appearance-none`,children:[x.jsx("option",{value:"",children:l??"Select..."}),s.map(d=>x.jsx("option",{value:d,children:d},d))]})]});function qG(r,i){try{localStorage.setItem(Fk,i),localStorage.setItem(Uk,r)}catch{}}function GG(){try{const r=localStorage.getItem(Fk),i=localStorage.getItem(Uk);if(r&&i)return{email:i,token:r}}catch{}return null}const VG=()=>{const[r,i]=D.useState(""),[a,s]=D.useState(""),[l,c]=D.useState(""),[d,f]=D.useState(""),[m,g]=D.useState(""),[v,y]=D.useState(""),[A,w]=D.useState(""),[k,E]=D.useState(""),[I,T]=D.useState(""),[N,j]=D.useState(""),[B,U]=D.useState(!1),[F,P]=D.useState(!1),[z,V]=D.useState(null),[L,Q]=D.useState(null),q=v?Mc[v]:[],ee=ie=>{y(ie),ie&&A&&!Mc[ie]?.includes(A)&&w("")},X=async()=>{let ie=r,ne=N;if(!ne){const te=GG();te&&(ie=te.email,ne=te.token,i(te.email),j(te.token))}if(!ie||!ne){V("Both email and status check token are required. Enter the token you received when you submitted your request.");return}V(null);const J=await LG(ie,ne);Q(J),J||V("No matching request found. Verify your email and token are correct.")},ae=async ie=>{ie.preventDefault(),U(!0),V(null);const ne=await FG({email:r,firstName:a,lastName:l,middleInitial:d||void 0,credential:m||void 0,component:v||void 0,rank:A||void 0,uic:k,notes:I||void 0});U(!1),ne.success&&ne.statusCheckToken?(P(!0),j(ne.statusCheckToken),qG(r,ne.statusCheckToken),Q({id:ne.requestId||"",email:r,first_name:a,last_name:l,middle_initial:d||null,credential:m||null,rank:A||null,component:v||null,uic:k,status:"pending",request_type:"new_account",status_check_token:ne.statusCheckToken,user_id:null,requested_at:new Date().toISOString(),reviewed_at:null,rejection_reason:null,notes:I||null})):V(ne.error||"Failed to submit request")},K=ie=>{switch(ie){case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"approved":return"text-green-600 bg-green-50 border-green-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return L?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("h2",{className:"text-lg font-semibold text-primary mb-4",children:"Account Request Status"}),x.jsxs("div",{className:`p-4 rounded-lg border ${K(L.status)}`,children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-medium uppercase tracking-wide",children:L.status}),x.jsx("span",{className:"text-xs opacity-75",children:new Date(L.requested_at).toLocaleDateString()})]}),x.jsxs("p",{className:"text-sm mb-2",children:[x.jsx("strong",{children:"Email:"})," ",L.email]}),x.jsxs("p",{className:"text-sm mb-2",children:[x.jsx("strong",{children:"Name:"})," ",L.first_name," ",L.middle_initial," ",L.last_name]}),L.rank&&x.jsxs("p",{className:"text-sm mb-2",children:[x.jsx("strong",{children:"Rank:"})," ",L.rank]}),L.component&&x.jsxs("p",{className:"text-sm mb-2",children:[x.jsx("strong",{children:"Component:"})," ",L.component]}),L.uic&&x.jsxs("p",{className:"text-sm mb-2",children:[x.jsx("strong",{children:"UIC:"})," ",L.uic]}),L.status==="pending"&&x.jsx("p",{className:"text-sm mt-3 italic",children:"Your request is pending review. You will be notified once it's approved."}),L.status==="approved"&&x.jsx("p",{className:"text-sm mt-3 italic",children:"Your request has been approved! Check your email for login instructions."}),L.status==="rejected"&&L.rejection_reason&&x.jsxs("div",{className:"mt-3",children:[x.jsx("p",{className:"text-sm font-medium",children:"Reason:"}),x.jsx("p",{className:"text-sm italic",children:L.rejection_reason})]})]}),x.jsx("button",{onClick:()=>{Q(null),P(!1)},className:`mt-4 px-4 py-2 rounded-lg bg-themeblue2 text-white font-medium
                     hover:bg-themeblue2/90 transition-colors`,children:"Back"})]})}):F?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx("div",{className:"px-4 py-3 md:p-5",children:x.jsxs("div",{className:"text-center py-8",children:[x.jsx("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Request Submitted!"}),x.jsx("p",{className:"text-tertiary/70 mb-4",children:"Your account request has been submitted. An administrator will review it shortly."}),N&&x.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-blue-50 border border-blue-200 text-left",children:[x.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Save your status check token:"}),x.jsx("code",{className:"block p-2 bg-white rounded border border-blue-200 text-xs font-mono text-blue-900 break-all select-all",children:N}),x.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"You will need this token along with your email to check your request status. It has been saved to your browser, but you should copy it somewhere safe in case you clear your browser data."})]}),x.jsx("button",{onClick:()=>X(),className:`px-4 py-2 rounded-lg bg-themeblue2 text-white font-medium
                       hover:bg-themeblue2/90 transition-colors`,children:"Check Request Status"})]})})}):x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("h2",{className:"text-lg font-semibold text-primary mb-2",children:"Request an Account"}),x.jsx("p",{className:"text-sm text-tertiary/60 mb-5 md:text-base",children:"Fill out the form below to request access. An administrator will review your request."}),z&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:z}),x.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[x.jsx(Dp,{label:"Email",value:r,onChange:i,placeholder:"your.email@mail.mil",type:"email",required:!0}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(Dp,{label:"First Name",value:a,onChange:s,placeholder:"Christopher",required:!0}),x.jsx(Dp,{label:"Last Name",value:l,onChange:c,placeholder:"Conner",required:!0})]}),x.jsx(Dp,{label:"Middle Initial",value:d,onChange:ie=>f(ie.toUpperCase().slice(0,1)),placeholder:"D",maxLength:1}),x.jsx(ky,{label:"Credential",value:m,onChange:g,options:g2}),x.jsx(ky,{label:"Component",value:v,onChange:ee,options:v2}),v&&x.jsx(ky,{label:"Rank",value:A,onChange:w,options:q}),x.jsx(Dp,{label:"UIC",value:k,onChange:ie=>E(ie.toUpperCase()),placeholder:"W12ABC",maxLength:6,required:!0}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Additional Notes"}),x.jsx("textarea",{value:I,onChange:ie=>T(ie.target.value),placeholder:"Any additional information for the administrator...",rows:3,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                       border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                       transition-colors placeholder:text-tertiary/30 resize-none`})]}),x.jsx("button",{type:"submit",disabled:B,className:`w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium
                     hover:bg-themeblue2/90 transition-colors disabled:opacity-50
                     disabled:cursor-not-allowed`,children:B?"Submitting...":"Submit Request"})]}),x.jsxs("div",{className:"mt-6 pt-6 border-t border-tertiary/10",children:[x.jsx("p",{className:"text-sm text-tertiary/60 mb-3",children:"Already submitted a request?"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("input",{type:"email",value:r,onChange:ie=>i(ie.target.value),placeholder:"your.email@mail.mil",className:`w-full px-3 py-2 rounded-lg bg-themewhite2 text-primary text-sm
                       border border-tertiary/10 focus:border-themeblue2 focus:outline-none`}),x.jsx("input",{type:"text",value:N,onChange:ie=>j(ie.target.value),placeholder:"Status check token (from submission)",className:`w-full px-3 py-2 rounded-lg bg-themewhite2 text-primary text-sm font-mono
                       border border-tertiary/10 focus:border-themeblue2 focus:outline-none`}),x.jsx("button",{onClick:X,className:`w-full px-4 py-2 rounded-lg bg-tertiary/10 text-primary font-medium
                       hover:bg-tertiary/20 transition-colors text-sm`,children:"Check Status"})]})]})]})})},wl=({label:r,value:i,onChange:a,placeholder:s,maxLength:l,required:c=!1,type:d="text"})=>x.jsxs("label",{className:"block",children:[x.jsxs("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:[r," ",c&&x.jsx("span",{className:"text-themeredred",children:"*"})]}),x.jsx("input",{type:d,value:i,onChange:f=>a(f.target.value),placeholder:s,maxLength:l,required:c,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                 border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                 transition-colors placeholder:text-tertiary/30`})]}),Vu=({label:r,value:i,onChange:a,options:s,placeholder:l,required:c=!1})=>x.jsxs("label",{className:"block",children:[x.jsxs("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:[r," ",c&&x.jsx("span",{className:"text-themeredred",children:"*"})]}),x.jsxs("select",{value:i,onChange:d=>a(d.target.value),required:c,className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                 border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                 transition-colors appearance-none`,children:[x.jsx("option",{value:"",children:l??"Select..."}),s.map(d=>x.jsx("option",{value:d,children:d},d))]})]}),YG=({role:r})=>{const i={medic:"bg-themeblue2/10 text-themeblue2 border-themeblue2/30",supervisor:"bg-themeyellow/10 text-themeyellow border-themeyellow/30",dev:"bg-themepurple/10 text-themepurple border-themepurple/30"};return x.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium border ${i[r]||"bg-tertiary/10 text-tertiary border-tertiary/30"}`,children:r})},QG=()=>{const[r,i]=D.useState([]),[a,s]=D.useState(!0),[l,c]=D.useState("pending"),[d,f]=D.useState(null),[m,g]=D.useState(null),[v,y]=D.useState(""),[A,w]=D.useState(null),k=D.useCallback(async()=>{s(!0);const N=await XH(l==="all"?void 0:l);i(N),s(!1)},[l]);D.useEffect(()=>{k()},[k]);const E=async N=>{f(N);const j=crypto.getRandomValues(new Uint8Array(12)),B=btoa(String.fromCharCode(...j)).slice(0,16),U=await KH(N,B);if(U.success){const F=r.find(P=>P.id===N);F&&await St.auth.resetPasswordForEmail(F.email,{redirectTo:window.location.origin+"/test2/"}),w(null),await k()}else alert(`Failed to approve: ${U.error}`);f(null)},I=async N=>{if(!v.trim()){alert("Please provide a rejection reason");return}f(N);const j=await JH(N,v);j.success?(g(null),y(""),await k()):alert(`Failed to reject: ${j.error}`),f(null)},T=N=>{switch(N){case"pending":return"bg-themeyellow/10 text-themeyellow border-themeyellow/30";case"approved":return"bg-themegreen/10 text-themegreen border-themegreen/30";case"rejected":return"bg-themeredred/10 text-themeredred border-themeredred/30";default:return"bg-tertiary/10 text-tertiary border-tertiary/30"}};return a?x.jsx("div",{className:"flex items-center justify-center py-12",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading..."})}):x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"text-sm text-tertiary/60 mb-4",children:"Review and approve account requests"}),x.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:["pending","approved","rejected","all"].map(N=>x.jsx("button",{onClick:()=>c(N),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap
              ${l===N?"bg-themeblue2 text-white":"bg-themewhite2 text-tertiary/70 hover:bg-themewhite2/80"}`,children:N.charAt(0).toUpperCase()+N.slice(1)},N))}),r.length===0?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(lx,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsxs("p",{className:"text-tertiary/60",children:["No ",l!=="all"?l:""," requests found"]})]}):x.jsx("div",{className:"space-y-3",children:r.map(N=>x.jsxs("div",{className:"p-4 rounded-lg border border-tertiary/10 bg-themewhite2",children:[x.jsxs("div",{className:"flex items-start justify-between mb-3",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"flex items-center gap-2 mb-1",children:x.jsxs("h4",{className:"font-semibold text-primary",children:[N.first_name," ",N.middle_initial," ",N.last_name]})}),x.jsx("p",{className:"text-sm text-tertiary/70",children:N.email})]}),x.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[x.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${N.request_type==="profile_change"?"bg-themeblue2/10 text-themeblue2 border-themeblue2/30":"bg-themepurple/10 text-themepurple border-themepurple/30"}`,children:N.request_type==="profile_change"?"CHANGE":"NEW"}),x.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${T(N.status)}`,children:N.status.toUpperCase()})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[N.credential&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Credential:"})," ",x.jsx("span",{className:"text-primary font-medium",children:N.credential})]}),N.rank&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Rank:"})," ",x.jsx("span",{className:"text-primary font-medium",children:N.rank})]}),N.component&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Component:"})," ",x.jsx("span",{className:"text-primary font-medium",children:N.component})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"UIC:"})," ",x.jsx("span",{className:"text-primary font-medium",children:N.uic})]})]}),N.notes&&x.jsxs("div",{className:"mb-3 p-2 bg-themewhite rounded text-sm",children:[x.jsx("span",{className:"text-tertiary/60",children:"Notes:"})," ",x.jsx("span",{className:"text-primary",children:N.notes})]}),x.jsxs("div",{className:"text-xs text-tertiary/50 mb-3",children:["Requested: ",new Date(N.requested_at).toLocaleString()]}),N.status==="pending"&&x.jsx("div",{className:"flex flex-col gap-2",children:A===N.id?x.jsxs("div",{className:"p-3 bg-themegreen/10 rounded-lg",children:[x.jsxs("p",{className:"text-sm text-themegreen font-medium mb-2",children:["Create account and send setup email to ",N.email,"?"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>E(N.id),disabled:d===N.id,className:"flex-1 px-3 py-2 rounded-lg bg-themegreen text-white text-sm font-medium hover:bg-themegreen/90 disabled:opacity-50",children:d===N.id?"Creating...":"Confirm & Send Email"}),x.jsx("button",{onClick:()=>w(null),className:"px-3 py-2 rounded-lg bg-tertiary/10 text-primary text-sm",children:"Cancel"})]})]}):m===N.id?x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:v,onChange:j=>y(j.target.value),placeholder:"Rejection reason...",className:"flex-1 px-3 py-2 rounded-lg bg-themewhite border border-tertiary/10 text-sm"}),x.jsx("button",{onClick:()=>I(N.id),disabled:d===N.id,className:"px-3 py-2 rounded-lg bg-themeredred text-white text-sm font-medium hover:bg-themeredred/90 disabled:opacity-50",children:"Confirm"}),x.jsx("button",{onClick:()=>{g(null),y("")},className:"px-3 py-2 rounded-lg bg-tertiary/10 text-primary text-sm",children:"Cancel"})]}):x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>{w(N.id),g(null)},disabled:d===N.id,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-themegreen text-white font-medium hover:bg-themegreen/90 disabled:opacity-50 transition-colors",children:[x.jsx(So,{size:16})," Approve"]}),x.jsxs("button",{onClick:()=>{g(N.id),w(null)},disabled:d===N.id,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-themeredred text-white font-medium hover:bg-themeredred/90 disabled:opacity-50 transition-colors",children:[x.jsx(ms,{size:16})," Reject"]})]})}),N.status==="approved"&&x.jsxs("div",{className:"p-3 bg-themegreen/10 rounded-lg text-sm",children:[x.jsxs("div",{className:"flex items-center gap-2 text-themegreen",children:[x.jsx($4,{size:16}),x.jsx("span",{className:"font-medium",children:"Account created  setup email sent"})]}),x.jsx("p",{className:"text-themegreen text-xs mt-1",children:"User will receive an email to set their password."})]}),N.status==="rejected"&&N.rejection_reason&&x.jsxs("div",{className:"p-3 bg-themeredred/10 rounded-lg text-sm",children:[x.jsx("span",{className:"text-themeredred font-medium",children:"Reason:"}),x.jsx("p",{className:"text-themeredred text-xs mt-1",children:N.rejection_reason})]})]},N.id))})]})},$G=()=>{const[r,i]=D.useState("list"),[a,s]=D.useState([]),[l,c]=D.useState([]),[d,f]=D.useState(!0),[m,g]=D.useState(""),[v,y]=D.useState(null),[A,w]=D.useState(null),[k,E]=D.useState(null),[I,T]=D.useState(""),[N,j]=D.useState(!1),[B,U]=D.useState(null),[F,P]=D.useState(null),[z,V]=D.useState(""),[L,Q]=D.useState(!1),[q,ee]=D.useState(null),X=D.useCallback(async()=>{f(!0);const[J,te]=await Promise.all([gk(),vk()]);s(J),c(te),f(!1)},[]);D.useEffect(()=>{X()},[X]),D.useEffect(()=>{St.auth.getUser().then(({data:{user:J}})=>{J&&w(J.id)})},[]);const ae=async(J,te)=>{if(z!==te)return;Q(!0);const $=await iq(J);Q(!1),$.success?(P(null),V(""),ee({type:"success",message:"User deleted successfully"}),await X()):ee({type:"error",message:$.error||"Failed to delete user"})},K=async J=>{if(I.length<12)return;j(!0);const te=await nq(J,I);j(!1),te.success?(E(null),T(""),U(J),setTimeout(()=>U(null),Li.SAVE_ERROR_DURATION)):ee({type:"error",message:te.error||"Failed to reset password"})},ie=new Map(l.map(J=>[J.id,J])),ne=a.filter(J=>{if(!m)return!0;const te=m.toLowerCase();return J.email?.toLowerCase().includes(te)||J.first_name?.toLowerCase().includes(te)||J.last_name?.toLowerCase().includes(te)||J.uic?.toLowerCase().includes(te)});return r==="create"?x.jsx(WG,{onBack:()=>i("list"),onCreated:()=>{i("list"),X(),ee({type:"success",message:"User created successfully"})}}):r==="edit"&&v?x.jsx(XG,{user:v,clinics:l,onBack:()=>{i("list"),y(null)},onSaved:()=>{i("list"),y(null),X(),ee({type:"success",message:"Profile updated successfully"})}}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("p",{className:"text-sm text-tertiary/60",children:"Manage user accounts"}),x.jsxs("button",{onClick:()=>i("create"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-themegreen text-white text-sm font-medium hover:bg-themegreen/90 transition-colors",children:[x.jsx($4,{size:14})," Create User"]})]}),q&&x.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${q.type==="success"?"bg-themegreen/10 border border-themegreen/20 text-themegreen":"bg-themeredred/10 border border-themeredred/20 text-themeredred"}`,children:[q.message,x.jsx("button",{onClick:()=>ee(null),className:"float-right text-xs opacity-60 hover:opacity-100",children:"dismiss"})]}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx(Wh,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-tertiary/40"}),x.jsx("input",{type:"text",value:m,onChange:J=>g(J.target.value),placeholder:"Search by name, email, or UIC...",className:`w-full pl-9 pr-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-sm
                     border border-tertiary/10 focus:border-themeblue2 focus:outline-none transition-colors placeholder:text-tertiary/30`})]}),d?x.jsx("div",{className:"flex items-center justify-center py-12",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading users..."})}):ne.length===0?x.jsx("div",{className:"text-center py-12",children:x.jsx("p",{className:"text-tertiary/60",children:m?"No users match your search":"No users found"})}):x.jsx("div",{className:"space-y-3",children:ne.map(J=>x.jsxs("div",{className:"p-4 rounded-lg border border-tertiary/10 bg-themewhite2",children:[x.jsxs("div",{className:"flex items-start justify-between mb-2",children:[x.jsxs("div",{children:[x.jsxs("h4",{className:"font-semibold text-primary",children:[J.first_name||""," ",J.middle_initial||""," ",J.last_name||""]}),x.jsx("p",{className:"text-sm text-tertiary/70",children:J.email})]}),x.jsx("div",{className:"flex gap-1 flex-wrap justify-end",children:J.roles?.map(te=>x.jsx(YG,{role:te},te))})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[J.rank&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Rank:"})," ",x.jsx("span",{className:"text-primary font-medium",children:J.rank})]}),J.credential&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Credential:"})," ",x.jsx("span",{className:"text-primary font-medium",children:J.credential})]}),J.component&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Component:"})," ",x.jsx("span",{className:"text-primary font-medium",children:J.component})]}),J.uic&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"UIC:"})," ",x.jsx("span",{className:"text-primary font-medium",children:J.uic})]}),J.clinic_id&&ie.has(J.clinic_id)&&x.jsxs("div",{children:[x.jsx("span",{className:"text-tertiary/60",children:"Clinic:"})," ",x.jsx("span",{className:"text-primary font-medium",children:ie.get(J.clinic_id).name})]})]}),k===J.id?x.jsxs("div",{className:"p-3 bg-themeyellow/10 rounded-lg mb-3",children:[x.jsx("p",{className:"text-sm text-themeyellow font-medium mb-2",children:"Set new password:"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:I,onChange:te=>T(te.target.value),placeholder:"New password (min 12 chars)...",className:"flex-1 px-3 py-2 rounded-lg bg-themewhite2 border border-themeyellow/30 text-sm"}),x.jsx("button",{onClick:()=>K(J.id),disabled:N||I.length<12,className:"px-3 py-2 rounded-lg bg-themeyellow text-white text-sm font-medium hover:bg-themeyellow/90 disabled:opacity-50",children:N?"Resetting...":"Reset"}),x.jsx("button",{onClick:()=>{E(null),T("")},className:"px-3 py-2 rounded-lg bg-tertiary/10 text-primary text-sm",children:"Cancel"})]}),I.length>0&&I.length<12&&x.jsx("p",{className:"text-xs text-themeredred mt-1",children:"Password must be at least 12 characters"})]}):B===J.id?x.jsx("div",{className:"p-2 bg-themegreen/10 rounded-lg mb-3 text-sm text-themegreen font-medium",children:"Password reset successfully"}):null,F===J.id&&x.jsxs("div",{className:"p-3 bg-themeredred/10 rounded-lg mb-3 border border-themeredred/20",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(Tc,{size:16,className:"text-themeredred shrink-0"}),x.jsx("p",{className:"text-sm text-themeredred font-semibold",children:"Permanently delete this user?"})]}),x.jsxs("p",{className:"text-xs text-themeredred mb-3",children:["This will delete ",x.jsxs("span",{className:"font-semibold",children:[J.first_name," ",J.last_name]})," and all associated data (notes, training, sync queue). This action cannot be undone."]}),x.jsxs("p",{className:"text-xs text-themeredred mb-2",children:["Type ",x.jsx("span",{className:"font-mono font-semibold bg-themeredred/10 px-1 py-0.5 rounded",children:J.email})," to confirm:"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:z,onChange:te=>V(te.target.value),placeholder:"Type email to confirm...",className:`flex-1 px-3 py-2 rounded-lg bg-themewhite2 border border-themeredred/30 text-sm
                                 focus:border-themeredred focus:outline-none transition-colors placeholder:text-tertiary/30`,autoComplete:"off"}),x.jsx("button",{onClick:()=>ae(J.id,J.email),disabled:L||z!==J.email,className:`px-3 py-2 rounded-lg bg-themeredred text-white text-sm font-medium
                                 hover:bg-themeredred/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,children:L?"Deleting...":"Delete"}),x.jsx("button",{onClick:()=>{P(null),V("")},className:"px-3 py-2 rounded-lg bg-tertiary/10 text-primary text-sm",children:"Cancel"})]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>{y(J),i("edit")},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-themeblue2 text-white text-sm font-medium hover:bg-themeblue2/90 transition-colors",children:[x.jsx(cx,{size:14})," Edit"]}),x.jsxs("button",{onClick:()=>{E(J.id),T(""),U(null)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-tertiary/10 text-primary text-sm font-medium hover:bg-tertiary/20 transition-colors",children:[x.jsx(j3,{size:14})," Reset Password"]}),A!==J.id&&x.jsxs("button",{onClick:()=>{P(J.id),V(""),E(null)},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-themeredred/10 text-themeredred text-sm font-medium
                               hover:bg-themeredred/20 border border-themeredred/20 transition-colors`,children:[x.jsx(Dd,{size:14})," Delete"]})]})]},J.id))})]})},WG=({onBack:r,onCreated:i})=>{const[a,s]=D.useState(""),[l,c]=D.useState(""),[d,f]=D.useState(""),[m,g]=D.useState(""),[v,y]=D.useState(""),[A,w]=D.useState(""),[k,E]=D.useState(""),[I,T]=D.useState(""),[N,j]=D.useState(""),[B,U]=D.useState({medic:!0,supervisor:!1,dev:!1}),[F,P]=D.useState(!1),[z,V]=D.useState(null),L=k?Mc[k]:[],Q=X=>{E(X),X&&I&&!Mc[X]?.includes(I)&&T("")},q=X=>{U(ae=>({...ae,[X]:!ae[X]}))},ee=async X=>{if(X.preventDefault(),V(null),!a||!d||!m){V("Email, first name, and last name are required");return}if(l.length<12){V("Temporary password must be at least 12 characters");return}const ae=Object.entries(B).filter(([,ie])=>ie).map(([ie])=>ie);if(ae.length===0){V("At least one role must be selected");return}P(!0);const K=await tq({email:a,tempPassword:l,firstName:d,lastName:m,middleInitial:v||void 0,credential:A||void 0,component:k||void 0,rank:I||void 0,uic:N||void 0,roles:ae});P(!1),K.success?i():V(K.error||"Failed to create user")};return x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-sm text-themeblue2 mb-4 hover:underline",children:[x.jsx(Nc,{size:16})," Back to user list"]}),x.jsx("h3",{className:"text-base font-semibold text-primary mb-4",children:"Create New User"}),z&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themeredred/10 border border-themeredred/20 text-themeredred text-sm",children:z}),x.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[x.jsx(wl,{label:"Email",value:a,onChange:s,placeholder:"user@mail.mil",type:"email",required:!0}),x.jsx(wl,{label:"Temporary Password",value:l,onChange:c,placeholder:"Min 12 characters",required:!0}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(wl,{label:"First Name",value:d,onChange:f,required:!0}),x.jsx(wl,{label:"Last Name",value:m,onChange:g,required:!0})]}),x.jsx(wl,{label:"Middle Initial",value:v,onChange:X=>y(X.toUpperCase().slice(0,1)),maxLength:1}),x.jsx(Vu,{label:"Credential",value:A,onChange:w,options:g2}),x.jsx(Vu,{label:"Component",value:k,onChange:Q,options:v2}),k&&x.jsx(Vu,{label:"Rank",value:I,onChange:T,options:L}),x.jsx(wl,{label:"UIC",value:N,onChange:X=>j(X.toUpperCase()),maxLength:6}),x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Roles"}),x.jsx("div",{className:"flex gap-3 mt-2",children:["medic","supervisor","dev"].map(X=>x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:B[X],onChange:()=>q(X),className:"w-4 h-4 rounded border-tertiary/30"}),x.jsx("span",{className:"text-sm text-primary capitalize",children:X})]},X))})]}),x.jsx("button",{type:"submit",disabled:F,className:"w-full px-4 py-3 rounded-lg bg-themegreen text-white font-medium hover:bg-themegreen/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Creating User...":"Create User"})]})]})},XG=({user:r,clinics:i,onBack:a,onSaved:s})=>{const[l,c]=D.useState(r.first_name||""),[d,f]=D.useState(r.last_name||""),[m,g]=D.useState(r.middle_initial||""),[v,y]=D.useState(r.credential||""),[A,w]=D.useState(r.component||""),[k,E]=D.useState(r.rank||""),[I,T]=D.useState(r.uic||""),[N,j]=D.useState(r.clinic_id||""),[B,U]=D.useState({medic:r.roles?.includes("medic")??!1,supervisor:r.roles?.includes("supervisor")??!1,dev:r.roles?.includes("dev")??!1}),[F,P]=D.useState(r.note_include_hpi??!0),[z,V]=D.useState(r.note_include_pe??!1),[L,Q]=D.useState(r.pe_depth??"standard"),[q,ee]=D.useState(!1),[X,ae]=D.useState(null),K=A?Mc[A]:[],ie=te=>{w(te),te&&k&&!Mc[te]?.includes(k)&&E("")},ne=te=>{U($=>({...$,[te]:!$[te]}))},J=async()=>{ae(null);const te=Object.entries(B).filter(([,Te])=>Te).map(([Te])=>Te);if(te.length===0){ae("At least one role must be selected");return}ee(!0);const $=await lq(r.id,{firstName:l||void 0,lastName:d||void 0,middleInitial:m,credential:v,component:A,rank:k,uic:I||void 0,noteIncludeHPI:F,noteIncludePE:z,peDepth:L});if(!$.success){ae($.error||"Failed to update profile"),ee(!1);return}const oe=new Set(r.roles||[]),we=new Set(te);for(const Te of te)if(!oe.has(Te)){const ye=await ZH(r.id,Te);if(!ye.success){ae(`Failed to add role ${Te}: ${ye.error}`),ee(!1);return}}for(const Te of r.roles||[])if(!we.has(Te)){const ye=await eq(r.id,Te);if(!ye.success){ae(`Failed to remove role ${Te}: ${ye.error}`),ee(!1);return}}const be=r.clinic_id||"";if(N!==be){const Te=await oq(r.id,N||null);if(!Te.success){ae(Te.error||"Failed to update clinic"),ee(!1);return}}ee(!1),s()};return x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-sm text-themeblue2 mb-4 hover:underline",children:[x.jsx(Nc,{size:16})," Back to user list"]}),x.jsx("h3",{className:"text-base font-semibold text-primary mb-1",children:"Edit User"}),x.jsx("p",{className:"text-sm text-tertiary/60 mb-4",children:r.email}),X&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themeredred/10 border border-themeredred/20 text-themeredred text-sm",children:X}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(wl,{label:"First Name",value:l,onChange:c,required:!0}),x.jsx(wl,{label:"Last Name",value:d,onChange:f,required:!0})]}),x.jsx(wl,{label:"Middle Initial",value:m,onChange:te=>g(te.toUpperCase().slice(0,1)),maxLength:1}),x.jsx(Vu,{label:"Credential",value:v,onChange:y,options:g2}),x.jsx(Vu,{label:"Component",value:A,onChange:ie,options:v2}),A&&x.jsx(Vu,{label:"Rank",value:k,onChange:E,options:K}),x.jsx(wl,{label:"UIC",value:I,onChange:te=>T(te.toUpperCase()),maxLength:6}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Clinic"}),x.jsxs("select",{value:N,onChange:te=>j(te.target.value),className:`mt-1 w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-base
                       border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                       transition-colors appearance-none`,children:[x.jsx("option",{value:"",children:"No clinic assigned"}),i.map(te=>x.jsxs("option",{value:te.id,children:[te.name," (",te.uics.join(", "),")"]},te.id))]}),N&&(()=>{const te=i.find($=>$.id===N);return te?.location?x.jsx("p",{className:"mt-1 text-xs text-tertiary/50",children:te.location}):null})()]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Roles"}),x.jsx("div",{className:"flex gap-3 mt-2",children:["medic","supervisor","dev"].map(te=>x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:B[te],onChange:()=>ne(te),className:"w-4 h-4 rounded border-tertiary/30"}),x.jsx("span",{className:"text-sm text-primary capitalize",children:te})]},te))})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Note Content Defaults"}),x.jsxs("div",{className:"mt-2 space-y-2",children:[x.jsxs("label",{className:"flex items-center justify-between cursor-pointer px-3 py-2.5 rounded-lg bg-themewhite2 border border-tertiary/10",children:[x.jsx("span",{className:"text-sm text-primary",children:"Include HPI"}),x.jsx("input",{type:"checkbox",checked:F,onChange:()=>P(!F),className:"w-4 h-4 rounded border-tertiary/30"})]}),x.jsxs("label",{className:"flex items-center justify-between cursor-pointer px-3 py-2.5 rounded-lg bg-themewhite2 border border-tertiary/10",children:[x.jsx("span",{className:"text-sm text-primary",children:"Include PE"}),x.jsx("input",{type:"checkbox",checked:z,onChange:()=>V(!z),className:"w-4 h-4 rounded border-tertiary/30"})]}),x.jsx(Vu,{label:"PE Depth",value:L,onChange:Q,options:["focused","standard","comprehensive"]})]})]}),x.jsx("button",{onClick:J,disabled:q,className:"w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium hover:bg-themeblue2/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:q?"Saving...":"Save Changes"})]})]})},Lk=({label:r,values:i,onChange:a,placeholder:s,transform:l})=>{const[c,d]=D.useState(""),f=()=>{const g=l?l(c.trim()):c.trim();g&&!i.includes(g)&&a([...i,g]),d("")},m=g=>{a(i.filter((v,y)=>y!==g))};return x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:r}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5 mb-2",children:i.map((g,v)=>x.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-themeblue2/10 text-themeblue2 text-xs font-medium border border-themeblue2/30",children:[g,x.jsx("button",{type:"button",onClick:()=>m(v),className:"hover:text-themeredred transition-colors",children:x.jsx(ms,{size:12})})]},v))}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(g.preventDefault(),f())},placeholder:s,className:`flex-1 px-3 py-2 rounded-lg bg-themewhite2 text-primary text-sm
                     border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                     transition-colors placeholder:text-tertiary/30`}),x.jsx("button",{type:"button",onClick:f,disabled:!c.trim(),className:"px-3 py-2 rounded-lg bg-themeblue2 text-white text-sm font-medium hover:bg-themeblue2/90 disabled:opacity-50 transition-colors",children:x.jsx(dx,{size:14})})]})]})},zk=({label:r,selectedIds:i,allUsers:a,onChange:s})=>{const[l,c]=D.useState(""),[d,f]=D.useState(!1),m=new Map(a.map(A=>[A.id,A])),g=a.filter(A=>{if(i.includes(A.id)||!l)return!1;const w=l.toLowerCase();return A.email?.toLowerCase().includes(w)||A.first_name?.toLowerCase().includes(w)||A.last_name?.toLowerCase().includes(w)}).slice(0,8),v=A=>s(i.filter(w=>w!==A)),y=A=>{s([...i,A]),c(""),f(!1)};return x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:r}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5 mb-2",children:i.map(A=>{const w=m.get(A),k=w?`${w.first_name||""} ${w.last_name||""}`.trim()||w.email:A.slice(0,8);return x.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-themepurple/10 text-themepurple text-xs font-medium border border-themepurple/30",children:[k,x.jsx("button",{type:"button",onClick:()=>v(A),className:"hover:text-themeredred transition-colors",children:x.jsx(ms,{size:12})})]},A)})}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:l,onChange:A=>{c(A.target.value),f(!0)},onFocus:()=>f(!0),placeholder:"Search users by name or email...",className:`w-full px-3 py-2 rounded-lg bg-themewhite2 text-primary text-sm
                     border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                     transition-colors placeholder:text-tertiary/30`}),d&&g.length>0&&x.jsx("div",{className:"absolute z-10 mt-1 w-full rounded-lg bg-themewhite2 border border-tertiary/10 shadow-lg max-h-48 overflow-y-auto",children:g.map(A=>x.jsxs("button",{type:"button",onClick:()=>y(A.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-themeblue2/10 transition-colors",children:[x.jsxs("span",{className:"text-primary font-medium",children:[A.first_name," ",A.last_name]}),x.jsx("span",{className:"text-tertiary/50 ml-2",children:A.email})]},A.id))})]})]})},Hk=({label:r,selectedIds:i,allClinics:a,excludeId:s,onChange:l})=>{const[c,d]=D.useState(""),[f,m]=D.useState(!1),g=new Map(a.map(w=>[w.id,w])),v=a.filter(w=>{if(i.includes(w.id)||w.id===s||!c)return!1;const k=c.toLowerCase();return w.name.toLowerCase().includes(k)||w.uics.some(E=>E.toLowerCase().includes(k))}).slice(0,8),y=w=>l(i.filter(k=>k!==w)),A=w=>{l([...i,w]),d(""),m(!1)};return x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:r}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5 mb-2",children:i.map(w=>{const k=g.get(w),E=k?k.name:w.slice(0,8);return x.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-themeblue2/10 text-themeblue2 text-xs font-medium border border-themeblue2/30",children:[E,x.jsx("button",{type:"button",onClick:()=>y(w),className:"hover:text-themeredred transition-colors",children:x.jsx(ms,{size:12})})]},w)})}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:c,onChange:w=>{d(w.target.value),m(!0)},onFocus:()=>m(!0),placeholder:"Search clinics by name or UIC...",className:`w-full px-3 py-2 rounded-lg bg-themewhite2 text-primary text-sm
                     border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                     transition-colors placeholder:text-tertiary/30`}),f&&v.length>0&&x.jsx("div",{className:"absolute z-10 mt-1 w-full rounded-lg bg-themewhite2 border border-tertiary/10 shadow-lg max-h-48 overflow-y-auto",children:v.map(w=>x.jsxs("button",{type:"button",onClick:()=>A(w.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-themeblue2/10 transition-colors",children:[x.jsx("span",{className:"text-primary font-medium",children:w.name}),w.uics.length>0&&x.jsx("span",{className:"text-tertiary/50 ml-2",children:w.uics.join(", ")})]},w.id))})]})]})},KG=()=>{const[r,i]=D.useState("list"),[a,s]=D.useState([]),[l,c]=D.useState([]),[d,f]=D.useState(!0),[m,g]=D.useState(""),[v,y]=D.useState(null),[A,w]=D.useState(null),[k,E]=D.useState(null),[I,T]=D.useState(""),[N,j]=D.useState(!1),B=D.useCallback(async()=>{f(!0);const[z,V]=await Promise.all([vk(),gk()]);s(z),c(V),f(!1)},[]);D.useEffect(()=>{B()},[B]);const U=async(z,V)=>{if(I!==V)return;j(!0);const L=await sq(z);j(!1),L.success?(E(null),T(""),w({type:"success",message:"Clinic deleted successfully"}),await B()):w({type:"error",message:L.error||"Failed to delete clinic"})},F=z=>l.filter(V=>V.clinic_id===z),P=a.filter(z=>{if(!m)return!0;const V=m.toLowerCase();return z.name.toLowerCase().includes(V)||z.location?.toLowerCase().includes(V)||z.uics.some(L=>L.toLowerCase().includes(V))});return r==="create"?x.jsx(JG,{allUsers:l,allClinics:a,onBack:()=>i("list"),onCreated:()=>{i("list"),B(),w({type:"success",message:"Clinic created successfully"})}}):r==="edit"&&v?x.jsx(ZG,{clinic:v,allUsers:l,allClinics:a,onBack:()=>{i("list"),y(null)},onSaved:()=>{i("list"),y(null),B(),w({type:"success",message:"Clinic updated successfully"})}}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("p",{className:"text-sm text-tertiary/60",children:"Manage clinics"}),x.jsxs("button",{onClick:()=>i("create"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-themegreen text-white text-sm font-medium hover:bg-themegreen/90 transition-colors",children:[x.jsx(dx,{size:14})," Create Clinic"]})]}),A&&x.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${A.type==="success"?"bg-themegreen/10 border border-themegreen/20 text-themegreen":"bg-themeredred/10 border border-themeredred/20 text-themeredred"}`,children:[A.message,x.jsx("button",{onClick:()=>w(null),className:"float-right text-xs opacity-60 hover:opacity-100",children:"dismiss"})]}),x.jsxs("div",{className:"relative mb-4",children:[x.jsx(Wh,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-tertiary/40"}),x.jsx("input",{type:"text",value:m,onChange:z=>g(z.target.value),placeholder:"Search by name, location, or UIC...",className:`w-full pl-9 pr-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-sm
                     border border-tertiary/10 focus:border-themeblue2 focus:outline-none transition-colors placeholder:text-tertiary/30`})]}),d?x.jsx("div",{className:"flex items-center justify-center py-12",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading clinics..."})}):P.length===0?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(W5,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsx("p",{className:"text-tertiary/60",children:m?"No clinics match your search":"No clinics found"})]}):x.jsx("div",{className:"space-y-3",children:P.map(z=>{const V=F(z.id);return x.jsxs("div",{className:"p-4 rounded-lg border border-tertiary/10 bg-themewhite2",children:[x.jsxs("div",{className:"flex items-start justify-between mb-2",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-primary",children:z.name}),z.location&&x.jsxs("p",{className:"text-sm text-tertiary/70 flex items-center gap-1 mt-0.5",children:[x.jsx(ZE,{size:12})," ",z.location]})]}),x.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium border bg-themeblue2/10 text-themeblue2 border-themeblue2/30",children:[V.length," user",V.length!==1?"s":""]})]}),z.uics.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:z.uics.map(L=>x.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-themeyellow/10 text-themeyellow border border-themeyellow/30",children:L},L))}),z.child_clinic_ids.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:z.child_clinic_ids.map(L=>{const Q=a.find(q=>q.id===L);return x.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-themeblue2/10 text-themeblue2 border border-themeblue2/30",children:Q?Q.name:L.slice(0,8)},L)})}),z.additional_user_ids.length>0&&x.jsxs("div",{className:"mb-3",children:[x.jsx("span",{className:"text-xs text-tertiary/50",children:"Additional users: "}),x.jsx("span",{className:"text-xs text-primary",children:z.additional_user_ids.map(L=>{const Q=l.find(q=>q.id===L);return Q?`${Q.first_name||""} ${Q.last_name||""}`.trim()||Q.email:L.slice(0,8)}).join(", ")})]}),V.length>0&&x.jsxs("div",{className:"mb-3 text-xs text-tertiary/50",children:["Assigned: ",V.map(L=>`${L.first_name||""} ${L.last_name||""}`.trim()||L.email).join(", ")]}),k===z.id&&x.jsxs("div",{className:"p-3 bg-themeredred/10 rounded-lg mb-3 border border-themeredred/20",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(Tc,{size:16,className:"text-themeredred shrink-0"}),x.jsx("p",{className:"text-sm text-themeredred font-semibold",children:"Delete this clinic?"})]}),x.jsxs("p",{className:"text-xs text-themeredred mb-2",children:["Type ",x.jsx("span",{className:"font-mono font-semibold bg-themeredred/10 px-1 py-0.5 rounded",children:z.name})," to confirm:"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:I,onChange:L=>T(L.target.value),placeholder:"Type clinic name to confirm...",className:`flex-1 px-3 py-2 rounded-lg bg-themewhite2 border border-themeredred/30 text-sm
                                   focus:border-themeredred focus:outline-none transition-colors placeholder:text-tertiary/30`,autoComplete:"off"}),x.jsx("button",{onClick:()=>U(z.id,z.name),disabled:N||I!==z.name,className:`px-3 py-2 rounded-lg bg-themeredred text-white text-sm font-medium
                                   hover:bg-themeredred/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,children:N?"Deleting...":"Delete"}),x.jsx("button",{onClick:()=>{E(null),T("")},className:"px-3 py-2 rounded-lg bg-tertiary/10 text-primary text-sm",children:"Cancel"})]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>{y(z),i("edit")},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-themeblue2 text-white text-sm font-medium hover:bg-themeblue2/90 transition-colors",children:[x.jsx(cx,{size:14})," Edit"]}),x.jsxs("button",{onClick:()=>{E(z.id),T("")},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-themeredred/10 text-themeredred text-sm font-medium
                               hover:bg-themeredred/20 border border-themeredred/20 transition-colors`,children:[x.jsx(Dd,{size:14})," Delete"]})]})]},z.id)})})]})},JG=({allUsers:r,allClinics:i,onBack:a,onCreated:s})=>{const[l,c]=D.useState(""),[d,f]=D.useState(""),[m,g]=D.useState([]),[v,y]=D.useState([]),[A,w]=D.useState([]),[k,E]=D.useState(!1),[I,T]=D.useState(null),N=async j=>{if(j.preventDefault(),T(null),!l.trim()){T("Clinic name is required");return}E(!0);const B=await rq({name:l.trim(),location:d.trim()||void 0,uics:m,child_clinic_ids:v,additional_user_ids:A});E(!1),B.success?s():T(B.error||"Failed to create clinic")};return x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-sm text-themeblue2 mb-4 hover:underline",children:[x.jsx(Nc,{size:16})," Back to clinic list"]}),x.jsx("h3",{className:"text-base font-semibold text-primary mb-4",children:"Create New Clinic"}),I&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themeredred/10 border border-themeredred/20 text-themeredred text-sm",children:I}),x.jsxs("form",{onSubmit:N,className:"space-y-4",children:[x.jsx(wl,{label:"Clinic Name",value:l,onChange:c,placeholder:"e.g. TMC Alpha",required:!0}),x.jsx(wl,{label:"Location",value:d,onChange:f,placeholder:"e.g. Building 123, Fort Example"}),x.jsx(Lk,{label:"UICs",values:m,onChange:g,placeholder:"Add UIC (e.g. W12345)...",transform:j=>j.toUpperCase()}),x.jsx(Hk,{label:"Child Clinics",selectedIds:v,allClinics:i,onChange:y}),x.jsx(zk,{label:"Additional Users",selectedIds:A,allUsers:r,onChange:w}),x.jsx("button",{type:"submit",disabled:k,className:"w-full px-4 py-3 rounded-lg bg-themegreen text-white font-medium hover:bg-themegreen/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Creating Clinic...":"Create Clinic"})]})]})},ZG=({clinic:r,allUsers:i,allClinics:a,onBack:s,onSaved:l})=>{const[c,d]=D.useState(r.name),[f,m]=D.useState(r.location||""),[g,v]=D.useState(r.uics),[y,A]=D.useState(r.child_clinic_ids),[w,k]=D.useState(r.additional_user_ids),[E,I]=D.useState(!1),[T,N]=D.useState(null),j=async()=>{if(N(null),!c.trim()){N("Clinic name is required");return}I(!0);const B=await aq(r.id,{name:c.trim(),location:f.trim()||null,uics:g,child_clinic_ids:y,additional_user_ids:w});I(!1),B.success?l():N(B.error||"Failed to update clinic")};return x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:s,className:"flex items-center gap-1 text-sm text-themeblue2 mb-4 hover:underline",children:[x.jsx(Nc,{size:16})," Back to clinic list"]}),x.jsx("h3",{className:"text-base font-semibold text-primary mb-4",children:"Edit Clinic"}),T&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themeredred/10 border border-themeredred/20 text-themeredred text-sm",children:T}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(wl,{label:"Clinic Name",value:c,onChange:d,placeholder:"e.g. TMC Alpha",required:!0}),x.jsx(wl,{label:"Location",value:f,onChange:m,placeholder:"e.g. Building 123, Fort Example"}),x.jsx(Lk,{label:"UICs",values:g,onChange:v,placeholder:"Add UIC (e.g. W12345)...",transform:B=>B.toUpperCase()}),x.jsx(Hk,{label:"Child Clinics",selectedIds:y,allClinics:a,excludeId:r.id,onChange:A}),x.jsx(zk,{label:"Additional Users",selectedIds:w,allUsers:i,onChange:k}),x.jsx("button",{onClick:j,disabled:E,className:"w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium hover:bg-themeblue2/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Saving...":"Save Changes"})]})]})},eV=()=>{const[r,i]=D.useState(!1),[a,s]=D.useState(!0),[l,c]=D.useState("requests");return D.useEffect(()=>{(async()=>{const f=await qw();i(f),s(!1)})()},[]),a?x.jsx("div",{className:"h-full flex items-center justify-center",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading..."})}):r?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("div",{className:"flex items-center gap-2 mb-5",children:["requests","users","clinics"].map(d=>x.jsx("button",{onClick:()=>c(d),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-colors
                ${l===d?"bg-themeblue2 text-white":"bg-themewhite2 text-tertiary/70 hover:bg-themewhite2/80"}`,children:d.charAt(0).toUpperCase()+d.slice(1)},d))}),l==="requests"&&x.jsx(QG,{}),l==="users"&&x.jsx($G,{}),l==="clinics"&&x.jsx(KG,{})]})}):x.jsx("div",{className:"h-full flex items-center justify-center px-4",children:x.jsxs("div",{className:"text-center",children:[x.jsx($5,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:"Access Denied"}),x.jsx("p",{className:"text-sm text-tertiary/60",children:"You need dev role to access this panel."})]})})};function sc(r){return qk.find(i=>i.taskNumber===r)}function tV(r){const i=qk.find(a=>a.taskNumber===r);return!!i?.gradedSteps&&i.gradedSteps.length>0}const qk=[{taskNumber:"081-68W-3036",title:"Perform a Digital Block Anesthesia",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation (BSI) precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment you are to obtain vital signs and determine if a patients vital signs are within normal limits. You are provided with a watch with a second hand (analog or digital), thermometer (electronic, glass, or tympanic), alcohol pads, cover probes, water soluble lubricant, stethoscope, sphygmomanometer, pulse oximetry device, sensing probe, pen, and SF 600 (Chronological Record of Medical Care) or electronic medical record (EMR). The use of an automated vital signs monitor is allowed if available.",standards:"Assess the patients vital signs, in accordance with the PHTLS Prehospital Trauma Life Support, while adhering to all warnings and cautions with 100% accuracy utilizing GO/ NO GO criteria",performanceSteps:[{number:"1",text:"Gather necessary equipment: stethoscope and sphygmomanometer."},{number:"2",text:"Identify the patient and explain the procedure."},{number:"3",text:"Position the patient with the arm supported at heart level."},{number:"4",text:"Apply the blood pressure cuff to the upper arm."},{number:"4a",text:"Center the bladder of the cuff over the brachial artery.",isSubStep:!0},{number:"4b",text:"Wrap the cuff snugly around the arm approximately 1 inch above the antecubital fossa.",isSubStep:!0},{number:"5",text:"Palpate the radial pulse and inflate the cuff until the pulse is no longer felt. Note the reading."},{number:"6",text:"Deflate the cuff completely and wait 15-30 seconds."},{number:"7",text:"Place the stethoscope over the brachial artery."},{number:"8",text:"Inflate the cuff 20-30 mmHg above the previously noted reading."},{number:"9",text:"Slowly deflate the cuff at a rate of 2-3 mmHg per second.",note:"Deflating too quickly may result in an inaccurate reading."},{number:"10",text:"Note the reading when the first Korotkoff sound is heard (systolic pressure)."},{number:"11",text:"Note the reading when the Korotkoff sounds disappear (diastolic pressure)."},{number:"12",text:"Completely deflate and remove the cuff."},{number:"13",text:"Record the blood pressure reading, the arm used, and the patient's position."}]},{taskNumber:"081-000-1001",title:"Assess Patient Vital Signs",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation (BSI) precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment you are to obtain vital signs and determine if a patients vital signs are within normal limits. You are provided with a watch with a second hand (analog or digital), thermometer (electronic, glass, or tympanic), alcohol pads, cover probes, water soluble lubricant, stethoscope, sphygmomanometer, pulse oximetry device, sensing probe, pen, and SF 600 (Chronological Record of Medical Care) or electronic medical record (EMR). The use of an automated vital signs monitor is allowed if available.",standards:"Assess the patients vital signs, in accordance with the PHTLS Prehospital Trauma Life Support, while adhering to all warnings and cautions with 100% accuracy utilizing GO/ NO GO criteria",performanceSteps:[{number:"1",text:"Gather necessary equipment: stethoscope and sphygmomanometer."},{number:"2",text:"Identify the patient and explain the procedure."},{number:"3",text:"Position the patient with the arm supported at heart level."},{number:"4",text:"Apply the blood pressure cuff to the upper arm."},{number:"4a",text:"Center the bladder of the cuff over the brachial artery.",isSubStep:!0},{number:"4b",text:"Wrap the cuff snugly around the arm approximately 1 inch above the antecubital fossa.",isSubStep:!0},{number:"5",text:"Palpate the radial pulse and inflate the cuff until the pulse is no longer felt. Note the reading."},{number:"6",text:"Deflate the cuff completely and wait 15-30 seconds."},{number:"7",text:"Place the stethoscope over the brachial artery."},{number:"8",text:"Inflate the cuff 20-30 mmHg above the previously noted reading."},{number:"9",text:"Slowly deflate the cuff at a rate of 2-3 mmHg per second.",note:"Deflating too quickly may result in an inaccurate reading."},{number:"10",text:"Note the reading when the first Korotkoff sound is heard (systolic pressure)."},{number:"11",text:"Note the reading when the Korotkoff sounds disappear (diastolic pressure)."},{number:"12",text:"Completely deflate and remove the cuff."},{number:"13",text:"Record the blood pressure reading, the arm used, and the patient's position."}],audioAids:[{label:"Normal Breath Sounds",file:"normal_breath_sounds.mp3",description:"Clear, soft sounds heard over most lung fields during normal respiration"},{label:"Crackles (Rales)",file:"crackles.mp3",description:"Discontinuous popping sounds, often indicating fluid in the airways"},{label:"Wheezing",file:"wheezing.mp3",description:"High-pitched whistling sound indicating narrowed airways"},{label:"Stridor",file:"stridor.mp3",description:"Harsh, high-pitched sound indicating upper airway obstruction"}]},{taskNumber:"081-000-1001-alt",title:"Measure a Patient's Blood Pressure",conditions:"You have a patient who requires a blood pressure measurement. You will need a stethoscope and a sphygmomanometer (blood pressure cuff). The patient is in a clinical or field environment.",standards:"Obtain an accurate systolic and diastolic blood pressure reading using a manual sphygmomanometer and stethoscope. Record the reading correctly.",performanceSteps:[{number:"1",text:"Gather necessary equipment: stethoscope and sphygmomanometer."},{number:"2",text:"Identify the patient and explain the procedure."},{number:"3",text:"Position the patient with the arm supported at heart level."},{number:"4",text:"Apply the blood pressure cuff to the upper arm."},{number:"4a",text:"Center the bladder of the cuff over the brachial artery.",isSubStep:!0},{number:"4b",text:"Wrap the cuff snugly around the arm approximately 1 inch above the antecubital fossa.",isSubStep:!0},{number:"5",text:"Palpate the radial pulse and inflate the cuff until the pulse is no longer felt. Note the reading."},{number:"6",text:"Deflate the cuff completely and wait 15-30 seconds."},{number:"7",text:"Place the stethoscope over the brachial artery."},{number:"8",text:"Inflate the cuff 20-30 mmHg above the previously noted reading."},{number:"9",text:"Slowly deflate the cuff at a rate of 2-3 mmHg per second.",note:"Deflating too quickly may result in an inaccurate reading."},{number:"10",text:"Note the reading when the first Korotkoff sound is heard (systolic pressure)."},{number:"11",text:"Note the reading when the Korotkoff sounds disappear (diastolic pressure)."},{number:"12",text:"Completely deflate and remove the cuff."},{number:"13",text:"Record the blood pressure reading, the arm used, and the patient's position."}]},{taskNumber:"081-000-0025",title:"Treat a Poisoned Casualty",conditions:"You are treating a casualty who has ingested, inhaled, absorbed, or been injected with a potentially toxic substance. Field or clinical setting with standard medical supplies available.",standards:"Identify the signs and symptoms of poisoning, initiate appropriate treatment based on the route of exposure, and prepare the casualty for evacuation if necessary.",performanceSteps:[{number:"1",text:"Assess the scene for safety.",warning:"Do not expose yourself to the same toxic substance. Ensure the area is safe before approaching the casualty."},{number:"2",text:"Perform a rapid patient assessment (MARCH)."},{number:"3",text:"Attempt to identify the poison, route of exposure, and time of exposure."},{number:"3a",text:"Gather information from the casualty, bystanders, or containers/labels at the scene.",isSubStep:!0},{number:"3b",text:"Note any unusual odors, stains, or burns around the mouth or skin.",isSubStep:!0},{number:"4",text:"For ingested poisons:",note:"Do NOT induce vomiting unless directed by medical authority or poison control."},{number:"4a",text:"If conscious and able to swallow, administer water or milk to dilute the substance if appropriate.",isSubStep:!0},{number:"4b",text:"Position the casualty on their left side (recovery position) to reduce absorption.",isSubStep:!0},{number:"5",text:"For inhaled poisons:"},{number:"5a",text:"Move the casualty to fresh air immediately.",isSubStep:!0},{number:"5b",text:"Administer oxygen if available and indicated.",isSubStep:!0},{number:"6",text:"For absorbed (skin contact) poisons:"},{number:"6a",text:"Remove contaminated clothing.",isSubStep:!0,caution:"Wear appropriate PPE to avoid secondary contamination."},{number:"6b",text:"Flush the affected area with large amounts of water for at least 20 minutes.",isSubStep:!0},{number:"7",text:"Monitor vital signs and reassess the casualty continuously."},{number:"8",text:"Prepare the casualty for evacuation. Bring any containers, labels, or samples of the suspected poison."}]},{taskNumber:"081-68W-0091",title:"Treat a Casualty with a Neck Wound",conditions:"You are treating a casualty with a wound to the neck in a field or clinical environment. Standard medical supplies are available including occlusive dressings.",standards:"Control hemorrhage, maintain the airway, and prevent air embolism. Prepare the casualty for evacuation.",performanceSteps:[{number:"1",text:"Assess the casualty and identify the neck wound.",warning:"Neck wounds are potentially life-threatening due to major blood vessels and airway structures. Treat immediately."},{number:"2",text:"Expose the wound while maintaining cervical spine precautions if trauma is suspected."},{number:"3",text:"Apply an occlusive dressing to the wound.",caution:"An occlusive dressing is critical to prevent air embolism from a venous injury."},{number:"3a",text:"Cover the wound completely with the occlusive material.",isSubStep:!0},{number:"3b",text:"Tape the dressing on all four sides.",isSubStep:!0},{number:"4",text:"Apply direct pressure to control hemorrhage."},{number:"4a",text:"Do NOT apply circumferential pressure around the neck.",isSubStep:!0,warning:"Circumferential pressure may occlude the airway or restrict blood flow to the brain."},{number:"5",text:"Maintain the airway. Be prepared to suction or position the casualty if the airway becomes compromised."},{number:"6",text:"Monitor for signs of airway obstruction, expanding hematoma, or air embolism."},{number:"7",text:"Administer oxygen if available."},{number:"8",text:"Prepare the casualty for urgent evacuation."}]},{taskNumber:"081-000-0073",title:"Administer Oxygen",conditions:"You have a patient requiring supplemental oxygen. Oxygen delivery equipment is available including cylinder, regulator, and delivery devices (nasal cannula, non-rebreather mask).",standards:"Correctly set up oxygen delivery equipment, select the appropriate delivery device, administer oxygen at the prescribed or appropriate flow rate, and monitor the patient.",performanceSteps:[{number:"1",text:"Assess the patient and determine the need for supplemental oxygen.",note:"Indications include: SpO2 < 94%, respiratory distress, shock, altered mental status, chest pain, or severe trauma."},{number:"2",text:"Select the appropriate oxygen delivery device based on the patient's condition."},{number:"2a",text:"Nasal cannula: 1-6 LPM for mild hypoxia (delivers 24-44% O2).",isSubStep:!0},{number:"2b",text:"Non-rebreather mask: 10-15 LPM for severe hypoxia (delivers 60-100% O2).",isSubStep:!0},{number:"3",text:"Assemble and test the oxygen delivery system."},{number:"3a",text:"Attach the regulator to the oxygen cylinder.",isSubStep:!0,caution:"Ensure the cylinder valve is closed before attaching the regulator. Never use oil or grease on oxygen equipment."},{number:"3b",text:"Open the cylinder valve slowly and check the pressure gauge.",isSubStep:!0},{number:"3c",text:"Attach the delivery device to the regulator.",isSubStep:!0},{number:"3d",text:"Set the flow rate and verify oxygen flow.",isSubStep:!0},{number:"4",text:"Apply the delivery device to the patient."},{number:"4a",text:"For nasal cannula: insert prongs into the nares and secure tubing around the ears.",isSubStep:!0},{number:"4b",text:"For non-rebreather mask: fill the reservoir bag before placing on the patient, then secure the mask over the nose and mouth.",isSubStep:!0},{number:"5",text:"Monitor the patient's response: respiratory rate, SpO2, skin color, and level of consciousness."},{number:"6",text:"Document the flow rate, delivery device, time initiated, and patient response."}]},{taskNumber:"081-68W-0314",title:"Administer Fluids Through an Infusion",conditions:"You have a patient requiring intravenous (IV) fluid therapy. IV supplies are available including IV solution, administration set, catheters, tourniquet, antiseptic, tape, and sharps container.",standards:"Successfully establish a patent IV line using aseptic technique. Regulate the flow rate as prescribed or appropriate. Secure the site and monitor for complications.",performanceSteps:[{number:"1",text:"Verify the order and select the correct IV solution.",note:"Check the solution for clarity, expiration date, and correct type. Common solutions: 0.9% Normal Saline, Lactated Ringer's."},{number:"2",text:"Prepare the IV administration set."},{number:"2a",text:"Close the roller clamp on the IV tubing.",isSubStep:!0},{number:"2b",text:"Remove the protective cover from the IV bag port and spike the bag.",isSubStep:!0},{number:"2c",text:"Squeeze the drip chamber to fill it halfway.",isSubStep:!0},{number:"2d",text:"Open the roller clamp and prime the tubing, removing all air bubbles.",isSubStep:!0,warning:"Ensure all air is expelled from the tubing before connecting to the patient. Air embolism can be fatal."},{number:"2e",text:"Close the roller clamp.",isSubStep:!0},{number:"3",text:"Select the IV catheter size appropriate for the patient and purpose."},{number:"4",text:"Select and prepare the insertion site."},{number:"4a",text:"Apply the tourniquet 3-4 inches above the selected site.",isSubStep:!0},{number:"4b",text:"Palpate for a suitable vein (bouncy, visible, straight).",isSubStep:!0},{number:"4c",text:"Cleanse the site with antiseptic using a circular motion from center outward. Allow to dry.",isSubStep:!0},{number:"5",text:"Perform the venipuncture."},{number:"5a",text:"Anchor the vein by applying traction to the skin below the insertion site.",isSubStep:!0},{number:"5b",text:"Insert the catheter bevel-up at a 15-30 degree angle.",isSubStep:!0},{number:"5c",text:"Observe for blood return (flashback) in the catheter hub.",isSubStep:!0},{number:"5d",text:"Advance the catheter into the vein and withdraw the needle.",isSubStep:!0},{number:"5e",text:"Release the tourniquet.",isSubStep:!0},{number:"6",text:"Connect the IV tubing to the catheter hub."},{number:"7",text:"Open the roller clamp and verify flow.",note:"Check for infiltration: swelling, coolness, or pain at the site."},{number:"8",text:"Regulate the flow rate as prescribed."},{number:"9",text:"Secure the catheter and tubing with tape or a transparent dressing."},{number:"10",text:"Label the site with date, time, catheter size, and your initials."},{number:"11",text:"Document the procedure: site, catheter size, solution, flow rate, and patient response."}]},{taskNumber:"081-000-0061",title:"Perform Patient Suctioning",conditions:"In an operational environment, you have a patient that requires suctioning. You may have a portable suction apparatus, suction tubing, a rigid or flexible suction catheter, saline solution or sterile water, basin, gloves, goggles, collection bottle, oxygen delivery system, and an SF 600 (Chronological Record of Medical Care), or the patient's electronic medical record (EMR). You have performed a patient care handwash, gathered equipment, and performed a patient baseline vital signs assessment.",standards:"Perform suctioning in accordance with the Clinical Patient Guidelines, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",caution:"All body fluids should be considered potentially infectious. Always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",gradedSteps:["1","2","3","4","5","6","7","8","9","10","11"],performanceSteps:[{number:"1",text:"Prepare equipment.",warning:"Eye protection is required when performing suctioning procedures."},{number:"1a",text:"Turn on the suction in order to check proper functioning.",isSubStep:!0},{number:"1b",text:"Open the basin package.",isSubStep:!0},{number:"1c",text:"Pour the saline solution into the basin.",isSubStep:!0},{number:"1d",text:"Open the suction catheter package.",isSubStep:!0},{number:"1e",text:"Attach catheter to the suction tubing.",isSubStep:!0},{number:"2",text:"Explain the procedure to the patient, if conscious."},{number:"3",text:"Don personal protective equipment."},{number:"4",text:"Position the patient."},{number:"4a",text:"Position a conscious patient in a semi-Fowler's (semi-sitting) position.",isSubStep:!0},{number:"4b",text:"Position a severe trauma patient, onto their side allowing gravity to assist in clearing the airway.",isSubStep:!0},{number:"5",text:"Hyper-oxygenate the patient with 100% oxygen."},{number:"5a",text:"Increase the oxygen to 100% for up to 2 minutes if the patient is already receiving oxygen therapy in order to hyper-oxygenate.",isSubStep:!0},{number:"5b",text:"Instruct the patient to take a minimum of five deep breaths or administer the breaths with a bag-valve-mask system, if the patient is not receiving oxygen therapy.",isSubStep:!0,note:"After each suctioning attempt or suctioning period, reoxygenate the patient.",caution:"Suctioning activities should pause if the patient has a pulse oximeter reading less than 92%."},{number:"5c",text:"Monitor the patient's pulse oximeter reading during the entire procedure.",isSubStep:!0},{number:"6",text:"Test the patency of the catheter."},{number:"6a",text:"Turn the suction unit on with your nondominant hand.",isSubStep:!0},{number:"6a1",text:"Adults: negative pressures of 120 to 150 millimeters of mercury (mmHg).",isSubStep:!0},{number:"6a2",text:"Children: negative pressures of 100 to 120 mmHg.",isSubStep:!0},{number:"6a3",text:"Infants: negative pressures of 80 to 100 mmHg.",isSubStep:!0},{number:"6b",text:"Pick up attached suction tubing using your nondominant hand.",isSubStep:!0,note:"The suction tubing is considered contaminated. After this is touched, then that hand is considered contaminated."},{number:"6c",text:"Insert the catheter tip into the saline solution using your dominant hand.",isSubStep:!0,note:"Moistening the catheter lubricates the catheter and helps to minimize trauma to the mucous membranes and increases the patient's comfort."},{number:"6d",text:"Occlude the suction control port with your nondominant thumb while observing the saline entering the drainage bottle.",isSubStep:!0},{number:"7",text:"Suction the patient."},{number:"7a",text:"Rigid catheter.",isSubStep:!0},{number:"7a1",text:"Instruct a conscious patient to cough to help bring secretions up to the back of their throat.",isSubStep:!0},{number:"7a2",text:"Use the cross-finger method of opening the airway with your nondominate hand, if the patient is unconscious.",isSubStep:!0},{number:"7a3",text:"Place the convex (outward curving) side of the rigid tip against the roof of the mouth and insert to the base of the tongue.",isSubStep:!0,note:"A rigid tip does not need to be measured. Only insert the tip as far as you can see it. Be aware that advancing the catheter too far may stimulate the patient's gag reflex and cause them to vomit.",warning:"Never suction for more than 15 seconds at one time for adults, 10 seconds for children, and 5 seconds for infants. Longer periods of continuous suctioning may cause oxygen deprivation."},{number:"7a4",text:"Apply suction by placing the thumb of your dominant hand over the suction control port.",isSubStep:!0},{number:"7a5",text:"Clear the secretions from the catheter between each suctioning interval by inserting the tip into the saline solution and suction the solution through the catheter until the catheter is clear of secretions.",isSubStep:!0},{number:"7a6",text:"Repeat steps 7a(1) through 7a(5) until all secretions have been removed or until the patient's breathing becomes easier.",isSubStep:!0,note:"If no suction is required go to step 10."},{number:"7b",text:"Flexible catheter.",isSubStep:!0},{number:"7b1",text:"Measure the catheter from the patient's earlobe to the corner of the mouth or the center of the mouth to the angle of the jaw.",isSubStep:!0,warning:"Insert the catheter no further down than the base of the tongue."},{number:"7b2",text:"Insert the catheter into the patient's mouth to the correct depth no lower than the back of throat, without the suction applied.",isSubStep:!0,note:"If an oropharyngeal airway is in place, insert the catheter alongside the airway and then back into the pharynx."},{number:"7b3",text:"Place the thumb of your nondominant hand over the suction control port on the catheter, applying intermittent suction by moving your thumb to cover and uncover the suction control port.",isSubStep:!0},{number:"7b4",text:"Apply suction in a circular motion as you withdraw the catheter.",isSubStep:!0,warning:"Advancing the catheter too far into the back of the patient's throat may stimulate the gag reflex. This could cause vomiting and the aspiration of stomach contents."},{number:"7b5",text:"Suction for no longer than 10 to 15 seconds removing secretions from the back of the throat, along outer gums, cheeks, and base of tongue.",isSubStep:!0},{number:"7b6",text:"Clear the secretions from the catheter between suctioning by inserting the tip into the saline solution and suction the solution through the catheter until the catheter is clear of secretions.",isSubStep:!0,note:"If step 7b(6) is not required move to step 11."},{number:"7b7",text:"Repeat steps 7b(2) through 7b(6) until all secretions have been removed or until the patient's breathing becomes easier. Noisy, rattling, or gurgling sounds should no longer be heard.",isSubStep:!0},{number:"7c",text:"Endotracheal (ET) suctioning.",isSubStep:!0},{number:"7c1",text:"If an in-line suction catheter is not in place, attach one to the ventilator circuit after estimating the proper size by multiplying the ET tube's inner diameter by two, then selecting the next smallest size catheter.",isSubStep:!0,note:"In-line suction catheters are recommended for patients receiving ventilatory support because they allow suctioning without disconnecting the patient from the ventilator and, therefore, preventing lung derecruitment, loss of oxygen, and cross-contamination."},{number:"7c2",text:"Attach a sterile saline ampoule to the irrigation port of the in-line suction catheter.",isSubStep:!0},{number:"7c3",text:"Check the suction level by closing the catheter thumb port and suctioning sterile saline from the irrigation port.",isSubStep:!0},{number:"7c4",text:"Hyper-oxygenate patient, this can either be done by the ventilator if applicable or by increasing the fraction of inspired oxygen to 100% for 2 minutes.",isSubStep:!0},{number:"7c5",text:"Insert the catheter into the ET tube by advancing the catheter until the numbers on the suction catheter match the numbers on the ET tube that indicate the depth of insertion, resulting in the tip of the catheter only reaching the tip of the ET tube.",isSubStep:!0,note:"This is called the shallow method and prevents tracheal mucosa damage.",caution:"Nerves in the trachea and carina can cause transient bradycardia and asystole. If major changes in heart rate or rhythm stop and immediately administer oxygen."},{number:"7c6",text:"Apply suction while withdrawing the catheter for no longer than 15 seconds.",isSubStep:!0},{number:"7c7",text:"Clear the catheter by suctioning sterile saline from the irrigation port.",isSubStep:!0},{number:"7c8",text:"Repeat steps 7c(1) to 7c(6) as needed.",isSubStep:!0},{number:"7d",text:"Nasotracheal suctioning.",isSubStep:!0},{number:"7d1",text:"Select an appropriate size suction catheter kit according to manufacturer's recommendation.",isSubStep:!0},{number:"7d2",text:"Open the kit, using the sterile technique, and pour water-soluble lubricant into the kit.",isSubStep:!0},{number:"7d3",text:"Don the sterile gloves supplied in the suction kit.",isSubStep:!0},{number:"7d4",text:"Connect the thumb-control valve of the suction catheter to the vacuum tubing using your nondominant hand.",isSubStep:!0,note:"The nondominant hand is now considered contaminated and should not be used to touch any sterile part of the suction catheter."},{number:"7d5",text:"Open the sterile water container included in the kit.",isSubStep:!0},{number:"7d6",text:"Check suction pressure by suctioning sterile water through the catheter.",isSubStep:!0},{number:"7d7",text:"Lubricate the catheter with water-soluble lubricant.",isSubStep:!0},{number:"7d8",text:"Remove the non-rebreathing mask from the patient's face with your nondominant hand.",isSubStep:!0},{number:"7d9",text:"Insert the catheter gently through the nostril, directing it toward the septum and the floor of the nasal cavity, without applying suction.",isSubStep:!0,note:"If resistance is felt, gently twist the catheter; however, if resistance is still felt, withdraw the catheter, and attempt to insert it in the other nostril. Utilizing a nasopharyngeal airway will reduce mucosa damage and assists when multiple passes are necessary."},{number:"7d10",text:'Ask the patient to assume a "sniffing" position once the catheter reaches the lower pharynx.',isSubStep:!0},{number:"7d11",text:"Continue to advance the catheter until the patient coughs or resistance is met.",isSubStep:!0,note:"If resistance is met, withdraw the catheter approximately 1 centimeter."},{number:"7d12",text:"Apply suction for no longer than 15 seconds while simultaneously withdrawing the catheter.",isSubStep:!0},{number:"7d13",text:"Reapply the non-rebreathing mask on the patient with your nondominant hand and hyper-oxygenate for at least one minute before attempting to suction again.",isSubStep:!0},{number:"7d14",text:"Clear the catheter by suctioning sterile water.",isSubStep:!0},{number:"7d15",text:"Repeat steps 7d(1) to 7d(14) as needed.",isSubStep:!0},{number:"7d16",text:"Remove the non-rebreathing mask and return the patient to the original oxygen device, if any.",isSubStep:!0},{number:"8",text:"Reoxygenate the patient or ventilate for at least five assisted ventilations, as appropriate."},{number:"9",text:"Observe the patient for signs of hypoxemia."},{number:"9a",text:"Signs of cyanosis.",isSubStep:!0,warning:"Discontinue suctioning immediately if severe changes in color or pulse rate occur."},{number:"9b",text:"Increased or decreased pulse rate.",isSubStep:!0},{number:"10",text:"Place the patient in a position of comfort."},{number:"11",text:"Record the procedure on the SF 600 or EMR."}]},{taskNumber:"081-68W-0230",title:"Place an Intermediate Airway Device",conditions:"You are in an operational environment. You have an unconscious patient in need of a definitive airway. You will have access to Committee on Tactical Combat Casualty Care (CoTCCC), recommended intermediate airway device, gloves, syringe, stethoscope, bag valve mask (BVM), pulse oximeter, pen, clipboard, combat lifesaver qualified Soldiers, DD Form 1380 (Tactical Combat Casualty Care (TCCC) Card (Instructions)), and the patient's SF 600, (Chronological Record of Medical Care), or electronic medical record (EMR).",standards:"Place an intermediate airway device in accordance with PHTLS Prehospital Trauma Life Support and Tactical Combat Casualty Care (TCCC) Guidelines while adhering to all warnings and cautions without error, using the task GO/NO GO checklist.",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation (BSI) precautions by wearing gloves and eye protection as a minimal standard of protection.",gradedSteps:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22"],performanceSteps:[{number:"1",text:"Take BSI precautions."},{number:"2",text:"Inspect the upper airway for visible obstruction."},{number:"3",text:"Direct assistant to hyperventilate the patient for a minimum of 30 seconds.",note:"If using a supraglottic airway device continue with steps 3 through 16. If using a subglottic airway continue with steps 17 through 22."},{number:"4",text:"Test cuff and inflation system for leaks by injecting the maximum recommended volume of air into the cuffs (size 3: 60 milliliter [ml], size 4: 80 ml, size 5: 90 ml)."},{number:"5",text:"Remove all air from both cuffs prior to insertion."},{number:"6",text:"Apply lubricant to beveled distal tip and posterior aspect of the tube."},{number:"7",text:'Position the head in the "sniffing" position. Verbalize alternate position is the "neutral" position.'},{number:"8",text:"Hold the supraglottic airway device at the connector with dominant hand. With nondominant hand perform a tongue and chin lift."},{number:"9",text:"Introduce tip into mouth and advance behind base of tongue.",note:"With the supraglottic airway device on the corner of the mouth, rotate it laterally 45-90 degrees, such that the blue orientation line is touching the corner of mouth."},{number:"10",text:"Pass the supraglottic airway device towards the back of tongue, rotate tube back to midline (blue orientation line faces chin)."},{number:"11",text:"Advance tube until base of connector is aligned with teeth or gums.",note:"Without exerting excessive force."},{number:"12",text:"Using the syringe provided, inflate the cuffs of the supraglottic airway device with the appropriate volume of air (size 3: 45-60 ml, size 4: 60-80 ml, size 5: 70-90 ml)."},{number:"13",text:"Attach the BVM to the supraglottic airway device. While gently bagging the patient to assess ventilation, simultaneously withdraw the supraglottic airway device until ventilation is easy and free flowing (large tidal volume with minimal airway pressure)."},{number:"14",text:"Direct the combat lifesaver to ventilate casualty with the BVM, auscultate lung fields and watch for rise and fall of the chest to confirm tube placement. Attach a pulse oximeter."},{number:"15",text:"Secure device to the casualty."},{number:"16",text:"Document information onto DD Form 1380, SF 600, or EMR."},{number:"17",text:"Remove subglottic airway device from the protective cradle.",note:"a. Apply lubricant on the tray of the protective cradle and lubricate the subglottic airway on all sides. b. Remove any excess lubricant.",warning:"Casualties with facial trauma or facial burns with suspected inhalation injury, an extraglottic airway (EGA) device might not be adequate. Surgical cricothyroidotomy may be a better option.",caution:"An EGA device will only be accepted if the patient is unconscious."},{number:"18",text:"Open the patient's airway with the head tilt chin lift.",note:"a. Use scissor technique to open the mouth. b. If patient has suspected C-spine injury use a jaw thrust."},{number:"19",text:"Insert the subglottic airway device by grasping the device by the bite block and introducing the leading soft tip into the mouth of the patient towards the hard palate.",note:"a. Tip of subglottic airway should be in upper esophageal opening with cuff located against laryngeal framework. b. Glide the device downwards and backwards along the hard palate with a continuous but gentle push until a definitive resistance is felt."},{number:"20",text:"Secure the device with tape or securing strap."},{number:"21",text:"Monitor end tidal carbon dioxide (CO2) and attach pulse oximeter to patient."},{number:"22",text:"Document information onto DD Form 1380, SF 600, or EMR."}]},{taskNumber:"081-68W-2001",title:"Operate a Simplified Automated Ventilator",conditions:"You are in an operational environment and have a patient requiring lifesaving ventilator support to manage acute respiratory failure. You are provided with a Simplified Automated Ventilator (SAVe) device, Rosdahl's Textbook of Basic Nursing, pen, clipboard, notepad, DD 1380 (Tactical Combat Casualty Care (TCCC) Card (Instructions)), the patient's SF 600 (Chronological Record of Medical Care), or electronic medical record.",standards:"Operate the SAVe maintaining adequate ventilation, in accordance with Rosdahl's Textbook of Basic Nursing, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",performanceSteps:[{number:"1",text:"Look, listen and feel for breathing and pulse.",warning:"Do not use a mask with a filter and make sure any ports on the mask are sealed with caps."},{number:"2",text:"Verify the airway is not blocked."},{number:"3",text:"Open cover labeled Patient Breathing Circuit and connect patient circuit in the well."},{number:"4",text:"Insert airway device.",note:"Connect the other end of the patient circuit to the airway device. Connect the other end of the patient circuit to the airway mask."},{number:"5",text:"Engage the SAVe and rotate the knob one position from off to the on."},{number:"6",text:"Open airway with head tilt chin lift or jaw thrust maneuver."},{number:"7",text:"Use two hands to maintain the seal of the mask.",note:"Verify adequate chest rise, feel for leaks, and listen for exhale at the valve."},{number:"8",text:"Verify battery life and that there are no alarms."},{number:"9",text:"Select six liters per minute.",note:'Supplemental oxygen: connect oxygen tube to port under the cover labeled "O2". Medical-grade air.'},{number:"10",text:"Monitor the patient and alarms."}]},{taskNumber:"081-000-0122",title:"Perform a Surgical Cricothyroidotomy",conditions:"In an operational environment, you have a casualty requiring a surgical cricothyroidotomy. You have a scalpel, tracheal hook, tracheotomy tube or any non-collapsible tube, alcohol swabs, bag valve mask (BVM), stethoscope, gloves, 2x2 gauze, and tape.",standards:"Perform a surgical cricothyroidotomy in accordance with Tactical Combat Casualty Care (TCCC) Guidelines and Committee on Tactical Combat Casualty Care (CoTCC), while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",performanceSteps:[{number:"1",text:"Don gloves.",note:"In a true emergency, there may not be time for sterile preparation of the skin.",warning:"Casualties with a total upper airway obstruction, inhalation burns, or massive maxillofacial trauma who cannot be ventilated by other means are candidates for a surgical cricothyroidotomy."},{number:"2",text:"Hyperextend the casualty's neck.",warning:"Do not hyperextend the casualty's neck if a cervical injury is suspected."},{number:"2a",text:"Place the casualty in the supine position.",isSubStep:!0},{number:"2b",text:"Place a blanket or poncho rolled up under the casualty's neck or between the shoulder blades to hyperextend the neck.",isSubStep:!0},{number:"3",text:"Locate the cricothyroid membrane."},{number:"3a",text:"Place a finger of the nondominant hand on the thyroid cartilage (Adam's apple) and slide the finger down to the cricoid cartilage.",isSubStep:!0},{number:"3b",text:"Palpate for the soft cricothyroid membrane below the thyroid cartilage and just above the cricoid cartilage.",isSubStep:!0},{number:"3c",text:"Slide the index finger down into the depression between the thyroid and cricoid cartilage.",isSubStep:!0},{number:"3d",text:"Prepare the skin over the membrane with an alcohol swab.",isSubStep:!0},{number:"4",text:"Stabilize the larynx with the nondominant hand."},{number:"5",text:"Perform a 1 1/2-inch vertical incision through the skin over the cricothyroid membrane with the cutting instrument in the dominant hand.",note:"A vertical incision will allow visualization of the cricothyroid membrane but keep the scalpel blade away from the lateral aspect of the neck. This is important because of the large blood vessels located in the lateral areas of the neck.",caution:"Do not cut the cricothyroid membrane with this incision."},{number:"6",text:"Maintain the opening of the skin incision by pulling the skin taut with the fingers of the nondominant hand."},{number:"7",text:"Stabilize the larynx with one hand while cutting horizontally through the cricothyroid membrane."},{number:"8",text:"Insert a commercially designed cricothyroidotomy hook or improvise with the tip of an 18-gauge needle.",note:"Formed into a hook through the opening, when hooking the cricoid cartilage and lifting to stabilize the opening."},{number:"9",text:"Insert the end of the tracheotomy tube or endotracheal tube through the opening and towards the lungs.",note:"The tube should be in the trachea and directed toward the lungs. Inflate the cuff with 10 cubic centimeters (cc) of air."},{number:"10",text:"Auscultate lung fields and watch for rise and fall of the chest to confirm tube placement."},{number:"11",text:"Assess the casualty for spontaneous respirations (10 seconds)."},{number:"12",text:"Attach a pulse oximeter to the casualty, if available."},{number:"13",text:"Assist with ventilations when respirations are less than 8 or greater than 30 or a pulse oximeter reading is less than 90%.",note:"Direct an assistant to ventilate the casualty with a BVM, if necessary."},{number:"14",text:"Secure the tube, using tape, cloth ties, or other measures, while applying a dressing to further protect the tube and incision."},{number:"15",text:"Monitor the casualty's respirations on a regular basis."},{number:"15a",text:"Reassess air exchange and placement every time the casualty is moved.",isSubStep:!0},{number:"15b",text:"Assist with respirations if the respiratory rate falls below 8 or rises above 30 per minute.",isSubStep:!0},{number:"16",text:"Document treatment on a DD Form 1380 (Tactical Combat Casualty Care (TCCC) Card (Instructions)) or the electronic medical record."}]},{taskNumber:"081-68W-0254",title:"Perform an Otolaryngology Exam",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"You are in an operational environment. You have a patient requiring an ears, eyes, nose, and throat examination. You will be provided with an otoscope, disposable speculum attachments, tongue blades, penlight, pen, Snellen chart, and SF 600 (Chronological Record of Medical Care) or electronic medical record.",standards:"Perform an otolaryngology exam in accordance with Tintinalli's Emergency Medicine without causing further injury to the patient while adhering to all warnings and cautions, without error, using the task GO/NO GO criteria.",gradedSteps:["1","2","3","4","5","6","7","8"],performanceSteps:[{number:"1",text:"Obtain equipment and supplies."},{number:"2",text:"Identify patient while inquiring about allergies."},{number:"3",text:"Provide privacy and safety for the patient."},{number:"3a",text:"Place patient in a position of comfort as long as the procedure permits.",isSubStep:!0},{number:"3b",text:"Explain procedure to the patient.",isSubStep:!0},{number:"4",text:"Perform a physical exam of the eyes."},{number:"4a",text:"Obtain patient history.",isSubStep:!0,note:"An accurate history is needed in establishing a possible cause for the eye problem."},{number:"4a1",text:"Mechanism of injury (if there is a history of injury).",isSubStep:!0},{number:"4a1a",text:"Blunt trauma verses penetrating injury.",isSubStep:!0},{number:"4a1b",text:"Was there a projectile or missile injury? (Glass from a motor vehicle accident.)",isSubStep:!0},{number:"4a1c",text:"Thermal, chemical or laser burn?",isSubStep:!0},{number:"4a2",text:"Does the patient wear glasses, contact lenses or safety goggles?",isSubStep:!0},{number:"4a3",text:"History of eye disease or previous eye trauma or surgery?",isSubStep:!0},{number:"4a4",text:"Is there eye pain or loss of vision? If there is vision loss, is it in one eye or both?",isSubStep:!0},{number:"4b",text:"Perform a physical exam.",isSubStep:!0,warning:"In cases of ocular burns, the eyes must be flushed first. Once the mechanism of the burn has been eliminated, then a visual acuity screening is accomplished."},{number:"4b1",text:"Inspect and palpate.",isSubStep:!0,note:"Avoid putting pressure on the globe while performing the exam."},{number:"4b2",text:"Obtain visual acuity using the following methods.",isSubStep:!0},{number:"4b2a",text:"Read any available printed material.",isSubStep:!0},{number:"4b2b",text:"Count fingers.",isSubStep:!0,note:"If the patient is unable to count fingers, assess their ability to detect hand motion 1 to 2 inches in front of the eye."},{number:"4b2c",text:"Distinguish between light and dark.",isSubStep:!0,caution:"When equipment, light, or space does not permit, a gross vision examination is recommended as opposed to no vision exam."},{number:"4b2d",text:"Read the Snellen chart (eye chart).",isSubStep:!0,note:"If the patient has corrective lenses, test without glasses first, and then test with glasses on."},{number:"4b3",text:"Note any drainage or bleeding from the eye.",isSubStep:!0},{number:"4b4",text:"Inspect eyelids for:",isSubStep:!0},{number:"4b4a",text:"Ability to open wide and close completely.",isSubStep:!0},{number:"4b4b",text:"Edema.",isSubStep:!0},{number:"4b4c",text:"Discoloration.",isSubStep:!0},{number:"4b4d",text:"Foreign bodies.",isSubStep:!0},{number:"4b4e",text:"Position of the lids in relationship to the eyeballs.",isSubStep:!0},{number:"4b5",text:"Inspect conjunctiva and sclera for:",isSubStep:!0,note:"Ask patient to look upward as you pull the lower lid downward. Then tell the patient to look down as you pull the upper lid upward."},{number:"4b5a",text:"Color of conjunctiva (pink to dark color is normal).",isSubStep:!0},{number:"4b5b",text:"Erythema or exudate.",isSubStep:!0},{number:"4b5c",text:"Color of sclera (white is normal).",isSubStep:!0,note:"Patients who have darker pigmented skin may have scattered areas of brown pigments, a normal finding, but this observation should be noted."},{number:"4b6",text:"Inspect cornea (should be clear and avascular).",isSubStep:!0},{number:"4b7",text:"Inspect pupil  note any irregularity in the shape of the pupils.",isSubStep:!0,note:"Unequal size of pupils (anisocoria) may be congenital (approximately 20% of healthy people have minor or noticeable differences in pupil size, but pupillary reaction is normal.)"},{number:"4b7a",text:"Pupils should be equal, round, regular, and reactive to light.",isSubStep:!0},{number:"4b7b",text:"Assess extra ocular movement.",isSubStep:!0},{number:"4b8",text:"Test pupillary reaction to light both directly and consensually.",isSubStep:!0},{number:"4b8a",text:"Dim the lights in the room so that the pupils dilate.",isSubStep:!0,note:"Do not shine into both eyes simultaneously."},{number:"4b8b",text:"Shine a penlight directly into one eye and observe the pupil constrict.",isSubStep:!0},{number:"4b8c",text:"Note consensual reaction response of the opposite pupil constricting simultaneously with the tested pupil.",isSubStep:!0},{number:"5",text:"Perform a physical exam of the ears."},{number:"5a",text:"Obtain patient history.",isSubStep:!0},{number:"5a1",text:"Ask patient about symptoms associated with ear problems, pain, swelling, redness, drainage.",isSubStep:!0},{number:"5a2",text:"Ask patient about history of recent illness, upper respiratory infection, sore throat, or recent swimming.",isSubStep:!0},{number:"5a3",text:"Ask patient about any hearing loss.",isSubStep:!0},{number:"5a4",text:"Ask the patient about possible embedded foreign objects in ear.",isSubStep:!0},{number:"5b",text:"Perform physical exam.",isSubStep:!0,note:"Physical examination consists of inspection, palpation and otoscopic examination of the ear."},{number:"5b1",text:"Examine external pinna for erythema, swelling, deformity, trauma, or drainage from canal.",isSubStep:!0},{number:"5b2",text:"Inspect the ear size, shape, symmetry, landmarks, color, and position on the head; palpate the auricle for tenderness and swelling.",isSubStep:!0},{number:"5b3",text:"Palpate the ear and mastoid process.",isSubStep:!0},{number:"5b4",text:"Inspect the external auditory canal (EAC) for discharge or cerumen (earwax).",isSubStep:!0,caution:"Consult with your medical officer before completing an otoscopic exam on a child."},{number:"5b5",text:"Inspect the EAC and middle ear using the otoscope.",isSubStep:!0,note:"Use the largest speculum the ear canal will accommodate."},{number:"5b5a",text:"Examine the normal ear first.",isSubStep:!0},{number:"5b5b",text:"Hold the otoscope handle between your thumb and fingers; brace your hand against the patient's face.",isSubStep:!0},{number:"5b5c",text:"Pull the auricle back and out on an adult patient.",isSubStep:!0},{number:"5b5d",text:"Visualize the canal as you insert the speculum.",isSubStep:!0},{number:"5b5e",text:"Slowly insert the speculum noting discharge, lesions, narrowing of the EAC, foreign bodies, or presence of cerumen (earwax).",isSubStep:!0,note:"A healthy tympanic membrane or eardrum may be pearly gray to amber in color. Redness indicates infection."},{number:"6",text:"Perform a physical exam of the nose and sinuses."},{number:"6a",text:"Obtain patient history.",isSubStep:!0},{number:"6a1",text:"Ask about recent upper respiratory infection symptoms, drainage, bleeding, congestion, trauma, pressure, recent dental problems, and pain.",isSubStep:!0},{number:"6a2",text:"Ask about any medications, prior history, or chronic illnesses.",isSubStep:!0},{number:"6a3",text:"Ask about duration of symptoms.",isSubStep:!0},{number:"6a4",text:"Ask about any allergies or family history of allergies.",isSubStep:!0},{number:"6b",text:"Perform physical exam.",isSubStep:!0},{number:"6b1",text:"Inspect for shape, size, symmetry, color, and presence of deformities or lesions.",isSubStep:!0},{number:"6b2",text:"Palpate the external nose for tenderness, swelling or masses.",isSubStep:!0},{number:"6b3",text:"Inspect paranasal sinuses.",isSubStep:!0},{number:"6b3a",text:"Inspect the frontal and maxillary sinus area for swelling.",isSubStep:!0},{number:"6b3b",text:"Palpate the frontal and maxillary sinuses for tenderness.",isSubStep:!0,note:"Only the maxillary and frontal sinuses are accessible to physical examination."},{number:"7",text:"Perform a physical examination of the throat."},{number:"7a",text:"Obtain patient history.",isSubStep:!0},{number:"7a1",text:"Ask patient about recent symptoms, bad breath, sore throat, hoarseness, difficulty swallowing, and inability to open mouth.",isSubStep:!0},{number:"7a2",text:"Ask patient about duration of symptoms, smoking habits, and drooling.",isSubStep:!0},{number:"7b",text:"Perform physical exam.",isSubStep:!0},{number:"7b1",text:"Inspect and palpate the patient's lips for symmetry, color, edema, and surface abnormalities.",isSubStep:!0},{number:"7b2",text:"Inspect buccal mucosa, teeth, and gums.",isSubStep:!0,note:"If patient wears dentures, have them remove their dentures and then open their mouth. Gums should have a slightly stippled, pink appearance with a clearly defined, tight margin at each tooth."},{number:"7b2a",text:'Have the patient to open their mouth, stick out their tongue and say "ah."',isSubStep:!0},{number:"7b2b",text:"Use a disposable tongue blade and bright light to inspect mucous membrane of the entire mouth, teeth, posterior pharynx, and tonsils.",isSubStep:!0,note:"Mucous membranes should look pinkish-red, smooth, and moist. Take note of any missing teeth, cavities, ulcerations, and lesions."},{number:"7b3",text:"Inspect the tongue.",isSubStep:!0,note:"The tongue should appear dull red, moist, and glistening; should be smooth with increasing roughness."},{number:"7b4",text:"Inspect the oropharynx.",isSubStep:!0,note:"The whitish hard palate should be dome shaped. The pinker soft palate should be continuous with the hard palate."},{number:"8",text:"Document findings on the SF 600."}]},{taskNumber:"081-68W-0241",title:"Treat Common Ear Disorders",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation (BSI) precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment, you must treat a patient complaining of ear pain. All other immediate life threats have been treated and managed. You have performed a patient care handwash and taken BSI precautions. You are provided with an otoscope, disposable speculum attachments, penlight or other light source, pen, and SF 600 (Chronological Record of Medical Care) or electronic medical record (EMR).",standards:"Treat common ear disorders in accordance with Tintinalli's Emergency Medicine, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",gradedSteps:["1","2","3","4","5","6","7"],performanceSteps:[{number:"1",text:"Gather equipment and supplies."},{number:"2",text:"Identify the patient."},{number:"2a",text:"Ask the patient's name.",isSubStep:!0},{number:"2b",text:"Ask the patient's date of birth.",isSubStep:!0},{number:"3",text:"Explain the procedure to the patient."},{number:"3a",text:"Provide privacy and safety for the patient.",isSubStep:!0},{number:"3b",text:"Ask about any known allergies.",isSubStep:!0},{number:"3c",text:"Place the patient in a position of comfort, as long as the procedure permits.",isSubStep:!0},{number:"4",text:"Perform an otolaryngology examination (see task 081-68W-0254, Perform an Otolaryngology Exam)."},{number:"5",text:"Identify common ear disorders.",note:"Over 50% of ear pain complaints are dental in nature."},{number:"5a",text:"Cerumen impaction  wax in the ears.",isSubStep:!0},{number:"5a1",text:"Common causes  wax is a natural byproduct of the body. Occasionally, cerumen impaction is caused by the improper use of cotton-tipped swab.",isSubStep:!0},{number:"5a2",text:"Signs and symptoms can include hearing loss and dizziness. It rarely causes pain.",isSubStep:!0},{number:"5b",text:"Otitis externa (OE) (swimmer's ear) inflammation or infection of the external auditory canal.",isSubStep:!0},{number:"5b1",text:"Common causes  excessive moisture in the ear canal (swimming, use of ear plugs or hearing aids) or trauma are the most common causes of OE. Bacterial or viral causes are also common. It is rarely a fungal infection.",isSubStep:!0},{number:"5b2",text:"Signs and symptoms include ear pain, ear canal swelling, drainage, and increased pain on movement of the auricle. A low-grade fever may be present.",isSubStep:!0},{number:"5c",text:"Otitis media (OM)  middle ear infection. OM is a condition that is typically unilateral (occurs in one ear).",isSubStep:!0},{number:"5c1",text:"Common causes  viral and bacterial.",isSubStep:!0},{number:"5c2",text:"Signs and symptoms include fever, ear pain, decreased hearing in the affected ear, and the tympanic membrane will be bulging and red.",isSubStep:!0,note:"The cone of light that is commonly seen with an otoscopic examination will generally be absent."},{number:"6",text:"Provide treatment for common ear disorders.",note:"Ear irrigation or uses of ear drops that will dissolve the earwax are effective."},{number:"6a",text:"Cerumen impaction.",isSubStep:!0},{number:"6a1",text:"Perform an ear irrigation, if trained to do so.",isSubStep:!0},{number:"6a2",text:"Refer to a medical officer (MO) after the irrigation.",isSubStep:!0},{number:"6b",text:"OE (swimmer's ear).",isSubStep:!0},{number:"6b1",text:"Referral to MO.",isSubStep:!0},{number:"6b2",text:"Oral antibiotics and pain medication will be prescribed.",isSubStep:!0,note:"Irrigation of the ear canal is not recommended. MO may prescribe antibiotic or steroid ear drops as the first line of treatment and a nonsteroidal anti-inflammatory drug (NSAID) such as ibuprofen for pain."},{number:"6c",text:"OM.",isSubStep:!0},{number:"6c1",text:"Referral to MO.",isSubStep:!0},{number:"6c2",text:"Oral antibiotics and pain medication will be prescribed.",isSubStep:!0},{number:"7",text:"Document treatment noting patient's response to treatment on appropriate form."}]},{taskNumber:"081-68W-0243",title:"Treat Common Throat Disorders",conditions:"In an operational environment you must treat a patient complaining of a sore throat. All other immediate life threats have been treated and managed. You have performed a patient care handwash and taken BSI precautions. You are provided with a tongue blades, penlight, or other light source, pen, and SF 600 (Chronological Record of Medical Care) or electronic medical record.",standards:"Treat common throat disorders in accordance with Tintinalli's Emergency Medicine, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",gradedSteps:["1","2","3","4","5","6","7"],performanceSteps:[{number:"1",text:"Obtain supplies and equipment."},{number:"2",text:"Identify the patient."},{number:"2a",text:"Ask patient's full name.",isSubStep:!0},{number:"2b",text:"Ask patient's date of birth.",isSubStep:!0},{number:"3",text:"Explain the procedure to the patient."},{number:"3a",text:"Provide privacy and safety for the patient.",isSubStep:!0},{number:"3b",text:"Ask about known allergies.",isSubStep:!0},{number:"3c",text:"Place patient in position of comfort, as long as the procedure permits.",isSubStep:!0},{number:"4",text:"Perform an otolaryngology exam (see task 081-68W-0254, Perform an Otolaryngology Exam)."},{number:"5",text:"Identify throat disorders."},{number:"5a",text:"Upper respiratory infection (URI)  acute infection of the upper airway.",isSubStep:!0},{number:"5a1",text:"Common causes  URIs are usually a result of different viruses but can be bacterial in nature.",isSubStep:!0},{number:"5a2",text:"Signs and symptoms.",isSubStep:!0},{number:"5a2a",text:"Sore throat.",isSubStep:!0},{number:"5a2b",text:"Cough which may be either productive or nonproductive.",isSubStep:!0},{number:"5a2c",text:"Sputum may be clear or purulent.",isSubStep:!0},{number:"5a2d",text:"Low-grade fever, possible.",isSubStep:!0},{number:"5a2e",text:"Nasal congestion or discharge.",isSubStep:!0},{number:"5a2f",text:"Sinus pressure.",isSubStep:!0,warning:"Streptococcal (strep) pharyngitis is spread by person-to-person contact with nasal secretions or saliva, often among family or household members."},{number:"5a2g",text:"Appearance of a slightly reddened pharynx with mucous streaking.",isSubStep:!0},{number:"5b",text:"Strep pharyngitis  infection of the posterior pharynx or tonsils.",isSubStep:!0,note:"It is most common in the late fall, winter, and early spring."},{number:"5b1",text:"Common causes  most common is group A streptococcus bacteria.",isSubStep:!0},{number:"5b2",text:"Signs and symptoms.",isSubStep:!0,note:"In some individuals, strep throat is very mild with only a few of these symptoms. In others, strep throat is severe. The onset is usually sudden."},{number:"5b2a",text:"Severe sore throat.",isSubStep:!0},{number:"5b2b",text:"Fever.",isSubStep:!0},{number:"5b2c",text:"Tender or swollen neck glands.",isSubStep:!0},{number:"5b2d",text:"Nausea.",isSubStep:!0},{number:"5b2e",text:"Malaise.",isSubStep:!0},{number:"5b2f",text:"Exudate (pus) is commonly seen on reddened tonsils and pharynx.",isSubStep:!0},{number:"5b2g",text:"Headache.",isSubStep:!0},{number:"5b2h",text:"Chills.",isSubStep:!0},{number:"5c",text:"Peri-tonsillar abscess (PTA)  bacterial infection of the tonsils, which spreads into a cellulitis and abscess.",isSubStep:!0},{number:"5c1",text:'Common causes  usually results as a complication of "strep" pharyngitis.',isSubStep:!0,caution:"An abscess is a collection of pus that forms near an area of infected skin or to the soft tissue. The abscess can cause pain, swelling, and may block the throat."},{number:"5c2",text:"Signs and symptoms.",isSubStep:!0,caution:"An abscess is a collection of pus that forms near an area of infected skin or to the soft tissue. The abscess can cause pain, swelling, and may block the throat."},{number:"5c2a",text:"The abscess usually affects one side of the mouth resulting in a tonsil deviating toward the midline.",isSubStep:!0,note:"A PTA forms in the throat tissues next to one of the tonsils."},{number:"5c2b",text:"Ear pain on the same side as the abscess.",isSubStep:!0},{number:"5c2c",text:"Severe sore throat that is isolated to one side.",isSubStep:!0},{number:"5c2d",text:"Spasm in the muscles of the jaw or trismus (difficulty in opening the mouth).",isSubStep:!0},{number:"5c2e",text:"Difficulty swallowing saliva.",isSubStep:!0},{number:"5c2f",text:'Muffled voice, often described as "hot potato" voice (sounds as if you have a mouthful of hot potato when you talk).',isSubStep:!0},{number:"5c2g",text:"Fever may be present.",isSubStep:!0},{number:"5c2h",text:"Chills.",isSubStep:!0},{number:"5d",text:"Infectious mononucleosis  a viral infection that usually presents as a sore throat.",isSubStep:!0},{number:"5d1",text:"Common cause  viral.",isSubStep:!0},{number:"5d2",text:"Signs and symptoms.",isSubStep:!0},{number:"5d2a",text:"Lymph node (gland) enlargement of the neck.",isSubStep:!0},{number:"5d2b",text:"Shaggy, white-purple tonsillar exudate.",isSubStep:!0},{number:"5d2c",text:"Abdominal pain may indicate inflammation of the spleen.",isSubStep:!0},{number:"6",text:"Provide treatment."},{number:"6a",text:"URI.",isSubStep:!0},{number:"6a1",text:"Referral to medical officer (MO).",isSubStep:!0},{number:"6a2",text:"A cough suppressant, decongestant, throat lozenges and an analgesic for fever and body aches will be prescribed.",isSubStep:!0,note:"Antibiotics are not indicated for viral URIs."},{number:"6b",text:"Strep pharyngitis.",isSubStep:!0},{number:"6b1",text:"Referral to MO.",isSubStep:!0,note:"Diagnosis is confirmed with a throat culture however the MO may treat for this condition based on symptoms alone."},{number:"6b2",text:"Antibiotics will be prescribed by the MO.",isSubStep:!0,note:"Penicillin has been traditionally recommended and is still very effective.",caution:"Even though the sore throat usually gets better on its own, individuals who have strep throat must take antibiotics to prevent more serious complications of this infection, including rheumatic fever."},{number:"6c",text:"PTA.",isSubStep:!0,warning:"This is a surgical emergency."},{number:"6c1",text:"Referral to MO immediately.",isSubStep:!0},{number:"6c2",text:"PTAs require urgent surgical drainage and antibiotic therapy.",isSubStep:!0},{number:"6d",text:"Infectious mononucleosis.",isSubStep:!0},{number:"6d1",text:"Referral to MO.",isSubStep:!0,caution:"Patients are advised to avoid contact sports (football) for at least 30 days after diagnosis due to the increased risk of splenic rupture (rupture of the spleen)."},{number:"6d2",text:'The MO may order a blood test or rapid mononucleosis test along with a throat culture to rule out "strep" and confirm mononucleosis.',isSubStep:!0},{number:"7",text:"Document treatment on appropriate form."}]},{taskNumber:"081-68W-0242",title:"Treat Sinus Disorder",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation (BSI) precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment you must treat a patient complaining of sinus pain and pressure. All other immediate life threats have been treated and managed. You have performed a patient care handwash and taken BSI precautions. You are provided with an otoscope, disposable speculum attachments, penlight, or other light source, pen, and SF 600 (Chronological Record of Medical Care).",standards:"Treat common sinus disorder in accordance with Tintinalli's Emergency Medicine, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",gradedSteps:["1","2","3","4","5","6","7"],performanceSteps:[{number:"1",text:"Gather equipment and supplies."},{number:"2",text:"Identify the patient."},{number:"2a",text:"Ask the patient's name.",isSubStep:!0},{number:"2b",text:"Ask the patient's date of birth.",isSubStep:!0},{number:"3",text:"Explain the procedure to the patient."},{number:"3a",text:"Provide privacy and safety for the patient.",isSubStep:!0},{number:"3b",text:"Explain procedure to patient.",isSubStep:!0},{number:"3c",text:"Ask about any known allergies.",isSubStep:!0},{number:"3d",text:"Place patient in position of comfort, as long as the procedure permits.",isSubStep:!0},{number:"4",text:"Perform an Otolaryngology examination (see task 081-68W-0254, Perform an Otolaryngology Exam)."},{number:"5",text:"Identify the sinus disorder.",note:"The sensitized immune system produces antibodies to these allergens, which cause chemicals called histamines to be released into the blood stream."},{number:"5a",text:"Seasonal allergies or allergic rhinitis (Hay fever)  rhinitis is an inflammation of the nasal membranes.",isSubStep:!0},{number:"5a1",text:"Common causes  patients often have family history of multiple allergic disorders including hay fever, asthma, and eczema.",isSubStep:!0},{number:"5a2",text:"Signs and symptoms include sneezing, swelling, and itching (pruritus) of the affected tissue, increased mucous production (rhinorrhea), nasal congestion, hives, and rashes.",isSubStep:!0,note:"Signs and symptoms are predominately in the nose and eyes."},{number:"5b",text:"Sinus Infection (sinus pain or fullness)  general term.",isSubStep:!0},{number:"5b1",text:"Common causes  sinus infection may be caused by anything interfering with airflow into the sinuses and the drainage of mucous out of the sinuses.",isSubStep:!0},{number:"5b2",text:"Signs and symptoms can include those generally associated with colds and allergies.",isSubStep:!0},{number:"5c",text:"Acute sinusitis  inflammation or infection of the paranasal sinuses.",isSubStep:!0},{number:"5c1",text:"Common causes  infection by the pathogenic microorganism. These can be bacterial, viral or an allergen.",isSubStep:!0},{number:"5c2",text:"Signs and symptoms include headache, facial tenderness or pain, fever, cloudy or discolored nasal drainage, nasal stuffiness, sore throat, and a cough.",isSubStep:!0},{number:"6",text:"Provide treatment for a sinus disorder."},{number:"6a",text:"Increase fluids.",isSubStep:!0},{number:"6b",text:"Decongestant will be prescribed.",isSubStep:!0},{number:"6c",text:"Avoid antihistamines. Antihistamines dry and thicken the nasal mucosal areas.",isSubStep:!0},{number:"6d",text:"Refer to medical officer for antibiotics.",isSubStep:!0},{number:"7",text:"Document treatment on appropriate form."}]},{taskNumber:"081-68W-2036",title:"Perform End Tidal Carbon Dioxide Monitoring",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment, you encounter a casualty who requires end-tidal carbon dioxide (EtCO2) monitoring. You have a vital signs monitor or manual defibrillator with capnography capability, an EtCO2 sampling with a 15 millimeter (mm) connector, or an EtCO2 nasal cannula, pen, clipboard, notepad, DD Form 1380 (Tactical Combat Casualty Care (TCCC) Card (Instructions) (Instructions)), the patient's SF 600 (Chronological Record of Medical Care), or electronic medical record (EMR).",standards:"Perform EtCO2 monitoring in accordance with Nancy Caroline's Emergency Care in the Streets, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",gradedSteps:["1","2","3","4","5","6","7"],performanceSteps:[{number:"1",text:"Don personal protective equipment."},{number:"2",text:"Turn on vital signs monitor or monitor defibrillator with EtCO2 capnography capability."},{number:"3",text:"Attach sampling line of the EtCO2 device to the vital signs monitor or monitor defibrillator."},{number:"4",text:"Attach the EtCO2 device to the patient."},{number:"4a",text:"If using the EtCO2 nasal canula, place the two prongs of the nasal canula at the opening of the nares with the concave side of the sampling device facing the mouth.",isSubStep:!0},{number:"4b",text:"If using the EtCO2 sampling line that attaches to the standard 15 mm tube connector for intubation tubes, and tube style supraglottic airways, in conjunction with an impedance threshold device (ITD), connect the EtCO2 sampling line connector directly to the tube style airway connector and then attach the ITD above the sampling line connector.",isSubStep:!0},{number:"5",text:"Observe the monitor interface of the vital signs monitor or monitor defibrillator for an EtCO2 numerical reading.",note:"Normal EtCO2 numerical values range between 35-45 millimeters of mercury (mmHg)."},{number:"6",text:"Interpret the EtCO2 capnography wave form."},{number:"6a",text:"Observe phase 1 (A and B baseline wave) of the wave form.",isSubStep:!0},{number:"6b",text:"Observe phase 2 (B and C expiratory upslope) of the wave form.",isSubStep:!0},{number:"6c",text:"Observe phase 3 (C and D expiratory or alveolar plateau) of the wave form.",isSubStep:!0},{number:"6d",text:"Observe phase 4 (D and E inspiratory downstroke) of the wave form.",isSubStep:!0},{number:"7",text:"Document the procedure."}]},{taskNumber:"081-000-0128",title:"Administer Whole Blood",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment, you have a trauma patient presenting with hemorrhagic shock and must administer WB. You are provided a constricting band, antiseptic wipes, 450-500 milliliter (ml) blood collection bag, blood donation bag label, permanent marking pen, 4x4 gauze, 3-inch tape, hemostats, personal protective equipment, donor bag measuring device (digital scale or appropriate length of parachute 550 cord), and a sharp's container.",standards:"Administer WB in accordance with Tactical Combat Casualty Care (TCCC) Guidelines, and Whole Blood Transfusion CPG ID: 21 by Joint Trauma System (JTS), while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",gradedSteps:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],performanceSteps:[{number:"1",text:"Confirm the patient's blood type."},{number:"2",text:"Prepare to collect blood from the donor.",note:"The best practice for donor collection is to pre-draw and cold-store WB during pre-mission preparations. Use donors that will not be engaged in the mission."},{number:"2a",text:"Apply a constricting band at least two inches above the venipuncture site.",isSubStep:!0,note:"Infusion of a blood pack should be initiated within 30 minutes of being issued."},{number:"2b",text:"Identify the vein that will be used.",isSubStep:!0,note:"Return the blood pack to the blood bank if any abnormality is present or suspected."},{number:"2c",text:"Disinfect the venipuncture site using an antiseptic wipe.",isSubStep:!0},{number:"2d",text:"Remove the donor bag from the packaging.",isSubStep:!0},{number:"2e",text:"Clamp the tubing using hemostats 12-18 inches from the needle.",isSubStep:!0},{number:"2f",text:"Apply one of the following measuring devices to the collection bag.",isSubStep:!0},{number:"2f1",text:"Zip tie marked at 6.5 inches around the center of the bag.",isSubStep:!0},{number:"2f2",text:"Clamping the bottom of the bag with a folded overlap of 1-1.5 inches.",isSubStep:!0},{number:"2f3",text:"Parachute 550 cord cut at 10 inches wrapped around the bag with the ends slightly overlapping.",isSubStep:!0},{number:"2f4",text:"Utilizing a digital scale and discontinue collection at 500 grams (g).",isSubStep:!0},{number:"3",text:"Collect blood from the donor.",note:"Keep the donor bag insulated from the ground and below the level of the donor's heart."},{number:"3a",text:"Twist off the cap of the 16-gauge needle.",isSubStep:!0},{number:"3b",text:"Insert the needle bevel up at 15- to 30-degree angle through the skin.",isSubStep:!0,note:"The donor should not bend the arm during the process."},{number:"3c",text:"Remove the clamp from the collection line when blood is observed in the line.",isSubStep:!0},{number:"3d",text:"Secure the tubing and needle with 3-inch tape.",isSubStep:!0},{number:"3e",text:"Sway the collection bag back and forth every 60 seconds to mix the anticoagulants with the blood.",isSubStep:!0},{number:"3f",text:"Monitor the donor throughout the process for the following.",isSubStep:!0},{number:"3f1",text:"Signs and symptoms of blood loss.",isSubStep:!0},{number:"3f2",text:"Hematomas at the venipuncture site.",isSubStep:!0},{number:"3f3",text:"Blood flow into the collection bag.",isSubStep:!0,note:"You may need to reposition the needle if the flow stops."},{number:"4",text:"Determine when the bag is full using the methods in step 2f."},{number:"5",text:"Discontinue the collection process."},{number:"5a",text:"Clamp the line using hemostats.",isSubStep:!0},{number:"5b",text:"Place a 4x4 gauze over the venipuncture site.",isSubStep:!0},{number:"5c",text:"Remove the needle from the donor site.",isSubStep:!0},{number:"5d",text:"Apply pressure to the donor venipuncture site.",isSubStep:!0},{number:"5e",text:"Release the clamp to allow the blood in the line to enter the collection bag.",isSubStep:!0},{number:"5f",text:"Tie two overhand knots in the line as close to the bag as possible.",isSubStep:!0},{number:"5g",text:"Cut the remaining line and needle away from the collection bag.",isSubStep:!0},{number:"6",text:"Label the blood collection bag."},{number:"6a",text:"Annotate the donor's information on the collection bag.",isSubStep:!0},{number:"6b",text:"Annotate the patient's blood type on the collection bag.",isSubStep:!0},{number:"6c",text:"Annotate the collection time and date on the collection bag.",isSubStep:!0},{number:"6d",text:"Annotate the name of the person who collected the blood.",isSubStep:!0},{number:"7",text:"Monitor the donor after the donation is complete.",note:"The donor should remain seated or lying down after complete."},{number:"8",text:"Document the collection on the appropriate forms for the environment."},{number:"9",text:"Identify the casualty meets criteria for blood transfusion."},{number:"9a",text:"Heart rate > 100 beats per minute.",isSubStep:!0},{number:"9b",text:"Systolic blood pressure < 100 millimeters of mercury (mmHg).",isSubStep:!0},{number:"9c",text:"Altered mental status with signs and symptoms of hemorrhagic shock.",isSubStep:!0},{number:"9d",text:"Penetrating trauma to chest or abdomen, junctional injuries.",isSubStep:!0},{number:"9e",text:"Pelvic fracture.",isSubStep:!0},{number:"9f",text:"Any above the knee amputation or multiple amputations (regardless of vital signs).",isSubStep:!0},{number:"10",text:"Obtain intravenous (IV) or intraosseous (IO) access.",note:"If there are no adverse reactions and the vital signs are stable after 15 minutes, set the main roller clamp to administer the prescribed flow rate."},{number:"11",text:"Assemble the blood administration set."},{number:"11a",text:"Clamp all tubing above and below the filter.",isSubStep:!0},{number:"11b",text:"Expose the port to the collection bag.",isSubStep:!0},{number:"11c",text:"Remove the cap from the spike and insert it into the collection bag.",isSubStep:!0},{number:"11d",text:"Turn the bag upright, release the clamp to the normal saline (NS) and charge the line.",isSubStep:!0},{number:"11e",text:"Clamp the line to the NS and release the clamp to the blood. Squeeze the filter chamber until it is halfway full.",isSubStep:!0},{number:"11f",text:"Attach the line to the IV or IO, release the clamp on the distal line and check for patency.",isSubStep:!0},{number:"12",text:"Administer FWB rapidly."},{number:"12a",text:"Best  Prescreened cold-stored low-titer O whole blood (LTOWB) for all when readily available.",isSubStep:!0},{number:"12b",text:"Better  Prescreened group specific FWB.",isSubStep:!0},{number:"12b1",text:"Group A to group A.",isSubStep:!0},{number:"12b2",text:"LTOWB for group B to group AB.",isSubStep:!0},{number:"12b3",text:"Group O to group O.",isSubStep:!0},{number:"12c",text:"Minimum  When prescreened blood is not available, use point-of-care blood typing system to identify donors.",isSubStep:!0,note:"Use approved infusion warming devices when administering cold-stored FWB.",warning:"Monitor for transfusion reaction. If transfusion reaction is noted you should: stop the transfusion, keep the IV line open with saline, identify and treat the cause of reaction, reinstitute the transfusion only if it is deemed to be clinically essential."},{number:"13",text:"Monitor the casualty for transfusion reactions."},{number:"13a",text:"Anaphylaxis.",isSubStep:!0},{number:"13b",text:"Acute hemolytic reaction.",isSubStep:!0},{number:"13b1",text:"Acetaminophen 500 milligram (mg) by mouth every four hours.",isSubStep:!0},{number:"13b2",text:"Diphenhydramine 25 mg IV or intramuscular.",isSubStep:!0},{number:"13b3",text:"Consider osmotic diuresis with 20 g mannitol or 250 ml 3% sodium chloride.",isSubStep:!0},{number:"14",text:"Administer 1 g calcium chloride IV, during or after the transfusion, if massive transfusion is expected."},{number:"15",text:"Administer tranexamic acid within three hours of injury."},{number:"16",text:"Document on the DD Form 1380 (Tactical Combat Casualty Care (TCCC) Card (Instructions) (Instructions)), SF 600 (Chronological Record of Medical Care), or electronic medical record."}]},{taskNumber:"081-68W-0313",title:"Apply an Impedance Threshold Device",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"You are in an operational environment when you encounter a casualty who is breathing on their own and have suffered a gunshot wound (GSW). The GSW has been treated and bleeding is controlled. You will be provided with an impedance threshold device (ITD) and additional first aid equipment.",standards:"Apply an ITD in accordance with manufacture instructions while adhering to all warnings and cautions, without error, using the task GO/NO GO criteria.",gradedSteps:["1","2"],performanceSteps:[{number:"1",text:"Apply the ITD with a face mask."},{number:"1a",text:"Connect the ITD to the face mask.",isSubStep:!0},{number:"1b",text:"Explain to the casualty that they will feel some slight resistance when inhaling. This means that the device is working and helping to improve blood flow.",isSubStep:!0,note:"This means that the device is working and helping to improve blood flow."},{number:"1c",text:"Hold the mask over the nose and mouth maintaining a tight face mask seal.",isSubStep:!0},{number:"1d",text:"Have the casualty breathe at 10-16 breaths per minute.",isSubStep:!0,note:"May use an optional noseclip that prevents breathing through the nose."},{number:"1e",text:"Inform the casualty to inhale slowly (over 2-3 seconds) and deeply, exhale normally.",isSubStep:!0},{number:"1f",text:"If available, administer oxygen. Connected the oxygen tubing to the port and delivered up to 15 liters per minute (lpm).",isSubStep:!0},{number:"2",text:"Apply the ITD with a mouthpiece."},{number:"2a",text:"Connect the ITD to the mouthpiece.",isSubStep:!0},{number:"2b",text:"Explain to the casualty that they will feel some slight resistance when inhaling.",isSubStep:!0,note:"This means that the device is working and helping to improve blood flow."},{number:"2c",text:"Place the mouthpiece into the mouth and maintain a tight seal with the lips.",isSubStep:!0},{number:"2d",text:"Have the casualty breath through the mouth at 10-16 breaths per minute.",isSubStep:!0},{number:"2e",text:"Inform the casualty to inhale slowly (over 2-3 seconds) and deeply, exhale normally.",isSubStep:!0},{number:"2f",text:"If available, administer oxygen. Connect the oxygen tubing to the port and deliver up to 15 lpm.",isSubStep:!0}]},{taskNumber:"081-000-0125",title:"Maintain a Nasogastric Tube",caution:"All body fluids should be considered potentially infectious so always observe body substance isolation precautions by wearing gloves and eye protection as a minimal standard of protection.",conditions:"In an operational environment you have a patient that will require placement and possibly removal of a nasogastric (NG) tube during treatment. You have an NG tube (single lumen nasogastric tube or dual-lumen nasogastric tube), water soluble lubricant, suction equipment if ordered, clamp for tubing, towel, tissues, emesis basin, glass of water and straw, tincture of benzoin, hypoallergenic tape 1 inch, bio-occlusive transparent dressing, irrigating set with 20-milliliter (ml) syringe or a 50-ml catheter tip syringe, stethoscope, tongue blade, penlight, disposable gloves, apron, a waste container, protective sheet, normal saline, lip pomade, mouth hygiene materials, pen, DD Form 1380 (Tactical Combat Casualty Care (TCCC) Card (Instructions)), electronic medical record (EMR), or an SF 600 (Chronological Record of Medical Care).",standards:"Maintain an NG tube in accordance with (IAW) the Tactical Combat Casualty (TCCC) Care Guidelines, while adhering to all warnings and cautions, without error, using the task GO/NO GO checklist.",gradedSteps:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"],performanceSteps:[{number:"1",text:'Assemble equipment for "PLACEMENT" of an NG tube.',note:"NG tubes may be contraindicated in patients with nasopharyngeal or esophageal obstruction, severe, uncontrolled coagulopathy, or severe maxillofacial trauma."},{number:"2",text:"Verify patient's identity with the medical records."},{number:"3",text:"Explain procedure to the patient.",note:"Advise the patient that there is a wastebasket in case they feel the need to vomit."},{number:"3a",text:"Ask patient if they have ever had nasal surgery, trauma, a deviated septum, or bleeding disorder.",isSubStep:!0},{number:"3b",text:"Explain that mouth breathing, panting, and swallowing will make it easier to insert the tube.",isSubStep:!0},{number:"3c",text:"Tell the patient that the tube will be inserted along the nasal passage.",isSubStep:!0,note:'Determine the gesture patient might use, such as raising the index finger, to indicate "wait a few moments" because of gagging or discomfort.'},{number:"3d",text:"Explain that this procedure may cause them to gag and bring tears to their eyes.",isSubStep:!0},{number:"4",text:"Don protective equipment."},{number:"5",text:"Place patient in a sitting or high-Fowler's position to facilitate passage of the tube into the esophagus.",note:"Unconscious patients should be placed on their left side in the recovery position. Remove dentures, place emesis basin and tissues within patient's reach."},{number:"6",text:"Inspect the tube for defects; look for partially closed holes or rough edges.",note:"Irrigation and suction may be affected by a defective tube."},{number:"7",text:"Place rubber tubing in ice-chilled water for a few minutes to make the tube firmer.",note:"Plastic tubing may already be firm enough, if too stiff, dip in warm water."},{number:"8",text:"Determine length of the tube needed to reach the stomach.",note:"Determining the correct length will prevent coiling of the tube in the stomach or having the tube end in the esophagus."},{number:"8a",text:"Measure from the patient's nose to earlobe.",isSubStep:!0,note:"The distance from the nose to the earlobe is the first mark on the tube. This measurement represents the distance to the nasal pharynx."},{number:"8b",text:"Measure from the patient's earlobe to xiphoid (NEX) and mark the tube appropriately.",isSubStep:!0,note:"The distance from the earlobe to the NEX is the second mark on the tube. This measurement represents the length required to reach the stomach."},{number:"9",text:"Inspect the nostrils with a penlight, observing for any obstruction."},{number:"9a",text:"Have the patient blow nose to clear nostrils.",isSubStep:!0},{number:"9b",text:"Occlude each nostril and have the patient breathe.",isSubStep:!0},{number:"10",text:"Insert NG tube."},{number:"10a",text:"Coil the first 3-4 inches (7.5-10 centimeters [cm]) of the tube around your fingers.",isSubStep:!0,note:"This curves tubing and facilitates tube passage."},{number:"10b",text:"Lubricate the coiled portion of the tube with water-soluble lubricant, avoiding occluding the tube's holes.",isSubStep:!0,note:"Lubrication reduces friction between the mucous membranes and tube and prevents injury to the nasal passages. Using a water-soluble lubricant prevents oil aspiration pneumonia if the tube accidentally slips into the trachea."},{number:"10c",text:"Tilt the patient's head back before inserting tube into nostril and gently pass the tube into the posterior nasopharynx, directing downward and backward toward the ear.",isSubStep:!0,note:"The passage of the tube is facilitated by following the natural contours of the body. The slower the advancement of the tube, the less likelihood of putting pressure on the turbinate, which could cause pain and bleeding."},{number:"10d",text:"When the tube reaches the pharynx, the patient may gag; allow patient to rest for a few moments if necessary.",isSubStep:!0},{number:"10e",text:"Have the patient tilt the head slightly forward.",isSubStep:!0},{number:"10e1",text:"Offer several sips of water through a straw or have patient suck on ice chips if not contraindicated.",isSubStep:!0},{number:"10e2",text:"Advance the tube as patient swallows.",isSubStep:!0,note:"Flexed head position partially occludes the airway, and the tube is less likely to enter the trachea. Swallowing closes the epiglottis over the trachea and facilitates passage of the tube into the esophagus.",caution:"If there are signs of distress, such as gasping, coughing or cyanosis, immediately remove the tube."},{number:"10f",text:"Gently rotate the tube 180 degrees to redirect the curve.",isSubStep:!0,note:"This prevents the tube from entering the patient's mouth. If obstruction appears to prevent tube from passing, do not use force. Rotating the tube may help. If unsuccessful, remove tube and try another nostril."},{number:"10g",text:"Continue to advance tube gently each time the patient swallows.",isSubStep:!0},{number:"10h",text:"Continue to advance tube until the second tape mark reaches the patient's nostril.",isSubStep:!0},{number:"11",text:"Check tube placement."},{number:"11a",text:"Visualize tube placement.",isSubStep:!0},{number:"11a1",text:"Instruct conscious patient to open mouth, use penlight to exam mouth and assess proper placement of the NG tube through the posterior pharynx.",isSubStep:!0},{number:"11a2",text:"For an unconscious patient, use the tongue blade and penlight to examine the patient's mouth to assess proper placement of the NG tube through the posterior pharynx.",isSubStep:!0,note:"The presence of stomach contents in the tube or syringe indicates correct placement."},{number:"11b",text:"Auscultate for tube placement.",isSubStep:!0},{number:"11b1",text:"Position the diaphragm of the stethoscope over the patient's stomach (about 2 inches below the sternum).",isSubStep:!0},{number:"11b2",text:"Inject 10 cc of air into the tube.",isSubStep:!0},{number:"11b3",text:"Listen for the sound of the air entering the stomach (gurgling or whooshing sound) which indicates correct tube placement. Proceed to step 12 if placement is correct.",isSubStep:!0},{number:"11b4",text:"Check for tube placement in the trachea if air is not heard entering the stomach.",isSubStep:!0},{number:"11b4a",text:"Auscultate over the lung field.",isSubStep:!0},{number:"11b4b",text:"Reinject 10 cc of air into the tube.",isSubStep:!0},{number:"11b4c",text:"Remove the tube if air injection is heard over the lungs.",isSubStep:!0},{number:"11c",text:"Repeat steps 1-10 to reinsert the tube if indicated.",isSubStep:!0},{number:"12",text:"Secure tube to the patient's nose."},{number:"13",text:"Connect the tube to the suction apparatus, if ordered."},{number:"14",text:"Dispose of soiled equipment in the container for contaminated waste IAW infection control policy."},{number:"15",text:"Remove protective equipment."},{number:"16",text:"Perform handwashing."},{number:"17",text:"Document the procedure."},{number:"18",text:"Flush every 4 hours with 20 to 30 milliliters (ml) of normal saline to maintain tube."},{number:"19",text:'Assemble equipment for the "REMOVAL" of an NG tube.'},{number:"20",text:"Explain procedure to the patient."},{number:"21",text:"Don protective equipment."},{number:"22",text:"Instruct patient to sit up in bed at a 30-degree angle with a towel across the chest."},{number:"23",text:"Clear NG tube with air, to clear any fluids, water, or nutritional supplements that may be at the distal end of the tube.",warning:"Turn off the suction or continuous feeding (if applicable)."},{number:"24",text:"Remove NG tube."},{number:"24a",text:"Turn patient's head to the side.",isSubStep:!0},{number:"24b",text:"Put on gloves, then remove securement device used to secure the tube to the patient.",isSubStep:!0,note:"Use adhesive remover, if necessary, to prevent irritating the skin."},{number:"24c",text:"Clamp or pinch the end of the tube to prevent release of gastric contents, remove tube.",isSubStep:!0,note:"Advise the patient that they may feel the need to vomit. If the patient vomits, stop the procedure immediately. Provide the patient an emesis basin and towel. Continue the procedure when the patient is ready."},{number:"24c1",text:"Instruct the patient to take a deep breath and hold it.",isSubStep:!0,note:"This will decrease the possibility of aspiration when the tube is being withdrawn.",warning:"If resistance is felt, do not attempt to remove the tube, and notify the medical officer immediately. Be sure to cover the tube with a towel when pulling it out."},{number:"24c2",text:"Pull the tube out of the patient's nose using a swift and continuous motion.",isSubStep:!0},{number:"24c3",text:"Cover tube with a towel as it emerges.",isSubStep:!0},{number:"24c4",text:"Provide the patient with materials for oral care and lubricant for nasal dryness.",isSubStep:!0},{number:"25",text:"Dispose of soiled equipment in the container for contaminated waste IAW infection control policy."},{number:"26",text:"Remove protective equipment."},{number:"27",text:"Perform handwashing."},{number:"28",text:"Annotate the procedure on the SF 600 or EMR."},{number:"28a",text:"Annotate color of drainage in the tube.",isSubStep:!0},{number:"28b",text:"Annotate consistency of the drainage.",isSubStep:!0},{number:"28c",text:"Annotate remainder of feeding in bag or amount of drainage in the suction canister.",isSubStep:!0},{number:"28d",text:"Annotate patient's level of pain and tolerance of the procedure.",isSubStep:!0},{number:"28e",text:"Annotate time of removal.",isSubStep:!0}]}];function Gk(){const[r,i]=D.useState([]),[a,s]=D.useState(!0),[l,c]=D.useState(null),d=D.useCallback(async()=>{s(!0),c(null);try{const{data:{user:f}}=await St.auth.getUser();if(!f){c("Not authenticated"),s(!1);return}const{data:m,error:g}=await St.from("profiles").select("clinic_id").eq("id",f.id).single();if(g||!m?.clinic_id){c("No clinic assigned"),i([]),s(!1);return}const{data:v,error:y}=await St.from("profiles").select("id, first_name, last_name, middle_initial, rank, credential, roles").eq("clinic_id",m.clinic_id);if(y){c(y.message),s(!1);return}const A=(v||[]).filter(w=>w.id!==f.id).map(w=>({id:w.id,firstName:w.first_name,lastName:w.last_name,middleInitial:w.middle_initial,rank:w.rank,credential:w.credential}));i(A)}catch(f){c(f instanceof Error?f.message:"Failed to fetch medics")}finally{s(!1)}},[]);return D.useEffect(()=>{d()},[d]),{medics:r,loading:a,error:l,refresh:d}}ya("TrainingService");function Ww(r){return{id:r.id,userId:r.user_id,trainingItemId:r.training_item_id,completionType:r.completion_type,result:r.result,supervisorId:r.supervisor_id,stepResults:r.step_results,supervisorNotes:r.supervisor_notes,completedAt:r.completed_at,createdAt:r.created_at,updatedAt:r.updated_at,syncStatus:r._sync_status}}async function nV(r){return(await Uh(r)).map(Ww)}async function Vk(r,i){const a=new Date().toISOString(),s={id:crypto.randomUUID(),user_id:i,training_item_id:r,completed:!0,completed_at:a,completion_type:"read",result:"GO",supervisor_id:null,step_results:null,supervisor_notes:null,created_at:a,updated_at:a,_sync_status:i==="guest"?"synced":"pending",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null};if(await eg(s),i!=="guest"){const l=Pd(s);await df({user_id:i,action:"create",table_name:"training_completions",record_id:s.id,payload:l}),await w2({id:s.id,payload:l},{tableName:"training_completions",upsertFn:async d=>{const{error:f}=await St.from("training_completions").upsert(d.payload,{onConflict:"user_id,training_item_id,completion_type"});if(f)throw f},updateSyncStatus:o2},"create")&&(s._sync_status="synced")}return Ww(s)}async function Yk(r){const{medicUserId:i,trainingItemId:a,result:s,stepResults:l,supervisorNotes:c,supervisorId:d}=r,f=new Date().toISOString(),m={id:crypto.randomUUID(),user_id:i,training_item_id:a,completed:!0,completed_at:f,completion_type:"test",result:s,supervisor_id:d,step_results:l,supervisor_notes:c||null,created_at:f,updated_at:f,_sync_status:"pending",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null};await eg(m);const g=Pd(m);return await df({user_id:d,action:"create",table_name:"training_completions",record_id:m.id,payload:g}),await w2({id:m.id,payload:g},{tableName:"training_completions",upsertFn:async y=>{const{error:A}=await St.from("training_completions").upsert(y.payload,{onConflict:"user_id,training_item_id,completion_type"});if(A)throw A},updateSyncStatus:o2},"create")&&(m._sync_status="synced"),Ww(m)}async function Qk(r,i){const a=new Date().toISOString();await Yw(r),i!=="guest"&&(await df({user_id:i,action:"delete",table_name:"training_completions",record_id:r,payload:{_deleted_at_timestamp:a}}),await w2({id:r},{tableName:"training_completions",upsertFn:async()=>{const{error:s}=await St.from("training_completions").delete().eq("id",r);if(s)throw s},updateSyncStatus:o2},"delete"))}async function iV(r,i){const a=r.filter(c=>c!==i);if(a.length===0)return[];const{data:s,error:l}=await St.from("training_completions").select("*").in("user_id",a).eq("completion_type","test").order("updated_at",{ascending:!1});if(l)throw new Error(`Failed to fetch clinic test history: ${l.message}`);return(s||[]).map(c=>({id:c.id,userId:c.user_id,trainingItemId:c.training_item_id,completionType:c.completion_type,result:c.result,supervisorId:c.supervisor_id,stepResults:c.step_results,supervisorNotes:c.supervisor_notes,completedAt:c.completed_at,createdAt:c.created_at,updatedAt:c.updated_at,syncStatus:"synced"}))}const y3=ya("RealtimeTraining");function rV(r){return{id:r.id,userId:r.user_id,trainingItemId:r.training_item_id,completionType:r.completion_type,result:r.result,supervisorId:r.supervisor_id,stepResults:r.step_results??null,supervisorNotes:r.supervisor_notes,completedAt:r.completed_at,createdAt:r.created_at,updatedAt:r.updated_at,syncStatus:"synced"}}function aV({userId:r,isAuthenticated:i,isPageVisible:a,onUpsert:s,onDelete:l}){const c=D.useRef(s),d=D.useRef(l);D.useEffect(()=>{c.current=s,d.current=l},[s,l]);const f=D.useCallback(g=>{const v=g.eventType;if(v==="INSERT"||v==="UPDATE"){const y=g.new;y3.debug(`${v}: ${y.id}`),c.current(rV(y));return}if(v==="DELETE"){const A=g.old.id;if(!A){y3.warn("DELETE event missing row id, ignoring");return}y3.debug(`DELETE: ${A}`),d.current(A)}},[]),m=D.useMemo(()=>({table:"training_completions",filter:`user_id=eq.${r}`}),[r]);Dk({shouldSubscribe:i&&!!r&&a,channelName:`personal-training:${r}`,postgresFilter:m,onPayload:f,logger:y3})}const J1=ya("TrainingCompletions"),Cy="adtmc_training_progress",Ey="adtmc_supervisor_tests";async function sV(r){const i=new Set;let a=0;try{const s=localStorage.getItem(Cy);if(!s)return{viewedTaskIds:i,migrated:a};const l=JSON.parse(s);if(typeof l?.viewedTasks!="object")return localStorage.removeItem(Cy),{viewedTaskIds:i,migrated:a};for(const[c,d]of Object.entries(l.viewedTasks))d.completed?(await Vk(c,r),a++):i.add(c);localStorage.removeItem(Cy),J1.info(`Migrated ${a} completed tasks from localStorage, ${i.size} viewed-only tasks tracked locally`)}catch(s){J1.warn("Training progress migration failed:",s)}return{viewedTaskIds:i,migrated:a}}async function oV(r){let i=0;try{const a=localStorage.getItem(Ey);if(!a)return 0;const s=JSON.parse(a);if(!Array.isArray(s?.tests)||s.tests.length===0)return localStorage.removeItem(Ey),0;for(const l of s.tests)await Yk({medicUserId:l.medicId,trainingItemId:l.taskNumber,result:l.overallResult==="PASS"?"GO":"NO_GO",stepResults:l.stepResults,supervisorNotes:l.notes,supervisorId:l.supervisorId||r}),i++;localStorage.removeItem(Ey),J1.info(`Migrated ${i} supervisor tests from localStorage`)}catch(a){J1.warn("Supervisor tests migration failed:",a)}return i}function Yx(){const[r,i]=D.useState([]),[a,s]=D.useState(new Set),[l,c]=D.useState(!1),[d,f]=D.useState(0),m=D.useRef(null),g=D.useRef(!1),v=D.useRef(null),[y,A]=D.useState(null),[w,k]=D.useState(!1),E=Qw(),[I,T]=D.useState(0);D.useEffect(()=>{const{data:{subscription:X}}=St.auth.onAuthStateChange(ae=>{ae==="SIGNED_OUT"&&(i([]),s(new Set),f(0),A(null),k(!1),m.current=null,g.current=!1),(ae==="SIGNED_IN"||ae==="SIGNED_OUT")&&T(K=>K+1)});return()=>X.unsubscribe()},[]);const N=D.useCallback(async X=>{const ae=await nV(X);ae.sort((ie,ne)=>new Date(ne.createdAt).getTime()-new Date(ie.createdAt).getTime()),i(ae);const K=ae.filter(ie=>ie.syncStatus==="pending").length;f(K)},[]);D.useEffect(()=>{let X=!1;async function ae(){try{const{data:{user:K}}=await St.auth.getUser(),ie=K?.id||"guest";if(m.current=ie,A(ie),k(ie!=="guest"),X)return;const{viewedTaskIds:ne}=await sV(ie);if(ne.size>0&&!X&&s(ne),await oV(ie),X)return;if(ie!=="guest"&&R1())try{c(!0),await U4(ie)}catch(J){J1.warn("Initial sync failed, using local data:",J)}finally{X||c(!1)}if(X)return;await N(ie),ie!=="guest"&&(v.current=Mk(ie,{onStatusChange:()=>{},onSyncStart:()=>{X||c(!0)},onSyncComplete:()=>{X||(c(!1),N(ie))},onReconcileComplete:()=>{X||N(ie)},onTrainingReconcileComplete:()=>{X||N(ie)}})),g.current=!0}catch(K){J1.error("Initialization failed:",K),g.current=!0}}return ae(),()=>{X=!0,v.current&&(v.current(),v.current=null)}},[N,I]);const j=D.useRef(!0);D.useEffect(()=>{if(E&&!j.current&&g.current){const X=m.current;X&&X!=="guest"&&N(X)}j.current=E},[E,N]);const B=D.useCallback(X=>r.some(ae=>ae.trainingItemId===X&&ae.completionType==="read"),[r]),U=D.useCallback(X=>r.find(ae=>ae.trainingItemId===X&&ae.completionType==="test"),[r]),F=D.useCallback(X=>{const ae=X.options;let K=0,ie=0,ne=0;for(const J of ae){if(!!!sc(J.icon))continue;ne++,r.some(oe=>oe.trainingItemId===J.icon&&oe.completionType==="read")?(ie++,K++):a.has(J.icon)&&K++}return{viewed:K,completed:ie,total:ne}},[r,a]),P=D.useCallback(X=>{const ae=m.current;if(!ae)return;const K={id:crypto.randomUUID(),userId:ae,trainingItemId:X,completionType:"read",result:"GO",supervisorId:null,stepResults:null,supervisorNotes:null,completedAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:ae==="guest"?"synced":"pending"};i(ie=>[K,...ie]),ae!=="guest"&&f(ie=>ie+1),Vk(X,ae).then(ie=>{i(ne=>ne.map(J=>J.id===K.id?ie:J)),ie.syncStatus==="synced"&&ae!=="guest"&&f(ne=>Math.max(0,ne-1))}).catch(ie=>{J1.error("Create read completion failed:",ie),N(ae)})},[N]),z=D.useCallback(async X=>{const ae=m.current;if(!ae)return;const K=await Yk({...X,supervisorId:ae});i(ie=>[K,...ie]),K.syncStatus==="pending"&&f(ie=>ie+1)},[]),V=D.useCallback(X=>{const ae=m.current;ae&&(i(K=>K.filter(ie=>ie.id!==X)),Qk(X,ae).catch(K=>{J1.error("Delete completion failed:",K),N(ae)}))},[N]),L=D.useCallback(X=>a.has(X),[a]),Q=D.useCallback(X=>{s(ae=>{if(ae.has(X))return ae;const K=new Set(ae);return K.add(X),K})},[]),q=D.useCallback(X=>{i(K=>{const ie=K.findIndex(ne=>ne.id===X.id);if(ie>=0){const ne=K[ie],J=new Date(ne.createdAt).getTime();if(new Date(X.createdAt).getTime()>=J){const $=[...K];return $[ie]=X,$}return K}return[X,...K].sort((ne,J)=>new Date(J.createdAt).getTime()-new Date(ne.createdAt).getTime())});const ae=m.current;ae&&ae!=="guest"&&eg({id:X.id,user_id:X.userId,training_item_id:X.trainingItemId,completed:!0,completed_at:X.completedAt,completion_type:X.completionType,result:X.result,supervisor_id:X.supervisorId,step_results:X.stepResults,supervisor_notes:X.supervisorNotes,created_at:X.createdAt,updated_at:X.updatedAt,_sync_status:"synced",_sync_retry_count:0,_last_sync_error:null,_last_sync_error_message:null}).catch(K=>{J1.warn("Failed to persist realtime completion to IndexedDB:",K)})},[]),ee=D.useCallback(X=>{i(ae=>ae.filter(K=>K.id!==X)),jw(async()=>{const{hardDeleteLocalTrainingCompletion:ae}=await Promise.resolve().then(()=>Lq);return{hardDeleteLocalTrainingCompletion:ae}},void 0).then(({hardDeleteLocalTrainingCompletion:ae})=>{ae(X).catch(K=>{J1.warn("Failed to delete realtime completion from IndexedDB:",K)})})},[]);return aV({userId:y,isAuthenticated:w,isPageVisible:E,onUpsert:q,onDelete:ee}),{completions:r,isTaskCompleted:B,getTestResult:U,getSubjectAreaProgress:F,markTaskCompleted:P,submitTestEvaluation:z,deleteCompletion:V,isTaskViewed:L,markTaskViewed:Q,isSyncing:l,pendingCount:d}}const $k={"Airway Management":x.jsx(eI,{size:14}),"Fluid Management":x.jsx(RE,{size:14}),"Force Health Protection":x.jsx(C_,{size:14}),"Medical Management":x.jsx(ux,{size:14}),"Medication Management":x.jsx(V4,{size:14}),"Trauma Management":x.jsx($C,{size:14}),"Triage and Evacuation":x.jsx(qC,{size:14})},Wk={"Readiness Requirements":"RR","Skill Level 1":"SL1","Skill Level 2":"SL2","Skill Level 3":"SL3"},Xk=["Airway Management","Fluid Management","Force Health Protection","Medical Management","Medication Management","Trauma Management","Triage and Evacuation"],U5=ya("SupervisorPanel");function rx(r){const i=[];if(r.rank&&i.push(r.rank),r.lastName){let a=r.lastName;r.firstName&&(a+=", "+r.firstName.charAt(0)+"."),r.middleInitial&&(a+=r.middleInitial+"."),i.push(a)}return i.join(" ")||"Unknown"}function lV(){const r=new Map,i=new Map;for(const a of Xk)i.set(a,[]),r.set(a,new Set);Kh.forEach((a,s)=>{a.subjectArea.forEach(l=>{i.has(l.name)||(i.set(l.name,[]),r.set(l.name,new Set));const c=r.get(l.name);l.tasks.forEach(d=>{c.has(d.id)||(c.add(d.id),i.get(l.name).push({taskId:d.id,title:d.title,levelIdx:s,levelName:a.skillLevel,areaName:l.name}))})})});for(const a of i.values())a.sort((s,l)=>s.levelIdx-l.levelIdx||s.title.localeCompare(l.title));return i}function w3({type:r,text:i}){const s={warning:{bg:"bg-themeyellow/10",border:"border-themeyellow/30",icon:x.jsx(Tc,{size:13,className:"text-themeyellow shrink-0 mt-0.5"}),label:"WARNING"},caution:{bg:"bg-orange-500/10",border:"border-orange-500/30",icon:x.jsx(Tc,{size:13,className:"text-orange-500 shrink-0 mt-0.5"}),label:"CAUTION"},note:{bg:"bg-themeblue2/10",border:"border-themeblue2/30",icon:x.jsx(Bm,{size:13,className:"text-themeblue2 shrink-0 mt-0.5"}),label:"NOTE"}}[r];return x.jsxs("div",{className:`${s.bg} border ${s.border} rounded-md px-3 py-2 mt-1.5 flex items-start gap-2`,children:[s.icon,x.jsxs("div",{children:[x.jsx("p",{className:"text-[7pt] font-bold tracking-wider opacity-60",children:s.label}),x.jsx("p",{className:"text-xs text-primary/80",children:i})]})]})}function cV({onSelect:r}){const{medics:i,loading:a,error:s}=Gk();return a?x.jsx("div",{className:"flex items-center justify-center py-12",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading medics..."})}):s?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(Oy,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsx("p",{className:"text-sm text-tertiary/60",children:s})]}):i.length===0?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(Oy,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsx("p",{className:"text-sm text-tertiary/60",children:"No medics found in your clinic"})]}):x.jsxs("div",{className:"space-y-1",children:[x.jsx("p",{className:"text-xs text-tertiary/60 mb-3",children:"Select the medic to evaluate:"}),i.map(l=>x.jsxs("button",{onClick:()=>r(l),className:`flex items-center w-full px-4 py-3 rounded-xl text-left
                     hover:bg-themewhite2 active:scale-[0.98] transition-all`,children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-primary",children:rx(l)}),l.credential&&x.jsx("p",{className:"text-[9pt] text-tertiary/50",children:l.credential})]}),x.jsx(af,{size:16,className:"text-tertiary/40 shrink-0 ml-2"})]},l.id))]})}function dV({onSelectTask:r,medicName:i}){const[a,s]=D.useState(""),l=D.useRef(null),c=D.useMemo(()=>lV(),[]),d=D.useMemo(()=>{const g=a.trim().toLowerCase();if(!g)return c;const v=new Map;for(const[y,A]of c){const w=A.filter(k=>k.title.toLowerCase().includes(g)||k.taskId.toLowerCase().includes(g));w.length>0&&v.set(y,w)}return v},[a,c]),f=D.useMemo(()=>{let g=0;for(const v of d.values())g+=v.length;return g},[d]),m=a.trim().length>0;return x.jsxs("div",{children:[x.jsxs("p",{className:"text-xs text-tertiary/60 mb-3",children:["Testing ",x.jsx("span",{className:"font-medium text-primary",children:i}),"  select a task:"]}),x.jsxs("div",{className:"relative mb-3",children:[x.jsx(Wh,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-tertiary/40 pointer-events-none"}),x.jsx("input",{ref:l,type:"text",value:a,onChange:g=>s(g.target.value),placeholder:"Search tasks...",className:`w-full pl-8 pr-8 py-2 rounded-lg bg-themewhite2 text-sm text-primary
                     placeholder:text-tertiary/40 outline-none focus:ring-1 focus:ring-themeblue2/40 transition-all`}),a&&x.jsx("button",{onClick:()=>{s(""),l.current?.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 rounded-full hover:bg-tertiary/10 transition-colors",children:x.jsx(ms,{size:14,className:"text-tertiary/50"})})]}),m&&x.jsxs("p",{className:"text-[10px] text-tertiary/50 mb-2",children:[f," result",f!==1?"s":""]}),f===0&&m?x.jsx("p",{className:"text-sm text-tertiary/40 text-center py-8",children:"No tasks match your search."}):x.jsx("div",{className:"space-y-1",children:Array.from(d).map(([g,v])=>x.jsxs("div",{children:[x.jsxs("div",{className:"px-6 pt-4 pb-1 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-tertiary/50",children:[$k[g]??x.jsx(ox,{size:14}),x.jsx("p",{className:"text-[10px] font-semibold tracking-widest uppercase",children:g})]}),x.jsx("p",{className:"text-[10px] text-tertiary/40",children:v.length})]}),v.map(y=>{const A=tV(y.taskId),w=Wk[y.levelName]??y.levelName;return x.jsxs("button",{onClick:()=>A&&r(y.taskId,y.title),disabled:!A,className:`flex items-center w-full px-6 py-3 rounded-xl text-left transition-all
                      ${A?"hover:bg-themewhite2 active:scale-[0.98] cursor-pointer":"opacity-40 cursor-not-allowed"}`,children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium truncate ${A?"text-primary":"text-tertiary"}`,children:y.title}),x.jsx("p",{className:"text-[8pt] text-tertiary/50 font-mono",children:y.taskId}),!A&&x.jsxs("p",{className:"text-[8pt] text-tertiary/40 flex items-center gap-1 mt-0.5",children:[x.jsx(d2,{size:9})," Not testable"]})]}),x.jsxs("div",{className:"shrink-0 ml-2 flex items-center gap-2",children:[x.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8pt] font-semibold bg-themewhite2 text-tertiary/60",children:w}),A&&x.jsx(af,{size:16,className:"text-tertiary/30"})]})]},y.taskId)})]},g))})]})}function uV({taskNumber:r,taskTitle:i,medicName:a,onSubmit:s}){const l=sc(r),[c,d]=D.useState(new Map),[f,m]=D.useState("");if(!l)return x.jsx("div",{className:"text-center py-12 text-tertiary/60",children:"Task data not available"});const g=new Set(l.gradedSteps??[]),v=l.performanceSteps.filter(N=>g.has(N.number)).map(N=>N.number),y=v.length,A=v.filter(N=>c.has(N)).length,w=A===y,k=v.some(N=>c.get(N)==="NO_GO"),E=w?k?"FAIL":"PASS":null,I=(N,j)=>{d(B=>{const U=new Map(B);return U.get(N)===j?U.delete(N):U.set(N,j),U})},T=()=>{const N=l.performanceSteps.filter(j=>g.has(j.number)).map(j=>({stepNumber:j.number,result:c.get(j.number)??null}));s(N,f)};return x.jsxs("div",{className:"flex flex-col h-full",children:[x.jsxs("div",{className:"flex-1 overflow-y-auto pb-36",children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[8pt] text-tertiary/50 font-mono",children:r}),x.jsx("h3",{className:"text-lg font-semibold text-primary",children:i}),x.jsxs("p",{className:"text-xs text-tertiary/60 mt-1",children:["Evaluating: ",x.jsx("span",{className:"font-medium text-primary",children:a})]})]}),l.caution&&x.jsx("div",{className:"mb-4",children:x.jsx(w3,{type:"caution",text:l.caution})}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Standards"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3.5 py-3",children:x.jsx("p",{className:"text-sm text-primary/80 leading-relaxed",children:l.standards})})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Performance Steps"}),x.jsx("div",{className:"space-y-1",children:l.performanceSteps.map(N=>{const j=g.has(N.number),B=c.get(N.number);return x.jsxs("div",{className:`bg-themewhite2 rounded-lg px-3 py-2.5 ${N.isSubStep?"ml-5":""}`,children:[x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"text-[9pt] text-tertiary/50 font-mono w-6 shrink-0 text-right mt-1",children:N.number}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm ${j?"text-primary":"text-tertiary/50"}`,children:N.text}),N.warning&&x.jsx(w3,{type:"warning",text:N.warning}),N.caution&&x.jsx(w3,{type:"caution",text:N.caution}),N.note&&x.jsx(w3,{type:"note",text:N.note})]})]}),j&&x.jsxs("div",{className:"flex gap-2 mt-2 ml-8",children:[x.jsxs("button",{onClick:()=>I(N.number,"GO"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-sm font-semibold transition-all active:scale-[0.97]
                          ${B==="GO"?"bg-themegreen text-white":"bg-themegreen/10 text-themegreen border border-themegreen/20 hover:bg-themegreen/20"}`,children:[x.jsx(So,{size:14})," GO"]}),x.jsxs("button",{onClick:()=>I(N.number,"NO_GO"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-sm font-semibold transition-all active:scale-[0.97]
                          ${B==="NO_GO"?"bg-themeredred text-white":"bg-themeredred/10 text-themeredred border border-themeredred/20 hover:bg-themeredred/20"}`,children:[x.jsx(ms,{size:14})," NO GO"]})]})]},N.number)})})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Supervisor Notes (Optional)"}),x.jsx("textarea",{value:f,onChange:N=>m(N.target.value),placeholder:"Additional comments or observations...",rows:3,className:`w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-sm
                       border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                       transition-colors placeholder:text-tertiary/30 resize-none`})]})]}),x.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-themewhite border-t border-tertiary/10 px-4 py-3 space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsxs("span",{className:"text-tertiary/60",children:[A,"/",y," steps evaluated"]}),E&&x.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${E==="PASS"?"bg-themegreen/15 text-themegreen":"bg-themeredred/15 text-themeredred"}`,children:E})]}),x.jsx("button",{onClick:T,disabled:!w,className:`w-full py-3 rounded-xl bg-themeblue2 text-white text-sm font-semibold
                     hover:bg-themeblue2/90 active:scale-[0.98] transition-all
                     disabled:opacity-40 disabled:cursor-not-allowed`,children:"Submit Evaluation"})]})]})}function fV({clinicUsers:r,currentUserId:i}){const[a,s]=D.useState([]),[l,c]=D.useState(!0),[d,f]=D.useState(null),[m,g]=D.useState(null),v=D.useMemo(()=>{const w=new Map;for(const k of r)w.set(k.id,rx(k));return w},[r]),y=D.useCallback(w=>w?v.get(w)??w:"Unknown",[v]);D.useEffect(()=>{let w=!1;async function k(){try{const I=[...r.map(N=>N.id),i],T=await iV(I,i);w||s(T)}catch(E){U5.error("Failed to fetch clinic test history:",E)}finally{w||c(!1)}}return k(),()=>{w=!0}},[r,i]);const A=D.useCallback(async w=>{try{await Qk(w,i),s(k=>k.filter(E=>E.id!==w))}catch(k){U5.error("Delete failed:",k)}g(null),f(null)},[i]);return l?x.jsx("div",{className:"flex items-center justify-center py-12",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading history..."})}):a.length===0?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(lx,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsx("p",{className:"text-sm text-tertiary/60",children:"No test records yet"})]}):x.jsx("div",{className:"space-y-3",children:a.map(w=>{const k=d===w.id,E=sc(w.trainingItemId)?.title??w.trainingItemId,I=w.result==="GO"?"PASS":"FAIL";return x.jsxs("div",{className:"rounded-lg border border-tertiary/10 bg-themewhite2 overflow-hidden",children:[x.jsxs("button",{onClick:()=>f(k?null:w.id),className:"flex items-center w-full px-4 py-3 text-left hover:bg-themewhite2/80 transition-colors",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-primary",children:y(w.userId)}),x.jsx("p",{className:"text-xs text-tertiary/60 truncate",children:E}),x.jsx("p",{className:"text-[9pt] text-tertiary/40 mt-0.5",children:new Date(w.updatedAt).toLocaleDateString()})]}),x.jsx("span",{className:`shrink-0 ml-2 px-3 py-1 rounded-full text-xs font-bold ${I==="PASS"?"bg-themegreen/15 text-themegreen":"bg-themeredred/15 text-themeredred"}`,children:I})]}),k&&x.jsxs("div",{className:"px-4 pb-3 border-t border-tertiary/10",children:[x.jsxs("div",{className:"mt-3 mb-2",children:[x.jsx("p",{className:"text-[8pt] text-tertiary/50 font-mono",children:w.trainingItemId}),x.jsxs("p",{className:"text-xs text-tertiary/60 mt-1",children:["Supervisor: ",y(w.supervisorId),"  ",new Date(w.updatedAt).toLocaleString()]})]}),w.stepResults&&(()=>{const T=sc(w.trainingItemId),N=T?.gradedSteps?new Set(T.gradedSteps):null,j=N?w.stepResults.filter(B=>N.has(B.stepNumber)):w.stepResults;return x.jsx("div",{className:"space-y-1",children:j.map(B=>x.jsxs("div",{className:"flex items-center gap-2 py-1",children:[x.jsx("span",{className:"text-[9pt] text-tertiary/50 font-mono w-6 text-right",children:B.stepNumber}),B.result==="GO"?x.jsx("span",{className:"px-2 py-0.5 rounded text-[9pt] font-bold bg-themegreen/15 text-themegreen",children:"GO"}):B.result==="NO_GO"?x.jsx("span",{className:"px-2 py-0.5 rounded text-[9pt] font-bold bg-themeredred/15 text-themeredred",children:"NO GO"}):x.jsx("span",{className:"px-2 py-0.5 rounded text-[9pt] bg-tertiary/10 text-tertiary/50",children:"--"})]},B.stepNumber))})})(),w.supervisorNotes&&x.jsxs("div",{className:"mt-3 p-2 bg-themewhite rounded text-sm",children:[x.jsx("span",{className:"text-tertiary/60",children:"Notes:"})," ",x.jsx("span",{className:"text-primary",children:w.supervisorNotes})]}),m===w.id?x.jsxs("div",{className:"mt-3 flex gap-2",children:[x.jsx("button",{onClick:()=>A(w.id),className:"flex-1 py-2 rounded-lg bg-themeredred text-white text-sm font-medium hover:bg-themeredred/90 transition-colors",children:"Confirm Delete"}),x.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 rounded-lg bg-tertiary/10 text-primary text-sm",children:"Cancel"})]}):x.jsx("button",{onClick:()=>g(w.id),className:"mt-3 text-xs text-themeredred hover:underline",children:"Delete record"})]})]},w.id)})})}function hV({backRef:r,onBackToMain:i}){const[a,s]=D.useState(!1),[l,c]=D.useState(!0),[d,f]=D.useState(null),[m,g]=D.useState(null),[v,y]=D.useState("new-test"),{submitTestEvaluation:A}=Yx(),{medics:w}=Gk(),k=D.useMemo(()=>m?[...w,m]:w,[w,m]),[E,I]=D.useState("select-medic"),[T,N]=D.useState(null),[j,B]=D.useState(null),[U,F]=D.useState(null);D.useState(()=>{(async()=>{const{data:{user:Q}}=await St.auth.getUser();if(Q){f(Q.id);const{data:q}=await St.from("profiles").select("id, first_name, last_name, middle_initial, rank, credential, roles").eq("id",Q.id).single();if(q){const ee=q.roles;s(ee?.includes("supervisor")??!1),g({id:q.id,firstName:q.first_name,lastName:q.last_name,middleInitial:q.middle_initial,rank:q.rank,credential:q.credential})}}c(!1)})()});const P=D.useCallback(()=>{I("select-medic"),N(null),B(null),F(null)},[]);D.useEffect(()=>{r&&(v==="history"||E==="select-medic"?r.current=i??null:E==="select-task"?r.current=()=>I("select-medic"):E==="evaluate"&&(r.current=()=>I("select-task")))},[r,i,E,v]);const z=D.useCallback(Q=>{N(Q),I("select-task")},[]),V=D.useCallback((Q,q)=>{B(Q),F(q),I("evaluate")},[]),L=D.useCallback(async(Q,q)=>{if(!T||!j)return;const ee=Q.some(X=>X.result==="NO_GO");await A({medicUserId:T.id,trainingItemId:j,result:ee?"NO_GO":"GO",stepResults:Q,supervisorNotes:q||void 0}),P(),y("history")},[T,j,A,P]);return l?x.jsx("div",{className:"h-full flex items-center justify-center",children:x.jsx("div",{className:"text-tertiary/60",children:"Loading..."})}):a?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsxs("div",{className:"flex gap-2 mb-5",children:[x.jsxs("button",{onClick:()=>{y("new-test"),P()},className:`flex items-center gap-1.5 px-5 py-2 rounded-lg text-sm font-semibold transition-colors
              ${v==="new-test"?"bg-themeblue2 text-white":"bg-themewhite2 text-tertiary/70 hover:bg-themewhite2/80"}`,children:[x.jsx(c2,{size:14})," New Test"]}),x.jsxs("button",{onClick:()=>y("history"),className:`flex items-center gap-1.5 px-5 py-2 rounded-lg text-sm font-semibold transition-colors
              ${v==="history"?"bg-themeblue2 text-white":"bg-themewhite2 text-tertiary/70 hover:bg-themewhite2/80"}`,children:[x.jsx(lx,{size:14})," History"]})]}),v==="history"&&d?x.jsx(fV,{clinicUsers:k,currentUserId:d}):E==="select-medic"?x.jsx(cV,{onSelect:z}):E==="select-task"&&T?x.jsx(dV,{onSelectTask:V,medicName:rx(T)}):E==="evaluate"&&T&&j&&U?x.jsx(uV,{taskNumber:j,taskTitle:U,medicName:rx(T),onSubmit:L}):null]})}):x.jsx("div",{className:"h-full flex items-center justify-center px-4",children:x.jsxs("div",{className:"text-center",children:[x.jsx($5,{size:48,className:"mx-auto mb-4 text-tertiary/40"}),x.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:"Access Denied"}),x.jsx("p",{className:"text-sm text-tertiary/60",children:"You need the supervisor role to access this panel."})]})})}const pV=({onSignIn:r,onRequestAccount:i})=>x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-[10pt] font-normal text-tertiary mb-5 items-center",children:"You're currently using the app as a guest. Your notes are saved locally to this device"}),x.jsxs("div",{className:"flex w-full gap-2 justify-between",children:[x.jsxs("button",{onClick:r,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg
                     bg-themeblue3 text-white font-medium hover:bg-themeblue2/90
                     transition-colors`,children:[x.jsx(eS,{size:18}),"Sign In"]}),x.jsxs("button",{onClick:i,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg
                     bg-themegreen text-white font-normal hover:bg-themegreen
                     transition-colors`,children:[x.jsx($4,{size:18}),"Request an Account"]})]}),x.jsxs("div",{className:"mt-6 pt-6 border-t border-tertiary/10",children:[x.jsx("h3",{className:"text-sm font-semibold text-primary mb-2",children:"Guest Mode"}),x.jsxs("ul",{className:"text-xs text-tertiary space-y-1",children:[x.jsx("li",{children:" Full app functionality"}),x.jsx("li",{children:" Notes saved locally"}),x.jsx("li",{children:" No sync across devices"}),x.jsx("li",{children:" Notes may be lost if you clear browser data"})]})]}),x.jsxs("div",{className:"mt-6 pt-6 border-t border-tertiary/10",children:[x.jsx("h3",{className:"text-sm font-semibold text-primary mb-2",children:"With an Account"}),x.jsxs("ul",{className:"text-xs text-tertiary space-y-1",children:[x.jsx("li",{children:" Sync notes across all devices"}),x.jsx("li",{children:" Secure cloud backup"}),x.jsx("li",{children:" Access from anywhere"})]})]})]})}),mV=({onSuccess:r,onRequestAccount:i,variant:a="panel",onContinueAsGuest:s})=>{const[l,c]=D.useState(""),[d,f]=D.useState(""),[m,g]=D.useState(!1),[v,y]=D.useState(null),[A,w]=D.useState(!1),k=async I=>{I.preventDefault(),g(!0),y(null);const T=await SH(l,d);T.error?y(T.error.message):r(),g(!1)},E=async()=>{if(!l){y("Please enter your email");return}g(!0),y(null);const{error:I}=await St.auth.signInWithOtp({email:l,options:{emailRedirectTo:window.location.origin}});I?y(I.message):w(!0),g(!1)};return A?x.jsx("div",{className:a==="panel"?"h-full overflow-y-auto":"",children:x.jsx("div",{className:a==="panel"?"px-4 py-3 md:p-5":"p-6",children:x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"text-5xl mb-4",children:""}),x.jsx("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Check Your Email"}),x.jsxs("p",{className:"text-tertiary/70 mb-6",children:["A sign-in link has been sent to ",x.jsx("strong",{children:l}),x.jsx("br",{}),"Click the link to sign in."]}),x.jsx("button",{onClick:()=>{w(!1),c("")},className:`px-4 py-2 rounded-lg bg-tertiary/10 text-primary font-medium
                       hover:bg-tertiary/20 transition-colors`,children:"Try Another Email"})]})})}):x.jsx("div",{className:a==="panel"?"h-full overflow-y-auto":"",children:x.jsxs("div",{className:a==="panel"?"px-4 py-3 md:p-5":"p-6",children:[x.jsx("p",{className:"text-sm text-tertiary/60 mb-5",children:"Sign in to sync your notes across devices and access your profile."}),v&&x.jsx("div",{className:`mb-4 p-3 text-sm ${a==="modal"?"rounded-lg bg-red-50 border border-red-200 text-red-700":"text-themeredred"}`,children:v}),x.jsxs("form",{onSubmit:k,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-tertiary/60 uppercase tracking-wide mb-2",children:"Email"}),x.jsx("input",{type:"email",value:l,onChange:I=>c(I.target.value),placeholder:a==="modal"?"your.email@mail.mil":"email",required:!0,className:`w-full px-4 py-3 rounded-lg bg-themewhite2 border border-tertiary/10
                       focus:border-themeblue2 focus:outline-none transition-colors
                       text-primary placeholder:text-tertiary/30`})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-tertiary/60 uppercase tracking-wide mb-2",children:"Password"}),x.jsx("input",{type:"password",value:d,onChange:I=>f(I.target.value),placeholder:"",required:!0,className:`w-full px-4 py-3 rounded-lg bg-themewhite2 border border-tertiary/10
                       focus:border-themeblue2 focus:outline-none transition-colors
                       text-primary placeholder:text-tertiary/30`})]}),x.jsxs("button",{type:"submit",disabled:m,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg
                     text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors
                     ${a==="modal"?"bg-themeblue2 hover:bg-themeblue2/90":"bg-themeblue3 hover:bg-themeblue2/90"}`,children:[x.jsx(eS,{size:18}),m?"Signing In...":"Sign In"]})]}),x.jsx("div",{className:"mt-4",children:x.jsx("button",{onClick:E,disabled:m,className:`w-full px-4 py-3 rounded-lg bg-tertiary/10 text-primary font-medium
                     hover:bg-tertiary/20 disabled:opacity-50 transition-colors text-sm`,children:a==="modal"?"Send Magic Link Instead":"send sign-in link instead"})}),a==="modal"?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"relative my-6",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t border-tertiary/10"})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:"px-4 bg-themewhite text-tertiary/60",children:"or"})})]}),x.jsxs("div",{className:"space-y-3",children:[s&&x.jsx("button",{onClick:s,className:`w-full px-4 py-3 rounded-lg border-2 border-tertiary/20 text-primary
                           font-medium hover:bg-themewhite2 transition-colors`,children:"Continue as Guest"}),x.jsx("button",{onClick:i,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg
                         bg-green-50 text-green-700 font-medium hover:bg-green-100
                         border border-green-200 transition-colors text-sm`,children:"Don't have an account? Request Access"})]}),x.jsxs("p",{className:"mt-4 text-xs text-center text-tertiary/60",children:["Guest mode: Your notes stay on this device only.",x.jsx("br",{}),"Sign in to sync across devices."]})]}):x.jsxs("div",{className:"mt-6 pt-6 border-t border-tertiary/10",children:[x.jsx("p",{className:"text-sm text-tertiary/60 mb-3 text-center",children:"Don't have an account?"}),x.jsx("button",{onClick:i,className:`w-full px-4 py-3 rounded-lg bg-themeblue3 text-white font-medium
                       hover:bg-themeblue2 transition-all duration-300`,children:"Request an Account"})]})]})})},gV="/test2/";function vV({aid:r,isPlaying:i,onPlay:a,onStop:s}){return x.jsxs("button",{onClick:i?s:a,className:`flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-left transition-all active:scale-[0.98]
                ${i?"bg-themeblue2/15 ring-1 ring-themeblue2/30":"bg-themewhite2 hover:bg-themewhite2/80"}`,children:[x.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 transition-colors
                ${i?"bg-themeblue2/20":"bg-themeblue2/10"}`,children:i?x.jsx(R_,{size:12,className:"text-themeblue2",fill:"currentColor"}):x.jsx(u_,{size:13,className:"text-themeblue2 ml-0.5",fill:"currentColor"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${i?"text-themeblue2":"text-primary"}`,children:r.label}),r.description&&x.jsx("p",{className:"text-[9pt] text-tertiary/60 leading-snug mt-0.5",children:r.description})]})]})}function Kk({audioAids:r}){const[i,a]=D.useState(null),s=D.useRef(null),l=D.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0,s.current=null),a(null)},[]),c=D.useCallback(d=>{l();const f=new Audio(`${gV}trainingAids/${r[d].file}`);f.addEventListener("ended",()=>a(null)),f.play(),s.current=f,a(d)},[r,l]);return D.useEffect(()=>()=>{s.current&&(s.current.pause(),s.current=null)},[]),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Audio Training Aids"}),x.jsx("div",{className:"space-y-1.5",children:r.map((d,f)=>x.jsx(vV,{aid:d,isPlaying:i===f,onPlay:()=>c(f),onStop:l},f))})]})}function xV(){const r=new Map,i=new Map;for(const a of Xk)i.set(a,[]),r.set(a,new Set);Kh.forEach((a,s)=>{a.subjectArea.forEach((l,c)=>{i.has(l.name)||(i.set(l.name,[]),r.set(l.name,new Set));const d=r.get(l.name);l.tasks.forEach((f,m)=>{d.has(f.id)||(d.add(f.id),i.get(l.name).push({taskId:f.id,title:f.title,levelIdx:s,levelName:a.skillLevel,areaName:l.name,option:{id:m,icon:f.id,text:f.title,isParent:!1,parentId:c}}))})})});for(const a of i.values())a.sort((s,l)=>s.levelIdx-l.levelIdx||s.title.localeCompare(l.title));return i}function bV({task:r,onSelectTask:i,isTaskCompleted:a,isTaskViewed:s}){const l=!!sc(r.taskId),c=a(r.taskId),d=s(r.taskId),f=Wk[r.levelName]??r.levelName;return x.jsxs("button",{onClick:()=>l&&i(r.option),disabled:!l,className:`flex items-center w-full px-6 py-3 rounded-xl text-left transition-all
                ${l?"hover:bg-themewhite2 active:scale-[0.98] cursor-pointer":"opacity-40 cursor-not-allowed"}`,children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium truncate ${l?"text-primary":"text-tertiary"}`,children:r.title}),x.jsx("p",{className:"text-[8pt] text-tertiary/50 font-mono",children:r.taskId}),!l&&x.jsxs("p",{className:"text-[8pt] text-tertiary/40 flex items-center gap-1 mt-0.5",children:[x.jsx(d2,{size:9})," Coming soon"]})]}),x.jsxs("div",{className:"shrink-0 ml-2 flex items-center gap-2",children:[x.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8pt] font-semibold bg-themewhite2 text-tertiary/60",children:f}),c?x.jsx(So,{size:16,className:"text-themegreen"}):d?x.jsx("div",{className:"w-2 h-2 rounded-full bg-themeyellow"}):l?x.jsx(af,{size:16,className:"text-tertiary/30"}):null]})]})}function yV({onSelectTask:r}){const{isTaskCompleted:i,isTaskViewed:a}=Yx(),[s,l]=D.useState(""),c=D.useRef(null),d=D.useMemo(()=>xV(),[]),f=D.useMemo(()=>{const v=s.trim().toLowerCase();if(!v)return d;const y=new Map;for(const[A,w]of d){const k=w.filter(E=>E.title.toLowerCase().includes(v)||E.taskId.toLowerCase().includes(v));k.length>0&&y.set(A,k)}return y},[s,d]),m=D.useMemo(()=>{let v=0;for(const y of f.values())v+=y.length;return v},[f]),g=s.trim().length>0;return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-xs text-tertiary/60 mb-3",children:"STP 8-68W13-SM-TG  Select a task to begin studying."}),x.jsxs("div",{className:"relative mb-3",children:[x.jsx(Wh,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-tertiary/40 pointer-events-none"}),x.jsx("input",{ref:c,type:"text",value:s,onChange:v=>l(v.target.value),placeholder:"Search tasks...",className:`w-full pl-8 pr-8 py-2 rounded-lg bg-themewhite2 text-sm text-primary\r
                                   placeholder:text-tertiary/40 outline-none focus:ring-1 focus:ring-themeblue2/40 transition-all`}),s&&x.jsx("button",{onClick:()=>{l(""),c.current?.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 rounded-full hover:bg-tertiary/10 transition-colors",children:x.jsx(ms,{size:14,className:"text-tertiary/50"})})]}),g&&x.jsxs("p",{className:"text-[10px] text-tertiary/50 mb-2",children:[m," result",m!==1?"s":""]}),m===0&&g?x.jsx("p",{className:"text-sm text-tertiary/40 text-center py-8",children:"No tasks match your search."}):x.jsx("div",{className:"space-y-1",children:Array.from(f).map(([v,y])=>x.jsxs("div",{children:[x.jsxs("div",{className:"px-6 pt-4 pb-1 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-tertiary/50",children:[$k[v]??x.jsx(ox,{size:14}),x.jsx("p",{className:"text-[10px] font-semibold tracking-widest uppercase",children:v})]}),x.jsx("p",{className:"text-[10px] text-tertiary/40",children:y.length})]}),y.map(A=>x.jsx(bV,{task:A,onSelectTask:r,isTaskCompleted:i,isTaskViewed:a},A.taskId))]},v))})]})})}function _y({type:r,text:i}){const s={warning:{bg:"bg-themeyellow/10",border:"border-themeyellow/30",icon:x.jsx(Tc,{size:13,className:"text-themeyellow shrink-0 mt-0.5"}),label:"WARNING"},caution:{bg:"bg-orange-500/10",border:"border-orange-500/30",icon:x.jsx(Tc,{size:13,className:"text-orange-500 shrink-0 mt-0.5"}),label:"CAUTION"},note:{bg:"bg-themeblue2/10",border:"border-themeblue2/30",icon:x.jsx(Bm,{size:13,className:"text-themeblue2 shrink-0 mt-0.5"}),label:"NOTE"}}[r];return x.jsxs("div",{className:`${s.bg} border ${s.border} rounded-md px-3 py-2 mt-1.5 flex items-start gap-2`,children:[s.icon,x.jsxs("div",{children:[x.jsx("p",{className:"text-[7pt] font-bold tracking-wider opacity-60",children:s.label}),x.jsx("p",{className:"text-xs text-primary/80",children:i})]})]})}function wV({step:r}){return x.jsxs("div",{className:`${r.isSubStep?"ml-6":""}`,children:[x.jsxs("div",{className:"flex items-start gap-2 py-1.5",children:[x.jsx("span",{className:"text-[9pt] text-tertiary/50 font-mono w-6 shrink-0 text-right mt-px",children:r.number}),x.jsx("p",{className:"text-sm text-primary flex-1",children:r.text})]}),r.warning&&x.jsx(_y,{type:"warning",text:r.warning}),r.caution&&x.jsx(_y,{type:"caution",text:r.caution}),r.note&&x.jsx(_y,{type:"note",text:r.note})]})}function AV({taskData:r,taskNumber:i}){const{markTaskViewed:a,markTaskCompleted:s,isTaskCompleted:l}=Yx(),c=D.useRef(null),d=l(i);D.useEffect(()=>{a(i,0)},[i,a]),D.useEffect(()=>{if(d||!c.current)return;const m=new IntersectionObserver(([g])=>{g.isIntersecting&&(s(i),m.disconnect())},{threshold:.5});return m.observe(c.current),()=>m.disconnect()},[i,d,s]);const f=D.useCallback(()=>{s(i)},[i,s]);return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5 pb-12",children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[8pt] text-tertiary/50 font-mono",children:r.taskNumber}),x.jsx("h3",{className:"text-lg font-semibold text-primary",children:r.title}),d&&x.jsxs("span",{className:"inline-flex items-center gap-1 text-[9pt] text-themegreen mt-1",children:[x.jsx(So,{size:12})," Completed"]})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Conditions"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3.5 py-3",children:x.jsx("p",{className:"text-sm text-primary/80 leading-relaxed",children:r.conditions})})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Standards"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3.5 py-3",children:x.jsx("p",{className:"text-sm text-primary/80 leading-relaxed",children:r.standards})})]}),r.audioAids&&r.audioAids.length>0&&x.jsx(Kk,{audioAids:r.audioAids}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Performance Steps"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3 py-2",children:r.performanceSteps.map((m,g)=>x.jsx(wV,{step:m},g))})]}),!d&&x.jsx("button",{onClick:f,className:`w-full py-3 rounded-xl bg-themegreen/15 text-themegreen text-sm font-medium\r
                                   hover:bg-themegreen/25 active:scale-[0.98] transition-all`,children:"Mark as Completed"}),x.jsx("div",{ref:c,className:"h-1"})]})})}function SV({view:r,selectedTask:i,onSelectTask:a}){if(r==="training-detail"&&i){const s=sc(i.icon);if(s)return x.jsx(AV,{taskData:s,taskNumber:i.icon})}return x.jsx(yV,{onSelectTask:a})}const ax=({type:r,message:i,className:a=""})=>{const s=r==="success",l=s?S_:iS,c=s?"text-themegreen":"text-themeredred",d=s?"bg-themegreen/10":"bg-themeredred/10";return x.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${d} ${a}`,children:[x.jsx(l,{size:16,className:c}),x.jsx("span",{className:`text-sm ${c} font-medium`,children:i})]})},kV=[{label:"20 minutes",value:1200*1e3},{label:"Never",value:0}],CV=()=>{const[r,i]=D.useState("status"),[a,s]=D.useState(Ph()),[l,c]=D.useState($7),{isAuthenticated:d}=tg(),[f,m]=D.useState(""),[g,v]=D.useState(""),[y,A]=D.useState(""),[w,k]=D.useState(""),[E,I]=D.useState(!1),[T,N]=D.useState(ex()),[j,B]=D.useState(null),U=D.useRef(null),[F,P]=D.useState(!1),[z,V]=D.useState(tk()),[L,Q]=D.useState(!1);D.useEffect(()=>{let J=!1;async function te(){const $=await ek();J||P($)}return te(),()=>{J=!0}},[]),D.useEffect(()=>{if(!T.isLockedOut){U.current&&clearInterval(U.current);return}return U.current=setInterval(()=>{const J=ex();N(J),!J.isLockedOut&&U.current&&clearInterval(U.current)},1e3),()=>{U.current&&clearInterval(U.current)}},[T.isLockedOut]);const q=D.useCallback(()=>{m(""),v(""),A(""),k(""),I(!1),B(null)},[]),ee=D.useCallback(()=>{I(!0),setTimeout(()=>{I(!1),m("")},400)},[]),X=D.useCallback(async()=>{Q(!0);try{z?(T4(),V(!1),k("Face ID / Touch ID disabled"),setTimeout(()=>k(""),Li.COPY_FEEDBACK)):await vH()?(V(!0),k("Face ID / Touch ID enabled"),setTimeout(()=>k(""),Li.COPY_FEEDBACK)):(A("Biometric setup was cancelled or failed"),setTimeout(()=>A(""),Li.SAVE_ERROR_DURATION))}finally{Q(!1)}},[z]),ae=D.useCallback(async J=>{switch(r){case"set-new":v(J),m(""),A(""),i("confirm-new");break;case"confirm-new":if(J===g){await f5(J);const te=h5();te&&v5(te.hash,te.salt),Wu(),s(!0),k("PIN enabled"),setTimeout(()=>{q(),i("status")},1200)}else A("PINs don't match"),ee();break;case"verify-current":{if(await W7(J))Wu(),j==="change"?(m(""),A(""),i("change-new")):j==="remove"&&(X7(),dH(),T4(),s(!1),V(!1),k("PIN removed"),setTimeout(()=>{q(),i("status")},1200));else{const $=J7();N($),A($.isLockedOut?`Locked for ${$.remainingSeconds}s`:"Incorrect PIN"),ee()}break}case"change-new":v(J),m(""),A(""),i("change-confirm");break;case"change-confirm":if(J===g){await f5(J);const te=h5();te&&v5(te.hash,te.salt),Wu(),s(!0),k("PIN changed"),setTimeout(()=>{q(),i("status")},1200)}else A("PINs don't match"),ee();break}},[r,g,j,q,ee]),K=D.useCallback(J=>{T.isLockedOut||(A(""),m(te=>{const $=te+J;return $.length===4&&ae($),$.length<=4?$:te}))},[T.isLockedOut,ae]),ie=D.useCallback(()=>{T.isLockedOut||(A(""),m(J=>J.slice(0,-1)))},[T.isLockedOut]);D.useEffect(()=>{if(r==="status")return;const J=te=>{te.key>="0"&&te.key<="9"?K(te.key):te.key==="Backspace"?ie():te.key==="Escape"&&(q(),i("status"))};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[r,K,ie,q]);const ne={"set-new":"Create a 4-digit PIN","confirm-new":"Confirm your PIN","verify-current":"Enter current PIN","change-new":"Enter new PIN","change-confirm":"Confirm new PIN"};return r==="status"?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-themeblue2/10 flex items-center justify-center",children:x.jsx(d2,{size:20,className:"text-themeblue2"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-semibold text-primary",children:"App Lock"}),x.jsx("p",{className:"text-xs text-tertiary",children:a?"PIN lock is enabled":"Protect your app with a PIN"})]})]}),x.jsx("p",{className:"text-xs text-tertiary/70 mb-5 leading-relaxed",children:"When enabled, a 4-digit PIN will be required each time you open the application. Your PIN persists across devices and protects cached notes."}),w&&x.jsx(ax,{type:"success",message:w,className:"mb-4"}),y&&x.jsx(ax,{type:"error",message:y,className:"mb-4"}),a?x.jsxs("div",{className:"space-y-2",children:[F&&x.jsxs("button",{onClick:X,disabled:L,className:`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all active:scale-[0.98] ${z?"bg-themegreen/10 hover:bg-themegreen/15":"bg-themeblue2/10 hover:bg-themeblue2/15"} disabled:opacity-50`,children:[x.jsx(nS,{size:18,className:z?"text-themegreen":"text-themeblue2"}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("span",{className:`text-sm font-medium ${z?"text-themegreen":"text-themeblue2"}`,children:L?"Setting up...":z?"Face ID / Touch ID On":"Enable Face ID / Touch ID"}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:z?"Tap to disable biometric unlock":"Use biometrics instead of PIN to unlock"})]})]}),x.jsxs("button",{onClick:()=>{q(),B("change"),i("verify-current")},className:`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl bg-themeblue2/10
                           hover:bg-themeblue2/15 active:scale-[0.98] transition-all`,children:[x.jsx(j3,{size:18,className:"text-themeblue2"}),x.jsx("span",{className:"text-sm font-medium text-themeblue2",children:"Change PIN"})]}),x.jsxs("button",{onClick:()=>{q(),B("remove"),i("verify-current")},className:`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl bg-themeredred/10
                           hover:bg-themeredred/15 active:scale-[0.98] transition-all`,children:[x.jsx(Dd,{size:18,className:"text-themeredred"}),x.jsx("span",{className:"text-sm font-medium text-themeredred",children:"Remove PIN"})]})]}):x.jsxs("button",{onClick:()=>{q(),i("set-new")},className:`w-full flex items-center gap-3 px-4 py-3.5 rounded-xl bg-themeblue2/10
                         hover:bg-themeblue2/15 active:scale-[0.98] transition-all`,children:[x.jsx(j3,{size:18,className:"text-themeblue2"}),x.jsx("span",{className:"text-sm font-medium text-themeblue2",children:"Set Up PIN Lock"})]}),d&&x.jsx(x.Fragment,{children:x.jsxs("div",{className:"border-t border-tertiary/10 mt-5 pt-5",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-themeblue2/10 flex items-center justify-center",children:x.jsx(z_,{size:16,className:"text-themeblue2"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-semibold text-primary",children:"Inactivity Timeout"}),x.jsx("p",{className:"text-[11px] text-tertiary/70",children:a?"Locks to PIN screen after inactivity":"Requires password re-entry after inactivity"})]})]}),x.jsx("select",{value:l,onChange:J=>{const te=Number(J.target.value);c(te),lH(te)},className:`w-full px-3 py-2.5 rounded-lg bg-themewhite2 text-primary text-sm
                             border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                             transition-colors appearance-none cursor-pointer`,children:kV.map(J=>x.jsx("option",{value:J.value,children:J.label},J.value))})]})})]})}):x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"flex flex-col items-center px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:ne[r]}),y&&x.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[x.jsx(iS,{size:14,className:"text-themeredred"}),x.jsx("span",{className:"text-xs text-themeredred",children:y})]}),!y&&x.jsx("div",{className:"h-5"}),x.jsx("div",{className:`flex gap-3 mb-6 ${E?"animate-shake":""}`,children:[0,1,2,3].map(J=>x.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-150 ${J<f.length?y?"bg-themeredred scale-110":"bg-themeblue2 scale-110":"bg-themegray1/50"}`},J))}),x.jsx("div",{className:"grid grid-cols-3 gap-x-5 gap-y-2 w-[220px]",children:["1","2","3","4","5","6","7","8","9","","0","back"].map((J,te)=>J===""?x.jsx("div",{},te):J==="back"?x.jsx("button",{onClick:ie,disabled:T.isLockedOut,className:`w-[60px] h-[60px] rounded-full flex items-center justify-center
                             active:bg-themegray1/20 transition-colors disabled:opacity-30`,children:x.jsx(Z5,{size:20,className:"text-primary"})},te):x.jsx("button",{onClick:()=>K(J),disabled:T.isLockedOut,className:`w-[60px] h-[60px] rounded-full bg-themewhite2 flex items-center justify-center
                           text-xl font-medium text-primary
                           active:bg-themegray1/40 transition-colors disabled:opacity-30`,children:J},te))}),x.jsx("button",{onClick:()=>{q(),i("status")},className:"mt-5 text-xs text-tertiary hover:text-primary transition-colors",children:"Cancel"})]})})},L5="BItnAXws3mF4nNi3n2hIea1ggVE_yMo4dBMLN15bjejkDJmPvLSVbmaE4vfEgElV7Xx2EnpBlaAOdxm1gsnz89Y";function EV(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&!0}async function Jk(){return"serviceWorker"in navigator?(await navigator.serviceWorker.ready).pushManager.getSubscription():null}async function _V(){try{if(await Notification.requestPermission()!=="granted")return{success:!1,error:"Notification permission denied"};const a=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gH(L5)}),s=a.toJSON(),{error:l}=await St.rpc("save_push_subscription",{p_endpoint:s.endpoint,p_auth_key:s.keys.auth,p_p256dh_key:s.keys.p256dh});return l?(await a.unsubscribe(),{success:!1,error:l.message}):{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to subscribe"}}}async function IV(){try{const r=await Jk();if(!r)return{success:!0};const i=r.endpoint;return await r.unsubscribe(),await St.rpc("remove_push_subscription",{p_endpoint:i}),{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to unsubscribe"}}}function NV(){const[r,i]=D.useState(!1),[a,s]=D.useState(!1),[l,c]=D.useState(!0),[d,f]=D.useState(null);D.useEffect(()=>{const v=EV();if(i(v),!v){c(!1);return}Jk().then(y=>{s(!!y),c(!1)})},[]);const m=D.useCallback(async()=>{c(!0),f(null);const v=await _V();return v.success?s(!0):f(v.error||"Failed to subscribe"),c(!1),v.success},[]),g=D.useCallback(async()=>{c(!0),f(null);const v=await IV();return v.success?s(!1):f(v.error||"Failed to unsubscribe"),c(!1),v.success},[]);return{isSupported:r,isSubscribed:a,loading:l,error:d,subscribe:m,unsubscribe:g}}const rm=({checked:r})=>x.jsx("div",{className:`w-10 h-6 rounded-full relative transition-colors ${r?"bg-themeblue2":"bg-tertiary/25"}`,children:x.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full bg-white shadow-sm transition-transform ${r?"translate-x-4":"translate-x-0.5"}`})}),TV=()=>{const{isSupported:r,isSubscribed:i,loading:a,error:s,subscribe:l,unsubscribe:c}=NV(),{profile:d,updateProfile:f,syncProfileField:m}=Zm(),[g,v]=D.useState(!1),[y,A]=D.useState(""),[w,k]=D.useState(""),E=d.notifyClinicNotes??!1,I=d.notifyDevAlerts??!1;D.useEffect(()=>{qw().then(v)},[]);const T=D.useCallback(B=>{A(B),setTimeout(()=>A(""),Li.COPY_FEEDBACK)},[]),N=D.useCallback(B=>{k(B),setTimeout(()=>k(""),Li.SAVE_ERROR_DURATION)},[]),j=D.useCallback(async(B,U,F,P)=>{if(k(""),F&&!i&&!await l()){N(s||"Could not enable notifications");return}f({[B]:F}),m({[U]:F}),!F&&!P&&c(),T(F?"Notifications enabled":"Notifications updated")},[i,l,c,s,f,m,T,N]);return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-5 py-4 space-y-5",children:[x.jsx("p",{className:"text-xs text-tertiary leading-relaxed",children:"Choose which notifications you'd like to receive. Your preferences sync across devices  each device still needs its own browser permission."}),y&&x.jsx(ax,{type:"success",message:y}),(w||s)&&x.jsx(ax,{type:"error",message:w||s||""}),!r&&x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-tertiary/5",children:[x.jsx(Bm,{size:16,className:"text-tertiary/60"}),x.jsx("span",{className:"text-sm text-tertiary/70",children:"Push notifications are not supported in this browser."})]}),r&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:`flex items-center gap-3 px-4 py-3.5 rounded-xl border transition-all cursor-pointer
                ${E?"border-themeblue2/25 bg-themeblue2/10":"border-tertiary/15 bg-themewhite2"} ${a?"opacity-50 pointer-events-none":""}`,onClick:()=>j("notifyClinicNotes","notify_clinic_notes",!E,I),role:"button",tabIndex:0,onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),j("notifyClinicNotes","notify_clinic_notes",!E,I))},children:[x.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shrink-0 ${E?"bg-themeblue2/15":"bg-tertiary/10"}`,children:x.jsx(Oy,{size:18,className:E?"text-themeblue2":"text-tertiary/50"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${E?"text-primary":"text-tertiary"}`,children:"Clinic Notes"}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:"Get notified when someone contributes a note in your clinic"})]}),x.jsx(rm,{checked:E})]}),g&&x.jsxs("div",{className:`flex items-center gap-3 px-4 py-3.5 rounded-xl border transition-all cursor-pointer
                  ${I?"border-themeblue2/25 bg-themeblue2/10":"border-tertiary/15 bg-themewhite2"} ${a?"opacity-50 pointer-events-none":""}`,onClick:()=>j("notifyDevAlerts","notify_dev_alerts",!I,E),role:"button",tabIndex:0,onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),j("notifyDevAlerts","notify_dev_alerts",!I,E))},children:[x.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shrink-0 ${I?"bg-themeblue2/15":"bg-tertiary/10"}`,children:x.jsx(EE,{size:18,className:I?"text-themeblue2":"text-tertiary/50"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${I?"text-primary":"text-tertiary"}`,children:"Dev Alerts"}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:"Login alerts, account requests, and feedback"})]}),x.jsx(rm,{checked:I})]})]})]})})},MV=ya("FeedbackService");async function RV(r){try{let i=null,a=null;const{data:{user:s}}=await St.auth.getUser();if(s){i=s.id;const c=QH(await St.from("profiles").select("display_name").eq("id",s.id).single());a=c.ok?c.data.display_name:null}const{error:l}=await St.from("feedback").insert({user_id:i,display_name:a,rating:r.rating,comments:r.comments?.trim()||null,most_useful_feature:r.most_useful_feature?.trim()||null,desired_feature:r.desired_feature?.trim()||null,needs_improvement:r.needs_improvement?.trim()||null});return l?{success:!1,error:l.message}:(Hx({type:"new_feedback",name:a,email:null}),{success:!0})}catch(i){return MV.error("Failed to submit feedback:",i),{success:!1,error:i instanceof Error?i.message:"Failed to submit feedback"}}}const OV=()=>{const[r,i]=D.useState(0),[a,s]=D.useState(""),[l,c]=D.useState(""),[d,f]=D.useState(""),[m,g]=D.useState(""),[v,y]=D.useState(!1),[A,w]=D.useState(!1),[k,E]=D.useState(null),I=async T=>{if(T.preventDefault(),r===0)return;y(!0),E(null);const N=await RV({rating:r,comments:a||null,most_useful_feature:l||null,desired_feature:d||null,needs_improvement:m||null});y(!1),N.success?w(!0):E(N.error||"Failed to submit feedback")};return A?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx("div",{className:"px-4 py-3 md:p-5",children:x.jsxs("div",{className:"text-center py-12 animate-fadeInScale",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-themegreen/10 mb-4",children:x.jsx(fE,{size:32,className:"text-themegreen"})}),x.jsx("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Thank You!"}),x.jsx("p",{className:"text-tertiary/70",children:"Your feedback has been submitted. We appreciate your input!"})]})})}):x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-sm text-tertiary/60 mb-5 md:text-base",children:"Help us improve by sharing your experience and suggestions."}),k&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:k}),x.jsxs("form",{onSubmit:I,className:"space-y-5",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide block mb-2",children:"How would you rate your experience?"}),x.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(T=>x.jsx("button",{type:"button",onClick:()=>i(T),className:"p-1 active:scale-90 transition-transform","aria-label":`${T} star${T!==1?"s":""}`,children:x.jsx(D_,{size:32,className:T<=r?"text-themeblue3 fill-themeblue3":"text-themeblue3/20"})},T))})]}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Comments"}),x.jsx("textarea",{value:a,onChange:T=>s(T.target.value),placeholder:"Share your thoughts...",rows:3,className:`mt-1 w-full px-4 py-2 rounded-2xl bg-themewhite text-tertiary text-[16px]
                       border border-themeblue3/10 shadow-xs focus:border-themeblue1/30 focus:bg-themewhite2
                       focus:outline-none transition-all placeholder:text-tertiary/30 resize-none`})]}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"What feature do you find most useful?"}),x.jsx("input",{type:"text",value:l,onChange:T=>c(T.target.value),placeholder:"e.g. Algorithm navigation, clinic notes...",className:`mt-1 w-full px-4 py-2 rounded-full bg-themewhite text-tertiary text-[16px]
                       border border-themeblue3/10 shadow-xs focus:border-themeblue1/30 focus:bg-themewhite2
                       focus:outline-none transition-all placeholder:text-tertiary/30`})]}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"What feature would you most like to see added?"}),x.jsx("input",{type:"text",value:d,onChange:T=>f(T.target.value),placeholder:"e.g. Offline mode, medication calculator...",className:`mt-1 w-full px-4 py-2 rounded-full bg-themewhite text-tertiary text-[16px]
                       border border-themeblue3/10 shadow-xs focus:border-themeblue1/30 focus:bg-themewhite2
                       focus:outline-none transition-all placeholder:text-tertiary/30`})]}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"What area needs the most improvement?"}),x.jsx("input",{type:"text",value:m,onChange:T=>g(T.target.value),placeholder:"e.g. Search, navigation, performance...",className:`mt-1 w-full px-4 py-2 rounded-full bg-themewhite text-tertiary text-[16px]
                       border border-themeblue3/10 shadow-xs focus:border-themeblue1/30 focus:bg-themewhite2
                       focus:outline-none transition-all placeholder:text-tertiary/30`})]}),x.jsx("button",{type:"submit",disabled:r===0||v,className:`w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium
                     hover:bg-themeblue2/90 transition-colors disabled:opacity-50
                     disabled:cursor-not-allowed`,children:v?"Submitting...":"Submit Feedback"})]})]})})},DV=[{id:"note-actions",title:"Note Actions",icon:x.jsx(c2,{size:20}),src:"howTo/desktopNoteActions.mp4",mobileSrc:"howTo/mobile/Note Actions.mp4",tags:["desktop","mobile"]},{id:"note-import",title:"Importing Notes",icon:x.jsx(zE,{size:20}),src:"howTo/Note Import.mp4",mobileSrc:"howTo/mobile/Note Import.mp4",tags:["desktop","mobile"]},{id:"settings",title:"Settings Overview",icon:x.jsx(Y4,{size:20}),src:"howTo/settings.mp4",mobileSrc:"howTo/mobile/settings.mp4",tags:["desktop","mobile"]},{id:"training",title:"Training",icon:x.jsx(ox,{size:20}),src:"howTo/training.mp4",mobileSrc:"howTo/mobile/training.mp4",tags:["desktop","mobile"]},{id:"medications",title:"Medications",icon:x.jsx(V4,{size:20}),src:null,mobileSrc:null,tags:["desktop","mobile"]},{id:"algorithm",title:"Using the Algorithm",icon:x.jsx(UE,{size:20}),src:"howTo/desktopAlgorithm.mp4",mobileSrc:"howTo/mobile/mobileAlgorithm.mp4",tags:["desktop","mobile"]}],jV=()=>{const[r,i]=D.useState(null),a=wi(d=>d.isMobile),s=a?"mobile":"desktop",l=DV.filter(d=>d.tags.includes(s)),c=D.useCallback(d=>{(a?d.mobileSrc:d.src)&&i(m=>m===d.id?null:d.id)},[a]);return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("p",{className:"text-sm text-tertiary/60 mb-4 md:text-base",children:"Some short walkthroughs are available to help you navigate the application. We're always expanding our help section. Leave feedback if you think there's an item missing."}),x.jsx("div",{className:"grid grid-cols-3 gap-2",children:l.map(d=>{const f=a?d.mobileSrc:d.src,m=r===d.id,g=!f;return x.jsx("div",{className:`transition-all duration-200 ease-out ${m?"col-span-3":""}`,children:x.jsxs("button",{onClick:()=>c(d),disabled:g,className:`w-full border overflow-hidden transition-colors duration-200
                                            ${m?"rounded-xl border-themeblue2/40 bg-themeblue2/10":g?"rounded-lg border-tertiary/10 bg-themewhite2/50 opacity-50 cursor-not-allowed":"rounded-lg border-tertiary/15 bg-themewhite2 hover:bg-themeblue2/10 hover:border-themeblue2/25 active:scale-[0.97] group"}`,children:[x.jsxs("div",{className:m?"flex items-center gap-2 px-3 py-2.5 border-b border-themeblue2/15":"flex flex-col items-center justify-center gap-1 px-2 h-16",children:[x.jsxs("div",{className:`relative ${g?"text-tertiary/40":"text-themeblue2"} ${!g&&!m?"group-hover:scale-110":""} transition-transform`,children:[d.icon,!m&&g&&x.jsx("span",{className:"absolute -top-1.5 -right-3 text-[7px] text-tertiary/40 font-medium uppercase tracking-wide",children:"Soon"})]}),x.jsx("span",{className:m?"text-sm font-semibold text-primary flex-1 text-left":`text-[11px] font-medium text-center leading-tight ${g?"text-tertiary/40":"text-primary"}`,children:d.title}),m&&x.jsx(ms,{size:16,className:"text-tertiary/40"})]}),x.jsx("div",{className:`grid transition-[grid-template-rows,opacity] duration-200 ease-out ${m&&f?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:x.jsx("div",{className:"overflow-hidden",children:x.jsx("div",{className:"p-2",onClick:v=>v.stopPropagation(),children:x.jsx("div",{className:"w-full aspect-video rounded-lg bg-black/5",children:m&&f&&x.jsx("video",{src:`/test2/${f}`,controls:!0,playsInline:!0,className:"w-full h-full rounded-lg"},`${d.id}-${s}`)})})})})]})},d.id)})})]})})},BV=({expanders:r,onChange:i})=>{const[a,s]=D.useState(null),[l,c]=D.useState(!1),[d,f]=D.useState(""),[m,g]=D.useState(""),[v,y]=D.useState(""),A=(j,B,U)=>j.trim()?/\s/.test(j)?"Abbreviation cannot contain spaces":B.trim()?r.some((P,z)=>z!==U&&P.abbr.toLowerCase()===j.trim().toLowerCase())?"Abbreviation already exists":"":"Expansion text is required":"Abbreviation is required",w=()=>{s(null),f(""),g(""),y(""),c(!0)},k=j=>{const B=r[j];c(!1),s(j),f(B.abbr),g(B.expansion),y("")},E=()=>{c(!1),s(null),f(""),g(""),y("")},I=()=>{const B=A(d,m,a??void 0);if(B){y(B);return}const U={abbr:d.trim(),expansion:m.trim()};if(a!==null){const F=[...r];F[a]=U,i(F)}else i([...r,U]);E()},T=j=>{i(r.filter((B,U)=>U!==j)),a===j&&E()},N=l||a!==null;return x.jsxs("div",{className:"space-y-2",children:[r.length>0&&x.jsx("div",{className:"space-y-1",children:r.map((j,B)=>x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-themewhite3 border border-tertiary/10",children:[x.jsx("code",{className:"shrink-0 text-[11px] font-mono font-semibold bg-themeblue2/10 text-themeblue2 px-1.5 py-0.5 rounded",children:j.abbr}),x.jsx("span",{className:"text-tertiary/40 text-xs shrink-0",children:""}),x.jsxs("span",{className:"text-xs text-tertiary truncate flex-1 min-w-0",children:[j.expansion.split(`
`)[0],j.expansion.includes(`
`)?" ...":""]}),x.jsx("button",{onClick:()=>k(B),className:"shrink-0 p-1 rounded hover:bg-tertiary/10 transition-colors","aria-label":`Edit ${j.abbr}`,children:x.jsx(cx,{size:13,className:"text-tertiary/50"})}),x.jsx("button",{onClick:()=>T(B),className:"shrink-0 p-1 rounded hover:bg-themeredred/10 transition-colors","aria-label":`Delete ${j.abbr}`,children:x.jsx(Dd,{size:13,className:"text-themeredred/50"})})]},B))}),N&&x.jsxs("div",{className:"space-y-2 px-3 py-3 rounded-lg border border-themeblue2/20 bg-themeblue2/5",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("input",{type:"text",value:d,onChange:j=>{f(j.target.value),y("")},placeholder:"Abbreviation",className:"w-full text-xs px-2 py-1.5 rounded-md border border-tertiary/20 bg-themewhite outline-none focus:border-themeblue2/40 text-tertiary",autoFocus:!0}),x.jsx("textarea",{value:m,onChange:j=>{g(j.target.value),y("")},placeholder:"Expansion text (multi-line supported)",className:"w-full min-h-[4rem] text-xs px-2 py-1.5 rounded-md border border-tertiary/20 bg-themewhite outline-none focus:border-themeblue2/40 text-tertiary resize-none leading-5",onKeyDown:j=>{j.key==="Enter"&&(j.metaKey||j.ctrlKey)&&I(),j.key==="Escape"&&E()}})]}),v&&x.jsx("p",{className:"text-[10px] text-themeredred",children:v}),x.jsxs("div",{className:"flex gap-2 justify-end",children:[x.jsx("button",{onClick:E,className:"text-[11px] px-3 py-1 rounded-md text-tertiary hover:bg-tertiary/10 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:I,className:"text-[11px] px-3 py-1 rounded-md bg-themeblue2 text-white hover:bg-themeblue2/90 transition-colors",children:a!==null?"Update":"Add"})]})]}),!N&&x.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 text-[11px] text-themeblue2 hover:text-themeblue2/80 transition-colors px-1 py-1",children:[x.jsx(dx,{size:14}),x.jsx("span",{children:"Add Template"})]})]})},PV=[{value:"minimal",label:"Minimal",description:"Vitals + free-text findings only"},{value:"expanded",label:"Expanded",description:"Expanded vitals + category-specific items, all normal"},{value:"custom",label:"Custom",description:"User-defined exam blocks with normal/abnormal tags"}],FV=({blocks:r,onChange:i})=>{const[a,s]=D.useState(null),[l,c]=D.useState(!1),[d,f]=D.useState(null),[m,g]=D.useState(""),[v,y]=D.useState(""),[A,w]=D.useState(""),[k,E]=D.useState([]),[I,T]=D.useState(""),N=(q,ee)=>q.trim()?r.some(ae=>ae.id!==ee&&ae.name.toLowerCase()===q.trim().toLowerCase())?"Block name already exists":"":"Block name is required",j=()=>{s(null),g(""),y(""),E([]),w(""),T(""),c(!0)},B=q=>{c(!1),s(q.id),g(q.name),y(q.normalText),E([...q.abnormalTags]),w(""),T("")},U=()=>{c(!1),s(null),g(""),y(""),E([]),w(""),T("")},F=()=>{const q=A.trim();if(q){if(k.includes(q)){w("");return}E([...k,q]),w("")}},P=q=>{E(k.filter((ee,X)=>X!==q))},z=()=>{const q=N(m,a??void 0);if(q){T(q);return}if(a){const ee=r.map(X=>X.id===a?{...X,name:m.trim(),normalText:v.trim(),abnormalTags:k}:X);i(ee)}else{const ee={id:crypto.randomUUID(),name:m.trim(),normalText:v.trim(),abnormalTags:k};i([...r,ee])}U()},V=q=>{i(r.filter(ee=>ee.id!==q)),a===q&&U()},L=q=>{f(ee=>ee===q?null:q)},Q=l||a!==null;return x.jsxs("div",{className:"space-y-2",children:[x.jsx("p",{className:"text-[10px] font-semibold text-tertiary/50 tracking-widest uppercase",children:"Custom Exam Blocks"}),r.length>0&&x.jsx("div",{className:"space-y-1",children:r.map(q=>x.jsxs("div",{className:"rounded-lg bg-themewhite3 border border-tertiary/10 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer",onClick:()=>L(q.id),children:[d===q.id?x.jsx(sE,{size:13,className:"text-tertiary/50 shrink-0"}):x.jsx(af,{size:13,className:"text-tertiary/50 shrink-0"}),x.jsx("span",{className:"text-xs font-medium text-primary truncate flex-1 min-w-0",children:q.name}),x.jsxs("span",{className:"text-[10px] text-tertiary/50 shrink-0",children:[q.abnormalTags.length," tag",q.abnormalTags.length!==1?"s":""]}),x.jsx("button",{onClick:ee=>{ee.stopPropagation(),B(q)},className:"shrink-0 p-1 rounded hover:bg-tertiary/10 transition-colors","aria-label":`Edit ${q.name}`,children:x.jsx(cx,{size:13,className:"text-tertiary/50"})}),x.jsx("button",{onClick:ee=>{ee.stopPropagation(),V(q.id)},className:"shrink-0 p-1 rounded hover:bg-themeredred/10 transition-colors","aria-label":`Delete ${q.name}`,children:x.jsx(Dd,{size:13,className:"text-themeredred/50"})})]}),d===q.id&&x.jsxs("div",{className:"px-3 pb-2 space-y-1",children:[x.jsxs("p",{className:"text-[10px] text-tertiary/60",children:[x.jsx("span",{className:"font-medium",children:"Normal: "}),q.normalText||x.jsx("span",{className:"italic",children:"none"})]}),q.abnormalTags.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1",children:q.abnormalTags.map((ee,X)=>x.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded-full border border-themeredred/20 bg-themeredred/5 text-tertiary",children:ee},X))})]})]},q.id))}),Q&&x.jsxs("div",{className:"space-y-2 px-3 py-3 rounded-lg border border-themeblue2/20 bg-themeblue2/5",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("input",{type:"text",value:m,onChange:q=>{g(q.target.value),T("")},placeholder:"Block name (e.g. VS, CARDIO)",className:"w-full text-xs px-2 py-1.5 rounded-md border border-tertiary/20 bg-themewhite outline-none focus:border-themeblue2/40 text-tertiary",autoFocus:!0}),x.jsx("textarea",{value:v,onChange:q=>y(q.target.value),placeholder:"Normal text (e.g. VS: Reviewed, BP: Reviewed...)",className:"w-full min-h-[3rem] text-xs px-2 py-1.5 rounded-md border border-tertiary/20 bg-themewhite outline-none focus:border-themeblue2/40 text-tertiary resize-none leading-5"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-[10px] text-tertiary/50 mb-1",children:"Abnormal Tags"}),k.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1 mb-1.5",children:k.map((q,ee)=>x.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] rounded-full border border-themeredred/20 bg-themeredred/5 text-tertiary",children:[q,x.jsx("button",{onClick:()=>P(ee),className:"ml-0.5 hover:text-themeredred transition-colors","aria-label":`Remove ${q}`,children:x.jsx(ms,{size:10})})]},ee))}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("input",{type:"text",value:A,onChange:q=>w(q.target.value),onKeyDown:q=>{q.key==="Enter"&&(q.preventDefault(),F())},placeholder:"Type tag and press Enter",className:"flex-1 text-xs px-2 py-1.5 rounded-md border border-tertiary/20 bg-themewhite outline-none focus:border-themeblue2/40 text-tertiary"}),x.jsx("button",{onClick:F,className:"text-[11px] px-2 py-1 rounded-md bg-tertiary/10 text-tertiary hover:bg-tertiary/20 transition-colors shrink-0",children:"Add"})]})]})]}),I&&x.jsx("p",{className:"text-[10px] text-themeredred",children:I}),x.jsxs("div",{className:"flex gap-2 justify-end",children:[x.jsx("button",{onClick:U,className:"text-[11px] px-3 py-1 rounded-md text-tertiary hover:bg-tertiary/10 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:z,className:"text-[11px] px-3 py-1 rounded-md bg-themeblue2 text-white hover:bg-themeblue2/90 transition-colors",children:a?"Update":"Add"})]})]}),!Q&&x.jsxs("button",{onClick:j,className:"flex items-center gap-1.5 text-[11px] text-themeblue2 hover:text-themeblue2/80 transition-colors px-1 py-1",children:[x.jsx(dx,{size:14}),x.jsx("span",{children:"Add Block"})]})]})},UV=()=>{const{profile:r,updateProfile:i,syncProfileField:a}=Zm(),s=r.noteIncludeHPI??!0,l=r.noteIncludePE??!1,c=r.peDepth??"minimal",d=r.customPEBlocks??[],f=r.textExpanderEnabled??!0,m=r.textExpanders??[],g=D.useCallback(v=>{i(v);const y={};v.noteIncludeHPI!==void 0&&(y.note_include_hpi=v.noteIncludeHPI),v.noteIncludePE!==void 0&&(y.note_include_pe=v.noteIncludePE),v.peDepth!==void 0&&(y.pe_depth=v.peDepth),v.textExpanderEnabled!==void 0&&(y.text_expander_enabled=v.textExpanderEnabled),v.textExpanders!==void 0&&(y.text_expanders=v.textExpanders),v.customPEBlocks!==void 0&&(y.custom_pe_blocks=v.customPEBlocks),a(y)},[i,a]);return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-5 py-4 space-y-5",children:[x.jsx("p",{className:"text-xs text-tertiary leading-relaxed",children:"Customize how you write your notes. Enabled sections can still be toggled per note."}),x.jsxs("div",{className:"flex items-center gap-3 px-4 py-3.5 rounded-xl border border-tertiary/15 bg-themewhite2 cursor-pointer",onClick:()=>g({noteIncludeHPI:!s}),role:"button",tabIndex:0,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),g({noteIncludeHPI:!s}))},children:[x.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shrink-0 ${s?"bg-themeblue2/15":"bg-tertiary/10"}`,children:x.jsx(c2,{size:18,className:s?"text-themeblue2":"text-tertiary/50"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${s?"text-primary":"text-tertiary"}`,children:"HPI"}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:"History of Present Illness"})]}),x.jsx(rm,{checked:s})]}),x.jsxs("div",{className:"rounded-xl border border-tertiary/15 bg-themewhite2 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center gap-3 px-4 py-3.5 cursor-pointer",onClick:()=>g({noteIncludePE:!l}),role:"button",tabIndex:0,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),g({noteIncludePE:!l}))},children:[x.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shrink-0 ${l?"bg-themeblue2/15":"bg-tertiary/10"}`,children:x.jsx(ux,{size:18,className:l?"text-themeblue2":"text-tertiary/50"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${l?"text-primary":"text-tertiary"}`,children:"Physical Exam"}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:"Category-specific physical exam"})]}),x.jsx(rm,{checked:l})]}),l&&x.jsxs("div",{className:"border-t border-tertiary/10 px-4 py-3 space-y-1.5",children:[x.jsx("p",{className:"text-[10px] font-semibold text-tertiary/50 tracking-widest uppercase",children:"PE Depth"}),PV.map(v=>x.jsxs("button",{onClick:()=>g({peDepth:v.value}),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg border transition-all text-left
                                        ${c===v.value?"border-themeblue2/25 bg-themeblue2/10":"border-tertiary/15 bg-themewhite hover:bg-themewhite/80"}`,children:[x.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center shrink-0 transition-colors
                                        ${c===v.value?"border-themeblue2":"border-tertiary/30"}`,children:c===v.value&&x.jsx("div",{className:"w-2 h-2 rounded-full bg-themeblue2"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${c===v.value?"text-primary":"text-tertiary"}`,children:v.label}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:v.description})]})]},v.value))]}),l&&c==="custom"&&x.jsx("div",{className:"border-t border-tertiary/10 px-4 py-3",children:x.jsx(FV,{blocks:d,onChange:v=>g({customPEBlocks:v})})})]}),x.jsxs("div",{className:"rounded-xl border border-tertiary/15 bg-themewhite2 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center gap-3 px-4 py-3.5 cursor-pointer",onClick:()=>g({textExpanderEnabled:!f}),role:"button",tabIndex:0,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),g({textExpanderEnabled:!f}))},children:[x.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center shrink-0 ${f?"bg-themeblue2/15":"bg-tertiary/10"}`,children:x.jsx(U_,{size:18,className:f?"text-themeblue2":"text-tertiary/50"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:`text-sm font-medium ${f?"text-primary":"text-tertiary"}`,children:"Text Templates"}),x.jsx("p",{className:"text-[11px] text-tertiary/70 mt-0.5",children:"Think autotext or asutype, but specific to your user account. You don't have to filter through 10,000 Genesis options"})]}),x.jsx(rm,{checked:f})]}),f&&x.jsx("div",{className:"border-t border-tertiary/10 px-4 py-3",children:x.jsx(BV,{expanders:m,onChange:v=>g({textExpanders:v})})})]})]})})},nr={CLOSE:-1,BACK_TO_MAIN:-2,TOGGLE_THEME:0,MY_NOTES:1,RELEASE_NOTES:4,AVATAR_PICKER:5,USER_PROFILE:6,TRAINING:7,ADMIN:8,SUPERVISOR:9,GUEST_OPTIONS:11,PROFILE_CHANGE_REQUEST:12,LOGIN:14,PIN_SETUP:15,FEEDBACK:16,NOTIFICATION_SETTINGS:17,HOW_TO:18,NOTE_CONTENT:19},LV={[nr.MY_NOTES]:"my-notes",[nr.RELEASE_NOTES]:"release-notes",[nr.AVATAR_PICKER]:"avatar-picker",[nr.USER_PROFILE]:"user-profile",[nr.TRAINING]:"training",[nr.ADMIN]:"admin",[nr.SUPERVISOR]:"supervisor",[nr.GUEST_OPTIONS]:"guest-options",[nr.PROFILE_CHANGE_REQUEST]:"profile-change-request",[nr.LOGIN]:"login",[nr.PIN_SETUP]:"pin-setup",[nr.FEEDBACK]:"feedback",[nr.NOTIFICATION_SETTINGS]:"notification-settings",[nr.HOW_TO]:"how-to",[nr.NOTE_CONTENT]:"note-content"};function zV(r){const i=Math.floor((Date.now()-r.getTime())/1e3);if(i<60)return"just now";const a=Math.floor(i/60);if(a<60)return`${a} min ago`;const s=Math.floor(a/60);return s<24?`${s} hr ago`:`${Math.floor(s/24)}d ago`}const HV=({isConnected:r,syncStatus:i})=>{let a,s,l;return r?i.isSyncing?(a="bg-themeblue2 animate-pulse",s="text-themeblue2",l="Syncing"):i.errorCount>0?(a="bg-themeredred",s="text-themeredred",l=`Sync Error  ${i.errorCount}`):i.pendingCount>0?(a="bg-yellow-500",s="text-yellow-600",l=`${i.pendingCount} pending`):(a="bg-themegreen",s="text-themegreen",l=`Synced${i.lastSyncTime?`  ${zV(i.lastSyncTime)}`:""}`):(a="bg-tertiary/40",s="text-tertiary/60",l="Offline"),x.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-2",children:[x.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a}`}),x.jsx("span",{className:`text-[11px] font-medium ${s}`,children:l})]})},qV=({settingsOptions:r,onItemClick:i,avatarSvg:a,customImage:s,isCustom:l,displayName:c,displaySub:d,displayClinic:f,onAvatarClick:m,onProfileClick:g,onSignOut:v,isAuthenticated:y,isConnected:A,syncStatus:w})=>{const k=[],E=[];let I=null;for(const T of r)T.type==="header"?(I={label:T.label,items:[]},E.push(I)):I?I.items.push(T):k.push(T);return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsx("div",{className:"mb-4 pb-4 border-b border-tertiary/10",children:x.jsxs("div",{className:"flex items-center w-full px-4 py-3.5 md:px-5 md:py-3.5",children:[x.jsx("button",{onClick:m,className:`mr-4 w-12 h-12 rounded-full overflow-hidden shrink-0
                                       active:scale-95 transition-transform`,children:l&&s?x.jsx("img",{src:s,alt:"Profile",className:"w-full h-full object-cover"}):a}),x.jsxs("button",{onClick:g,className:`flex-1 min-w-0 text-left hover:bg-themewhite2/10 active:scale-[1]
                                       transition-all rounded-lg -my-2 py-2 px-2 -mx-2`,children:[x.jsx("p",{className:"text-base font-semibold text-primary md:text-[12pt]",children:c}),x.jsx("p",{className:"text-xs text-tertiary md:text-sm",children:d}),f&&x.jsx("p",{className:"text-xs text-tertiary md:text-sm mt-0.5",children:f})]}),y?x.jsx("button",{onClick:T=>{T.stopPropagation(),v?.()},className:"shrink-0 ml-2 p-1.5 rounded-full hover:bg-tertiary/10 active:scale-90 transition-all","aria-label":"Sign out",children:x.jsx(KE,{size:18,className:"text-themeredred"})}):x.jsx(af,{size:20,className:"text-tertiary/40 shrink-0 ml-2"})]})}),x.jsx("div",{className:"space-y-1 md:space-y-3",children:k.map(T=>x.jsxs("button",{onClick:()=>{T.action(),i(T.id)},className:`flex items-center w-full px-6 py-3.5 hover:bg-themewhite2 active:scale-[0.98]
                                         transition-all rounded-xl group
                                         md:px-6 md:py-3`,children:[x.jsx("div",{className:`mr-4 ${T.color} md:group-hover:scale-110 md:transition-transform`,children:T.icon}),x.jsx("span",{className:"flex-1 text-left text-base text-primary font-medium md:font-[11pt]",children:T.label}),x.jsx(dE,{size:16,className:"text-tertiary/40 rotate-90 md:hidden"})]},T.id))}),E.map(T=>x.jsxs("div",{className:"mt-4 px-6 md:px-6",children:[x.jsx("div",{className:"pb-2",children:x.jsx("p",{className:"text-[10px] font-semibold text-tertiary/50 tracking-widest uppercase",children:T.label})}),x.jsx("div",{className:"grid grid-cols-4 gap-2",children:T.items.map(N=>x.jsxs("button",{onClick:()=>{N.disabled||(N.action(),i(N.id))},disabled:N.disabled,className:`relative flex flex-col items-center justify-center gap-1
                                               rounded-lg px-2 py-2 border transition-all
                                               ${N.disabled?"border-tertiary/10 bg-themewhite2/50 opacity-50 cursor-not-allowed":"border-tertiary/15 bg-themewhite2 hover:bg-themeblue2/10 hover:border-themeblue2/25 active:scale-[0.97] group"}`,children:[x.jsxs("div",{className:`relative ${N.disabled?"text-tertiary/40":N.color} ${N.disabled?"":"group-hover:scale-110"} transition-transform`,children:[N.icon,N.disabled&&x.jsx("span",{className:"absolute -top-1.5 -right-4 text-[7px] text-tertiary/40 font-semibold uppercase tracking-wide",children:"Soon"})]}),x.jsx("span",{className:`text-[11px] font-medium text-center leading-tight ${N.disabled?"text-tertiary/40":"text-primary"}`,children:N.label})]},N.id))})]},T.label)),x.jsx("div",{className:"mt-8 pt-6 border-t border-tertiary/10 md:mt-10",children:x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-sm text-tertiary/60 font-medium md:text-base",children:"ADTMC MEDCOM PAM 40-7-21"}),x.jsxs("p",{className:"text-xs text-tertiary/40 mt-1 md:text-sm",children:["Version ","2.6.3"]}),x.jsx(HV,{isConnected:A,syncStatus:w})]})})]})})},GV=({avatarList:r,currentAvatarId:i,isCustom:a,customImage:s,onSelect:l,onUpload:c,onClearCustom:d})=>{const f=D.useRef(null);return x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5",children:[x.jsxs("div",{className:"grid grid-cols-3 gap-4 justify-items-center md:grid-cols-4",children:[s&&x.jsxs("div",{className:"relative",children:[x.jsxs("button",{onClick:()=>l("custom"),className:"relative w-16 h-16 rounded-full overflow-hidden transition-all active:scale-95",children:[x.jsx("img",{src:s,alt:"Custom",className:"w-full h-full object-cover"}),a&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-full",children:x.jsx(So,{size:20,className:"text-white"})})]}),x.jsx("button",{onClick:d,className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-themeredred flex items-center justify-center active:scale-90 transition-transform","aria-label":"Remove custom photo",children:x.jsx(ms,{size:12,className:"text-white"})})]}),r.map(m=>x.jsxs("button",{onClick:()=>l(m.id),className:"relative w-16 h-16 rounded-full overflow-hidden transition-all active:scale-95",children:[m.svg,m.id===i&&!a&&x.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-full",children:x.jsx(So,{size:20,className:"text-white"})})]},m.id)),x.jsx("button",{onClick:()=>f.current?.click(),className:`w-16 h-16 rounded-full border-2 border-dashed border-tertiary/30
                                   flex items-center justify-center transition-all active:scale-95
                                   hover:border-tertiary/50 hover:bg-themewhite2/50`,"aria-label":"Upload photo",children:x.jsx(X5,{size:22,className:"text-tertiary/50"})})]}),x.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:m=>{const g=m.target.files?.[0];g&&c(g),m.target.value=""}})]})})},VV=({children:r,slideDirection:i,swipeHandlers:a})=>{const s={"":"",left:"animate-slide-in-left",right:"animate-slide-in-right"};return x.jsx("div",{className:`h-full w-full ${s[i]}`,...a,children:r})},YV=({isVisible:r,onClose:i,isDarkMode:a,onToggleTheme:s,isMobile:l,initialPanel:c,initialSelectedId:d,initialTrainingTaskId:f,notes:m=[],clinicNotes:g,onDeleteNote:v,onDeleteClinicNote:y,onEditNote:A,onViewNote:w,avatar:k,onNotePanelChange:E,syncStatus:I})=>{const[T,N]=D.useState("main"),{currentAvatar:j,setAvatar:B,avatarList:U,customImage:F,isCustom:P,setCustomImage:z,clearCustomImage:V}=k,{profile:L}=Zm(),[Q,q]=D.useState(""),[ee,X]=D.useState(null),ae=D.useRef(!1),K=D.useRef(null),[ie,ne]=D.useState(!1),{signOut:J,isAuthenticated:te,isDevRole:$,isSupervisorRole:oe}=tg();D.useEffect(()=>{E?.(r&&T==="my-notes")},[r,T,E]),D.useEffect(()=>{if(!r){ne(!1);return}const Je=St.channel("device-status-ping");return Je.subscribe(dt=>{ne(dt==="SUBSCRIBED")}),()=>{St.removeChannel(Je)}},[r]),D.useEffect(()=>{if(r&&!ae.current)if(c==="training"&&f&&sc(f)){let Je=null;for(let dt=0;dt<Kh.length&&!Je;dt++){const vt=Kh[dt];for(let _t=0;_t<vt.subjectArea.length&&!Je;_t++){const xt=vt.subjectArea[_t],bt=xt.tasks.findIndex(kt=>kt.id===f);if(bt!==-1){const kt=xt.tasks[bt];Je={id:bt,icon:kt.id,text:kt.title,isParent:!1,parentId:_t}}}}Je?(X(Je),N("training-detail"),q("")):(N("training"),q(""))}else N(c||"main"),q("");ae.current=r},[r,c,f]);const we=D.useCallback(Je=>{q(Je),setTimeout(()=>q(""),Li.SLIDE_ANIMATION)},[]),be=D.useCallback((Je,dt)=>{if(Je===nr.CLOSE){dt();return}if(Je===nr.BACK_TO_MAIN){we("right"),N("main");return}if(Je===nr.TOGGLE_THEME)return;Je===nr.TRAINING&&X(null);const vt=LV[Je];vt&&(we("left"),N(vt))},[we]),Te=D.useCallback(Je=>{const dt=(_t,xt,bt,kt)=>({type:"option",icon:xt,label:bt,action:()=>be(_t,Je),color:"text-tertiary",id:_t,...kt}),vt=[dt(nr.MY_NOTES,x.jsx(c2,{size:20}),te?"My Clinic":"My Notes"),dt(nr.TRAINING,x.jsx(ox,{size:20}),"My Training")];return(oe||$)&&(vt.push({type:"header",label:"Roles"}),oe&&vt.push(dt(nr.SUPERVISOR,x.jsx(gE,{size:20}),"Supervisor")),$&&vt.push(dt(nr.ADMIN,x.jsx(Y_,{size:20}),"Admin Panel"))),vt.push({type:"header",label:"Preferences"},dt(nr.TOGGLE_THEME,a?x.jsx(P_,{size:20}):x.jsx(a_,{size:20}),"Toggle Theme",{action:s}),dt(nr.PIN_SETUP,x.jsx(d2,{size:20}),"Security"),dt(nr.NOTIFICATION_SETTINGS,x.jsx(YC,{size:20}),"Notifications"),dt(nr.NOTE_CONTENT,x.jsx(ux,{size:20}),"Note Content")),vt.push({type:"header",label:"About"},dt(nr.RELEASE_NOTES,x.jsx(I_,{size:20}),"Release Notes"),dt(nr.FEEDBACK,x.jsx(i_,{size:20}),"Feedback"),dt(nr.HOW_TO,x.jsx(K5,{size:20}),"Help & Tutorials")),vt},[a,s,be,$,oe,te]),ye=D.useCallback(Je=>{X(Je),we("left"),N("training-detail")},[we]),tt=D.useCallback(()=>{T==="training-detail"?(we("right"),N("training"),X(null)):T==="training"&&(we("right"),N("main"))},[T,we]),Qe=jk(D.useMemo(()=>{if(T!=="main")return T==="training-detail"||T==="training"?tt:()=>{we("right"),N("main")}},[T,we,tt]),T!=="main"),Ge=D.useCallback((Je="main")=>({showBack:!0,onBack:()=>{we("right"),N(Je)}}),[we]),Xe=D.useMemo(()=>{switch(T){case"main":return{title:"Settings"};case"my-notes":{const Je=te?L.clinicName||"My Clinic":"My Notes",dt=new Set([...m.map(vt=>vt.id),...(g||[]).map(vt=>vt.id)]).size;return{title:Je,...Ge(),badge:dt>0?String(dt):void 0}}case"training-detail":return{title:ee?.text||"Task",showBack:!0,onBack:tt};case"supervisor":return{title:"Supervisor",showBack:!0,onBack:()=>{K.current?.()}};case"profile-change-request":return{title:"Request Changes",...Ge("user-profile")};case"login":return{title:"Sign In",...Ge("guest-options")};case"release-notes":return{title:"Release Notes",...Ge()};case"avatar-picker":return{title:"Choose Avatar",...Ge()};case"user-profile":return{title:"Profile",...Ge()};case"training":return{title:"My Training",...Ge()};case"admin":return{title:"Admin Panel",...Ge()};case"guest-options":return{title:"Sign In",...Ge()};case"pin-setup":return{title:"App Lock",...Ge()};case"notification-settings":return{title:"Notifications",...Ge()};case"feedback":return{title:"Feedback",...Ge()};case"how-to":return{title:"Help & Tutorials",...Ge()};case"note-content":return{title:"Note Content",...Ge()}}},[T,m,g,te,L.clinicName,Ge,ee,tt]);return x.jsx(of,{isVisible:r,onClose:()=>{N("main"),q(""),X(null),i()},fullHeight:"90dvh",disableDrag:!1,header:Xe,children:Je=>x.jsx(VV,{slideDirection:Q,swipeHandlers:T!=="main"?Qe:void 0,children:T==="main"?x.jsx(qV,{settingsOptions:Te(Je),onItemClick:dt=>be(dt,Je),avatarSvg:j.svg,customImage:F,isCustom:P,displayName:te?L.lastName?`${L.rank?L.rank+" ":""}${L.lastName}${L.firstName?", "+L.firstName.charAt(0)+".":""}`:"Set Up Profile":"Guest",displaySub:te?L.credential?`${L.credential}${L.component?"  "+L.component:""}`:"Tap to set up":"Tap to sign in or request account",displayClinic:te?L.clinicName?`${L.clinicName}${L.uic?"  "+L.uic:""}`:L.uic?`UIC: ${L.uic}`:void 0:void 0,onAvatarClick:()=>be(nr.AVATAR_PICKER,Je),onProfileClick:()=>{be(te?nr.USER_PROFILE:nr.GUEST_OPTIONS,Je)},onSignOut:async()=>{await Ck(),await nk(),await J(),Je()},isAuthenticated:!!te,isConnected:ie,syncStatus:I}):T==="user-profile"?te===!1?x.jsx(VG,{}):x.jsx(PG,{onRequestChange:()=>be(nr.PROFILE_CHANGE_REQUEST,Je)}):T==="profile-change-request"?x.jsx(HG,{}):T==="avatar-picker"?x.jsx(GV,{avatarList:U,currentAvatarId:j.id,isCustom:P,customImage:F,onSelect:dt=>{B(dt==="custom"?"custom":dt),we("right"),N("main")},onUpload:async dt=>{try{const vt=await CG(dt);z(vt),we("right"),N("main")}catch{}},onClearCustom:V}):T==="release-notes"?x.jsx(BG,{}):T==="admin"?x.jsx(eV,{}):T==="supervisor"?x.jsx(hV,{backRef:K,onBackToMain:()=>{we("right"),N("main")}}):T==="guest-options"?x.jsx(pV,{onSignIn:()=>be(nr.LOGIN,Je),onRequestAccount:()=>{we("left"),N("user-profile")}}):T==="login"?x.jsx(mV,{onSuccess:()=>{we("right"),N("main")},onRequestAccount:()=>{we("left"),N("user-profile")}}):T==="feedback"?x.jsx(OV,{}):T==="how-to"?x.jsx(jV,{}):T==="note-content"?x.jsx(UV,{}):T==="notification-settings"?x.jsx(TV,{}):T==="pin-setup"?x.jsx(CV,{}):T==="training"||T==="training-detail"?x.jsx(SV,{view:T,selectedTask:ee,onSelectTask:ye}):x.jsx(RG,{isMobile:l??!1,notes:m,clinicNotes:g,onDeleteNote:v||(()=>{}),onDeleteClinicNote:y,onEditNote:A,onViewNote:w,onCloseDrawer:Je,initialSelectedId:d})})})},H4=new Set,zo=new WeakMap,rf=new WeakMap,Ul=new WeakMap,Om=new WeakMap,Iy=new WeakMap,Yp=new WeakMap,Ku=new WeakMap,Cd=new WeakMap,Rh=new WeakSet;let Al,Xw=0,Kw=0;const Ic="__aa_tgt",Dm="__aa_del",sx="__aa_new",Zk=r=>{const i=XV(r);i&&i.forEach(a=>KV(a))},QV=r=>{r.forEach(i=>{i.target===Al&&$V(),zo.has(i.target)&&uf(i.target)})};function eC(r){const i=r.getBoundingClientRect(),a=Al?.clientWidth||0,s=Al?.clientHeight||0;return i.bottom<0||i.top>s||i.right<0||i.left>a}function Jw(r){const i=Om.get(r);i?.disconnect();let a=zo.get(r),s=0;const l=5;a||(a=l2(r),zo.set(r,a));const{offsetWidth:c,offsetHeight:d}=Al,m=[a.top-l,c-(a.left+l+a.width),d-(a.top+l+a.height),a.left-l].map(v=>`${-1*Math.floor(v)}px`).join(" "),g=new IntersectionObserver(()=>{++s>1&&uf(r)},{root:Al,threshold:1,rootMargin:m});g.observe(r),Om.set(r,g)}function uf(r,i=!0){clearTimeout(Cd.get(r));const a=Qx(r),s=i?jm(a)?500:a.duration:0;Cd.set(r,setTimeout(async()=>{const l=Ul.get(r);try{await l?.finished,zo.set(r,l2(r)),Jw(r)}catch{}},s))}function $V(){clearTimeout(Cd.get(Al)),Cd.set(Al,setTimeout(()=>{H4.forEach(r=>O3(r,i=>tC(()=>uf(i))))},100))}function WV(r){setTimeout(()=>{Yp.set(r,setInterval(()=>tC(uf.bind(null,r)),2e3))},Math.round(2e3*Math.random()))}function tC(r){typeof requestIdleCallback=="function"?requestIdleCallback(()=>r()):requestAnimationFrame(()=>r())}let Sc;const nC=typeof window<"u"&&"ResizeObserver"in window;nC&&(Al=document.documentElement,new MutationObserver(Zk),Sc=new ResizeObserver(QV),window.addEventListener("scroll",()=>{Kw=window.scrollY,Xw=window.scrollX}),Sc.observe(Al));function XV(r){return r.reduce((s,l)=>[...s,...Array.from(l.addedNodes),...Array.from(l.removedNodes)],[]).every(s=>s.nodeName==="#comment")?!1:r.reduce((s,l)=>{if(s===!1)return!1;if(l.target instanceof Element){if(Ny(l.target),!s.has(l.target)){s.add(l.target);for(let c=0;c<l.target.children.length;c++){const d=l.target.children.item(c);if(d){if(Dm in d)return!1;Ny(l.target,d),s.add(d)}}}if(l.removedNodes.length)for(let c=0;c<l.removedNodes.length;c++){const d=l.removedNodes[c];if(Dm in d)return!1;d instanceof Element&&(s.add(d),Ny(l.target,d),rf.set(d,[l.previousSibling,l.nextSibling]))}}return s},new Set)}function Ny(r,i){!i&&!(Ic in r)?Object.defineProperty(r,Ic,{value:r}):i&&!(Ic in i)&&Object.defineProperty(i,Ic,{value:r})}function KV(r){var i,a;const s=r.isConnected,l=zo.has(r);s&&rf.has(r)&&rf.delete(r),((i=Ul.get(r))===null||i===void 0?void 0:i.playState)!=="finished"&&((a=Ul.get(r))===null||a===void 0||a.cancel()),sx in r?z5(r):l&&s?ZV(r):l&&!s?eY(r):z5(r)}function X1(r){return Number(r.replace(/[^0-9.\-]/g,""))}function JV(r){let i=r.parentElement;for(;i;){if(i.scrollLeft||i.scrollTop)return{x:i.scrollLeft,y:i.scrollTop};i=i.parentElement}return{x:0,y:0}}function l2(r){const i=r.getBoundingClientRect(),{x:a,y:s}=JV(r);return{top:i.top+s,left:i.left+a,width:i.width,height:i.height}}function iC(r,i,a){let s=i.width,l=i.height,c=a.width,d=a.height;const f=getComputedStyle(r);if(f.getPropertyValue("box-sizing")==="content-box"){const g=X1(f.paddingTop)+X1(f.paddingBottom)+X1(f.borderTopWidth)+X1(f.borderBottomWidth),v=X1(f.paddingLeft)+X1(f.paddingRight)+X1(f.borderRightWidth)+X1(f.borderLeftWidth);s-=v,c-=v,l-=g,d-=g}return[s,c,l,d].map(Math.round)}function Qx(r){return Ic in r&&Ku.has(r[Ic])?Ku.get(r[Ic]):{duration:250,easing:"ease-in-out"}}function rC(r){if(Ic in r)return r[Ic]}function Zw(r){const i=rC(r);return i?Rh.has(i):!1}function O3(r,...i){i.forEach(a=>a(r,Ku.has(r)));for(let a=0;a<r.children.length;a++){const s=r.children.item(a);s&&i.forEach(l=>l(s,Ku.has(s)))}}function eA(r){return Array.isArray(r)?r:[r]}function jm(r){return typeof r=="function"}function ZV(r){const i=zo.get(r),a=l2(r);if(!Zw(r))return zo.set(r,a);if(eC(r)){zo.set(r,a),Jw(r);return}let s;if(!i)return;const l=Qx(r);if(typeof l!="function"){let c=i.left-a.left,d=i.top-a.top;const f=i.left+i.width-(a.left+a.width);i.top+i.height-(a.top+a.height)==0&&(d=0),f==0&&(c=0);const[g,v,y,A]=iC(r,i,a),w={transform:`translate(${c}px, ${d}px)`},k={transform:"translate(0, 0)"};g!==v&&(w.width=`${g}px`,k.width=`${v}px`),y!==A&&(w.height=`${y}px`,k.height=`${A}px`),s=r.animate([w,k],{duration:l.duration,easing:l.easing})}else{const[c]=eA(l(r,"remain",i,a));s=new Animation(c),s.play()}Ul.set(r,s),zo.set(r,a),s.addEventListener("finish",uf.bind(null,r,!1),{once:!0})}function z5(r){sx in r&&delete r[sx];const i=l2(r);zo.set(r,i);const a=Qx(r);if(!Zw(r))return;if(eC(r)){Jw(r);return}let s;if(typeof a!="function")s=r.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:a.duration*1.5,easing:"ease-in"});else{const[l]=eA(a(r,"add",i));s=new Animation(l),s.play()}Ul.set(r,s),s.addEventListener("finish",uf.bind(null,r,!1),{once:!0})}function H5(r,i){var a;r.remove(),zo.delete(r),rf.delete(r),Ul.delete(r),(a=Om.get(r))===null||a===void 0||a.disconnect(),setTimeout(()=>{if(Dm in r&&delete r[Dm],Object.defineProperty(r,sx,{value:!0,configurable:!0}),i&&r instanceof HTMLElement)for(const s in i)r.style[s]=""},0)}function eY(r){var i;if(!rf.has(r)||!zo.has(r))return;const[a,s]=rf.get(r);Object.defineProperty(r,Dm,{value:!0,configurable:!0});const l=window.scrollX,c=window.scrollY;if(s&&s.parentNode&&s.parentNode instanceof Element?s.parentNode.insertBefore(r,s):a&&a.parentNode?a.parentNode.appendChild(r):(i=rC(r))===null||i===void 0||i.appendChild(r),!Zw(r))return H5(r);const[d,f,m,g]=nY(r),v=Qx(r),y=zo.get(r);(l!==Xw||c!==Kw)&&tY(r,l,c,v);let A,w={position:"absolute",top:`${d}px`,left:`${f}px`,width:`${m}px`,height:`${g}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!jm(v))Object.assign(r.style,w),A=r.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:v.duration,easing:"ease-out"});else{const[k,E]=eA(v(r,"remove",y));E?.styleReset!==!1&&(w=E?.styleReset||w,Object.assign(r.style,w)),A=new Animation(k),A.play()}Ul.set(r,A),A.addEventListener("finish",()=>H5(r,w),{once:!0})}function tY(r,i,a,s){const l=Xw-i,c=Kw-a,d=document.documentElement.style.scrollBehavior;if(getComputedStyle(Al).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+l,window.scrollY+c),!r.parentElement)return;const m=r.parentElement;let g=m.clientHeight,v=m.clientWidth;const y=performance.now();function A(){requestAnimationFrame(()=>{if(!jm(s)){const w=g-m.clientHeight,k=v-m.clientWidth;y+s.duration>performance.now()?(window.scrollTo({left:window.scrollX-k,top:window.scrollY-w}),g=m.clientHeight,v=m.clientWidth,A()):document.documentElement.style.scrollBehavior=d}})}A()}function nY(r){var i;const a=zo.get(r),[s,,l]=iC(r,a,l2(r));let c=r.parentElement;for(;c&&(getComputedStyle(c).position==="static"||c instanceof HTMLBodyElement);)c=c.parentElement;c||(c=document.body);const d=getComputedStyle(c),f=!Ul.has(r)||((i=Ul.get(r))===null||i===void 0?void 0:i.playState)==="finished"?l2(c):zo.get(c),m=Math.round(a.top-f.top)-X1(d.borderTopWidth),g=Math.round(a.left-f.left)-X1(d.borderLeftWidth);return[m,g,s,l]}function iY(r,i={}){if(nC&&Sc&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!jm(i)&&!i.disrespectUserMotionPreference)){Rh.add(r),getComputedStyle(r).position==="static"&&Object.assign(r.style,{position:"relative"}),O3(r,uf,WV,d=>Sc?.observe(d)),jm(i)?Ku.set(r,i):Ku.set(r,{duration:250,easing:"ease-in-out",...i});const c=new MutationObserver(Zk);c.observe(r,{childList:!0}),Iy.set(r,c),H4.add(r)}return Object.freeze({parent:r,enable:()=>{Rh.add(r)},disable:()=>{Rh.delete(r),O3(r,s=>{const l=Ul.get(s);try{l?.cancel()}catch{}Ul.delete(s);const c=Cd.get(s);c&&clearTimeout(c),Cd.delete(s);const d=Yp.get(s);d&&clearInterval(d),Yp.delete(s)})},isEnabled:()=>Rh.has(r),destroy:()=>{Rh.delete(r),H4.delete(r),Ku.delete(r);const s=Iy.get(r);s?.disconnect(),Iy.delete(r),O3(r,l=>{Sc?.unobserve(l);const c=Ul.get(l);try{c?.cancel()}catch{}Ul.delete(l);const d=Om.get(l);d?.disconnect(),Om.delete(l);const f=Yp.get(l);f&&clearInterval(f),Yp.delete(l);const m=Cd.get(l);m&&clearTimeout(m),Cd.delete(l),zo.delete(l),rf.delete(l)})}})}function rY(r){const[i,a]=D.useState(),s=D.useMemo(()=>r,[]),l=D.useCallback(d=>{d instanceof HTMLElement?a(iY(d,s)):a(void 0)},[s]),c=D.useCallback(d=>{i&&(d?i.enable():i.disable())},[i]);return D.useEffect(()=>()=>{var d;(d=i?.destroy)===null||d===void 0||d.call(i)},[i]),[l,c]}const aY={default:{duration:300,easing:"ease-in-out"},fast:{duration:200,easing:"ease-in-out"},slow:{duration:400,easing:"ease-in-out"}};function sY(r="default"){return rY(aY[r])}function q4({symptom:r,category:i,onNavigate:a,guidelineToResult:s}){const c=r.gen?.filter(v=>v.text),d=[],f=r.DDX;f&&f.length>0&&d.push({key:"ddx",label:"Differentials (DDx)",type:"DDX",items:f});const m=r.medcom;m&&m.length>0&&d.push({key:"medcom",label:"MEDCOM Training",type:"medcom",items:m});const g=r.stp;return g&&g.length>0&&d.push({key:"stp",label:"STP Training",type:"stp",items:g}),x.jsxs("div",{className:"space-y-0",children:[x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsxs("div",{className:"flex flex-col rounded-md w-full overflow-hidden shadow-sm bg-themewhite2 border border-themewhite/10",children:[x.jsxs("div",{className:"px-4 py-3 text-primary/80",children:[x.jsx("div",{className:"text-[10pt] font-semibold",children:r.text}),x.jsx("div",{className:"text-[8pt] text-secondary mt-0.5",children:i.text}),r.description&&x.jsx("div",{className:"text-[9pt] text-secondary leading-relaxed mt-2",children:r.description})]}),c&&c.length>0&&x.jsxs("div",{className:"px-3 pt-0 pb-3",children:[x.jsx("div",{className:"text-[9pt] font-semibold uppercase tracking-wider text-primary/80 px-1 mb-2",children:"General Information"}),x.jsx("div",{className:"space-y-2",children:c.map((v,y)=>x.jsx("div",{onClick:()=>a(s("gen",v,y,r,i)),className:"text-xs p-2 rounded-md bg-themewhite3 text-tertiary cursor-pointer transition-all duration-200 hover:bg-themewhite",children:x.jsx("div",{className:"font-normal",children:v.text})},`gen-${v.id||y}`))})]})]}),d.length>0&&x.jsx("div",{className:"flex flex-col items-center py-1"})]}),d.map((v,y)=>{const A=v.type==="medcom"||v.type==="stp",w=v.type==="DDX";return x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsxs("div",{className:"flex flex-col rounded-md w-full overflow-hidden shadow-sm bg-themewhite2 border border-themewhite/10",children:[x.jsx("div",{className:"px-4 py-3 text-primary/80",children:x.jsx("div",{className:"text-[9pt] font-semibold uppercase tracking-wider",children:v.label})}),x.jsx("div",{className:"px-3 pt-0 pb-3",children:x.jsx("div",{className:"space-y-2",children:v.items.map((k,E)=>x.jsx("div",{...w?{}:{onClick:()=>a(s(v.type,k,E,r,i))},className:`text-xs p-2 rounded-md bg-themewhite3 text-tertiary transition-all duration-200 ${w?"":"cursor-pointer hover:bg-themewhite"}`,children:x.jsxs("div",{className:"font-normal",children:[A&&k.icon&&x.jsx("span",{className:"text-tertiary mr-1.5 text-[8pt]",children:k.icon}),k.text]})},`${v.key}-${k.id||E}`))})})]}),y<d.length-1&&x.jsx("div",{className:"flex flex-col items-center py-1"})]},v.key)})]})}function A3({icon:r,text:i,onClick:a,className:s="",extraContentClassName:l=""}){return x.jsxs("div",{className:`flex py-3 px-2 w-full cursor-pointer min-w-0 ${s}`,onClick:a,children:[x.jsx("div",{className:"px-3 py-2 flex text-[10pt] font-bold items-center justify-center shrink-0 bg-themeblue3 text-white rounded-md",children:r}),x.jsx("div",{className:`h-full flex-1 min-w-0 p-[4px_10px_4px_10px] text-primary text-[10pt] flex items-center truncate ${l}`,children:i})]})}function Ty({selectedCategory:r,selectedSymptom:i,selectedGuideline:a,onNavigate:s,desktopMode:l=!1,mobilePanel:c}){const[d]=sY("fast"),f=v=>({type:"category",id:v.id,icon:v.icon,text:v.text,data:{categoryRef:v}}),m=(v,y)=>({type:"CC",id:v.id,icon:v.icon,text:v.text,data:{categoryId:y.id,symptomId:v.id,categoryRef:y,symptomRef:v}}),g=(v,y,A,w,k)=>({type:v==="DDX"?"DDX":"training",id:y.id||A,icon:y.icon||(v==="DDX"?"DDX":""),text:y.text??"",data:{categoryId:k.id,symptomId:w.id,categoryRef:k,symptomRef:w,guidelineType:v==="DDX"?void 0:v,guidelineId:y.id||A}});if(c)switch(c){case"main":return x.jsx("div",{className:"flex flex-col h-full w-full",children:x.jsx("div",{className:"flex-1 overflow-y-auto pb-4 bg-themewhite",children:a1.map(v=>v&&x.jsx(A3,{icon:v.icon,text:v.text,onClick:()=>s(f(v)),className:"rounded-md border-b border-themewhite2/90 hover:bg-themewhite2"},v.id))})});case"subcategory":return x.jsx("div",{className:"flex flex-col h-full w-full",children:x.jsx("div",{className:"h-full flex-1 overflow-y-auto pb-4 bg-themewhite",children:r?.contents?.map(v=>v&&x.jsx(A3,{icon:v.icon||"?",text:v.text||"Untitled Symptom",onClick:()=>s(m(v,r)),className:"rounded-sm border-b border-themewhite2/70",extraContentClassName:"bg-themewhite"},v.id))})});case"guidelines":return x.jsx("div",{className:"flex flex-col h-full w-full",children:i&&r?x.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x.jsx(q4,{symptom:i,category:r,onNavigate:s,guidelineToResult:g})}):null})}return l?x.jsx("div",{ref:d,className:"h-full w-full",children:!a1||!Array.isArray(a1)?x.jsx("div",{className:"h-full flex items-center justify-center text-primary",children:"Error loading category data"},"error"):x.jsx("div",{className:"flex flex-col h-full w-full",children:x.jsxs("div",{className:"flex-1 overflow-y-auto pb-4",children:[!r&&a1.map(v=>v&&x.jsx(A3,{icon:v.icon,text:v.text,onClick:()=>s(f(v)),className:"rounded-md border-b border-themewhite2/90 hover:bg-themewhite2"},v.id)),r&&!i&&x.jsx(x.Fragment,{children:r.contents?.map(v=>v&&x.jsx(A3,{icon:v.icon||"?",text:v.text||"Untitled Symptom",onClick:()=>s(m(v,r)),className:"rounded-sm border-b border-themewhite2/70 hover:bg-themewhite2"},v.id))}),i&&r&&x.jsx(q4,{symptom:i,category:r,onNavigate:s,guidelineToResult:g})]})},"desktop-nav")}):null}function oY({isVisible:r,onClose:i,selectedSymptom:a,selectedCategory:s,onNavigate:l}){if(!r||!a||!s)return null;const c=(d,f,m,g,v)=>({type:d==="DDX"?"DDX":"training",id:f.id||m,icon:f.icon||(d==="DDX"?"DDX":""),text:f.text??"",data:{categoryId:v.id,symptomId:g.id,categoryRef:v,symptomRef:g,guidelineType:d==="DDX"?void 0:d,guidelineId:f.id||m}});return x.jsx(of,{isVisible:r,onClose:i,fullHeight:"90dvh",mobileOnly:!0,mobileClassName:"flex flex-col",children:d=>x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 pb-2","data-drag-zone":!0,style:{touchAction:"none"},children:[x.jsx("div",{className:"flex-1"}),x.jsx("div",{className:"w-14 h-1.5 rounded-full bg-tertiary/30"}),x.jsx("div",{className:"flex-1 flex justify-end",children:x.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-themewhite2 active:scale-95 transition-all","aria-label":"Close",children:x.jsx(ms,{size:20,className:"text-tertiary"})})})]}),x.jsx("div",{className:"overflow-y-auto flex-1 px-4 pb-4",children:x.jsx(q4,{symptom:a,category:s,onNavigate:l,guidelineToResult:c})})]})})}function lY({medication:r,onClick:i}){return x.jsxs("div",{className:"flex flex-col py-3 px-2 w-full border-b border-themewhite2/70 cursor-pointer rounded-md",onClick:i,children:[x.jsx("div",{className:"text-[10pt] font-normal text-primary",children:r.icon}),x.jsx("div",{className:"text-tertiary text-[9pt]",children:r.text})]})}function cY({isVisible:r,onClose:i,selectedMedication:a,onMedicationSelect:s}){const l=D.useCallback(()=>s(null),[s]),c=jk(a?l:void 0,!!a);return x.jsx(of,{isVisible:r,onClose:i,fullHeight:"90dvh",desktopPosition:"left",mobileClassName:"flex flex-col",children:d=>x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 pb-2","data-drag-zone":!0,style:{touchAction:"none"},children:[x.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[x.jsx("div",{className:"shrink-0 overflow-hidden transition-all duration-200",style:{width:a?36:0,opacity:a?1:0},children:x.jsx("button",{onClick:()=>s(null),className:"p-2 rounded-full hover:bg-themewhite2 active:scale-95 transition-all","aria-label":"Go back",children:x.jsx(Nc,{size:20,className:"text-tertiary"})})}),x.jsx("h2",{className:"hidden md:block text-lg font-normal text-primary truncate",children:a?a.text:"Medications"})]}),x.jsx("div",{className:"w-14 h-1.5 rounded-full bg-tertiary/30 md:hidden"}),x.jsx("div",{className:"flex-1 flex justify-end",children:x.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-themewhite2 active:scale-95 transition-all","aria-label":"Close",children:x.jsx(ms,{size:20,className:"text-tertiary"})})})]}),x.jsx("div",{className:"overflow-y-auto flex-1 px-4 pb-4",...a?c:{},children:a?x.jsx(xk,{medication:a}):Ke.map((f,m)=>x.jsx(lY,{medication:f,onClick:()=>s(f)},`med-${m}`))})]})})}function dY({enabled:r,panelIndex:i,panelCount:a,isVisible:s,syncKey:l,onSwipeBack:c,onSwipeForward:d}){const[f,m]=D.useState(!1),g=D.useRef(i);g.current=i;const v=D.useRef(i),y=D.useRef(100/a),A=100/a,[w,k]=Pu(()=>({x:-i*A,config:$v.page})),E=D.useCallback((F,P)=>{const z=100/a;k.start({x:-F*z,immediate:!1,config:$v.page,onRest:()=>P?.()})},[k,a]),I=D.useCallback(F=>{const P=100/a;k.start({x:-F*P,immediate:!0})},[k,a]),T=D.useRef(E);T.current=E;const N=D.useRef(I);N.current=I;const j=D.useRef(l);D.useEffect(()=>{if(f)return;const F=v.current,P=y.current,z=j.current;v.current=i,y.current=A,j.current=l,P!==A?N.current(i):F!==i?Math.abs(F-i)>1?N.current(i):T.current(i):z!==l&&N.current(i)},[i,A,f,l]);const B=D.useRef(s??!0);D.useEffect(()=>{const F=B.current,P=s??!0;B.current=P,!F&&P&&I(i)},[s,i,I]);const U=Ex(({active:F,movement:[P],velocity:[z],direction:[V],tap:L,event:Q})=>{if(!r||L)return;const q=g.current,X=Q?.currentTarget?.offsetWidth||window.innerWidth,ae=P/X*100,K=-q*A;if(F){m(!0);const ie=K+ae,ne=-(a-1)*A,J=0;let te=ie;ie>J?te=J+(ie-J)*al.EDGE_RESISTANCE:ie<ne&&(te=ne+(ie-ne)*al.EDGE_RESISTANCE),k.start({x:te,immediate:!0})}else{m(!1);const ie=Math.abs(P),ne=ie/X,J=al.FLING_VELOCITY;if(ne>al.PAGE_NAV_FRACTION||z>J&&ie>al.MIN_DRAG_FOR_VELOCITY){const $=V>0,oe=$?Math.max(0,q-1):Math.min(a-1,q+1);if(oe!==q){const we=100/a;k.start({x:-oe*we,immediate:!1,config:$v.fling,onRest:()=>{$?c?.():d?.()}});return}}k.start({x:K,immediate:!1,config:$v.snap})}},{enabled:r,axis:"x",filterTaps:!0,pointer:{touch:!0},from:()=>[0,0]});return{style:w,dragHandlers:r?U():{},isSwiping:f,animateToPanel:E,snapToPanel:I}}const uY=D.memo(function({selectedCategory:i,selectedSymptom:a,selectedGuideline:s,onNavigate:l,isMobile:c,panelIndex:d,isVisible:f,onSwipeBack:m,onSwipeForward:g}){const v=c?2:3,y=`${i?.id}-${a?.id}`,A=dY({enabled:c,panelIndex:Math.min(d,v-1),panelCount:v,isVisible:f,syncKey:y,onSwipeBack:m,onSwipeForward:g}),w=D.useRef(null);D.useEffect(()=>{w.current&&(w.current.scrollTop=0)},[i]);const k=`${100/v}%`;return x.jsx("div",{className:"h-full overflow-hidden",style:{touchAction:"pan-y"},...A.dragHandlers,children:x.jsxs(Z1.div,{className:"flex h-full",style:{width:`${v*100}%`,transform:A.style.x.to(E=>`translateX(${E}%)`)},children:[x.jsx("div",{className:"h-full overflow-y-auto bg-themewhite",style:{flex:`0 0 ${k}`},children:x.jsx("div",{className:"px-2 min-h-full",style:c?{paddingTop:"calc(env(safe-area-inset-top, 0px) + 4rem)"}:void 0,children:x.jsx(Ty,{mobilePanel:"main",selectedCategory:i,selectedSymptom:a,selectedGuideline:s,onNavigate:l})})}),x.jsx("div",{ref:w,className:"h-full overflow-y-auto bg-themewhite",style:{flex:`0 0 ${k}`},children:x.jsx("div",{className:"px-2 min-h-full",style:c?{paddingTop:"calc(env(safe-area-inset-top, 0px) + 4rem)"}:void 0,children:x.jsx(Ty,{mobilePanel:"subcategory",selectedCategory:i,selectedSymptom:a,selectedGuideline:s,onNavigate:l})})}),!c&&x.jsx("div",{className:"h-full overflow-y-auto bg-themewhite",style:{flex:`0 0 ${k}`},children:x.jsx("div",{className:"px-2 min-h-full",children:x.jsx(Ty,{mobilePanel:"guidelines",selectedCategory:i,selectedSymptom:a,selectedGuideline:s,onNavigate:l})})})]})})}),My=({visible:r,variant:i,title:a,subtitle:s})=>{if(!r)return null;const l=i==="success";return x.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center pointer-events-none",children:x.jsxs("div",{className:"bg-themewhite rounded-2xl shadow-2xl border border-tertiary/10 px-8 py-6 flex flex-col items-center gap-3 animate-[fadeInScale_0.3s_ease-out]",children:[x.jsx("div",{className:`w-12 h-12 rounded-full ${l?"bg-green-500/15":"bg-amber-500/15"} flex items-center justify-center`,children:x.jsx("svg",{className:`w-6 h-6 ${l?"text-green-600":"text-amber-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l?x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"}):x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),x.jsx("p",{className:"text-sm font-medium text-primary",children:a}),x.jsx("p",{className:"text-xs text-tertiary/60",children:s})]})})};function D3({type:r,text:i}){const s={warning:{bg:"bg-themeyellow/10",border:"border-themeyellow/30",icon:x.jsx(Tc,{size:13,className:"text-themeyellow shrink-0 mt-0.5"}),label:"WARNING"},caution:{bg:"bg-orange-500/10",border:"border-orange-500/30",icon:x.jsx(Tc,{size:13,className:"text-orange-500 shrink-0 mt-0.5"}),label:"CAUTION"},note:{bg:"bg-themeblue2/10",border:"border-themeblue2/30",icon:x.jsx(Bm,{size:13,className:"text-themeblue2 shrink-0 mt-0.5"}),label:"NOTE"}}[r];return x.jsxs("div",{className:`${s.bg} border ${s.border} rounded-md px-3 py-2 mt-1.5 flex items-start gap-2`,children:[s.icon,x.jsxs("div",{children:[x.jsx("p",{className:"text-[7pt] font-bold tracking-wider opacity-60",children:s.label}),x.jsx("p",{className:"text-xs text-primary/80",children:i})]})]})}function fY({step:r}){return x.jsxs("div",{className:`${r.isSubStep?"ml-6":""}`,children:[x.jsxs("div",{className:"flex items-start gap-2 py-1.5",children:[x.jsx("span",{className:"text-[9pt] text-tertiary/50 font-mono w-6 shrink-0 text-right mt-px",children:r.number}),x.jsx("p",{className:"text-sm text-primary flex-1",children:r.text})]}),r.warning&&x.jsx(D3,{type:"warning",text:r.warning}),r.caution&&x.jsx(D3,{type:"caution",text:r.caution}),r.note&&x.jsx(D3,{type:"note",text:r.note})]})}function hY({taskId:r}){const i=sc(r),{markTaskViewed:a,markTaskCompleted:s,isTaskCompleted:l}=Yx(),c=D.useRef(null),d=l(r);D.useEffect(()=>{a(r)},[r,a]),D.useEffect(()=>{if(d||!c.current)return;const m=new IntersectionObserver(([g])=>{g.isIntersecting&&(s(r),m.disconnect())},{threshold:.5});return m.observe(c.current),()=>m.disconnect()},[r,d,s]);const f=D.useCallback(()=>{s(r)},[r,s]);return i?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsxs("div",{className:"px-4 py-3 md:p-5 pb-12",children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[8pt] text-tertiary/50 font-mono",children:i.taskNumber}),x.jsx("h3",{className:"text-lg font-semibold text-primary",children:i.title}),d&&x.jsxs("span",{className:"inline-flex items-center gap-1 text-[9pt] text-themegreen mt-1",children:[x.jsx(So,{size:12})," Completed"]})]}),i.caution&&x.jsx("div",{className:"mb-4",children:x.jsx(D3,{type:"caution",text:i.caution})}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Conditions"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3.5 py-3",children:x.jsx("p",{className:"text-sm text-primary/80 leading-relaxed",children:i.conditions})})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Standards"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3.5 py-3",children:x.jsx("p",{className:"text-sm text-primary/80 leading-relaxed",children:i.standards})})]}),i.audioAids&&i.audioAids.length>0&&x.jsx(Kk,{audioAids:i.audioAids}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-[9pt] font-semibold text-tertiary/60 uppercase tracking-wider mb-1.5",children:"Performance Steps"}),x.jsx("div",{className:"bg-themewhite2 rounded-lg px-3 py-2",children:i.performanceSteps.map((m,g)=>x.jsx(fY,{step:m},g))})]}),!d&&x.jsx("button",{onClick:f,className:`w-full py-3 rounded-xl bg-themegreen/15 text-themegreen text-sm font-medium
                                   hover:bg-themegreen/25 active:scale-[0.98] transition-all`,children:"Mark as Completed"}),x.jsx("div",{ref:c,className:"h-1"})]})}):x.jsx("div",{className:"h-full flex items-center justify-center text-tertiary/60 text-sm",children:"Task data not available"})}function pY({isVisible:r,onClose:i,taskId:a}){const s=a?sc(a):void 0,l=s?s.title:"Training Task";return x.jsx(of,{isVisible:r,onClose:i,fullHeight:"90dvh",header:{title:l},children:a?x.jsx(hY,{taskId:a}):x.jsx("div",{className:"h-full flex items-center justify-center text-tertiary/60 text-sm",children:"No task selected"})})}function mY({enabled:r,onTimeout:i}){const a=D.useRef(null),s=D.useRef(0),l=D.useRef(i);l.current=i;const c=D.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),d=D.useCallback(()=>{c();const m=$7();m!==0&&(a.current=setTimeout(()=>{l.current()},m))},[c]),f=D.useCallback(()=>{const m=Date.now();m-s.current<1e3||(s.current=m,d())},[d]);D.useEffect(()=>{if(!r){c();return}d();const m=["mousemove","keydown","touchstart","scroll","pointerdown"],g={passive:!0};for(const y of m)document.addEventListener(y,f,g);const v=()=>{document.visibilityState==="hidden"?c():d()};return document.addEventListener("visibilitychange",v),()=>{c();for(const y of m)document.removeEventListener(y,f);document.removeEventListener("visibilitychange",v)}},[r,d,f,c])}const gY=({onUnlock:r})=>{const[i,a]=D.useState(""),[s,l]=D.useState(!1),[c,d]=D.useState(!1),[f,m]=D.useState(ex()),g=D.useRef(null),[v,y]=D.useState(!1),A=D.useRef(!1),[w,k]=D.useState(""),[E,I]=D.useState(!1);D.useEffect(()=>{let P=!1;async function z(){if(!tk())return;const V=await ek();!P&&V&&y(!0)}return z(),()=>{P=!0}},[]),D.useEffect(()=>{!v||A.current||(A.current=!0,N())},[v]),D.useEffect(()=>{if(!f.isLockedOut||f.isPermanentlyLocked){g.current&&clearInterval(g.current);return}return g.current=setInterval(()=>{const P=ex();m(P),P.isLockedOut||(l(!1),g.current&&clearInterval(g.current))},1e3),()=>{g.current&&clearInterval(g.current)}},[f.isLockedOut,f.isPermanentlyLocked]);const T=D.useCallback(async()=>{if(!w)return;await M4(w)?(K7(),Wu(),my(),r()):(I(!0),k(""))},[w,r]),N=D.useCallback(async()=>{try{await xH()&&(Wu(),my(),r())}catch{}},[r]),j=D.useCallback(async P=>{if(await W7(P))Wu(),my(),r();else{const V=J7();m(V),l(!0),d(!0),setTimeout(()=>{d(!1),a("")},400)}},[r]),B=D.useCallback(P=>{f.isLockedOut||(l(!1),a(z=>{const V=z+P;return V.length===4&&j(V),V.length<=4?V:z}))},[f.isLockedOut,j]),U=D.useCallback(()=>{f.isLockedOut||(l(!1),a(P=>P.slice(0,-1)))},[f.isLockedOut]);D.useEffect(()=>{const P=z=>{z.key>="0"&&z.key<="9"?B(z.key):z.key==="Backspace"&&U()};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[B,U]);const F=[["1","2","3"],["4","5","6"],["7","8","9"],[v?"bio":"","0","back"]];return x.jsxs("div",{className:"fixed inset-0 z-[100] bg-themewhite flex flex-col items-center justify-center select-none",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"},children:[x.jsxs("div",{className:"flex flex-col items-center mb-8",children:[x.jsx("div",{className:"w-14 h-14 rounded-full bg-themeblue2/10 flex items-center justify-center mb-4",children:x.jsx(d2,{size:26,className:"text-themeblue2"})}),x.jsx("h1",{className:"text-xl font-bold text-primary tracking-wide",children:"ADTMC"}),x.jsx("p",{className:"text-sm text-tertiary mt-1",children:f.isPermanentlyLocked?"PIN locked. Enter password to unlock.":f.isLockedOut?`Too many attempts. Try again in ${f.remainingSeconds}s`:s?"Incorrect PIN":"Enter your PIN"})]}),x.jsx("div",{className:`flex gap-4 mb-10 ${c?"animate-shake":""}`,children:[0,1,2,3].map(P=>x.jsx("div",{className:`w-3.5 h-3.5 rounded-full transition-all duration-150 ${P<i.length?s?"bg-themeredred scale-110":"bg-themeblue2 scale-110":"bg-themegray1/50"}`},P))}),f.isPermanentlyLocked&&x.jsxs("div",{className:"flex flex-col items-center gap-3 mb-6 w-[270px]",children:[x.jsx("input",{type:"password",value:w,onChange:P=>{k(P.target.value),I(!1)},onKeyDown:P=>P.key==="Enter"&&T(),placeholder:"Account password",autoFocus:!0,className:"w-full px-4 py-3 rounded-lg bg-themewhite2 text-primary text-center text-sm border border-themegray1/30 focus:outline-none focus:border-themeblue2"}),E&&x.jsx("p",{className:"text-xs text-themeredred",children:"Incorrect password"}),x.jsx("button",{onClick:T,disabled:!w,className:"w-full py-3 rounded-lg bg-themeblue2 text-white text-sm font-medium disabled:opacity-40",children:"Unlock"})]}),x.jsx("div",{className:`grid grid-cols-3 gap-x-6 gap-y-3 w-[270px] ${f.isPermanentlyLocked?"opacity-30 pointer-events-none":""}`,children:F.flat().map((P,z)=>P===""?x.jsx("div",{},z):P==="bio"?x.jsx("button",{onClick:N,disabled:f.isLockedOut,className:`w-[74px] h-[74px] rounded-full flex items-center justify-center
                           active:bg-themeblue2/20 transition-colors disabled:opacity-30`,children:x.jsx(nS,{size:26,className:"text-themeblue2"})},z):P==="back"?x.jsx("button",{onClick:U,disabled:f.isLockedOut,className:`w-[74px] h-[74px] rounded-full flex items-center justify-center
                           active:bg-themegray1/20 transition-colors disabled:opacity-30`,children:x.jsx(Z5,{size:24,className:"text-primary"})},z):x.jsx("button",{onClick:()=>B(P),disabled:f.isLockedOut,className:`w-[74px] h-[74px] rounded-full bg-themewhite2 flex items-center justify-center
                         text-2xl font-medium text-primary
                         active:bg-themegray1/40 transition-colors disabled:opacity-30`,children:P},z))})]})},q5=({onUnlock:r,email:i,reason:a="inactivity"})=>{const[s,l]=D.useState(""),[c,d]=D.useState(!1),[f,m]=D.useState(null),[g,v]=D.useState(!1),[y,A]=D.useState(!1),[w,k]=D.useState(navigator.onLine),[E,I]=D.useState(0),[T,N]=D.useState(0),[j,B]=D.useState(0),U=D.useRef(null),F=D.useRef(null);D.useEffect(()=>{const Q=()=>k(!0),q=()=>k(!1);return window.addEventListener("online",Q),window.addEventListener("offline",q),()=>{window.removeEventListener("online",Q),window.removeEventListener("offline",q)}},[]),D.useEffect(()=>{if(T<=Date.now()){B(0),U.current&&clearInterval(U.current);return}const Q=()=>{const q=Math.ceil((T-Date.now())/1e3);q<=0?(B(0),U.current&&clearInterval(U.current)):B(q)};return Q(),U.current=setInterval(Q,1e3),()=>{U.current&&clearInterval(U.current)}},[T]),D.useEffect(()=>{F.current?.focus()},[]);const P=D.useCallback(()=>{I(Q=>{const q=Q+1;if(q>=5){const ee=Math.floor((q-5)/5),X=Math.min(30*Math.pow(2,ee),300);N(Date.now()+X*1e3)}return q})},[]),z=j>0,V=D.useCallback(async Q=>{if(Q.preventDefault(),!(!s.trim()||g||z)){m(null),v(!0);try{const{error:q}=await St.auth.signInWithPassword({email:i,password:s});if(!q){ik(s).catch(()=>{}),I(0),r();return}if(!navigator.onLine||q.message?.toLowerCase().includes("fetch")||q.message?.toLowerCase().includes("network")||q.message?.toLowerCase().includes("failed to fetch")){if(await M4(s)){I(0),r();return}m("Incorrect password (verified offline)"),P()}else m("Incorrect password"),P()}catch{try{if(await M4(s)){I(0),r();return}}catch{}m("Unable to verify. Please try again."),P()}finally{v(!1),l("")}}},[s,g,z,i,r,P]),L=D.useCallback(async()=>{if(!(y||!w))try{await St.auth.resetPasswordForEmail(i),A(!0)}catch{m("Could not send reset email. Try again later.")}},[i,y,w]);return x.jsx("div",{className:"fixed inset-0 z-[100] bg-themewhite flex flex-col items-center justify-center select-none px-6",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"},children:x.jsxs("div",{className:"w-full max-w-sm",children:[x.jsxs("div",{className:"flex flex-col items-center mb-8",children:[x.jsx("div",{className:"w-14 h-14 rounded-full bg-themeblue2/10 flex items-center justify-center mb-4",children:x.jsx(d2,{size:26,className:"text-themeblue2"})}),x.jsx("h1",{className:"text-xl font-bold text-primary tracking-wide",children:"ADTMC"}),x.jsx("p",{className:"text-sm text-tertiary mt-1 text-center",children:a==="initial"?"Enter your password to continue":"Session locked due to inactivity"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Account"}),x.jsx("p",{className:"text-sm text-primary mt-0.5 truncate",children:i})]}),f&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themeredred/10 border border-themeredred/20 text-themeredred text-sm text-center",children:f}),z&&x.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-themeyellow/10 border border-themeyellow/20 text-primary text-sm text-center",children:["Too many attempts. Try again in ",j,"s"]}),y&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themegreen/10 border border-themegreen/20 text-themegreen text-sm text-center",children:"Password reset email sent. Check your inbox."}),x.jsxs("form",{onSubmit:V,className:"space-y-4",children:[x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Password"}),x.jsxs("div",{className:"relative mt-1",children:[x.jsx("input",{ref:F,type:c?"text":"password",value:s,onChange:Q=>l(Q.target.value),placeholder:"Enter your password",autoComplete:"current-password",disabled:z,className:`w-full px-3 py-2.5 pr-10 rounded-lg bg-themewhite2 text-primary text-base
                           border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                           transition-colors placeholder:text-tertiary/30 disabled:opacity-50`}),x.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-tertiary/40 hover:text-tertiary/70 transition-colors",children:c?x.jsx(Ry,{size:18}):x.jsx(am,{size:18})})]})]}),x.jsx("button",{type:"submit",disabled:!s.trim()||g||z,className:`w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium
                       hover:bg-themeblue2/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:g?"Verifying...":"Unlock"})]}),w&&!y&&x.jsx("button",{onClick:L,className:"w-full mt-3 text-xs text-themeblue2 hover:text-themeblue2/80 transition-colors text-center",children:"Forgot Password?"}),x.jsxs("div",{className:"mt-8 flex items-start gap-2.5 p-3 rounded-lg bg-themeblue2/5 border border-themeblue2/10",children:[x.jsx(VE,{size:16,className:"text-themeblue2 shrink-0 mt-0.5"}),x.jsxs("p",{className:"text-xs text-tertiary leading-relaxed",children:[x.jsx("span",{className:"font-medium text-primary",children:"Tip:"})," Enable App Lock in Settings > Security for quicker re-entry with a PIN."]})]})]})})},vY=()=>{const[r,i]=D.useState(""),[a,s]=D.useState(""),[l,c]=D.useState(!1),[d,f]=D.useState(!1),[m,g]=D.useState(!1),[v,y]=D.useState(null),A=zs(E=>E.setPasswordRecovery),w=r.length>=12&&r===a,k=async E=>{if(E.preventDefault(),!w)return;y(null),g(!0);const{error:I}=await St.auth.updateUser({password:r});g(!1),I?y(I.message):A(!1)};return x.jsx("div",{className:"fixed inset-0 z-[100] bg-themewhite flex flex-col items-center justify-center select-none px-6",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"},children:x.jsxs("div",{className:"w-full max-w-sm",children:[x.jsxs("div",{className:"flex flex-col items-center mb-8",children:[x.jsx("div",{className:"w-14 h-14 rounded-full bg-themeblue2/10 flex items-center justify-center mb-4",children:x.jsx(j3,{size:26,className:"text-themeblue2"})}),x.jsx("h1",{className:"text-xl font-bold text-primary tracking-wide",children:"ADTMC"}),x.jsx("p",{className:"text-sm text-tertiary mt-1 text-center",children:"Set your password to complete account setup"})]}),v&&x.jsx("div",{className:"mb-4 p-3 rounded-lg bg-themeredred/10 border border-themeredred/20 text-themeredred text-sm text-center",children:v}),x.jsxs("form",{onSubmit:k,className:"space-y-4",children:[x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"New Password"}),x.jsxs("div",{className:"relative mt-1",children:[x.jsx("input",{type:l?"text":"password",value:r,onChange:E=>i(E.target.value),placeholder:"Min 12 characters",autoComplete:"new-password",className:`w-full px-3 py-2.5 pr-10 rounded-lg bg-themewhite2 text-primary text-base
                           border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                           transition-colors placeholder:text-tertiary/30`}),x.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-tertiary/40 hover:text-tertiary/70 transition-colors",children:l?x.jsx(Ry,{size:18}):x.jsx(am,{size:18})})]}),r.length>0&&r.length<12&&x.jsx("p",{className:"text-xs text-themeredred mt-1",children:"Password must be at least 12 characters"})]}),x.jsxs("label",{className:"block",children:[x.jsx("span",{className:"text-xs font-medium text-tertiary/60 uppercase tracking-wide",children:"Confirm Password"}),x.jsxs("div",{className:"relative mt-1",children:[x.jsx("input",{type:d?"text":"password",value:a,onChange:E=>s(E.target.value),placeholder:"Re-enter password",autoComplete:"new-password",className:`w-full px-3 py-2.5 pr-10 rounded-lg bg-themewhite2 text-primary text-base
                           border border-tertiary/10 focus:border-themeblue2 focus:outline-none
                           transition-colors placeholder:text-tertiary/30`}),x.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-tertiary/40 hover:text-tertiary/70 transition-colors",children:d?x.jsx(Ry,{size:18}):x.jsx(am,{size:18})})]}),a.length>0&&r!==a&&x.jsx("p",{className:"text-xs text-themeredred mt-1",children:"Passwords do not match"})]}),x.jsx("button",{type:"submit",disabled:!w||m,className:`w-full px-4 py-3 rounded-lg bg-themeblue2 text-white font-medium
                       hover:bg-themeblue2/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:m?"Setting Password...":"Set Password"})]})]})})},xY="adtmc_initial_pw_unlocked";function bY({children:r}){const{user:i,isGuest:a}=tg(),[s,l]=D.useState(()=>Ph()&&!p5()),[c,d]=D.useState(!1),[f,m]=D.useState(!1),[g,v]=D.useState(!1);D.useEffect(()=>{Z7().then(()=>{Ph()&&!p5()&&l(!0),v(!0)})},[]),D.useEffect(()=>{const w=()=>{document.visibilityState==="hidden"&&Ph()&&!s&&(m5(),l(!0))};return document.addEventListener("visibilitychange",w),()=>document.removeEventListener("visibilitychange",w)},[s]);const y=D.useCallback(()=>{l(!1),d(!1)},[]),A=D.useCallback(()=>{Ph()?(m5(),l(!0)):d(!0)},[]);return mY({enabled:!!i&&!a&&!s&&!c&&!f,onTimeout:A}),x.jsxs(x.Fragment,{children:[r,s&&x.jsx(gY,{onUnlock:y}),f&&!s&&i?.email&&x.jsx(q5,{onUnlock:()=>{sessionStorage.setItem(xY,"true"),m(!1)},email:i.email,reason:"initial"}),c&&!s&&!f&&i?.email&&x.jsx(q5,{onUnlock:()=>d(!1),email:i.email,reason:"inactivity"}),zs(w=>w.isPasswordRecovery)&&x.jsx(vY,{})]})}class _u extends D.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,a){this.props.onError?.(i,a)}handleRetry=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:x.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[x.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:"Something went wrong"}),x.jsx("p",{className:"text-xs text-tertiary mb-4",children:this.state.error?.message||"An unexpected error occurred"}),x.jsx("button",{type:"button",onClick:this.handleRetry,className:"px-4 py-2 text-xs font-medium text-white bg-themeblue2 rounded-md active:scale-95 transition-all",children:"Try Again"})]}):this.props.children}}const yY=(()=>{const i=new URLSearchParams(window.location.search).get("view");return i&&window.history.replaceState({},"",window.location.pathname),i})(),wY=(()=>{try{const r=localStorage.getItem("postUpdateNav");return r&&localStorage.removeItem("postUpdateNav"),r}catch{return null}})();function AY(){const r=D.useRef(null),{theme:i,toggleTheme:a}=Lz();D.useEffect(()=>zs.getState().init(),[]);const s=Pq(),l=Rq(),[c,d]=D.useState(!1),f=cG(c),{restoreNote:m}=dG(),{user:g}=tg(),v=EG(g?.id),{currentAvatar:y,customImage:A,isCustom:w}=v,k=fG({navigation:s,notesStorage:f,restoreNote:m,initialViewParam:yY,postUpdateNav:wY}),E=uG({enabled:s.isMobile&&s.isMobileColumnB&&!l.searchInput&&!s.isWriteNoteVisible,viewDepth:s.isMobileColumnB?1:0,onSwipeBack:D.useCallback(()=>{s.handleBackClick()},[s])});D.useEffect(()=>{l.searchInput.trim()&&s.expandSearchOnMobile()},[s.isMobile,l.searchInput,s.expandSearchOnMobile]);const I=D.useCallback(F=>{if(F.type==="training"&&F.data?.guidelineType){const P=V=>{s.isMobile?s.setShowTrainingDrawer(V):(k.openTrainingTask(V),s.setShowSettings(!0))},z=V=>{F.data?.categoryRef&&F.data?.symptomRef?(s.handleNavigation({type:"CC",id:F.data.symptomId,icon:F.data.symptomRef.icon,text:F.data.symptomRef.text,data:{categoryId:F.data.categoryId,symptomId:F.data.symptomId,categoryRef:F.data.categoryRef,symptomRef:F.data.symptomRef}}),requestAnimationFrame(()=>P(V))):P(V)};if(F.data.guidelineType==="stp-task"){const V=F.data.taskId;V&&z(V),l.clearSearch();return}if(F.data.guidelineType==="stp"||F.data.guidelineType==="medcom"){const V=F.icon;V&&sc(V)&&z(V),l.clearSearch();return}}s.handleNavigation(F),l.clearSearch()},[s.handleNavigation,l.clearSearch,s.setShowTrainingDrawer,s.isMobile,s.setShowSettings,k.openTrainingTask]),T=D.useCallback(()=>{l.clearSearch(),s.isMobile&&s.isSearchExpanded&&s.setSearchExpanded(!1)},[l,s]),N=()=>{if(l.searchInput){T();return}s.handleBackClick()},j=F=>{F.trim()!==""&&(s.setShowNoteImport(!1),s.expandSearchOnMobile()),l.handleSearchChange(F)},B=l.searchInput?"":s.dynamicTitle,U=D.useMemo(()=>!s.isMobile&&l.searchInput?"search":s.selectedSymptom&&s.showQuestionCard?`algo-${s.selectedSymptom.icon}-${k.algorithmKeySuffix}`:"empty",[s.isMobile,l.searchInput,s.selectedSymptom,s.showQuestionCard,k.algorithmKeySuffix]);return x.jsx("div",{className:"h-screen bg-themewhite md:bg-themewhite2 items-center flex justify-center overflow-hidden",children:x.jsxs("div",{id:"app-drawer-root",className:"max-w-315 shrink flex-col w-full md:rounded-md md:border md:border-[rgba(0,0,0,0.03)] md:shadow-[0px_2px_4px] md:shadow-[rgba(0,0,0,0.1)] overflow-hidden md:m-5 md:h-[85%] h-full space-y-1 relative md:bg-themewhite md:pb-10",children:[x.jsx("div",{className:`${s.isMobile?"absolute top-0 left-0 right-0 z-30 pt-[env(safe-area-inset-top)] backdrop-blur-xs bg-themewhite/10":"relative"} h-13.75 w-full rounded-t-md flex justify-end`,style:s.isMobile?{height:"calc(env(safe-area-inset-top, 0px) + 3.4375rem)"}:void 0,children:x.jsx(SN,{search:{searchInput:l.searchInput,onSearchChange:j,onSearchFocus:s.expandSearchOnMobile,onSearchClear:()=>l.clearSearch(),onSearchCollapse:()=>s.setSearchExpanded(!1),searchInputRef:r,isSearchExpanded:s.isSearchExpanded,onSearchExpandToggle:s.toggleSearchExpanded},actions:{onBackClick:N,onMenuClick:s.toggleMenu,onMenuClose:s.closeMenu,onImportClick:()=>s.setShowNoteImport(!0),onMedicationClick:s.handleShowMedications,onSettingsClick:()=>s.setShowSettings(!0),onInfoClick:s.toggleSymptomInfo},ui:{showBack:s.shouldShowBackButton(!!l.searchInput.trim()),showMenu:s.shouldShowMenuButton(!!l.searchInput.trim()),dynamicTitle:B,medicationButtonText:s.getMedicationButtonText(),isMobile:s.isMobile,isAlgorithmView:s.showQuestionCard,isMenuOpen:s.isMenuOpen,noteSource:s.showQuestionCard?k.activeNoteSource:null,mobileAvatar:{avatarSvg:y.svg,customImage:A,isCustom:w}}})}),x.jsxs("div",{className:"md:h-[94%] h-full overflow-hidden absolute inset-0 md:relative md:inset-auto md:mt-2 md:mx-2",children:[x.jsxs("div",{className:`h-full grid gap-1 transition-[grid-template-columns] duration-300 ease-in-out ${s.mobileGridClass} md:grid-cols-[0.45fr_0.55fr]`,...s.isMobile&&s.isMobileColumnB?E.touchHandlers:{},children:[x.jsx("div",{className:"h-full overflow-hidden",style:{minWidth:0},children:x.jsx(uY,{selectedCategory:s.selectedCategory,selectedSymptom:s.selectedSymptom,selectedGuideline:s.selectedGuideline,onNavigate:I,isMobile:s.isMobile,panelIndex:s.columnAPanel,isVisible:!s.isMobileColumnB,onSwipeBack:s.handleBackClick})}),x.jsx("div",{className:"h-full overflow-hidden",style:{minWidth:0},children:x.jsx("div",{className:"h-full animate-desktopContentIn md:pt-3",children:!s.isMobile&&l.searchInput?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx("div",{className:"px-2 min-h-full",children:x.jsx(n6,{results:l.searchResults,searchTerm:l.searchInput,onResultClick:I,isSearching:l.isSearching})})}):s.selectedSymptom&&s.showQuestionCard?x.jsx("div",{className:"h-full overflow-hidden",children:x.jsx(_u,{children:x.jsx(Yz,{selectedSymptom:s.selectedSymptom,onExpandNote:k.handleExpandNote,isMobile:s.isMobile,initialCardStates:k.restoredAlgorithmState?.cardStates,initialDisposition:k.restoredAlgorithmState?.disposition,noteSource:k.activeNoteSource},`algo-${s.selectedSymptom.icon}-${k.algorithmKeySuffix}`)})}):x.jsx("div",{className:"h-full flex items-center justify-center text-secondary text-sm",children:"Select a symptom to see algorithm"})},U)})]}),s.isMobile&&l.searchInput&&x.jsx("div",{className:"absolute inset-0 z-20 bg-themewhite animate-fadeIn",children:x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx("div",{className:"px-2 min-h-full",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 4rem)"},children:x.jsx(n6,{results:l.searchResults,searchTerm:l.searchInput,onResultClick:I,isSearching:l.isSearching})})})})]}),s.isMenuOpen&&s.isMobile&&x.jsx("div",{className:"fixed inset-0 z-20",onClick:s.closeMenu}),x.jsx(_u,{children:x.jsx(Fz,{isVisible:s.showNoteImport,onClose:()=>s.setShowNoteImport(!1),initialViewState:k.importInitialView,onImportSuccess:k.handleImportSuccess,isMobile:s.isMobile})}),x.jsx(_u,{children:x.jsx(YV,{isVisible:s.showSettings,onClose:()=>{s.setShowSettings(!1),k.resetSettingsPanel()},isDarkMode:i==="dark",onToggleTheme:a,isMobile:s.isMobile,initialPanel:k.settingsInitialPanel,initialSelectedId:k.myNotesInitialSelectedId,initialTrainingTaskId:k.initialTrainingTaskId,notes:f.notes,clinicNotes:f.clinicNotes,onDeleteNote:f.deleteNote,onDeleteClinicNote:f.deleteClinicNote,onEditNote:f.updateNote,onViewNote:k.handleViewNote,avatar:v,onNotePanelChange:d,syncStatus:{isOnline:f.isOnline,isSyncing:f.isSyncing,pendingCount:f.pendingCount,errorCount:f.errorCount,lastSyncTime:f.lastSyncTime}})}),x.jsx(_u,{children:x.jsx(cY,{isVisible:s.showMedications,onClose:()=>s.setShowMedications(!1),selectedMedication:s.selectedMedication,onMedicationSelect:s.handleMedicationSelect})}),x.jsx(_u,{children:x.jsx(oY,{isVisible:s.showSymptomInfo,onClose:()=>s.setShowSymptomInfo(!1),selectedSymptom:s.selectedSymptom,selectedCategory:s.selectedCategory,onNavigate:I})}),x.jsx(_u,{children:x.jsx(pY,{isVisible:s.showTrainingDrawer,onClose:()=>s.setShowTrainingDrawer(null),taskId:s.trainingDrawerTaskId})}),s.writeNoteData&&x.jsx(_u,{children:x.jsx(Mq,{isVisible:s.isWriteNoteVisible,disposition:s.writeNoteData.disposition,algorithmOptions:s.writeNoteData.algorithmOptions,cardStates:s.writeNoteData.cardStates,onExpansionChange:s.closeWriteNote,onNoteSave:k.handleNoteSave,onNoteDelete:k.handleNoteDelete,onNoteUpdate:k.handleNoteUpdate,existingNoteId:k.activeNoteId,existingEncodedText:k.activeNoteEncodedText,selectedSymptom:s.writeNoteData.selectedSymptom,isMobile:s.isMobile,initialPage:s.writeNoteData.initialPage,initialHpiText:s.writeNoteData.initialHpiText,initialPeText:s.writeNoteData.initialPeText,noteSource:k.activeNoteSource,onAfterSave:k.handleAfterSave,timestamp:s.writeNoteData.timestamp})}),x.jsx(vG,{}),x.jsx(yG,{}),x.jsx(wG,{message:k.storageError,onDismiss:k.clearStorageError}),x.jsx(My,{visible:k.showImportSuccessModal,variant:"success",title:"Note Imported Successfully",subtitle:"Saved with external source tag"}),x.jsx(My,{visible:k.showNoteSavedModal,variant:"success",title:"Note Saved",subtitle:"Saved to My Notes"}),x.jsx(My,{visible:k.showImportDuplicateModal,variant:"warning",title:"Note Already Saved",subtitle:"This note already exists in your saved notes"})]})})}function SY(){return x.jsx(Uz,{children:x.jsx(bY,{children:x.jsx(AY,{})})})}const G5=ya("App");QP().then(r=>{r.connected?G5.info(`Supabase database connection established (${r.latencyMs}ms)`):G5.warn("Supabase database connection failed:",r.error)});"caches"in window&&caches.delete("pwa-cache-v1");"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{for(const i of r)i.active?.scriptURL.includes("serviceWorker.js")&&i.unregister()});BC.createRoot(document.getElementById("root")).render(x.jsx(D.StrictMode,{children:x.jsx(SY,{})}));const V5=document.querySelector(".splash-bar-fill");V5&&V5.addEventListener("animationend",()=>{const r=document.getElementById("splash");r&&(r.classList.add("splash-out"),setTimeout(()=>r.remove(),Li.SLIDE_ANIMATION))},{once:!0});export{jw as _,hw as b,_C as g,o1 as l};
